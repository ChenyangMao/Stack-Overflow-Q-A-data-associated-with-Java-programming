{"items":[{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"user_id":2945996,"display_name":"rimesc"},"edited":false,"comment_id":134399752,"body":"Have you considered the <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/autoconfigure/condition/ConditionalOnMissingClass.html\" rel=\"nofollow noreferrer\">ConditionalOnMissingClass</a> annotation? Presumably there are classes that won’t be present on the class path if the <code>reporting-core</code> module is not in the dependencies."},{"owner":{"user_id":5716914,"display_name":"Johnyb"},"edited":false,"comment_id":134405619,"body":"@rimesc i did but the configuration from api module is scanned first and thus the bean is always created since condiitonal in the annotation is true at that time"}],"owner":{"user_id":5716914,"display_name":"Johnyb"},"view_count":34,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1683632199,"question_id":76208891,"body":"<p>I have <code>reporting-api</code> module that provides utility classes and so on for reporting, besides that also provides <code>NoOpReportService</code> that should be created if no other reporting service bean has been created:</p>\n<pre><code>@Configuration\n@PropertySource(...)\npublic class ReportServiceConfiguration {\n\n    @Bean\n    public ReportService noOpReportService() {\n        return new NoOpReportService ();\n    }\n}\n</code></pre>\n<p>Now i have CORE module that is optional and provides implementation for reporting service:</p>\n<pre><code>@Configuration\n@PropertySource(...)\npublic class DefaultReportServiceConfig {\n\n    @Bean\n    public ReportService defaultReportService(...) {\n        return new DefaultReportServiceImpl(...);\n    }\n\n}\n</code></pre>\n<p>What i want to achieve: if <code>reporting-core</code> module is present in POM <code>DefaultReportServiceImpl</code> should be created - that is not problem and default behavior since its <code>@Configuration</code>file.</p>\n<p>However, if and only if  the <code>reporting-core</code> module is not present i want the <code>NoOpReportService</code> to be created. I tried to use</p>\n<pre><code>    @Bean\n    @ConditionalOnMissingBean\n    public ReportService noOpReportService(...) {\n        return new NoOpReportService (...);\n    }\n</code></pre>\n<p>But this config file is always scanned before <code>reporting-core</code> module's config and thus the <code>NoOpReportService </code> is always created.</p>\n<p>The <code>reporting-api</code> does not have dependency on <code>reporting-core</code> module. I dont want to hardcode some condition on specific <code>ReportService</code> impementation since user can implement his own <code>reporting-service</code> and not use <code>reporting-core</code> module but his own.</p>\n<p>Thanks for help!</p>\n"},{"tags":["java","amazon-web-services","amazon-sagemaker","aws-feature-store"],"comments":[{"owner":{"user_id":9796588,"display_name":"Marc Karp"},"edited":false,"comment_id":134402156,"body":"You mentioned, 15-20ms and 30-40ms in CloudWatch. What metrics are these?  What p99 latencies are you comparing to, is it end to end latency? How are you measuring it?"},{"owner":{"user_id":9312181,"display_name":"tusharRawat"},"edited":false,"comment_id":134407110,"body":"@MarcKarp, In cloudwatch for sagemaker we are using: p99 of <code>ModelLatency</code> and <code>OverheadLatency</code> metric as stated in the docs : <a href=\"https://docs.aws.amazon.com/sagemaker/latest/dg/monitoring-cloudwatch.html#cloudwatch-metrics-feature-store\" rel=\"nofollow noreferrer\">docs.aws.amazon.com/sagemaker/latest/dg/&hellip;</a> And For feature-store we are using <code>Latency</code> metrics as mentioned."},{"owner":{"user_id":9312181,"display_name":"tusharRawat"},"edited":false,"comment_id":134407125,"body":"How we are measuring the end to end p99 latency on application level for sagemaker and feature-store: <code>histogram_quantile(0.99, sum(rate(resilience4j_circuitbreaker_calls_seconds_bucket{na&zwnj;&#8203;me=&quot;awsSageMaker&quot;}[1&zwnj;&#8203;m])) by (le))</code> . and same query with method name awsFeatureMaker as well.. @MarcKarp."}],"owner":{"user_id":9312181,"display_name":"tusharRawat"},"view_count":32,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1683602675,"question_id":76205646,"body":"<p>We have recently done an integration with AWS SageMaker and FeatureStore for one of our use-case. On Cloudwatch, we could see the <code>p99: 15-20ms</code> for sagemaker and <code>p99: 30-40ms</code> for feature-store.</p>\n<p>But we are observing the high latencies while using JAVA AWS sdk 2.0, to call to feature-store, somewhat around. <code>p99: 150ms</code> for sagemaker and <code>p99: 100ms</code> for feature-store.</p>\n<p>We have the containerised spring-boot application running on EKS and here we are calling FS and SM.</p>\n<p>Sample code :-</p>\n<p><strong>feature-store call</strong></p>\n<pre><code>   private static SageMakerFeatureStoreRuntimeClient featureStoreRuntimeClient;\n\n    @PostConstruct\n    public void init() {\n        ClientOverrideConfiguration clientOverrideConfiguration = ClientOverrideConfiguration.builder()\n                .apiCallTimeout(Duration.of(featureStoreConfig.getApiCallAttemptTimeout(), ChronoUnit.MILLIS))\n                .retryPolicy(RetryPolicy.builder().numRetries(0).build())\n                .build();\n\n        featureStoreRuntimeClient = SageMakerFeatureStoreRuntimeClient.builder()\n                .overrideConfiguration(clientOverrideConfiguration)\n                .credentialsProvider(DefaultCredentialsProvider.create())\n                .region(Region.AP_SOUTHEAST_1).build();\n }\n</code></pre>\n<p><strong>Sagemaker call</strong>:</p>\n<pre><code>private static SageMakerRuntimeClient sageMakerRuntimeClient;\n\n@PostConstruct\npublic void init() {\n    ClientOverrideConfiguration clientOverrideConfiguration = ClientOverrideConfiguration.builder()\n            .apiCallTimeout(Duration.of(sageMakerConfig.getApiCallAttemptTimeout(), ChronoUnit.MILLIS))\n            .retryPolicy(RetryPolicy.builder().numRetries(0).build())\n    .build();\n\n    sageMakerRuntimeClient = SageMakerRuntimeClient.builder()\n            .overrideConfiguration(clientOverrideConfiguration)\n            .credentialsProvider(DefaultCredentialsProvider.create())\n            .region(Region.AP_SOUTHEAST_1)\n            .build();\n}\n</code></pre>\n<p>What could we possible cause for such a high latency ?</p>\n"},{"tags":["python","java","pip","jython","pdfminer"],"owner":{"user_id":21391846,"display_name":"Cuervo 616"},"view_count":28,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1683561393,"question_id":76202252,"body":"<p>I trying to connect a Python script with a Java project that uses Maven. To achieve this, I need to install a module into the Jython environment. I have tried the following approach.</p>\n<pre><code>C:\\Users\\lordonez\\.m2\\repository&gt;java -jar C:\\Users\\lordonez\\.m2\\repository\\org\\python\\jython-standalone\\2.7.2rc1\\jython-standalone-2.7.2rc1.jar -m pip install pdfminer-20191010\nDEPRECATION: A future version of pip will drop support for Python 2.7.\nCollecting pdfminer-20191010\n  ERROR: Certificate did not match expected hostname: pypi.org. Certificate: {'notAfter': 'May 30 18:53:39 2024 GMT', 'subject': ((('commonName', 'www.python.org'),),), 'subjectAltName': (('DNS', 'www.python.org'), ('DNS', '*.python.org'), ('DNS', 'docs.python.org'), ('DNS', 'downloads.python.org'), ('DNS', 'pypi.python.org'))}\n</code></pre>\n<pre><code>C:\\Users\\lordonez\\.m2\\repository&gt;java -jar C:\\Users\\lordonez\\.m2\\repository\\org\\python\\jython-standalone\\2.7.2rc1\\jython-standalone-2.7.2rc1.jar -m pip install --trusted-host pypi.org --trusted-host files.pythonhosted.org C:\\Users\\lordonez\\.m2\\repository\\org\\python\\jython-standalone\\2.7.2rc1\\pdfminer-20191010.tar.gz\nDEPRECATION: A future version of pip will drop support for Python 2.7.\nProcessing c:\\users\\lordonez\\.m2\\repository\\org\\python\\jython-standalone\\2.7.2rc1\\pdfminer-20191010.tar.gz\n    ERROR: Error [Errno 2] No such file or directory while executing command python setup.py egg_info\nERROR: Could not install packages due to an EnvironmentError: [Errno 2] No such file or directory\n\n\nC:\\Users\\lordonez\\.m2\\repository&gt;java -jar C:\\Users\\lordonez\\.m2\\repository\\org\\python\\jython-standalone\\2.7.2rc1\\jython-standalone-2.7.2rc1.jar -m pip install --trusted-host pypi.org --trusted-host files.pythonhosted.org C:\\Users\\lordonez\\.m2\\repository\\org\\python\\jython-standalone\\2.7.2rc1\\pdfminer-20191010.zip\nDEPRECATION: A future version of pip will drop support for Python 2.7.\nProcessing c:\\users\\lordonez\\.m2\\repository\\org\\python\\jython-standalone\\2.7.2rc1\\pdfminer-20191010.zip\n    ERROR: Error [Errno 2] No such file or directory while executing command python setup.py egg_info\nERROR: Could not install packages due to an EnvironmentError: [Errno 2] No such file or directory\n</code></pre>\n<p>I need help to connect a Python script. I don't mind if I don't use Jython, but it's currently the only solution I can find.</p>\n"},{"tags":["java","javafx","scenebuilder"],"comments":[{"owner":{"user_id":203657,"display_name":"kleopatra"},"edited":false,"comment_id":134376300,"body":"hmm .. can&#39;t reproduce (plain code, don&#39;t expect any difference when using fxml): webview and it&#39;s containing stage seem to appear at the same time. How do measure those intermittent &quot;frames&quot;?"},{"owner":{"user_id":203657,"display_name":"kleopatra"},"edited":false,"comment_id":134376764,"body":"curious: why the runlater?"},{"owner":{"user_id":21848316,"display_name":"Monomantle"},"edited":false,"comment_id":134379019,"body":"@kleopatra The runLater should will the <code>stage.show()</code> on the JavaFx Application Thread. I used a recording software to see how many frames it took before the WebView showed with its contents."},{"owner":{"user_id":203657,"display_name":"kleopatra"},"edited":false,"comment_id":134379040,"body":"yeah, I know what runlater does, thanks for the reminder :) But: the notification from the worker already happens on the fx application thread, so wondering if you had another reason for doing it."},{"owner":{"user_id":21848316,"display_name":"Monomantle"},"edited":false,"comment_id":134379076,"body":"@kleopatra I did not know that. I just wanted to make sure I was running code on the right Thread."},{"owner":{"user_id":203657,"display_name":"kleopatra"},"edited":false,"comment_id":134379145,"body":"well, the java doc mentions it (a bit in-passing, though): <i>[worker&#39;s] state is observable and available to JavaFX applications and is usable from the main JavaFX Application thread</i> :)"},{"owner":{"user_id":21848316,"display_name":"Monomantle"},"edited":false,"comment_id":134379164,"body":"@kleopatra I will add images of the &quot;frames&quot; in question."},{"owner":{"user_id":21848316,"display_name":"Monomantle"},"edited":false,"comment_id":134379848,"body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/253537/discussion-between-monomantle-and-kleopatra\">continue this discussion in chat</a>."},{"owner":{"user_id":203657,"display_name":"kleopatra"},"edited":false,"comment_id":134379933,"body":"no, I&#39;m not the chatty type ;)"}],"answers":[{"owner":{"user_id":21848316,"display_name":"Monomantle"},"up_vote_count":0,"is_accepted":false,"creation_date":1683524913,"answer_id":76197813,"body":"<p>The problem occurs because of the stage decorator and the way that the <code>start()</code> method works, in general. A workaround to this is to set the following in MyApp:</p>\n<pre><code>stage = new Stage(StageStyle.TRANSPARENT); //Replace stage = primaryStage with this\nstage.setOpacity(0);\nstage.show();\n</code></pre>\n<p><code>StageStyle.TRANSPARENT</code> removes the decoration, which will, i believe, prioritize the WebView to load faster because it doesn't need to be loaded. <code>stage.setOpacity(0);</code> hides the stage while it loads in the background with <code>stage.show();</code></p>\n<p>and in the <code>Platform.runLater();</code> method, set the following:</p>\n<pre><code>stage.setOpacity(1);\n</code></pre>\n<p>This will reveal the stage along with the loaded WebView when you launch the application. I have verified it by recording myself starting the app and analyzing the recording frame-byframe to see how well it works. My results are that it loads with the frame at a 60th of a second (cannot attest for anything in-between). The previous code has about 2 frames where the WebView was not loaded. Hence, there is a very noticable difference in the two.</p>\n<p>The downside is that you will have to make your down custom decorator.</p>\n"}],"owner":{"user_id":21848316,"display_name":"Monomantle"},"view_count":64,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1683523842,"question_id":76197745,"body":"<p>I am trying to load a WebView with its contents at the same time as the form.</p>\n<p>For simplicity sake, this application consists of a WebView inside of a Pane. The WebView has an fx:id of webView.</p>\n<p>I am using JavaFX 20, Java 17, and SceneBuilder 19.</p>\n<p>Here is a simple recreation of what I tried to do:</p>\n<h1>Main:</h1>\n<pre><code>package example;\n \nimport javafx.application.Platform;\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n \npublic class MyApp extends Application {\n    private static Stage stage;\n\n    @Override\n    public void start(Stage primaryStage) throws Exception{\n        Parent fxml = FXMLLoader.load(this.getClass().getResource(&quot;pathToFxmlFile&quot;));\n        Scene scene = new Scene(fxml);\n\n        stage = primaryStage;\n        stage.setScene(scene);\n    }\n    public static void main(String[] args) {\n        launch(args);\n    }\n    public static void showStage(){\n        Platform.runLater(()-&gt;stage.show());\n    }\n}\n</code></pre>\n<h1>Controller:</h1>\n<pre><code>package example;\n\nimport java.net.URL;\nimport java.util.ResourceBundle;\n\nimport javafx.beans.value.ChangeListener;\nimport javafx.concurrent.Worker;\nimport javafx.fxml.FXML;\nimport javafx.fxml.Initializable;\nimport javafx.scene.web.*;\n\npublic class MyController implements Initializable{\n  @FXML private WebView webView;\n  private WebEngine webEngine;\n\n  @Override\n  public void initialize(URL arg0, ResourceBundle arg1){\n    ChangeListener&lt;Object&gt; onDocChange = (obs, oldState, newState) -&gt; {\n        if (newState == Worker.State.SUCCEEDED){\n            MyApp.showStage();\n        }else if(newState == Worker.State.FAILED){\n            webView.setVisible(false);\n            MyApp.showStage();\n        }\n    };\n    webEngine = webView.getEngine();\n    webEngine.getLoadWorker().stateProperty().addListener(onDocChange);\n    webEngine.load(&quot;urlToSite&quot;);\n  }\n}\n</code></pre>\n<p><strong>Goal:</strong> My goal is to run the <code>start()</code> method and initialize the necessary components in the JavaFX Application Thread and then wait for the loading of the WebView to finish and then call <code>Platform.runLater();</code> with <code>stage.show()</code>, since the WebView would be loaded by then.</p>\n<p><strong>Result:</strong> For a few frames, the stage will show an empty WebView or no Webview before loading the WebView.</p>\n<p><strong>Question:</strong> How do I get the WebView, with all of its contents, to show at the same time as the Stage without it loading in a blank WebView for a split second?</p>\n<p><a href=\"https://i.stack.imgur.com/1Z7oF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1Z7oF.png\" alt=\"With StageStyle.TRASNSPARENT | W/ or Without Platform.runLater | Original Opacity\" /></a>\n<a href=\"https://i.stack.imgur.com/eoUEZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eoUEZ.png\" alt=\"With StageStyle.TRASNSPARENT | Without Platform.runLater() | Changing Opaciy\" /></a>\n<a href=\"https://i.stack.imgur.com/Ikk6z.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ikk6z.png\" alt=\"Answer\" /></a></p>\n<p>In every variation that I tried, with or without <code>StageStyle</code>, <code>PlatForm.runLater();</code>, or <code>setOpacrity</code>, there are frames with no loaded WebView or an empty WebView (A variation of the first two images). The last image is the correct one (I cropped part of it). These images were captured via a screen recording tool and a video editor.</p>\n"},{"tags":["java","spring-boot","integration-testing","wiremock"],"comments":[{"owner":{"user_id":592355,"display_name":"xerx593"},"edited":false,"comment_id":134367423,"body":"so for a 404 it is sufficient, that (the url or) <i>one</i> of the (<code>withXXX</code> <i>before</i> , not inside <code>willReturn(...)</code>) conditions doesn&#39;t match."},{"owner":{"user_id":592355,"display_name":"xerx593"},"edited":false,"comment_id":134367467,"body":"tips (regarding post): 1. obfuscate &quot;api key&quot;! 2. please prefer &quot;real json&quot; (/error/code/text/curl(!)...) to &quot;image json(/...)&quot; 3. add client/reproduction code. Regarding the issue:  start with very basic stub (comment all .withXXX <i>before</i> willReturn), successively add/test them back"},{"owner":{"user_id":19582453,"display_name":"Shruti Mishra"},"edited":false,"comment_id":134373927,"body":"As suggested, I have removed all the checks before will return and just tried to pass the url with get method, but still recieved the same result. Can you please suggest some solution on this."},{"owner":{"user_id":1008361,"display_name":"Tom"},"edited":false,"comment_id":134377023,"body":"Is there any chance you have another instance of WireMock running in the background (e.g. standalone) and you&#39;re accidentally connecting to that one instead of the one you&#39;re starting as an extension?"},{"owner":{"user_id":19582453,"display_name":"Shruti Mishra"},"edited":false,"comment_id":134377569,"body":"No, Actually wiremock is being running on port 8082, and the other application (which is java spring boot application is being run on port 8080). In 8082, no other instance is running."}],"answers":[{"owner":{"user_id":592355,"display_name":"xerx593"},"up_vote_count":0,"is_accepted":false,"creation_date":1683558905,"answer_id":76201954,"body":"<p>Pheeew, that was not that easy one!</p>\n<ol>\n<li><a href=\"https://wiremock.org/docs/spring-boot/\" rel=\"nofollow noreferrer\">https://wiremock.org/docs/spring-boot/</a> points (currently) &quot;to nirvana&quot; (404)</li>\n<li>We want to test &quot;multiple backend&quot; integration, which is complicated per se.</li>\n</ol>\n<p>I could update <a href=\"https://rieckpil.de/spring-boot-integration-tests-with-wiremock-and-junit-5/\" rel=\"nofollow noreferrer\">https://rieckpil.de/spring-boot-integration-tests-with-wiremock-and-junit-5/</a> (which looks very like your question) to latest versions and got it working like so:</p>\n<ul>\n<li><a href=\"https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.6&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=lombok,webflux\" rel=\"nofollow noreferrer\">(spring-boot)started simple (current, maven, java17, webflux+lombok)</a></li>\n<li>Main, (fictive) demo application, which calls (get on) &quot;some&quot; <code>${ext_base_url}</code> REST API, and (tries to) returns its results as a <code>Flux</code> of <code>SomeDto</code>:\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport lombok.EqualsAndHashCode;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.stereotype.Service;\nimport org.springframework.web.reactive.function.client.WebClient;\nimport reactor.core.publisher.Flux;\n\n@SpringBootApplication\npublic class DemoApp {\n\n  public static void main(String[] args) {\n    SpringApplication.run(DemoApp.class, args);\n  }\n\n  @Service // 1.\n  static class MyService {\n\n    private final WebClient webClient;\n\n    public MyService(WebClient.Builder webClientBuilder,\n        @Value(&quot;${ext_base_url}&quot;) String baseUrl) { // 2.\n      this.webClient = webClientBuilder.baseUrl(baseUrl).build();\n    }\n\n    public Flux&lt;SomeDto&gt; someRestCall() { // 3.\n      return this.webClient.get().uri(&quot;/parties&quot;)\n          .retrieve().bodyToFlux(SomeDto.class);\n    }\n  }\n\n  @lombok.Value(staticConstructor = &quot;of&quot;)\n  @EqualsAndHashCode(onlyExplicitlyIncluded = true) \n  static class SomeDto { // dto\n\n    @EqualsAndHashCode.Include // consider only this, lazy, sorry\n    Integer id;\n    Integer userId;\n    String title;\n    boolean completed;\n  }\n}\n</code></pre>\n</li>\n<li>To mock the &quot;external&quot; API for integration tests we add (current, latest):\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n  &lt;groupId&gt;com.github.tomakehurst&lt;/groupId&gt;\n  &lt;artifactId&gt;wiremock&lt;/artifactId&gt;\n  &lt;version&gt;3.0.0-beta-8&lt;/version&gt; &lt;!-- update! --&gt;\n  &lt;scope&gt;test&lt;/scope&gt;\n&lt;/dependency&gt;\n</code></pre>\n</li>\n<li>This (&quot;full&quot; spring boot application) test passes:\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport com.example.DemoApp.MyService;\nimport com.example.DemoApp.SomeDto;\nimport org.junit.jupiter.api.Test;\n\nimport static com.github.tomakehurst.wiremock.client.WireMock.*;\nimport com.github.tomakehurst.wiremock.junit5.WireMockExtension;\nimport java.io.IOException;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.extension.RegisterExtension;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport reactor.core.publisher.Flux;\nimport reactor.test.StepVerifier;\n\n@SpringBootTest\nclass MyWireMockTest {\n\n  @RegisterExtension\n  static WireMockExtension wm = WireMockExtension.newInstance()\n      // dynamic port is the default\n      .build();\n\n  @DynamicPropertySource\n  static void configureProperties(DynamicPropertyRegistry registry) {\n    registry.add(&quot;ext_base_url&quot;, wm::baseUrl); // replaces spring property with actual wire mock value\n  }\n\n  @Autowired\n  MyService testee;\n\n  @Test\n  void test_something_with_wiremock() throws IOException {\n    // given:\n    wm.stubFor(get(&quot;/parties&quot;) // static instance!\n     // add *successively* &quot;withXXX&quot; conditions here...\n     .willReturn(aResponse()\n       .withHeader(&quot;Content-Type&quot;, &quot;application/json&quot;)\n       .withBody(&quot;&quot;&quot;\n        [\n          {&quot;userId&quot;: 1,&quot;id&quot;: 1,&quot;title&quot;: &quot;Learn Spring Boot 3.0&quot;, &quot;completed&quot;: false},\n          {&quot;userId&quot;: 1,&quot;id&quot;: 2,&quot;title&quot;: &quot;Learn WireMock&quot;, &quot;completed&quot;: true}\n        ]\n        &quot;&quot;&quot;)\n      )\n    );\n    // when:\n    Flux&lt;SomeDto&gt; response = testee.someRestCall();\n    // then:\n    StepVerifier.create(response)\n        .expectNext(SomeDto.of(1, null, null, false))\n        .expectNext(SomeDto.of(2, null, null, false))\n        .verifyComplete();\n  }\n\n  @AfterEach // cleanup (per test method)\n  void afterEach() {\n      wm.resetAll();\n  }\n}\n</code></pre>\n</li>\n</ul>\n<p>Refs:</p>\n<ul>\n<li><a href=\"https://rieckpil.de/spring-boot-integration-tests-with-wiremock-and-junit-5/\" rel=\"nofollow noreferrer\">https://rieckpil.de/spring-boot-integration-tests-with-wiremock-and-junit-5/</a></li>\n<li><a href=\"https://medium.com/reactive-programming-in-springboot-using-webflux/testing-flux-mono-with-junit-e6150bf3635\" rel=\"nofollow noreferrer\">https://medium.com/reactive-programming-in-springboot-using-webflux/testing-flux-mono-with-junit-e6150bf3635</a></li>\n</ul>\n"},{"owner":{"user_id":592355,"display_name":"xerx593"},"up_vote_count":0,"is_accepted":false,"creation_date":1683639679,"answer_id":76210003,"body":"<p>According to comments, here a sample &quot;docker/standalone&quot; solution:</p>\n<ol>\n<li><p>(Optional) Pull the image. I used <code>main-alpine</code> tag, but hope it works also well with <a href=\"https://hub.docker.com/r/wiremock/wiremock\" rel=\"nofollow noreferrer\">the others</a>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker pull wiremock/wiremock:main-alpine\n</code></pre>\n</li>\n<li><p>(Optional) Create a docker volume (<a href=\"https://docs.docker.com/engine/reference/commandline/volume_create/\" rel=\"nofollow noreferrer\">1</a>, <a href=\"https://docs.docker.com/storage/volumes/\" rel=\"nofollow noreferrer\">2</a>):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker volume create wiremock_data\n</code></pre>\n</li>\n<li><p>Create &quot;wiremock mappings&quot; (in docker volume or dedicated path).\nI placed a <code>parties.json</code> file in my <code>${docker_volumes_location}/wiremock_data[/_data]/mappings</code>:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n   &quot;request&quot;: {\n     &quot;method&quot;: &quot;GET&quot;,\n     &quot;url&quot;: &quot;/parties&quot;\n   },\n   &quot;response&quot;: {\n     &quot;status&quot;: 200,\n     &quot;jsonBody&quot;: [\n         {&quot;userId&quot;: 1,&quot;id&quot;: 1,&quot;title&quot;: &quot;Learn Spring Boot 3.0&quot;, &quot;completed&quot;: false},\n         {&quot;userId&quot;: 1,&quot;id&quot;: 2,&quot;title&quot;: &quot;Learn WireMock&quot;, &quot;completed&quot;: true}\n      ],\n      &quot;headers&quot;: {\n          &quot;Content-Type&quot;: &quot;application/json&quot;\n      }\n   }\n}\n</code></pre>\n<p>..it should result in <code>/home/wiremock/mappings/parties.json</code> in container's file system, where &quot;parties&quot; is freely chosen/all jsons in this folder get &quot;scanned&quot;.</p>\n</li>\n<li><p>After:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker run \\\n  -it --rm \\\n  -p 8443:8443 \\\n  -v wiremock_data:/home/wiremock \\\n  wiremock/wiremock:main-alpine \\\n  --https-port 8443 --verbose  \n</code></pre>\n<p>with arguments for:</p>\n<ul>\n<li>interactive, clean up (<code>-it</code>, <code>--rm</code>)</li>\n<li>publish port (<code>-p</code>)</li>\n<li>volume mount (<code>-v</code>)</li>\n<li>image name/id/tag</li>\n<li>container arguments (<code>https-port, verbose</code>)</li>\n</ul>\n</li>\n<li><p>..and successful container start, we can &quot;browse&quot; <code>https://localhost:8443/parties</code>:</p>\n<ul>\n<li>with curl:\n<pre class=\"lang-bash prettyprint-override\"><code>&gt;curl --insecure 'https://localhost:8443/parties'           \n[{&quot;userId&quot;:1,&quot;id&quot;:1,&quot;title&quot;:&quot;Learn Spring Boot 3.0&quot;,&quot;completed&quot;:false}, \n{&quot;userId&quot;:1,&quot;id&quot;:2,&quot;title&quot;:&quot;Learn WireMock&quot;,&quot;completed&quot;:true}]\n</code></pre>\n</li>\n<li>, postman:\n<a href=\"https://i.stack.imgur.com/eNuXH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eNuXH.png\" alt=\"postman screenshot\" /></a></li>\n<li>and browser:\n<a href=\"https://i.stack.imgur.com/VO3BW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VO3BW.png\" alt=\"browser screenshot\" /></a></li>\n</ul>\n<p>... after disabling (self-signed) SSL validation.</p>\n</li>\n<li><p>(<code>https://localhost:8443/__admin/</code> shows a (JSON) overview of all current mappings.)</p>\n</li>\n<li><p>(For mapping modifications, we have to restart the container.)</p>\n</li>\n</ol>\n<h3>Details and References:</h3>\n<ul>\n<li><a href=\"https://hub.docker.com/r/wiremock/wiremock\" rel=\"nofollow noreferrer\">https://hub.docker.com/r/wiremock/wiremock</a></li>\n<li><a href=\"https://docs.docker.com/\" rel=\"nofollow noreferrer\">https://docs.docker.com/</a></li>\n<li><a href=\"https://wiremock.org/\" rel=\"nofollow noreferrer\">https://wiremock.org/</a></li>\n</ul>\n<h3>To run (shown) spring boot test against docker (wiremock)</h3>\n<p>We:</p>\n<ol>\n<li>Run the docker instance as described (1. - 7.), on <code>https://localhost:8443</code>.</li>\n<li>Remove &quot;wiremock&quot; dependency(/ies) from (spring-boot) pom.xml.</li>\n<li>(Without changing the application,) Adjust test to:\n<pre class=\"lang-java prettyprint-override\"><code>package com.example;\n\nimport javax.net.ssl.SSLException;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.context.TestConfiguration;\nimport org.springframework.boot.web.reactive.function.client.WebClientCustomizer;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.http.client.reactive.ReactorClientHttpConnector;\n\nimport com.example.DemoApp.MyService;\nimport com.example.DemoApp.SomeDto;\n\nimport io.netty.handler.ssl.SslContext;\nimport io.netty.handler.ssl.SslContextBuilder;\nimport io.netty.handler.ssl.util.InsecureTrustManagerFactory;\nimport reactor.core.publisher.Flux;\nimport reactor.netty.http.client.HttpClient;\nimport reactor.test.StepVerifier;\n\n@SpringBootTest(\n  /* this sets base url for the client: */\n  properties = &quot;ext_base_url=https://localhost:8443&quot;\n)\nclass MyWireMockTest {\n\n  // RE: How to disable SSL validation for springboot-webclient test? Voila:\n  @TestConfiguration // 1. (test configuration!) &quot;Adds to&quot; current spring context (doesn't &quot;replace&quot;)\n  static class MyInsecureWebClientConfig { // should be static!\n   @Bean // WC customizer bean! (spring-boot, babe)\n   WebClientCustomizer wcCustomizr() throws SSLException {\n     // combining with [6]:\n     SslContext context = SslContextBuilder.forClient()\n        .trustManager(InsecureTrustManagerFactory.INSTANCE)\n        .build();\n     return wcb -&gt; {\n      wcb.clientConnector(new ReactorClientHttpConnector(\n         HttpClient.create().secure(t -&gt; t.sslContext(context))));\n     };\n   }\n  }\n\n  @Autowired\n  MyService testee;\n\n  @Test\n  void test_something_with_wiremock() throws InterruptedException {\n   // given: config, wiremock instance...\n   // when:\n   Flux&lt;SomeDto&gt; response = testee.someRestCall();\n   // then:\n   StepVerifier.create(response)\n      .expectNext(SomeDto.of(1, null, null, false))\n      .expectNext(SomeDto.of(2, null, null, false))\n      .verifyComplete();\n  }\n\n}\n</code></pre>\n<a href=\"https://stackoverflow.com/q/45418523/592355\">[6]</a></li>\n</ol>\n"}],"owner":{"user_id":19582453,"display_name":"Shruti Mishra"},"view_count":110,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1683455571,"question_id":76193384,"body":"<p>I have been using wiremock for integration testing with spring boot, getting 404 exception.</p>\n<p>With message as &quot;Request did not match, as no stubs registered&quot;</p>\n<p>I have tried with wiremock server and wiremock rule instance.</p>\n<p>Tried with Wiremock's JUnit jupiter extension approach and Application context initializer approach, nothing seems to be work.</p>\n<pre><code>package fi.op.bcsio.application.wiremock;\n\nimport static com.github.tomakehurst.wiremock.client.WireMock.aResponse;\nimport static com.github.tomakehurst.wiremock.client.WireMock.configureFor;\nimport static com.github.tomakehurst.wiremock.client.WireMock.containing;\nimport static com.github.tomakehurst.wiremock.client.WireMock.equalTo;\nimport static com.github.tomakehurst.wiremock.client.WireMock.get;\nimport static com.github.tomakehurst.wiremock.client.WireMock.urlEqualTo;\nimport static com.github.tomakehurst.wiremock.core.WireMockConfiguration.options;\nimport static org.junit.Assert.assertEquals;\nimport static org.junit.Assert.assertThat;\nimport static org.junit.jupiter.api.Assertions.assertAll;\nimport static org.springframework.http.MediaType.APPLICATION_JSON_VALUE;\n\nimport java.util.function.Supplier;\n\nimport static com.github.tomakehurst.wiremock.client.WireMock.*;\n\nimport javax.annotation.PostConstruct;\n\nimport org.junit.Assert;\nimport org.junit.ClassRule;\nimport org.junit.Rule;\nimport org.junit.Test;\nimport org.junit.jupiter.api.AfterEach;\nimport org.junit.jupiter.api.extension.RegisterExtension;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.http.HttpStatus;\nimport org.springframework.http.MediaType;\nimport org.springframework.http.ResponseEntity;\nimport org.springframework.stereotype.Component;\nimport org.springframework.test.context.ContextConfiguration;\nimport org.springframework.test.context.DynamicPropertyRegistry;\nimport org.springframework.test.context.DynamicPropertySource;\nimport org.springframework.test.web.reactive.server.WebTestClient;\nimport org.springframework.web.client.RestTemplate;\n\nimport com.github.tomakehurst.wiremock.WireMockServer;\nimport com.github.tomakehurst.wiremock.client.WireMock;\nimport com.github.tomakehurst.wiremock.common.ConsoleNotifier;\nimport com.github.tomakehurst.wiremock.core.WireMockConfiguration;\nimport com.github.tomakehurst.wiremock.junit.WireMockClassRule;\nimport com.github.tomakehurst.wiremock.junit.WireMockRule;\nimport com.github.tomakehurst.wiremock.junit5.WireMockExtension;\n\nimport org.assertj.core.api.Assertions;\n\n@Component\n//@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\n//@ContextConfiguration(initializers = {WireMockInitializer.class})\npublic class LuukuWiremockStub {\n\n//    @Autowired\n//    private WebTestClient webTestClient;\n    \n    \n//  @ClassRule\n//  public static WireMockRule wireMockRule = new WireMockRule(WireMockConfiguration.DYNAMIC_PORT);\n\n      @RegisterExtension\n      static WireMockExtension wireMockServer = WireMockExtension.newInstance()\n        .options(WireMockConfiguration.options().dynamicPort())\n        .build();\n\n//    @DynamicPropertySource\n//    static void configureProperties(DynamicPropertyRegistry registry) {\n//      registry.add(&quot;http://op-common.apis.jty.op-palvelut.net/bankingparties/basic/info/v1/parties?context=Pankin ostopolku&quot;, wireMockServer::baseUrl);\n//    }\n\n//    @AfterEach\n//    void resetAll() {\n//      // we're using one WireMock server for the test class (see static on the WireMockExtension definition)\n//        wireMockRule.resetAll();\n//    }\n\n      @Test\n      void testGetAllTodosShouldReturnDataFromClient() {\n          wireMockServer.stubFor(\n          WireMock.get(&quot;/parties&quot;)\n          \n          .withHeader(&quot;x-request-id&quot;, matching(&quot;[0-9a-fA-F]{8}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{12}&quot;))\n          \n            .withHeader(&quot;x-session-id&quot;, matching(&quot;[0-9a-fA-F]{8}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{4}\\\\\\\\-[0-9a-fA-F]{12}&quot;))\n                      \n            .withHeader(&quot;x-api-key&quot;, equalTo(&quot;X8Jy6AEXqJjdBx&quot;))\n                      \n            .withHeader(&quot;Authorization&quot;, matching(&quot;Bearer [a-zA-Z0-9&amp;._-]{1,}&quot;))\n            \n            .withQueryParam(&quot;context&quot;, equalTo(&quot;Pankin ostopolku&quot;))\n          \n            .willReturn(aResponse()\n            \n            .withHeader(&quot;Content-Type&quot;, MediaType.APPLICATION_JSON_VALUE)\n              \n            .withBody(&quot;[{\\&quot;userId\\&quot;: 1,\\&quot;id\\&quot;: 1,\\&quot;title\\&quot;: \\&quot;Learn Spring Boot 3.0\\&quot;, \\&quot;completed\\&quot;: false},&quot; +\n                &quot;{\\&quot;userId\\&quot;: 1,\\&quot;id\\&quot;: 2,\\&quot;title\\&quot;: \\&quot;Learn WireMock\\&quot;, \\&quot;completed\\&quot;: true}]&quot;))\n        );\n        \n        // ... controller invocation using the WebTestClient\n      }\n}\n\n</code></pre>\n<p>Postman console error:\n<img src=\"https://i.stack.imgur.com/MhEgU.png\" alt=\"Postman console error\" />\nEclipse Console error:\n<img src=\"https://i.stack.imgur.com/ggDNV.png\" alt=\"Eclipse Console error\" /></p>\n"},{"tags":["java","security","ocsp","jca","pkix"],"comments":[{"owner":{"user_id":2311528,"display_name":"Lonzak"},"edited":false,"comment_id":134436775,"body":"Another way would be to implement a custom PKIXRevocationChecker class..."}],"answers":[{"owner":{"user_id":3034938,"display_name":"Pushpendra Kumar"},"up_vote_count":0,"is_accepted":false,"creation_date":1683631987,"answer_id":76208865,"body":"<p><code>sun.security.validator.ValidatorException</code> exception does not provide direct access to the <code>CertPathValidatorException</code> or its message.</p>\n<p>However, you can catch the <code>ValidatorException</code> and inspect its cause to see if it is a <code>CertPathBuilderException</code>. If it is, you can then catch its cause and check if it is a <code>CertPathValidatorException</code>. If it is, you can then access its message using the <code>getMessage()</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n    // your code that throws the ValidatorException\n} catch (ValidatorException e) {\n    Throwable cause = e.getCause();\n    if (cause instanceof CertPathBuilderException) {\n        CertPathBuilderException cpbe = (CertPathBuilderException) cause;\n        Throwable cpbeCause = cpbe.getCause();\n        if (cpbeCause instanceof CertPathValidatorException) {\n            CertPathValidatorException cpve = (CertPathValidatorException) cpbeCause;\n            String message = cpve.getMessage();\n            // handle or display the message here\n        }\n    }\n}\n</code></pre>\n<p>catching the exception and inspecting its cause may not be the most elegant solution, but it should allow you to access the underlying <code>CertPathValidatorException</code> message that you are interested</p>\n"}],"owner":{"user_id":11906,"display_name":"Paralife"},"view_count":127,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1683450067,"question_id":76192992,"body":"<p>I am getting the well known <code>PKIX path building failed</code> exception, and to find the underlying cause i have to enable java.security.debug=certpath and look at the logs. In my case the cause is</p>\n<blockquote>\n<p>certpath: SunCertPathBuilder.depthFirstSearchForward(): final verification failed: java.security.cert.CertPathValidatorException: Certificate does not specify OCSP responder</p>\n</blockquote>\n<p>but my problem is that I cannot get to the above underlying cause programmatically because the exception thrown(see below) is in the sun.security.validator package which I cannot import and even if I could I am not sure it contains any references to the underlying cause (please correct me if I am wrong)</p>\n<p>I am using Java 17</p>\n<p>The relevant code is:</p>\n<pre><code>PKIXBuilderParameters params = new PKIXBuilderParameters(trustAnchors, null);\nparams.addCertStore(intermediateCAcertStore);\nparams.addCertPathChecker((PKIXCertPathChecker) CertPathValidator.getInstance(&quot;PKIX&quot;).getRevocationChecker());\n\nTrustManagerFactory tmf = TrustManagerFactory.getInstance(&quot;PKIX&quot;);\ntmf.init(new CertPathTrustManagerParameters(params));\nX509TrustManager tm = (X509TrustManager) tmf.getTrustManagers()[0];\ntm.checkClientTrusted(new X509Certificate[]{ targetCert }), &quot;RSA&quot;);\n</code></pre>\n<p>which throws:</p>\n<pre><code>Exception in thread &quot;main&quot; sun.security.validator.ValidatorException: PKIX path building failed: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n  at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:439)\n  at java.base/sun.security.validator.PKIXValidator.engineValidate(PKIXValidator.java:306)\n  at java.base/sun.security.validator.Validator.validate(Validator.java:264)\n  at java.base/sun.security.ssl.X509TrustManagerImpl.checkTrusted(X509TrustManagerImpl.java:242)\n  at java.base/sun.security.ssl.X509TrustManagerImpl.checkClientTrusted(X509TrustManagerImpl.java:107)\n  at com.example.TrustManagerTest.test1(TrustManagerTest.java:98)\n  at com.example.TrustManagerTest.main(TrustManagerTest.java:54)\nCaused by: sun.security.provider.certpath.SunCertPathBuilderException: unable to find valid certification path to requested target\n  at java.base/sun.security.provider.certpath.SunCertPathBuilder.build(SunCertPathBuilder.java:141)\n  at java.base/sun.security.provider.certpath.SunCertPathBuilder.engineBuild(SunCertPathBuilder.java:126)\n  at java.base/java.security.cert.CertPathBuilder.build(CertPathBuilder.java:297)\n  at java.base/sun.security.validator.PKIXValidator.doBuild(PKIXValidator.java:434)\n... 6 more\n</code></pre>\n<p>so no way for me to see that the real cause is the OCSP check, unless i enable security debugging and search in the logs. But I want to programmatically discover it and maybe handle it, or at least somehow get hold of the</p>\n<blockquote>\n<p>java.security.cert.CertPathValidatorException: Certificate does not\nspecify OCSP responder</p>\n</blockquote>\n<p>message and display it.</p>\n<p>Any suggestions?</p>\n"},{"tags":["java","pdfbox","truetype","ligature"],"comments":[{"owner":{"user_id":535646,"display_name":"Tilman Hausherr"},"edited":false,"comment_id":134364881,"body":"It&#39;s not implemented in PDFBox. There&#39;s still a lot of work to do."},{"owner":{"user_id":535646,"display_name":"Tilman Hausherr"},"edited":false,"comment_id":134375450,"body":"You can also use the unicode directly, like &quot;aﬄuent&quot;, this does work for Arial. (copy character from <a href=\"https://www.compart.com/de/unicode/U+FB04\" rel=\"nofollow noreferrer\">compart.com/de/unicode/U+FB04</a> )"},{"owner":{"user_id":12344762,"display_name":"linux_user36"},"edited":false,"comment_id":134381922,"body":"So I&#39;d support &quot;ff&quot;, &quot;fi&quot;, &quot;fl&quot;, &quot;ffi&quot; and &quot;ffl&quot; out of the box, and then ask the user for codepoints of additional ligatures if they wish for them? Thanks for bringing that idea to my attention!"},{"owner":{"user_id":535646,"display_name":"Tilman Hausherr"},"edited":false,"comment_id":134430509,"body":"Your text made me look again at some code I had and this time I got it to work, see <a href=\"https://issues.apache.org/jira/browse/PDFBOX-5599\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/PDFBOX-5599</a> . This will be available only in 3.0 and for now only in a snapshot build (in a few hours) <a href=\"https://repository.apache.org/content/groups/snapshots/org/apache/pdfbox/pdfbox-app/3.0.0-SNAPSHOT/\" rel=\"nofollow noreferrer\">repository.apache.org/content/groups/snapshots/org/apache/&hellip;</a>"}],"owner":{"user_id":12344762,"display_name":"linux_user36"},"view_count":37,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1683395981,"question_id":76190359,"body":"<p>I've been using PDFBox instead of iText 7 for a few days now, and it's given me a bunch of new freedoms, but the main reason I changed was so I could enable ligatures in my PDF documents (for free).</p>\n<p>I've already managed to enable oldstyle numerals and the likes (though the constant warning messages are starting to get on my nerves), but the <code>liga</code> feature doesn't seem to work (which was probably just getting my hopes up a little too high). I've tested the code below with a variety of fonts, including Minion Pro, EB Garamond and Alegreya.</p>\n<pre class=\"lang-java prettyprint-override\"><code>TrueTypeFont font = new TTFParser().parse(file);\nfont.enableGsubFeature(&quot;onum&quot;); // complains, but works: &quot;WARNING: Trying to un-substitute a never-before-seen gid: ...&quot;\nfont.enableGsubFeature(&quot;liga&quot;); // has no effect\n\nreturn PDType0Font.load(doc, font, false);\n</code></pre>\n<p>So instead, I've decided it'd be enough for me to just get access to e.g. a list of the font's supported ligatures and their mappings (probably to the Private Use Area), so I can just substitute ligatures manually (not caring about <code>toUnicode</code> for the moment). Problem is, I can't seem to find a way of doing that. Any ideas? (also for other approaches, this just currently seems to me the most likely one to work)</p>\n<p>I'd say this isn't a duplicate of <a href=\"https://stackoverflow.com/q/32067168/12344762\">pdfbox - How to join glyphs into ligatures in rendered pdf</a>, as the person there asked for built-in support, whereas I'm attempting to manually apply ligatures using FontBox.</p>\n"},{"tags":["java","maven","jooq","querydsl","jooq-codegen-maven"],"answers":[{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"up_vote_count":0,"is_accepted":false,"creation_date":1683528339,"answer_id":76198069,"body":"<p>This is documented in the manual page of the <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-jpa/\" rel=\"nofollow noreferrer\"><code>JPADatabase</code></a>. The <code>JPADatabase</code> doesn't use any annotation processing hook into the compilation process and generate your <code>TableImpl</code>. Instead, it uses previously compiled entities and runs Hibernate DDL generation on them. That means, you <em>have to</em> compile your entities <em>first</em>, and only then generate your jOOQ code, and only then compile your DAO. See the manual section on how to organise your dependencies:</p>\n<pre><code>                +-------------------+\n                | Your JPA entities |\n                +-------------------+\n                     ^         ^\n          depends on |         | depends on\n                     |         |\n  +---------------------+   +---------------------+\n  | jOOQ codegen plugin |   | Your application    |\n  +---------------------+   +---------------------+\n                     |         |\n           generates |         | depends on\n                     v         v\n             +-------------------------+\n             | jOOQ generated classes  |\n             +-------------------------+\n</code></pre>\n<p>If you think about what happens behind the scenes, that appears to be a much cleaner approach than relying on annotation processing's various caveats and limitations caused by the fact that they <em>have to</em> happen during compilation.</p>\n<p>JPA entities are self-contained, and can be designed as a re-usable libraries for various other componnents. DAOs will depend on both JPA entities and/or jOOQ code, and other lower level stuff.</p>\n"}],"owner":{"user_id":10442485,"display_name":"wwc"},"view_count":26,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1683381377,"question_id":76189277,"body":"<p>My pojo(JPA entities) and DAO was in same package, I configured jooq-codegen-maven to generate TableImpl code  from JPA entities. and DAO's code uses TableImpl.</p>\n<p>the strange thing is ,</p>\n<ol>\n<li><p>when the first time I compile (<code>mvn clean</code> and <code>install</code>), the codegen will fetch  <strong>0 tables</strong> . And my DAO will get <strong>compile error (unknown class)</strong> because the TableImpl was not created. And the compile process of JPA entities(in same package) was skipped.</p>\n</li>\n<li><p>Now, If I comment-out all DAO code and compile. Jooq also fetch 0 tables, but the other code of the package (including 9 JPA entities) will compile success</p>\n</li>\n<li><p>I have to compile again, Jooq will fetch <strong>9 tables</strong>, and generate theirs TableImpl.</p>\n</li>\n<li><p>now I can un-comment the DAO, and compile again, finally everything will success. (Apparently, It's not an option to compile a project for three times).</p>\n</li>\n</ol>\n<p>If I change to QueryDSL (using apt-maven-plugin), it will success in the first time. Seems like QueryDSL first create Q-class and then compile the other code, but Jooq only generate code depends on a fully success compile, which is impossible. just like a dead-lock.</p>\n<p>My pom.xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>            &lt;plugin&gt;\n                &lt;groupId&gt;com.mysema.maven&lt;/groupId&gt;\n                &lt;artifactId&gt;apt-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;1.1.3&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;process&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;outputDirectory&gt;target/generated-sources/java&lt;/outputDirectory&gt;\n                            &lt;processor&gt;com.querydsl.apt.jpa.JPAAnnotationProcessor&lt;/processor&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.jooq&lt;/groupId&gt;\n                &lt;artifactId&gt;jooq-codegen-maven&lt;/artifactId&gt;\n                &lt;version&gt;${jooq.version}&lt;/version&gt;\n\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;jooq-codegen&lt;/id&gt;\n                        &lt;phase&gt;generate-sources&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n\n                &lt;configuration&gt;\n                    &lt;generator&gt;\n                        &lt;database&gt;\n                            &lt;name&gt;org.jooq.meta.extensions.jpa.JPADatabase&lt;/name&gt;\n                            &lt;inputSchema&gt;PUBLIC&lt;/inputSchema&gt;\n                            &lt;outputSchemaToDefault&gt;true&lt;/outputSchemaToDefault&gt;\n                            \n                            &lt;properties&gt; \n                                &lt;property&gt;\n                                    &lt;key&gt;packages&lt;/key&gt;\n                                    &lt;value&gt;com.mypack.business&lt;/value&gt;\n                                &lt;/property&gt;\n \n                                &lt;property&gt;\n                                    &lt;key&gt;useAttributeConverters&lt;/key&gt;\n                                    &lt;value&gt;true&lt;/value&gt;\n                                &lt;/property&gt; \n                                &lt;property&gt;\n                                    &lt;key&gt;unqualifiedSchema&lt;/key&gt;\n                                    &lt;value&gt;none&lt;/value&gt;\n                                &lt;/property&gt;\n                            &lt;/properties&gt;\n                        &lt;/database&gt;\n                        &lt;target&gt;\n                            &lt;packageName&gt;com.mypack.business.repository.entity.jooq&lt;/packageName&gt;\n                            &lt;directory&gt;target/generated-sources/java&lt;/directory&gt;\n                        &lt;/target&gt;\n                    &lt;/generator&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>So how can I make Jooq compile success for just one time?</p>\n<p>Or, if it's difficult, can I spread pojo and DAO (including jooq codegen) into two project to solve it?</p>\n"},{"tags":["java","android","service","call","incallservice"],"owner":{"user_id":8231841,"display_name":"Saify"},"view_count":37,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1683379627,"question_id":76189149,"body":"<p>I am using <strong>InCallService</strong> for making calls in my app. Its working fine for incoming and outgoing calls. <strong>onCallAdded()</strong> is called when I receive or make a call.</p>\n<p><strong>CallService:</strong></p>\n<pre><code>public class CallService extends InCallService {\n\n    Context context;\n    InCallService inCallService;\n    String number;\n    int callType;\n\n    @RequiresApi(api = Build.VERSION_CODES.Q)\n    @Override\n    public void onCallAdded(Call call) {\n        super.onCallAdded(call);\n\n        context = this;\n        inCallService = this;\n\n        number = Objects.requireNonNull(call.getDetails().getHandle()).getSchemeSpecificPart();\n        callType = call.getDetails().getCallDirection();\n    }\n\n    @Override\n    public void onCallRemoved(Call call) {\n        super.onCallRemoved(call);\n    }\n}\n</code></pre>\n<p><strong>Manifest.xml</strong></p>\n<pre><code>&lt;service\n            android:name=&quot;.services.CallService&quot;\n            android:enabled=&quot;true&quot;\n            android:exported=&quot;true&quot;\n            android:permission=&quot;android.permission.BIND_INCALL_SERVICE&quot;&gt;\n            &lt;meta-data\n                android:name=&quot;android.telecom.IN_CALL_SERVICE_UI&quot;\n                android:value=&quot;true&quot; /&gt;\n\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.telecom.InCallService&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/service&gt;\n</code></pre>\n<p>The problem is that I am unable to detect an incoming call when app is already making a call and the call is in ringing state and not connected yet. onCallAdded() is not called in this case. Maybe there is a method in InCallService that detects this scenario. How can I detect call in this scenario. Need Help.</p>\n"},{"tags":["java","enums","refactoring"],"comments":[{"owner":{"user_id":1744230,"display_name":"QBrute"},"edited":false,"comment_id":134357595,"body":"Sorry I don&#39;t quite understand the problem here. Do the refactoring on a separate branch. Let the IDE move your enum. Push the branch and notify the others that there&#39;s a big change, so they can pull that branch. I don&#39;t see why there&#39;s the need for &quot;Rinse and Repeat&quot; here, it&#39;s a one-off action. If they commit regularly and merge new changes regularly into their feature branches, there shouldn&#39;t be any issues. If not, then that&#39;s a &quot;Them&quot; problem. If you&#39;re all working on the same branch all the time, or no branches at all, or directly on &quot;master&quot;, then it&#39;s time to rework your git work flow."},{"owner":{"user_id":1023519,"display_name":"Zopper"},"edited":false,"comment_id":134360872,"body":"@QBrute: Too large project with thousands of people working on it daily, and I need to change too many places at once. Every time I solve one merge conflict, it takes about a day before I can really merge it (test builds, review...) and by that time, new conflict pops out so I can&#39;t merge and have to solve the new one. And there is no chance I can change the company workflow or make everyone stop for a couple of days."},{"owner":{"user_id":438992,"display_name":"Dave Newton"},"edited":false,"comment_id":134360961,"body":"And <b>your</b> branch shouldn’t have merge conflicts; <b>theirs</b> may, and they need to resolve them."},{"owner":{"user_id":1023519,"display_name":"Zopper"},"edited":false,"comment_id":134361181,"body":"If they merge their changes before I do, it&#39;s my branch that has a conflict.  And usually there is no problem, I just need to rename something that&#39;s used very frequently."}],"answers":[{"owner":{"user_id":10118965,"display_name":"davidalayachew"},"up_vote_count":0,"is_accepted":false,"creation_date":1683412225,"answer_id":76191456,"body":"<p>Here is a copy from your comment above, since my answer will be referencing it.</p>\n<p><em><strong>@QBrute: Too large project with thousands of people working on it daily, and I need to change too many places at once. Every time I solve one merge conflict, it takes about a day before I can really merge it (test builds, review...) and by that time, new conflict pops out so I can't merge and have to solve the new one. And there is no chance I can change the company workflow or make everyone stop for a couple of days</strong></em></p>\n<p>I'll start off by saying that, based off the little info you gave us, your coworkers and the company process for handling package rearrangements seem to be the ones at fault here. But you also mentioned that you can't really change the company workflow easily.</p>\n<p>The part that stuck out to me was you saying that testing the merge conflict fix would take a full day. Maybe, instead of making the code change yourself, you should add a unit test instead.</p>\n<p>The unit test should be simple.</p>\n<ul>\n<li>Check to see if the old enum is found on the class/module path. Fail if true.</li>\n<li>Check to see if the new enum is found on the class/module path. Fail if false.</li>\n</ul>\n<p>When these tests fail, add a braindead simple error message that tells your coworkers <em><strong>EXACTLY</strong></em> what they need to do to fix this unit test. The unit test should also help slow down the incoming code because a failed unit test should prevent new builds from going out. Plus, a failed unit test should allow this to show up front and center to your fellow developers (assuming they check/respond to unit test failures).</p>\n<p>Since adding a unit test is a non-functional change (and shouldn't even exist in your deployed library/executable), you can skip the whole test/review/deploy cycle that seems to be taking you so long. You simply commit then merge.</p>\n<p>You would need to do it for basically every project though. Should be a simple copy and paste though.</p>\n"}],"owner":{"user_id":1023519,"display_name":"Zopper"},"view_count":58,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1683356522,"question_id":76187553,"body":"<p><em>Update: <strong>I'm really not looking for tips how to change company processes</strong>, how to throw the problem at others, etc. Rather, <strong>I was hoping to find if there is some obscure bit of Java knowledge</strong> that would allow me to abuse Enums for a temporary workaround. After asking this question, <strong>I managed to</strong> find a quieter period and <strong>release my change</strong>. But I'm still curious if there is something in the dark corners of Java that could be helpful in a situation like this.</em></p>\n<p>I have a huge, old (but still actively developed) codebase in Java with dozens of packages and I need to move an enum between them.</p>\n<p>There is this enum that's inside of a class:</p>\n<pre><code>package com.foo.bar;\npublic class ParentClass\n{\n    public Enum MyEnum\n    {\n        ONE, TWO;\n    }\n}\n</code></pre>\n<p>This enum is widely used across the entire application. I need to extract it from the parent class and move it into a different package:</p>\n<pre><code>package com.enums;\npublic Enum MyEnum\n{\n    ONE, TWO;\n}\n</code></pre>\n<p>The standard way how to do it is a simple refactoring with the use of IDE. Which works. But... This leads to changes in many places and because the codebase is actively developed by different teams and many people, I keep getting merge conflicts, new usages of this enum are appearing, and so on. So I'm stuck in a whack-a-mole situation. I bring my change up to date, run test suites and build it, but before that is done (the whole loop takes at least a day, not speaking about a new code review), I end up with another conflict. Rinse, repeat.</p>\n<p>Telling everyone to stop working while I merge this is not possible. If it was a normal class and not an enum, I could try to use inheritance: move it to the new location and replace the original location with an empty child class, and then deal with the usages one by one. But Java enums can't be extended.</p>\n<p>Is there any way how I could break this change into multiple stages (so I do not need to change all the imports where it is used) instead of having to do it all at once, in an atomic change?</p>\n"},{"tags":["java","language-lawyer","jls","checked-exceptions"],"comments":[{"owner":{"user_id":84538,"display_name":"jon hanson"},"edited":false,"comment_id":134340230,"body":"No, @MattDS18 is correct, the behaviour is odd. In the first example, the main method is throwing an exception whose static type is Throwable, which is a checked exception, and therefore should give rise to a unreported exception compiler error, but it doesn&#39;t. The even more odd thing is, if you cast it to a Throwable (i.e. <code>throw (Throwable)t</code> then the compiler will (correctly) complain, even though you haven&#39;t actually changed its static type."},{"owner":{"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"edited":false,"comment_id":134344903,"body":"@jon-hanson an intersting thing happens when you declare <code>public static void foo() throws IOException</code> because now the Java Compiler says &quot;error: unreported exception <b>IOException</b>; must be caught or declared to be thrown&quot; which shows that the compiler exactly knows what exception can be thrown there."},{"owner":{"user_id":84538,"display_name":"jon hanson"},"edited":false,"comment_id":134344959,"body":"IThe compiler is evidently performing some static analysis. My guess is that if there is no exception decleration on the method, then it infers the only possible exception being caught is Error, which is unchecked. If you add a throws Throwable (or any other checked exception) then it gives rise to the expected compiler error as Throwable is checked."},{"owner":{"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"edited":false,"comment_id":134345061,"body":"@jon-hanson the compiler checks which exceptions can be thrown in the <code>try</code> block. No guess needed, the feature is in the Java 7 release notes: <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/language/catch-multiple.html#rethrow\" rel=\"nofollow noreferrer\">Rethrowing Exceptions with More Inclusive Type Checking</a>"}],"owner":{"user_id":1610579,"display_name":"MattDs17"},"view_count":45,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1683233992,"question_id":76177332,"body":"<p>JLS 11.2.3 says that it is a compile time error if a method body can throw a checked exception and it does not declare the class (or a parent class) in its <code>throws</code> clause.\nIn the following code, <code>Throwable</code> is a checked exception (per JLS 11.1.1) being thrown in the <code>catch</code> clause of <code>main</code>:</p>\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    try {\n      foo();\n    } catch (Throwable t) {\n      throw t;\n    }\n  }\n\n  public static void foo() {\n    throw new RuntimeException();\n  }\n}\n</code></pre>\n<p>However, javac compiles it without any errors.\nIf we change the signature of <code>foo</code> to declare that it <code>throws Throwable</code>, we get an error as expected:</p>\n<pre><code>public class Main {\n  public static void main(String[] args) {\n    try {\n      foo();\n    } catch (Throwable t) {\n      throw t;\n    }\n  }\n\n  public static void foo() throws Throwable {\n    throw new RuntimeException();\n  }\n}\n</code></pre>\n<pre><code>$ javac Main.java\nMain.java:6: error: unreported exception Throwable; must be caught or declared to be thrown\n      throw t;\n      ^\n1 error\n</code></pre>\n<p>It seems like javac figures out (in the first example) that, since <code>foo</code> does not declare any checked exceptions, the caught <code>Throwable t</code> must be an unchecked exception, and so <code>main</code> only ever rethrows an unchecked exception, and thus it does not need a <code>throws</code> clause.\nIs there anything in the JLS that explains this behaviour?</p>\n"},{"tags":["java","segmentation-fault","crash","jvm"],"comments":[{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":134334583,"body":"Not an answer, just a possible way to side-step the problem. You are using Java 11 which includes the modern <code>java.time</code> classes, whereas <code>GregorianCalendar</code> is now considered to be <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/legacy.html\" rel=\"nofollow noreferrer\">legacy</a>, has drawbacks, and should be avoided wherever possible. Try using a <code>ZonedDateTime</code> instead."},{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":134334617,"body":"Otherwise, can you provide a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> for the crash?"},{"owner":{"user_id":12332082,"display_name":"kingofworms"},"edited":false,"comment_id":134334796,"body":"@andrewJames: sadly, the crash only happens when the whole application is running. When I call the relevant methods in an endless loop via a separate test application, the crash never happens."},{"owner":{"user_id":12332082,"display_name":"kingofworms"},"edited":false,"comment_id":134334823,"body":"@andrewJames: we went back to OpenJDK 11.0.18 and everything works as expected. Anyway, it would be great to understand how a HLT can trigger a segmentation fault."},{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":134334886,"body":"Understood. You should add that note about 11.0.18 to the question!"},{"owner":{"user_id":12869601,"display_name":"rsc"},"edited":false,"comment_id":134390144,"body":"I see the same issue here on Rocky Linux 8 (which is a RHEL 8 clone): Crash with java-11-openjdk-headless-11.0.19.0.7-1.el8_7.x86_64, works with java-11-openjdk-headless-11.0.18.0.10-2.el8_7.x86_64 (the package version directly before the update). The issue must have been introduced with this <a href=\"https://git.centos.org/rpms/java-11-openjdk/c/1f3d944bf7293313162fbf89e7d256b91aa106a6?branch=c8\" rel=\"nofollow noreferrer\">git commit</a>."}],"answers":[{"owner":{"user_id":3448419,"display_name":"apangin"},"up_vote_count":0,"is_accepted":true,"creation_date":1683241054,"answer_id":76177865,"body":"<p><code>HLT</code> is a privileged instruction. When executed in user mode, it triggers general protection fault. In Linux, this results in <code>SIGSEGV</code> being sent to the offending process.</p>\n<p>HotSpot JVM emits <code>HLT</code> instruction in the dynamically generated code only in situations never supposed to happen. So there is apparently a JVM bug. Rerun the JVM with <code>-XX:+ShowMessageBoxOnError</code> to get more information on the particular assertion failure.</p>\n"}],"owner":{"user_id":12332082,"display_name":"kingofworms"},"view_count":177,"up_vote_count":2,"accepted_answer_id":76177865,"answer_count":1,"score":2,"creation_date":1683209106,"question_id":76174098,"body":"<p>There seems to be a bug in OpenJDK 11.0.19 which sometimes leads to a crash in java.util.GregorianCalendar.computeTime().</p>\n<p><strong>Final Update</strong>: thanks to @apangin, I found out that Linux sends a SIGSEGV instead of SIGILL (which I was expecting). See last line of function <a href=\"http://elixir.free-electrons.com/linux/v4.9/source/arch/x86/kernel/traps.c#L487\" rel=\"nofollow noreferrer\">http://elixir.free-electrons.com/linux/v4.9/source/arch/x86/kernel/traps.c#L487</a></p>\n<p><strong>Update</strong>: after going back to OpenJDK 11.0.18 the issue disappeared. Anyway, I would like to understand how a HLT instruction can lead to a segmentation fault.</p>\n<p>Red Hat Enterprise Linux release 8.7 (Ootpa) 4.18.0-425.19.2.el8_7.x86_64</p>\n<pre><code># JRE version: OpenJDK Runtime Environment (Red_Hat-11.0.19.0.7-1.el8_7) (11.0.19+7) (build 11.0.19+7-LTS)\n# Java VM: OpenJDK 64-Bit Server VM (Red_Hat-11.0.19.0.7-1.el8_7) (11.0.19+7-LTS, mixed mode, sharing, tiered, compressed oops, g1 gc, linux-amd64)\n# Problematic frame:\n# J 7581 c2 java.util.GregorianCalendar.computeTime()V java.base@11.0.19 (970 bytes) @ 0x00007ff72826feeb [0x00007ff72826f440+0x0000000000000aab]\n</code></pre>\n<pre><code>Stack: [0x00007ff73ec47000,0x00007ff73ed48000],  sp=0x00007ff73ed44ad0,  free space=1014k\nNative frames: (J=compiled Java code, A=aot compiled Java code, j=interpreted, Vv=VM code, C=native code)\nJ 7581 c2 java.util.GregorianCalendar.computeTime()V java.base@11.0.19 (970 bytes) @ 0x00007ff72826feeb [0x00007ff72826f440+0x0000000000000aab]\n</code></pre>\n<pre><code>siginfo: si_signo: 11 (SIGSEGV), si_code: 128 (SI_KERNEL), si_addr: 0x0000000000000000\n</code></pre>\n<pre><code>Registers:\nRAX=0x0000000000000000, RBX=0x00000000e5b5f858, RCX=0x0000000000000000, RDX=0x0000000000000000\nRSP=0x00007ff73ed44ad0, RBP=0x0000000000000000, RSI=0x00007ff73ed441d1, RDI=0x00007ff738023820\nR8 =0x0000000000000000, R9 =0x00007ff73ed44150, R10=0x00000000000007cf, R11=0x0000000000000000\nR12=0x0000000000000000, R13=0x0000000000001896, R14=0x00007ff6cda239e0, R15=0x00007ff738028800\nRIP=0x00007ff72826feeb, EFLAGS=0x0000000000010246, CSGSFS=0x002b000000000033, ERR=0x0000000000000000\n  TRAPNO=0x000000000000000d\n</code></pre>\n<pre><code>Instructions: (pc=0x00007ff72826feeb)\n...\n0x00007ff72826febb:   08 4c 8b 6c 24 18 4c 8b c0 e9 a1 f7 ff ff be 7e\n0x00007ff72826fecb:   ff ff ff 48 8b 6c 24 08 e8 28 1f 1a f8 48 bf 98\n0x00007ff72826fedb:   4b bd 3d f7 7f 00 00 48 83 e4 f0 e8 25 e0 48 15\n0x00007ff72826feeb:   f4 be f4 ff ff ff 48 89 1c 24 48 89 44 24 f8 8b\n0x00007ff72826fefb:   44 24 10 89 44 24 08 48 8b 44 24 f8 4c 89 6c 24\n0x00007ff72826ff0b:   10 66 66 90 e8 ec 1e 1a f8 be e4 ff ff ff 48 8b\n0x00007ff72826ff1b:   6c 24 08 44 89 54 24 04 e8 d8 1e 1a f8 be e4 ff\n0x00007ff72826ff2b:   ff ff 49 8b eb 89 5c 24 04 66 66 90 e8 c4 1e 1a\n...\n</code></pre>\n<p>PC/RIP points to an address which contains a HLT instruction (0xF4):</p>\n<pre><code>e8 28 1f 1a f8          call   0xfffffffff81a1f45\n48 bf 98 4b bd 3d f7    movabs rdi,0x7ff73dbd4b98\n7f 00 00\n48 83 e4 f0             and    rsp,0xfffffffffffffff0\ne8 25 e0 48 15          call   0x1548e055\nf4                      hlt\nbe f4 ff ff ff          mov    esi,0xfffffff4\n48 89 1c 24             mov    QWORD PTR [rsp],rbx\n48 89 44 24 f8          mov    QWORD PTR [rsp-0x8],rax\n</code></pre>\n<p>How can a HLT instruction trigger a segmentation violation?</p>\n<p>I spent the last few hours searching for something similar but could not find anything.</p>\n"},{"tags":["java","spring-boot","jdbc","datasource","connection-pooling"],"owner":{"user_id":716769,"display_name":"Bogdan Mart"},"view_count":58,"up_vote_count":3,"answer_count":0,"score":2,"creation_date":1683151473,"question_id":76168266,"body":"<p>I want to create two separate JDBC data-sources (aka. connection pools) that would re use connections similar to following diagram.</p>\n<pre><code>                .------.\n                '------'\n                | Data |\n                | base |\n                '------'\n                   ^\n                   |\n            +------+-------+\n            |              |\n            |  Connection  |\n       +---&gt;|  Pool Main   |&lt;----+\n       |    |              |     |\n       |    +--------------+     |\n+------+----------+   +----------+--------+\n|Connection Pool A|   | Connection Pool B |\n+-----------------+   +-------------------+\n         ^                       ^\n         |                       |\n +-------+------+       +--------+-----+\n | App Module A |       | App Module B |\n +--------------+       +--------------+\n</code></pre>\n<p>Idea is to have parent connection pool to have 10 connections limit, and each child source to have limit of 8.</p>\n<p>So even if App module A uses all 8 connections, module B won't starve and would have at least two connection.</p>\n<p>So to reword the question: I want to represent single connection pool in such way, that one part of application can have at least N connections of total M available. Reserving this N connections for each part of application.</p>\n<p>Is this possible with any existing library, for example <strong>HikariCP</strong>?</p>\n<p><strong>P.S.</strong> This is spring boot application, but this should not matter as JDBC datasources can exist outside of spring. But perhaps Spring has some tricks for this use-case.</p>\n"},{"tags":["java","spring","spring-security","jwt","spring-boot-3"],"comments":[{"owner":{"user_id":524906,"display_name":"fischermatte"},"edited":false,"comment_id":134340793,"body":"I ran into excact same issue. For some reason the PermissionEvaluator is not applied in the PreInvocationAuthorizationAdviceVoter"}],"owner":{"user_id":2841472,"display_name":"Sai prateek"},"view_count":34,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1683127970,"question_id":76165695,"body":"<p>I'm migrating my applications to spring v6 &amp; spring-boot:3.0.16.</p>\n<p>I have a custom PermissionEvaluator where I have override the <code>hasPermission()</code> method.</p>\n<pre><code>public final class CustomPermissionEvaluator implements PermissionEvaluator {\n\n    @Override\n    public boolean hasPermission(Authentication authentication, Object targetDomainObject, Object permission) {\n        // your implementation\n    }\n\n    @Override\n    public boolean hasPermission(Authentication authentication, Serializable targetId, String targetType, Object permission) {\n        // your implementation\n    }\n}\n</code></pre>\n<p>I'm using <code>@PreAuthorize</code> to validate permission like -</p>\n<pre><code>@PreAuthorize(&quot;hasPermission(#vehicle, 'Optimised')&quot;)\n    @GetMapping(&quot;/authorize&quot;)\n    public ResponseEntity&lt;String&gt; authorize(@RequestHeader(&quot;Authorization&quot;) String token,\n                                        @RequestHeader(value=&quot;Vehicle&quot;, required=true) String vehicle){\n\n        return new ResponseEntity&lt;&gt;(&quot;Vehicle Validated Successfully&quot;, HttpStatus.OK);\n    }\n</code></pre>\n<p>I'm using latest <code>@EnableMethodSecurity</code> in Security config, which looks like -</p>\n<pre><code>package com.test.am.authorizer.security;\n\nimport com.test.springsecurity.*;\nimport com.test.controller.RestAccessDeniedHandler;\nimport org.slf4j.Logger;\nimport org.slf4j.LoggerFactory;\nimport org.springframework.aop.Advisor;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.beans.factory.config.BeanDefinition;\nimport org.springframework.boot.autoconfigure.condition.ConditionalOnBean;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.context.annotation.Role;\nimport org.springframework.core.annotation.Order;\nimport org.springframework.security.access.AccessDeniedException;\nimport org.springframework.security.access.PermissionEvaluator;\nimport org.springframework.security.access.expression.method.DefaultMethodSecurityExpressionHandler;\nimport org.springframework.security.access.expression.method.MethodSecurityExpressionHandler;\nimport org.springframework.security.authentication.AnonymousAuthenticationToken;\nimport org.springframework.security.authentication.AuthenticationManager;\nimport org.springframework.security.authorization.method.AuthorizationManagerBeforeMethodInterceptor;\nimport org.springframework.security.authorization.method.PreAuthorizeAuthorizationManager;\nimport org.springframework.security.config.annotation.method.configuration.EnableMethodSecurity;\nimport org.springframework.security.config.annotation.method.configuration.GlobalMethodSecurityConfiguration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configurers.AbstractHttpConfigurer;\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.authority.AuthorityUtils;\nimport org.springframework.security.oauth2.jwt.NimbusJwtDecoder;\nimport org.springframework.security.oauth2.server.resource.InvalidBearerTokenException;\nimport org.springframework.security.oauth2.server.resource.authentication.JwtAuthenticationProvider;\nimport org.springframework.security.web.AuthenticationEntryPoint;\nimport org.springframework.security.web.SecurityFilterChain;\nimport org.springframework.security.web.access.expression.DefaultWebSecurityExpressionHandler;\n\nimport java.util.List;\nimport java.util.Objects;\nimport java.util.UUID;\n\nimport static org.springframework.security.config.http.SessionCreationPolicy.STATELESS;\n\n@Configuration\n@EnableMethodSecurity\npublic class WebSecurityConfig {\n\n    Logger log = LoggerFactory.getLogger(WebSecurityConfig.class);\n\n\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        String anonymousKey = UUID.randomUUID().toString();\n        JwtAuthenticationProvider jwtAuthProvider = new JwtAuthenticationProvider(jwtDecoder());\n        jwtAuthProvider.setJwtAuthenticationConverter(new CustomTokenConverter());\n        AuthenticationManager authenticationManager = authenticationManager(anonymousKey);\n\n        http.exceptionHandling().accessDeniedHandler(accessDeniedHandler())\n                .authenticationEntryPoint(new TokenAuthenticationEntryPoint());\n\n\n\n        http\n                .csrf(AbstractHttpConfigurer::disable)\n                .oauth2ResourceServer(oauth2 -&gt; oauth2.authenticationManagerResolver(request -&gt; authenticationManager))\n                .anonymous(anonymous -&gt;\n                        // TODO do not allow anonymous access\n                        anonymous.key(anonymousKey))\n\n                \n                .sessionManagement(sessionManagement -&gt; sessionManagement.sessionCreationPolicy(STATELESS))\n                .exceptionHandling().accessDeniedHandler(accessDeniedHandler())\n                .authenticationEntryPoint(authenticationEntryPoint());\n\n        return http.build();\n    }\n\n    \n    private AuthenticationManager authenticationManager(String anonymousKey) {\n        JwtAuthenticationProvider provider = new JwtAuthenticationProvider(jwtDecoder());\n        provider.setJwtAuthenticationConverter(new MyTokenConverter());\n        List&lt;GrantedAuthority&gt; anonymousAuthorities = AuthorityUtils\n                .createAuthorityList(&quot;ROLE_ANONYMOUS&quot;);\n        return authentication -&gt; {\n            try {\n                return provider.authenticate(authentication);\n            } catch (InvalidBearerTokenException e) {\n                log.error(&quot;InvalidBearerTokenException: Error in authentication&quot;);\n                throw new AccessDeniedException(&quot;InvalidBearerTokenException: Error in authentication&quot;);\n            }\n        };\n    }\n\n    private NimbusJwtDecoder jwtDecoder() {\n        String awsRegion = System.getenv(&quot;my_region&quot;);\n        NimbusJwtDecoder decoder = createDecoder(region);\n        decoder.setJwtValidator(\n                MyJwtValidators.createDefaultclaimsValidation(\n                        &quot;custom:claim_name&quot;));\n        return decoder;\n    }\n\n\n\n    @Bean(name = &quot;permissionEvaluator&quot;)\n    @Order(1)\n    public PermissionEvaluator permissionEvaluator() {\n        return new CustomPermissionEvaluator();\n    }\n\n    @Bean\n    public AuthenticationEntryPoint authenticationEntryPoint() {\n        return new TokenAuthenticationEntryPoint();\n    }\n\n    \n\n\n}\n</code></pre>\n<p>Now problem is every time when I call the method <code>authorize</code> with valid access token, my <code>customPermissonEvaluator</code> never invoke, Even the JWT authentication is succesfully done and decision is granted but <code>DenyAllPermissionEvaluator</code> returns <code>Access Denied</code>.</p>\n<p>Seems like My <code>CustomePErmissionEvaluator</code> never invokes with <code>hasPermission()</code>.</p>\n<p>Any suggestion will be appreciated. TIA</p>\n"},{"tags":["java","spring","inheritance","jackson"],"comments":[{"owner":{"user_id":11713777,"display_name":"dariosicily"},"edited":false,"comment_id":134319275,"body":"You can use the <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.14/com/fasterxml/jackson/annotation/JsonTypeInfo.Id.html#DEDUCTION\" rel=\"nofollow noreferrer\">JsonTypeInfo.Id#DEDUCTION</a>."},{"owner":{"user_id":16067287,"display_name":"Mukund Mundhra"},"edited":false,"comment_id":134319580,"body":"I have explained in the question by editing it right now that why this will not work for me @dariosicily"},{"owner":{"user_id":11713777,"display_name":"dariosicily"},"edited":false,"comment_id":134319950,"body":"Your message error says &quot;Cannot deduce unique subtype of com.mapabc.entity.Point (2 candidates match)&quot;, so for jackson library <code>Point</code> is an abstract class or similar with subclasses."},{"owner":{"user_id":16067287,"display_name":"Mukund Mundhra"},"edited":false,"comment_id":134319983,"body":"Yes, thats the tricky part, on how to get this working."},{"owner":{"user_id":11713777,"display_name":"dariosicily"},"edited":false,"comment_id":134320050,"body":"You have to use  <code>JsonTypeInfo.DEDUCTION</code> for <code>Point</code> class too."},{"owner":{"user_id":16067287,"display_name":"Mukund Mundhra"},"edited":false,"comment_id":134320193,"body":"I already tried that. It doesn&#39;t work. Added JsonTypeInfo.DEDUCTION on Point class as well"},{"owner":{"user_id":11713777,"display_name":"dariosicily"},"edited":false,"comment_id":134320256,"body":"Please include in your question a runnable example of a json input file and how it should be deserialized with all classes code involved."},{"owner":{"user_id":16067287,"display_name":"Mukund Mundhra"},"edited":false,"comment_id":134320362,"body":"I have added it. (@RequestBody Element element) Fetching it like this"},{"owner":{"user_id":16067287,"display_name":"Mukund Mundhra"},"edited":false,"comment_id":134321491,"body":"Let us <a href=\"https://chat.stackoverflow.com/rooms/253450/discussion-between-mukund-mundhra-and-dariosicily\">continue this discussion in chat</a>."},{"owner":{"user_id":16067287,"display_name":"Mukund Mundhra"},"edited":false,"comment_id":134322682,"body":"So the issue is when we add more than 2 subclasses. You can check it. It will break"}],"answers":[{"owner":{"user_id":11713777,"display_name":"dariosicily"},"up_vote_count":0,"is_accepted":true,"creation_date":1683148246,"answer_id":76168014,"body":"<p>The problem resides in the definition of the <code>Point</code> and <code>Circle</code> classes as subclasses of the <code>Element</code> class:</p>\n<pre><code>public class Point extends Element implements Serializable {\n\n    private double lng;\n    private double lat;\n}\n\npublic class Circle extends Element implements Serializable {\n    private double lng;\n    private double lat;\n    private int r;\n}\n</code></pre>\n<p>Basically when the jackson library reads the <code>&quot;leftDown&quot;: {&quot;lng&quot; : 4.0, &quot;lat&quot; : 1.0}</code> property from the json file, it can interpret it as a representation either of a <code>Point</code> object or a <code>Circle</code> object without the definition of its radius at the same time, there the exception due to the ambiguous representation. One of the possible solution and maybe the most natural idea is redefine the <code>Circle</code> class as a couple of a <code>Point</code> center and its radius (up to you another possible solution you can consider more adapt to your needs):</p>\n<pre><code>public class Circle extends Element implements Serializable {\n\n    Point center;\n    private int r;\n}\n</code></pre>\n"}],"owner":{"user_id":16067287,"display_name":"Mukund Mundhra"},"view_count":45,"up_vote_count":2,"accepted_answer_id":76168014,"answer_count":1,"score":2,"creation_date":1683125421,"question_id":76165240,"body":"<p>I have a case where my request body has an object which is backed by inheritance.\nSo when I use @requestbody and do not explicitly specify the type of subclass it does not pick/determine that automatically.\nIs there a way to do it without this :</p>\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.NAME, property = &quot;type&quot;)\n@JsonSubTypes({\n        @JsonSubTypes.Type(value = Fence.class, name = &quot;fence&quot;),\n        @JsonSubTypes.Type(value = Rectangle.class, name = &quot;rectangle&quot;),\n        @JsonSubTypes.Type(value = Point.class, name = &quot;point&quot;),\n        @JsonSubTypes.Type(value = Circle.class, name = &quot;circle&quot;)\n})\npublic class Element implements Serializable {\n}\n</code></pre>\n<p>Is there any open-source library which handles this, when a requestBody comes in it automatically detects the instance of the sub class.</p>\n<p>I would have used JsonTypeInfo.Id#DEDUCTION but it fails to work when we have a nested object in the subclass.</p>\n<pre><code>public class Rectangle extends Element implements Serializable {\n\n    private Point leftDown;\n    private Point rightUpper;\n\n}\n\npublic class Point extends Element implements Serializable {\n\n    private double lng;\n    private double lat;\n}\n</code></pre>\n<p>Gives me this error</p>\n<pre><code>&quot;JSON parse error: Could not resolve subtype of [simple type, class com.mapabc.entity.Point]: Cannot deduce unique subtype of `com.mapabc.entity.Point` (2 candidates match); nested exception is com.fasterxml.jackson.databind.exc.InvalidTypeIdException: Could not resolve subtype of [simple type, class com.mapabc.entity.Point]: Cannot deduce unique subtype of `com.mapabc.entity.Point` (2 candidates match)\\n at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 8, column: 9] (through reference chain: java.util.ArrayList[0]-&gt;com.moveinsync.geofencing.models.Geofence[\\&quot;geometry\\&quot;]-&gt;com.mapabc.entity.Rectangle[\\&quot;leftDown\\&quot;])&quot;\n</code></pre>\n<p>Here is the element class -&gt;</p>\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.DEDUCTION)\n@JsonSubTypes({\n        @JsonSubTypes.Type(Fence.class),\n        @JsonSubTypes.Type(Rectangle.class),\n        @JsonSubTypes.Type(Point.class),\n        @JsonSubTypes.Type(Circle.class)\n})\npublic class Element implements Serializable {\n    public CommandArgs&lt;String, String&gt; getCommandArgs(String key, String member){\n        return null;\n    }\n}\n</code></pre>\n<p>Point class -&gt;</p>\n<pre><code>public class Point extends Element implements Serializable {\n\nprivate double lng;\nprivate double lat;\n\npublic Point() {}\n\npublic Point(double lng, double lat) {\n    this.lng = lng;\n    this.lat = lat;\n}\n\npublic double getLng() {\n    return lng;\n}\n\npublic void setLng(double lng) {\n    this.lng = lng;\n}\n\npublic double getLat() {\n    return lat;\n}\n\npublic void setLat(double lat) {\n    this.lat = lat;\n}\n\n@Override\npublic String toString() {\n    return &quot;Point{&quot; +\n            &quot;lng=&quot; + lng +\n            &quot;, lat=&quot; + lat +\n            '}';\n}\n</code></pre>\n<p>}</p>\n<p>Rectangle class -&gt;</p>\n<pre><code>public class Rectangle extends Element implements Serializable {\n\n    private Point leftDown;\n    private Point rightUpper;\n\n    @Override\n    public CommandArgs&lt;String, String&gt; getCommandArgs(String key, String member) {\n        double lng1 = leftDown.getLng();\n        double lat1 = leftDown.getLat();\n        double lng2 = rightUpper.getLng();\n        double lat2 = rightUpper.getLat();\n        return new CommandArgs&lt;&gt;(StringCodec.UTF8).add(key).add(member).add(&quot;BOUNDS&quot;).add(lng1).add(lat1).add(lng2).add(lat2);\n    }\n\n    public Rectangle() {}\n\n    public Rectangle(Point leftDown, Point rightUpper) {\n        this.leftDown = leftDown;\n        this.rightUpper = rightUpper;\n    }\n\n    public Point getLeftDown() {\n        return leftDown;\n    }\n\n    public void setLeftDown(Point leftDown) {\n        this.leftDown = leftDown;\n    }\n\n    public Point getRightUpper() {\n        return rightUpper;\n    }\n\n    public void setRightUpper(Point rightUpper) {\n        this.rightUpper = rightUpper;\n    }\n\n\n}\n</code></pre>\n<p>This is the request body -&gt;</p>\n<pre><code>{\n        &quot;leftDown&quot;: {\n            &quot;lng&quot; : 4.0,\n            &quot;lat&quot; : 1.0\n        },\n        &quot;rightUpper&quot; : {\n            &quot;lng&quot; : 1.0,\n            &quot;lat&quot; : 4.0\n        }\n    }\n</code></pre>\n<p>With just 2 classes everything works fine but if we add a third class it breaks -&gt;</p>\n<pre><code>@JsonTypeInfo(use = JsonTypeInfo.Id.DEDUCTION)\n@JsonSubTypes({\n        @JsonSubTypes.Type(Rectangle.class),\n        @JsonSubTypes.Type(Point.class),\n        @JsonSubTypes.Type(Circle.class)\n})\npublic class Element implements Serializable {\n\n}\n\npublic class Circle extends Element implements Serializable {\n    private double lng;\n    private double lat;\n    private int r;\n}\n</code></pre>\n"},{"tags":["java","selenium-webdriver","serenity-bdd"],"comments":[{"owner":{"user_id":4451010,"display_name":"Ilya Lapitan"},"edited":false,"comment_id":134326392,"body":"I think the issue could be with binaries used in both modes. The old headless mode uses a separate alternate binary which supposedly uses fewer system resources, the new headless mode uses regular Chrome binary but doesn&#39;t display any windows. So, I think the regular Chrome version just requires more resources. Try to run your test(s) without headless mode and compare resource usage. <a href=\"https://developer.chrome.com/articles/new-headless/\" rel=\"nofollow noreferrer\">developer.chrome.com/articles/new-headless</a>"},{"owner":{"user_id":21803364,"display_name":"Tamas Demeny"},"edited":false,"comment_id":134329648,"body":"@IlyaLapitan without headless mode it works fine, with no problems"}],"owner":{"user_id":21803364,"display_name":"Tamas Demeny"},"view_count":33,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1683097656,"question_id":76161241,"body":"<p>When using <code>--headless=new</code> in my tests they use way more CPU, compared to old headless mode.</p>\n<p>Watching the task manager I noticed that even for one test it opens multiple Chrome instances. My tests need headless new to function but I can't run the whole feature because it kills my laptop.</p>\n<p>Is there any way to optimize the CPU usage?</p>\n<p>Using Serenity-BDD\nThis is my setup for options:</p>\n<pre><code>chrome.switches=--headless=new;--disable-dev-shm-usage;--no-sandbox;--disable-download-notification;--test-type;--ignore-certificate-errors;--disable-popup-blocking;--disable-default-apps;--disable-extensions-file-access-check;--start-maximized;--incognito;--disable-infobars,--disable-gpu\n</code></pre>\n<p><code>headless.mode = true</code>, works fine with CPU but can't download files or right click and copy text\n<code>--headless=new</code>, kills the laptop, tests work while running them one by one</p>\n"},{"tags":["java","ssl","client-certificates"],"comments":[{"owner":{"user_id":671543,"display_name":"njzk2"},"edited":false,"comment_id":134307198,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/53727161/jdk-11-import-root-ca-certificates-into-keystore\">JDK 11 import root ca certificates into keystore</a>"},{"owner":{"user_id":27069,"display_name":"Alex Lehmann"},"edited":false,"comment_id":134307235,"body":"the problem is I cannot import root cas into the keystore since random users will be registering with the server when they create an account and they should be able to create their own certs. It would be possible to have users request a cert from a custom ca, but that is not the user experience I expect"},{"owner":{"user_id":589259,"display_name":"Maarten Bodewes"},"edited":false,"comment_id":134307319,"body":"Have you tried <a href=\"https://stackoverflow.com/a/5671038/589259\">implementing your own <code>X509TrustManager</code></a>? Beware that you have to make sure that the correct tests are implemented when you are doing that; you might want to check e.g. validity period (although that could be moot if you only accept self signed certs)."}],"owner":{"user_id":27069,"display_name":"Alex Lehmann"},"view_count":33,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1683055381,"question_id":76158215,"body":"<p>I am trying to build a server for Gemini in Java which uses client authentication using self-signed certificates similar to the CertFP authentication used in IRC or the self-signed identities in Mumble.</p>\n<p>I can authenticate a user without problem when the cert is a SMIME certificate that is signed by a supported CA company or when using a web site certificate like <a href=\"http://www.domain.com\" rel=\"nofollow noreferrer\">www.domain.com</a> when using Letsencrypt since both can be validated via the castore.\nTo do pseudonymous authentication it is necessary to accept any self-signed client certificate to get the cert hash and that works in other programming languages like Python or Go, however I am not finding an option to configure that with Java. I assume I will have to write a custom authentication checker but I have no idea how.</p>\n"},{"tags":["java","httpclient","java-http-client"],"comments":[{"owner":{"user_id":839733,"display_name":"Abhijit Sarkar"},"edited":false,"comment_id":134281588,"body":"Please elaborate on “doesn’t work”."},{"owner":{"user_id":7605967,"display_name":"Keshavram Kuduwa"},"edited":false,"comment_id":134281629,"body":"It doesn&#39;t compile. Also, this is using Raw Types."},{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":134281914,"body":"At the very least, I believe it would be better to do the status code check inside the <code>apply</code> method of your <code>JsonBodyHandler</code> class."},{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":134281968,"body":"Then I would try to unify the result type, maybe behind an interface. If using Java 17+ I might even try to implement this using a <a href=\"https://openjdk.org/jeps/409\" rel=\"nofollow noreferrer\">sealed interface</a>, then have two <a href=\"https://openjdk.org/jeps/395\" rel=\"nofollow noreferrer\">records</a> to describe the result as a success or a failure. The <code>Success</code> record could hold the real object (of type <code>R</code> in your example), and the <code>Failure</code> record could just carry an error message as a <code>String</code>. If allowed to use preview features, then perhaps <a href=\"https://openjdk.org/jeps/433\" rel=\"nofollow noreferrer\">pattern matching for switch</a> (currently its 4th preview in Java 20) [cont.]"},{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":134281992,"body":"[cont.] could be used to process the result. Though a basic <code>instanceof</code> check could work instead (also see <a href=\"https://openjdk.org/jeps/394\" rel=\"nofollow noreferrer\">pattern matching for instanceof</a>). Note I&#39;m mostly just musing here. There are likely some details that would need to be worked out. But this is a pattern I&#39;ve seen in Kotlin quite a few times (i.e., sealed class/interface, limited number of <code>data class</code> and/or <code>object</code> implementations, using a <code>when</code> expression to process the result)."},{"owner":{"user_id":721855,"display_name":"aled"},"edited":false,"comment_id":134282150,"body":"&quot;Doesn&#39;t compile&quot;is not helpful. Provide the exact error and Java version at the least."},{"owner":{"user_id":7605967,"display_name":"Keshavram Kuduwa"},"edited":false,"comment_id":134284468,"body":"@Aled, I have updated the question and added the Java version as well as the compile-time errors."},{"owner":{"user_id":7605967,"display_name":"Keshavram Kuduwa"},"edited":false,"comment_id":134284475,"body":"@Slaw I&#39;m using Java 11 and cannot upgrade it."},{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":134284519,"body":"Well, most of what I said only makes the implementation somewhat more straightforward. You should be able to implement something similar to what I described in Java 11 as well."},{"owner":{"user_id":7605967,"display_name":"Keshavram Kuduwa"},"edited":false,"comment_id":134284860,"body":"@Slaw The <code>apply</code> method expects <code>BodySubscriber&lt;Supplier&lt;R&gt;&gt;</code>, if I have a check there and return <code>BodySubscriber&lt;Supplier&lt;ExceptionModel&gt;&gt;</code> I&#39;ll still get a compile-time error. Also, the JsonBodyHandler is used to map n number of Responses and I cannot unify them using a single interface."},{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":134293195,"body":"What about something like this? <a href=\"https://gitlab.com/-/snippets/2535393\" rel=\"nofollow noreferrer\">gitlab.com/-/snippets/2535393</a> (it doesn&#39;t make use of a <code>Supplier</code>, but adapting the code should be relatively easy)"}],"owner":{"user_id":7605967,"display_name":"Keshavram Kuduwa"},"view_count":60,"up_vote_count":3,"answer_count":0,"score":2,"creation_date":1682885022,"question_id":76143285,"body":"<p>Currently, I have this <code>JsonBodyHandler</code> used to parse the response body if the response is successful. I also have a model defined if the request is not successful. So based on the status code, I need to map the response to either the expected or exception model classes.</p>\n<pre class=\"lang-java prettyprint-override\"><code>  private static class JsonBodyHandler&lt;R&gt; implements HttpResponse.BodyHandler&lt;Supplier&lt;R&gt;&gt; {\n\n    private final Class&lt;R&gt; returnClz;\n\n    public JsonBodyHandler(Class&lt;R&gt; returnClz) {\n      this.returnClz = returnClz;\n    }\n\n    private static &lt;R&gt; HttpResponse.BodySubscriber&lt;Supplier&lt;R&gt;&gt; asJson(Class&lt;R&gt; returnClz) {\n      HttpResponse.BodySubscriber&lt;InputStream&gt; upstream =\n          HttpResponse.BodySubscribers.ofInputStream();\n\n      return HttpResponse.BodySubscribers.mapping(\n          upstream, inputStream -&gt; toSupplierOfType(inputStream, returnClz));\n    }\n\n    private static &lt;R&gt; Supplier&lt;R&gt; toSupplierOfType(InputStream inputStream, Class&lt;R&gt; returnClz) {\n      return () -&gt; {\n        try (InputStream stream = inputStream) {\n          ObjectMapper objectMapper = new ObjectMapper();\n          return objectMapper.readValue(stream, returnClz);\n        } catch (IOException e) {\n          throw new UncheckedIOException(e);\n        }\n      };\n    }\n\n    @Override\n    public HttpResponse.BodySubscriber&lt;Supplier&lt;R&gt;&gt; apply(HttpResponse.ResponseInfo responseInfo) {\n      return asJson(returnClz);\n    }\n  }\n</code></pre>\n<p>I'm sending requests as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>  &lt;B, R&gt; R exchange(URI uri, String method, B body, Class&lt;R&gt; returnClz) {\n    Builder httpRequestBuilder = HttpRequest.newBuilder().uri(uri);\n    addHeaders(httpRequestBuilder);\n\n    var httpRequest =\n        &quot;GET&quot;.equals(method)\n            ? httpRequestBuilder.GET().build()\n            : httpRequestBuilder.method(method, getBodyPublisher(body)).build();\n\n    var httpClient = HttpClient.newHttpClient();\n    JsonBodyHandler&lt;R&gt; bodyHandler = new JsonBodyHandler&lt;&gt;(returnClz);\n    Supplier&lt;R&gt; responseSupplier = httpClient.send(httpRequest, bodyHandler).body();\n    return responseSupplier.get();\n  }\n</code></pre>\n<p>What I want to do is something as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    BodySubscriber&lt;Supplier&lt;R&gt;&gt; successBodySubscriber = JsonBodyHandler.asJson(returnClz);\n    BodySubscriber&lt;Supplier&lt;ExceptionModel&gt;&gt; failureBodySubscriber =\n        JsonBodyHandler.asJson(ExceptionModel.class);\n    BodyHandler&lt;Supplier&gt; jsonBodyHandler =\n        (rspInfo) -&gt; rspInfo.statusCode() == 200 ? successBodySubscriber : failureBodySubscriber;\n\n    HttpResponse&lt;Supplier&gt; httpResponse = httpClient.send(httpRequest, jsonBodyHandler);\n    if (httpResponse.statusCode() != 200) {\n      Supplier&lt;ExceptionModel&gt; responseSupplier = httpResponse.body();\n      throw ClientServiceError.invalidResponse(responseSupplier.get());\n    }\n\n    Supplier&lt;R&gt; responseSupplier = httpResponse.body();\n    return responseSupplier.get();\n</code></pre>\n<p>This doesn't work, I get compile time error at line <code>BodyHandler&lt;Supplier&gt; jsonBodyHandler = (rspInfo) -&gt; rspInfo.statusCode() == 200 ? successBodySubscriber : failureBodySubscriber;</code>:</p>\n<blockquote>\n<p>Incompatible types. Found: 'java.net.http.HttpResponse.BodySubscriber&lt;java.util.function.Supplier&gt;', required: 'java.net.http.HttpResponse.BodySubscriber&lt;java.util.function.Supplier&gt;'</p>\n</blockquote>\n<blockquote>\n<p>Incompatible types. Found: 'java.net.http.HttpResponse.BodySubscriber&lt;java.util.function.Supplier&lt;com.project.proxy.impl.ExceptionModel&gt;&gt;', required: 'java.net.http.HttpResponse.BodySubscriber&lt;java.util.function.Supplier&gt;'</p>\n</blockquote>\n<p>I am using Java 11. Cannot upgrade the version. I believe there should be a better way to do this. Any suggestions will be appreciated.</p>\n"},{"tags":["java","android","security","android-source"],"comments":[{"owner":{"user_id":295004,"display_name":"Morrison Chang"},"edited":false,"comment_id":134276138,"body":"Just making sure you are aware of: <a href=\"https://source.android.com/docs/security/features/apksigning\" rel=\"nofollow noreferrer\">source.android.com/docs/security/features/apksigning</a> and <a href=\"https://stackoverflow.com/q/52898066/295004\">GET_SIGNATURES is deprecated</a>"},{"owner":{"user_id":12542621,"display_name":"phish_and_chips"},"edited":false,"comment_id":134276192,"body":"Yep, I looked at the Android documentation a lot to try and work out how multiple signatures could be returned but I didn&#39;t find anything that helped explicitly. It was very useful in understanding how signing works though which helped building up the proof of concept.  I have also looked at that stackoverflow post and I have code very similar to it to print the signatures in my proof of concept app."}],"owner":{"user_id":12542621,"display_name":"phish_and_chips"},"view_count":48,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682837922,"question_id":76139938,"body":"<p>I am researching Android security and have identified a current application that makes use of the deprecated <code>getPackageInfo(&lt;apk&gt;, GET_SIGNATURES)</code>. To fully understand how this application is using this deprecated function I wish to create a proof-of-concept APK that results in multiple signatures being returned.</p>\n<p>So far I have created a basic APK in Android Studio, created a CA certificate and a leaf certificate signed by my CA certificate. I then package both these into a PKCS12 file and then convert that to a Java Keystore. I then use the tool apksigner to sign my APK with this Java Keystore and install the signed app. I then verify that both certs are associated with the installed apk by pulling it off the phone and using <code>keytool -printcert -jarfile poc.apk</code>. This shows both certificates (CA and leaf) listed.</p>\n<p>However, when running <code>getPackageInfo(&lt;apk&gt;, GET_SIGNATURES)</code> on my proof of concept APK only one result is returned? Why is this? What am I missing to get multiple signatures returned?</p>\n<p>I have looked at the Android documentation for when the deprecated <code>GET_SIGNATURES</code> is passed to <code>getPackageInfo</code> but it is not very clear what the expected result should be. I am basing my expectation that a signature for each cert in the chain is returned based on this presentation: <a href=\"https://www.blackhat.com/docs/us-14/materials/us-14-Forristal-Android-FakeID-Vulnerability-Walkthrough.pdf\" rel=\"nofollow noreferrer\">https://www.blackhat.com/docs/us-14/materials/us-14-Forristal-Android-FakeID-Vulnerability-Walkthrough.pdf</a>.</p>\n<p>This stackoverflow post states that the user had app installed on his phone from Verizon that had multiple signatures: <a href=\"https://stackoverflow.com/questions/13618281/why-is-the-packageinfo-signatures-field-an-array-and-when-would-there-be-anythi\">Why is the PackageInfo.signatures field an array, and when would there be anything other than one value here?</a>. Likewise, the AOSP code has code to account for multiple signatures in multiple places.</p>\n"},{"tags":["java"],"comments":[{"owner":{"user_id":16376827,"display_name":"g00se"},"edited":false,"comment_id":134270820,"body":"Load into <code>List&lt;String&gt;</code> with <code>Files.readAllLines</code>. Use the list for your edits. Save it to file again"},{"owner":{"user_id":522444,"display_name":"Hovercraft Full Of Eels"},"edited":false,"comment_id":134270828,"body":"Side note, this: <code>catch(Exception ex) {}</code>, is not a great idea. At least print out the exception&#39;s stack trace in the catch block so you&#39;ll know if some bad things are happening with your code."},{"owner":{"user_id":16376827,"display_name":"g00se"},"edited":false,"comment_id":134270890,"body":"You can consider turning your <i>de facto</i> csv file into java beans too"},{"owner":{"user_id":203657,"display_name":"kleopatra"},"edited":false,"comment_id":134270976,"body":"this is basically unrelated to swing - solve replacing words in the file without ui (use hard-coded replacement texts), only after having succeeded in that add ui"}],"answers":[{"owner":{"user_id":16029325,"display_name":"Unable error"},"up_vote_count":0,"is_accepted":false,"creation_date":1682788156,"answer_id":76137423,"body":"<p>You won't be able to change a particular word unless the user specifies which of the two identical words to change. However, if you want to change the first word in a string, the string.replaceFirst(oldLine, newLine) method can help.</p>\n<p>I don't quite understand the problem in a general way, but in your specific case you could prompt the user to indicate the ordinal number of the word to be replaced.</p>\n<p>For example like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>File f = new File(&quot;bookingDetails.txt&quot;);\nScanner input = new Scanner(f);\nStringBuilder bd = new StringBuilder();\nwhile(input.hasNextLine()) {\n    bd.append(input.nextLine()+&quot;\\n&quot;);\n}\nString fileContents = bd.toString();\ninput.close();\nString oldLine = jTextField3.getText();\nString newLine = jTextField1.getText();\n\n//Using the indexOf() method, we find out how many times the required string occurs\n//in the text. All its occurrences are written to the List.\nList&lt;Integer&gt; indexes = new ArrayList&lt;Integer&gt;();\nint index = 0;\nwhile(index != -1){\n    index = fileContents.indexOf(oldLine, index);\n    if (index != -1) {\n        indexes.add(index);\n        index++;\n    }\n}\n\n//If there is more than one entry in the list,\n//the user is prompted to enter which of the entries to replace\nif (indexes.size() &gt; 1) {\n    //Opening a dialog box with a question. Specify the range of input values from\n    //1 to the size of the list with entries\n    String result = JOptionPane.showInputDialog(null,\n            &quot;Found multiple occurrences of the string '&quot; + oldLine +\n            &quot;'. Specify the ordinal number from 1 to &quot; + indexes.size() + &quot;:&quot;,  \n            &quot;Replacement number&quot;, \n            JOptionPane.WARNING_MESSAGE);\n    //Try-catch block, in which the program tries to convert the entered string into\n    //a number. If it succeeded, program goes to further instructions in the\n    //try block, if not, it goes to the catch block\n    try {\n        //Decreasing the resulting number by 1, since indexing in the list\n        //starts from 0\n        int number = Integer.parseInt(result) - 1;\n        //If the user enters a number that does not fall within the range of the list,\n        //a warning is displayed\n        if (number &lt; 0 || number &gt; indexes.size() - 1) {\n            JOptionPane.showMessageDialog(null, \n            &quot;You entered the wrong number. All occurrences will be replaced.&quot;);\n            fileContents = fileContents.replace(oldLine, newLine);\n        }\n        //Otherwise, we get the position of the string from the list and replace it.\n        //Using the substring method, we get part of the string before the search word,\n        //part of the string after the search word, and insert newLine between them\n        else {\n            int currentOccur = indexes.get(number);\n            fileContents =\n                fileContents.substring(0, currentOccur) +\n                newLine +\n                fileContents.substring(currentOccur + newLine.length() - 2);\n        }\n    } catch (NumberFormatException e) {\n        JOptionPane.showMessageDialog(null, \n                &quot;You entered the wrong number. All occurrences will be replaced.&quot;);\n        fileContents = fileContents.replace(oldLine, newLine);\n    }\n}\nelse fileContents = fileContents.replace(oldLine, newLine);\n\nFileWriter fw = new FileWriter(f);\nfw.append(fileContents);\nfw.flush();\n</code></pre>\n<p>However, this is not the best solution, if you want something more functional, you should reconsider your approach to the task and try to embed a full-fledged text editor in your user interface, such as <strong>JTextArea</strong></p>\n"}],"owner":{"user_id":21549746,"display_name":"Eruri"},"view_count":61,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1682780364,"question_id":76136884,"body":"<p>I've figured out how to let the users to replace the words in the text file. However, what if I want the user to replace a word in a text file for a specific line. For example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Kent:23:Male:Chief\nJacob:25:Male:Plumber\n</code></pre>\n<p>I want the output to be like:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Kent:23:Female:Chief\nJacob:25:Male:Plumber\n</code></pre>\n<p>Instead of:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Kent:23:Female:Cheif\nJacob:25:Female:Plumber\n</code></pre>\n<p>My code so far:</p>\n<pre class=\"lang-java prettyprint-override\"><code>try {    \n    File f = new File(&quot;bookingDetails.txt&quot;);\n    Scanner input = new Scanner(f);\n    StringBuilder bd = new StringBuilder();\n    while(input.hasNextLine()) {\n        bd.append(input.nextLine()+&quot;\\n&quot;);\n    }\n    String fileContents = bd.toString();\n    input.close();\n    String oldLine = jTextField3.getText();\n    String newLine = jTextField1.getText();\n    fileContents = fileContents.replace(oldLine,newLine);\n    FileWriter fw = new FileWriter(f);\n    fw.append(fileContents);\n    fw.flush();\n} catch(Exception ex) {}\n</code></pre>\n"},{"tags":["java","rest-assured","web-api-testing","rest-assured-jsonpath"],"answers":[{"owner":{"user_id":8343843,"display_name":"Alexey R."},"up_vote_count":0,"is_accepted":false,"creation_date":1683057695,"answer_id":76158458,"body":"<p>So you have a set of parameters and two states of them (either they enabled or not). That means that you have <code>2^n</code> combinations where <code>n</code> is the total amount of your parameters.</p>\n<p>Hence the solution would be to iterate from <code>0</code> to <code>2^n-1</code>, convert the current number into binary representation and build your <code>RequestSpecification</code> accordingly.</p>\n<p><a href=\"https://i.stack.imgur.com/aBQg2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aBQg2.png\" alt=\"enter image description here\" /></a></p>\n<p>Let's break by steps.</p>\n<p><strong>0. Lets have the <code>Parameter</code> class that would hold our key-value</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>class Parameter {\n    String key;\n    Object value;\n\n    public Parameter(String key, Object value){\n        this.key = key;\n        this.value = value;\n    }\n\n    public String getKey() {\n        return key;\n    }\n\n    public Object getValue() {\n        return value;\n    }\n}\n</code></pre>\n<p><strong>1. Convert a number to binary representation.</strong> See <a href=\"https://stackoverflow.com/a/8151674\">this advice</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean[] getCombination(int rowNum, int bits){\n    boolean[] flags = new boolean[bits];\n    for (int i = bits - 1; i &gt;= 0; i--) {\n        flags[i] = (rowNum &amp; (1 &lt;&lt; i)) != 0;\n    }\n    return flags;\n}\n</code></pre>\n<p><strong>2. Now we can build a flag mask that would hold enable/disable flag for all combinations</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>boolean[][] getCombinations(Parameter[] parameters){\n    int rowNum = (int)Math.pow(2, parameters.length);\n    boolean[][] results = new boolean[rowNum][parameters.length];\n    for(int i = 0; i &lt; rowNum; i++){\n        boolean[] line = getCombination(i, parameters.length);\n        for(int j = 0; j &lt; parameters.length; j++){\n            results[i][j] = line[j];\n        }\n    }\n    return results;\n}\n</code></pre>\n<p><strong>3. Finally we can generate <code>RequestSpecification</code> with required mask</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>RequestSpecification generateCombination(RequestSpecification original, \n                                         Parameter[] parameters, \n                                         boolean[] flags){\n    RequestSpecification changed = original;\n    for(int i = 0; i &lt; parameters.length; i++){\n        Parameter p = parameters[i];\n        if(flags[i]){\n            changed = changed.queryParam(p.getKey(), p.getValue());\n        }\n    }\n    return changed;\n}\n</code></pre>\n<p><strong>-- How to use all that</strong></p>\n<p>Assume that you have all these methods implemented in <code>ParamTest</code> class. Then you could test the solution by adding following main method to it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    ParamTest paramTest = new ParamTest();\n    Parameter[] parameters = {\n            new Parameter(&quot;name1&quot;, &quot;val1&quot;),\n            new Parameter(&quot;name2&quot;, 123),\n            new Parameter(&quot;name3&quot;, List.of(&quot;a&quot;, &quot;b&quot;, &quot;c&quot;))\n    };\n    RequestSpecification originalSpec = RestAssured.given();\n    boolean[][] mask = new ParamTest().getCombinations(parameters);\n    for(int i = 0; i &lt; mask.length; i++){\n        if(mask[i].length != parameters.length){\n            throw new IllegalStateException(&quot;Unexpected size of array&quot;);\n        }\n        paramTest\n                .generateCombination(originalSpec, parameters, mask[i])\n                .get() // Do here what you want;\n        ;\n    }\n}\n</code></pre>\n<p>So that:</p>\n<ol>\n<li>You create an instance of the class</li>\n<li>You define the list of parameters</li>\n<li>You prepare original <code>RequestSpecification</code> that you'll be customizing in further loop</li>\n<li>You obtain flag mask array</li>\n<li>You iterate through that flag mask array, obtain particular customized specification that has only certain set of parameters and apply the check that you want.</li>\n</ol>\n"}],"owner":{"user_id":11082516,"display_name":"Monu Singh"},"view_count":74,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1682777132,"question_id":76136643,"body":"<p>I have 6 query parameters. All of them are optional.\nHow should I use them with all combinations?\nI tried the following:</p>\n<pre><code>do {\n    Response searchbyfield = given()\n   .headers(&quot;Cookie&quot;, cookies)\n   .queryParam(&quot;search&quot;,&quot;test&quot;)\n   .queryParam(&quot;is_phone_verified&quot;,String.valueOf(is_phone_verified))\n   .queryParam(&quot;is_mail_verified&quot;,String.valueOf(is_mail_verified))\n   .queryParam(&quot;is_doc_verified&quot;,String.valueOf(is_doc_verified))\n   .queryParam(&quot;taxform&quot;,String.valueOf(taxform))\n   .queryParams(&quot;page&quot;, String.valueOf(page))\n   .when().get(&quot;&quot;)\n   page = page + 1;\n    }\n while (next.contains(&quot;page&quot;));\n</code></pre>\n<p>I used this method but it's not generic.\nI'm wondering how I can make one function and cover all combinations?</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"user_id":2846138,"display_name":"cyberbrain"},"edited":false,"comment_id":134265789,"body":"I don&#39;t see where your controller would accept the input which part of the file it should serve for fast forward or reverse. Found this question for the relevant header(s): <a href=\"https://stackoverflow.com/questions/27551737/audio-html-tag-cant-fast-forward-or-rewind-control\" title=\"audio html tag cant fast forward or rewind control\">stackoverflow.com/questions/27551737/&hellip;</a>"},{"owner":{"user_id":4759176,"display_name":"parsecer"},"edited":false,"comment_id":134271081,"body":"Thanks. I saw that question, but it didn&#39;t occur that it would apply to me. Now it turned out that the <code>Accept-Ranges</code> header is obligatory."}],"answers":[{"owner":{"user_id":4759176,"display_name":"parsecer"},"up_vote_count":0,"is_accepted":true,"creation_date":1682782976,"answer_id":76137080,"body":"<p>I changed the return statement to</p>\n<pre><code>        return ResponseEntity.status(HttpStatus.OK).contentType(MediaType.parseMediaType(&quot;audio/mpeg&quot;))\n                .header(&quot;Accept-Ranges&quot;, &quot;bytes&quot;)\n                .body(Arrays.copyOfRange(fileContent, 0, numBytes));\n</code></pre>\n<p>^ added the <code>.header(&quot;Accept-Ranges&quot;, &quot;bytes&quot;)</code> part. Now the fast forward and rewind works as expected!</p>\n"}],"owner":{"user_id":4759176,"display_name":"parsecer"},"view_count":37,"up_vote_count":2,"accepted_answer_id":76137080,"answer_count":1,"score":2,"creation_date":1682721563,"question_id":76133681,"body":"<p>I have this controller that is supposed to return a part of an audio file (for testing, I made it return all bytes in the file):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@GetMapping(&quot;/voice&quot;)\n@CrossOrigin\npublic ResponseEntity&lt;byte[]&gt; streamBytes(\n        @RequestParam(name = &quot;name&quot;) String name) throws IOException {\n    File file = new File(getClass().getResource(&quot;/static/&quot; +\n            calculatePath(name)).getFile());\n\n    byte[] fileContent = Files.readAllBytes(file.toPath());\n    int numBytes = fileContent.length;\n    return ResponseEntity.status(HttpStatus.OK)\n            .contentType(MediaType.parseMediaType(&quot;audio/mpeg&quot;))\n            .body(Arrays.copyOfRange(fileContent, 0, numBytes));\n}\n</code></pre>\n<p>The path to this controller is used in an</p>\n<pre><code>&lt;audio id='audioPlayer' src='controllerPath'&gt;&lt;/audio&gt;\n</code></pre>\n<p>The sound is loaded correctly, however the audio player doesn't allow fast forward or rewind. If I use a direct URL to the file (since, the file is in <code>resources/static/file.mp3</code>) - <code>http://localhost:8082/file.mp3</code>, I can fast forward and rewind just fine.</p>\n<p>Also when I tried changing <code>HttpStatus.OK</code> to <code>HttpStatus.PARTIAL_CONTENT</code> the player completely refused to play the file.</p>\n<p>What is it with the current controller code that prevents fast forward and rewind?</p>\n"},{"tags":["java","parsing","antlr4","lexer","parse-tree"],"comments":[{"owner":{"user_id":721855,"display_name":"aled"},"edited":false,"comment_id":134262647,"body":"Is it only the graphic or is it really parsing that way? Have you verified?"},{"owner":{"user_id":4779853,"display_name":"kaby76"},"edited":false,"comment_id":134263448,"body":"<code>BOOL: &#39;true&#39; | &#39;false&#39;;</code>. You really should make <code>true</code> and <code>false</code> as individual tokens because these are keywords. Make <code>BOOL</code> and <code>COLLISION</code> both parser symbols (a symbol name that begins with a lowercase letter)."}],"answers":[{"owner":{"user_id":84538,"display_name":"jon hanson"},"up_vote_count":0,"is_accepted":true,"creation_date":1682702149,"answer_id":76131852,"body":"<p>The problem is that your <code>COLLISION</code> rule is a <em>lex</em> rule, but the <code>true</code> token in your input is already being tokenised as a <code>BOOL</code> token. If you rename the <code>COLLISION</code> rule in your grammar to <code>collision</code>, like this:</p>\n<pre><code>move: Movetype collision Attacktype direction moveExtra;\ncollision: BOOL;\n</code></pre>\n<p>Then it becomes a <em>parse</em> rule, and the parsing works for your test input:</p>\n<pre><code>(program (line (statement (assignment la = (moveList (move Path (collision true) ATTACK (direction UP) (moveExtra 5)))) ;)) &lt;EOF&gt;)\n</code></pre>\n"}],"owner":{"user_id":21765174,"display_name":"cluelessButTrying"},"view_count":41,"up_vote_count":2,"accepted_answer_id":76131852,"answer_count":1,"score":2,"creation_date":1682694427,"question_id":76130894,"body":"<p>We are a couple of guys doing a University project, which led us to play around with ANTLR4. We are just trying to figure it out as we go, but have stumbled upon a issue we can’t seem to fix.</p>\n<p>We were currently trying to figure out the &quot;moveList&quot; in the grammar, and we have been running a simple test.txt <code>la = Path true ATTACK UP 5;</code>.</p>\n<p>Currently we are working with this .g4 file:</p>\n<pre><code>grammar hess;\n\nprogram: line* EOF;\n\ndefineBoard: 'BOARD' '(' BOARDPOSITION ')';\n\nline: statement | ifBlock | whileBlock | defineBoard;\n\nstatement: (assignment | functionCall) ';';\n\nifBlock: 'if' expression block ('else' elseIfBlock);\n\nelseIfBlock: block | ifBlock;\n\nwhileBlock: 'while' expression block ('else' elseIfBlock);\n\nassignment: IDENTIFIER '=' moveList | IDENTIFIER '=' expression;\n\nfunctionCall: IDENTIFIER '(' (expression (',' expression))? ')';\n\nexpression:\n    constant                            # constantExpression\n    | IDENTIFIER                        # identifierExpression\n    | '(' expression ')'                # parenthesizedExpression\n    | '!' expression                    # notExpression\n    | expression multOp expression      # multiplicativeExpression\n    | expression addOp expression       # additiveExpression\n    | expression compareOp expression   # comparisonExpression\n    | expression boolOp expression      # booleanExpression;\n\nmoveList: move | move moveTail;\nmoveTail: ',' move moveTail;\nmoveExtra:\n    INTEGER\n    | INTEGER direction INTEGER\n    | direction INTEGER;\nmove: Movetype COLLISION Attacktype direction moveExtra;\n\nIDENTIFIER: [a-zA-Z][a-zA-Z0-9];\nconstant:\n    BOARDPOSITION\n    | INTEGER\n    | FLOAT\n    | LETTER\n    | STRING\n    | BOOL\n    | NULL;\nBOARDPOSITION: LETTER INTEGER;\nINTEGER: [1-9][0-9]* | [0];\nFLOAT: [0-9]+ '.' [0-9]+;\nSTRING: ('&quot;' ~'&quot;'* '&quot;') | ('\\'' ~'\\''* '\\'');\nLETTER: [a-zA-Z];\n\nBOOL: 'true' | 'false';\nCOLLISION: BOOL;\nNULL: 'null';\n\nblock: '{' line* '}';\n\nWS: [ \\t\\r\\n]+ -&gt; skip;\n\nmultOp: '*' | '/' | '%';\naddOp: '+' | '-';\nboolOp: 'and' | 'or' | 'xor';\ncompareOp: '==' | '!=' | '&gt;' | '&lt;' | '&gt;=' | '&lt;=';\ndirection: 'UP' | 'LEFT' | 'RIGHT' | 'DOWN';\nMovetype: 'Direct' | 'Path';\nAttacktype: 'ATTACK' | 'MOVE' | 'ATKMOVE';\n</code></pre>\n<p>Our thought process, regarding the grammar, would be like so:</p>\n<p><code>line -&gt; statement -&gt; assigment -&gt; moveList</code></p>\n<p>and then</p>\n<pre><code>&quot;la&quot; = IDENTIFIER\n&quot;Path&quot; = Movetype\n&quot;ATTACK&quot; = Attacktype\n&quot;UP&quot; = Direction\n&quot;5&quot; = INTEGER\n</code></pre>\n<p>We get the following Parse Tree when we debug/run the .g4 file: <a href=\"https://i.stack.imgur.com/r4FG0.png\" rel=\"nofollow noreferrer\">Parse Tree</a></p>\n<p>As you can see in the Parse Tree it says unexpected values, for what in my eyes look like an expected value.</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"user_id":2764255,"display_name":"Nikos Paraskevopoulos"},"edited":false,"comment_id":134254521,"body":"Interesting finding, same happens in 2023.1 Ultimate. If you change <i>ALL</i> the code that checks method names to use <code>getName()</code>, e.g. <code>if (method.getName().equals(&quot;equals&quot;))</code>, IntelliJ stops complaining. I believe this is just a limitation in its logic and you can safely ignore the warnings. I have the impression that changing your code to simply use <code>getName</code> wouldn&#39;t hurt the correctness of your program either (not 100% sure though)."},{"owner":{"user_id":4931,"display_name":"Michael Deardeuff"},"edited":false,"comment_id":134291558,"body":"<a href=\"https://youtrack.jetbrains.com/issue/IDEA-319193/Proxy-InvocationHandler-Inspection-incorrectly-warns-for-equals-hashCode\" rel=\"nofollow noreferrer\">Bug reported</a> to jetbrains"}],"owner":{"user_id":4931,"display_name":"Michael Deardeuff"},"view_count":28,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682659259,"question_id":76126451,"body":"<p>How to get IntelliJ to properly recognize correct <code>Proxy</code> implementations?</p>\n<p>I get the following four warnings, though I believe the code to be correct. The code clearly works for the methods warned about.</p>\n<pre><code>Incompatible type might be returned when proxying method 'hashCode()':\n required: exactly Integer; got: exactly Boolean \n\nIncompatible type might be returned when proxying method 'equals()':\n required: exactly Boolean; got: exactly Integer \n\nIncompatible type might be returned when proxying method 'equals()':\n required: exactly Boolean; got: exactly String \n\nNull might be returned when proxying method 'equals()':\n this may cause NullPointerException \n</code></pre>\n<h3>MWE follows</h3>\n<pre><code>IntelliJ IDEA 2023.1 (Community Edition)\nBuild #IC-231.8109.175, built on March 28, 2023\n</code></pre>\n<pre><code>import java.lang.reflect.Proxy;\n\nimport org.junit.Test;\n\npublic class ProxyTest {\n    interface Abc { }\n\n    @Test\n    public void lookAtProxy() {\n        Abc a = (Abc) Proxy.newProxyInstance(\n            Abc.class.getClassLoader(),\n            new Class&lt;?&gt;[]{Abc.class},\n            (proxy, method, args) -&gt; {\n\n            if (method.equals(Object.class.getDeclaredMethod(&quot;equals&quot;, Object.class))) {\n                // IntelliJ complains here that hashCode should return an Integer\n                return (Boolean) (proxy == args[0]);\n            } else if (method.equals(Object.class.getDeclaredMethod(&quot;hashCode&quot;))) {\n                // IntelliJ complains here that equals should return an Boolean\n                return (Integer) System.identityHashCode(proxy);\n            } else if (method.equals(Object.class.getDeclaredMethod(&quot;toString&quot;))) {\n                // IntelliJ complains here that equals should return an Boolean\n                return Abc.class.getSimpleName();\n            } else {\n                // IntelliJ complains here that equals may return null\n                return null;\n            }\n        });\n\n        System.out.println(a.equals(a));\n        System.out.println(a.hashCode());\n        System.out.println(a);\n    }\n}\n\n</code></pre>\n<p>Output:</p>\n<pre><code>true\n872627152\nAbc\n</code></pre>\n<hr />\n<p>I have tried</p>\n<ul>\n<li>casting the returns to <code>Object</code></li>\n<li>permuting of condition orderings</li>\n<li>permuting lhs and rhs of <code>equals</code></li>\n<li>using <code>Object.class.getDeclaredMethod(...)</code></li>\n<li>using <code>Object.class.getMethod(...)</code></li>\n<li>using <code>Abc.class.getMethod(...)</code></li>\n<li>renaming classes (in case IntelliJ doesn't like or requires prefix or suffix)</li>\n<li>caching the method lookups in variables</li>\n<li>implementing the case logic in other methods</li>\n</ul>\n"},{"tags":["java","spring-boot","error-handling","controller-advice","spring-boot-3"],"comments":[{"owner":{"user_id":592355,"display_name":"xerx593"},"edited":false,"comment_id":134246725,"body":"did you see the <code>log.error(&quot;File access Exception&quot;, fae);</code> ? (first guess: it is <i>not</i> <code>FileAccessException</code>!;)"},{"owner":{"user_id":4785103,"display_name":"C&#233;sar Castro Aroche"},"edited":false,"comment_id":134246736,"body":"no, nothing @xerx593"},{"owner":{"user_id":14294053,"display_name":"Mar-Z"},"edited":false,"comment_id":134247084,"body":"Your handler method must return ResponseEntity not just ErrorResponse."}],"answers":[{"owner":{"user_id":592355,"display_name":"xerx593"},"up_vote_count":0,"is_accepted":false,"creation_date":1682612641,"answer_id":76122681,"body":"<blockquote>\n<blockquote>\n<p>did you see the <code>log.error(&quot;File access Exception&quot;, fae);</code> ...</p>\n</blockquote>\n</blockquote>\n<blockquote>\n<p>no, nothing @xerx593</p>\n</blockquote>\n<p>Assuming:</p>\n<ul>\n<li>your logging is set-up correct and level &gt;= error</li>\n<li>and <code>@ControllerAdvice</code> picked up correctly</li>\n</ul>\n<p>..that means:</p>\n<p><strong>It was <em>no</em> <code>FileAccessException</code></strong>\n(but another one, ..set a breakpoint!)</p>\n<p>Look at the <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-webmvc/src/main/java/org/springframework/web/servlet/mvc/method/annotation/ResponseEntityExceptionHandler.java#L114-L131\" rel=\"nofollow noreferrer\">impl of <code>ResponseEntityExceptionHandler</code></a>, it registers exception handler for &quot;bunch of&quot;/many types of Exceptions and is &quot;the default&quot;.</p>\n<p>Configured via <code>ProblemDetailsExceptionHandler</code>(<a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/servlet/ProblemDetailsExceptionHandler.java\" rel=\"nofollow noreferrer\">web</a>|<a href=\"https://github.com/spring-projects/spring-boot/blob/main/spring-boot-project/spring-boot-autoconfigure/src/main/java/org/springframework/boot/autoconfigure/web/reactive/ProblemDetailsExceptionHandler.java\" rel=\"nofollow noreferrer\">webflux</a>), but also (via inheritance) with your custom implementation.</p>\n<p>To get &quot;the best&quot; out of your &quot;exception handler&quot; (consider application.properties e.g.), follow the tips <a href=\"https://stackoverflow.com/a/75937888/592355\">outlined here</a> (it says &quot;reactive&quot;, but: potayto-potahto;):</p>\n<ul>\n<li>Keep/bear the <code>super</code> Implementation in mind:\n<ul>\n<li>existing handler <em>interfaces</em></li>\n<li>utilize <em>protected</em> methods</li>\n</ul>\n</li>\n<li>Extend your &quot;Error&quot; class from <code>ErrorResponseException</code></li>\n</ul>\n"}],"owner":{"user_id":4785103,"display_name":"C&#233;sar Castro Aroche"},"view_count":92,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1682611038,"question_id":76122428,"body":"<p>I have recently migrated my application from spring boot <strong>2.1</strong> to spring boot <strong>3.0</strong>.\nBut the problem is that now there are endpoints which are not giving the same response when an error happens, instead I get something like this:</p>\n<pre><code> {\n        &quot;type&quot;: &quot;about:blank&quot;,\n        &quot;title&quot;: &quot;Bad Request&quot;,\n        &quot;status&quot;: 400,\n        &quot;detail&quot;: &quot;Failed to convert 'id' with value: 'territory'&quot;,\n        &quot;instance&quot;: &quot;/webfront/administration/book/territory&quot;\n    }\n</code></pre>\n<p>I accomplished this by adding a <strong>@ControllerAdvice</strong> class that extends from <em>ResponseEntityExceptionHandler</em>.</p>\n<p>However I require some other information, the expected one would be like this:</p>\n<pre><code>{\n    &quot;type&quot;: &quot;about:blank&quot;,\n    &quot;title&quot;: &quot;Bad Request&quot;,\n    &quot;status&quot;: 400,\n    &quot;detail&quot;: &quot;Failed to convert 'id' with value: 'territory'&quot;,\n    &quot;instance&quot;: &quot;/webfront/administration/book/territory&quot;,\n    &quot;timestamp&quot;: &quot;2023-04-15 12:02:21&quot;,\n    &quot;code&quot; : 24\n}\n</code></pre>\n<p>Here is the implementation of my controller advice that should be applied globally (for the example there is only one exception but in reality there are several).</p>\n<pre><code>@ControllerAdvice\n@Slf4j\npublic class GlobalExceptionHandler extends ResponseEntityExceptionHandler {\n\n    private static ErrorResponse mapToErrorResponse(Exception e, ApplicationError applicationError, String errorMessage, HttpStatus status) {\n        return ErrorResponse.builder(e, status, errorMessage)\n                .property(&quot;code&quot;, String.valueOf(applicationError.getCode()))\n                .property(&quot;timestamp&quot;, Instant.now())\n                .build();\n    }\n\n    @ExceptionHandler(FileAccessException.class)\n    public ErrorResponse fileAccessException(FileAccessException fae) {\n        log.error(&quot;File access Exception&quot;, fae);\n        return mapToErrorResponse(fae, fae.getApplicationError(), fae.getMessage(), HttpStatus.INTERNAL_SERVER_ERROR);\n    }\n...\n}\n</code></pre>\n<p>For some reason this handler is not being detected by spring and the exceptions body continue as the first example without my custom data.</p>\n<p>I also have another problem regarding my <strong>UrlAuthenticationFailureHandler</strong> before when the user tried to access an unauthorized route the exception was handled now the body is always empty. I tried adding this config entries to my <strong>application.yml</strong> but it didn't make any difference:</p>\n<pre><code>server:\n   error:\n     include-message: ALWAYS\n     include-stacktrace: ALWAYS\nmvc:\n   problemdetails:\n     enabled: true\n</code></pre>\n"},{"tags":["java","scala"],"owner":{"user_id":14459924,"display_name":"Bender Rodriguez"},"view_count":85,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682607457,"question_id":76121875,"body":"<p>I am getting the issue below:</p>\n<pre><code>java.lang.reflect.InaccessibleObjectException: Unable to make field protected transient int java.util.AbstractList.modCount accessible: module java.base does not &quot;opens java.util&quot; to unnamed module @43393097\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n</code></pre>\n<p>The fix is widely-documented on the net: use JVM options</p>\n<p>--illegal-access=permit</p>\n<p>or</p>\n<p>--add-opens=java.base/java.util=ALL-UNNAMED.</p>\n<p>The former was removed after JDK 11. I started with JDK 17 and have now tried both Amazon and Open JDK 11. Neither of these options used with a JDK version 11 eliminates the error, nor does using both at once. I've tried every permutation (and also using --illegal-access=warn).</p>\n<p>I'm launching the app like this:</p>\n<pre><code>me in ~/dev/project on branch main &gt; java --version\nopenjdk 11.0.19 2023-04-18 LTS\nOpenJDK Runtime Environment Corretto-11.0.19.7.1 (build 11.0.19+7-LTS)\nOpenJDK 64-Bit Server VM Corretto-11.0.19.7.1 (build 11.0.19+7-LTS, mixed mode)\nme in ~/dev/project on branch main &gt;                          \nme in ~/dev/project on branch main &gt; java -jar --add-opens=java.base/java.util=ALL-UNNAMED out/server/assembly.dest/out.jar \n</code></pre>\n<p>Everything I read suggests that using --add-opens=java.base... will fix the issue on JDK11. It does not.</p>\n<p>Using --illegal-access=permit, either along or with --add-opens, also doesn't work.</p>\n<p>There's no chance the way a jar is <em>built</em> can influence this, right? It's strictly a runtime permissions thing.</p>\n"},{"tags":["java","protocol-buffers","protostuff"],"owner":{"user_id":11523294,"display_name":"Criwran"},"view_count":160,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682589706,"question_id":76119142,"body":"<p>Protostuff has a ProtobufIOUtil that seems to be able to convert Java objects into protobuf bytes.\nCurrently, it has been found that there may be differences when dealing with map types.</p>\n<p>For example:</p>\n<pre><code>@Getter\n@Setter\npublic class User {\n    @Tag(1)\n    private long uid;\n\n    @Tag(2)\n    private String name;\n\n    @Tag(3)\n    private Map&lt;Long, Integer&gt; map = new HashMap&lt;&gt;(); // Map type field\n}\n</code></pre>\n<pre><code>syntax=&quot;proto3&quot;;\n\nmessage User {\n  int64 uid = 1;\n  string name = 2;\n  map&lt;int64, int32&gt; map = 3;\n}\n</code></pre>\n<p>The test:</p>\n<pre><code>public class Test {\n    public static void main(String[] args) throws InvalidProtocolBufferException {\n        User user = new User();\n        user.setUid(1);\n        user.setName(&quot;s&quot;);\n        Map&lt;Long, Integer&gt; map = new HashMap&lt;Long, Integer&gt;();\n        map.put(1L, 1);\n        user.setMap(map);\n        Schema&lt;User&gt; schema = RuntimeSchema.getSchema(User.class);\n        byte[] bytes = ProtobufIOUtil.toByteArray(user, schema, LinkedBuffer.allocate());\n        System.out.println(Arrays.toString(bytes));\n\n        UserOuterClass.User pbUser = UserOuterClass.User.newBuilder()\n                .setUid(1)\n                .setName(&quot;s&quot;)\n                .putMap(1, 1)\n                .build();\n        System.out.println(Arrays.toString(pbUser.toByteArray()));\n        UserOuterClass.User newPbUser = UserOuterClass.User.parseFrom(bytes);\n        System.out.println(newPbUser.toString());\n    }\n}\n</code></pre>\n<p>The console output is:</p>\n<pre><code>[8, 1, 18, 1, 115, 26, 6, 10, 4, 8, 1, 16, 1]\n[8, 1, 18, 1, 115, 26, 4, 8, 1, 16, 1]\nuid: 1\nname: &quot;s&quot;\nmap {\n  key: 0\n  value: 0\n}\n</code></pre>\n<p>Bytes generated by <code>ProtobufIOUtil.toByteArray()</code> in ProtoStuff differs from bytes generated in ProtoBuf, once with <code>Map</code> type fields in Pojo class.</p>\n<p>The map data structure encoded by protobuf is roughly <code>fieldTag, eleLen, eleData, fieldTag, eleLen, eleData</code>.</p>\n<p>The byte data converted from protostuff to protobuf is roughly <code>fieldTag, fieldLen, fieldTag, eleLen, eleData, fieldTag, eleLen, eleData</code>.</p>\n<p>Compared to protobuf, there are two more data points: <code>fieldTag, fieldLen</code>.</p>\n<p>Anyway, I want the bytes generated by protostuff to be parsed in protobuf to generate the same object as the original object.</p>\n<p>Is there any relevant configuration for protostuff that supports not writing <code>fieldTag</code> and <code>fieldLen</code> at the beginning?</p>\n<p>If not, does protostuff support custom encoding and decoding (I know  <code>Delegate</code> could be used to customize encoding and decoding, but it seems to require writing by myself. I want to combine it with the original map encoding and decoding, but I haven't found an implementation yet).</p>\n"},{"tags":["java","import","extends","java-6","implements"],"comments":[{"owner":{"user_id":2338547,"display_name":"markspace"},"edited":false,"comment_id":134238181,"body":"<code>implements</code> was an old hack, please don&#39;t do that anymore.  <code>import</code> is much better.  If the number of imports is truly huge, you can consider using a global wildcard (<code>*</code>) to import many constants at once."},{"owner":{"user_id":12631570,"display_name":"Grismak"},"edited":false,"comment_id":134238283,"body":"yeah, is rare to see it in current code that&#180;s partly why i am a little bit lost, as for imports, some classes are quite crazy but i have to do a few patches, not rework the whole project"},{"owner":{"user_id":11002,"display_name":"tgdavies"},"edited":false,"comment_id":134238694,"body":"Do you have a specific question about the pros and cons of these approaches?"},{"owner":{"user_id":12631570,"display_name":"Grismak"},"edited":false,"comment_id":134238929,"body":"@tgdavies Well, it would be great to know the pros and cons of the three options in legacy code in order to obtain an homogeneous solution for this sort of interfaces. That being said, markspace recommends Import above implements which is in it&#180;s own way an answer"},{"owner":{"user_id":2695990,"display_name":"fascynacja"},"edited":false,"comment_id":134239216,"body":"extends and implements should be used rather for achieving polymorphism or implementing specific design patterns. You are clearly &quot;just&quot; reaching for the specific values, therefore static import seems like the way to go."},{"owner":{"user_id":12631570,"display_name":"Grismak"},"edited":false,"comment_id":134239255,"body":"Thanks for your answer @fascynacja i will go that way. I have in the backlog a major update for this project but it&#180;s so far way that more than the backlog is the backyard."},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":134376671,"body":"Since you wrote “<i>some static and final and some just public</i>”, it’s worth clarifying that all fields declared in an interface are implicitly <code>public</code>, <code>static</code>, and <code>final</code>, without the need to declare. You may add the redundant modifiers or omit them, but it’s strongly recommended to be consistent, as declaring these modifiers only on some of the fields obfuscates the fact that all fields have the same modifiers. Besides that, @fascynacja is right, don’t implement this interface, use <code>import static …</code>"}],"owner":{"user_id":12631570,"display_name":"Grismak"},"view_count":52,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682575550,"question_id":76117207,"body":"<p>I am currently working on a legacy code in Java 1.6 and i found that they have a Constants Interface in the Utils package (Is a quite old Webapps) <a href=\"https://i.stack.imgur.com/NIioK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NIioK.png\" alt=\"enter image description here\" /></a></p>\n<p>Well, some of the classes import the interface and some just implements it. While i am unable to make some major fixes in the project i would like to use the same solution for every classes that is using this class (almost everything in the projects calls for it).</p>\n<p>The content of the class is just a few hundreds of Strings, some static and final and some just public.</p>\n<p>Which option is the better approach for this sort of Constants file?\nextends, implements or just a basic import?</p>\n"},{"tags":["java","oracle","oracle11g","varray"],"owner":{"user_id":20394160,"display_name":"Sakshi"},"view_count":31,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682573237,"question_id":76117000,"body":"<p>I am new to oracle.I had created varray type in oracle. And now want to insert the data and set using preparedStatement. I had done same implementation in postgres using createArrayOf. But oracle does not support createArrayOf with anonymous type. I don't know how to solve it. The solution which are provided are not working for me. Because some features are deprecated in oracle.</p>\n<p>Type that I had created:</p>\n<p><code>CREATE TYPE TAGS IS VARRAY(10) OF VARCHAR2 (100)</code></p>\n<p>Insert query tested in oracle:</p>\n<pre><code>INSERT INTO STORE(tags) VALUES (TAGS('insta','instagram','sakshi','dog','cat','cute','scorpio','poison','snake','black'))\n</code></pre>\n<p>I had tried few solutions.</p>\n<p>1.\nHere I got error of createArrayOf feature not supported.</p>\n<pre><code> Object[] arr = request.getMetadata().getTags().toArray();\n               Array tag =conn.createArrayOf(&quot;TAGS&quot;, arr);\n</code></pre>\n<p>2.Here oracle.sql.Array is deprecated and second one is I don't understand what mistake I am making while creating database connection. defaultConnection() doesn't work for me and if I provide conn.getConnection without OracleConnection then createArray will not support.</p>\n<pre><code>`\n Object[] arr = request.getMetadata().getTags().toArray();\n                oracle.jdbc.OracleDriver ora = new oracle.jdbc.OracleDriver();\n                java.sql.Connection conn = ora.defaultConnection();\n                oracle.jdbc.OracleConnection oraConn = (oracle.jdbc.OracleConnection) conn;\n                oracle.sql.Array tag = oraConn.createARRAY(&quot;TAGS&quot;, arr); `\n</code></pre>\n<p>I need to set Tags in database using java preparedStatement.\nPlease help me. Thanks in advance</p>\n"},{"tags":["java","algorithm","performance","hashset","treeset"],"answers":[{"owner":{"user_id":15053047,"display_name":"IWilms"},"up_vote_count":0,"is_accepted":false,"creation_date":1683179916,"answer_id":76169984,"body":"<p><code>TreeSet</code> seems to have too much overhead in combination with the custom comparator. The <code>HashSet</code> version should work and is the same logic as the other versions. You just need to work with objects in order to have proper <code>hashCode</code>.\nYou could try changing the relevant lines to:</p>\n<pre><code>Set&lt;List&lt;Integer&gt;&gt; exploredSet = new HashSet&lt;&gt;();\n...\nif (exploredSet.contains(Arrays.asList(px, py))) {\n...\nexploredSet.add(Arrays.asList(px, py));\n...\nComparator&lt;List&lt;Integer&gt;&gt; comp = Comparator.comparingInt((List&lt;Integer&gt; x) -&gt; x.get(1)).thenComparingInt(x -&gt; x.get(0));\nexploredSet.stream()\n        .sorted(comp)\n        .map(v -&gt; v.get(0) + &quot; &quot; + v.get(1))\n        .forEach(System.out::println);\n</code></pre>\n<p><strong>EDIT</strong></p>\n<p>In general, if the Python solution is within the time limit an equivalent Java version with the same logic should be too. So why wasn't it?\n&quot;Proper HashCode&quot; - that was exactly the problem with my solution...sorry, I was blind. Java has a very simple <code>hashCode</code> function. For a List of coordinates <code>X, Y</code> it's just <code>X + 31*Y</code>. So there are a lot of collisions. For <code>0 &lt;= X, Y &lt;= 999</code> there are just 31969 distinct hashCodes. That slows down the whole process. Using Strings should be faster and hopefully within the time limit:</p>\n<pre><code>Set&lt;String&gt; exploredSet = new HashSet&lt;&gt;();\n...\nif (exploredSet.contains(px + &quot; &quot; + py)) {\n...\nexploredSet.add(px + &quot; &quot; + py);\n...\nexploredSet.stream()\n        .sorted(Comparator.comparing(x -&gt; {\n            String[] s = x.split(&quot; &quot;);\n            return s[1] + &quot; &quot; + s[0]; }))\n        .forEach(System.out::println);\n</code></pre>\n<p><strong>EDIT2</strong></p>\n<p>This is really weird. They probably pimped the python machine. Ok, one very last try with a boolean array <code>explored</code> instead of the Set <code>exploredSet</code>. That should be much faster, but it doesn't answer why the HashSet version is so slow.</p>\n<pre><code>boolean[] explored = new boolean[H*W]; // &lt;- put this line after the 2 for-loops\n...\nif (explored[py*H+px]) {\n...\nexplored[py*H+px] = true;\n...\nint index = 0;\nfor(int y=0; y&lt;H; y++){\n    for(int x=0; x&lt;W; x++){\n        if(explored[index]){\n            System.out.println(x + &quot; &quot; + y);\n        }\n        index++;\n    }\n}\n\n</code></pre>\n"}],"owner":{"user_id":7241837,"display_name":"Mandeep Singh"},"view_count":124,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1682531947,"question_id":76113751,"body":"<p>Working to solve this problem</p>\n<p><a href=\"https://mines20.kattis.com/problems/mines20.paintbucket\" rel=\"nofollow noreferrer\">https://mines20.kattis.com/problems/mines20.paintbucket</a></p>\n<p>Java solution using TreeSet times out with time limit of less than 3 seconds</p>\n<pre><code>public class PaintBucketCSMinesSolution {\n\n    public static void main(String[] args) throws IOException {\n        // maintain distinct list of points that have been visited\n        Set&lt;int[]&gt; exploredSet = new TreeSet&lt;&gt;(\n                Comparator.comparingInt((int[] el) -&gt; el[1]).thenComparingInt(el -&gt; el[0]));\n        int W;\n        int H;\n        int X;\n        int Y;\n        int[][] picture;\n        BufferedReader r = new BufferedReader(new InputStreamReader(System.in));\n        StringTokenizer st = new StringTokenizer(r.readLine());\n        W = Integer.parseInt(st.nextToken());\n        H = Integer.parseInt(st.nextToken());\n        X = Integer.parseInt(st.nextToken());\n        Y = Integer.parseInt(st.nextToken());\n        picture = new int[H][W];\n        for (int i = 0; i &lt; H; i++) {\n            st = new StringTokenizer(r.readLine());\n            for (int j = 0; j &lt; W; j++) {\n                picture[i][j] = Integer.parseInt(st.nextToken());\n            }\n        }\n\n        int color = picture[Y][X];\n\n        Stack&lt;int[]&gt; toExploreStack = new Stack&lt;&gt;();\n\n        toExploreStack.add(new int[] { X, Y });\n\n        while (!toExploreStack.isEmpty()) {\n            int[] point = toExploreStack.pop();\n            int px = point[0];\n            int py = point[1];\n            // System.out.println(exploredSet.contains(point));\n            boolean execute = true;\n\n            if (exploredSet.contains(point)) {\n                execute = false;\n            }\n\n            if (execute) {\n                exploredSet.add(point);\n\n                if (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\n                    toExploreStack.add(new int[] { px - 1, py });\n                }\n\n                if (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\n                    toExploreStack.add(new int[] { px + 1, py });\n                }\n\n                if (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\n                    toExploreStack.add(new int[] { px, py - 1 });\n                }\n\n                if (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\n                    toExploreStack.add(new int[] { px, py + 1 });\n                }\n            }\n\n        }\n        // exploredSet.sort(Comparator.comparingInt((int[] el) -&gt;\n        // el[1]).thenComparingInt(el -&gt; el[0]));\n        // Sorting HashSet using List\n\n        for (int[] v : exploredSet) {\n            System.out.println(v[0] + &quot; &quot; + v[1]);\n        }\n\n    }\n}\n</code></pre>\n<p><strong>Java HashSet</strong> solution, which also times out</p>\n<pre><code>package datastructures.algorithms;\n\nimport java.io.IOException;\nimport java.util.ArrayDeque;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Scanner;\nimport java.util.Set;\n\npublic class PaintBucketCSMinesSolution {\n\n    public static void main(String[] args) throws IOException {\n        // maintain distinct list of points that have been visited\n//      Set&lt;int[]&gt; exploredSet = new TreeSet&lt;&gt;(\n//              Comparator.comparingInt((int[] el) -&gt; el[1]).thenComparingInt(el -&gt; el[0]));\n        Set&lt;List&lt;Integer&gt;&gt; exploredSet = new HashSet&lt;&gt;();\n        int W;\n        int H;\n        int X;\n        int Y;\n        int[][] picture;\n        Scanner sc = new Scanner(System.in);\n        W = sc.nextInt();\n        H = sc.nextInt();\n        X = sc.nextInt();\n        Y = sc.nextInt();\n        picture = new int[H][W];\n        for (int i = 0; i &lt; H; i++) {\n            for (int j = 0; j &lt; W; j++) {\n                picture[i][j] = sc.nextInt();\n            }\n        }\n        sc.close();\n        int color = picture[Y][X];\n\n        ArrayDeque&lt;List&lt;Integer&gt;&gt; toExploreStack = new ArrayDeque&lt;&gt;();\n\n        toExploreStack.add(Arrays.asList(X, Y));\n\n        while (!toExploreStack.isEmpty()) {\n            List&lt;Integer&gt; point = toExploreStack.pop();\n            int px = point.get(0);\n            int py = point.get(1);\n            // System.out.println(exploredSet.contains(point));\n            boolean execute = true;\n\n            if (exploredSet.contains(point)) {\n                execute = false;\n            }\n\n            if (execute) {\n                exploredSet.add(point);\n\n                if (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\n                    toExploreStack.add(Arrays.asList(px - 1, py));\n                }\n\n                if (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\n                    toExploreStack.add(Arrays.asList(px + 1, py));\n                }\n\n                if (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\n                    toExploreStack.add(Arrays.asList(px, py - 1));\n                }\n\n                if (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\n                    toExploreStack.add(Arrays.asList(px, py + 1));\n                }\n            }\n\n        }\n\n        // Sorting HashSet using List\n\n        // exploredSet.sort(Comparator.comparingInt((List&lt;Integer&gt; el) -&gt;\n        // el.get(1)).thenComparingInt(el -&gt; el.get(0)));\n        Comparator&lt;List&lt;Integer&gt;&gt; comp = Comparator.comparingInt((List&lt;Integer&gt; x) -&gt; x.get(1))\n                .thenComparingInt(x -&gt; x.get(0));\n        exploredSet.stream().sorted(comp).map(v -&gt; v.get(0) + &quot; &quot; + v.get(1)).forEach(System.out::println);\n\n    }\n}\n</code></pre>\n<p><strong>Java HashSet String</strong> solution also timed out</p>\n<pre><code>package datastructures.algorithms;\n\nimport java.io.IOException;\nimport java.util.ArrayDeque;\nimport java.util.Arrays;\nimport java.util.Comparator;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Scanner;\nimport java.util.Set;\n\npublic class PaintBucketStringSolution {\n\n    public static void main(String[] args) throws IOException {\n        // maintain distinct list of points that have been visited\n//      Set&lt;int[]&gt; exploredSet = new TreeSet&lt;&gt;(\n//              Comparator.comparingInt((int[] el) -&gt; el[1]).thenComparingInt(el -&gt; el[0]));\n        Set&lt;String&gt; exploredSet = new HashSet&lt;&gt;();\n        int W;\n        int H;\n        int X;\n        int Y;\n        int[][] picture;\n        Scanner sc = new Scanner(System.in);\n        W = sc.nextInt();\n        H = sc.nextInt();\n        X = sc.nextInt();\n        Y = sc.nextInt();\n        picture = new int[H][W];\n        for (int i = 0; i &lt; H; i++) {\n            for (int j = 0; j &lt; W; j++) {\n                picture[i][j] = sc.nextInt();\n            }\n        }\n        sc.close();\n        int color = picture[Y][X];\n\n        ArrayDeque&lt;List&lt;Integer&gt;&gt; toExploreStack = new ArrayDeque&lt;&gt;();\n\n        toExploreStack.add(Arrays.asList(X, Y));\n\n        while (!toExploreStack.isEmpty()) {\n            List&lt;Integer&gt; point = toExploreStack.pop();\n\n            int px = point.get(0);\n            int py = point.get(1);\n            // String.valueOf(\n            String pointString = String.valueOf(px) + &quot; &quot; + String.valueOf(py);\n            // System.out.println(exploredSet.contains(point));\n            boolean execute = true;\n\n            if (exploredSet.contains(pointString)) {\n                execute = false;\n            }\n\n            if (execute) {\n                exploredSet.add(pointString);\n\n                if (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\n                    toExploreStack.add(Arrays.asList(px - 1, py));\n                }\n\n                if (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\n                    toExploreStack.add(Arrays.asList(px + 1, py));\n                }\n\n                if (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\n                    toExploreStack.add(Arrays.asList(px, py - 1));\n                }\n\n                if (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\n                    toExploreStack.add(Arrays.asList(px, py + 1));\n                }\n            }\n\n        }\n\n        // Sorting HashSet using List\n\n        exploredSet.stream().sorted(Comparator.comparing(x -&gt; {\n            String[] s = x.split(&quot; &quot;);\n            return s[1] + &quot; &quot; + s[0];\n        })).forEach(System.out::println);\n\n    }\n}\n</code></pre>\n<p><strong>While solution in python succeeds for all test cases in 2.65 seconds</strong></p>\n<pre><code>W, H,X,Y = map(int, input().split())\n\npicture=[]\n\nfor y in range(H):\n    picture.append([int(c) for c in input().split()])\n\n#print(picture)\n# implement a stack\nto_explore = [(X , Y)]\nexplored=set()\ncolor = picture[Y][X]\n#print(&quot;color&quot; , color)\n\nwhile len(to_explore) &gt;0:\n    px, py = to_explore.pop()\n\n    if(px, py) in explored:\n        continue\n    explored.add((px, py))\n\n    if (px &gt; 0 and picture[py][px - 1] == color) :\n       to_explore.append( (px - 1, py ))\n\n    if (px &lt; (W - 1) and picture[py][px + 1] == color) :\n        to_explore.append((px + 1, py ))\n\n\n    if (py &gt; 0 and picture[py - 1][px] == color) :\n        to_explore.append( (px, py - 1) )\n\n    if (py &lt; (H - 1) and picture[py + 1][px] == color) :\n        to_explore.append(( px, py + 1) )\n        \nfor x,y in sorted(explored, key=lambda x: (x[1], x[0])):\n    print(x, y)    \n\n</code></pre>\n<p><strong>CPP solution finishes in 2.05 seconds</strong></p>\n<pre><code>#include &lt;algorithm&gt;\n#include &lt;array&gt;\n#include &lt;iostream&gt;\n#include &lt;set&gt;\n#include &lt;stack&gt;\n#include &lt;vector&gt;\n\nint main() {\n    // comparison to sort the set naturally on inserting elements\n    const auto compare = [](const std::array&lt;int, 2&gt; &amp;lhs,\n                            const std::array&lt;int, 2&gt; &amp;rhs) {\n        return lhs[1] &lt; rhs[1] || (lhs[1] == rhs[1] &amp;&amp; lhs[0] &lt; rhs[0]);\n    };\n\n    // set to maintain unique elements as it is used for lookup to check if we have visited the node already\n    std::set&lt;std::array&lt;int, 2&gt;, decltype(compare)&gt; exploredSet(compare);\n    // std::set&lt;std::array&lt;int, 2&gt;&gt; exploredSet;\n    int W;\n    int H;\n    int X;\n    int Y;\n    // std::vector&lt;std::vector&lt;int&gt;&gt; picture;\n    std::cin &gt;&gt; W;\n    std::cin &gt;&gt; H;\n    std::cin &gt;&gt; X;\n    std::cin &gt;&gt; Y;\n    int picture[W][H];\n    for (int i = 0; i &lt; H; i++) {\n        for (int j = 0; j &lt; W; j++) {\n            std::cin &gt;&gt; picture[i][j];\n        }\n    }\n    int color = picture[Y][X];\n\n    std::stack&lt;std::array&lt;int, 2&gt;&gt; toExploreStack;\n    toExploreStack.push({X, Y});\n\n    while (!toExploreStack.empty()) {\n        std::array&lt;int, 2&gt; point = toExploreStack.top();\n        toExploreStack.pop();\n        int px = point[0];\n        int py = point[1];\n        bool execute = true;\n\n        // plain for loop was slow, this method is fast\n        if (exploredSet.count(point) == 1) {\n            execute = false;\n        }\n\n        if (execute) {\n            exploredSet.insert(point);\n\n            if (px &gt; 0 &amp;&amp; picture[py][px - 1] == color) {\n                toExploreStack.push({px - 1, py});\n            }\n\n            if (px &lt; (W - 1) &amp;&amp; picture[py][px + 1] == color) {\n                toExploreStack.push({px + 1, py});\n            }\n\n            if (py &gt; 0 &amp;&amp; picture[py - 1][px] == color) {\n                toExploreStack.push({px, py - 1});\n            }\n\n            if (py &lt; (H - 1) &amp;&amp; picture[py + 1][px] == color) {\n                toExploreStack.push({px, py + 1});\n            }\n        }\n    }\n\n    for (std::array&lt;int, 2&gt; v : exploredSet) {\n        std::cout &lt;&lt; v[0] &lt;&lt; &quot; &quot; &lt;&lt; v[1] &lt;&lt; std::endl;\n    }\n}\n\n</code></pre>\n<p>Please help in optimizing Java solution. I have run out of ideas.</p>\n<p>Already tried</p>\n<ul>\n<li>HashMap and sort it in end</li>\n<li>HashSet and sort it in the end.</li>\n</ul>\n<p>Also it is surprising python in this case is able to finish faster than Java implementation.</p>\n"},{"tags":["java","tostring","lombok"],"comments":[{"owner":{"user_id":768644,"display_name":"rzwitserloot"},"edited":false,"comment_id":134231445,"body":"The lombok issue tracker is available via <code>https:&#47;&#47;www.projectlombok.org&#47;</code> - make sure to mention the bug, specifically, is that lombok&#39;s toString fails to recognize it needs to invoke <code>Arrays.toString</code> here due to the nonnull annotations."}],"owner":{"user_id":18095171,"display_name":"sixqf"},"view_count":34,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682525183,"question_id":76112885,"body":"<p>Lombok's @ToString annotation generates bad String for field:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private @NonNull String @NonNull [] answers;\n</code></pre>\n<p>Class code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Getter\n@Builder\n@ToString\npublic class SongEntryDto extends EntityDto {\n    @ToString.Exclude\n    private byte @NonNull [] data;\n    private @NonNull String @NonNull [] answers;\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>SongEntryDto(answers=[Ljava.lang.String;@68f7aae2)\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"user_id":40342,"display_name":"Joachim Sauer"},"edited":false,"comment_id":134227066,"body":"No. Auto-boxing is handled by the compiler specifically for the built-in wrappers and can&#39;t be extended with user-defined types."}],"owner":{"user_id":20600349,"display_name":"Semi Dev_"},"view_count":30,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682510990,"question_id":76110570,"body":"<p>I know that Java provides predefined wrapper classes of primitive data types and support auto-boxing &amp; auto-unboxing when working with objects created by these classes. Yet, I cannot find out if Java really allows us to define custom wrapper classes like those predefined ones and provide some implementations to the compiler to support auto-boxing &amp; auto-unboxing?</p>\n<pre class=\"lang-java prettyprint-override\"><code>Integer a = 9;\nInteger b = a + 1;\n// here, a is an object and auto-unboxed to make the + works,\n// then the result is auto-boxed back into an Integer wrapper\n// before the assignment to b.\n</code></pre>\n<p>Is it possible to define a custom wrapper class like Integer with custom constrains and support auto-boxing and auto-unboxing?</p>\n<pre class=\"lang-java prettyprint-override\"><code>class Age\nextends Number {\n   public static final int MIN_VALUE = 0;\n   public static final int MAX_VALUE = 100;\n   // ...\n}\n\nAge before = 9;\nAge after = before + 100;\n// Out Range Exception\n// after = 9 + 100 is greater than Age.MAX_VALUE\n</code></pre>\n"},{"tags":["java","google-api","google-calendar-api"],"comments":[{"owner":{"user_id":18400272,"display_name":"Logan"},"edited":false,"comment_id":134239436,"body":"by other organization do you mean a different organizational unit in the same workspace or a totally different workspace?"},{"owner":{"user_id":21743309,"display_name":"Ahmed Alqaoud"},"edited":false,"comment_id":134253440,"body":"Not in the same workspace. I have to change the owner who is in different workspace."}],"owner":{"user_id":21743309,"display_name":"Ahmed Alqaoud"},"view_count":37,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682503434,"question_id":76109503,"body":"<p>How do I change the owner of a Google Calendar event to another organization's user using Java?</p>\n<p>I tried with the &quot;<a href=\"https://developers.google.com/calendar/api/v3/reference/events/move\" rel=\"nofollow noreferrer\">https://developers.google.com/calendar/api/v3/reference/events/move</a>&quot; API with the below parameters</p>\n<pre><code>calendarId: &quot;primary&quot;\neventId: myEventId\ndestination: destination Email address\n</code></pre>\n<p>but the response shows a 404 Not Found error, as you can see below.</p>\n<pre><code>{\n &quot;error&quot;: {\n  &quot;errors&quot;: [\n   {\n    &quot;domain&quot;: &quot;global&quot;,\n    &quot;reason&quot;: &quot;notFound&quot;,\n    &quot;message&quot;: &quot;Not Found&quot;\n   }\n  ],\n  &quot;code&quot;: 404,\n  &quot;message&quot;: &quot;Not Found&quot;\n }\n}\n</code></pre>\n<p>When I attempt to change the owner using Google Calendar Web, it is successfully completed. Please help me with this problem.</p>\n"},{"tags":["java","scroll"],"answers":[{"owner":{"user_id":11015369,"display_name":"Ricardinho"},"up_vote_count":0,"is_accepted":true,"creation_date":1683472224,"answer_id":76194717,"body":"<p>I am not sure if it is the best solution, but this is how I did it. I created an array of two spaceships with a distance difference between these two. So, when one of them disappeared to the right, the another one appears from the left.</p>\n<pre><code>class SpaceshipLayer extends Group {\n    Spaceship[] spaceships = new Spaceship[2];\n    \n    public SpaceshipLayer() {\n        ...\n        // set X at center of screen\n        spaceships[0].setX(getWidth / 2);\n\n        // spacesship location - screen width \n        spaceships[1].setX(spaceships[0].getX() - getWidth());\n    }\n    \n    ...\n    \n    public void draw(Batch batch, float parentAlpha) {\n        if (isRightKeyPressed) {\n            for (Spaceship spaceship : spaceships) {\n                spaceship.moveBy(5, 0);\n            }\n        }\n\n        ...\n\n        for (Spaceship spaceship : spaceships) {\n            ...\n            if (spaceship.getX() &gt; getWidth()) {\n                spaceship.setX(0 - spaceship.getWidth);\n            }\n            ...\n        }\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":11015369,"display_name":"Ricardinho"},"view_count":26,"up_vote_count":2,"accepted_answer_id":76194717,"answer_count":1,"score":2,"creation_date":1682479571,"question_id":76106961,"body":"<p>I have a class called &quot;Spaceship&quot; that extends Actor class. It is added to a group class. The group class is added to stage.</p>\n<p>I want my spaceship to reappear at the left side of the screen when it disappears on the right side, including when only a portion of the spaceship has disappeared.</p>\n<p><a href=\"https://i.stack.imgur.com/8IUyd.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8IUyd.png\" alt=\"enter image description here\" /></a></p>\n<p>Here is the spaceship class:</p>\n<pre><code>class Spaceship extends Actor() {\n    Sprite sprite;\n    \n    public Spaceship(Texture texture) {\n        sprite = new Sprite(texture);\n        sprite.setPosition(getX(), getY());\n    }\n\n    @Override\n    public void draw(Batch batch, float parentAlpha) {\n        sprite.setPosition(getX(), getY());\n    }\n}\n</code></pre>\n<p>Here is the Group class:</p>\n<pre><code>class SpaceshipLayer extends Group {\n    Spaceship spaceship;\n    ...\n    public void draw(Batch batch, float parentAlpha) {\n        if (isRightKeyPressed) {\n            spaceship.moveBy(5, 0);\n            if (spaceship.getX() &gt; screenWidth) {\n                // No working properly\n                spaceship.setX(0);\n            }\n        }\n    }\n}\n</code></pre>\n<p>Here is my main screen class:</p>\n<pre><code>class Main implements Screen {\n    SpaceshipLayer spaceshipLayer;\n    Stage stage;\n    \n    public Main() {\n        stage = new Stage();\n        spaceshipLayer = new SpaceshipLayer();\n        stage.addActor(spaceshipLayer );\n    }\n   \n    ...\n}\n</code></pre>\n<p>I am using actor coordinates for collision, etc. It is possible to do the horizontal scroll keeping sprite and actor values?</p>\n"},{"tags":["java","eclipse","layout","vaadin","vaadin-designer"],"comments":[{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":134216907,"body":"Your Question is not clear. Do you mean that you have initially designed a view with Vaadin Designer, then at runtime you want to alter that view by adding widgets? I suggest you edit your Question to be more brief, and get directly to the point."},{"owner":{"user_id":3181392,"display_name":"cfrick"},"edited":false,"comment_id":134229588,"body":"&quot;but it hasn&#39;t worked either&quot; what does that mean?"},{"owner":{"user_id":16385647,"display_name":"LucaDanielG"},"edited":false,"comment_id":134239831,"body":"I edited the post and tried to explain it better, my apologies. I hope it&#39;s clearer now."}],"owner":{"user_id":16385647,"display_name":"LucaDanielG"},"view_count":50,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682444599,"question_id":76104030,"body":"<p>I am finding some problems when trying to add a Component to a Vaadin vertical layout. I have initially designed a Vaadin view using Vaadin Designer, dragging and dropping elements. Now, from a Java class which inheritates the java class of the Vaadin view, I need to add a new component to a vertical layout of that view.\n<br></p>\n<p>I was trying to do that by getting first de layout with its own getter and then adding the new component using <code>add(Component component)</code> like this (the component is actually another Vaadin view with a layout and a button inside it):</p>\n<pre><code>this.getVaadinVerticalLayout3().as(VerticalLayout.class).add(_ver_seguidos);\n</code></pre>\n<p>But this way the component is added below the components of the layout and I want it to be the first. Here is what I'm meaning: I want the component to be added above the number label, not below it. The following picture shows what I'm getting vs what I'm expected to:\n<br></p>\n<p><a href=\"https://i.stack.imgur.com/hNTTI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hNTTI.png\" alt=\"\" /></a></p>\n<p>I have already tried <code>addComponentAtIndex(int index, Component component)</code>, where you can specify the position you'd like it to take (in my case, the index would be 0 to put it above all layout's elements), but it hasn't worked.\n<br></p>\n<p>Another way I was suggested to try was using <code>addComponentAsFirst(Component component)</code>, but it hasn't worked neither.\n<br></p>\n<p>How could I add this element and place it above all existing elements in the layout without using Vaadin Designer? I would appreciate any help and advice, thank you in advance.\n<br></p>\n<p>My IDE: Eclipse 2021-03, and Vaadin Version: 4.6.20.</p>\n"},{"tags":["java","lombok","builder","mapstruct"],"comments":[{"owner":{"user_id":10026074,"display_name":"Jan Rieke"},"edited":false,"comment_id":134215928,"body":"Do you have <code>lombok-mapstruct-binding</code> in your list of annotation processors?"},{"owner":{"user_id":15245554,"display_name":"Davb"},"edited":false,"comment_id":134216769,"body":"Yes I have it, version 0.2.0"},{"owner":{"user_id":10026074,"display_name":"Jan Rieke"},"edited":false,"comment_id":134242786,"body":"We need the whole code to reproduce your problem. In your description, the sources for <code>Comment</code> and <code>Page</code> are missing."},{"owner":{"user_id":10026074,"display_name":"Jan Rieke"},"edited":false,"comment_id":134285862,"body":"That looks like a mapstruct bug to me."},{"owner":{"user_id":15245554,"display_name":"Davb"},"edited":false,"comment_id":134307174,"body":"I will report this issue"}],"owner":{"user_id":15245554,"display_name":"Davb"},"view_count":85,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682443500,"question_id":76103880,"body":"<p>I have a class that represents a paged response that looks like this (all annotations are from Lombok):</p>\n<pre><code>@Value\n@Builder\n@Jacksonized\n@FieldNameConstants\npublic class PagedResponse&lt;T&gt; {\n\n    List&lt;T&gt; content;\n    int number;\n    int totalPages;\n    int size;\n    int numberOfElements;\n    long totalElements;\n\n}\n</code></pre>\n<p>and a dto class:</p>\n<pre><code>@Value\n@Builder\n@Jacksonized\n@FieldNameConstants\npublic class CommentResponse {\n\n    UUID uuid;\n    String value;\n\n}\n</code></pre>\n<p>I'm using Mapstruct to generate the mapper to map my entity <code>Comment</code> to my dto class, here's the mapper interface:</p>\n<pre><code>@Mapper(componentModel = MappingConstants.ComponentModel.SPRING)\npublic interface CommentMapper {\n\n    PagedResponse&lt;CommentResponse&gt; mapToCommentResponses(Page&lt;Comment&gt; comments);\n\n    CommentResponse mapToCommentResponse(Comment comment);\n\n}\n</code></pre>\n<p>While Mapstruct have no problems generating the code for simple entity-dto mapping, it struggle to generate to code for the method <code>PagedResponse&lt;CommentResponse&gt; mapToCommentResponses(Page&lt;Comment&gt; comments);</code></p>\n<p>The generated code for the mapper:</p>\n<pre><code>@Component\npublic class CommentMapperImpl implements CommentMapper {\n\n    @Override\n    public PagedResponse&lt;CommentResponse&gt; mapToCommentResponses(Page&lt;Comment&gt; comments) {\n        if ( comments == null ) {\n            return null;\n        }\n\n        List&lt;CommentResponse&gt; content = null;\n        int number = 0;\n        int totalPages = 0;\n        int size = 0;\n        int numberOfElements = 0;\n        long totalElements = 0L;\n\n        if ( comments.hasContent() ) {\n            content = commentListToCommentResponseList( comments.getContent() );\n        }\n        number = comments.getNumber();\n        totalPages = comments.getTotalPages();\n        size = comments.getSize();\n        numberOfElements = comments.getNumberOfElements();\n        totalElements = comments.getTotalElements();\n\n        // next line cause a compile error\n        PagedResponse&lt;CommentResponse&gt; pagedResponse = new PagedResponse&lt;CommentResponse&gt;( content, number, totalPages, size, numberOfElements, totalElements );\n\n        return pagedResponse;\n    }\n\n    @Override\n    public CommentResponse mapToCommentResponse(Comment comment) {\n        if ( comment == null ) {\n            return null;\n        }\n\n        CommentResponse.CommentResponseBuilder commentResponse = CommentResponse.builder();\n\n        commentResponse.uuid( comment.getUuid() );\n        commentResponse.value( comment.getValue() );\n\n        return commentResponse.build();\n    }\n\n    protected List&lt;CommentResponse&gt; commentListToCommentResponseList(List&lt;Comment&gt; list) {\n        if ( list == null ) {\n            return null;\n        }\n\n        List&lt;CommentResponse&gt; list1 = new ArrayList&lt;CommentResponse&gt;( list.size() );\n        for ( Comment comment: list ) {\n            list1.add( mapToCommentResponse( comment ) );\n        }\n\n        return list1;\n    }\n}\n</code></pre>\n<p>Here Mapstruct tries to call the package-private constructor of <code>PagedResponse</code> instead of the builder which cause a compile error.</p>\n<p>I would expect Mapstruct to call the builder like this:</p>\n<pre><code>PagedResponse.PagedResponseBuilder builder = PagedResponse.&lt;CommentResponse&gt;builder()\n</code></pre>\n<p>or like this</p>\n<pre><code>PagedResponse.PagedResponseBuilder builder = PagedResponse.builder();\n</code></pre>\n<p>Is it even possible ? And how to achieve this ?</p>\n<p>Edit:</p>\n<p>The code of my entity <code>Comment</code>:</p>\n<pre><code>@Entity\n@EqualsAndHashCode(onlyExplicitlyIncluded = true)\n@ToString\n@Getter\n@Setter\n@FieldNameConstants\npublic class Comment implements Persistable&lt;Long&gt; {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(insertable = false, updatable = false)\n    @EqualsAndHashCode.Include\n    private Long id;\n\n    @Column(updatable = false)\n    private UUID uuid;\n\n    @Version\n    private Integer version;\n    \n    private String value;\n\n    @Override\n    public boolean isNew() {\n        return Objects.isNull(id);\n    }\n\n    @PrePersist\n    private void generateUuid() {\n        uuid = UUID.randomUUID();\n    }\n\n}\n</code></pre>\n<p>The class <code>Page</code> is from <code>org.springframework.data.domain.Page</code></p>\n"},{"tags":["java","android","kotlin","android-livedata","mutablelivedata"],"comments":[{"owner":{"user_id":506796,"display_name":"Tenfour04"},"edited":false,"comment_id":134215429,"body":"What if you log instead of using <code>println</code>? We typically aren’t looking at console output when testing an Android app, only LogCat."},{"owner":{"user_id":17253541,"display_name":"SHA"},"edited":false,"comment_id":134215476,"body":"@Tenfour04 I tried logging but no luck"},{"owner":{"user_id":506796,"display_name":"Tenfour04"},"edited":false,"comment_id":134216354,"body":"I can’t spot the problem but I see that isn’t your actual code since it isn’t compileable (can’t have a function parameter named <code>val</code>). You might have modified something when posting here that is hiding your error."},{"owner":{"user_id":17253541,"display_name":"SHA"},"edited":false,"comment_id":134221054,"body":"@Tenfour04 please check now I updated the code. I had to remove some logic inside those methods because it&#39;s confidential"},{"owner":{"user_id":506796,"display_name":"Tenfour04"},"edited":false,"comment_id":134221141,"body":"You made <code>data</code> a <code>var</code> instead of <code>val</code>. Are you changing the  value stored in the property, because that could cause your issue if you&#39;re observing a different instance. I can&#39;t think of any good reason to put a LiveData in a <code>var</code> property. Did you try logging from your <code>test()</code> function to be sure it&#39;s actually called?"},{"owner":{"user_id":1197251,"display_name":"dominicoder"},"edited":false,"comment_id":134221278,"body":"Where do you call <code>observe</code> and where do you call the <code>test</code> method?"}],"answers":[{"owner":{"user_id":12143126,"display_name":"Mikhail Guliaev"},"up_vote_count":0,"is_accepted":false,"creation_date":1682507178,"answer_id":76110013,"body":"<p>You attached incomplete parts of your code, so it's difficult to detect the problem you're facing from these snippets.</p>\n<p>However, I've written some working code for you, so you can compare it with yours to identify the problem. Hope it will help.</p>\n<p>Here is the working code:</p>\n<p>MainActivity.kt:</p>\n<pre><code>package com.example.test\n\nimport androidx.appcompat.app.AppCompatActivity\nimport android.os.Bundle\nimport android.util.Log\nimport androidx.lifecycle.ViewModelProvider\n\nclass MainActivity : AppCompatActivity() {\n\n     private val viewModel by lazy {\n        ViewModelProvider(this).get(MainViewModel::class.java)\n    }\n\n    override fun onCreate(savedInstanceState: Bundle?) {\n        super.onCreate(savedInstanceState)\n        setContentView(R.layout.activity_main)\n        viewModel.text.observe(this) { text -&gt;\n            Log.i(&quot;TestLog&quot;, text)\n        }\n\n        viewModel.updateText(&quot;New text&quot;)\n    }\n}\n</code></pre>\n<p>MainViewModel.kt:</p>\n<pre><code>package com.example.test\n\nimport androidx.annotation.MainThread\nimport androidx.lifecycle.MutableLiveData\nimport androidx.lifecycle.ViewModel\nimport androidx.lifecycle.viewModelScope\nimport kotlinx.coroutines.Dispatchers\nimport kotlinx.coroutines.launch\nimport kotlinx.coroutines.withContext\n\nclass MainViewModel: ViewModel() {\n\n    val text = MutableLiveData&lt;String&gt;(&quot;Initial value&quot;)\n\n    @MainThread\n    fun updateText(value: String) {\n        viewModelScope.launch(Dispatchers.IO) {\n            updateTextInWorkerThread(value)\n        }\n    }\n\n    private suspend fun updateTextInWorkerThread(value: String) {\n        withContext(Dispatchers.Main) {\n            text.value = value\n        }\n    }\n\n}\n</code></pre>\n<p>As a result, in Logs there are displayed 2 strings:</p>\n<pre><code>2023-04-26 12:52:37.440  7773-7773  TestLog                 com.example.test                     I  Initial value\n2023-04-26 12:52:37.532  7773-7773  TestLog                 com.example.test                     I  New text\n</code></pre>\n"}],"owner":{"user_id":17253541,"display_name":"SHA"},"view_count":59,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1682440884,"question_id":76103580,"body":"<p>I have a livedata variable which I keep listening from my main activity for possible changes to do some operations in the UI thread, but unfortunately it isn't getting triggered. And please note the method test() is being called from the Javascript interface which is used for webview communication.</p>\n<p>This is what I have implemented,</p>\n<pre><code>class MainViewModel(){\n.\n.\n.\n\n var data = MutableLiveData&lt;String&gt;();\n\n fun test(value: String){\n     data.value = DataProtocol(\n             &quot;sample&quot;,\n             arrayOf(&quot;CONNECTED&quot;)).toString()\n    }\n}\n</code></pre>\n<p>This was my first attempt but I am getting an error</p>\n<blockquote>\n<p>java.lang.IllegalStateException: Cannot invoke setValue on a\nbackground thread</p>\n</blockquote>\n<p>Next i tried doing this,</p>\n<pre><code> fun test(value: String){\n  data.postValue(DataProtocol(\n                     &quot;sample&quot;,\n                    arrayOf(&quot;CONNECTED&quot;)).toString())\n}\n</code></pre>\n<p>Still no updates, then I tried it this way,</p>\n<pre><code>fun test(value: String){\n viewModelScope.launch {\n    withContext(Dispatchers.Main) {\n      data.postValue(DataProtocol(\n                         &quot;sample&quot;,\n                        arrayOf(&quot;CONNECTED&quot;)).toString())\n      }\n  }\n}\n</code></pre>\n<p>And finally I am out of options.</p>\n<p>This is how I am listening it from the main activity</p>\n<pre><code>this.viewModel.data.observe(this) { d -&gt;\n   println(&quot;RECIEVED DATA &quot; + d)\n}\n</code></pre>\n<p>Any idea what I am doing wrong. I really want to get this triggered from the main activity but no idea why this isn't working. Any suggestions would be much appreciated. Thanks in advance.</p>\n"},{"tags":["java","quarkus","mutiny","quarkus-rest-client","quarkus-reactive"],"answers":[{"owner":{"user_id":21733731,"display_name":"Lucas Werle Melz"},"up_vote_count":0,"is_accepted":false,"creation_date":1682582427,"answer_id":76118078,"body":"<p>I've found out that this is actually a Mutiny bug. The response is actually there inside the callback, since we can print its headers and the status code, but not the body  of the response... It happens when you have an Uni&lt;Response&gt; object.\n<a href=\"https://github.com/quarkusio/quarkus/issues/25496\" rel=\"nofollow noreferrer\">https://github.com/quarkusio/quarkus/issues/25496</a></p>\n<p>My way around it was to work with Uni&lt;String&gt; instead of Uni&lt;Response&gt; and since I could handle exceptions just by looking at the body of the responses, I could use this approach (I don't need the status code or the headers). Anyway this was kind of a hack... If any Mutiny developer is reading this, please take a look at this bug.</p>\n"}],"owner":{"user_id":21733731,"display_name":"Lucas Werle Melz"},"view_count":104,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1682419748,"question_id":76100343,"body":"<p>I'm a beginner on asynchronous Java programming and I'm trying to understand how to properly use Mutiny for a Quarkus application which has a Client that sends requests to an external API. This client has two methods that return Uni. Those are the following:</p>\n<pre><code>    @POST\n    @Path(&quot;/repos/{owner}/{repo}/forks&quot;)\n    Uni&lt;Response&gt; createFork(@HeaderParam(&quot;Authorization&quot;) String authorization, \n                             @PathParam(&quot;owner&quot;) String owner,\n                             @PathParam(&quot;repo&quot;) String repo, \n                             String json);`\n    @POST\n    @Path(&quot;/repos/{owner}/{repo}/transfer&quot;)\n    Uni&lt;Response&gt; transferRepoOwnership(@HeaderParam(&quot;Authorization&quot;) String authorization,   @PathParam(&quot;owner&quot;) String owner, @PathParam(&quot;repo&quot;) String repo, String json);\n\n</code></pre>\n<p>These were tested and the calls to the API are working just fine. In my service class, I'm trying to use Mutiny to chain these two operations, that is, I want to create a fork and then, after the fork is created, I want to transfer the ownership of the repository... I've tried different approaches and I actually managed to chain these operations and execute them: the problem is, in the &quot;callback&quot; of the second call, I can't access the response to process the data. This is my business logic:</p>\n<pre><code>type public Uni&lt;Response&gt; beginChallengeWorkflow(String user, String parentRepoId) {\n\n    // Check if the challenge exists, that is,\n    // if the repo to be forked exists\n    Optional&lt;Challenge&gt; parentChallenge = challengeRepository.findById(parentRepoId);\n    if (parentChallenge.isEmpty()) {\n        return Uni.createFrom().item(Response.status(Response.Status.NOT_FOUND)\n                .entity(&quot;The challenge with the specified id doesn't exist!&quot;)\n                .build());\n    }\n\n    // Check if user has already started the challenge\n    Optional&lt;Challenge&gt; startedChallenge = challengeRepository.findByOwnerAndParentId(user, parentRepoId);\n    if (startedChallenge.isPresent()) {\n        return Uni.createFrom().item(Response.status(Response.Status.CONFLICT)\n                .entity(&quot;The user has already started the challenge!&quot;)\n                .build());\n    }\n\n    // User has not started challenge yet, so we want to fork the challenge repo\n    // and transfer ownership to user\n    String challengeCreator = parentChallenge.get().getOwnerUsername();\n    String parentRepoName = parentChallenge.get().getName();\n    String childRepoName = UUID.randomUUID().toString().substring(0,10) + &quot;-&quot; + user + &quot;-&quot; + parentRepoId;\n\n    Uni&lt;Response&gt; forkUni = forkRepository(challengeCreator, parentRepoName, childRepoName)\n        .onItem().transform(response -&gt; {\n            if (response.getStatus() != 202) {\n                throw new RuntimeException(&quot;Failed to fork the 'master' challenge PK&quot;);\n            }\n            return response;\n        });\n\n\n    Uni&lt;Response&gt; transferUni = transferRepositoryOwnership(user, &quot;root&quot;, childRepoName)\n        .onItem().transform(response -&gt; {\n            if (response.getStatus() != 202) {\n                throw new RuntimeException(&quot;Failed to transfer ownership of the repo to the user&quot;);\n            }\n            else{\n                // Save Challenge entity\n                // HERE IS WHERE I WANTED TO ACCESS THE RESPONSE\n                // BUT I CAN'T\n                // System.out.println(response.getEntity().toString()) causes exception:\n                // Cannot invoke &quot;Object.toString()&quot; because the return\n                // value of &quot;javax.ws.rs.core.Response.getEntity()&quot; is null\n            }\n            return response;\n        });\n    \n       return forkUni.chain(() -&gt; transferUni);\n}\n</code></pre>\n<p>I've tried also:</p>\n<pre><code>   forkRepository(challengeCreator, parentRepoName, childRepoName).onItem().transformToUni( response1 -&gt; {\n            if (response1.getStatus() != 202) {\n                throw new RuntimeException(&quot;Failed to fork the 'master' challenge PK&quot;);\n            }\n            return transferRepositoryOwnership(user, &quot;root&quot;, childRepoName);\n        }).subscribe().with(response2 -&gt; {\n\n                // response2 is null... I can't access it\n        });\n</code></pre>\n<p>The strangest thing is that when I call this method from my controller, the endpoint returns the response as I wanted, but I can't access it inside the &quot;callback&quot;... I'm used to asynchronous programming in JavaScript/NodeJS where I could easily access the responses inside the callbacks and I don't understand why is it so complicated to do the same with Mutiny.</p>\n<p>Thank you for your attention!</p>\n<p>I've tried to chain calls to an external API using Mutiny in a Quarkus application and despite managing to execute the chained operations, I can't access the response in the callback...</p>\n<p>Edit: I've added some checks in the second callback to see if there was any response at all at that point:</p>\n<pre><code>\n  // Log response status code and headers\n                        System.out.println(response.getStatus());\n                        System.out.println(response.getHeaders());\n\n                        if (!response.hasEntity()) {\n                            throw new RuntimeException(&quot;Response body is empty&quot;);\n                        }\n                        else {\n                            // Process response body\n                            String responseBody = response.getEntity().toString();\n                            System.out.println(responseBody);\n                            // ...\n                        } \n</code></pre>\n<p>The status of the response is 202, and the headers are:\n[Cache-Control=max-age=0, private, must-revalidate, no-transform,Connection=keep-alive,Content-Type=application/json;charset=utf-8,Date=Tue, 25 Apr 2023 11:12:42 GMT,Transfer-Encoding=chunked,X-Content-Type-Options=nosniff,X-Frame-Options=SAMEORIGIN]</p>\n<p>But response.getEntity() is null!</p>\n"},{"tags":["java","spring-boot","deserialization","get-request"],"comments":[{"owner":{"user_id":1023553,"display_name":"NoDataFound"},"edited":false,"comment_id":134201145,"body":"You should provide the exception from the log of your service: the image, or your &quot;part of it&quot;, is encoded (<code>\\r\\n</code>)."},{"owner":{"user_id":1023553,"display_name":"NoDataFound"},"edited":false,"comment_id":134201159,"body":"Also, your are hiding the cause but I&#39;d say that jackson is not processing correctly your JSON as <code>Map&lt;String, Map&lt;String, List&lt;String&gt;&gt;</code> or expect <code>GetDatasetModel</code> to be a <code>Map</code>."},{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"edited":false,"comment_id":134201242,"body":"@NoDataFound Hello! Thank you for your comment. Maybe something is encoded, but I did now specified to be encoded."}],"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"view_count":54,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682366579,"question_id":76095675,"body":"<p>I am a noob in Spring Boot and I am trying to make 2 servers to communicate with each other. Each server works individually, but I have a broken communication.</p>\n<p>First Server that gets the user requests and sends the get requests to the Server2:</p>\n<pre><code>@RestController\n@AllArgsConstructor\n@RequestMapping(path = &quot;/webpage&quot;)\npublic class IndexController {\n\n    @Autowired\n    private CheckService checkService;\n\n    @Autowired\n    private SearchService searchService;\n\n    @Autowired\n    private GetDatasetService getDatasetService;\n\n    @GetMapping(path = {&quot;check&quot;})\n    public String CheckDataset(@RequestParam List&lt;String&gt; checking) {\n        return checkService.checkDataset(checking);\n    }\n\n\n//    @RequestParam List&lt;String&gt; userinfo\n    @GetMapping(path = {&quot;GetDataset&quot;})\n    public HashMap&lt;String, HashMap&lt;String, List&lt;String&gt;&gt;&gt; GetDataset(@RequestParam List&lt;String&gt; userinfo) {\n\n        return getDatasetService.getDataset(userinfo);\n    }\n</code></pre>\n<p>This is the &quot;GetDatasetService&quot; that sends the &quot;Get&quot; request, this does not work:</p>\n<pre><code>public class GetDatasetService {\n\n    @Value(&quot;${first.year.project.url}&quot;)\n    private String url;\n\n\n    public HashMap&lt;String, HashMap&lt;String, List&lt;String&gt;&gt;&gt; getDataset(List&lt;String&gt; userinfo){\n\n        String urlForGetDataset = url + &quot;/api/GetDataset&quot;;\n\n        URI uri = UriComponentsBuilder\n                .fromHttpUrl(urlForGetDataset)\n                .queryParam(&quot;userinfo&quot;,userinfo)\n                .build(Collections\n                        .emptyMap());\n\n        return WebClient.create()\n                .get()\n                .uri(uri)\n                .retrieve()\n                .bodyToMono(GetDatasetModel.class)\n                .block();\n\n    }\n}\n</code></pre>\n<p>The &quot;CheckService&quot; works:</p>\n<pre><code>@Component\npublic class CheckService {\n\n    @Value(&quot;${first.year.project.url}&quot;)\n    private String url;\n\n\n    public String checkDataset(List&lt;String&gt; list){\n        String urlForrCheck = url + &quot;/api/Check&quot;;\n\n        URI uri = UriComponentsBuilder\n                .fromHttpUrl(urlForrCheck)\n                .queryParam(&quot;checking&quot;,list)\n                .build(Collections\n                        .emptyMap());\n\n\n        String check = WebClient.create()\n                .get()\n                .uri(uri)\n                .retrieve()\n                .bodyToMono(String.class)\n                .block();\n\n        return check;\n    }\n}\n</code></pre>\n<p>Server2</p>\n<p>The &quot;RequestController&quot; class:</p>\n<pre><code>@AllArgsConstructor\n@RestController\n@RequestMapping(path = {&quot;/api&quot;})\npublic class RequestsController {\n\n    private final HashMap&lt;String, HashMap&lt;String,String&gt;&gt; DatasetMaps = ProcessingApplication.DatasetMaps;\n\n    @GetMapping(path = {&quot;Check&quot;})\n    public String Check(@RequestParam List&lt;String&gt; checking){\n        GetCheck getCheck = new GetCheck(this.DatasetMaps);\n        CheckModel checkModel = new CheckModel();\n        checkModel.setList(checking);\n        return getCheck.GetCheckDatasetMethod(checkModel.checking);\n    }\n\n\n    @GetMapping(path = {&quot;GetDataset&quot;})\n    public HashMap&lt;String, HashMap&lt;String, List&lt;String&gt;&gt;&gt; GetDataset(@RequestParam List&lt;String&gt; userinfo) throws IOException {\n\n        GetDatasetModel getDatasetModel = new GetDatasetModel();\n        getDatasetModel.setList(userinfo);\n        GetDataset getDataset = new GetDataset();\n        return getDataset.GetDatasetMethod(getDatasetModel.userinfo.get(0),getDatasetModel.userinfo.get(1));\n    }\n</code></pre>\n<p>The &quot;CheckModel&quot; class:</p>\n<pre><code>@Getter\n@Setter\npublic class CheckModel {\n    protected List&lt;String&gt; checking;\n    public CheckModel(){}\n    public void setList(List&lt;String&gt; list){\n        this.checking = list;\n    }\n}\n</code></pre>\n<p>The &quot;GetDatasetModel&quot; class:</p>\n<pre><code>@Setter\n@Getter\npublic class GetDatasetModel {\n    protected List&lt;String&gt; userinfo;\n\n    public GetDatasetModel(){}\n\n    public void setList(List&lt;String&gt; userinfo){\n        this.userinfo=userinfo;\n    }\n}\n</code></pre>\n<p>As it is presented in the following image the Server2 for the &quot;GetDataset&quot; request is working perfectly.</p>\n<p>In the request is returning a nested hashmap, the request is working when I use &quot;Postman&quot;.</p>\n<p><a href=\"https://i.stack.imgur.com/9mEnu.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9mEnu.png\" alt=\"enter image description here\" /></a></p>\n<p>When I am trying to use the &quot;GetDataset&quot; using the &quot;Server1&quot; is getting an error.</p>\n<p><a href=\"https://i.stack.imgur.com/4UXQr.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4UXQr.png\" alt=\"enter image description here\" /></a></p>\n<p>The error is quite big and I will just put just a part of it, if you need more I will edit the post:</p>\n<pre><code>org.springframework.core.codec.CodecException: Type definition error: [map type; class com.Portal.Indexes.HTMLModel.GetDatasetModel, [simple type, class java.lang.String] -&gt; [map type; class java.util.HashMap, [simple type, class java.lang.String] -&gt; [collection type; class java.util.List, contains [simple type, class java.lang.String]]]]\\n\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:269)\\n\\tSuppressed: The stacktrace has been enhanced by Reactor, refer to additional information below: \\nError has been observed at the following site(s):\\n\\t*__checkpoint ⇢ Body from GET http://127.0.0.1:1200/api/GetDataset?userinfo=Alex&amp;userinfo=check [DefaultClientResponse]\\nOriginal Stack Trace:\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.processException(AbstractJackson2Decoder.java:269)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.decode(AbstractJackson2Decoder.java:209)\\n\\t\\tat org.springframework.http.codec.json.AbstractJackson2Decoder.lambda$decodeToMono$2(AbstractJackson2Decoder.java:189)\\n\\t\\tat reactor.core.publisher.MonoFlatMap$FlatMapMain.onNext(MonoFlatMap.java:132)\\n\\t\\tat reactor.core.publisher.FluxContextWrite$ContextWriteSubscriber.onNext(FluxContextWrite.java:107)\\n\\t\\tat reactor.core.publisher.FluxMapFuseable$MapFuseableConditionalSubscriber.onNext(FluxMapFuseable.java:299)\\n\\t\\tat reactor.core.publisher.FluxFilterFuseable$FilterFuseableConditionalSubscriber.onNext(FluxFilterFuseable.java:337)\\n\\t\\tat reactor.core.publisher.Operators$BaseFluxToMonoOperator.completePossiblyEmpty(Operators.java:2071)\\n\\t\\tat reactor.core.publisher.MonoCollect$CollectSubscriber.onComplete(MonoCollect.java:145)\\n\\t\\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\\n\\t\\tat reactor.core.publisher.FluxPeek$PeekSubscriber.onComplete(FluxPeek.java:260)\\n\\t\\tat reactor.core.publisher.FluxMap$MapSubscriber.onComplete(FluxMap.java:144)\\n\\t\\tat reactor.netty.channel.FluxReceive.onInboundComplete(FluxReceive.java:415)\\n\\t\\tat reactor.netty.channel.ChannelOperations.onInboundComplete(ChannelOperations.java:431)\\n\\t\\tat reactor.netty.channel.ChannelOperations.terminate(ChannelOperations.java:485)\\n\\t\\tat reactor.netty.http.client.HttpClientOperations.onInboundNext(HttpClientOperations.java:712)\\n\\t\\tat reactor.netty.channel.ChannelOperationsHandler.channelRead(ChannelOperationsHandler.\n</code></pre>\n<p>Do you know what should I do in this situation?</p>\n"},{"tags":["java","spring","junit","dependency-injection","spring-test"],"comments":[{"owner":{"user_id":12706564,"display_name":"Emanuel Trandafir"},"edited":false,"comment_id":134196299,"body":"have you tried to direclty <code>@Autowired</code> the field? and remove the test constructor?"},{"owner":{"user_id":5117196,"display_name":"Andrew Kachalin"},"edited":false,"comment_id":134196323,"body":"@EmanuelTrandafir We have command agreement, that we will inject via constructor."},{"owner":{"user_id":5117196,"display_name":"Andrew Kachalin"},"edited":false,"comment_id":134197484,"body":"@ZufarSunagatov yes, but I am not full satisfy"}],"answers":[{"owner":{"user_id":13515974,"display_name":"Zufar Sunagatov"},"up_vote_count":1,"is_accepted":false,"creation_date":1682347899,"answer_id":76093211,"body":"<blockquote>\n<p>Question: how to change (what to add) to SimpleClassImplTest so that\nthe bean is normally injected through the constructor?</p>\n</blockquote>\n<ol>\n<li><p>Annotate constructor with <code>@Autowired</code>.</p>\n</li>\n<li><p>As you use Unit 5, use the <code>@ExtendWith</code> instead of the deprecated <code>@RunWith</code> annotation.</p>\n</li>\n</ol>\n<p>Here is the code:</p>\n<pre><code>@SpringBootTest\n@ExtendWith(SpringExtension.class)\n@ComponentScan(&quot;there is path to my directory&quot;)\npublic class SimpleClassImplTest {\n\n    private final SimpleClass simpleClass;\n\n    @Autowired\n    public SimpleClassImplTest(SimpleClass simpleClass){\n        this.simpleClass = simpleClass;\n    }\n\n    @Test\n    public void testGetString(){\n        assertNotNull(simpleClass.getString());\n    }\n}\n</code></pre>\n<p>If you want to test the <code>SimpleClass interface</code> without any concrete implementation, you can use a mock object framework like <code>Mockito</code> to create a mock object of the <code>interface</code>.\nHere is the code:</p>\n<pre><code>@ExtendWith(MockitoExtension.class)\npublic class SimpleClassImplTest {\n\n    @Mock\n    private SimpleClass simpleClass;\n\n    @Test\n    public void testGetString(){\n        when(simpleClass.getString()).thenReturn(&quot;Hello World&quot;);\n        assertNotNull(simpleClass.getString());\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":5117196,"display_name":"Andrew Kachalin"},"view_count":80,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1682345927,"question_id":76092878,"body":"<p>Suppose I have a business logic layer in my spring boot application. To simplify:</p>\n<pre><code>public interface SimpleClass {\n    public String getString();\n}\n\n@Service\npublic class SimpleClassImpl implements SimpleClass {\n\n    public String getString(){\n        return &quot;Hello World&quot;;\n    }\n}\n</code></pre>\n<p>I need to test a single method. I wrote something like this:</p>\n<pre><code>@SpringBootTest\n@ExtendWith(SpringExtension.class)\n@ComponentScan(&quot;there is path to my directory&quot;)\nclass SimpleClassImplTest {\n\n    private SimpleClass simpleClass;\n\n    @Autowired\n    SimpleClassImplTest(SimpleClass simpleClass){\n        this.simpleClass = simpleClass;\n    }\n\n    @Test\n    public void testGetString(){\n     assertNotNull( simpleClass.getString());\n    }    \n}\n</code></pre>\n<p>That is, in the test, I want to inject an instance of the business logic class through the constructor (this is necessary for my tasks). The application however crashes with error:  <code>org.junit.jupiter.api.extension.ParameterResolutionException: Failed to resolve parameter in constructor.</code></p>\n<p><strong>Question:</strong> how to change (what to add) to SimpleClassImplTest so that the bean is normally injected through the constructor?</p>\n"},{"tags":["java","http","httpurlconnection"],"comments":[{"owner":{"user_id":17547957,"display_name":"SupaMaggie70 b"},"edited":false,"comment_id":134195274,"body":"From <a href=\"https://docs.oracle.com/javase/7/docs/api/java/net/URL.html#openConnection()\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/api/java/net/&hellip;</a>, it looks like you have to call the .connect() function before sending any data. You may also want to call .disconnect() at the end."},{"owner":{"user_id":17547957,"display_name":"SupaMaggie70 b"},"edited":false,"comment_id":134195322,"body":"You should also log the error instead of just catching it. I believe that would be e.printStackTrace()."},{"owner":{"user_id":229743,"display_name":"Taylor"},"edited":false,"comment_id":134195962,"body":"The code you&#39;ve posted is missing <code>flush</code> and <code>close</code>, but you mention you tried those.  I assume you tried them BEFORE calling <code>getResponseCode</code> as this is important.  The only other thing that could be happening is an exception, as @SupaMaggie70b advised, so logging any exception in this code would be helpful."}],"owner":{"user_id":3401736,"display_name":"Captain&#39;Flam"},"view_count":30,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682340296,"question_id":76092033,"body":"<p>I wrote a minimal method to post some binary data over HTTP but the data is not actually sent every time.<br />\nI saw many other questions that looks like this one, but none solved my problem.\nHere is my java method</p>\n<pre class=\"lang-java prettyprint-override\"><code>    public static int http_post ( String server , byte [] data )\n        {\n        HttpURLConnection urlConnection = null ;\n        try {\n            URL url = new URL( server ) ;\n            urlConnection = (HttpURLConnection)url.openConnection() ;\n            urlConnection.setRequestMethod(&quot;POST&quot;) ;\n            urlConnection.setDoOutput( true ) ;\n            urlConnection.getOutputStream().write( data ) ;\n            return urlConnection.getResponseCode() ;\n            }\n        catch ( Exception e )\n            {\n            return -1 ;            \n            }\n        finally \n            {\n            urlConnection.disconnect() ;\n            }\n        }        \n</code></pre>\n<p>On the client side, it works well: the returned code is always 200. (that's why I don't treat the exception in this simple code).</p>\n<p>But when I look at the server side, I see that the data is some time well received, and some time not.<br />\nIt's completely random : when I re-run, what is received or not is different.<br />\nWhen the data is not received, the received request contains a correct &quot;Content-Length&quot; but the body is simply not there (nor the double <em>EOL</em>).\nI got the same behavior on several servers : my own one (that hosts my web pages), a very small and local one I wrote in python and <em><a href=\"https://httpbin.org/anything\" rel=\"nofollow noreferrer\">https://httpbin.org/anything</a></em>.</p>\n<p>I tried many variant (with <em>flush</em>+<em>close</em> on the output stream, playing with timeouts, <em>useCache</em> or not, calling <em>connect()</em> before to send, with a <em>sleep</em> before <em>getResponseCode</em>...)<br />\nI can't figure out what is wrong in my code, especially since it's random.</p>\n"},{"tags":["java","java-time","period"],"comments":[{"owner":{"user_id":207421,"display_name":"user207421"},"edited":false,"comment_id":134192701,"body":"Is your arithmetic on the dates crossing a daylight savings boundary?"},{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":134193197,"body":"@user207421 Depending on interpretation either &quot;no&quot; or &quot;that shouldn’t matter&quot;. The OP is using <code>LocalDate</code>, and <code>LocalDate</code> hasn’t got any time zone and thus is not able to be influenced by summer time (DST)."},{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":134193244,"body":"It’s a guess only: Maybe when subtracting the year is subtracted first, then the 265 days. And when adding the year is added first, then the 365 days. This means in the case of date A when subtracting you are subtracting the year across the leap day in 2020, that is 366 days, but adding only 365 days when going in the opposite direction. This causes you to end up 1 day short. For date B you have the same issue when crossing the leap day in 2024."},{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":134193324,"body":"The documentation confirms my guess. The operations are implemented by calling <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/time/Period.html#addTo(java.time.temporal.Temporal)\" rel=\"nofollow noreferrer\"><code>Period.addTo()</code></a> and <code>Period.subtractFrom()</code>. From the documentation of the former: <i>... if the months are zero, the years are added if non-zero, otherwise the combination of years and months is added if non-zero. Finally, any days are added.</i> Same for the latter, it subtracts the year first and finally the days."},{"owner":{"user_id":16376827,"display_name":"g00se"},"edited":false,"comment_id":134193337,"body":"Try it with <code>Duration</code> instead"},{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":134193384,"body":"@g00se That does not work. <code>LocalDate.now().plus(Duration.ofDays(365))</code> gives <i>java.time.temporal.UnsupportedTemporalTypeException: Unsupported unit: Seconds</i>. A <code>Duration</code> is time-based, think hours, minutes, seconds and fraction of second, and hence incompatible with <code>LocalDate</code>, which knows only days, months and years."},{"owner":{"user_id":16376827,"display_name":"g00se"},"edited":false,"comment_id":134193451,"body":"Right, yes I see"},{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":134193841,"body":"<i>Is this a bug or expected?</i> It surprised me too. On one hand date math is very often not well-defined, and probably other date-time libraries would be more in line with your expectations and mine. For example subtracting the days first and the years and months next would yield consistent results in your example situation, but still not in all situations. I would consider it more correct. On the other hand as I said, your observations agree with the documentation. So if a bug, then a bug in the design/requirements."}],"owner":{"user_id":21720785,"display_name":"Florian"},"view_count":45,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682329451,"question_id":76090590,"body":"<p>I was experiencing some unexpected behaviors when doing date/time calculations. When it comes to daylight savings or leap years, the order of operations (months/days/hours) does matter, which is rather obvious. But it seems that the operation order is not deterministic when it comes to addition and substraction of java.time.Period?</p>\n<p>To make more clear what I mean here an example, where I add and substract the same period from a date:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    Period period = Period.ofDays(365).plus(Period.ofYears(1));\n    LocalDate dateA = LocalDate.of(2020, 4, 24);\n    LocalDate dateA2 = dateA.minus(period).plus(period);\n    LocalDate dateA3 = dateA.plus(period).minus(period);\n    System.out.println(dateA);\n    System.out.println(dateA2);\n    System.out.println(dateA3);\n\n    System.out.println(&quot;---&quot;);\n\n    LocalDate dateB = LocalDate.of(2022, 4, 24);\n    LocalDate dateB2 = dateB.minus(period).plus(period);\n    LocalDate dateB3 = dateB.plus(period).minus(period);\n    System.out.println(dateB);\n    System.out.println(dateB2);\n    System.out.println(dateB3);\n}\n</code></pre>\n<p>the output is</p>\n<pre><code>2020-04-24\n2020-04-23\n2020-04-24\n---\n2022-04-24\n2022-04-24\n2022-04-23\n</code></pre>\n<p>I was expecting that addition and substraction negate each other, so adding and substracting the same Period would always result in the initial date, but it does not. (It would require to swap the execution order from years/months/days when adding to days/months/years when substracting i assume)</p>\n<p>Is this a bug or expected?</p>\n"},{"tags":["java","spring-boot","api","rest","get-request"],"comments":[{"owner":{"user_id":1540177,"display_name":"grekier"},"edited":false,"comment_id":134191980,"body":"WebClient is fine but you need to add authentication. It says 401 which means that you didn&#39;t authenticate with server2"},{"owner":{"user_id":2955605,"display_name":"Slimu"},"edited":false,"comment_id":134192008,"body":"Maybe is something to do with CORS, you can try to add a bean to allow all connections:  <code>@Bean     CorsWebFilter corsWebFilter() {         final CorsConfiguration corsConfig = new CorsConfiguration();         corsConfig.applyPermitDefaultValues();         corsConfig.addAllowedMethod(&quot;*&quot;);          final UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();         source.registerCorsConfiguration(&quot;&#47;**&quot;, corsConfig);          return new CorsWebFilter(source);     }</code>"},{"owner":{"user_id":7597158,"display_name":"Thirumaran"},"edited":false,"comment_id":134192159,"body":"Remove auth if you don&#39;t want to use. disable security by adding this line to properties file security.ignored=/**"},{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"edited":false,"comment_id":134193848,"body":"Thank you so much guys! I tried to disable the security, but is not working."},{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"edited":false,"comment_id":134193885,"body":"@grekier I knew it is kind of a authenticate error, but I did not how to solve it"},{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"edited":false,"comment_id":134194897,"body":"@Slimu I am trying to do what you suggested, but I have this error: java: incompatible types: org.springframework.web.cors.UrlBasedCorsConfigurationSource cannot be converted to org.springframework.web.cors.reactive.CorsConfigurationSourc&zwnj;&#8203;e"},{"owner":{"user_id":2955605,"display_name":"Slimu"},"edited":false,"comment_id":134197196,"body":"My example was for Spring WebFlux endpoints, for non-reactive you can read here <a href=\"https://spring.io/guides/gs/rest-service-cors/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/rest-service-cors</a>"},{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"edited":false,"comment_id":134200223,"body":"In the end I figure it out it was a silly mistake with the URI"}],"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"view_count":64,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682327380,"question_id":76090312,"body":"<p>I need to create a communication between two Spring Servers. Both of the servers works, I have tested them with &quot;Postman&quot;. First server:\n<a href=\"https://i.stack.imgur.com/rnHxp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/rnHxp.png\" alt=\"enter image description here\" /></a></p>\n<p>And this is the second server:</p>\n<p><a href=\"https://i.stack.imgur.com/WbfYk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WbfYk.png\" alt=\"enter image description here\" /></a></p>\n<p>Server1: (that must performe the get request)</p>\n<p>This is the &quot;CheckService&quot;:</p>\n<pre><code>@Service\n@AllArgsConstructor\n@Setter\npublic class CheckService {\n\n    private CheckModel checkModel;\n    private RestTemplate restTemplate;\n\n    public CheckService(){}\n    private WebClient webClient;\n\n    public CheckService(CheckModel checkModel){\n        this.checkModel = checkModel;\n        this.restTemplate = new RestTemplate();\n        this.webClient = WebClient.builder().baseUrl(&quot;http://localhost:1200/api&quot;).build();\n    }\n    \n\n    public String CheckDataset(){\n        try {\n\n            CheckModel checkModel1 = new CheckModel();\n            List&lt;String&gt; list = new ArrayList&lt;&gt;();\n            list.add(&quot;Alex&quot;);\n            list.add(&quot;check&quot;);\n\n            checkModel1.setChecking(list);\n\n            return webClient.get()\n                    .uri(&quot;/Check&quot;)\n                    .retrieve()\n                    .bodyToMono(String.class)\n                    .block();\n        }catch (Exception e){\n            throw new RuntimeException(e);\n        }\n   }\n}\n</code></pre>\n<p>This is the &quot;CheckModel&quot; class:</p>\n<pre><code>@Getter\n@Setter\npublic class CheckModel {\n    protected List&lt;String&gt; checking;\n    public CheckModel(){}\n\n}\n</code></pre>\n<p>Server2: (server that must response to the get request)</p>\n<p>The &quot;RequestController&quot; class:</p>\n<pre><code>@AllArgsConstructor\n@RestController\n@RequestMapping(path = {&quot;/api&quot;})\npublic class RequestsController {\n\n    private final HashMap&lt;String, HashMap&lt;String,String&gt;&gt; DatasetMaps = ProcessingApplication.DatasetMaps;\n\n    @GetMapping(path = {&quot;Check&quot;})\n    public String Check(@RequestBody CheckModel checkModel){\n        GetCheck getCheck = new GetCheck(this.DatasetMaps);\n        return getCheck.GetCheckDatasetMethod(checkModel.checking);\n    }\n  }\n}\n</code></pre>\n<p>The &quot;CheckModel&quot; class:</p>\n<pre><code>@Getter\n@Setter\npublic class CheckModel {\n    protected List&lt;String&gt; checking;\n    public CheckModel(){}\n}\n</code></pre>\n<p>This is the security of the second server:</p>\n<pre><code>@Configuration\n@AllArgsConstructor\n@EnableWebSecurity\npublic class ServerSecurity{\n\n    @Bean\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity httpSecurity) throws Exception{\n        httpSecurity\n                .csrf()\n                .disable()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/api/**&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .formLogin();\n        httpSecurity.httpBasic();\n\n        return httpSecurity.build();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n</code></pre>\n<p>The error that the First server receive is: 401 Unauthorized.\nI do not know if the &quot;WebClient&quot; is the correct way of doing it. Do you have any suggestion?</p>\n"},{"tags":["java","spring","spring-boot","unit-testing","mockito"],"comments":[{"owner":{"user_id":1540177,"display_name":"grekier"},"edited":false,"comment_id":134191515,"body":"Do you have an exception handler like described in, f. ex., <a href=\"https://www.baeldung.com/exception-handling-for-rest-with-spring\" rel=\"nofollow noreferrer\">baeldung.com/exception-handling-for-rest-with-spring</a> ?"},{"owner":{"user_id":11252174,"display_name":"Demir"},"edited":false,"comment_id":134191547,"body":"Yes, I have an exception handler."},{"owner":{"user_id":1540177,"display_name":"grekier"},"edited":false,"comment_id":134191929,"body":"Please show it in the question"},{"owner":{"user_id":11252174,"display_name":"Demir"},"edited":false,"comment_id":134192056,"body":"@grekier I published the rest :)"},{"owner":{"user_id":1540177,"display_name":"grekier"},"edited":false,"comment_id":134192264,"body":"Not sure, but it might be that the test unit test doesn&#39;t have the <code>@ControllerAdvice</code>. Have you tried anotated it with <code>@SpringBootTest</code> instead of <code>@WebMvcTest</code>?"}],"answers":[{"owner":{"user_id":10725858,"display_name":"Tịnh Trần Thanh"},"up_vote_count":0,"is_accepted":false,"creation_date":1682329078,"answer_id":76090543,"body":"<p>I think in your Test class you should update the <code>setUp</code> method, the error above might happened caused by your exception handler class was not worked</p>\n<pre><code>@Before\npublic void setup() {\n this.mockMvc = MockMvcBuilders.standaloneSetup(underTest)\n     .setControllerAdvice(new AppExceptionHandler())\n    .build();\n}\n</code></pre>\n<p>Hope it can help you.</p>\n"},{"owner":{"user_id":592355,"display_name":"xerx593"},"up_vote_count":0,"is_accepted":false,"creation_date":1682331758,"answer_id":76090886,"body":"<p>(Assumptions: current spring-boot)</p>\n<h3>Several problems here</h3>\n<ul>\n<li><p><code>useDefaultFilters = false</code> &quot;leads <code>@WebMvcTest</code> ad absurdum&quot;/makes it (sort of) useless.</p>\n</li>\n<li><p>the mocking/injection is problematic</p>\n</li>\n<li><p>to use <a href=\"https://javadoc.io/static/org.mockito/mockito-core/5.3.1/org/mockito/stubbing/OngoingStubbing.html#thenThrow(java.lang.Class)\" rel=\"nofollow noreferrer\"><code>thenThrow()</code></a> with exception class (overloads!), the exception class should have a &quot;default constructor&quot;, which is/seems not applicable with the given (custom) <code>ResourceNotFoundException</code>.</p>\n</li>\n</ul>\n<h4>Minor problem:</h4>\n<p><code>@ExtendWith(SpringExtension.class)</code> doesn't much (gives an &quot;unneccessary SpringExtension&quot; warning from &quot;spring-boot-tools&quot; (vs code))</p>\n<h3>Reproduce</h3>\n<ul>\n<li><p><a href=\"https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.6&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=web,lombok\" rel=\"nofollow noreferrer\">starter used</a></p>\n</li>\n<li><p>a simplified controller:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\nclass MyController {\n   @Autowired\n   private MyService userDetailsService;\n\n   @GetMapping(&quot;/my/{id}&quot;)\n   public ResponseEntity&lt;String&gt; myGet(@PathVariable UUID id) throws ResourceNotFoundException {\n     return new ResponseEntity&lt;&gt;(userDetailsService.doSomething(id), HttpStatus.OK);\n   }\n}\n</code></pre>\n</li>\n<li><p>with simplified service:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class MyService {\n   @SuppressWarnings(&quot;java:S106&quot;)\n   public String doSomething(UUID id) {\n     System.err.println(id.toString() + &quot; done.&quot;);\n     // potentially throws RuntimeExceptions...\n     return id.toString();\n   }\n}\n</code></pre>\n</li>\n<li><p>original (OP) <code>Exception</code> + /-<code>Handler</code> classes</p>\n</li>\n</ul>\n<h3>Working Test</h3>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport static org.mockito.Mockito.verify;\nimport static org.mockito.Mockito.when;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.content;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n\nimport java.util.UUID;\n\nimport org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.test.web.servlet.MockMvc;\n// don't @ExtendWith(SpringExtension.class)\n@WebMvcTest(MyController.class) // useDefaultFilters = false seems &quot;badong&quot; here!\nclass MyWebTest {\n\n    @MockBean // use rather spring-boot extension than &quot;plain ole&quot; mockito!;)\n    private MyService myService;\n\n    @Autowired // as usual\n    private MockMvc mockMvc;\n\n    // no @Before/-All !!! ;)\n\n    @Test\n    void testMyGet_success() throws Exception {\n        // given\n        UUID uid = UUID.randomUUID();\n        when(myService.doSomething(uid)).thenCallRealMethod();\n\n        // when\n        mockMvc.perform(get(&quot;/my/&quot; + uid))\n        \n        // then\n        .andExpectAll(\n          status().isOk(),\n          content().string(uid.toString())\n        );\n\n        verify(myService).doSomething(uid);\n    }\n\n    @Test\n    void testMyGet_notFound() throws Exception {\n        // given\n        UUID uuid = UUID.fromString(&quot;ac0a1859-8e59-4ede-8def-043c32aa3208&quot;);\n        when(myService.doSomething(uuid)).thenThrow(\n          /* better, here: exception instance!*/\n          new ResourceNotFoundException(&quot;mockba&quot;)\n        );\n\n        // when\n        mockMvc.perform(get(&quot;/my/&quot; + uuid))\n                \n        // then\n        .andExpect(status().isNotFound()); // expect more, if you like \n\n        verify(myService).doSomething(uuid);\n    }\n\n}\n</code></pre>\n<p>Main Ref: <a href=\"https://spring.io/guides/gs/testing-web/\" rel=\"nofollow noreferrer\">https://spring.io/guides/gs/testing-web/</a></p>\n"}],"owner":{"user_id":11252174,"display_name":"Demir"},"view_count":66,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1682325144,"question_id":76090017,"body":"<p>I am testing my <code>AppUserController</code> with MockMvc. Here is the case;</p>\n<p>If the user is not found then I expect a <code>ResourceNotFoundException</code> to be thrown.</p>\n<p>This is my test</p>\n<pre><code>   @Test\n    void findAppUserById_throwsNotFound() throws Exception {\n        //given\n        UUID uuid = UUID.fromString(&quot;ac0a1859-8e59-4ede-8def-043c32aa3208&quot;);\n\n        //when\n        when(userDetailsService.findAppUserById(any())).thenThrow(ResourceNotFoundException.class);\n        MvcResult mvcResult = mockMvc\n                .perform(get(&quot;/app-users/&quot; + uuid))\n                .andExpect(status().isNotFound())\n                .andReturn();\n        String resultContent = mvcResult.getResponse().getContentAsString();\n        ResourceNotFoundException response = objectMapper.readValue(resultContent, ResourceNotFoundException.class);\n        //then\n        assertNotNull(response);\n        assertEquals(404,response.getHttpStatusCode());\n\n    }\n</code></pre>\n<p>This is the target to be tested</p>\n<pre><code>  @GetMapping(&quot;/{id}&quot;)\n    public ResponseEntity&lt;AppUserResponse&gt; findAppUserById(@PathVariable UUID id) throws ResourceNotFoundException {\n        AppUser user = userDetailsService.findAppUserById(id);\n        return new ResponseEntity&lt;&gt;(appUserMapper.appUserToResponse(user),HttpStatus.OK);\n    }\n</code></pre>\n<p>This is the service method that throws the exception.</p>\n<pre><code>   public AppUser findAppUserById(UUID id) throws ResourceNotFoundException {\n        AppUser appUser = appUserRepository.findById(id).orElseThrow(\n                () -&gt; new ResourceNotFoundException(&quot;Kullanıcı bulunamadı&quot;)\n        );\n        if (!appUser.isEnabled()) {\n            throw new InvalidRequestException(PASSIVE_USER_MESSAGE);\n        }\n        return appUser;\n    }\n</code></pre>\n<p>Since I use <code>Mockito</code> to mock the service class, I expect the method <code>findAppUserById</code> throws <code>ResourceNotFoundException</code> because of this statement in my test case.</p>\n<p><code>when(userDetailsService.findAppUserById(any())).thenThrow(ResourceNotFoundException.class);</code></p>\n<p>However, when I run the test, it fails and I get the following error</p>\n<pre><code>rg.springframework.web.util.NestedServletException: Request processing failed; nested exception is com.napsam.wo.exception.ResourceNotFoundException\n\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:670)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:779)\n    at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\n    at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)\n    at com.napsam.wo.controller.AppUserControllerTest.findAppUserById_throwsNotFound(AppUserControllerTest.java:96)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:566)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:725)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:149)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:140)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:84)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(ExecutableInvoker.java:115)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.lambda$invoke$0(ExecutableInvoker.java:105)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:104)\n    at org.junit.jupiter.engine.execution.ExecutableInvoker.invoke(ExecutableInvoker.java:98)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:214)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:210)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:135)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1541)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\nCaused by: com.napsam.wo.exception.ResourceNotFoundException\n</code></pre>\n<p>upon @grekier request, the question updated with the following content.</p>\n<p><strong>ResourceNotFoundException</strong></p>\n<pre><code>public class ResourceNotFoundException extends ApplicationException {\n    public ResourceNotFoundException(String message) {\n        super(-1,message,HttpStatus.NOT_FOUND);\n    }\n\n}\n</code></pre>\n<p><strong>ApplicationException</strong> (base exception class)</p>\n<pre><code>@Getter\n@Setter\n@JsonIgnoreProperties({&quot;stackTrace&quot;, &quot;cause&quot;, &quot;suppressed&quot;, &quot;localizedMessage&quot;})\npublic class ApplicationException extends RuntimeException {\n\n    private final int resultCode;\n    private final String message;\n    private final int httpStatusCode;\n    private final ZonedDateTime thrownAt;\n\n    private static final String ZONE_ID = &quot;Europe/Istanbul&quot;;\n\n    public ApplicationException(int resultCode, String message, HttpStatus httpStatus) {\n        super();\n        this.resultCode = resultCode;\n        this.message = message;\n        this.httpStatusCode = httpStatus.value();\n        this.thrownAt = ZonedDateTime.now(ZoneId.of(ZONE_ID));\n    }\n\n }\n</code></pre>\n<p><strong>ExceptionHandler</strong></p>\n<pre><code>@ControllerAdvice\npublic class AppExceptionHandler {\n    @ExceptionHandler(value = {ApplicationException.class})\n    public ResponseEntity&lt;ApplicationException&gt; handleApplicationException(ApplicationException applicationException) {\n        return new ResponseEntity&lt;&gt;(applicationException, HttpStatus.valueOf(applicationException.getHttpStatusCode()));\n    }\n}\n\n</code></pre>\n<p><strong>AppUserControllerTest</strong></p>\n<pre><code>package com.napsam.wo.controller;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.napsam.wo.dtos.AppUserResponse;\nimport com.napsam.wo.dtos.RegisterRequest;\nimport com.napsam.wo.entities.AppUser;\nimport com.napsam.wo.entities.Gender;\nimport com.napsam.wo.exception.ResourceNotFoundException;\nimport com.napsam.wo.mapper.AppUserMapper;\nimport com.napsam.wo.service.AppUserService;\nimport com.napsam.wo.service.UserDetailsServiceImpl;\nimport org.junit.jupiter.api.BeforeEach;\nimport org.junit.jupiter.api.Test;\nimport org.junit.jupiter.api.extension.ExtendWith;\nimport org.mockito.InjectMocks;\nimport org.mockito.Mock;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.http.MediaType;\nimport org.springframework.test.context.junit.jupiter.SpringExtension;\nimport org.springframework.test.web.servlet.MockMvc;\nimport org.springframework.test.web.servlet.MvcResult;\nimport org.springframework.test.web.servlet.setup.MockMvcBuilders;\n\nimport java.util.UUID;\n\nimport static org.junit.jupiter.api.Assertions.assertEquals;\nimport static org.junit.jupiter.api.Assertions.assertNotNull;\nimport static org.mockito.ArgumentMatchers.any;\nimport static org.mockito.Mockito.when;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.get;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.post;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.status;\n\n@ExtendWith(SpringExtension.class)\n@WebMvcTest(useDefaultFilters = false)\nclass AppUserControllerTest {\n\n\n    @Mock\n    private UserDetailsServiceImpl userDetailsService;\n\n    @Mock\n    private AppUserService appUserService;\n\n    @Mock\n    private AppUserMapper appUserMapper;\n\n    ObjectMapper objectMapper = new ObjectMapper();\n\n\n    @Autowired\n    private MockMvc mockMvc;\n\n    @InjectMocks\n    AppUserController underTest;\n\n    @BeforeEach\n    void setUp() {\n        mockMvc = MockMvcBuilders.standaloneSetup(underTest).build();\n    }\n\n    @Test\n    void findAppUserById_success() throws Exception {\n        //given\n        UUID appUserId = UUID.randomUUID();\n\n        AppUser appUser = new AppUser();\n        appUser.setAppUserId(appUserId);\n\n        AppUserResponse appUserResponse = new AppUserResponse();\n        appUserResponse.setAppUserId(appUserId);\n\n        //when\n        when(userDetailsService.findAppUserById(appUserId)).thenReturn(appUser);\n        when(appUserMapper.appUserToResponse(appUser)).thenReturn(appUserResponse);\n        MvcResult mvcResult = mockMvc\n                .perform(get(&quot;/app-users/&quot; + appUserId))\n                .andExpect(status().isOk())\n                .andReturn();\n        String resultContent = mvcResult.getResponse().getContentAsString();\n        AppUserResponse response = objectMapper.readValue(resultContent, AppUserResponse.class);\n\n        //then\n        assertNotNull(response);\n        assertEquals(appUserId, response.getAppUserId());\n\n    }\n\n    @Test\n    void findAppUserById_throwsNotFound() throws Exception {\n\n        //fixme\n        //given\n        UUID uuid = UUID.fromString(&quot;ac0a1859-8e59-4ede-8def-043c32aa3208&quot;);\n\n        //when\n        when(userDetailsService.findAppUserById(any())).thenThrow(ResourceNotFoundException.class);\n        MvcResult mvcResult = mockMvc\n                .perform(get(&quot;/app-users/&quot; + uuid))\n                .andExpect(status().isNotFound())\n                .andReturn();\n        String resultContent = mvcResult.getResponse().getContentAsString();\n        ResourceNotFoundException response = objectMapper.readValue(resultContent, ResourceNotFoundException.class);\n\n        //then\n        assertNotNull(response);\n        assertEquals(404, response.getHttpStatusCode());\n\n    }\n\n    @Test\n    void registerDetails_success() throws Exception {\n\n        //given\n        RegisterRequest request = new RegisterRequest();\n        request.setAvatar(&quot;a&quot;);\n        request.setBiography(&quot;b&quot;);\n        request.setFullName(&quot;f&quot;);\n        request.setGender(Gender.KADIN);\n\n        String json = objectMapper.writeValueAsString(request);\n\n        //when\n        when(appUserService.registerDetails(any(), any())).thenReturn(new AppUserResponse());\n\n        MvcResult mvcResult = mockMvc.perform(post(&quot;/app-users/register-details/&quot; + UUID.randomUUID())\n                        .contentType(MediaType.APPLICATION_JSON)\n                        .content(json))\n                .andExpect(status().isCreated())\n                .andReturn();\n\n        String resultContent = mvcResult.getResponse().getContentAsString();\n        AppUserResponse response = objectMapper.readValue(resultContent, AppUserResponse.class);\n\n        //then\n        assertNotNull(response);\n    }\n}\n</code></pre>\n"},{"tags":["java","java-8"],"answers":[{"owner":{"user_id":9513184,"display_name":"Unmitigated"},"up_vote_count":0,"is_accepted":true,"creation_date":1682150506,"answer_id":76078600,"body":"<p>You could use <code>Stream#map</code> to create the new <code>List</code> of DTOs from the <code>data</code> list, but there's not much that can be done to simplify the creation of the <code>EcomDto</code> objects.</p>\n<pre class=\"lang-java prettyprint-override\"><code>var response = data.stream().map(obj -&gt; {\n    EcomDto dto = new EcomDto();\n    if (obj[0] != null) dto.setZeroIndexData((String) obj[0]);\n    if (obj[1] != null) dto.setFirstIndexData((Long) obj[1]);\n    if (obj[2] != null) dto.setSecondIndexData((UserDefinedEnum) obj[2]);\n    return dto;\n}).toList();\n</code></pre>\n"}],"owner":{"user_id":21705670,"display_name":"tkz"},"view_count":59,"up_vote_count":2,"accepted_answer_id":76078600,"answer_count":1,"score":2,"creation_date":1682149975,"question_id":76078576,"body":"<p>I have List&lt;Object[]&gt; data in which object array length is 7 and data of array are combination of different types. (i.e. string, date, enum and long)</p>\n<p>I have one DTO class (EcomDto.java) in which I want to set data which I read from above object[].\nI am doing it by using if else statement like:</p>\n<pre><code>List&lt;Object[]&gt; data=getActualData();//\nList&lt;EcomDto&gt; response=new ArrayList&lt;&gt;();\nEcomDto dto=null;\nfor(Object[] obj:data){\n dto=new EcomDto();\n if(obj[0]!=null){\n dto.setZeroIndexData((String)obj[0]);\n}\nif(obj[1]!=null){\n dto.setFirstIndexData((Long)obj[1]);\n}\nif(obj[2]!=null){\n dto.setSecondIndexData((UserDefinedEnum)obj[2]);\n}\n}\n</code></pre>\n<p>Can this be improved in some way?</p>\n<p>Tried to do in stream way, but I am not much familiar with Java streams</p>\n"},{"tags":["java","ssl","java-8","graalvm"],"comments":[{"owner":{"user_id":7599062,"display_name":"SyntaxNavigator"},"edited":false,"comment_id":134211396,"body":"<code>openssl ciphers -v &#39;TLSv1.2&#39;</code> This should provide a list of cipher suites supported by OpenSSL on your machine for TLS 1.2. You may compare this list to the one returned by your software to determine if there are any differences."},{"owner":{"user_id":5191913,"display_name":"Savior"},"edited":false,"comment_id":134212030,"body":"@SyntaxNavigator There is no OpenSSL involved here."},{"owner":{"user_id":754250,"display_name":"HoaPhan"},"edited":false,"comment_id":134222190,"body":"I couldn&#39;t reproduce it, but if you put breakpoints in SSLEngineImpl, and SSLContextImpl, stepping through them it may just tell."},{"owner":{"user_id":1246600,"display_name":"Michael"},"edited":false,"comment_id":134232046,"body":"Which OS are you using?"},{"owner":{"user_id":5191913,"display_name":"Savior"},"edited":false,"comment_id":134233851,"body":"@Michael CentOS 8, linux kernel 5.12."},{"owner":{"user_id":1246600,"display_name":"Michael"},"edited":false,"comment_id":134235259,"body":"Sorry, I can&#39;t reproduce it (I get many cipher suites)."},{"owner":{"user_id":2311528,"display_name":"Lonzak"},"edited":false,"comment_id":134299945,"body":"@Savior What architecture does your system have? pc, mac, arm? Do you run it inside somekind of virtualization (like docker, kvm, proxmox ...)?"},{"owner":{"user_id":5191913,"display_name":"Savior"},"edited":false,"comment_id":134351003,"body":"@Lonzak It&#39;s bare metal linux. Weirdly enough, it&#39;s only a couple hosts among this fleet. But I fail to see what system setting could influence the JVM&#39;s selection of algorithms."},{"owner":{"user_id":2311528,"display_name":"Lonzak"},"edited":false,"comment_id":134378134,"body":"@Savior  I updated my answer with two additional points... (What architecture are you running?) And those fleet of other system are those completely identical or different in hard- or software?"}],"answers":[{"owner":{"user_id":5449595,"display_name":"gujou"},"up_vote_count":0,"is_accepted":false,"creation_date":1682504682,"answer_id":76109693,"body":"<p>I've downloaded and tested your code with your GraalVM version on java 8 <em>(<a href=\"https://github.com/graalvm/graalvm-ce-builds/releases/tag/vm-20.3.3\" rel=\"nofollow noreferrer\">https://github.com/graalvm/graalvm-ce-builds/releases/tag/vm-20.3.3</a>)</em></p>\n<pre><code>$ java -version\nopenjdk version &quot;1.8.0_302&quot;\nOpenJDK Runtime Environment (build 1.8.0_302-b07)\nOpenJDK 64-Bit Server VM GraalVM CE 20.3.3 (build 25.302-b07-jvmci-20.3-b20, mixed mode)\n</code></pre>\n<p>I've this output :</p>\n<pre><code>[TLS_AES_128_GCM_SHA256, TLS_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDHE_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384, TLS_RSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_ECDSA_WITH_AES_256_GCM_SHA384, TLS_ECDH_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_RSA_WITH_AES_256_GCM_SHA384, TLS_DHE_DSS_WITH_AES_256_GCM_SHA384, TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256, TLS_RSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_GCM_SHA256, TLS_ECDH_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_RSA_WITH_AES_128_GCM_SHA256, TLS_DHE_DSS_WITH_AES_128_GCM_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA384, TLS_RSA_WITH_AES_256_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA384, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA384, TLS_DHE_RSA_WITH_AES_256_CBC_SHA256, TLS_DHE_DSS_WITH_AES_256_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_256_CBC_SHA, TLS_RSA_WITH_AES_256_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_256_CBC_SHA, TLS_ECDH_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_RSA_WITH_AES_256_CBC_SHA, TLS_DHE_DSS_WITH_AES_256_CBC_SHA, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA256, TLS_RSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA256, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_RSA_WITH_AES_128_CBC_SHA256, TLS_DHE_DSS_WITH_AES_128_CBC_SHA256, TLS_ECDHE_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDHE_RSA_WITH_AES_128_CBC_SHA, TLS_RSA_WITH_AES_128_CBC_SHA, TLS_ECDH_ECDSA_WITH_AES_128_CBC_SHA, TLS_ECDH_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_RSA_WITH_AES_128_CBC_SHA, TLS_DHE_DSS_WITH_AES_128_CBC_SHA, TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\n</code></pre>\n<p>I have check my $JAVA_HOME/jre/lib/security/java.security :</p>\n<pre><code>  jdk.tls.disabledAlgorithms=SSLv3, TLSv1, TLSv1.1, RC4, DES, MD5withRSA, \\\n        DH keySize &lt; 1024, EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL, \\\n        include jdk.disabled.namedCurves\n    &lt;...&gt;\n    jdk.tls.legacyAlgorithms= \\\n            K_NULL, C_NULL, M_NULL, \\\n            DH_anon, ECDH_anon, \\\n            RC4_128, RC4_40, DES_CBC, DES40_CBC, \\\n            3DES_EDE_CBC\n</code></pre>\n<p>So, I only see 2 possibilities if you have a fresh install :</p>\n<ol>\n<li><p>you don't use <em>--enable-https</em> when you compile Java code to a standalone executable like this :</p>\n<pre><code> $ native-image --enable-https Example\n</code></pre>\n</li>\n<li><p>you have a problem on your system environment and this is not a GraalVM problem...</p>\n</li>\n</ol>\n<p>I hope it can help you,\nGLHF !</p>\n"},{"owner":{"user_id":2311528,"display_name":"Lonzak"},"up_vote_count":0,"is_accepted":false,"creation_date":1682628406,"answer_id":76124531,"body":"<p>Some important information is missing in your post:</p>\n<p>In a comment you write that your operating system is linux but on what <strong><a href=\"https://en.wikipedia.org/wiki/List_of_Linux-supported_computer_architectures\" rel=\"nofollow noreferrer\">architecture</a></strong> does it run? X86, MAC, ARM, ...? Do you run it inside some kind of <strong>virtualization</strong> layer (like docker, kvm, proxmox ...) or bare metal?</p>\n<p>Several things come to mind:</p>\n<ol>\n<li><p>You are using CentOS 8 with linux kernel 5.12. Cent OS 8 has been eol'ed since 2021-12-31 - <a href=\"https://vulners.com/thn/THN:A022718A54C5EE0C2378E2A496201F6C\" rel=\"nofollow noreferrer\">do not use it</a> anymore. There are known Java related <a href=\"https://bugs.centos.org/view.php?id=9482\" rel=\"nofollow noreferrer\">bugs</a> in centOS.</p>\n</li>\n<li><p>You can try to enable a different provider like SunEC in java.security config file by adding the line <code>security.provider.9=sun.security.ec.SunEC</code> (You can find an overview of available providers <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/SunProviders.html\" rel=\"nofollow noreferrer\">here</a>)</p>\n</li>\n<li><p>Did you try to use an up-to-date graalVM? The current java8 of graalVM is <a href=\"https://docs.oracle.com/en/graalvm/enterprise/20/docs/overview/release-notes/\" rel=\"nofollow noreferrer\">20.3.10 - 8u371</a> (enterprise). There have been bugfixes in this area (e.g. in 20.3.4) and also additions: <a href=\"https://twitter.com/seanjmullan/status/1549461422286856193\" rel=\"nofollow noreferrer\">Sean Mullan announced</a> that TLSv1.3 was enabled in 8u341 (which you are not using with 8u302)</p>\n</li>\n<li><p>Are you using java 8 for a specific reason? If not then use Java11 or higher. If yes then still try a Java11 based graal Version and see whether the behaviour is the same. (If you see more cipher suites this might be a java related issue if not then OS related)</p>\n</li>\n<li><p>Try to enable more cipher suites by using the <code>setEnabledCipherSuites</code> method, passing in an array of cipher suite names. For example:</p>\n<pre><code>engine.setEnabledCipherSuites(new String[] {&quot;TLS_ECDHE_RSA_WITH_AES_128_GCM_SHA256&quot;, &quot;TLS_ECDHE_RSA_WITH_AES_256_GCM_SHA384&quot;});\n</code></pre>\n</li>\n<li><p>You can always use a different SSL/TLS implementation, like Bouncy Castle, OpenSSL or the JSSE implementation that comes with a newer version of the JDK.</p>\n</li>\n<li><p>Try to add the following extension path to your java call: <code>-Djava.ext.dirs=./:/usr/lib/jvm/java-1.8.0-openjdk-1.8.0.302.b07_64/jre/lib/ext</code> (adapt the path accordingly) It should point to the folder where the <code>sunjce_provider.jar</code> etc is located</p>\n</li>\n<li><p>Did you enable debug output? <code>-Djavax.net.debug=ssl</code> What does it say?</p>\n</li>\n</ol>\n"}],"owner":{"user_id":5191913,"display_name":"Savior"},"view_count":166,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1682112761,"question_id":76076830,"body":"<p>I've got this small little program</p>\n<pre><code>import java.util.Arrays;\nimport javax.net.ssl.SSLContext;\nimport javax.net.ssl.SSLEngine;\n\npublic class Example {\n    public static void main(String[] args) throws Exception {\n        SSLContext context = SSLContext.getInstance(&quot;TLS&quot;);\n        context.init(null, null, null);\n        SSLEngine engine = context.createSSLEngine();\n        System.out.println(Arrays.toString(engine.getSupportedCipherSuites()));\n    }\n}\n</code></pre>\n<p>And running on</p>\n<pre><code>openjdk version &quot;1.8.0_302&quot;\nOpenJDK Runtime Environment (build 1.8.0_302-b07)\nOpenJDK 64-Bit Server VM GraalVM LIBGRAAL 20.3.3 (build 25.302-b07-jvmci-20.3-b20, mixed mode)\n</code></pre>\n<p>will only report back</p>\n<pre><code>[TLS_EMPTY_RENEGOTIATION_INFO_SCSV]\n</code></pre>\n<p>The provider is</p>\n<pre><code>SunJSSE version 1.8\n</code></pre>\n<p>The config in <code>jre/lib/security/java.security</code> does not seem to disable all the standard cipher suites</p>\n<pre><code>jdk.tls.disabledAlgorithms=SSLv3, TLSv1, TLSv1.1, RC4, DES, MD5withRSA, \\\n    DH keySize &lt; 1024, EC keySize &lt; 224, 3DES_EDE_CBC, anon, NULL, \\\n    include jdk.disabled.namedCurves\n[...]\njdk.tls.legacyAlgorithms= \\\n        K_NULL, C_NULL, M_NULL, \\\n        DH_anon, ECDH_anon, \\\n        RC4_128, RC4_40, DES_CBC, DES40_CBC, \\\n        3DES_EDE_CBC\n</code></pre>\n<p>So where are all the TLS 1.2 and TLS 1.3 cipher suites? What else can be influencing the selection?</p>\n"},{"tags":["java","audio","raspberry-pi","libgdx","audio-player"],"comments":[{"owner":{"user_id":6068297,"display_name":"Level_Up"},"edited":false,"comment_id":134158976,"body":"Maybe this can help you: <a href=\"https://myrobotlab.org/content/fixing-audio-output-java-11-raspberry-pi\" rel=\"nofollow noreferrer\">myrobotlab.org/content/fixing-audio-output-java-11-raspberry&zwnj;&#8203;-pi</a>"},{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"edited":false,"comment_id":134159263,"body":"@Level_Up  Good idea, my customer has also openjdk-11! I try today to test using JDK 14 and JDK 17 and if this will not help I will edit sound.properties file. Thanks!"},{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"edited":false,"comment_id":134296932,"body":"@Level_Up My customer tested the Java 17 (Liberika JDK 17). The situation is the same: the sound is only on 3,5 mm jack. Maybe the manual correction of the properties file can help"}],"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"view_count":39,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1682057534,"question_id":76070350,"body":"<p>How to select an audio output from Java on Raspberry Pi</p>\n<p>I create a videogame using Java and LibGDX. The game must run on a Raspberry Pi 3B with Raspberry Pi OS 32 bit. The game must also translate soundtracks throught the HDMI output direct into a monitor with embedded  speakers.</p>\n<p>When my customer tries to play a sound in my videogame the audio streams through the 3,5 mm jack audio output even if that is connected with nothing. I use this interface from <a href=\"https://github.com/libgdx/libgdx/blob/master/gdx/src/com/badlogic/gdx/audio/Sound.java\" rel=\"nofollow noreferrer\">LibGDX</a>.\nBut when my customer plays the same sound using the default media player in Raspberry Pi OS it plays normally through the HDMI output. The audio from YouTube videos plays also via the HDMI.\nI have tried also another classed to play sounds (AudioInputStream, Clip and AudioSystem from the package javax.sound.sampled.*). But the sounds also play through the 3,5 mm jack.</p>\n<p>Maybe I need to select an another output device direct from the code? Are there abilities to do that?</p>\n<p>Maybe I need to build my project and generate the executable jar-file not on my windows PC but on a Raspberry Pi where the sound output device already set on HDMI as default?</p>\n"},{"tags":["java","maven","spring-security","gwt","gwt-rpc"],"comments":[{"owner":{"user_id":1920835,"display_name":"Robert Newton"},"edited":false,"comment_id":134221166,"body":"If this spring library is being used in the client, the maven artifact for the spring library must include the source files (.java) so that GWT can compile the source.  Or if the source is in a separate artifact then that must be added as a dependency too."},{"owner":{"user_id":8528405,"display_name":"Oscar Londo&#241;o"},"edited":false,"comment_id":134235066,"body":"Thanks, @RobertNewton, I really appreciate your response.  I added the &quot;sources&quot; as a dependency in the pom.xml of both client and model modules, but the error message still appears. Is there anything else I should add/modify?  ` &lt;dependency&gt; \t&lt;groupId&gt;org.springframework.security&lt;/groupId&gt; \t&lt;artifactId&gt;spring-security-core&lt;/artifactId&gt; \t&lt;version&gt;${spring-security-version}&lt;/version&gt; \t&lt;classifier&gt;sources&lt;/classifier&gt; &lt;/dependency&gt; `"}],"answers":[{"owner":{"user_id":1920835,"display_name":"Robert Newton"},"up_vote_count":0,"is_accepted":false,"creation_date":1682559580,"answer_id":76116169,"body":"<p>In your GWT (*.gwt.xml) module file, you need an <code>&lt;inherits&gt;</code> tag for this spring dependency also.</p>\n<p>This spring library probably does not come with its own GWT module file though, so you will need to create your own.  In your client project you could create a package such as <code>org.springframework.security</code>, create a GWT module file for the spring library and put it in the package.  Then you can inherit it in your main GWT module file</p>\n<p>Refer to this question/answer:\n<a href=\"https://stackoverflow.com/a/70538165/1920835\">https://stackoverflow.com/a/70538165/1920835</a></p>\n"}],"owner":{"user_id":8528405,"display_name":"Oscar Londo&#241;o"},"view_count":92,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1682027242,"question_id":76068488,"body":"<ul>\n<li>I have a legacy multi-module GWT project.</li>\n<li>One of the modules contains the DTO and Enum classes.</li>\n<li>One of the DTO classes extends the <code>org.springframework.security.core.GrantedAuthority</code> class, so in the pom.xml it has the maven <em>spring-security-core</em> dependency of <em>org.springframework.security</em>.</li>\n<li>When I tried to run the <code>package</code> command, i got the message:</li>\n</ul>\n<blockquote>\n<p><em><strong>No source code is available for type</strong></em>\n<em><strong>org.springframework.security.core.GrantedAuthority; did you forget to</strong></em>\n<em><strong>inherit a required module?</strong></em></p>\n</blockquote>\n<ul>\n<li>I tried to apply solutions that were recommended in some posts that I found with similar messages, I even found <a href=\"https://groups.google.com/g/google-web-toolkit/c/-pTzWanmFv0\" rel=\"nofollow noreferrer\">one that related the same error</a>, but none of those solutions worked for me.</li>\n</ul>\n<p><strong>Could you please help me figure out what is causing this error and how I could fix it?</strong></p>\n<hr />\n<p>To reproduce the issue you can follow the steps I did:</p>\n<ol>\n<li><p>I used <a href=\"https://github.com/tbroyer/gwt-maven-archetypes/\" rel=\"nofollow noreferrer\">GWT Archetypes</a> to create a basic project called <code>GWTRPCModular</code>; and:</p>\n<ul>\n<li>JDK 17 (but also I tried it with 8)</li>\n<li>Eclipse 2023-03</li>\n<li>Apache Maven 3.8.6</li>\n<li>GWT 2.10.0</li>\n</ul>\n</li>\n<li><p>The project was generated with 3 modules: <code>GWTRPCModular-client</code>, <code>GWTRPCModular-server</code> and <code>GWTRPCModular-shared</code>.</p>\n</li>\n<li><p>I added a module called <code>GWTRPCModular-model</code> for the DTOs <em>(similar to my legacy project)</em> and in the pom.xml I added the necessary dependencies.</p>\n</li>\n<li><p>I included the <code>&lt;source path=&quot;model&quot; /&gt;</code> to the *.gwt.xml file.</p>\n</li>\n<li><p>I created the <code>UserSessionDTO</code> class</p>\n</li>\n</ol>\n<pre><code>import java.util.Collection;\n\nimport org.springframework.security.core.GrantedAuthority;\nimport org.springframework.security.core.userdetails.User;\n\npublic class UserSessionDTO extends User {\n\n    private static final long serialVersionUID = -6391317902265663080L;\n\n    public UserSessionDTO(String username, String password, Collection&lt;? extends GrantedAuthority&gt; authorities) {\n        super(username, password, authorities);\n        // TODO Auto-generated constructor stub\n    }\n}\n</code></pre>\n<ol start=\"6\">\n<li>I ran the <code>mvn clean install</code></li>\n<li>Finally I ran the <code>mvn package</code> and the message appeared:</li>\n</ol>\n<pre><code>...\n[INFO] --- gwt-maven-plugin:1.0.1:compile (default-compile) GWTRPCModular-client ---\n[INFO] Compiling module com.foo.gwtmodular.App\n[INFO]    Tracing compile failure path for type 'com.foo.gwtmodular.model.dto.UserSessionDTO'\n[INFO]       [ERROR] Errors in 'com/foo/gwtmodular/model/dto/UserSessionDTO.java'\n[INFO]          [ERROR] Line 8: No source code is available for type org.springframework.security.core.userdetails.User; did you forget to inherit a required module?\n[INFO]          [ERROR] Line 12: No source code is available for type org.springframework.security.core.GrantedAuthority; did you forget to inherit a required module?\n...  \n</code></pre>\n<p>If you need anything else to review this case, please let me know.</p>\n<p><strong>I thank you in advance for any help you can provide!</strong></p>\n"},{"tags":["java","mysql","spring"],"comments":[{"owner":{"user_id":1098361,"display_name":"Zack Macomber"},"edited":false,"comment_id":134147861,"body":"Could you use a <code>RepositoryRestResource</code> like described in <a href=\"https://spring.io/guides/gs/accessing-data-rest/\" rel=\"nofollow noreferrer\">spring.io/guides/gs/accessing-data-rest</a>?"},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":134148103,"body":"No transasction, nothing int he database."},{"owner":{"user_id":14294053,"display_name":"Mar-Z"},"edited":false,"comment_id":134148228,"body":"Hello, as stated before - new added data won&#39;t be seen in the SQL client until the transaction is committed. In your repository code you are using a simple CrudRepository which doesn&#39;t create any transaction at all. I suggest to use JPARepository instead. It will use transactions and commit the changes internally."},{"owner":{"user_id":1398030,"display_name":"Madhawa Gunasekara"},"edited":false,"comment_id":134148385,"body":"Is it a Springboot application or normal spring application since you are using @controller annotation instead of Rest Controller annotation. Also could you please put your request call for saving data and what is the response of your request as well which helps to see whether your request is missing something."}],"answers":[{"owner":{"user_id":17932828,"display_name":"Der Dude"},"up_vote_count":1,"is_accepted":false,"creation_date":1681993716,"answer_id":76064050,"body":"<p>You should just tell it what data type to return.</p>\n<p>Change this:</p>\n<pre><code>@GetMapping(path=&quot;/all&quot;)\npublic @ResponseBody Iterable&lt;User&gt; getAllUsers() {\n    // This returns a JSON or XML with the users\n    return userRepository.findAll();\n}\n</code></pre>\n<p>To this:</p>\n<pre><code>@GetMapping(path=&quot;/all&quot;)\npublic List&lt;User&gt; getAllUsers() {\n    // This returns a JSON or XML with the users\n    return userRepository.findAll();\n}\n</code></pre>\n"}],"owner":{"user_id":21689930,"display_name":"EDUARD KLNK"},"view_count":42,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681992891,"question_id":76063931,"body":"<p>I link database and spring, application works fine. But when sending data to the database, only the structure without the data appears.</p>\n<p>User.class</p>\n<pre><code>import jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\n\n\n@Entity // This tells Hibernate to make a table out of this class\npublic class User {\n    @Id\n    @GeneratedValue(strategy= GenerationType.AUTO)\n    private Integer id;\n\n    private String name;\n\n    private String email;\n\n    public Integer getId() {\n        return id;\n    }\n\n    public void setId(Integer id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n    public String getEmail() {\n        return email;\n    }\n\n    public void setEmail(String email) {\n        this.email = email;\n    }\n}\n\n</code></pre>\n<p>MainController.class</p>\n<pre><code>import jakarta.transaction.Transactional;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.stereotype.Controller;\nimport org.springframework.web.bind.annotation.*;\n\n@Controller    // This means that this class is a Controller\npublic class MainController {\n    @Autowired // This means to get the bean called userRepository\n    // Which is auto-generated by Spring, we will use it to handle the data\n    private UserRepository userRepository;\n\n    @PostMapping(path=&quot;/add&quot;) // Map ONLY POST Requests\n    public @ResponseBody String addNewUser (@RequestParam String name\n            , @RequestParam String email) {\n        // @ResponseBody means the returned String is the response, not a view name\n        // @RequestParam means it is a parameter from the GET or POST request\n\n        User n = new User();\n        n.setName(name);\n        n.setEmail(email);\n        userRepository.save(n);\n        return &quot;Saved&quot;;\n    }\n\n    @GetMapping(path=&quot;/all&quot;)\n    public @ResponseBody Iterable&lt;User&gt; getAllUsers() {\n        // This returns a JSON or XML with the users\n        return userRepository.findAll();\n    }\n}\n</code></pre>\n<p>UserRepository.interface</p>\n<pre><code>import org.springframework.data.repository.CrudRepository;\n\npublic interface UserRepository extends CrudRepository&lt;User, Integer&gt; {\n\n}\n</code></pre>\n<p>Application.class</p>\n<pre><code>@SpringBootApplication\npublic class Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(Application.class, args);\n    }\n\n}\n</code></pre>\n<p>I would be grateful if you explain what is the reason or point out the problem in the code.</p>\n<p>as a result, when sending data, I get an empty database</p>\n<p><a href=\"https://i.stack.imgur.com/Zj9gi.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","java-stream"],"answers":[{"owner":{"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"up_vote_count":0,"is_accepted":false,"creation_date":1681925407,"answer_id":76057313,"body":"<p>Could be something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        return authors.stream()\n                .filter(author -&gt; author.getBooks().stream()\n                         .anyMatch(book -&gt; book.getName().contains(bookName))) //1\n                .map(Author::getName)                                          //2\n                .collect(Collectors.toList());                                 //3\n</code></pre>\n<ol>\n<li>filter all authors that have at least one book whose name contains the parameter, I used contains because of the example in the test, but replace it by <code>equals</code> if you require full and casing match</li>\n<li>Get the name of the author</li>\n<li>Collect them as a list.</li>\n</ol>\n"}],"owner":{"user_id":6920378,"display_name":"PramTal"},"view_count":36,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681923069,"question_id":76057032,"body":"<p>I need to fetch a list of Authors for a given book using streams in Java.<br>\nI could fetch the books only<br>\nAs Books is not linked to Authors, so I'm not able to fetch authors.\n<br>I'm looking for a solution using Java Streams only.\nThank you.<br>\nI used below to fetch list of books but it's not what I want to achieve.<br></p>\n<pre class=\"lang-java prettyprint-override\"><code>authors.stream()\n            .forEach(\n                author -&gt; {\n                  author.getBooks().stream()\n                      .filter(book -&gt; book.getName().contains(bookName))\n                      .forEach(book -&gt; authorNames.add(book.getName()));\n                });\n\n</code></pre>\n<pre><code>public class Author {\n          String name;\n          List&lt;Book&gt; books;\n                                  \n          public String getName() {\n            return name;\n          }\n          public List&lt;Book&gt; getBooks() {\n            return books;\n          }  \n        }\n\n    public class Book {\n      String name;\n                     \n      public String getName() {\n        return name;\n      }\n    \n    public class Library {\n    \n      List&lt;Author&gt; authors;\n                     \n      public List&lt;Author&gt; getAuthors() {\n        return authors;\n      }\n    \n      public List&lt;String&gt; search(String bookName) {\n        List&lt;String&gt; authorNames = new ArrayList&lt;&gt;();\n        // write your code here\n    \n        /*authors.stream()\n        .forEach(\n            author -&gt; {\n              author.getBooks().stream()\n                  .filter(book -&gt; book.getName().contains(bookName))\n                  .forEach(book -&gt; authorNames.add(book.getName()));\n            });*/\n    \n        return authorNames;\n      }\n\npublic class Test {\n\n  public static void main(String[] args) {\n    Author auth1 =\n        new Author(\n            &quot;James D.&quot;,\n            List.of(\n                new Book(&quot;Forest Run&quot;),\n                new Book(&quot;On The Moon&quot;),\n                new Book(&quot;Rising Sun&quot;),\n                new Book(&quot;Afternoon Sun&quot;)));\n    Author auth2 =\n        new Author(\n            &quot;Martha S.&quot;,\n            List.of(\n                new Book(&quot;Run Away&quot;),\n                new Book(&quot;Are We Moving&quot;),\n                new Book(&quot;Sun Is Shining&quot;),\n                new Book(&quot;New Moon&quot;)));\n    Author auth3 =\n        new Author(\n            &quot;Phillip R.&quot;,\n            List.of(\n                new Book(&quot;On The Rock&quot;),\n                new Book(&quot;Darkness Of Moon&quot;),\n                new Book(&quot;A Walk In The Park&quot;),\n                new Book(&quot;Rising Tide&quot;)));\n\n    Library lib = new Library(List.of(auth1, auth2, auth3));\n    System.out.println(lib.search(&quot;Run&quot;));\n  }\n} \n}\n</code></pre>\n"},{"tags":["java","kubernetes"],"answers":[{"owner":{"user_id":3498962,"display_name":"Essex Boy"},"up_vote_count":0,"is_accepted":false,"creation_date":1681891242,"answer_id":76052039,"body":"<p>This should work</p>\n<pre><code>V1DeleteOptions v1DeleteOptions = new V1DeleteOptions();\nv1DeleteOptions.setGracePeriodSeconds(0L);\nV1Pod deleteNamespacedPod = coreV1Api.deleteNamespacedPod(\n        podName,\n        namespace,\n        null,\n        &quot;false&quot;,\n        0,\n        true,\n        null,\n        v1DeleteOptions);\n</code></pre>\n"}],"owner":{"user_id":15597209,"display_name":"zmetry"},"view_count":45,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681870776,"question_id":76050297,"body":"<p>I want to force delete a <code>pod</code> immediately by using <code>io.kubernetes:ClientJavaApi</code>.</p>\n<p>I tried to use the following command to delete, but there is still a delay</p>\n<pre><code>options = new V1DeleteOptions();\noptions.setGracePeriodSeconds(0L);\noptions.setPropagationPolicy(&quot;Foreground&quot;);\noptions.setOrphanDependents(false);\n\nV1Pod result = coreV1Api.deleteNamespacedPod(name, namespace, &quot;true&quot;, null,\n                    gracePeriodSeconds, null, null, options);\n</code></pre>\n"},{"tags":["java","json","gson"],"comments":[{"owner":{"user_id":1440565,"display_name":"Code-Apprentice"},"edited":false,"comment_id":134122583,"body":"To clarify, are the top-level keys (<code>&quot;176294012937458694583&quot;</code>, <code>&quot;3428378574582548573293&quot;</code>, and <code>&quot;4657556334646766874556&quot;</code>) unkown, but the keys in the nested objects (<code>&quot;id&quot;</code>, <code>&quot;description&quot;</code>, <code>&quot;name&quot;</code>, and <code>&quot;account_id&quot;</code>) all the same?"},{"owner":{"user_id":12706564,"display_name":"Emanuel Trandafir"},"edited":false,"comment_id":134123667,"body":"you can convert to a <code>Map&lt;String, MyJavaClass&gt;</code> where the key is this dynamic id: <code>Gson gson = new Gson(); Type type = new TypeToken&lt;Map&lt;String, MyJavaClass&gt;&gt;(){}.getType(); Map&lt;String, MyJavaClass&gt; map = gson.fromJson(json, type);</code>  after this, you can use <code>map.values()</code> and discard the keys"}],"answers":[{"owner":{"user_id":4990575,"display_name":"Kurojin"},"up_vote_count":0,"is_accepted":false,"creation_date":1681851889,"answer_id":76049016,"body":"<p>you can deserialise your string input as a map of string keys to MyJavaClass values objects using jackson's ObjectMapper :</p>\n<pre><code>var value = new ObjectMapper().readValue(inputString, new TypeReference&lt;Map&lt;String,MyJavaClass&gt;&gt;(){}););\n</code></pre>\n<p>You can then access your objects as follow :</p>\n<pre><code>value.get(&quot;176294012937458694583&quot;).getDescription();\n</code></pre>\n<p>rmk : for jackson to work properly you have to have a default constructor and explicit getters in MyJavaClass</p>\n"},{"owner":{"user_id":10437913,"display_name":"KoolKeith"},"up_vote_count":0,"is_accepted":false,"creation_date":1681854777,"answer_id":76049310,"body":"<p>As suggested by OldProgrammer, <a href=\"https://stackoverflow.com/questions/20442265/how-to-decode-json-with-unknown-field-using-gson\">this</a> answered my question. The custom serializer with jsonObject.entrySet to access my inner objects was what I needed to properly map to MyJavaClass.</p>\n"}],"owner":{"user_id":10437913,"display_name":"KoolKeith"},"view_count":55,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1681848960,"question_id":76048718,"body":"<p>I have a json object of objects and I'm trying to map the inner objects to a Java class.</p>\n<pre><code>{\n&quot;176294012937458694583&quot;: {\n        &quot;id&quot;: &quot;176294012937458694583&quot;,\n        &quot;description&quot;: &quot;Beta&quot;,\n        &quot;name&quot;: &quot;BetaName&quot;,\n        &quot;account_id&quot;: &quot;096382648647&quot;\n}\n&quot;3428378574582548573293&quot;: {\n        &quot;id&quot;: &quot;3428378574582548573293&quot;,\n        &quot;description&quot;: &quot;Omega&quot;,\n        &quot;name&quot;: &quot;OmegaName&quot;,\n        &quot;account_id&quot;: &quot;32735847382&quot;\n}\n&quot;4657556334646766874556&quot;: {\n    &quot;id&quot;: &quot;4657556334646766874556&quot;,\n    &quot;description&quot;: &quot;Delta&quot;,\n    &quot;name&quot;: &quot;DeltaName&quot;,\n    &quot;account_id&quot;: &quot;93758598257&quot;\n}\n}\n\nMyJavaClass \nString id;\nString description;\nString name;\nString accountId;\n</code></pre>\n<p>I was hoping to access the inner objects like this &amp; map to MyJavaClass using Gson:</p>\n<pre><code>JsonObject jsonObject = response.body().getAsJsonObject(&quot;176294012937458694583&quot;);\nMyJavaClass myJavaClass = gson.fromJson(response.body().toString(), new TypeToken&lt;MyJavaClass&gt;(){}.getType());\n</code></pre>\n<p>But the inner objects' memberNames and number of inner objects are unknown until the json data returns. So what would be a better way to access and map these objects to MyJavaClass?</p>\n"},{"tags":["java","javafx"],"answers":[{"owner":{"user_id":10489834,"display_name":"Stefan Pfeifer"},"up_vote_count":0,"is_accepted":false,"creation_date":1682356293,"answer_id":76094412,"body":"<p>My best solution so far is to extend the <code>TreeItem</code> class and keep a separate, sorted list of children that is then mirrored to the actual list of children.\nIt is based on this Stackoverflow answer for filterable tree items: <a href=\"https://stackoverflow.com/a/34426897\">https://stackoverflow.com/a/34426897</a>.</p>\n<pre><code>public class SortedTreeItem&lt;T&gt; extends TreeItem&lt;T&gt; {\n    private final ObservableList&lt;TreeItem&lt;T&gt;&gt; sourceChildren;\n    private final SortedList&lt;TreeItem&lt;T&gt;&gt; sortedChildren;\n\n    public SortedTreeItem(T value, Callback&lt;T, Observable[]&gt; extractor) {\n        super(value, null);\n\n        // Initialize source list with given extractor\n        sourceChildren = FXCollections.observableArrayList(item -&gt; extractor.call(item.getValue()));\n\n        // Create sorted list of children backed by the source list\n        sortedChildren = new SortedList&lt;&gt;(sourceChildren);\n\n        // Keep actual children list in sync with the sorted children\n        // We can't just override getChildren() because of https://bugs.openjdk.org/browse/JDK-8089158\n        Bindings.bindContent(getChildren(), sortedChildren);\n    }\n\n    // Comparator by which the child items are sorted\n    public ObjectProperty&lt;Comparator&lt;? super TreeItem&lt;T&gt;&gt;&gt; comparatorProperty() {\n        return sortedChildren.comparatorProperty();\n    }\n\n    // For accessing and modifying the source list\n    public ObservableList&lt;TreeItem&lt;T&gt;&gt; getSourceChildren() {\n        return sourceChildren;\n    }\n}\n</code></pre>\n<p>One drawback is that the items must only be modified by using <code>getSourceChildren()</code>.\nTo enable sorting, the item's comparators are bound to that of the TreeTableView like this</p>\n<pre><code>SortedTreeItem&lt;Entry&gt; item = new SortedTreeItem&lt;&gt;(entry, Entry::extractor);\nitem.comparatorProperty().bind(treeTableView.comparatorProperty());\n</code></pre>\n<p>Also, the default sorting (which would interfere with this solution) is disabled by giving the table an empty sort policy</p>\n<pre><code>treeTableView.setSortPolicy(table -&gt; true);\n</code></pre>\n"}],"owner":{"user_id":10489834,"display_name":"Stefan Pfeifer"},"view_count":87,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681834839,"question_id":76046918,"body":"<p>I have a JavaFX application with a <code>TreeTableView</code> that shows a tree of items that can change in two ways:</p>\n<ol>\n<li>Items may be added or removed in the background</li>\n<li>The data of the items (shown in the table columns) may change</li>\n</ol>\n<p>The TreeTableView, like the TableView, can be sorted either by users clickinig on the column headers or by setting the sort order in the code. This sorting however does not seem to persist when new items are added or when the data changes.</p>\n<p>Here is a simple example (tested with OpenJFX 20) that shows my problem. A table is created and also a button for adding random tree elements. Even though the table is supposed to be sorted by the first column, new items always show up on the last row instead of being inserted at their correct location. Only manually re-sorting restores the correct order.</p>\n<pre><code>import javafx.application.Application;\nimport javafx.beans.property.ReadOnlyStringProperty;\nimport javafx.beans.property.ReadOnlyStringWrapper;\nimport javafx.scene.Scene;\nimport javafx.scene.control.*;\nimport javafx.scene.layout.VBox;\nimport javafx.stage.Stage;\n\nimport java.util.Random;\n\npublic class TestApplication extends Application {\n    public static void main(String[] args) {\n        launch(args);\n    }\n\n    @Override\n    public void start(Stage primaryStage) {\n        TreeTableColumn&lt;Entry, String&gt; columnFirst = new TreeTableColumn&lt;&gt;(&quot;First&quot;);\n        columnFirst.setCellValueFactory(p -&gt; p.getValue().getValue().firstProperty());\n\n        TreeTableColumn&lt;Entry, String&gt; columnSecond = new TreeTableColumn&lt;&gt;(&quot;Second&quot;);\n        columnSecond.setCellValueFactory(p -&gt; p.getValue().getValue().secondProperty());\n\n        TreeTableView&lt;Entry&gt; treeTableView = new TreeTableView&lt;&gt;();\n        treeTableView.getColumns().add(columnFirst);\n        treeTableView.getColumns().add(columnSecond);\n\n        Button button = new Button(&quot;Add Entry&quot;);\n        button.setOnAction(event -&gt; {\n            Random random = new Random();\n            String first = String.valueOf((char)(random.nextInt('Z' - 'A') + 'A'));\n            String second = String.valueOf((char)(random.nextInt('Z' - 'A') + 'A'));\n            Entry entry = new Entry(first, second);\n\n            if(treeTableView.getRoot() == null) {\n                treeTableView.setRoot(new TreeItem&lt;&gt;(entry));\n                treeTableView.getRoot().setExpanded(true);\n                treeTableView.getSortOrder().add(columnFirst);\n            }\n            else {\n                treeTableView.getRoot().getChildren().add(new TreeItem&lt;&gt;(entry));\n            }\n        });\n\n        VBox vbox = new VBox();\n        vbox.getChildren().add(treeTableView);\n        vbox.getChildren().add(button);\n\n        Scene scene = new Scene(vbox);\n        primaryStage.setScene(scene);\n        primaryStage.setTitle(&quot;TreeTableView Sorting&quot;);\n        primaryStage.show();\n    }\n\n    public static class Entry {\n        private final String first;\n        private final String second;\n\n        public Entry(String first, String second) {\n            this.first = first;\n            this.second = second;\n        }\n\n        public ReadOnlyStringProperty firstProperty() {\n            return new ReadOnlyStringWrapper(first);\n        }\n\n        public ReadOnlyStringProperty secondProperty() {\n            return new ReadOnlyStringWrapper(second);\n        }\n    }\n}\n</code></pre>\n<p>For JavaFX's TableView I could achieve a persistent sorting by using a <code>SortedList&lt;T&gt;</code> and binding its comparator to that of the TableView (as suggested in the <a href=\"https://openjfx.io/javadoc/20/javafx.controls/javafx/scene/control/TableView.html\" rel=\"nofollow noreferrer\">documentation</a>).\nTogether with setting an <a href=\"https://openjfx.io/javadoc/18/javafx.base/javafx/collections/FXCollections.html#observableArrayList(javafx.util.Callback)\" rel=\"nofollow noreferrer\">extractor</a> to observe changes to the list items themselves this basically solves the problem for the TableView. It just stays sorted in the user-specified way no matter how the data changes.</p>\n<p>But I failed to find anything similar for the TreeTableView. The items have an internal observable list that can be accessed with <code>getChildren()</code> but there don't seem to be any customization points here.</p>\n<p>Is there an obvious solution to this that I overlooked? Ideally I would like to avoid calling <code>sort()</code> after each change to the backing data.</p>\n"},{"tags":["java","docker"],"comments":[{"owner":{"user_id":40342,"display_name":"Joachim Sauer"},"edited":false,"comment_id":134111899,"body":"<a href=\"//meta.stackoverflow.com/q/285551\">Please do not upload images of code/data/errors.</a>. Instead <a href=\"https://stackoverflow.com/posts/76042343/edit\">edit</a> your question to include the output as properly formatted text."}],"owner":{"user_id":8139913,"display_name":"qijun"},"view_count":93,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1681806114,"question_id":76042343,"body":"<p><strong>Dockerfile</strong></p>\n<pre><code>FROM frolvlad/alpine-glibc\nRUN echo http://mirrors.aliyun.com/alpine/v3.10/main/ &gt; /etc/apk/repositories &amp;&amp; echo http://mirrors.aliyun.com/alpine/v3.10/community/ &gt;&gt; /etc/apk/repositories &amp;&amp; apk update\nRUN apk add -U tzdata\nRUN ln -sf /usr/share/zoneinfo/Asia/Shanghai /etc/localtime &amp;&amp; echo 'Asia/Shanghai' &gt;/etc/timezone\nENV LANG=zh_CN.UTF-8\nENV LANGUAGE=zh_CN.UTF-8\n\nADD jdk-17_linux-x64_bin.tar.gz /usr/java\n\nRUN ln -s /usr/java/jdk-17.0.6 /usr/java/default\nENV JAVA_HOME=/usr/java/default\nENV PATH $JAVA_HOME/bin:$PATH\n</code></pre>\n<p><strong>docker version</strong></p>\n<p>Docker version 17.04.0-ce, build 4845c56</p>\n<p><strong>JDK version</strong></p>\n<pre class=\"lang-none prettyprint-override\"><code>java version &quot;17.0.6&quot; 2023-01-17 LTS\nJava(TM) SE Runtime Environment (build 17.0.6+9-LTS-190)\nJava HotSpot(TM) 64-Bit Server VM (build 17.0.6+9-LTS-190, mixed mode, sharing)\n</code></pre>\n<p>If I do not add <code>--security-opt seccomp=unconfined</code> in docker run command, it returns the error below</p>\n<pre class=\"lang-none prettyprint-override\"><code>/ # java -version\n[0.118s][warning][os,thread] Failed to start thread &quot;GC Thread#0&quot; - pthread_create failed (EPERM) for attributes: stacksize: 1024k, guardsize: 4k, detached.\n#\n# There is insufficient memory for the Java Runtime Environment to continue.\n# Cannot create worker GC thread. Out of system resources.\n# An error report file with more information is saved as:\n# //hs_err_pid6.log\n</code></pre>\n"},{"tags":["java","transactions","hexagonal-architecture"],"answers":[{"owner":{"user_id":6051839,"display_name":"Ilia Yatsenko"},"up_vote_count":0,"is_accepted":false,"creation_date":1681896698,"answer_id":76052915,"body":"<p>I agree with you that making any of <code>core</code>, <code>api</code> or <code>persistence</code> responsible for transactions does not look well.</p>\n<p>Usually, there is one more layer, called like <code>Application</code>, which is placed between controllers (<code>api</code> layer in your case) and domain logic (your <code>core</code>). This <code>Application</code> layer contains application use-cases, and is responsible of high-level coordination: managing transactions, dispatching integration events, etc.</p>\n<p>But adding a whole new layer only for one task may be an overhead for your case. If you are sure that there will not appear any other tasks fitting &quot;somewhere in between&quot; <code>api</code> and <code>core</code>, I'd suggest to put transaction management in the <code>api</code> layer.</p>\n<p>But I'm pretty sure that this is not the only concern in your app, which fits &quot;in between&quot;. So, adding <code>Application</code> layer may be worth it. For example, writing logs, or triggering integration events are also good candidates to be placed here.</p>\n<p><strong>P.S.</strong> Also your words &quot;If the core is wired to a different kind of persistency, these Transactionals would become useless.&quot; make me suspect that coupling between your <code>core</code> and <code>persistence</code> is too high. Ideally, core should not be &quot;wired&quot; on any persistence mechanisms, and <strong>abstracting via interface is still dependency</strong>, though inverted. What I'd suggest is adding <code>app</code> layer which will be &quot;wired&quot; on <code>persistence</code> layer, instead. Then <code>core</code> will be isolated completely. I offer you to read this amazing article about core isolation and completion, it will clarify why the additional layer may be required: <a href=\"https://enterprisecraftsmanship.com/posts/domain-model-purity-completeness\" rel=\"nofollow noreferrer\">https://enterprisecraftsmanship.com/posts/domain-model-purity-completeness</a>. And this one will explain why inverted dependency on persistence is still dependency, and thus should be avoided: <a href=\"https://enterprisecraftsmanship.com/posts/how-to-know-if-your-domain-model-is-properly-isolated/\" rel=\"nofollow noreferrer\">https://enterprisecraftsmanship.com/posts/how-to-know-if-your-domain-model-is-properly-isolated</a></p>\n"}],"owner":{"user_id":1638626,"display_name":"Florian"},"view_count":41,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681717257,"question_id":76032741,"body":"<p>In my Java application, I try to implement hexagonal architecture:</p>\n<ul>\n<li><p>Its inner <code>core</code> package contains the pure business logic. These are in the form of plain old Java objects and interfaces.</p>\n</li>\n<li><p>On one side of the core, I have a <em>port</em> package <code>api</code> that receives requests from the outside and calls the business logic's interfaces to perform the required steps, such as retrieving or creating an entity.</p>\n</li>\n<li><p>On another side, I have an <em>adapter</em> package <code>persistency</code> that implements data retrieval and storage in a database. It is decoupled in hexagonal way, meaning the core provides and calls interfaces, which are implemented by classes in this package.</p>\n</li>\n</ul>\n<p>In a typical scenario, the api receives a REST call, calls the core, and the core calls the persistency-backed adapters for creating/reading/updating/deleting something.</p>\n<p><strong>Which of these components optimally creates the database transaction?</strong> More precisely, since I use Spring Boot, which package should contain the <code>@Transactional</code>-annotated methods?</p>\n<ul>\n<li><p>At first thought, my guess would have been that the core should be in control of this, as consistent rollback seems to be a key task to ensuring consistent business data. However, at second glance, transactionality seems to be more of a database detail, and a different implementation of the adapter, such as sending the data on via REST for outside storage, uses completely different schemes.</p>\n</li>\n<li><p>In non-hexagonal layered architectures, we usually find @Transactional on the uppermost layer, meaning the controllers' methods in the api package. This seems to be in sync with the idea that it is the REST endpoint that decides whether the request is stored completely or partially. However, it seems weird that this border package (api) should manage the details of another border package (persistency). If the core is wired to a different kind of persistency, these Transactionals would become useless.</p>\n</li>\n<li><p>Another idea could be to put the @Transactionals into the persistency package. But this would mean that other packages are completely unable to control the level of detail and multiple database accesses might result unintentionally in a series of transactions instead of one common one.</p>\n</li>\n</ul>\n"},{"tags":["java","generics","java-8","functional-interface"],"comments":[{"owner":{"user_id":112968,"display_name":"knittl"},"edited":false,"comment_id":134081905,"body":"<code>T</code> extends <code>Base&lt;T&gt;</code>. The extending <code>T</code> is not guaranteed to be a functional interface, it could have added a method, making it not a SAM-type anymore (e.g. <code>interface TChild extends Base&lt;TChild&gt; { void secondMethod(); }</code>"},{"owner":{"user_id":869736,"display_name":"Louis Wasserman"},"edited":false,"comment_id":134085544,"body":"It&#39;s not just that it could have added a method, it could be a class and not an interface.  Nothing like this can possibly work."},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":134110692,"body":"It’s a lucky coincidence that in your example, the <code>process</code> method has the same parameter types and return type as the <code>parse</code> method. Since nothing in the language enforces this, you have demonstrated yourself that even if the sub-interface is a functional interface it may have a different method to implement and there’s no guaranty that the lambda expression in the default method is compatible to the other method."}],"owner":{"user_id":8441845,"display_name":"voidnull"},"view_count":65,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1681588105,"question_id":76024428,"body":"<p>I recently came across this when trying to provide common functionality to a sub-class of a functional interface. Apparently you cannot do it the way I thought (atleast for Java 8):</p>\n<pre><code>@FunctionalInterface \npublic interface Base&lt;T extends Base&lt;T&gt;&gt; {\n    void doit();\n        \n    default T someDefault() {\n        return () -&gt; {}; //incompatible types: T is not a functional interface\n    }\n}\n</code></pre>\n<p>Is there a way to do this? Or was it intentionally disallowed? Maybe an abuse of default methods?</p>\n<p>Maybe a use-case example would be a good idea:</p>\n<pre><code>@FunctionalInterface \npublic interface Processor&lt;I, T extends Processor&lt;I, T&gt;&gt; {\n    T process(I input);\n    default T requireNonNull(I i) {\n        return (I input) -&gt; {\n            Objects.requireNonNull(i);\n            process(input);\n        };\n    }\n}\n    \n@FunctionalInterface \npublic interface Parser&lt;T&gt; extends Processor&lt;String, T&gt; {\n    @Override\n    default T process(String s) { \n        return parse(s);\n    }\n    T parse(String s);\n}\n</code></pre>\n"},{"tags":["java","jframe"],"comments":[{"owner":{"user_id":21105992,"display_name":"teapot418"},"edited":false,"comment_id":134054495,"body":"Would this help you? <a href=\"https://stackoverflow.com/questions/342990/create-java-console-inside-a-gui-panel\" title=\"create java console inside a gui panel\">stackoverflow.com/questions/342990/&hellip;</a>"}],"owner":{"user_id":19786208,"display_name":"Arthur Brenno"},"view_count":33,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1681401988,"question_id":76007566,"body":"<p>I have a Java App that runs on my Windows terminal. it uses <code>scanner</code> for inputs and <code>System.out.println()</code> to display outputs.</p>\n<p>When I compile my aplication into a <code>.jar</code> file, I need to write a <code>.bat</code> file in order to run my app, because there's no UI. I wonder if I can 'emulate' the windows terminal in a <code>.jar</code> file, directly. Without needing to create a batch. Just double click and play the game. Input and Output.</p>\n<p>Something that might help visualization is the <code>server.jar</code>, from Minecraft. In the right corner, there is a console with the logs and so on... But I don't need to create a <code>.run</code> batch to run the jar and, if I create one, the outputs will be the exact same of the <code>.jar</code> file, when I double click. One thing that I dont know for sure is that inputs, in the <code>server.jar</code> are allowed.</p>\n<p>I've done some tests with <code>JFrame</code> and <code>System.setOutputStream()</code>, but I'm lost and don't know what to use or what to do. I'm using netbeans because I think it's easier to implement JFrames and so on... But don't know what elements I should use or where to start.</p>\n"},{"tags":["java","spring-boot","gradle"],"answers":[{"owner":{"user_id":14564074,"display_name":"noob234"},"up_vote_count":0,"is_accepted":true,"creation_date":1682584357,"answer_id":76118357,"body":"<p><strong>Fixed it:</strong></p>\n<p>When I included the jar file in my project <code> implementation files('../my-library/jar/my-library-1.0.jar')</code>, the Spring context in my project was not aware of the beans defined in the jar file, so it was not able to find and inject them.</p>\n<p>To fix this issue, I made sure that Spring scans the packages in my library for components and creates beans for them with <code>@ComponentScan</code>.</p>\n<pre><code>@Configuration\n@ComponentScan(basePackages = &quot;com.nob234.mylibrary&quot;)\npublic class MyLibraryConfiguration {\n}\n</code></pre>\n<p>@ComponentScan annotation tells Spring to scan the &quot;com.nob234.mylibrary&quot; package and all its sub-packages for components to create beans for.</p>\n<p>Then, in the main project, I imported this configuration class:</p>\n<pre><code>@Configuration\n@Import(MyLibraryConfiguration.class)\npublic class MyAppConfiguration {\n}\n</code></pre>\n<p>This will ensure that Spring scans the packages in the library and creates beans for the components defined in it.</p>\n<p><strong>Note:</strong> If you're already using a configuration class in your library, you can add the @ComponentScan annotation to that class instead of creating a new configuration class.</p>\n"}],"owner":{"user_id":14564074,"display_name":"noob234"},"view_count":69,"up_vote_count":2,"accepted_answer_id":76118357,"answer_count":1,"score":2,"creation_date":1681374284,"question_id":76003247,"body":"<p>I created a &quot;starter project&quot; that I use for storing common dtos, custom exceptions, and classes and use it as a dependency for all my project so that when I update a class I don't have to update every project.</p>\n<p>So I just build the jar and use it in the project that I need those classes like this:</p>\n<pre><code>implementation files('../my-library/jar/my-library-1.0.jar')\n</code></pre>\n<p>The issue is thought that when I try to use a service or a component from this library I get an error:</p>\n<pre><code>org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'com.nob234.mylibrary.services.MyService' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1801) ~[spring-beans-5.3.25.jar:5.3.25]\n</code></pre>\n<p>Here is my service in the library:</p>\n<pre><code>@Service\n@AllArgsConstructor\npublic class MyService {\n    public String addSomething(String string){\n        return string + &quot; something&quot;;\n    }\n}\n</code></pre>\n<p>And here I tried to inject it in another service:</p>\n<pre><code>@Service\n@AllArgsConstructor\npublic class AnotherService {\n\n    private final MyService myService;\n\n    public String printHelloSomething() {\n      return myService.addSomething(&quot;Hello&quot;);\n    }\n}\n</code></pre>\n<p>I thought maybe there is a missing constructor or something, but I think there is an issue with the context of the Spring @Service / @Component annotation. How can I fix this?</p>\n"},{"tags":["java","unit-testing","gradle","micronaut","micronaut-test"],"owner":{"user_id":13060649,"display_name":"suvodipMondal"},"view_count":37,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1681372283,"question_id":76002938,"body":"<p>Currently I am using <code>sudo ./gradlew clean build -x test</code>to build and <code>nohup java -jar &lt;jar file&gt;</code> to run the main application in my ec2 console. And it runs successfully.</p>\n<p>But when I am trying to run tests(annotated with <code>@MicronautTest</code>) with <code>sudo ./gradlew test</code> when the application is running on another port, it fails on every available port throwing this exception :</p>\n<pre><code>io.micronaut.http.server.exceptions.ServerStartupException: Unable to start Micronaut server on port: 4464\n\njava.net.BindException: Address already in use\n</code></pre>\n<p>I am currently using <code>micronaut.server.port: -1</code> in my <code>application-test.yml</code>. But it does not seem to work.</p>\n<p>Only time the test starts running when application server is not stopped, although the application server on runs on different fixed PORT number. Is this happening because my application is already running ?</p>\n"},{"tags":["java","documentation","javadoc"],"comments":[{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134043733,"body":"I did a package back in 2005.   I&#39;ll see if I can dig it up.  Have you documented all of your classes and methods for at least one class?  Ultimately you will end up with a set of html files based on your .java files.  Also, learn about the Java manifest file.  That is very important."},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134043813,"body":"<a href=\"https://www3.ntu.edu.sg/home/ehchua/programming/java/J9c_PackageClasspath.html#:~:text=CLASSPATH%20is%20an%20environment%20variable,used%20in%20a%20Java%20program\" rel=\"nofollow noreferrer\">www3.ntu.edu.sg/home/ehchua/programming/java/&hellip;</a>."},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134043817,"body":"This instruction is very important.  &quot;To make a class as part of a package, you have to include the package statement as the first statement in the source file.&quot;"},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134043827,"body":"The files should have the same structure as the package fully qualified names.  So you should have a folder called my_proj and another for beta under myproj, and another for delta under my_proj, and so on."},{"owner":{"user_id":966656,"display_name":"Andrew S"},"edited":false,"comment_id":134043863,"body":"@MacGyver Thank you for your timely response to my question. I am well aware of how to create classes in packages, and I do know about nesting packages. My question relates to documenting an entire project consisting of three different packages. I want a top level documentation to outline the entire project."},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134043896,"body":"I&#39;m not aware of a &quot;project&quot; being an actual entity (or term) of Java.  It is likely a term used by your IDE.  To confirm, you could track down the source code for javadoc.  What IDE are you using?  Java and Javadoc was probably developed way before modern IDEs that incorporate allow you to build Java projects."},{"owner":{"user_id":966656,"display_name":"Andrew S"},"edited":false,"comment_id":134043919,"body":"Its more of a general question regardless of any specific IDE. I guess I use the term project to define a collection of related packages and class files that work together to define a software application when compiled. Its nothing more or less than that."},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134043949,"body":"The answer to your question is likely not possible &quot;out of the box&quot; unless there is a Visual Studio Code extension for it (there are thousands).  Or a Visual Studio nuget package.  Visual Studio started using the term &quot;project&quot; for computer applications and all of the IDEs out there followed.  I&#39;m sure Microsoft wasn&#39;t the first to use the term to group a collection of source code files and other objects into a single entity.  One thing to check are the IDEs that deal strictly with Java.  They might have built an extension for it.  Eclipse is a common one.  Jetbrains maybe."},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134044107,"body":"Can I ask you a simple question here?  Are you asking so that you can easily document project version changes at the top level?  And when someone goes to a specific version, they see the executive summary (changes that occurred since the last release)?"},{"owner":{"user_id":966656,"display_name":"Andrew S"},"edited":false,"comment_id":134044158,"body":"I&#39;m wanting to say what the project&#39;s title is, what the project does, why it exists. who its authors are and what the current version is."},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134044172,"body":"The reason I ask is because programmers eventually make a distinction between building an application (project in IDE) and building a programming framework or API (in Java, this is called a package, in C#, this would be a DLL or library, in Python, this would be a module, etc..).  If you are truly building an application, then you should not grab files from a package.  You should include the package and call into it.  The reason a project exists is to separate the idea of a project (for an application) and the things to include in a project (like packages).  Likely why one does not exist."},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134044197,"body":"Sorry I can&#39;t help you bud.  I think most programmers put this top level project information into source control (ie: SVN, GitHub, etc..) for an application or project.  Whenever you make a commit in Github, you can list what files need to change for that version and put the documentation in there.  What you are asking is an interesting question and challenging question, so it might not exist yet."},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134044334,"body":"I may have an actual answer for you, or at least a lead.  Javadoc allows you to create the &quot;standard doclet&quot;.  You can even customize the doclet to your own format!  I think this is what you want.  The author can go there.  And other custom things."},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134044342,"body":"&quot;To customize the output of the Javadoc tool, you need to write your own doclet that specifies the content and format of the output that you desire. If you want HTML output with roughly the same format as the default output, you can use the standard doclet as a starting point for creating your doclet.&quot;"},{"owner":{"user_id":5354987,"display_name":"Samuel Marchant"},"edited":false,"comment_id":134044350,"body":"While it is done often to have only one level of folder to a package, the java tutorial has often recommended to start with a package folder &quot;com&quot; or &quot;net&quot; and then another folder down then inside that second starts individual package folder sets with either subset folders and or classes. Web servers get awfully fussy if that naming scheme isn&#39;t found in jar packages."},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134045845,"body":"This will get you started.  Just make sure to look at the version of Java you have installed.  <a href=\"https://docs.oracle.com/javase/7/docs/technotes/guides/javadoc/doclet/overview.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/7/docs/technotes/guides/javadoc/docle&zwnj;&#8203;t/&hellip;</a>"},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134045857,"body":"Also, you can post a question here once you have a start.  Search existing questions for &quot;custom doclet&quot;.  <a href=\"https://forums.oracle.com/ords/apexds/domain/dev-community/category/java_apis?tags=javadoc-tool-developer-tool-apis&amp;s=custom+doclet\" rel=\"nofollow noreferrer\">forums.oracle.com/ords/apexds/domain/dev-community/category/&zwnj;&#8203;&hellip;</a>"},{"owner":{"user_id":966656,"display_name":"Andrew S"},"edited":false,"comment_id":134090359,"body":"Samuel Marchent, thanks that was just what I needed."}],"answers":[{"owner":{"user_id":966656,"display_name":"Andrew S"},"up_vote_count":0,"is_accepted":true,"creation_date":1681670533,"answer_id":76029694,"body":"<p>Its been a couple of days since I posted the question and I have worked out what I think is the proper way to do it in Java 1.9 and above. For Java versions &lt;= 1.8 and below, I still do not have an answer and will welcome suggestions.</p>\n<p>Firstly, it is the convention that projects themselves should be in a named package. By convention this looks like a URL in reverse, starting with the least specific thing and drilling down to the most specific project name. For example:</p>\n<pre><code>edu.myuni.mycourse.myname.my_proj2000\n</code></pre>\n<p>or for a business organization.</p>\n<pre><code>com.mycompany.myproj2000\n</code></pre>\n<p>What you would see in your project directory, if you created such a package name is a folder hierarchy such as the following. This is what an IDE would generate, but if you are doing this manually (without and IDE), you would have to create this yourself.</p>\n<pre><code>src/com/mycompany/myproj200/\n</code></pre>\n<p>So then your project packages, would then be created inside the myproj2000 directory as shown below. If we take a Java class such as <strong>Theta</strong> then it would be. c<strong>om.mycompany.myproj2000/alpha/Theta.java</strong>. This is what is known as a <strong>fully qualified name</strong>. This has the benefit of uniquely identifying your class in a large project where classes in different packages may have the same name.</p>\n<p>So the directory structure  is therefore as follows with each package getting a <strong>package-info.java</strong> for documentation purposes, and the project as a whole getting <strong>module-info.java</strong> Below is the structure of the project, and below this is example of what the <strong>package-info.java</strong> and <strong>module-info.java</strong> would look like.</p>\n<pre><code>src:\n======================\ncom.mycompany.myproj2000:\n  module-info.java\n\n  com.mycompany.myproj2000.alpha\n    package-info.Java\n    Theta.Java\n    Omega.Java\n\n  com.mycompany.myproj2000.beta\n    package-info.Java\n    Gamma.java\n    Epsilon.Java\n\n  com.mycompany.myproj2000.delta\n    package-info.java\n    Kappa.java\n    Iota.java\n</code></pre>\n<p>Then within this project the package-info looks as follows where the documentation comes above the package documentation.</p>\n<pre><code>/**\n*My documentation for my lovely alpha package, blah blah blah. It does blah blah.\n* @Author Joe Bloggs\n* @Version 1.02 Spring 2023\n**/\npackage com.mucompany.myproj2000.apha;\n</code></pre>\n<p>The module-info.java looks similar.</p>\n<pre><code>/**\n* This project does blah blah blah it was created for blah blah so that blah blah\n* @Author Joe Bloggs\n* @Version 1.02 Spring 2023\n**/\nmodule com.mycompany.myproj2000{\n}\n</code></pre>\n<p>I suspect that before Java 1.9 when modules were introduced that the outer most package <strong>com.mycompany.myproj2000</strong> would also get a package-info.java, if anyone would confirm that I'd like to know.</p>\n"}],"owner":{"user_id":966656,"display_name":"Andrew S"},"view_count":47,"up_vote_count":2,"accepted_answer_id":76029694,"answer_count":1,"score":2,"creation_date":1681351659,"question_id":76001100,"body":"<p>I thought providing top level (Project level) Java Doc would be a straight forward thing to do, but I look around and I see an abundance of information on how to document packages, but nothing on how to document whole Java projects, so that the index page of the documentation contains a title and a project description, as well as all the packages in the project.</p>\n<p>Lets say I have a project, in its src directory I have three packages each with various Java classes. Each class has JavaDoc and each Package alpha, beta, and delta has internally package-info.java to document each package: As follows. When I do this the index of the documentation has no title and just lists the packages. I would like a place to include a title and a project description, version information etc.</p>\n<pre><code>src:\n======================\nalpha\n  package-info.Java\n  Theta.Java\n  Omega.Java\n\nbeta\n  package-info.Java\n  Gamma.java\n  Epsilon.Java\n\ndelta\n   package-info.java\n   Kappa.java\n   Iota.java\n</code></pre>\n<p>Is there a way to have top level Java Documentation for all three packages without placing all three packages inside an outermost package? Or is the outer most package the only way to do this and how Java expects project to be structured? For example:</p>\n<pre><code>src:\n======================\nmy_proj:\n  package-info.Java\n\n  my_proj.alpha\n    package-info.Java\n    Theta.Java\n    Omega.Java\n\n  my_proj.beta\n    package-info.Java\n    Gamma.java\n    Epsilon.Java\n\n  my_proj.delta\n    package-info.java\n    Kappa.java\n    Iota.java\n</code></pre>\n"},{"tags":["java","mongodb","spring-boot","kotlin","spring-data"],"comments":[{"owner":{"user_id":2924784,"display_name":"orirab"},"edited":false,"comment_id":134238730,"body":"Would you be willing to consider composition instead of inheritance? I think you should still be able to get all the benefits you get from the abstraction."},{"owner":{"user_id":8286276,"display_name":"Pelicer"},"edited":false,"comment_id":134243157,"body":"Yes! Although I tried using composition and I had problems with that (it&#39;s been a while now and I can&#39;t quite remember what the problem was). I&#39;ll try your solution and give a feedback."},{"owner":{"user_id":2924784,"display_name":"orirab"},"edited":false,"comment_id":134371830,"body":"if this worked for you, would you consider accepting the answer?"}],"answers":[{"owner":{"user_id":2924784,"display_name":"orirab"},"up_vote_count":0,"is_accepted":false,"creation_date":1682955438,"answer_id":76148186,"body":"<p>I'm not sure if it fits your needs, but maybe <a href=\"https://en.wikipedia.org/wiki/Composition_over_inheritance\" rel=\"nofollow noreferrer\">Composition over Inheritance</a> may help here as well.</p>\n<p>It depends on how you would implement it, but you may have to do some or all of the following:</p>\n<ol>\n<li>Persist the data in a somewhat different way (for example, instead of having the <code>DefaultBankAccount</code> saved on the persisted JSON, it could be nested inside an internal object).</li>\n<li>Refactor some code usages (That nowadays accept <code>DefaultBankAccount</code> or <code>FxBankAccount</code>, or change the <code>BrazilFxBankAccount</code> to mimic the required behaviour).</li>\n<li>Create and register custom <code>MongoCustomConversions</code>.</li>\n</ol>\n"}],"owner":{"user_id":8286276,"display_name":"Pelicer"},"view_count":164,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681325697,"question_id":75998904,"body":"<p>I have a situation in which I have a default &quot;bank account&quot; entity, and from it I can derive more specific types of bank accounts, hereby called FX. A FX entity can also be derived from to have even more specific bank accounts. To accomplish such, I made an interface, <code>DefaultBankAccount</code>, its implementation, <code>FXBankAccount</code>, and I can have classes that extends <code>FXBankAccount</code> to have country-specific bank accounts:</p>\n<pre><code>interface DefaultBankAccount {\n    val accountNumber: String\n    val address: String\n    val bankName: String\n    val codeIban: String\n    val codeSwift: String\n    val country: String\n    val holderName: String\n}\n\nopen class FxBankAccount(\n    override var accountNumber: String,\n    override var address: String,\n    override var bankName: String,\n    override var codeIban: String,\n    override var codeSwift: String,\n    override var country: String,\n    override var holderName: String,\n    var active: Boolean,\n) : DefaultBankAccount\n\ndata class BrazilFxBankAccount(\n    @org.springframework.data.annotation.Transient\n    private val fxBankAccount: FxBankAccount,\n    val bankCode: String,\n    val branch: String,\n    val digit: String,\n    val type: String,\n    val ispb: String,\n    val docType: String,\n    val docNumber: String\n) : FxBankAccount(\n    fxBankAccount.accountNumber,\n    fxBankAccount.address,\n    fxBankAccount.bankName,\n    fxBankAccount.codeIban,\n    fxBankAccount.codeSwift,\n    fxBankAccount.country,\n    fxBankAccount.holderName,\n    fxBankAccount.active,\n    fxBankAccount.paymentAgreement\n)\n</code></pre>\n<p>The reason behind my BrazilFxBankAccount to have a <code>fxBankAccount</code> property in the constructor is:</p>\n<ol>\n<li>If I simply override the fields in <code>BrazilFxBankAccount</code>, spring data will throw an error saying I have fields with the same name and need to annotate them with @Field to remove ambiguity, which will cause them to be persisted anyway with different names.</li>\n<li>I tried using Delegation, but I can only Delegate interfaces, which FxBankAccount is not and cannot be, because it itself is implementing one</li>\n</ol>\n<p>Everything works fine until persistance. Retrieving is the problem, because there is no <code>fxBankAccount</code> field saved in the database, and it is on the constructor, so mongoTemplate does not know how to build the object, throwing the following error:</p>\n<pre><code>No property `fxBankAccount` found on entity class BrazilFxBankAccount to bind constructor parameter to\n</code></pre>\n<p>And the error makes perfect sense. I understand why it is being thrown. I just don't know how to work around it. My current implementation is already a work-around to have three levels of abstraction. Any thoughts?</p>\n"},{"tags":["java","spring-boot","spring-transactions"],"comments":[{"owner":{"user_id":685806,"display_name":"Pino"},"edited":false,"comment_id":134022114,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13206792/spring-async-limit-number-of-threads\">Spring @Async limit number of threads</a>"}],"answers":[{"owner":{"user_id":8007713,"display_name":"Guilherme Barboza"},"up_vote_count":0,"is_accepted":false,"creation_date":1681300108,"answer_id":75995114,"body":"<p>What you're trying to do with your code is called reach a mutual exclusion to avoid a race condition - two or more processes or threads simultaneously reach a critical segment of your code and try to read and/or update the same piece of data, potentially causing a bug or error. In java , there is a built in feature to avoid this kind of problem: The <code>synchronized</code> keyword.</p>\n<p>First, on your Controller, configure the Thread(s):</p>\n<pre><code>@RestController\npublic class WebShopOrderController {\n\n    @Autowired\n    private OrderService orderService;\n\n    @PostMapping(value = &quot;/wc-order&quot;)\n    public void getWcOrder(@RequestBody String jsonOrder, @RequestHeader Map&lt;String, String&gt; headers) {\n        log.info(&quot;order received&quot;);\n\n        // Will be done async\n        new Thread(() -&gt; processJsonOrder(jsonOrder)).start();\n\n        return;\n    }\n}\n</code></pre>\n<p>Then, just use the <code>synchronized</code> keyword on your <code>@Service</code> method:</p>\n<pre><code>@Service\npublic class OrderService {\n    \n    @Transactional\n    public synchronized void processJsonOrder(WoocommerceOrder wcOrder) {\n        // Only one Thread at a time will be allowed to enter this area.\n        // performing business logic\n    }\n\n}\n</code></pre>\n"}],"owner":{"user_id":2429144,"display_name":"Fabo137"},"view_count":57,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681228009,"question_id":75987800,"body":"<p>Giving the following code which takes a request with a web shop order as JSON in Spring Boot. The order should be handed over to the method <code>processJsonOrder</code> on which the order will be processed. After handing over, the web service should return OK to the client. Processing in <code>processJsonOrder</code> should be async without blocking the return to the client.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class WebShopOrderController {\n\n    @Autowired\n    private OrderService orderService;\n\n    @PostMapping(value = &quot;/wc-order&quot;)\n    public void getWcOrder(@RequestBody String jsonOrder, @RequestHeader Map&lt;String, String&gt; headers) {\n        log.info(&quot;order received&quot;);\n    \n        // should be done async\n        processJsonOrder(jsonOrder);\n\n        return;\n    }\n}\n</code></pre>\n<p>However, jsonOrder processed in <code>processJsonOrder</code> should be processed one by one. Maybe by a queue, or there is a nice solution in Spring to do so. The idea is that jsonOrders are waiting when an order is executed within <code>processJsonOrder</code>. Currently, when two order updated arrive within seconds, order will be inserted into the database by <code>processJsonOrder</code> twice, as the thread processing the <code>jsonOrder</code> has not reached the commit point yet. There is some code in the <code>orderService</code> to check for duplicates on database level, but that doesn't help always.</p>\n<p>The OrderService.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\npublic class OrderService {\n    \n    @Async\n    @Transactional\n    public void processJsonOrder(WoocommerceOrder wcOrder) {\n        // performing business logic\n    }\n\n}\n</code></pre>\n<p>I expect that there is an elegant solution for that, or maybe doing the processJson order Async is the wrong approach. Important is that the calling client gets back an answer immediately, but the order is processed afterwards asynchronously, but one by one.</p>\n"},{"tags":["java","spring-boot","http","protocol-buffers","grpc"],"comments":[{"owner":{"user_id":10792320,"display_name":"San P"},"edited":false,"comment_id":134216026,"body":"gRPC uses <a href=\"https://netty.io/\" rel=\"nofollow noreferrer\">Netty</a> which is known for high performance, low latency and optimized memory usage. I am assuming <code>HttpAsyncClients</code> does not use that?"}],"owner":{"user_id":7241332,"display_name":"Runekn"},"view_count":44,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1681202830,"question_id":75983998,"body":"<p>I am doing benchmarks on different transfer protocols in java+spring-boot, and one thing that stands out is just how much higher throughput gRPC has compared to HTTP/2 with protobuf. The difference becomes even higher with concurrent calls. I'm wondering what is the 'secret sauce' that makes it faster.</p>\n<p>JMH results:</p>\n<pre><code>protobufHttp2  thrpt   25  2196,489 ±  47,739  ops/s\ngrpc           thrpt   25  4650,875 ±  51,356  ops/s\n</code></pre>\n<p>HTTP/2 client setup</p>\n<pre><code>HttpAsyncClients.customHttp2()\n                    .setDefaultConnectionConfig(ConnectionConfig.custom()\n                            .setTimeToLive(TimeValue.ofMinutes(10))\n                            .build())\n                    .setTlsStrategy(ClientTlsStrategyBuilder.create()\n                            .setSslContext(selfSignSSLContext)\n                            .build())\n\n                    .build();\n</code></pre>\n"},{"tags":["java","sql","spring-boot","h2"],"comments":[{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":134013042,"body":"JDBC uses ? for placeholders that is how JDBC works (so you are focussing on the wrong problem here). Please add the <b>full stacktrace</b> instead of a small snippet."},{"owner":{"user_id":21615046,"display_name":"DevCooper"},"edited":false,"comment_id":134013161,"body":"Thanks @M.Deinum , I will post more information. I still have a question in the insert sentence, (null,?,?,...?) why the first parameter is null, I think it should be the id?"},{"owner":{"user_id":11002,"display_name":"tgdavies"},"edited":false,"comment_id":134013182,"body":"The id is autogenerated in the DB server"},{"owner":{"user_id":21615046,"display_name":"DevCooper"},"edited":false,"comment_id":134013403,"body":"I see, Thank @tgdavies. So the problem should be somewhere else. I&#39;m still trying to get more information."},{"owner":{"user_id":6280255,"display_name":"Just another Java programmer"},"edited":false,"comment_id":134014449,"body":"If id is autogenerated, it should not be part of the insert statement."},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":134015089,"body":"I suspect the culprit is all the backtics you have in the columns name. Not sure why you have all of those as those aren&#39;t really needed here. At least in your UPDATE query you aren&#39;t using those quotes (which are added to the other queries as you can see), which probably results in a mismatch in column names."},{"owner":{"user_id":21615046,"display_name":"DevCooper"},"edited":false,"comment_id":134015411,"body":"Thank you very much @M.Deinum! It works, I delete those backtics, and the the sql operation works fine! I&#39;m not really into database, this sentence works fine for mysql but not for h2. Thanks again!"}],"answers":[{"owner":{"user_id":21615046,"display_name":"DevCooper"},"up_vote_count":0,"is_accepted":false,"creation_date":1681207089,"answer_id":75984607,"body":"<p>Thanks for @M.Deinum , The backtics caused the problem. <code>col</code> is really different from col.</p>\n"}],"owner":{"user_id":21615046,"display_name":"DevCooper"},"view_count":75,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681195183,"question_id":75983043,"body":"<p>I am writing a java program using Spring framework. And for the unit test, I use H2 database since it's an in-memory database. But it didn't work properly. For the code below, using the JPA method works fine, but the Query annotation raise exceptions.</p>\n<p>DAO</p>\n<pre><code>public interface TargetDiskRepository extends JpaRepository&lt;TargetDiskEntity, Long&gt;,\n        JpaSpecificationExecutor&lt;TargetDiskEntity&gt; {\n\n    List&lt;TargetDiskEntity&gt; findByNodeId(String nodeId);\n\n    List&lt;TargetDiskEntity&gt; findByNodeIdAndDiskStateAndTrtype(String nodeId, DiskState diskState, String trtype);\n\n    Optional&lt;TargetDiskEntity&gt; findByDiskId(String diskId);\n\n    @Transactional\n    @Modifying\n    @Query(value = &quot;UPDATE m_target_disk SET disk_state = :tar_state WHERE &quot;  +\n        &quot;disk_state = :ori_state AND disk_id = :disk_id&quot;, nativeQuery = true)\n    int updateDiskStateByDiskId(@Param(&quot;disk_id&quot;) String diskId, @Param(&quot;ori_state&quot;) String originState, @Param(&quot;tar_state&quot;) String targetState);\n\n    @Transactional\n    void deleteByNodeId(String nodeId);          \n}\n</code></pre>\n<p>Entity</p>\n<pre><code>@Setter\n@Getter\n@NoArgsConstructor\n@EqualsAndHashCode\n@Entity\n@Table(name = &quot;m_target_disk&quot;, indexes = {\n            @Index(name = &quot;idx_unique_node_disk&quot;, columnList = &quot;`node_id`, `serial_number`&quot;, unique = true)})\n@EntityListeners({AuditingEntityListener.class})\npublic class TargetDiskEntity implements Auditable&lt;String, Long, LocalDateTime&gt; {\n\n    @EqualsAndHashCode.Exclude\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @NotNull\n    @Column(name = &quot;`disk_id`&quot;)\n    private String diskId;\n\n    @NotNull\n    @Column(name = &quot;`node_id`&quot;)\n    private String nodeId;\n\n    @Column(name = &quot;`total_capacity_gib`&quot;)\n    private int totalCapacityGib;\n\n    @Column(name = &quot;`used_capacity_gib`&quot;)\n    private int usedCapacityGib;\n\n    @NotNull\n    @Column(name = &quot;`model_number`&quot;)\n    private String modelNumber;;\n\n    @NotNull\n    @Column(name = &quot;`serial_number`&quot;)\n    private String serialNumber;\n\n    @NotNull\n    @Column(name = &quot;`firmware_revision`&quot;)\n    private String firmwareRevision;;\n\n    private String nqn;\n\n    private String trtype;\n\n    private String adrfam;\n    \n    private String traddr;\n\n    private String trsvcid;\n\n    @Column(name = &quot;`disk_state`&quot;)\n    @Enumerated(EnumType.STRING)\n    private DiskState diskState;\n\n    @Column(name = &quot;`blacklisted_reason`&quot;)\n    private String blacklistedReason;\n\n    @NotNull\n    @Column(name = &quot;`bdev_name`&quot;)\n    private String bdevName;\n\n    @EqualsAndHashCode.Exclude\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name= &quot;`created_date`&quot;)\n    private Date createdDate;\n\n    @EqualsAndHashCode.Exclude\n    @Temporal(TemporalType.TIMESTAMP)\n    @Column(name= &quot;`last_modified_date`&quot;)\n    private Date lastModifiedDate;\n\n    @Override\n    public Optional&lt;LocalDateTime&gt; getCreatedDate() {\n        return null == createdDate ? Optional.empty()\n                : Optional.of(LocalDateTime.ofInstant(createdDate.toInstant(), ZoneId.systemDefault()));\n    }\n\n    @Override\n    public void setCreatedDate(LocalDateTime createdDate) {\n        this.createdDate = Date.from(createdDate.atZone(ZoneId.systemDefault()).toInstant());\n    }\n\n    @Override\n    public Optional&lt;String&gt; getCreatedBy() {\n        return Optional.empty();\n    }\n\n    @Override\n    public void setCreatedBy(String createdBy) {\n    }\n\n    @Override\n    public Optional&lt;LocalDateTime&gt; getLastModifiedDate() {\n        return null == lastModifiedDate ? Optional.empty()\n                : Optional.of(LocalDateTime.ofInstant(lastModifiedDate.toInstant(), ZoneId.systemDefault()));\n    }\n\n    @Override\n    public void setLastModifiedDate(LocalDateTime lastModifiedDate) {\n        this.lastModifiedDate = Date.from(lastModifiedDate.atZone(ZoneId.systemDefault()).toInstant());\n    }\n\n    @Override\n    public Optional&lt;String&gt; getLastModifiedBy() {\n        return Optional.empty();\n    }\n\n    @Override\n    public void setLastModifiedBy(String lastModifiedBy) {\n    }\n\n    @Override\n    public boolean isNew() {\n        return this.id == null;\n    }\n</code></pre>\n<p>Test code</p>\n<pre><code>@TestPropertySource(locations = &quot;classpath:application-dao-test.properties&quot;)\n@RunWith(PowerMockRunner.class)\n@PowerMockRunnerDelegate(SpringJUnit4ClassRunner.class)\n@PowerMockIgnore({&quot;com.sun.org.apache.xerces.*&quot;, &quot;javax.xml.*&quot;, &quot;org.xml.*&quot;, &quot;javax.management.*&quot;})\n@DataJpaTest\n@EntityScan(&quot;com.mycom.sat.testdisk.entity&quot;)\npublic class TargetDiskRepositoryTest {\n\n    @Autowired\n    private TestEntityManager entityManager;\n\n    @Autowired\n    private TargetDiskRepository repository;\n\n    @Test\n    public void testSaveAndFind() {\n\n        TargetDiskEntity diskEntity = new TargetDiskEntity();\n        \n        diskEntity.setDiskId(&quot;d-test-diskId&quot;);\n        diskEntity.setNodeId(&quot;d-test-nodeId&quot;);\n        diskEntity.setTotalCapacityGib(100);\n        diskEntity.setUsedCapacityGib(50);\n        diskEntity.setModelNumber(&quot;d-test-modelNumber&quot;);\n        diskEntity.setSerialNumber(&quot;d-test-serialNumber&quot;);\n        diskEntity.setFirmwareRevision(&quot;d-test-firmwareRevision&quot;);\n        diskEntity.setNqn(&quot;Nqn&quot;);\n        diskEntity.setTrtype(&quot;test-type&quot;);\n        diskEntity.setAdrfam(&quot;addrtest&quot;);\n        diskEntity.setTraddr(&quot;targetaddr&quot;);\n        diskEntity.setTrsvcid(&quot;test-svcid&quot;);\n        diskEntity.setDiskState(DiskState.AVAILABLE);\n        diskEntity.setBlacklistedReason(&quot;NULL&quot;);\n        diskEntity.setBdevName(&quot;d-test-bdev&quot;);\n        diskEntity.setCreatedDate(LocalDateTime.of(2014, 1, 14, 19, 30));\n        diskEntity.setLastModifiedDate(LocalDateTime.of(2014, 1, 14, 19, 31));\n        diskEntity.setCreatedBy(&quot;test-user&quot;);\n        diskEntity.setLastModifiedBy(&quot;test-user&quot;);\n\n        entityManager.persist(diskEntity);\n\n        TargetDiskEntity result = repository.findByDiskId(diskEntity.getDiskId()).get();\n        \n        repository.updateDiskStateByDiskId(result.getDiskId(), &quot;AVAILABLE&quot;, &quot;USING&quot;);\n    }\n}\n</code></pre>\n<p>property file</p>\n<pre><code>logging.console_enabled=true\nlogging.file.name=logs/nvmf-storagepool-unittest.log\nlogging.log_level=DEBUG\nlogging.level.org.hibernate=DEBUG\n\nspring.datasource.url=jdbc:h2:mem:data;DB_CLOSE_DELAY=-1;Mode=MySQL;DATABASE_TO_LOWER=TRUE\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\n\nspring.jpa.database=h2\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\nspring.jpa.show-sql=true\n\nspring.h2.console.path=/h2-console\nspring.h2.console.enabled=true\n</code></pre>\n<p>The output</p>\n<pre><code>Hibernate: insert into m_target_disk (id, adrfam, &quot;bdev_name&quot;, &quot;blacklisted_reason&quot;, &quot;created_date&quot;, &quot;disk_id&quot;, &quot;disk_state&quot;, &quot;firmware_revision&quot;, &quot;last_modified_date&quot;, &quot;model_number&quot;, &quot;node_id&quot;, nqn, &quot;serial_number&quot;, &quot;total_capacity_gib&quot;, traddr, trsvcid, trtype, &quot;used_capacity_gib&quot;) values (null, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)\nHibernate: select targetdisk0_.id as id1_0_, targetdisk0_.adrfam as adrfam2_0_, targetdisk0_.&quot;bdev_name&quot; as bdev_nam3_0_, targetdisk0_.&quot;blacklisted_reason&quot; as blacklis4_0_, targetdisk0_.&quot;created_date&quot; as created_5_0_, targetdisk0_.&quot;disk_id&quot; as disk_id6_0_, targetdisk0_.&quot;disk_state&quot; as disk_sta7_0_, targetdisk0_.&quot;firmware_revision&quot; as firmware8_0_, targetdisk0_.&quot;last_modified_date&quot; as last_mod9_0_, targetdisk0_.&quot;model_number&quot; as model_n10_0_, targetdisk0_.&quot;node_id&quot; as node_id11_0_, targetdisk0_.nqn as nqn12_0_, targetdisk0_.&quot;serial_number&quot; as serial_13_0_, targetdisk0_.&quot;total_capacity_gib&quot; as total_c14_0_, targetdisk0_.traddr as traddr15_0_, targetdisk0_.trsvcid as trsvcid16_0_, targetdisk0_.trtype as trtype17_0_, targetdisk0_.&quot;used_capacity_gib&quot; as used_ca18_0_ from m_target_disk targetdisk0_ where targetdisk0_.&quot;disk_id&quot;=?\nHibernate: UPDATE m_target_disk SET disk_state = ? WHERE disk_state = ? AND disk_id = ?\n\nError:\norg.springframework.dao.InvalidDataAccessResourceUsageException: could not prepare statement; SQL [UPDATE m_target_disk SET disk_state = ? WHERE disk_state = ? AND disk_id = ?]; nested exception is org.hibernate.exception.SQLGrammarException: could not prepare statement\n</code></pre>\n<p>The sql sentence in the Query annotation does not work.\nAt the same time, I notice that when I call <code>entityManager.persist(diskEntity);</code> the output is insert into m_target_disk with values(null, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?),  also the placeholder in the UPDATE sentence is '?'.</p>\n<p>in <code>repository.findByDiskId</code> it works fine while the disk_id in the SELECT sentence is '?', why would this happen?</p>\n<p>How can I fix this problem? Thanks.</p>\n<p>I tried to see the hibernate log in DEBUG level so I add <code>logging.level.org.hibernate=DEBUG</code> in the property file ,but it does not work. And I checked the answer <a href=\"https://stackoverflow.com/questions/71252127/my-spring-jpa-queries-do-not-work-with-h2\">My Spring JPA queries do not work with H2</a> but it does not work for me.</p>\n<p>for full stacktrace</p>\n<blockquote>\n<p>org.springframework.dao.InvalidDataAccessResourceUsageException: could\nnot prepare statement; SQL [UPDATE m_target_disk SET disk_state = ?\nWHERE disk_state = ? AND disk_id = ?]; nested exception is\norg.hibernate.exception.SQLGrammarException: could not prepare\nstatement     at\norg.h2.message.DbException.getJdbcSQLException(DbException.java:453)\nat\norg.h2.message.DbException.getJdbcSQLException(DbException.java:429)\nat org.h2.message.DbException.get(DbException.java:205)     at\norg.h2.message.DbException.get(DbException.java:181)  at\norg.h2.table.Table.getColumn(Table.java:703)  at\norg.h2.command.Parser.readTableColumn(Parser.java:1274)   at\norg.h2.command.Parser.parseUpdateSetClause(Parser.java:1325)  at\norg.h2.command.Parser.parseUpdate(Parser.java:1290)   at\norg.h2.command.Parser.parsePrepared(Parser.java:1005)     at\norg.h2.command.Parser.parse(Parser.java:843)  at\norg.h2.command.Parser.parse(Parser.java:815)  at\norg.h2.command.Parser.prepareCommand(Parser.java:738)     at\norg.h2.engine.Session.prepareLocal(Session.java:657)  at\norg.h2.engine.Session.prepareCommand(Session.java:595)    at\norg.h2.jdbc.JdbcConnection.prepareCommand(JdbcConnection.java:1235)\nat\norg.h2.jdbc.JdbcPreparedStatement.(JdbcPreparedStatement.java:76)\nat\norg.h2.jdbc.JdbcConnection.prepareStatement(JdbcConnection.java:352)\nat\norg.hibernate.engine.jdbc.internal.StatementPreparerImpl$1.doPrepare(StatementPreparerImpl.java:90)\nat\norg.hibernate.engine.jdbc.internal.StatementPreparerImpl$StatementPreparationTemplate.prepareStatement(StatementPreparerImpl.java:176)\nat\norg.hibernate.engine.jdbc.internal.StatementPreparerImpl.prepareStatement(StatementPreparerImpl.java:81)\nat\norg.hibernate.engine.query.spi.NativeSQLQueryPlan.performExecuteUpdate(NativeSQLQueryPlan.java:97)\nat\norg.hibernate.internal.SessionImpl.executeNativeUpdate(SessionImpl.java:1509)\nat\norg.hibernate.query.internal.NativeQueryImpl.doExecuteUpdate(NativeQueryImpl.java:298)\nat\norg.hibernate.query.internal.AbstractProducedQuery.executeUpdate(AbstractProducedQuery.java:1683)\nat\norg.springframework.data.jpa.repository.query.JpaQueryExecution$ModifyingExecution.doExecute(JpaQueryExecution.java:239)\nat\norg.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:88)\nat\norg.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:155)\nat\norg.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:143)\nat\norg.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:137)\nat\norg.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:121)\nat\norg.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:159)\nat\norg.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:138)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:80)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\nat\norg.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\nat\norg.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:145)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\nat\norg.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\nat\norg.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:215)\nat com.sun.proxy.$Proxy113.updateDiskStateByDiskId(Unknown Source)\nat\ncom.mycom.sat.testdisk.dao.TargetDiskRepositoryTest.testSaveAndFind(TargetDiskRepositoryTest.java:91)</p>\n</blockquote>\n"},{"tags":["java","jdbc","apache-beam","google-cloud-spanner"],"comments":[{"owner":{"user_id":6280255,"display_name":"Just another Java programmer"},"edited":false,"comment_id":134014539,"body":"Can&#39;t you write could to read the sql file and provide the read content as a String to apache beam?"},{"owner":{"user_id":9261558,"display_name":"Mazlum Tosun"},"edited":false,"comment_id":134025004,"body":"@user21615028 I proposed you a solution. Can you check it please and indicate us if it helps you to solve your issue ?"}],"answers":[{"owner":{"user_id":9261558,"display_name":"Mazlum Tosun"},"up_vote_count":0,"is_accepted":false,"creation_date":1681206204,"answer_id":75984473,"body":"<p>You can read a sql file from resource folder.</p>\n<p>Example of structure in your <code>Java</code> project (example with <code>BigQuery</code> but the principle is the same with <code>Spanner</code>):</p>\n<pre><code>your-project\n    src\n       main\n           java\n       resources\n           bigquery\n              queries\n                   your-query.sql\n</code></pre>\n<p>Example of <code>SQL</code> query file with a parameter:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT * FROM `@table`;\n</code></pre>\n<p>In the <code>Java</code> code, I use a library to read more easily the content of <code>SQL</code> file as <code>String</code>.</p>\n<p>Add this dependency in your <code>pom.xml</code> <code>Maven</code> file :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;commons-io&lt;/groupId&gt;\n    &lt;artifactId&gt;commons-io&lt;/artifactId&gt;\n    &lt;version&gt;2.11.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>An example of <code>Java</code> code with <code>Beam</code> :</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.google.api.services.bigquery.model.TableRow;\nimport org.apache.beam.sdk.io.gcp.bigquery.BigQueryIO;\nimport org.apache.beam.sdk.transforms.PTransform;\nimport org.apache.beam.sdk.values.PBegin;\nimport org.apache.beam.sdk.values.PCollection;\nimport org.apache.commons.io.IOUtils;\n\nimport java.io.IOException;\nimport java.io.InputStream;\nimport java.nio.charset.StandardCharsets;\n\npublic class YourClass {\n\n    public PTransform&lt;PBegin, PCollection&lt;TableRow&gt;&gt; read() {\n        String queryFilePath = &quot;bigquery/queries/your-query.sql&quot;;\n        String query = toStringContent(queryFilePath)\n                .replace(&quot;@table&quot;, &quot;table&quot;);\n\n        return BigQueryIO\n                .readTableRows()\n                .fromQuery(query)\n                .usingStandardSql();\n    }\n\n    private String toStringContent(String resourceFilePath) {\n        InputStream inputStream = YourClass.class.getClassLoader().getResourceAsStream(resourceFilePath);\n\n        try {\n            return IOUtils.toString(inputStream, StandardCharsets.UTF_8);\n        } catch (IOException e) {\n            throw new RuntimeException(&quot;Error while reading resource file&quot;, e);\n        }\n    }\n}\n</code></pre>\n<ul>\n<li>The method <code>toStringContent</code> load the content of <code>SQL</code> file from resource folder, using <code>commons-io</code> lib</li>\n<li>After retrieving the string content, I can replace params with <code>replace</code></li>\n<li>I used <code>BigQueryIO</code> for this example but the principle is the same for <code>SpannerIO</code></li>\n</ul>\n"}],"owner":{"user_id":21615028,"display_name":"Nikhil"},"view_count":57,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681194104,"question_id":75982930,"body":"<p>I am bit new to apache beam and I am writing code to connnect to spanner and execute a sql query using apache beam. Currently passing the query as .withQuery(spnQuery) under .apply method. spn query is defined as a string</p>\n<p>I am not finding a method to read query from .sql in apache beam using java. I saw a similar problem solved using apache beam in another post using python (<a href=\"https://stackoverflow.com/questions/73476487/pass-refer-a-sql-file-in-apache-beam-instead-of-string\">Pass/Refer a SQL file in Apache Beam instead of string</a>)</p>\n"},{"tags":["java","gluon-mobile"],"owner":{"user_id":1803551,"display_name":"user1803551"},"view_count":15,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1681178297,"question_id":75981901,"body":"<p>We are writing something similar to a navigation app, which can be either visual-based or sound-based. We are hitting a problem where the phone will enter sleep mode (might not be the correct technical term) after a while during the runtime of the application if the screen is not interacted with, causing it to both blank the screen and interrupt the <code>LocationService</code> of Attach.</p>\n<p>Reproduction is simple: create any Gluon Mobile application, like the started demo one, open it and wait. The phone will enter sleep mode.</p>\n<p>We would like to do the following:</p>\n<ol>\n<li>When visual mode is on, keep the screen lit and keep sending location updates without letting the phone stop these via some power saving mode / sleep. Some applications to this, like Google Maps, so this is not a special requirement.</li>\n<li>When only sound mode is on, the phone can turn off the screen to save on battery, but we still need the application running with location updates and the ability to give sound notification to the user.</li>\n</ol>\n<p>I've looked into the <code>LifecycleService</code> and the <code>BatteryService</code> in Attach, but there is no functionality that matches what we need. Lifecycle allows to listen to changes in the lifecycle of the application, but not modify them (except for shutting down).</p>\n<p>How can we fulfill the requirements? For now we are on Android only, but in the future we plan to expand to iOS as well.</p>\n"},{"tags":["java"],"comments":[{"owner":{"user_id":7928721,"display_name":"samabcde"},"edited":false,"comment_id":134004932,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/54804355/java-lang-verifyerror-stack-map-does-not-match-the-one-at-exception-handler\">java.lang.VerifyError: Stack map does not match the one at exception handler</a>"}],"owner":{"user_id":1688441,"display_name":"Menelaos"},"view_count":45,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1681139948,"question_id":75978354,"body":"<h2>Problem</h2>\n<p>I had the following catch statement which was a problem:</p>\n<pre><code>} catch (DataException | JSONException exception) {\n    throw new RuntimeException(exception);\n}\n</code></pre>\n<p>I was seeing the following exception / error in the logs:</p>\n<p>WARN annotation.ExceptionHandlerExceptionResolver: Resolved [org.springframework.web.util.NestedServletException: Handler dispatch failed; nested exception is java.lang.VerifyError: Stack map does not match the one at exception handler 93\nException Details:\nLocation:</p>\n<pre><code>    my/code/aspose/AsposeDataSourceBuilder.getDataSource(Ljava/lang/Object;)Lcom/aspose/words/net/System/Data/DataSet; @93: astore_1\n  Reason:\n    Type 'org/json/JSONException' (current frame, stack[0]) is not assignable to 'java/lang/RuntimeException' (stack map, stack[0])\n  Current Frame:\n    bci: @0\n    flags: { }\n    locals: { 'java/lang/Object' }\n    stack: { 'org/json/JSONException' }\n  Stackmap Frame:\n    bci: @93\n    flags: { }\n    locals: { 'java/lang/Object' }\n    stack: { 'java/lang/RuntimeException' }\n  Bytecode:\n    0x0000000: bb00 0259 b700 03b6 0004 b600 054c 2b2a\n    0x0000010: b600 064d bb00 0759 2cb7 0008 4ebb 0009\n    0x0000020: 59b7 000a 120b b600 0c2d b800 0db6 000c\n    0x0000030: 120e b600 0cb6 000f 3a04 bb00 1059 1211\n    0x0000040: b700 123a 0519 05bb 0013 5919 04b2 0014\n    0x0000050: b600 15b7 0016 b600 1757 1905 b04c bb00\n    0x0000060: 1a59 2bb7 001b bf\n  Exception Handler Table:\n    bci [0, 92] =&gt; handler: 93\n    bci [0, 92] =&gt; handler: 93\n  Stackmap Table:\n    same_locals_1_stack_item_extended(@93,Object[#67])\n</code></pre>\n<p>I ran across the following Github issue/commits where they split a single catch into multiple ones - and this seemed to fix the error.</p>\n<p><a href=\"https://github.com/Wikidata/Wikidata-Toolkit/commit/0d214bb8870c29c0b688db4fda71ce8a64b4a46e\" rel=\"nofollow noreferrer\">https://github.com/Wikidata/Wikidata-Toolkit/commit/0d214bb8870c29c0b688db4fda71ce8a64b4a46e</a>\n<a href=\"https://github.com/Wikidata/Wikidata-Toolkit/issues/58\" rel=\"nofollow noreferrer\">https://github.com/Wikidata/Wikidata-Toolkit/issues/58</a>\n<a href=\"https://i.stack.imgur.com/po9q0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/po9q0.png\" alt=\"enter image description here\" /></a></p>\n<p>So I split the catch statement and now it also works for me:</p>\n<pre><code>} catch (DataException e1) {\n            throw new RuntimeException(e1);\n        }catch(JSONException e2){\n            throw new RuntimeException(e2);\n        }\n</code></pre>\n<p>Update</p>\n<p>In case it helps, here are the two inheritence trees from the two exception types:</p>\n<p><a href=\"https://i.stack.imgur.com/ToQl4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ToQl4.png\" alt=\"enter image description here\" /></a></p>\n<h2>Question</h2>\n<p>Why does splitting the catch statement solve the error?</p>\n<p>There's a similar question by MatKuhr <a href=\"https://github.com/Wikidata/Wikidata-Toolkit/issues/58#issuecomment-627280175\" rel=\"nofollow noreferrer\">here</a> ... but I don't understand the problem/solution yet.</p>\n"},{"tags":["java","aws-sdk","apache-beam","amazon-sqs"],"owner":{"user_id":21313440,"display_name":"Alon Harell"},"view_count":45,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1681114543,"question_id":75975401,"body":"<p>I have a data pipeline processor written in Java using Apache Beam 2.46, with AWS SDK v2.</p>\n<p>Part of the pipeline includes reading messages as a stream from AWS SQS queue, and then if processing of the message fails rewriting them to the queue.\nBeam uses the SqsUnboundedReader class to manage the stream-reading from SQS.</p>\n<p>Apparently, after reading a message from the queue, beam gives it a processing timeout of about 2 minutes (unconfigurable) and then deletes the message from the queue.</p>\n<p>My pipeline logic requires that I &quot;manually&quot; send the acknowledgements to SQS (meaning, manually delete the read message from the queue).\nIs it possible?</p>\n"},{"tags":["java","spring-boot","performance","logging","log4j2"],"comments":[{"owner":{"user_id":7928721,"display_name":"samabcde"},"edited":false,"comment_id":133998815,"body":"Are you able to override the <code>toString</code> method and add a break point to see why <code>toString</code> is called?"},{"owner":{"user_id":3764804,"display_name":"BullyWiiPlaza"},"edited":false,"comment_id":134002826,"body":"@samabcde: Yes, I overwrote it basically for every entity and when it&#39;s called, it&#39;s not from me code but from some framework code which I don&#39;t have any control over."},{"owner":{"user_id":7928721,"display_name":"samabcde"},"edited":false,"comment_id":134002946,"body":"So can you see which method is calling <code>toString</code> when you stop at the breakpoint?"},{"owner":{"user_id":3764804,"display_name":"BullyWiiPlaza"},"edited":false,"comment_id":134022338,"body":"@samabcde: It&#39;s called by invoking certain repository interface methods, e.g. ones that I defined myself. Since the code is generated by Spring Data JPA, I don&#39;t see any explicit calls to <code>toString()</code> but they happen anyway."},{"owner":{"user_id":11748454,"display_name":"Piotr P. Karwasz"},"edited":false,"comment_id":134041532,"body":"Can you add some examples of logging statements? My guess is that you activated some very verbose logger in your config (Hibernate statements?)."},{"owner":{"user_id":3764804,"display_name":"BullyWiiPlaza"},"edited":false,"comment_id":134135628,"body":"@PiotrP.Karwasz: My log statements do not log out any entities so I&#39;m not calling <code>toString()</code> implicitly either. Yes, I enabled Hibernate SQL logging via e.g. <code>logging.level.org.hibernate.SQL=DEBUG</code>, <code>logging.level.org.hibernate.type.descriptor.sql.BasicBinder=&zwnj;&#8203;TRACE</code>, <code>spring.jpa.show-sql=true</code>"},{"owner":{"user_id":11748454,"display_name":"Piotr P. Karwasz"},"edited":false,"comment_id":134135738,"body":"I would guess that Hibernate calls <code>toString()</code> on your entities. Can you add a stacktrace to the question?"},{"owner":{"user_id":3764804,"display_name":"BullyWiiPlaza"},"edited":false,"comment_id":134155383,"body":"@PiotrP.Karwasz: The stack trace is just a regular repository method which my code is calling such as <code>findFirstByGameModeOrderBySeasonIdDesc(gameMode)</code> but &quot;magically&quot; <code>toString()</code> is being called inside of it..."}],"answers":[{"owner":{"user_id":3764804,"display_name":"BullyWiiPlaza"},"up_vote_count":0,"is_accepted":true,"creation_date":1682026335,"answer_id":76068423,"body":"<p>Even though I wasn't able to figure out why <code>log4j2</code> is mysteriously calling my entity's <code>toString()</code> methods, severely degrading performance, I decided to use the default <code>Logback</code> logger and I ended up being quite happy with it, so I don't really need to use <code>log4j2</code> anymore. After all, <code>Logback</code> is also the default logger for <code>Spring Boot</code>. Sometimes it's better not to break a running setup.</p>\n"}],"owner":{"user_id":3764804,"display_name":"BullyWiiPlaza"},"view_count":73,"up_vote_count":2,"accepted_answer_id":76068423,"answer_count":1,"score":2,"creation_date":1681070464,"question_id":75972602,"body":"<p>I built a REST API with <code>Spring Boot</code> and I switched my logging framework to <code>log4j2</code> by adding an exclusion of the default logger in my <code>pom.xml</code>:</p>\n<pre><code>&lt;exclusion&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n&lt;/exclusion&gt;\n</code></pre>\n<p>As well as including <code>log4j2</code> instead:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-log4j2&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I'm experiencing insane slowdowns of my REST API. I realized that <code>log4j2</code> is calling the <code>toString()</code> methods of my <code>data JPA</code> entities seemingly &quot;out of nowhere&quot; (e.g. I didn't specifically write log statements to log them out). I suppose this causes massive overhead (by potentially also fetching more entities from the database).</p>\n<p>By reverting back to the default logger <code>Logback</code> the performance is &quot;normal&quot; again. <code>Logback</code> also does not call the <code>toString()</code> methods &quot;out of nowhere&quot;. Why is <code>log4j2</code> so inefficient here and can this behavior of calling my <code>toString()</code> methods &quot;out of nowhere&quot; be turned off?</p>\n"},{"tags":["java","regex","string"],"comments":[{"owner":{"user_id":1786065,"display_name":"Rogue"},"edited":false,"comment_id":133995241,"body":"Are you trying to extract known tokens from the string (e.g. replacing <code>&amp;someData</code> with the data referenced by <code>someData</code>)? If so, there are much better ways than a regex in my opinion. Otherwise, I&#39;m not following what truly determines what strings belong, and which don&#39;t."}],"answers":[{"owner":{"user_id":5424988,"display_name":"The fourth bird"},"up_vote_count":0,"is_accepted":false,"creation_date":1681128755,"answer_id":75977016,"body":"<p>You can use your pattern and remove all matches from the string. Then check if the string has less than 3 or more than 15 characters.</p>\n<pre><code>String[] strings = {&quot;&amp;aHi&quot;, &quot;Hi&quot;, &quot;Hi!&quot;};\n\nfor (String s : strings) {\n    int len = s.replaceAll(&quot;(?i)&amp;[0-9A-FK-ORX]&quot;,&quot;&quot;).length();\n    if (len &lt; 3 || len &gt; 15) {\n        System.out.println(&quot;VALID --&gt; &quot; + s + &quot;. (&quot; + len + &quot; characters)&quot;);\n    } else {\n        System.out.println(&quot;INVALID --&gt; &quot; + s + &quot; (&quot;+ len + &quot; characters)&quot;);\n    }\n}\n</code></pre>\n<p>Output</p>\n<pre><code>VALID --&gt; &amp;aHi. (2 characters)\nVALID --&gt; Hi. (2 characters)\nINVALID --&gt; Hi! (3 characters)\n</code></pre>\n"}],"owner":{"user_id":19392086,"display_name":"DaVaMu"},"view_count":57,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681063583,"question_id":75972119,"body":"<p>Example, I have 3 String:</p>\n<pre><code>String A = &quot;&amp;aHi&quot;; // true, 2 characters in total\nString B = &quot;Hi&quot;; // true, 2 characters in total\nString C = &quot;Hi!&quot;; // false, 3 characters in total\n</code></pre>\n<p>When the string contains &quot;&amp;&quot; followed by some character like &quot;[0-9A-FK-ORX]&quot; I want it to be excluded in the check if the string is less than 3 characters or greater than 15 characters.</p>\n<p>This is what I currently have:\nPattern:</p>\n<pre><code>&quot;^(?i)(?:(?!&amp;[0-9A-FK-ORX]).|^.{0,2}|^.{16,})$&quot;\n</code></pre>\n<p>but I can't get it to work, I'm trying to get it to ignore lower and upper case, I'm checking that it's less than 3 or greater than 15, but I can't get what I need.</p>\n"},{"tags":["java","udp","nio"],"comments":[{"owner":{"user_id":21324690,"display_name":"chunkynuggy"},"edited":false,"comment_id":134002635,"body":"I found the answer by chance here at this <a href=\"https://www.oreilly.com/library/view/java-nio/0596002882/ch04.html\" rel=\"nofollow noreferrer\">link</a>. There is also a provided sample code in the link. <i>&quot;A better approach is to use one selector for all selectable channels and delegate the servicing of ready channels to other threads. You have a single point to monitor channel readiness and a decoupled pool of worker threads to handle the incoming data. The thread pool size can be tuned (or tune itself, dynamically) according to deployment conditions. Management of selectable channels remains simple, and simple is good.&quot;</i>"},{"owner":{"user_id":21324690,"display_name":"chunkynuggy"},"edited":false,"comment_id":134045060,"body":"I did as the link stated, and removed the READ from the key&#39;s interestOps before passing it to a separate thread. I think this is not the case for DatagramChannel compared to a socketChannel, because it is causing some errors where it eventually stops running entirely and blocks"}],"owner":{"user_id":21324690,"display_name":"chunkynuggy"},"view_count":55,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680947434,"question_id":75964509,"body":"<p>I m reading how Selector can multiplex multiple channels and do I/O operations whenever the channels are ready to be processed. Many online tutorials/resources uses something similar where they sequentially read each key, then process it.</p>\n<pre><code>            Set&lt;SelectionKey&gt; selectedKeys = selector.selectedKeys();\n            Iterator&lt;SelectionKey&gt; iter = selectedKeys.iterator();\n            while (iter.hasNext()) {\n                SelectionKey key = iter.next();\n                if (key.isReadable()) {\n                    //processKey(key);\n                }\n                iter.remove();\n            }\n</code></pre>\n<p>I m thinking that while Key 1 is being processed, all the keys (the sockets it represents) will still receive more incoming packets</p>\n<pre><code>Key 1 : [packet] [packet] [packet] [packet]\n.\n.\n.\nKey N : [packet] [packet] [packet] [packet]\n</code></pre>\n<p>So, if all channels receive 1 packets while key 1 has just processed 1 packets in the same time, wouldnt some channels have lost packets?</p>\n<pre><code>Key 1 :  [packet] [packet] [packet] [newPacket] \n.\n.\n.\nKey N : [packet] [packet] [packet] [packet] [newPacket] \n</code></pre>\n<p>processing key 2</p>\n<pre><code>Key 1 : [packet] [packet] [packet] [newPacket] [newPacket] \n.\n.\n.\nKey N : [packet] [packet] [packet] [packet] [newPacket] [newPacket] \n</code></pre>\n<p>processing key 3</p>\n<pre><code>Key 1 : [packet] [packet] [packet] [newPacket] [newPacket] {packet lost socket receive buffer full}\n.\n.\n.\nKey N : [packet] [packet] [packet] [packet] [newPacket] [newPacket] {packet lost socket receive buffer full}\n</code></pre>\n<p>Should each key be passed to a queue (then some other thread can poll for it) so that all keys can be processed in a multithreaded manner? What is an &quot;optimal&quot; number of channels I can register to a selector?</p>\n"},{"tags":["java","video-streaming","netty"],"owner":{"user_id":12724727,"display_name":"njust"},"view_count":49,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680940545,"question_id":75963992,"body":"<p>I'm trying to do a live video stream using Netty TCP.\nBut I found only HTTP/WEB video streams on Netty, it's all too complicated and I can't figure out what exactly I need to do.</p>\n<p>My network has a packet system, and from what I understand, I have to send updated pixels of the previous frame in each packet. I've tried the Xuggler library but I haven't found any guides on how to do a live stream on it via Netty TCP.</p>\n<p>I've tried to make code that get the updated pixels out of the image but it uses too much CPU time and takes too long to execute per frame.</p>\n<p>My code (image resolution is 1920x1080 and it takes 20ms to execute)</p>\n<pre class=\"lang-java prettyprint-override\"><code>BufferedImage lastFrame, newFrame;\n...\n\nlong time = System.currentTimeMillis();\n\nint[][] updatedPixels = new int[newFrame.getHeight()][newFrame.getWidth()];\nint[] pixels = newFrame.getRGB(0, 0, newFrame.getWidth(), newFrame.getHeight(), null, 0, newFrame.getWidth());\nint index = 0, count = 0;\n\nfor (int i = 0; i &lt; newFrame.getHeight(); i++) {\n  for (int j = 0; j &lt; newFrame.getWidth(); j++) {\n    int rgb = pixels[index++];\n    if (rgb != lastFrame.getRGB(j, i)) {\n      updatedPixels[i][j] = rgb;\n      count++;\n    }\n  }\n}\n\nSystem.out.println(&quot;Total pixels changed: &quot; + count + &quot; | Exec time: &quot; + (System.currentTimeMillis() - time) + &quot;ms&quot;);\n</code></pre>\n<p>I need to optimize getting updated pixels from image or a library that encodes and decodes images like in my code.</p>\n<p>Something like the following (pseudocode):</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] changedPixels = VideoLibrary.encode(prevFrame, newFrame);\nBufferedImage image = VideoLibrary.decode(prevFrame, changedPixels)\n</code></pre>\n"},{"tags":["java","project-reactor","reactive"],"answers":[{"owner":{"user_id":7997517,"display_name":"ABHISHEK KUMAR"},"up_vote_count":0,"is_accepted":true,"creation_date":1681053972,"answer_id":75971362,"body":"<p>I guess that is not possible. Please note that any error in a reactive stream is considered a terminal event. So, when your flux returned a first error, it terminates without actually proceeding any further. <strong>DelayError</strong> will only wait for other publishers to terminate (with success or error).</p>\n<p>Also, note that if multiple publishers throw their individual exception, the reactor would throw special <strong>CompositeException</strong> which wraps the exceptions thrown by the individual publisher.</p>\n"}],"owner":{"user_id":2173468,"display_name":"Timothy"},"view_count":51,"up_vote_count":2,"accepted_answer_id":75971362,"answer_count":1,"score":2,"creation_date":1680929367,"question_id":75963361,"body":"<p>When using mergeDelayError of Reactor, if more than 1 error is being emitted, is there a way to get all of them instead of just the first error?</p>\n<pre><code>Flux.mergeDelayError(10,\n                     Flux.fromStream(Stream.of(1, 2, 3))\n                         .flatMap(i -&gt; Mono.error(new Exception(i.toString()))),\n                     Mono.just(1),\n                     Mono.just(2))\n    .doOnError(error -&gt; log.error(&quot;error, {}&quot;, error.getMessage()))\n    .collectList()\n    .flatMap(Mono::just) .block();\n</code></pre>\n<p>In the example above, it only prints <code>error 1</code> and exits without printing <code>error 2</code>, <code>error 3</code></p>\n"},{"tags":["java","flask","httpurlconnection","keep-alive","persistent-connection"],"comments":[{"owner":{"user_id":21473475,"display_name":"Arfur Narf"},"edited":false,"comment_id":133980137,"body":"It looks to me like your client code creates a new connection each time through the loop.  I&#39;d explore putting &#39;openConnection&#39; before the loop. That means you&#39;ll need a solution to finding end-of-response other than reading until the end.  Oh, and &#39;connection: keep-alive&#39; is not an HTTP/1.1 thing. The assumption is that it&#39;s kept open unless &#39;connection: close&#39;, i.e., the reverse of HTTP/1.0."},{"owner":{"user_id":21592144,"display_name":"capalloc"},"edited":false,"comment_id":133983179,"body":"@ArfurNarf I&#39;ve tried it and it sounds like a solution to mimic persistent unidirectional server-to-client communication (Flask waits for the entire message before entering the &#39;hello_world&#39; routine so only works for response side) but in my setup, I intend to also send multiple requests along with their responses. Does Java still send &#39;Connection: keep-alive&#39; for backward compatibility, even if its using HTTP/1.1?"},{"owner":{"user_id":21473475,"display_name":"Arfur Narf"},"edited":false,"comment_id":133984446,"body":"I don&#39;t follow what you mean.  But, to be clear, I have no trouble maintaining persistent connections to a Flask server.  In my case, the client code is also Python (using http.client)."},{"owner":{"user_id":21592144,"display_name":"capalloc"},"edited":false,"comment_id":133992846,"body":"@ArfurNarf Werkzeug dropped support for persistent connections in early 2022, which explains the issues I had because I have been using the development WSGI server. Maybe you were using an earlier version of Werkzeug or using a deployment WSGI server. See my answer below."},{"owner":{"user_id":21473475,"display_name":"Arfur Narf"},"edited":false,"comment_id":133993207,"body":"Hmm, I suppose I never noticed that change in werkzeug; but I no longer use it. Thanks."}],"answers":[{"owner":{"user_id":21592144,"display_name":"capalloc"},"up_vote_count":0,"is_accepted":true,"creation_date":1681046045,"answer_id":75970736,"body":"<p>I had been trying to achieve persistent connection using the WSGI server Flask comes packaged with called Werkzeug. When I switched to a deployment WSGI server, in my case Waitress, <code>keep-alive</code> started to work and TCP connections stopped being dropped. The issue was being caused by a change in Werkzeug implementation. Their change log for <code>Version 2.1.2</code> released in 2022-04-28 states:</p>\n<blockquote>\n<p>Disable keep-alive connections in the development server, which are not supported sufficiently by Python’s <code>http.server</code>. <a href=\"https://github.com/pallets/werkzeug/issues/2397\" rel=\"nofollow noreferrer\">#2397</a></p>\n</blockquote>\n<p>Werkzeug team removed the persistent connection support due to the shortcomings of <code>http.server</code> which it extends. While it is understandable that the lack of <code>keep-alive</code> function may not be essential in a development environment, it is frustrating that there is very little to no communication about this in the Internet.</p>\n"}],"owner":{"user_id":21592144,"display_name":"capalloc"},"view_count":80,"up_vote_count":2,"accepted_answer_id":75970736,"answer_count":1,"score":2,"creation_date":1680907836,"question_id":75962438,"body":"<p>I have a minor project which will involve repeated HTTPS communication between a Java application and a Flask web server such that keeping the TCP connection alive is important. In order to test and understand the capabilities of these technologies, I have set up a simple GET request generator which sends multiple GET requests with time invertals to my simple Flask web server application and return a response. In such a setup, I would expect the TCP connection to be cached but I think my Flask application disconnects the connection after each response. Beware that I am quite rusty with Java and it is my first time getting acquainted with Flask.</p>\n<p>My Java GET request generator is like below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.deu;\n\nimport java.io.BufferedReader;\nimport java.io.IOException;\nimport java.io.InputStreamReader;\nimport java.net.HttpURLConnection;\nimport java.net.URL;\n\npublic class Main {\n\n    public static void main(String[] args) {\n        try {\n            sendHttpRequests(&quot;http://127.0.0.1:5000&quot;, 1000, 5);\n        } catch (IOException | InterruptedException e) {\n            e.printStackTrace();\n        }\n    }\n\n    public static void sendHttpRequests(String url, int interval, int count) throws IOException, InterruptedException {\n        URL hostURL = new URL(url);\n\n        for (int i = 0; i &lt; count; i++) {\n            HttpURLConnection httpConn = (HttpURLConnection) hostURL.openConnection();\n            httpConn.setRequestMethod(&quot;GET&quot;);\n\n            BufferedReader reader = new BufferedReader(new InputStreamReader(httpConn.getInputStream()));\n            StringBuilder response = new StringBuilder();\n            String line;\n\n            while ((line = reader.readLine()) != null)\n                response.append(line);\n\n            System.out.println(&quot;Response to i=&quot;+i+&quot; &quot;+response.toString());\n            reader.close();\n\n            Thread.sleep(interval);\n        }\n    }\n\n}\n\n</code></pre>\n<p>My Flask web server application is like below:</p>\n<pre class=\"lang-python prettyprint-override\"><code>import flask\nfrom flask import Flask, request\nfrom werkzeug.serving import WSGIRequestHandler\n\napp = Flask(__name__)\n\n\n@app.route('/', methods=['GET'])\ndef hello_world():\n    resp = flask.Response(&quot;Hello World!&quot;)\n    print(request.headers)\n    print(resp.headers)\n\n    return resp\n\n\nif __name__ == '__main__':\n    WSGIRequestHandler.protocol_version = &quot;HTTP/1.1&quot;\n    app.run()\n\n</code></pre>\n<p>After the Java application terminates, the outputs I get for Java and Flask applications respectively are:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Response to i=0 Hello World!\nResponse to i=1 Hello World!\nResponse to i=2 Hello World!\nResponse to i=3 Hello World!\nResponse to i=4 Hello World!\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>FLASK_APP = app.py\nFLASK_ENV = development\nFLASK_DEBUG = 0\nIn folder B:/Development/Projects/Python/ProjectABC\nB:\\Development\\Projects\\Python\\ProjectABC\\venv\\Scripts\\python.exe -m flask run\n * Serving Flask app 'app.py'\n * Debug mode: off\nWARNING: This is a development server. Do not use it in a production deployment. Use a production WSGI server instead.\n * Running on http://127.0.0.1:5000\nPress CTRL+C to quit\nUser-Agent: Java/17.0.1\nHost: 127.0.0.1:5000\nAccept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2\nConnection: keep-alive\n\n\nContent-Type: text/html; charset=utf-8\nContent-Length: 12\n\n\n127.0.0.1 - - [08/Apr/2023 01:26:28] &quot;GET / HTTP/1.1&quot; 200 -\n127.0.0.1 - - [08/Apr/2023 01:26:29] &quot;GET / HTTP/1.1&quot; 200 -\nUser-Agent: Java/17.0.1\nHost: 127.0.0.1:5000\nAccept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2\nConnection: keep-alive\n\n\nContent-Type: text/html; charset=utf-8\nContent-Length: 12\n\n\nUser-Agent: Java/17.0.1\nHost: 127.0.0.1:5000\nAccept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2\nConnection: keep-alive\n\n\nContent-Type: text/html; charset=utf-8\nContent-Length: 12\n\n\n127.0.0.1 - - [08/Apr/2023 01:26:30] &quot;GET / HTTP/1.1&quot; 200 -\nUser-Agent: Java/17.0.1\nHost: 127.0.0.1:5000\nAccept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2\nConnection: keep-alive\n\n\nContent-Type: text/html; charset=utf-8\nContent-Length: 12\n\n\n127.0.0.1 - - [08/Apr/2023 01:26:31] &quot;GET / HTTP/1.1&quot; 200 -\nUser-Agent: Java/17.0.1\nHost: 127.0.0.1:5000\nAccept: text/html, image/gif, image/jpeg, *; q=.2, */*; q=.2\nConnection: keep-alive\n\n\nContent-Type: text/html; charset=utf-8\nContent-Length: 12\n\n\n127.0.0.1 - - [08/Apr/2023 01:26:32] &quot;GET / HTTP/1.1&quot; 200 -\n\n</code></pre>\n<p>As can be seen, the requests receive responses as expected and even the request headers Flask application received shows the presence of <code>Connection: keep-alive</code>. But the reason I think a new TCP connection is created each time are that the response headers do not contain <code>Connection: keep-alive</code> and the output of <code>netstat</code> cmd command:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Active Connections\n\n  Proto  Local Address          Foreign Address        State\n  TCP    127.0.0.1:5000         DESKTOP-XXXXXXX:52821  TIME_WAIT\n  TCP    127.0.0.1:5000         DESKTOP-XXXXXXX:52823  TIME_WAIT\n  TCP    127.0.0.1:5000         DESKTOP-XXXXXXX:52824  TIME_WAIT\n  TCP    127.0.0.1:5000         DESKTOP-XXXXXXX:52830  TIME_WAIT\n  TCP    127.0.0.1:5000         DESKTOP-XXXXXXX:52831  TIME_WAIT\n</code></pre>\n<p>If my understanding of the output is correct (please correct me if I am wrong), 5 different TCP connections were made and now the OS is waiting to clear them, indicating <code>keep-alive</code> has failed. I searched other questions for answers and tried putting <code>WSGIRequestHandler.protocol_version = &quot;HTTP/1.1&quot;</code> but to no avail.</p>\n<p>Note: I am trying to achieve persistent connection using HTTP first, after which I will apply it to HTTPS.</p>\n"},{"tags":["java","vert.x","vertx-verticle","vertx-eventbus"],"answers":[{"owner":{"user_id":4154302,"display_name":"Asad Awadia"},"up_vote_count":0,"is_accepted":false,"creation_date":1681176874,"answer_id":75981820,"body":"<blockquote>\n<p>Vert.x will deliver messages to any particular handler in the same order they were sent from any particular sender.</p>\n</blockquote>\n<p>This is more than clear. If you send A,B,C then vertx will send them out in that order since it is purely passing it forward.</p>\n<blockquote>\n<p>What is meant by a handler or sender: verticle, context, particular callback or something else?</p>\n</blockquote>\n<p>Handler is the receiver which will get the message. Sender is the sender who is sending the message.</p>\n<p>If the sender sent A, B, C then the handler will receive the messages in the same order  i.e. A,B, C - since vertx is purely forwarding the message</p>\n<blockquote>\n<p>Will all messages from sender verticle to subscription verticle be delivered in the same order no matter how many addresses were used for communication?</p>\n</blockquote>\n<p>Yes - but do not misunderstand this as that ordering will be maintained across addresses - in the scope of a single address the messages will be in the same order</p>\n"}],"owner":{"user_id":7643517,"display_name":"Nolequen"},"view_count":37,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680873232,"question_id":75958756,"body":"<p><a href=\"https://vertx.io/docs/vertx-core/java/#_message_ordering\" rel=\"nofollow noreferrer\">Documention says</a>:</p>\n<blockquote>\n<p>Vert.x will deliver messages to any particular handler in the same order they were sent from any particular sender.</p>\n</blockquote>\n<p>What is meant by a handler or sender: verticle, context, particular callback or something else?</p>\n<p>Will all messages from sender verticle to subscription verticle be delivered in the same order no matter how many addresses were used for communication?</p>\n"},{"tags":["java","android","android-studio"],"owner":{"user_id":21581084,"display_name":"Pooja Wagh"},"view_count":13,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680784593,"question_id":75949597,"body":"<p>how to find out when polygon overlapping each other on google map using java android studio</p>\n<p>im searching on google no of time but i didn't found perfect ans</p>\n"},{"tags":["java","spring","kotlin","transactions"],"comments":[{"owner":{"user_id":11622006,"display_name":"Slongtong"},"edited":false,"comment_id":133984888,"body":"Read that article, <a href=\"https://reflectoring.io/spring-transactions-and-exceptions/\" rel=\"nofollow noreferrer\">reflectoring.io/spring-transactions-and-exceptions</a> . Are you interested in &quot;noRollbackFor &quot; instead of &quot;rollbackFor&quot; ? ( You want to prevent rollback , but use &quot;rollbackFor&quot; (that annotation doing opposite thing) , is that ok?)"},{"owner":{"user_id":1020541,"display_name":"Kotodid"},"edited":false,"comment_id":133993619,"body":"Good article, but it confirms my misunderstanding. In my example I want to fully rollback <b>add_agent</b> (it contains multiple inserts) at any exception, so I add <code>rollbackFor = [Throwable::class]</code>. But I want to suppress this exception and commit some other information in add_payment.  If I add noRollbackFor, this may cause partially commit of <b>add_agent</b> and it breaks transactionality meaning."},{"owner":{"user_id":11622006,"display_name":"Slongtong"},"edited":false,"comment_id":133995848,"body":"I&#39;ll upvote your question (dont know the solution, but interested in it)"}],"answers":[{"owner":{"user_id":1020541,"display_name":"Kotodid"},"up_vote_count":0,"is_accepted":false,"creation_date":1683196748,"answer_id":76172267,"body":"<p>Seems I find the solution: <code>isGlobalRollbackOnParticipationFailure = false</code></p>\n<p>Disabling this global parameter makes transaction behaviour as I expect.\nAccoing to it's documentation disabling it is not very recommended, but why not, if it works?\nI don't find a lot information about best practices, so I'll give this solution a try:</p>\n<pre><code>@SpringBootApplication\nclass MyCustomApplication(\n    private val applicationContext: ApplicationContext,\n) {\n    init {\n        val trm = applicationContext.getBean(&quot;transactionManager&quot;, AbstractPlatformTransactionManager::class.java)\n        trm.isGlobalRollbackOnParticipationFailure = false\n    }\n}\n</code></pre>\n<p>Maybe anyone find this helpful or anyone tell me why it is wrong.</p>\n"}],"owner":{"user_id":1020541,"display_name":"Kotodid"},"view_count":61,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680775682,"question_id":75948318,"body":"<p><br />\nI really struggle with spring Transactional and need your help.<br />\nI used to be Oracle Developer so I have some understanding and habits with transaction processing.</p>\n<p>My Spring application written on kotlin and use PostgreSQL database, but I think it does not matter at all.<br />\nAnd spring Transactional annotation does not lay on them.</p>\n<p>Could you please explain how to realize this scenario and not fail with <strong>UnexpectedRollbackException</strong>.<br />\nI try to explain my question with pseudo code based on pl/sql</p>\n<pre><code>-- DocumentService\nbegin\n  begin\n    savepoint sav_agent;\n    l_agent:= add_agent(); -- method in AgentService\n  exception when others then\n    rollback to savepoint sav_agent;\n    l_agent := DEFAULT_AGENT;\n  end;\n  \n  add_payment(l_agent); -- method in PaymentService\nend;\n</code></pre>\n<p>a) I want to add agent, if possible and always add payment.<br />\nb) But if add payment fails, I do not want to add agent.</p>\n<p>Logically, I add Transactional on each of two methods. Common method in <code>DocumentService</code> is Transactional too.<br />\nEach methods in <code>AgentService</code> and <code>PaymentService</code> do some checks and can throw any exception.<br />\nSo I use <code>rollbackFor = [Throwable::class]</code> for any Transactional.</p>\n<p>But if add_agent fails and add_payment - does not, I catch UnexpectedRollbackException.<br />\nI understand this exception and what it means, but I don't understand why anyone can need such behaviour...<br />\nIf I add <code>propagation = Propagation.REQUIRES_NEW</code> on <code>AgentService</code> - there is no UnexpectedRollbackException, but AgentService commits anyway, so my &quot;b&quot; is not realized.\nSecond problem is <code>REQUIRES_NEW</code>-Transactional uses one more connection from my pool.\nThird problem of <code>REQUIRES_NEW</code> - if I do some insert before add_agent - I cannot use it before add_agent, because it is another transaction and even connect.</p>\n<p>I found this article <a href=\"https://dzone.com/articles/transaction-savepoints-in-spring-jdbc\" rel=\"nofollow noreferrer\">https://dzone.com/articles/transaction-savepoints-in-spring-jdbc</a> about savepoints.<br />\nBut <code>JdbcTemplate</code> and <code>TransactionTemplate</code> not work when I using Transactional.<br />\nSo I can realize fully manual transaction processing, but I want somethig more basic and convinient.</p>\n<p>Third solution  <code>@Transactional(propagation = Propagation.NESTED)</code> fails with\n<code>org.springframework.transaction.NestedTransactionNotSupportedException: JpaDialect does not support savepoints - check your JPA provider's capabilities</code>\nin Hybernate.</p>\n<p>I read spring docs and a lot of articles and Stackoverflow answers,but I really don't have understanding.<br />\nPlease help me understand and solve my problem (I think this is not problem but basic functionality and I miss something extremly simple...)</p>\n"},{"tags":["java","mysql","ssl","jdbc","ssl-certificate"],"comments":[{"owner":{"user_id":5354987,"display_name":"Samuel Marchant"},"edited":false,"comment_id":133952402,"body":"That does not quite make sense, the crt is usually configured into the server with the site, so do you have a server on that domain?, or is it a personal certificate to send from a client program (very unlikely). A crt must be created (TLS nowadays) with the domain level it is sent from embedded in it, the crt key pair is then placed into that domain and registered into its configuration file."},{"owner":{"user_id":5354987,"display_name":"Samuel Marchant"},"edited":false,"comment_id":133952535,"body":"Actually, anyone would be a piece lost to know it, it is usually a .pem    Here&#39;s the best I could find at a glance after sifting MySQL docs.       <a href=\"https://dev.to/developertharun/easiest-way-to-setup-mysqlmariadb-with-tlsssl-in-10-minutes-v105-any-os-ubuntu-focal-developer-tharun-4okc\" rel=\"nofollow noreferrer\">dev.to/developertharun/&hellip;</a>"}],"owner":{"user_id":642706,"display_name":"Basil Bourque"},"view_count":25,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680738755,"question_id":75944805,"body":"<p>I am trying to build a little demo app in Java 20 using JDBC 4.2+ by configuring a <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.sql/javax/sql/DataSource.html\" rel=\"nofollow noreferrer\">DataSource</a> object via the <code>com.mysql.cj.jdbc.MysqlDataSource</code> class. Developing on macOS Ventura, with IntelliJ 2023.1.</p>\n<p>I created a MySQL instance on the <a href=\"https://www.digitalocean.com/products/managed-databases\" rel=\"nofollow noreferrer\">Digital Ocean managed database</a> service.</p>\n<p>The Digital Ocean configuration page indicates that <a href=\"https://en.wikipedia.org/wiki/Secure_Sockets_Layer\" rel=\"nofollow noreferrer\">SSL</a> (<a href=\"https://en.wikipedia.org/wiki/Transport_Layer_Security\" rel=\"nofollow noreferrer\">TLS</a>, actually, I presume) is required in connections to the database server. That same config page offers a download for a <code>ca-certificate.crt</code> file. I did download that file.</p>\n<p>👉 What do I do with this downloaded <code>ca-certificate.crt</code> file?</p>\n<p>The <a href=\"https://docs.digitalocean.com/products/databases/mysql/how-to/connect/\" rel=\"nofollow noreferrer\"><em>How to Connect to MySQL Database Clusters</em></a> page at Digital Ocean tells me to download the file, but does not say what to do with it.</p>\n<p>The <a href=\"https://dev.mysql.com/doc/refman/8.0/en/using-encrypted-connections.html\" rel=\"nofollow noreferrer\"><em>Configuring MySQL to Use Encrypted Connections</em></a> page on the MySQL site says a bunch of things, but does not say what to do with this file.</p>\n<hr />\n<pre class=\"lang-java prettyprint-override\"><code>private DataSource fetchDataSource ( )\n{\n    MysqlDataSource ds = null;\n    try\n    {\n        ds = new MysqlDataSource();\n\n        // Server\n        ds.setURL( &quot;jdbc:mysql://db-mysql-nyc1-whatever.db.ondigitalocean.com:25000/defaultdb&quot; );\n        ds.setRequireSSL( true );\n\n        // User\n        ds.setUser( &quot;doadmin&quot; );\n        ds.setPassword( &quot;tiger&quot; );\n\n        return ds;  // Happy path.\n    }\n    catch ( SQLException e )\n    {\n        e.printStackTrace();\n    }\n    throw new IllegalStateException( &quot;Failed to establish a JDBC DataSource. Msg # 3dfbbc6a-41d4-455d-9b6c-addf433522e5.&quot; );\n}\n</code></pre>\n"},{"tags":["java","html","ajax","web-scraping","htmlunit"],"comments":[{"owner":{"user_id":4804091,"display_name":"RBRi"},"edited":false,"comment_id":133953583,"body":"Had a first look at your problem and it looks like the source here is an error during the execution of the javascript that build up the page. Can you please open an issue athttps://github.com/HtmlUnit/htmlunit/issues. Will try to figure out if i can fix this in HtmlUnit."},{"owner":{"user_id":16325013,"display_name":"Abhay Johri"},"edited":false,"comment_id":133954557,"body":"So, does it mean that the complete source code is loading up dynamically, by executing JavaScript scripts and there is no AJAX concept being used up here?"},{"owner":{"user_id":4804091,"display_name":"RBRi"},"edited":false,"comment_id":133960469,"body":"Not sure - looks more like a failing cloudflare protection. But i only did a quick look."}],"answers":[{"owner":{"user_id":21576366,"display_name":"Tanukinewgameplus"},"up_vote_count":0,"is_accepted":false,"creation_date":1680727530,"answer_id":75943825,"body":"<p>So I hear you're trying to scrape data from Udemy's search results page for Selenium courses using HTMLUnit, but you're having a hard time finding the right info. It could be because the data is loaded dynamically through AJAX calls, so you need to find the URL that's responsible for making these calls.</p>\n<p>Here's what you can try: use the developer tools in your browser to inspect the network requests when you perform a search on Udemy. Look for requests that contain the data you need and check out the URL to see if you can tweak any parameters to extract more data.</p>\n<p>Once you've found the AJAX source URL, you can simulate the AJAX request using HTMLUnit and extract the desired information from the response.</p>\n<p>If you're still stuck, it could be that the data is being loaded using a different mechanism. In that case, you might need to explore other scraping tools or techniques to get the data you need.</p>\n"}],"owner":{"user_id":16325013,"display_name":"Abhay Johri"},"view_count":55,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680727132,"question_id":75943779,"body":"<p>I am trying to scrap the content (Example Thumbnail picture of a course, price etc.) from an educative website - Udemy, by searching in a general URL string (given below). The source code of the site has a division  with class name - &quot;ud-app-loader ud-component--search--search&quot;. Snippet of it is provided below.</p>\n<p>Website to scrap data from (search query is Selenium): <a href=\"https://www.udemy.com/courses/search/?lang=en&amp;price=price-paid&amp;q=selenium&amp;ratings=4.5&amp;sort=relevance&amp;sort=relevance&amp;src=ukw\" rel=\"nofollow noreferrer\">Udemy search for selenium courses available</a></p>\n<pre><code>&lt;div class=&quot;ud-main-content&quot;&gt;\n&lt;div class=&quot;ud-app-loader ud-component--search--search&quot; data-module-id=&quot;search&quot; data-module-args=&quot;{&amp;quot;subsCollectionIds&amp;quot;:null,&amp;quot;showSRPRefundNotice&amp;quot;:false,&amp;quot;showUserEnrollmentProgress&amp;quot;:false,&amp;quot;showCodingExerciseCount&amp;quot;:false,&amp;quot;enableLabsInPersonalPlan&amp;quot;:false,&amp;quot;enableLectureBottomDrawerOnSRP&amp;quot;:false,&amp;quot;showCodingExercisesBadge&amp;quot;:false,&amp;quot;enableLectureDiscoveryUnitInUb&amp;quot;:false,&amp;quot;disableRelatedTopicsOnSRP&amp;quot;:false,&amp;quot;enableActiveLearningElementIcons&amp;quot;:false}&quot;&gt;&lt;/div&gt;\n&lt;/div&gt;\n</code></pre>\n<p>But the same &lt;div class=&quot;ud-app-loader ud-component--search--search&quot;*&gt; looks different in Inspect window. It has multiple sub-divisions beneath it (for each course there is\n<code>&lt;div-class=&quot;popper-module--popper--2BpLn&quot;&gt;</code> associated.</p>\n<p>Now, since I am not so familiar with Front-end technologies, as of now, but I am assuming (after reading a similar article on stackoverflow, scraping &quot;data-module-group&quot; with BeautifulSoup) that data is being fetched via AJAX calls. But I cannot even find AJAX URLs in the page.</p>\n<p>Similar question: <a href=\"https://stackoverflow.com/questions/72307455/can-i-extract-the-html-contents-of-div-that-is-in-a-data-module-group\">Extract details from &lt;div data-module-group=&gt; using BeautifulSoup</a></p>\n<p>Initially I was planning to use Jsoup for scraping the content, but later explored that Jsoup cannot get such asynchronous calls. It is just an HTML parser, so I am using HTMLUnit now.</p>\n<p>My code implementation won't help much here, but still adding it too, for reference.</p>\n<pre><code>public class Scraper {\n    public static void getData(String courseName,String sortType) throws Exception {\n        String URL=&quot;https://www.udemy.com/courses/search/?lang=en&amp;price=price-paid&amp;q=&quot;+courseName+\n                &quot;&amp;ratings=4.5&amp;sort=relevance&amp;sort=&quot;+sortType+&quot;&amp;src=ukw&quot;;\n        \n        WebClient client=new WebClient(BrowserVersion.FIREFOX);\n        client.getOptions().setJavaScriptEnabled(true);\n        client.getOptions().setCssEnabled(true);\n        client.getOptions().setThrowExceptionOnScriptError(false);\n        client.setAjaxController(new NicelyResynchronizingAjaxController());\n\n\n        HtmlPage page=client.getPage(URL);\n        client.waitForBackgroundJavaScript(50000);\n        System.out.println(page.asXml());\n    }\n}\n</code></pre>\n<p>I have printed the page and not filtered the element, with pre-defined methods, in above code, as I can do it later. My priority is to get the desired HTML page first.</p>\n<p>My doubts are:</p>\n<ol>\n<li>If its an AJAX call to an AJAX source URL, then where/how can I find that URL in the page. What should be next steps to get sub-divisions of &lt;div-class=&quot;ud-app-loader&quot;</li>\n<li>If not an AJAX, then what is it actually and how can I proceed to extract the data from this data module? If not HTMLUnit, but some other tool then also its fine.</li>\n</ol>\n<p>Would be glad if anyone can help or even direct me to the way of getting solution.</p>\n<p>-Abhay.</p>\n"},{"tags":["java","spring","swagger","swagger-3.0","wordnik"],"owner":{"user_id":21572636,"display_name":"RoboRed"},"view_count":22,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680694351,"question_id":75938889,"body":"<p>Working on some legacy code. So I'm trying to upgrade from wordnik libary to swagger v3.</p>\n\n<pre><code>&lt;!-- Swagger writers --&gt;\n&lt;bean id=&quot;resourceWriter&quot; class=&quot;com.wordnik.swagger.jaxrs.listing.ResourceListingProvider&quot;/&gt;\n&lt;bean id=&quot;apiWriter&quot; class=&quot;com.wordnik.swagger.jaxrs.listing.ApiDeclarationProvider&quot;/&gt;\n\n&lt;jaxrs:server address=&quot;/swagger&quot; id=&quot;swagger&quot;&gt;\n    &lt;jaxrs:serviceBeans&gt;\n        &lt;ref bean=&quot;swaggerResourceJSON&quot;/&gt;\n    &lt;/jaxrs:serviceBeans&gt;\n    &lt;jaxrs:providers&gt;\n        &lt;ref bean=&quot;resourceWriter&quot;/&gt;\n        &lt;ref bean=&quot;apiWriter&quot;/&gt;\n    &lt;/jaxrs:providers&gt;\n&lt;/jaxrs:server&gt;\n\n&lt;bean id=&quot;swaggerConfig&quot; class=&quot;com.wordnik.swagger.jaxrs.config.BeanConfig&quot;&gt;\n    &lt;property name=&quot;resourcePackage&quot; value=&quot;com.foo.fooo&quot;/&gt;\n    &lt;property name=&quot;basePath&quot; value=&quot;/foo/V3/&quot;/&gt;\n    &lt;property name=&quot;title&quot; value=&quot;Foo service integration&quot;/&gt;\n    &lt;property name=&quot;scan&quot; value=&quot;true&quot;/&gt;\n&lt;/bean&gt;\n</code></pre>\n<p>So setup for looks something like this, in XML file.\nMy question, what alternatives for &quot;resourceWriter&quot;, &quot;apiWriter&quot; and &quot;swaggerConfig&quot; in this case.\nBecause it is old code it was not done in Spring boot, but regular Spring.</p>\n<p>Don't seems to find alternatives in v3 of Swagger for this classes.</p>\n<p>Sorry for my bad english</p>\n<p>Upgrade Swagger version</p>\n"},{"tags":["java","selenium-webdriver","testing","electron"],"owner":{"user_id":10379923,"display_name":"FearghalQA"},"view_count":28,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680689289,"question_id":75938146,"body":"<p>I'm am testing an electron app using selenium and suddenly getting this error after my electron app version changed when I try to launch my tests</p>\n<blockquote>\n<p>org.openqa.selenium.SessionNotCreatedException: Could not start a new &gt;session. Possible causes are invalid address of the remote server or &gt;browser start-up failure.</p>\n</blockquote>\n<p>I'm using:</p>\n<ul>\n<li>electron version 4.2.12</li>\n<li>chromedriver 2.42 (Ive tried 2.40 - 2.43)</li>\n<li>Selenium 4.0</li>\n</ul>\n<p>And my setup is as follows:</p>\n<pre><code>String projectLocation = System.getProperty(&quot;user.dir&quot;)                 \nSystem.setProperty(&quot;webdriver.chrome.driver&quot;, projectLocation + &quot;/chromedriver.exe&quot;);\n        \nChromeOptions options = new ChromeOptions();\noptions.addArguments(&quot;--no-sandbox&quot;); // Bypass OS security model\noptions.addArguments(&quot;start-maximized&quot;); // open Browser in maximized mode\noptions.addArguments(&quot;disable-infobars&quot;); // disabling infobars\noptions.addArguments(&quot;--disable-extensions&quot;); // disabling extensions\noptions.addArguments(&quot;--disable-gpu&quot;); // applicable to windows os only\noptions.addArguments(&quot;--disable-dev-shm-usage&quot;); // overcome limited resource \nproblems\noptions.addArguments(&quot;--remote-allow-origins=*&quot;);\noptions.setBinary(&quot;C:/Users/Public/ElectronApp.exe&quot;);\nbrowser = new ChromeDriver(options);\npageConfig = new PageConfig(browser);\n</code></pre>\n"},{"tags":["java","spring","postgresql","docker","docker-compose"],"comments":[{"owner":{"user_id":7090837,"display_name":"Yeras_QazaQ"},"edited":false,"comment_id":133935603,"body":"What is DB on url section? Is it address of host?"},{"owner":{"user_id":15449203,"display_name":"Johni"},"edited":false,"comment_id":133935964,"body":"Yes it&#39;s the database host.   It&#39;s the db service in docker-compose, from my understanding, the name of services can be used as host inside the docker network. Seeing as both of my services in the same network, it makes sense for me to use the name as host"},{"owner":{"user_id":7899567,"display_name":"Anton Tokmakov"},"edited":false,"comment_id":133936875,"body":"Maybe try to surround your url with quotes"},{"owner":{"user_id":7064617,"display_name":"JCompetence"},"edited":false,"comment_id":133937313,"body":"My recommendation is to remove the network bridge, and to try basic first before introducing properties <a href=\"https://www.baeldung.com/spring-boot-postgresql-docker\" rel=\"nofollow noreferrer\">baeldung.com/spring-boot-postgresql-docker</a>"},{"owner":{"user_id":7404894,"display_name":"Matthieu Lambert"},"edited":false,"comment_id":133945475,"body":"Remove the bridge, if the error is still present, send the result of <code>docker-compose ps</code>"}],"answers":[{"owner":{"user_id":9164010,"display_name":"ErikMD"},"up_vote_count":0,"is_accepted":false,"creation_date":1680729533,"answer_id":75944050,"body":"<h2>Side remark</h2>\n<blockquote>\n<p>(…) this docker-compose meant for production (…)</p>\n</blockquote>\n<p>Beware, the lines</p>\n<pre><code>    ports:\n      - ${DATABASE_PORT}:5432\n</code></pre>\n<p>are risky because it means the database will be reachable directly from the host.</p>\n<p>This is unnecessary for the <code>api</code> service to reach the <code>db</code> service.</p>\n<p>So, just remove this property if the configuration is intended for prod,\nand add the following property in both services:</p>\n<pre><code>    networks:\n      - app-network\n</code></pre>\n<h2>Suggestion for the main issue</h2>\n<p>It is difficult to suggest a direct fix for your issue because some info is lacking <em>and</em> the error looks fishy (it says <em>must start with 'jdbc'</em> while it already starts with 'jdbc').</p>\n<p>So, just let me suggest an alternative, simpler design:</p>\n<ol>\n<li>Use less environment variables to specify the database URL and <strong>don't include the Java-specific <code>jdbc:</code> prefix.</strong></li>\n<li>Create a <code>DataSource</code> class (→ rely on regular Java programming instead of a mere <code>application.properties</code> file), thus following some idea from <a href=\"https://www.baeldung.com/spring-boot-configure-data-source-programmatic#configuring-a-datasource-bean\" rel=\"nofollow noreferrer\">this Baeldung tutorial</a>.</li>\n<li>And replace your <code>SPRING_PROFILES_ACTIVE=&quot;prod&quot; … docker-compose -f docker-compose.yml up -d</code> code with a simpler CLI command, with fewer variables and using <code>.env</code> files if need be.</li>\n</ol>\n<p>Here is a complete setup example (under MIT license):</p>\n<h3>Step 1</h3>\n<blockquote>\n<p>docker-compose.yml</p>\n</blockquote>\n<pre class=\"lang-yaml prettyprint-override\"><code>services:\n  db:\n    image: 'postgres:13'\n    environment:\n      POSTGRES_DB: ${DATABASE_NAME}\n      POSTGRES_USER: ${DATABASE_USER}\n      POSTGRES_PASSWORD: ${DATABASE_PASSWORD}\n    networks:\n      - app-network\n    volumes:\n      - app-db:/var/lib/postgresql/data\n\n  api:\n    image: ghcr.io/mycoolproject/apiproject:latest\n    ports:\n      - '8080:8080'\n    environment:\n      DATABASE_NO_SSL: &quot;true&quot;\n      DATABASE_URL: ${DATABASE_POSTGRES_URL}\n    networks:\n      - app-network\n    depends_on:\n      - db\nnetworks:\n  app-network:\n    driver: bridge\nvolumes:\n  app-db:\n    driver: local\n</code></pre>\n<blockquote>\n<p>.env (containing sensitive values)</p>\n</blockquote>\n<pre class=\"lang-yaml prettyprint-override\"><code># If you edit DATABASE_NAME or USER or PASSWORD, also edit DATABASE_POSTGRES_URL.\nDATABASE_NAME = &quot;mydb&quot;\nDATABASE_USER = &quot;admin&quot;\nDATABASE_PASSWORD = &quot;admin123&quot;\nDATABASE_POSTGRES_URL = &quot;postgres://admin:admin123@db:5432/mydb&quot;\n# Here: db is the docker-compose service identifier &amp; 5432 should always be 5432.\n</code></pre>\n<blockquote>\n<p>.gitignore</p>\n</blockquote>\n<pre><code>.env\n</code></pre>\n<h3>Step 2</h3>\n<blockquote>\n<p>DataConfig.java</p>\n</blockquote>\n<pre class=\"lang-java prettyprint-override\"><code>package project.app;\n\nimport org.springframework.boot.autoconfigure.jdbc.DataSourceBuilder;\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\n\nimport javax.sql.DataSource;\nimport java.net.URI;\nimport java.net.URISyntaxException;\n\n@Configuration\npublic class DataConfig {\n\n    @Bean\n    public DataSource dataSource() throws URISyntaxException {\n        String DBURL = System.getenv(&quot;DATABASE_URL&quot;);\n        String NOSSL = System.getenv(&quot;DATABASE_NO_SSL&quot;);\n        if (DBURL != null &amp;&amp; DBURL.length() &gt; 0) {\n            URI dbUri = new URI(DBURL);\n            String username = dbUri.getUserInfo().split(&quot;:&quot;)[0];\n            String password = dbUri.getUserInfo().split(&quot;:&quot;)[1];\n            String jdbcUrl = &quot;jdbc:postgresql://&quot; + dbUri.getHost() + ':' + dbUri.getPort() + dbUri.getPath()\n                    + (&quot;true&quot;.equals(NOSSL) ? &quot;&quot; : &quot;?sslmode=require&quot;);\n            System.err.println(&quot;*** DataConfig: jdbc:postgresql://_&quot;);\n            DataSourceBuilder basicDataSource = DataSourceBuilder.create();\n            basicDataSource.driverClassName(&quot;org.postgresql.Driver&quot;);\n            basicDataSource.url(jdbcUrl);\n            basicDataSource.username(username);\n            basicDataSource.password(password);\n            return basicDataSource.build();\n        } else { // useful for in-memory test\n            DataSourceBuilder basicDataSource = DataSourceBuilder.create();\n            basicDataSource.driverClassName(&quot;org.h2.Driver&quot;);\n            String jdbcUrl = &quot;jdbc:h2:mem:test&quot;;\n            System.err.println(&quot;*** DataConfig: jdbc:h2:_&quot;);\n            basicDataSource.url(jdbcUrl);\n            basicDataSource.username(&quot;TODO&quot;);\n            basicDataSource.password(&quot;&quot;);\n            return basicDataSource.build();\n        }\n    }\n}\n</code></pre>\n<h3>Step 3</h3>\n<p>Just run:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>docker compose config  # to check variables interpolation\ndocker compose up -d   # to run the stack\n</code></pre>\n<p>Indeed: <code>-f docker-compose.yml</code> is always unnecessary, and <code>DATABASE_USER=&quot;admin&quot; …</code> is always parsed from the <code>.env</code> file.</p>\n"}],"owner":{"user_id":15449203,"display_name":"Johni"},"view_count":189,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680663367,"question_id":75935304,"body":"<p>I'm running the following docker-compose on my vps to start up my stack which include a Postgres database and a Spring Boot api. Both are spun up in containers in the same network. Locally, I run the api separately (not in a container) while the database is ran in one, and the api is able to connect to it by specifying the port it exposes to the host.</p>\n<p>Now, this docker-compose meant for production is a whole dilemma. What can I try next?</p>\n<p>Here's my docker-compose:</p>\n<pre><code>version: &quot;3.8&quot;\n\nnetworks:\n  app-network:\n    driver: bridge\n\nservices:\n  db:\n    image: postgres\n    ports:\n      - ${DATABASE_PORT}:5432\n    environment:\n      - POSTGRES_USER=${DATABASE_USER}\n      - POSTGRES_PASSWORD=${DATABASE_PASSWORD}\n      - POSTGRES_DB=${DATABASE_NAME}\n  api:\n    image: ghcr.io/mycoolproject/apiproject:latest\n    ports:\n      - ${API_PORT}:${API_PORT}\n    depends_on:\n      - db\n    environment:\n      - SPRING_PROFILES_ACTIVE=${SPRING_PROFILES_ACTIVE}\n      - DATABASE_NAME=${DATABASE_NAME}\n      - DATABASE_USER=${DATABASE_USER}\n      - DATABASE_PASSWORD=${DATABASE_PASSWORD}\n</code></pre>\n<p>Here's how I run it:</p>\n<pre><code>SPRING_PROFILES_ACTIVE=&quot;prod&quot; \\\n            DATABASE_PORT=&quot;5233&quot; \\\n            DATABASE_NAME=&quot;api-db&quot; \\\n            DATABASE_USER=&quot;admin&quot; \\\n            DATABASE_PASSWORD=&quot;admin123&quot; \\\n            API_PORT=&quot;8080&quot; \\\n            docker-compose -f docker-compose.yml up -d\n</code></pre>\n<p>Here's my application.properties:</p>\n<pre><code>spring.profiles.active=${SPRING_PROFILES_ACTIVE}\n\nspring.datasource.username=${DATABASE_USER}\nspring.datasource.password=${DATABASE_PASSWORD}\n\nspring.datasource.url=jdbc:postgresql://db:5432/${DATABASE_NAME}\n</code></pre>\n<p>And here's the error I get: <strong>(URL must start with 'jdbc')</strong></p>\n<pre><code> org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'dataSourceScriptDatabaseInitializer' [...] Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [com.zaxxer.hikari.HikariDataSource]: Factory method 'dataSource' threw exception; nested exception is java.lang.IllegalArgumentException: URL must start with 'jdbc'\n</code></pre>\n"},{"tags":["java","spring","jpa","spring-data-jpa"],"owner":{"user_id":21562637,"display_name":"Artvd996"},"view_count":46,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680592505,"question_id":75926481,"body":"<p>I'm so new with SpringBoot, this is the way why i need your help.</p>\n<p>I have following entity class which I want to insert in table:</p>\n<pre><code>@Entity\n@Table(name = &quot;test&quot;)\n@NoArgsConstructor\n@Getter\n@Setter\n@DynamicInsert\npublic class TestEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private Long id;\n\n    @Column(name = &quot;promotion_id&quot;)\n    private Long promotion_id;\n\n    @Column(name = &quot;period&quot;)\n    private String period;\n\n    @Column(name = &quot;limit_amount&quot;)\n    private Long limit_amount;\n}\n</code></pre>\n<p>I have multiple objects of Test and I want to insert it to the table. For this I have created a repo class:</p>\n<pre><code>@Repository\npublic interface TestRepository extends JpaRepository&lt;TestEntity, Long&gt; {\n\n    List&lt;TestEntity&gt; findFirstById (Long id);\n}\n</code></pre>\n<p>And after that i created other util-class for easy-work with my test:</p>\n<pre><code>@Service\npublic class TestUtil {\n\n    @Autowired\n    private TestRepository testRepository;\n\n    public void InsertRow(Long promotion_id, String period, Long amount) {\n        TestEntity tab = new TestEntity();\n\n        tab.setPromotion_id(promotion_id);\n        tab.setPeriod(period);\n        tab.setLimit_amount(amount);\n\n        testRepository.save(tab);\n    }\n}\n</code></pre>\n<p>And finally i create small test to check how it works:</p>\n<pre><code>@ExtendWith(SpringExtension.class)\n@SpringBootTest(classes = TestContainerApplication.class)\npublic class TestExample extends ContainersEnviroment {\n\n    private static Long promotion_id = 1L;\n    private static String period = &quot;MONTH&quot;;\n    private static Long amount = 100L;\n\n    @Autowired\n    public TestRepository TestRepository;\n\n    @BeforeEach\n    void setUp() {\n        TestUtil util = new TestUtil();\n        util.InsertRow(promotion_id, period, amount);\n    }\n\n    @Test\n    public void TestExample() {\n        //code\n}\n</code></pre>\n<p>And I use TestContainers with test database from my server using application.yaml</p>\n<p>Problem:\nWhen I try to insert something inside my table, i have NPE</p>\n<pre><code>Cannot invoke &quot;ru.at.database.dao.TestRepository.save(Object)&quot; because &quot;this.TestRepository&quot; is null\njava.lang.NullPointerException: Cannot invoke &quot;ru.at.database.dao.TestRepository.save(Object)&quot; because &quot;this.TestRepository&quot; is null\n</code></pre>\n<p>I think that i cant Autowired TestRepository from @Test, but i don't know how to fix it.</p>\n<p>I try to declare @DataJpaTest in my TestClass, but it still doesn't work, cause i have another error</p>\n<pre><code>Caused by: java.lang.IllegalStateException: Failed to replace DataSource with an embedded database for tests. If you want an embedded database please put a supported one on the classpath or tune the replace attribute of @AutoConfigureTestDatabase.\n\n</code></pre>\n"},{"tags":["java","spring-boot"],"owner":{"user_id":15828895,"display_name":"plutownium"},"view_count":101,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680558763,"question_id":75924030,"body":"<p>I am trying to hot reload, meaning auto-restart the server on code change, in Java using Spring Boot and VSCode.</p>\n<p>I expect the following steps to be enough:</p>\n<ol>\n<li>Update <code>pom.xml</code>:</li>\n</ol>\n<pre><code>    &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p><a href=\"https://stackoverflow.com/questions/46144346/hot-swapping-in-spring-boot-in-visual-studio-code\">This post says its enough</a></p>\n<p>I run again using <code>mvn spring-boot:run</code> and expect updating code to restart it</p>\n<p>My actual result is that it stays the same as prior to the code change</p>\n<p>I also tried: <a href=\"https://i.stack.imgur.com/EhfZ2.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EhfZ2.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","postgresql","jooq","date-range"],"comments":[{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":133919927,"body":"I don’t think it exists. Not knowing PostgreSQL’s range types, would it work to represent the range as two <code>LocalDate</code> objects in Java? You would need some conversion on saving and retrieving, obviously, and I can’t tell you how to do them. If all else fails use a <code>String</code> in Java and format/parse it in getters and setters. I know it’s not a satisfactory solution."},{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"edited":false,"comment_id":133919998,"body":"The <code>DateRange</code> type support is meant for generated code and runtime usage only, not for DDL. You could create a feature request for this: <a href=\"https://github.com/jOOQ/jOOQ/issues/new/choose\" rel=\"nofollow noreferrer\">github.com/jOOQ/jOOQ/issues/new/choose</a>"},{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"edited":false,"comment_id":133924205,"body":"@OleV.V.: I was referring to jOOQ&#39;s support of the PostgreSQL type."}],"owner":{"user_id":19398348,"display_name":"jnsrnhld"},"view_count":61,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680546213,"question_id":75922617,"body":"<p>How can I create a column of PostgreSQL's type <code>daterange</code> with JOOQ?\nI have the Postgres-Extension installed, but I can't figure out how I shall use the <a href=\"https://github.com/jOOQ/jOOQ/blob/main/jOOQ-postgres-extensions/src/main/java/org/jooq/postgres/extensions/types/DateRange.java\" rel=\"nofollow noreferrer\">DateRange</a> type when creating a column.</p>\n<pre class=\"lang-java prettyprint-override\"><code>DSLContext dslContext = DSL.using(SQLDialect.POSTGRES);\ndslContext.createTable(&quot;foo&quot;)\n    .column(&quot;date_column&quot;, DataType&lt;?&gt; ???) \n</code></pre>\n<p>The result I want to achieve is:</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create table foo (\n    date_column daterange\n)\n</code></pre>\n<p>I've used <code>new BuiltInDataType&lt;&gt;(DateRange.class, &quot;daterange&quot;)</code>. It actually creates the <code>daterange</code> column, but seems kinda hacky because it's marked as <code>@internal</code>.</p>\n<p>So, how does one use these types from the PostgreSQL extension?</p>\n"},{"tags":["java","ruby","visual-studio-code","jruby"],"comments":[{"owner":{"user_id":3784008,"display_name":"anothermh"},"edited":false,"comment_id":133915250,"body":"Great question! Latest information I&#39;ve been able to find directly is from 9 years ago: <a href=\"https://stackoverflow.com/q/25238874/3784008\">stackoverflow.com/q/25238874/3784008</a>. Most suggestions elsewhere are to use something other than VSCode which is itself fairly recent. MRI hasn&#39;t really had first-class support in VSCode either until Shopify released <a href=\"https://github.com/Shopify/vscode-shopify-ruby\" rel=\"nofollow noreferrer\">github.com/Shopify/vscode-shopify-ruby</a>. JRuby is going to be tough to get nailed down in VSCode, I think."},{"owner":{"user_id":19133920,"display_name":"JialeDu"},"edited":false,"comment_id":133919487,"body":"Please clarify your specific problem or provide additional details to highlight exactly what you need. As it&#39;s currently written, it&#39;s hard to tell exactly what you&#39;re asking.  Please see <a href=\"https://stackoverflow.com/help/how-to-ask\">how to ask</a>.  <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"}],"owner":{"user_id":5295157,"display_name":"shahram kalantari"},"view_count":51,"up_vote_count":3,"answer_count":0,"score":2,"creation_date":1680487737,"question_id":75915609,"body":"<p>I have a JRuby app which has a controller, in which I call a method of a Java class. As far as I understood, I need to compile the java code (.java file) into either a .class file or a .jar file to be able to reference it in my controller. I have made it work by compiling the java code into a .class file and calling the java class method from my controller. However, compiling the java code and creating a binary file (.class) prevents me from debugging the java code within the JRuby app. My question is, is there a way to be able to put breakpoints in my java code when running the JRuby app and inspect the values?</p>\n<p>I am new to Java and any help would be appreciated.\nP.S. I am using visual studio code as my IDE.</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"answers":[{"owner":{"user_id":21571205,"display_name":"David Unsaved"},"up_vote_count":0,"is_accepted":false,"creation_date":1680681713,"answer_id":75936995,"body":"<p>You have to add &quot;options.addArguments(&quot;--remote-allow-origins=*&quot;);&quot; to your ChromeDriver and it should work fine. If not, then check if your Firewall prevents the chromedriver.exe file to run.</p>\n<pre><code>ChromeOptions options = new ChromeOptions();\n    options.addArguments(&quot;--remote-allow-origins=*&quot;);\n    driver = new ChromeDriver(options);\n</code></pre>\n"}],"owner":{"user_id":20843765,"display_name":"Orca37"},"view_count":475,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680367574,"question_id":75907541,"body":"<p>My selenium Java project was working fine on Selenium version 4.7.0 till I updated Google Chrome to version 111.</p>\n<p>According to this thread, updating Selenium to version 4.8.3 should fix the incompatibilities:\n<a href=\"https://stackoverflow.com/questions/75674124/can-i-set-remote-allow-origins-without-using-a-wildcard-in-selenium\">Can I set remote-allow-origins without using a wildcard in Selenium?</a></p>\n<p>So I updated the selenium project and got chromedriver version 111 to work with Google Chrome 111.\nBut now the Java program won't start either due to the following errors:</p>\n<pre><code>Exception in thread &quot;main&quot; org.openqa.selenium.SessionNotCreatedException: Could not start a new session. Possible causes are invalid address of the remote server or browser start-up failure. \nHost info: host: 'host.name', ip: '123.123.123.123'\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:561)\n    at org.openqa.selenium.remote.RemoteWebDriver.startSession(RemoteWebDriver.java:229)\n    at org.openqa.selenium.remote.RemoteWebDriver.&lt;init&gt;(RemoteWebDriver.java:157)\n    at org.openqa.selenium.chromium.ChromiumDriver.&lt;init&gt;(ChromiumDriver.java:101)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:88)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:84)\n    at org.openqa.selenium.chrome.ChromeDriver.&lt;init&gt;(ChromeDriver.java:52)\n    at AutoChrome.Main.init(Main.java:41)\n    at AutoChrome.Main.main(Main.java:22)\nCaused by: org.openqa.selenium.WebDriverException: Timed out waiting for driver process to start.\nBuild info: version: '4.8.3', revision: 'e5e76298c3'\nSystem info: os.name: 'Linux', os.arch: 'amd64', os.version: '4.19.0', java.version: '11.0.18'\nDriver info: driver.version: ChromeDriver\n    at org.openqa.selenium.remote.service.DriverService.start(DriverService.java:208)\n    at org.openqa.selenium.remote.service.DriverCommandExecutor.execute(DriverCommandExecutor.java:114)\n    at org.openqa.selenium.remote.RemoteWebDriver.execute(RemoteWebDriver.java:543)\n    ... 8 more\n</code></pre>\n<p>Code line 41, which throws the error:</p>\n<blockquote>\n<p>driver = new ChromeDriver();</p>\n</blockquote>\n<p>The chromedriver file is executable. Version 112 of chromedriver won't work either.</p>\n<p>What could be the reason and solution?</p>\n"},{"tags":["java","gradle","environment-variables","gradle-task","system-variable"],"comments":[{"owner":{"user_id":11543023,"display_name":"djmonki"},"edited":false,"comment_id":133907516,"body":"Assume this is to have the variable available during build/deploy time, but not during runtime?"},{"owner":{"user_id":6540591,"display_name":"User51"},"edited":false,"comment_id":133925862,"body":"It looks like you referenced this question, <a href=\"https://stackoverflow.com/questions/36322536/how-to-set-an-environment-variable-from-a-gradle-build\" title=\"how to set an environment variable from a gradle build\">stackoverflow.com/questions/36322536/&hellip;</a> .  The issue is scope for most of these...  You set an env var for a task, but then it disappears when the task completes.  For the <code>Exec</code> task, environment lasts for the task, same with most others.  In the same question, it suggested <code>run.doFirst { environment &#39;A&#39;, &#39;B&#39; }</code>.  I assume you tried that as well?  The <code>run</code> would apply the env value for a <code>run</code>, but it depends what your target task and type are."},{"owner":{"user_id":1786065,"display_name":"Rogue"},"edited":false,"comment_id":133928615,"body":"Stepping back a moment, what are you trying to achieve by setting this environment variable? The notions of scope are already addressed: your variable only lives as long as the thing that defined it (unix shells have <code>.bashrc</code>, programs on both OSes inherit env variables from their parent process). Ask yourself this as well: do you have any other storage medium that <i>would</i> be persistent (e.g. a file in a common config dir)?"}],"answers":[{"owner":{"user_id":589329,"display_name":"Vampire"},"up_vote_count":0,"is_accepted":false,"creation_date":1680736627,"answer_id":75944663,"body":"<blockquote>\n<p>The problem I'm facing is that if I specify it like this</p>\n<pre><code>test {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n</code></pre>\n</blockquote>\n<p>This is exactly the right way to set an environment variable that is accessible while you are executing the <code>test</code> task.</p>\n<blockquote>\n<p>and access it like this from my java file</p>\n<pre><code>String projectDir = System.getenv(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>projectDir is null because I assume it's not part of test files.</p>\n</blockquote>\n<p>It does not matter whether it is a &quot;test file&quot; or a &quot;production file&quot;.\nAs you set the environment variable on the <code>test</code> task, it will be available and accessible during execution of the <code>test</code> task. So it can hardly be that it is <code>null</code> during the exeuction of the test task, except if you have a typo somewhere or missed to provide complete information.</p>\n<blockquote>\n<p>If I specify it like this</p>\n<pre><code>task MyTask(type: Exec) {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n</blockquote>\n<p>This does not make any sense, really.\nYou define an <code>Exec</code> task, which is a task that executes some executable.\nDuring execution of that executable, the environment variable would be set.\nBut you do not configure which executable to execute, so what should happen?</p>\n<p>Then you make your Java compilation task depend on that <code>Exec</code> task which makes even less sense. Besides that any <code>dependsOn</code> is a code-smell (except if a lifecycle task is on the left-hand side) and should be avoided.</p>\n<blockquote>\n<p>and accessing the same way as before, it gives an error saying</p>\n<pre><code>Execution failed for task '&lt;project-name&gt;:MyTask'.\n&gt; execCommand == null!\n</code></pre>\n</blockquote>\n<p>Yep, that is because you did not tell the <code>Exec</code> task which executable to execute as I just explained above.</p>\n<blockquote>\n<p>If I try to do something similar for system property like</p>\n<pre><code>task setProp(type: Exec) {\n    systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n<p>and accessing it like</p>\n<pre><code>String projectDir = System.getProperty(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>it ends up with this error</p>\n<pre><code>Could not find method systemProperty() for arguments [PROJECT_DIR, &lt;path&gt;]\n</code></pre>\n</blockquote>\n<p>Same comments as with the last example above.\nBut additionally, what should a system property be in the context of an <code>Exec</code> task that executes an arbitrary executable.\nSystem properties are a Java specific thing, so you cannot set a system property on a generic <code>Exec</code> task.</p>\n<blockquote>\n<p>At the end of the day, I could find nothing that works out. However, both <code>environment 'PROJECT_DIR', &quot;${projectDir}&quot;</code> and <code>systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;</code> work if I include them in an existing JavaExec task. The problem is that my file cannot be triggered by any kind of JavaExec tasks as it is part of a bigger deployed service, so setting it through build.gradle seems like my only resort.</p>\n</blockquote>\n<p>If I got you right here, then this paragraph is the most important in your question.\nDo I get you right, that you want to set this property at build time using your build script, but then expect it to be available to your production code when running outside of Gradle in the &quot;bigger deployed service&quot;?</p>\n<p>This cannot work, what you set in Gradle is only available during the execution of the task you are setting them on. They cannot be persisted automagically or something like that. That would also be completely against what they are for. They are there so that you can configure things at runtime, not at build time, so that for example a user of a program can configure certain things.</p>\n<p>If you want to set the property at build time and then access it at runtime, you need to generate this value into a file. For this you can for example use a task of type <code>WriteProperties</code>, but be aware that you should properly configure it as task generating resources, by giving it to <code>sourceSets.main.resources.srcDir(...)</code> as argument, or maybe the easier way is to have a template file in your resources and then configure the <code>processResources</code> task to fill in the placeholders in the template for example using <code>expand</code>. Then at runtime you can read that properties file to get the value you need.</p>\n"},{"owner":{"user_id":1554195,"display_name":"tquadrat"},"up_vote_count":0,"is_accepted":false,"creation_date":1681080093,"answer_id":75973235,"body":"<p>If your goal is to ensure that a particular environment variable (or system property) is set when your program (that one you build with gradle …) starts, then you may want to have a look to <a href=\"https://stackoverflow.com/a/51111231/1554195\">this answer</a>.</p>\n<p>Gradle generates a start script for each application, and that – as anything else, too – can be configured. The linked answer gives a starting point on how this can be achieved.</p>\n"}],"owner":{"user_id":6370552,"display_name":"scottstots"},"view_count":216,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1680279193,"question_id":75900667,"body":"<p>I have been trying to set a simple environment variable (or system property, whatever works really) through build.gradle file to access it from a java method (which is not part of integration tests) but after exhausting almost every answer on this forum and elsewhere that I could find, I have still not been able to find a working solution. For reference I have to access it from a file in src/main folder.</p>\n<p>The problem I'm facing is that if I specify it like this</p>\n<pre><code>test {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n</code></pre>\n<p>and access it like this from my java file</p>\n<pre><code>String projectDir = System.getenv(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>projectDir is null because I assume it's not part of test files.</p>\n<p>If I specify it like this</p>\n<pre><code>task MyTask(type: Exec) {\n    environment 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\n\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n<p>and accessing the same way as before, it gives an error saying</p>\n<pre><code>Execution failed for task '&lt;project-name&gt;:MyTask'.\n&gt; execCommand == null!\n</code></pre>\n<p>If I try to do something similar for system property like</p>\n<pre><code>task setProp(type: Exec) {\n    systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;\n}\ntasks.withType(JavaCompile) {\n    compileTask -&gt; compileTask.dependsOn MyTask\n}\n</code></pre>\n<p>and accessing it like</p>\n<pre><code>String projectDir = System.getProperty(&quot;PROJECT_DIR&quot;);\n</code></pre>\n<p>it ends up with this error</p>\n<pre><code>Could not find method systemProperty() for arguments [PROJECT_DIR, &lt;path&gt;]\n</code></pre>\n<p>At the end of the day, I could find nothing that works out. However, both <code>environment 'PROJECT_DIR', &quot;${projectDir}&quot;</code> and <code>systemProperty 'PROJECT_DIR', &quot;${projectDir}&quot;</code> work if I include them in an existing JavaExec task. The problem is that my file cannot be triggered by any kind of JavaExec tasks as it is part of a bigger deployed service, so setting it through build.gradle seems like my only resort.</p>\n<p>I wanted to check if there is something I've missed or some other way I could just make the project directory accessible to my java class.</p>\n"},{"tags":["java","gradle","lombok"],"comments":[{"owner":{"user_id":2115836,"display_name":"Ali Ben Zarrouk"},"edited":false,"comment_id":133872875,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/66376361/an-exception-occurred-applying-plugin-request-id-com-android-application-wh\">An exception occurred applying plugin request &#91;id: &#39;com.android.application&#39;&#93; while integration Jetpack Compose</a>"}],"answers":[{"owner":{"user_id":5816418,"display_name":"Madhav"},"up_vote_count":0,"is_accepted":false,"creation_date":1680254005,"answer_id":75896741,"body":"<p>Seems like you are having issue with java plugin not the lombok. Try changing JDK to internal JDK in project structure (if you are using IntelliJ)</p>\n<blockquote>\n<p>Go to <code>File -&gt; Project Structure</code> and change JDK location to <code>Embedded JDK</code></p>\n</blockquote>\n<p>or,</p>\n<blockquote>\n<p><code>Preferences -&gt; Build</code>, <code>Execution</code>, <code>Deployment -&gt; Build Tools</code> -&gt; <code>Gradle -&gt; Gradle JDK</code></p>\n</blockquote>\n"}],"owner":{"user_id":7951621,"display_name":"loucat dev"},"view_count":136,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680252272,"question_id":75896528,"body":"<p>I'm trying to upgrade lombok from 6.6.3 to 8.0.1 but I'm getting errors at build time.</p>\n<p>The exception is:</p>\n<pre><code>org.gradle.api.plugins.InvalidPluginException: An exception occurred applying plugin request [id: 'java']\n    at org.gradle.plugin.use.internal.DefaultPluginRequestApplicator.exceptionOccurred(DefaultPluginRequestApplicator.java:207)\n    [...]\nCaused by: org.gradle.api.internal.plugins.PluginApplicationException\n\nCaused by: org.gradle.api.artifacts.UnknownConfigurationException: Configuration with name 'mainSourceElements' not found.\n    at \n    [...]\n    io.freefair.gradle.plugins.lombok.LombokPlugin.configureJavaPluginDefaults(LombokPlugin.java:71)\n</code></pre>\n<p>My build.gradle plugin section is like this:</p>\n<pre><code>plugins {\n    id &quot;java&quot;\n    id &quot;io.freefair.lombok&quot; version &quot;8.0.1&quot;\n    &lt;other plugins&gt;\n    }\n</code></pre>\n<p>I can't find info online about this specific error so if anyone has an idea it would be really appreciated!</p>\n"},{"tags":["java","gradle"],"owner":{"user_id":352290,"display_name":"user352290"},"view_count":21,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680240122,"question_id":75895104,"body":"<p>How to use environmentName or other configuration to generate different jars based on lifecycle environment. I want to generate weather-service-dev.jar or weather-service.prod.jar based on the git branch which is being built.</p>\n<pre><code>settings.gradle\nrootProject.name=weather-service\n</code></pre>\n<p>environmentName doesn't help me handle this\n<a href=\"https://docs.marklogic.com/datahub/5.7/tools/gradle/set-up-gradle-for-diff-envs.html\" rel=\"nofollow noreferrer\">https://docs.marklogic.com/datahub/5.7/tools/gradle/set-up-gradle-for-diff-envs.html</a></p>\n<p>Is there a way to customize settings.gradle per environment</p>\n"},{"tags":["java","android","android-mediasession"],"answers":[{"owner":{"user_id":21519777,"display_name":"AllahinAskeri"},"up_vote_count":0,"is_accepted":true,"creation_date":1680981561,"answer_id":75967238,"body":"<p>I solved my problem by adding <code>metadata.putLong(MediaMetadata.METADATA_KEY_DURATION, duration);</code>. <code>duration</code> variable should be <code>long</code> and it should always get updated.</p>\n"}],"owner":{"user_id":21519777,"display_name":"AllahinAskeri"},"view_count":86,"up_vote_count":2,"accepted_answer_id":75967238,"answer_count":1,"score":2,"creation_date":1680206383,"question_id":75892486,"body":"<p>I have a media notification and a large icon, my code successfully loads the image first time, but image doesn't changes second time. My code was working in Android 8.1.0, currently I'm using Android 12 and it doesn't work.</p>\n<pre><code>    mediaSession.setMetadata(new MediaMetadataCompat.Builder()\n            .putBitmap(MediaMetadata.METADATA_KEY_ALBUM_ART, image)\n            .putBitmap(MediaMetadata.METADATA_KEY_ART, image)\n            .putLong(MediaMetadata.METADATA_KEY_DURATION, -1L)\n            .putString(MediaMetadata.METADATA_KEY_TITLE,BASLIK)\n            .putString(MediaMetadata.METADATA_KEY_ARTIST,ISIM)\n            .build());\n\n    stateBuilder = new PlaybackStateCompat.Builder();\n    stateBuilder.setActions(PlaybackStateCompat.ACTION_PLAY_PAUSE | PlaybackStateCompat.ACT\n    stateBuilder.setState(PlaybackStateCompat.STATE_PLAYING, 0, 1.0f);\n    mediaSession.setPlaybackState(stateBuilder.build());\n\n    notification = new NotificationCompat.Builder(context, CHANNEL_ID)\n            .setContentTitle(BASLIK)\n            .setContentText(ISIM)\n            .setLargeIcon(image)\n            .setSmallIcon(R.drawable.ic_launcher_foreground)\n            .addAction(R.drawable.ic_previous, &quot;Previous&quot;, prevPendingIntent)\n            .addAction(icon, &quot;Play&quot;, playPendingIntent)\n            .addAction(R.drawable.ic_next, &quot;Next&quot;, nextPendingIntent)\n            .setOnlyAlertOnce(true)\n            .setPriority(Notification.PRIORITY_LOW)\n            .setOngoing(true)\n            .setShowWhen(false)\n            .setVisibility(NotificationCompat.VISIBILITY_PUBLIC)\n            .setStyle(new androidx.media.app.NotificationCompat.MediaStyle()\n                    .setShowActionsInCompactView(0, 1, 2)\n                    .setMediaSession(mediaSession.getSessionToken()));\n            \n    notificationManager.notify(Integer.parseInt(CHANNEL_ID), notification.build());\n</code></pre>\n<p>I tried removing MediaStyle and it worked, images successfully changed each time but I need to use MediaStyle. I'm sure about updating the notification, title and song name changes but image doesn't.</p>\n"},{"tags":["java","multithreading","scala","future"],"comments":[{"owner":{"user_id":4111404,"display_name":"Luis Miguel Mej&#237;a Su&#225;rez"},"edited":false,"comment_id":133863148,"body":"Well <b>Java</b> <code>Futures</code> are not really <i>&quot;cancellable&quot;</i> in the most common meaning of the word, they just kill / interrupt the underlying thread possibly leaking resources; which may be the reason <b>Scala</b> <code>Future</code> didn&#39;t add that. - About mixing, I think it should be fine, both are just submitting things to the same thread pool. - BTW, if you really need cancellation, why not using something more powerful like <code>IO</code> from <b>cats-effect</b> or <b>ZIO</b>."},{"owner":{"user_id":5641244,"display_name":"Levi Ramsey"},"edited":false,"comment_id":133900890,"body":"That&#39;s part of the reason, the other main part is that the <code>Future</code> in Scala is just the read-side of the computation, as opposed to the write-side (aka <code>Promise</code>), so it&#39;s the responsibility of whatever owns the <code>Promise</code> to cancel the computation and fail (or not complete) the <code>Future</code>.  Agreed that it should be fine to cancel a Java future executing on the same EC."}],"owner":{"user_id":6861219,"display_name":"Ziqi Liu"},"view_count":49,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680201828,"question_id":75891896,"body":"<p>I noticed that scala <code>ExecutionContext</code> has a <code>def fromExecutorService(e: ExecutorService)</code> which convert a Java ExecutorService to scala <code>ExecutionContext</code>.</p>\n<p>Can I mixed use these two? i.e.,:</p>\n<pre><code>val someExecutorService = ....\nval ec = ExecutionContext.fromExecutorService(someExecutorService)\n\nval javaFuture = someExecutorSerivce.submit(...\nval scalaFuture = ec.submit(...\n\n</code></pre>\n<p>The reason I want to do this is that I need java Future's cancellation feature...but I'm not sure whether the mixed usage will cause any trouble(my confusion is that why scala's future is not cancellable while it's using executor service under the hood and java Future is cancellable)</p>\n"},{"tags":["java","mongodb","spring-boot","thymeleaf","sts"],"owner":{"user_id":21530053,"display_name":"Arun S Nair"},"view_count":39,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680200737,"question_id":75891736,"body":"<p>Just started on <strong>spring boot</strong> and found out when using both <strong>thymeleaf</strong> and <strong>mongoDB</strong>, the order of the dependencies in pom file matters.</p>\n<p>It works only if thymeleaf dependency is at the top of the Mongo dependency?</p>\n<p>Any Explanation why?</p>\n"},{"tags":["java","spring","swagger","openapi","codegen"],"comments":[{"owner":{"user_id":6860078,"display_name":"tbatch"},"edited":false,"comment_id":133876564,"body":"The <code>openapi-generator</code> doesn&#39;t create <code>@ExampleObject</code> annotations.  You can verify this by checking the <code>mustache</code> templates used to generate the objects.  It sets the example using the <code>@schema</code> annotation instead. As for the examples not showing up in the ui, I can&#39;t help you without being able to see the <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">input spec</a>.   Can you please share your input spec and your maven configuration?  Thank you."},{"owner":{"user_id":11133935,"display_name":"Ankitha J"},"edited":false,"comment_id":133903969,"body":"@tbatch I have updated the question with the details"}],"owner":{"user_id":11133935,"display_name":"Ankitha J"},"view_count":570,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680173775,"question_id":75887346,"body":"<p>I am using The openapi-generator-maven-plugin:6.4.0 to generate swagger code. I am able to access the APIs.</p>\n<p>But, in generated files @ExampleObject is not present. Also, in Swagger UI I am unable to see the examples specified in inputSpec. Please suggest.</p>\n<p>Below are the dependencies and plugins used in pom.xml file</p>\n<p>Dependencies:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n    &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n    &lt;version&gt;1.6.14&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-databind-nullable&lt;/artifactId&gt;\n    &lt;version&gt;0.2.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Plugin:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n    &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;6.4.0&lt;/version&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;generate&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;inputSpec&gt;/src/main/resources/openapi.json&lt;/inputSpec&gt;\n       &lt;apiPackage&gt;com.example.api&lt;/apiPackage&gt;\n&lt;modelPackage&gt;com.example.model&lt;/modelPackage&gt;\n&lt;skipOperationExample&gt;false&lt;/skipOperaionExample&gt;         &lt;generatorName&gt;spring&lt;/generatorName&gt;\n                &lt;configOptions&gt; &lt;sourceFolder&gt;src/gen/java/main&lt;/sourceFolder&lt;delegatePattern&gt;true&lt;/delegatePattern&gt;\n&lt;interfaceOnly&gt;true&lt;/interfaceOnly&gt;\n                &lt;/configOptions&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n"},{"tags":["java","algorithm","loops","for-loop"],"comments":[{"owner":{"user_id":21105992,"display_name":"teapot418"},"edited":false,"comment_id":133854278,"body":"You&#39;re probably observing the <i>JIT (just-in-time) compiler</i> (&lt;- search keyword to find out more) in action. You can try the <code>-Xint</code> command line option, which disables it. That should make the results noticeably slower, but perfectly linear."},{"owner":{"user_id":7090837,"display_name":"Yeras_QazaQ"},"edited":false,"comment_id":133854315,"body":"What about memory and CPU in your machine? When you add large data you get much memory for heap. Check memory and JVM actual state"},{"owner":{"user_id":21445132,"display_name":"oresky"},"edited":false,"comment_id":133854577,"body":"@teapot418 How do I re-enable JIT?"},{"owner":{"user_id":21105992,"display_name":"teapot418"},"edited":false,"comment_id":133854596,"body":"It&#39;s enabled by default. If you don&#39;t put the option to disable, it will be enabled."},{"owner":{"user_id":7275056,"display_name":"vsfDawg"},"edited":false,"comment_id":133854758,"body":"Consider replacing the multiplication with addition in the for-loop increment clause - integer addition is faster than integer multiplication.   Interestingly, this is not always true with floating point addition versus floating point multiplication."},{"owner":{"user_id":1921273,"display_name":"MrSmith42"},"edited":false,"comment_id":133872360,"body":"You have to run methods several times before JIT kicks in. So whenever you time something tinme it several times (in the same JVM-run) and wait until values have stabilized. Also GarbageCollection might make some measurements useless (also therefore you need to measure the same test several times)."}],"owner":{"user_id":21445132,"display_name":"oresky"},"view_count":59,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680170943,"question_id":75886840,"body":"<p>NOTE: The libraries used in this code can be found <a href=\"https://introcs.cs.princeton.edu/java/stdlib/\" rel=\"nofollow noreferrer\">here</a>. The classes/functions used here are pretty self explanatory though.</p>\n<p>This brute force algorithm counts all the triplets in the given input that sum to 0:</p>\n<pre><code>    public static int count(int[] a) {\n        int n = a.length;\n        int count = 0;\n        for (int i = 0; i &lt; n; i++) {\n            for (int j = i + 1; j &lt; n; j++) {\n                for (int k = j + 1; k &lt; n; k++) {\n                    if (a[i] + a[j] + a[k] == 0) {\n                        count++;\n                    }\n                }\n            }\n        }\n        return count;\n    }\n</code></pre>\n<p>When I test it from <code>i = 250</code> to <code>16000</code>, incrementing <code>i</code> by <code>250</code> at each iteration:</p>\n<pre><code>import edu.princeton.cs.algs4.StdOut;\nimport edu.princeton.cs.algs4.StdRandom;\nimport edu.princeton.cs.algs4.Stopwatch;\n\npublic class DoublingTest {\n    public static double timeTrial(int N) {\n        int MAX = 1000000;\n        int[] a = new int[N];\n        for (int i = 0; i &lt; N; i++)\n            a[i] = StdRandom.uniform(-MAX, MAX);\n        Stopwatch timer = new Stopwatch();\n        int cnt = ThreeSum.count(a);\n        return timer.elapsedTime();\n    }\n\n    public static void main(String[] args) {\n        double total = 0;\n        for (int i = 250; i &lt;= 16000; i += 250) {\n            double time = timeTrial(i);\n            total += time;\n            StdOut.printf(&quot;%7d %5.2f&quot;, i, time);;\n            StdOut.printf(&quot;Total time = %5.2f\\n&quot;, total);\n        }\n    }\n}\n\n</code></pre>\n<p>i = 4000 takes 12.91s:</p>\n<pre><code>    250  0.03\nTotal time =  0.03\n    500  0.10\nTotal time =  0.13\n    750  0.43\nTotal time =  0.56\n   1000  0.95\nTotal time =  1.51\n   1250  1.80\nTotal time =  3.31\n   1500  3.12\nTotal time =  6.44\n   1750  1.11\nTotal time =  7.55\n   2000  1.65\nTotal time =  9.20\n   2250  2.35\nTotal time = 11.54\n   2500  3.19\nTotal time = 14.74\n   2750  4.26\nTotal time = 18.99\n   3000  5.51\nTotal time = 24.50\n   3250  6.99\nTotal time = 31.50\n   3500  8.73\nTotal time = 40.23\n   3750 10.66\nTotal time = 50.88\n   4000 12.91\nTotal time = 63.80\n</code></pre>\n<p>But when I double <code>i</code> at each iteration:</p>\n<pre><code>import edu.princeton.cs.algs4.StdOut;\nimport edu.princeton.cs.algs4.StdRandom;\nimport edu.princeton.cs.algs4.Stopwatch;\n\npublic class DoublingTest {\n    public static double timeTrial(int N) {\n        int MAX = 1000000;\n        int[] a = new int[N];\n        for (int i = 0; i &lt; N; i++)\n            a[i] = StdRandom.uniform(-MAX, MAX);\n        Stopwatch timer = new Stopwatch();\n        int cnt = ThreeSum.count(a);\n        return timer.elapsedTime();\n    }\n\n    public static void main(String[] args) {\n        double total = 0;\n        for (int i = 250; i &lt;= 16000; i *= 2) {\n            double time = timeTrial(i);\n            total += time;\n            StdOut.printf(&quot;%7d %5.2f&quot;, i, time);\n            StdOut.printf(&quot;Total time = %5.2f\\n&quot;, total);\n        }\n    }\n}\n\n</code></pre>\n<p>i = 4000 takes significantly longer (59.22s):</p>\n<pre><code>    250  0.04\nTotal time =  0.04\n    500  0.12\nTotal time =  0.16\n   1000  0.96\nTotal time =  1.11\n   2000  7.38\nTotal time =  8.50\n   4000 59.22\nTotal time = 67.71\n</code></pre>\n<p>Yet, total time is similar in both cases. Why does this happen?</p>\n"},{"tags":["java","apache-spark","pyspark","apache-spark-sql","user-defined-functions"],"answers":[{"owner":{"user_id":6325994,"display_name":"Abdennacer Lachiheb"},"up_vote_count":0,"is_accepted":false,"creation_date":1680174569,"answer_id":75887457,"body":"<p>You have 2 choices:</p>\n<ol>\n<li><p>Declare your map as final and call it from your udf:</p>\n<pre><code>final HashMap&lt;String, String&gt; myMap = new HashMap&lt;&gt;();\npublic String call(Integer x, Integer y) {\n     // Pseudocode\n     return myMap.get(x) + myMap.get(y);\n}\n</code></pre>\n</li>\n<li><p>But a better solution is to use broadcast variable and then call it\nfrom you udf:</p>\n<pre><code>HashMap&lt;String, String&gt; myMap = new HashMap&lt;&gt;();\nBroadcast&lt;HashMap&lt;String, String&gt;&gt; myMapBroadcast = new JavaSparkContext(spark.sparkContext()).broadcast(myMap);\npublic String call(Integer x, Integer y) {\n     // Pseudocode\n     HashMap&lt;String, String&gt; myMap2 = myMapBroadcast.value();\n     return myMap2.get(x) + myMap2.get(y);\n}\n</code></pre>\n</li>\n</ol>\n"}],"owner":{"user_id":364651,"display_name":"johngreen"},"view_count":41,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680158880,"question_id":75884928,"body":"<p>My driver script is written in PySpark, where I do some complex transformations on columns. The transformations have been implemented as Java UDFs for performance reasons.</p>\n<p>In my PySpark code, I register the Java UDF using :</p>\n<pre><code>session.udf.registerJavaFunction(&quot;my_udf&quot;, &quot;com.example.MyUDF&quot;, StringType())\n</code></pre>\n<p>I am able to execute the transformation in PySpark as follows :</p>\n<pre><code>output_df = input_df.withColumn(f&quot;transformed&quot;, F.expr(&quot;my_udf(col1, col2)&quot;))\n</code></pre>\n<p>My Java UDF is defined as follows :</p>\n<pre><code>import org.apache.spark.sql.api.java.UDF2;\n\npublic class MyUDF implements UDF2&lt;Integer, Integer, String&gt; {\n\n  @Override\n  public String call(Integer x, Integer y) {\n       // Do something ...\n  }\n}\n</code></pre>\n<p>Now, the transformation defined by <code>MyUDF</code> requires some other data as inputs. E.g. let's say there is a map of values against which lookup needs to be performed, and the output is the sum of the mapped values, i.e.</p>\n<pre><code>  public String call(Integer x, Integer y) {\n       // Pseudocode\n       return myMap.get(x) + myMap.get(y);\n  }\n</code></pre>\n<p>Question: What is a good way to read the <code>myMap</code> from a database and make it available to the UDF written in Java?</p>\n<p>I have read that broadcast variables are meant for such purposes, but I need help in understanding how I can access any broadcast variable created in PySpark from the Java UDF? Or is there a better way to do this?</p>\n"},{"tags":["java","spring","spring-security","spring-session"],"comments":[{"owner":{"user_id":8041003,"display_name":"John Williams"},"edited":false,"comment_id":133845558,"body":"No, you do not need to mess about with filters. This is all you need to do - <a href=\"https://www.baeldung.com/spring-session-jdbc\" rel=\"nofollow noreferrer\">baeldung.com/spring-session-jdbc</a>"}],"owner":{"user_id":9754736,"display_name":"Scroll"},"view_count":45,"up_vote_count":3,"answer_count":0,"score":2,"creation_date":1680114115,"question_id":75880822,"body":"<p>I am trying to understand how Spring Security and Spring Session projects work together.\nIn my project I want to save sessions into database that's why I am using Spring Session JDBC. But I can't understand should I configure something in\n<code>@Bean public SecurityFilterChain filterChain(HttpSecurity http)</code>\nin part <code>sessionManagement</code>. For example I've tried to set maximum user sessions by</p>\n<pre><code>@Bean\npublic SecurityFilterChain filterChain(HttpSecurity http) {\n    http\n        .sessionManagement(session -&gt; session\n            .maximumSessions(1)\n        );\n    return http.build();\n}\n</code></pre>\n<p>and there is no affect. Can someone explain why there is no affect and should I configure sessionManagement in HttpSecurity ?</p>\n"},{"tags":["java","playframework"],"comments":[{"owner":{"user_id":5389127,"display_name":"Ga&#235;l J"},"edited":false,"comment_id":133878864,"body":"Any chance you&#39;re using <code>InputStream</code> somewhere? We&#39;ve had same errors when using them with Akka stream, removing these usages removed the errors."},{"owner":{"user_id":635524,"display_name":"archie_by"},"edited":false,"comment_id":134018688,"body":"no, the code we are using is almost identical to what is provided for the ForwardingBodyParser in the Play user guide. We are just altering a couple of headers. That&#39;s it"}],"owner":{"user_id":635524,"display_name":"archie_by"},"view_count":26,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680092345,"question_id":75877106,"body":"<p>We are using a slightly updated <a href=\"https://www.playframework.com/documentation/2.8.x/JavaBodyParsers#Directing-the-body-elsewhere\" rel=\"nofollow noreferrer\">ForwardingBodyParser</a> that does some additional request header manipulations, but is identical to the example otherwise.</p>\n<p>The problem is that after upgrading from java play 2.6.11 to 2.8.19 we start to experience the following errors randomly (pretty seldom and mostly right after the application startup):</p>\n<pre><code>[[31merror[0m] http.Errors - Internal server error\njava.util.concurrent.CompletionException: java.lang.IllegalStateException: Sink.asPublisher(fanout = false) only supports one subscriber (which is allowed, see reactive-streams specification, rule 1.11)\n    at java.base/java.util.concurrent.CompletableFuture.encodeThrowable(Unknown Source)\n    at java.base/java.util.concurrent.CompletableFuture.completeThrowable(Unknown Source)\n    at java.base/java.util.concurrent.CompletableFuture$UniApply.tryFire(Unknown Source)\n    at java.base/java.util.concurrent.CompletableFuture.postComplete(Unknown Source)\n    at java.base/java.util.concurrent.CompletableFuture.completeExceptionally(Unknown Source)\n    at scala.concurrent.java8.FuturesConvertersImpl$CF.apply(FutureConvertersImpl.scala:29)\n    at scala.concurrent.java8.FuturesConvertersImpl$CF.apply(FutureConvertersImpl.scala:26)\n    at scala.concurrent.impl.Promise$Transformation.run(Promise.scala:484)\n    at scala.concurrent.ExecutionContext$parasitic$.execute(ExecutionContext.scala:222)\n    at scala.concurrent.impl.Promise$Transformation.submitWithValue(Promise.scala:429)\nCaused by: java.lang.IllegalStateException: Sink.asPublisher(fanout = false) only supports one subscriber (which is allowed, see reactive-streams specification, rule 1.11)\n    at akka.stream.impl.ReactiveStreamsCompliance$.rejectAdditionalSubscriber(ReactiveStreamsCompliance.scala:62)\n    at akka.stream.impl.VirtualPublisher.rec$6(StreamLayout.scala:481)\n    at akka.stream.impl.VirtualPublisher.subscribe(StreamLayout.scala:486)\n    at play.shaded.ahc.org.asynchttpclient.netty.request.body.NettyReactiveStreamsBody.write(NettyReactiveStreamsBody.java:60)\n    at play.shaded.ahc.org.asynchttpclient.netty.request.NettyRequestSender.writeRequest(NettyRequestSender.java:426)\n    at play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener.writeRequest(NettyConnectListener.java:80)\n    at play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener.access$100(NettyConnectListener.java:37)\n    at play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener$1.onSuccess(NettyConnectListener.java:139)\n    at play.shaded.ahc.org.asynchttpclient.netty.channel.NettyConnectListener$1.onSuccess(NettyConnectListener.java:129)\n    at play.shaded.ahc.org.asynchttpclient.netty.SimpleFutureListener.operationComplete(SimpleFutureListener.java:24)\n</code></pre>\n<p>It seems like sometimes application subscribes twice to the <code>Source</code> in the <code>Accumulator</code>. I can reproduce the same issue 100% of times if I do it explicitly, but I'd love to know how it could be happening in the Play internals and how it could be resolved</p>\n"},{"tags":["java","cosine-similarity","amazon-opensearch"],"owner":{"user_id":5743515,"display_name":"Gil Amsalem"},"view_count":74,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680092040,"question_id":75877055,"body":"<p>I am trying to execute KNN approximate search using the OpenSearch Java client.\nI cant find any example nor documentation about it (both high-level and low-level clients).</p>\n<p>I am able to execute the command from the OpenSearch dashboard.\nFor example:</p>\n<pre><code>GET contentml-images-clip-batch1/_search\n{\n  &quot;size&quot;: 2,\n  &quot;query&quot;: {\n    &quot;knn&quot;: {\n      &quot;embedding&quot;: {\n        &quot;vector&quot;: [1,2,3],\n        &quot;k&quot;: 2\n      }\n    }\n  }\n}\n</code></pre>\n<p>Any good reference for how to achieve the sam call using one of the Java clients?</p>\n"},{"tags":["java","amazon-iam","opensearch","amazon-opensearch"],"comments":[{"owner":{"user_id":1958669,"display_name":"shashantrika"},"edited":false,"comment_id":133851317,"body":"hi Taras , Im also facing the same issue , if you find any solution kindly keep it updated here."}],"answers":[{"owner":{"user_id":11966025,"display_name":"HB HONG"},"up_vote_count":0,"is_accepted":false,"creation_date":1680246172,"answer_id":75895727,"body":"<p>I've got a same error.\nThere are a few things you can check:</p>\n<ol>\n<li><strong>Credentials</strong>: Make sure that the <code>access key</code> and <code>secret key</code> in your Java application are correct and match the credentials in your <code>AWS profile</code>.</li>\n<li><strong>Region</strong>: Make sure that your Java application is using the same region as your OpenSearch domain.</li>\n<li><strong>Permissions</strong>: Make sure that the <code>IAM user/role</code> associated with your credentials has the necessary permissions to interact with your OpenSearch domain.</li>\n<li><strong>Endpoint</strong>: Make sure that your Java application is using the correct endpoint URL which excludes <code>https://</code>.</li>\n<li><strong>Version</strong>: Make sure that your Java application implemented correct version of the OpenSearchClient for the version of OpenSearch you are using.</li>\n</ol>\n<p>In my case, in fact, my infrastructure manager set OpenSearch to only allow ID/PW access. Therefore, it is recommended to check the <strong>OpenSearch security configuration</strong>, too.</p>\n"}],"owner":{"user_id":9269248,"display_name":"Taras Vovk"},"view_count":248,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680034384,"question_id":75870670,"body":"<p>I'm trying to use OpenSearch to connect to my OpenSearch domain on AWS. I set env for AWS. However, I'm encountering an authentication/authorization failure. Here's my code:</p>\n<pre><code>public class Example {\n\n  public static void main(final String[] args) throws IOException {\n    SdkHttpClient httpClient = ApacheHttpClient.builder().build();\n    try {\n      OpenSearchClient client =\n          new OpenSearchClient(\n              new AwsSdk2Transport(\n                  httpClient,\n                  &quot;search-*****-3ovub4o4gncugluu6t2tquptnu.eu-central-1.es.amazonaws.com&quot;,\n                  Region.EU_CENTRAL_1,\n                  AwsSdk2TransportOptions.builder().build()));\n\n      InfoResponse info = client.info();\n      System.out.println(info.version().distribution() + &quot;: &quot; + info.version().number());\n    } finally {\n      httpClient.close();\n    }\n  }\n}\n</code></pre>\n<p>When I run this code, I get the following exception:</p>\n<pre><code>Exception in thread &quot;main&quot; org.opensearch.client.opensearch._types.OpenSearchException: Request failed: [security_exception] authentication/authorization failureat org.opensearch.client.transport.aws.AwsSdk2Transport.parseResponse(AwsSdk2Transport.java:47)at org.opensearch.client.transport.aws.AwsSdk2Transport.executeSync(AwsSdk2Transport.java:393)at org.opensearch.client.transport.aws.AwsSdk2Transport.performRequest(AwsSdk2Transport.java:191)at org.opensearch.client.opensearch.OpenSearchClient.info(OpenSearchClient.java:790)at Example.main(Example.java:25)\n</code></pre>\n<p>I believe I have the correct permissions set up for my IAM user, and I'm using the correct access key and secret key. However, I still can't seem to resolve this issue. What am I missing or doing wrong? Any help or guidance would be appreciated.</p>\n<p>this is my aws config <a href=\"https://i.stack.imgur.com/Ho0pD.png\" rel=\"nofollow noreferrer\">pic_1</a> <a href=\"https://i.stack.imgur.com/JfSI4.png\" rel=\"nofollow noreferrer\">pic_2</a> <a href=\"https://i.stack.imgur.com/iA9Dk.png\" rel=\"nofollow noreferrer\">pic_3</a></p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":179}