{"items":[{"tags":["java","spring-boot","quarkus","azure-data-explorer","kql"],"answers":[{"owner":{"user_id":7861807,"display_name":"Yoni L."},"up_vote_count":1,"is_accepted":false,"creation_date":1681484643,"answer_id":76016501,"body":"<p>there are client libraries provided in multiple programming languages you can use as part of your automation: <a href=\"https://learn.microsoft.com/en-us/azure/data-explorer/kusto/api/client-libraries\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/data-explorer/kusto/api/client-libraries</a></p>\n<p>you can also use the Kusto.Cli tool: <a href=\"https://learn.microsoft.com/en-us/azure/data-explorer/kusto/tools/kusto-cli\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/data-explorer/kusto/tools/kusto-cli</a></p>\n"},{"owner":{"user_id":3019198,"display_name":"TheFunk"},"up_vote_count":1,"is_accepted":true,"creation_date":1681575020,"answer_id":76023382,"body":"<p>There is a Java library provided by Microsoft for this called azure-kusto-java.</p>\n<p>It is available on Maven Central as two separate packages.</p>\n<p>One for queries:\n<a href=\"https://mvnrepository.com/artifact/com.microsoft.azure.kusto/kusto-data\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.microsoft.azure.kusto/kusto-data</a></p>\n<p>And one for ingestion:\n<a href=\"https://mvnrepository.com/artifact/com.microsoft.azure.kusto/kusto-ingest\" rel=\"nofollow noreferrer\">https://mvnrepository.com/artifact/com.microsoft.azure.kusto/kusto-ingest</a></p>\n<p><a href=\"https://github.com/Azure/azure-kusto-java\" rel=\"nofollow noreferrer\">Here's the GitHub repo.</a></p>\n<p>Additionally, I just wrapped up work on a Quarkus extension to simplify the process, however I need to get it approved for release into the wild.</p>\n"}],"owner":{"user_id":4027455,"display_name":"sam"},"view_count":61,"up_vote_count":2,"accepted_answer_id":76023382,"answer_count":2,"score":2,"creation_date":1681447918,"question_id":76011696,"body":"<p>I am trying to find any solutions or reference where I can run the bunch of KQL files which has the unit test via automated script? What is the best way to automate the KQL unit test? Currently am running it manually these unit test cases but want to convert it to automation. I can create a microservice in spring boot or quarkus but how to read this in the java and automate it? Not just with java any other way to automate this?</p>\n"},{"tags":["java","spring-boot","hibernate"],"comments":[{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":134062177,"body":"Why that databaseconfig while you are using SPring Boot (that shouldn&#39;t be needed in the firs tplace and makes me wonder what else you are doing to fight the defaults). The cod eyou have in your controller belongs in a service which should be <code>@Transactional</code>."},{"owner":{"user_id":1386873,"display_name":"puelo"},"edited":false,"comment_id":134064352,"body":"The project is a minimal example. I can remove <code>DatabaseConfig</code> and it still leads to a connection leak. I don&#39;t use any other config or annotations except for <code>@SpringBootApplication</code> on the entry class. It does not leak when i use <code>@Transactional</code>, but does that matter? Shouldn&#39;t it also work without leaking if i don&#39;t use any transaction management myself? I can do the same without <code>@Transactional</code>, but instead of <code>scroll</code> call <code>getResultList</code> and that does not leak."},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":134066085,"body":"Yes it does matter, as you noticed yourself. Data access code should be in a transaction, that way Spring will manage the resources for you. If you don&#39;t you manually have to manage everything and if you are doing things wrong you even might end up using multiple connections (which I suspect is the case here and releasing only one)."}],"answers":[{"owner":{"user_id":1386873,"display_name":"puelo"},"up_vote_count":2,"is_accepted":true,"creation_date":1681641597,"answer_id":76027239,"body":"<p>Answering my own question. As M. Deinum mentioned in the comments you should always have clear boundaries for your transactions, even if they are read-only. Hibernate also mentions this in their documentation:</p>\n<blockquote>\n<p>Database, or system, transaction boundaries are always necessary. No\ncommunication with the database can occur outside of a database\ntransaction (this seems to confuse many developers who are used to the\nauto-commit mode). Always use clear transaction boundaries, even for\nread-only operations.</p>\n</blockquote>\n<p><a href=\"https://docs.jboss.org/hibernate/core/3.3/reference/en/html/transactions.html#transactions-demarcation\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/core/3.3/reference/en/html/transactions.html#transactions-demarcation</a></p>\n<p>I still wanted to understand why a simple <code>getResultList</code> on the Query does not leak a connection, while <code>scroll</code>/<code>next</code> does, although both only request one connection and return a valid result.</p>\n<p>It turns out that this is an interaction between the shared <code>EntityManager</code> that Spring provides and specific methods on the <code>Query</code> interface. The <code>EntityManager</code> you receive from Spring is actually a shared proxy of type <code>SharedEntityManagerInvocationHandler</code> which proxies the methods called on it. Specifically methods that return a <code>Query</code> interface (i.e. <code>createQuery</code>) return another proxy for the actual <code>Query</code> object.</p>\n<p>That proxy has a list of methods which it considers to be terminating, called <code>queryTerminatingMethods</code>. The list contains:</p>\n<ul>\n<li>&quot;execute&quot;,  // jakarta.persistence.StoredProcedureQuery.execute()</li>\n<li>&quot;executeUpdate&quot;, // jakarta.persistence.Query.executeUpdate()</li>\n<li>&quot;getSingleResult&quot;,  // jakarta.persistence.Query.getSingleResult()</li>\n<li>&quot;getResultStream&quot;,  // jakarta.persistence.Query.getResultStream()</li>\n<li>&quot;getResultList&quot;,  // jakarta.persistence.Query.getResultList()</li>\n<li>&quot;list&quot;,  // org.hibernate.query.Query.list()</li>\n<li>&quot;stream&quot;,  // org.hibernate.query.Query.stream()</li>\n<li>&quot;uniqueResult&quot;,  // org.hibernate.query.Query.uniqueResult()</li>\n<li>&quot;uniqueResultOptional&quot; // org.hibernate.query.Query.uniqueResultOptional()</li>\n</ul>\n<p>For all those methods the proxy will automatically close the shared entity manager after invoking them, which also in turn releases the connection. <code>scroll</code> is missing from the list, which makes sense. And this is the reason why it leaks a connection here. You can also not just call <code>close</code> on the proxied EntityManager Spring provides, because that actually does nothing.</p>\n<p>You can also confirm this behaviour by creating your own <code>EntityManager</code> with the Spring provided <code>EntityManagerFactory</code> before executing the query (which in most cases you wouldn't want/need to do). If you don't call close on this <code>EntityManager</code>, both <code>getResultList</code> and <code>scroll</code> will leak a connection.</p>\n"}],"owner":{"user_id":1386873,"display_name":"puelo"},"view_count":87,"up_vote_count":2,"accepted_answer_id":76027239,"answer_count":1,"score":2,"creation_date":1681408806,"question_id":76008518,"body":"<p>I am currently investigating the following issue, which also affects our production environment <a href=\"https://github.com/querydsl/querydsl/issues/3089\" rel=\"nofollow noreferrer\">https://github.com/querydsl/querydsl/issues/3089</a>. A author of this library suspected that Hibernate might be the culprit of the issue, and i was able to reproduce this with a minimal example. Before opening an issue in the Hibernate issue tracker i wanted to make sure that i am not doing anything horribly wrong or it actually is an issue with Spring.</p>\n<p>I am using the following versions:</p>\n<ul>\n<li>Spring-Boot 3.0.5 (older versions are also affected)</li>\n<li>Hibernate 6.1.7 FINAL (older versions are also affected)</li>\n</ul>\n<p>Calling the following controller is causing the connection leak, which Hikari also picks up and logs in the output.</p>\n<pre><code>@Controller\npublic class IndexController {\n    @PersistenceContext\n    private EntityManager entityManager;\n\n    @GetMapping(&quot;/test&quot;)\n    public ResponseEntity&lt;Map&lt;Long, String&gt;&gt; fetchEntities() {\n        Query query = entityManager.createQuery(&quot;select testEntity.id, testEntity.name from TestEntity testEntity&quot;);\n        org.hibernate.query.Query&lt;?&gt; unwrappedQuery = query.unwrap(org.hibernate.query.Query.class);\n        try (ScrollableResults&lt;?&gt; results = unwrappedQuery.scroll()) {\n            while (results.next()) {}\n        }\n        return ResponseEntity.noContent().build();\n    }\n}\n</code></pre>\n<p>The connection also leaks, if i call <code>entityManager.close</code> and/or <code>results.close()</code></p>\n<p>With this entity:</p>\n<pre><code>@Entity\n@Table(name = &quot;test&quot;)\npublic class TestEntity {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    private String name;\n\n    public TestEntity() {\n    }\n\n    public TestEntity(String name) {\n        this.name = name;\n    }\n\n    public long getId() {\n        return id;\n    }\n\n    public void setId(long id) {\n        this.id = id;\n    }\n\n    public String getName() {\n        return name;\n    }\n\n    public void setName(String name) {\n        this.name = name;\n    }\n\n}\n</code></pre>\n<p>This is my database config:</p>\n<pre><code>@Configuration\n@EnableTransactionManagement\n@EnableJpaRepositories(basePackageClasses = { DatabaseConfig.class })\n@EntityScan(basePackageClasses = { DatabaseConfig.class })\npublic class DatabaseConfig {\n}\n</code></pre>\n<p>My application config:</p>\n<pre><code>management:\n  server:\n    base-path: /actuator\n    port: 8081\n  endpoints.web.exposure.include: '*'\n\nspring:\n  datasource:\n    url: jdbc:h2:mem:testdb\n    driver-class-name: org.h2.Driver\n    username: \n    password:\n    hikari:\n      leak-detection-threshold: 2000\n  jpa:\n    open-in-view: false\n    hibernate:\n      ddl-auto: create\n    properties:\n      hibernate:\n        dialect: org.hibernate.dialect.H2Dialect\n\nlogging:\n  level:\n    com.zaxxer.hikari.pool.HikariPool: debug\n</code></pre>\n"},{"tags":["java","memory-management","classloader","bytecode"],"answers":[{"owner":{"user_id":458561,"display_name":"boneill"},"up_vote_count":0,"is_accepted":false,"creation_date":1681262221,"answer_id":75991193,"body":"<p>Verification is described in great detail in the JVM specification, section 4.10.</p>\n<p><a href=\"https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10</a></p>\n"},{"owner":{"user_id":2711488,"display_name":"Holger"},"up_vote_count":3,"is_accepted":false,"creation_date":1681740786,"answer_id":76036103,"body":"<p>I don’t know which other two components this book identified, but I have the strong feeling that the book oversimplifies things or uses terms in different ways than other sources.</p>\n<p>There is not a single class loader “used to load all the classes” but an arbitrary number of them. Even <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/lang/ClassLoader.html#builtinLoaders\" rel=\"nofollow noreferrer\">the simplest setup</a> features three of them,</p>\n<ul>\n<li>The Bootstrap class loader</li>\n<li>The Platform class loader</li>\n<li>The System class loader, also known as Application class loader</li>\n</ul>\n<p>The responsibility of the class loaders isn’t linking nor verifying, despite you might find contradicting sources for historical reasons. The main responsibility of a class loader is to locate the definition of a class, read it into a byte array or <code>ByteBuffer</code>, and pass it to the JVM. It’s the JVM which performs linking and verification.</p>\n<p>In the very first Java version, the responsibilities were not as well defined as today, therefore sources from that time or sources blatantly copying from such outdated sources may still tell different things.</p>\n<hr />\n<p>Of course, one could try to explain a Java execution environment by splitting it into arbitrary conceptional components and even use names clashing with terms used in other documentations. That’s not necessarily wrong, but obviously will cause confusion as soon as you try to match this explanation with other sources.</p>\n<hr />\n<p>When you generate bytecode, e.g. by compiling source code, the bytecode is in theory correct and consistent but there are strong reasons not to trust the bytecode blindly in an execution environment.</p>\n<ul>\n<li><p>There is no guaranty that all components (libraries or classes) used in the execution environment are the same version used when compiling. Classes or libraries could have changed in an incompatible way after the classes or libraries using them had been compiled.</p>\n</li>\n<li><p>There is no guarantee that all tools involved (compilers or other code generators) were free of bugs</p>\n</li>\n<li><p>There could be intentional modifications to the compiled code, to circumvent access restrictions or compromise the execution environment in some other way.<br />\nThis was more an issue of the past, when Applets or Webstart applications, in other words, code downloaded from arbitrary internet sources supposed to run with a security manager, were a thing.</p>\n</li>\n</ul>\n<p>A summary is given in <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-12.html#jls-12.3.1\" rel=\"nofollow noreferrer\">The Java Language Specification</a>:</p>\n<blockquote>\n<p><em>Verification</em> ensures that the binary representation of a class or interface is structurally correct. For example, it checks that every instruction has a valid operation code; that every branch instruction branches to the start of some other instruction, rather than into the middle of an instruction; that every method is provided with a structurally correct signature; and that every instruction obeys the type discipline of the Java Virtual Machine.</p>\n</blockquote>\n<p>There’s also a chapter in <a href=\"https://docs.oracle.com/javase/specs/jvms/se20/html/jvms-4.html#jvms-4.10\" rel=\"nofollow noreferrer\">The Java Virtual Machine Specification</a> acknowledging the rationale given above:</p>\n<blockquote>\n<p>Even though a compiler for the Java programming language must only produce <em>class</em> files that satisfy all the static and structural constraints in the previous sections, the Java Virtual Machine has no guarantee that any file it is asked to load was generated by that compiler or is properly formed. Applications such as web browsers do not download source code, which they then compile; these applications download already-compiled <em>class</em> files. The browser needs to determine whether the <em>class</em> file was produced by a trustworthy compiler or by an adversary attempting to exploit the Java Virtual Machine.</p>\n<p><em>An additional problem with compile-time checking is version skew</em>. …</p>\n</blockquote>\n"}],"owner":{"user_id":17940759,"display_name":"opreddy"},"view_count":56,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1681233075,"question_id":75988503,"body":"<p>I am a beginner in java,for understanding java memory management i was reading book 'Java Memory Management\nBy Maaike van Putten , Seán Kennedy ' I encountered this statement &quot;To be able to execute applications, the JVM has roughly three components in place. One is used to load all the classes, the class loader. This is actually a complex process in itself; the classes are loaded and the bytecode is verified.&quot;</p>\n<p>what does class loader verify in bytecode (As i read all syntax verification ,access verification is done while generating bytecode not after generated and loading) can explain what exactly class loader is trying to verify in bytecode</p>\n"},{"tags":["java","docker","maven","dockerfile"],"answers":[{"owner":{"user_id":10008173,"display_name":"David Maze"},"up_vote_count":2,"is_accepted":true,"creation_date":1681208139,"answer_id":75984781,"body":"<p>You need to remove the single quotes inside the JSON-array-syntax <code>CMD</code> line</p>\n<pre class=\"lang-bash prettyprint-override\"><code>CMD [&quot;mvn&quot;, &quot;exec:java&quot;, &quot;-Dexec.mainClass=com.demo.App&quot;, &quot;-e&quot;]\n#                                          ^          ^ no single quotes\n</code></pre>\n<p>When you run this via a shell, the shell parser sees the single-quoted string, ignores the special meaning of any punctuation inside it, and removes the single quotes.  In a Docker exec-form command, none of this processing happens; the <em>only</em> escaping is what's necessary to make the command a valid JSON array.</p>\n<p>This means in your original form the single quotes were passed on to the actual command.  You see that in the final exception, where Maven is trying to interpret a string (still including single quotes) as a Java class name.</p>\n"}],"owner":{"user_id":8294738,"display_name":"romlym"},"view_count":35,"up_vote_count":2,"accepted_answer_id":75984781,"answer_count":1,"score":2,"creation_date":1681206816,"question_id":75984568,"body":"<p>Dockerfile:</p>\n<pre><code>FROM maven:latest\n\nCOPY . /usr/src/myapp\n\nWORKDIR /usr/src/myapp\n\nRUN mvn compile &amp;&amp; mvn clean install\n\nEXPOSE 8000/tcp\n\nCMD [&quot;mvn&quot;, &quot;exec:java&quot;, &quot;-Dexec.mainClass='com.demo.App'&quot;, &quot;-e&quot;]\n</code></pre>\n<p>Execute <code>docker run -it --rm &lt;image&gt;</code> after build, project begins to build but it fails:</p>\n<pre><code>[INFO] Error stacktraces are turned on.\n[INFO] Scanning for projects...\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-deploy-plugin/2.8.2/maven-deploy-plugin-2.8.2.pom\nDownloaded from central: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-deploy-plugin/2.8.2/maven-deploy-plugin-2.8.2.pom (7.1 kB at 12 kB/s)\n...\nWARNING]\njava.lang.ClassNotFoundException: 'com.demo.App'\n    at org.codehaus.mojo.exec.URLClassLoaderBuilder$ExecJavaClassLoader.loadClass (URLClassLoaderBuilder.java:198)\n    at java.lang.ClassLoader.loadClass (ClassLoader.java:520)\n    at org.codehaus.mojo.exec.ExecJavaMojo$1.run (ExecJavaMojo.java:271)\n    at java.lang.Thread.run (Thread.java:833)\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  5.898 s\n[INFO] Finished at: 2023-04-11T09:41:54Z\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal org.codehaus.mojo:exec-maven-plugin:3.1.0:java (default-cli) on project javasnippet: An exception occurred while executing the Java class. 'com.demo.App' -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal org.codehaus.mojo:exec-maven-plugin:3.1.0:java (default-cli) on project javasnippet: An exception occurred while executing the Java class. 'com.demo.App'\n...\nCaused by: java.lang.ClassNotFoundException: 'com.demo.App'\n...\n</code></pre>\n<p>Then I comment out <code>CMD [&quot;mvn&quot;, &quot;exec:java&quot;, &quot;-Dexec.mainClass='com.demo.App'&quot;, &quot;-e&quot;]</code> in Dockerfile which gives me:</p>\n<pre><code>FROM maven:latest\n\nCOPY . /usr/src/myapp\n\nWORKDIR /usr/src/myapp\n\nRUN mvn compile &amp;&amp; mvn clean install\n\nEXPOSE 8000/tcp\n\n# CMD [&quot;mvn&quot;, &quot;exec:java&quot;, &quot;-Dexec.mainClass='com.demo.App'&quot;, &quot;-e&quot;]\n</code></pre>\n<p>Build and run again <code>docker run -it --rm &lt;image&gt; bash</code>, get into the container:</p>\n<pre><code>root@c9ed5282e511:/usr/src/myapp# ls\nDockerfile  pom.xml  src  target\n</code></pre>\n<p>Then I execute <code>mvn exec:java -Dexec.mainClass='com.demo.App' -e</code> to start the project, it works:</p>\n<pre><code>root@c9ed5282e511:/usr/src/myapp# mvn exec:java -Dexec.mainClass='com.demo.App' -e\n[INFO] Error stacktraces are turned on.\n[INFO] Scanning for projects...\nDownloading from central: https://repo.maven.apache.org/maven2/org/apache/maven/plugins/maven-deploy-plugin/2.8.2/maven-deploy-plugin-2.8.2.pom\n...\nDownloaded from central: https://repo.maven.apache.org/maven2/org/apache/commons/commons-exec/1.3/commons-exec-1.3.jar (54 kB at 1.0 MB/s)\nServer started at: Tue Apr 11 09:49:15 UTC 2023\n</code></pre>\n<p>Please guide me why this is happening and where am I doing wrong.</p>\n<p>If any source code is needed please let me know.</p>\n"},{"tags":["java","spring","spring-data-jpa"],"answers":[{"owner":{"user_id":21613121,"display_name":"user21613121"},"up_vote_count":2,"is_accepted":false,"creation_date":1681169115,"answer_id":75981422,"body":"<p>This code uses the @Transactional annotation, which means that it will execute as a single transaction in the database. This means that if two or more threads or processes are running this code at the same time, the database will ensure that they will not assign the same code to two different services.</p>\n<p>When the code is retrieved from the <a href=\"https://knowledgeforu.info/\" rel=\"nofollow noreferrer\">Code Repository</a>, it is updated to “assigned” status and saved. Since this is done inside a transaction, it will ensure that the status is updated atomically and other threads or processes will not be able to retrieve the same code while the transaction is still in progress.</p>\n<p>Similarly, when the service is updated with the assigned code and saved to the Service Repository, it will also be done atomically inside the same transaction.</p>\n<p>So, this code is designed to ensure that no two services are assigned the same code, even when multiple services are activated at the same time.</p>\n"},{"owner":{"user_id":21279235,"display_name":"LQF-developer"},"up_vote_count":0,"is_accepted":false,"creation_date":1681176561,"answer_id":75981807,"body":"<p><code>@Transactional</code> is used to implement local affair. It will make operation  database isolate.So if the environment is stand-alone， you can use it.</p>\n"},{"owner":{"user_id":3426309,"display_name":"Andrey B. Panfilov"},"up_vote_count":1,"is_accepted":false,"creation_date":1681201820,"answer_id":75983872,"body":"<p>Answering the initial Q:</p>\n<blockquote>\n<p>What I want to know, if this code is enough to keep concurrency if two or more services are being activated at the same time. Will this code to prevent to use the same code twice?</p>\n</blockquote>\n<p>No. The reasoning is following:</p>\n<ol>\n<li>in case of <code>read committed</code> isolation level (which is the default for the most mature DB's) your code is facing with <code>lost update phenomena</code>: it acquires <code>Code</code>s which have <code>status=free</code> and updates <code>status</code> to <code>acquired</code> not taking into account the fact the code has been potentially changed between acquisition and update</li>\n<li>in case of <code>repeatable read</code> isolation level (default for <code>MySQL</code>) or higher you code may throw dumb errors like <code>could not serialize access due to concurrent update</code> and you should be ready to somehow mitigate such errors.</li>\n</ol>\n<p><a href=\"https://stackoverflow.com/a/75982092/3426309\">Suggestion of @nathan-hughes</a> to use <code>row-level locks</code> is a good starting point, however <code>spring-data</code> API does not provide enough control over locking behaviour to make the code more concurrent.</p>\n"}],"owner":{"user_id":1901823,"display_name":"Mariano L"},"view_count":97,"up_vote_count":2,"answer_count":3,"score":2,"creation_date":1681168715,"question_id":75981392,"body":"<p>I have a table that contains a &quot;stock&quot; of codes to be used, like licenses. The repository is called CodeRepository. That code can be used just once so I need to assign those codes, once per service i'm activating. The repository for the services that use those codes is called ServiceRepository. I wrote the following code:</p>\n<pre><code>@Transactional\npublic void assignFreeCodeToService(Service service) {\n    Code code = CodeRepository.findFirstByStatus(&quot;free&quot;).orElseThrow(() -&gt; new ApiException(ApiException.ErrorCode.NOT_FOUND, &quot;No available Code was found&quot;));\n    // change code status\n    code.setStatus(&quot;assigned&quot;);\n    // assign the code to the service\n    service.setCode(code.geId());\n    // save the code new status\n    codeRepository.save(code);\n    // save the service with the new code\n    serviceRepository.save(service);\n}\n</code></pre>\n<p>So, when i'm activating a service, this will assign a &quot;code&quot; and save it. What I want to know, if this code is enough to keep concurrency if two or more services are being activated at the same time. Will this code to prevent to use the same code twice?</p>\n"},{"tags":["java","openapi","openapi-generator"],"answers":[{"owner":{"user_id":8041003,"display_name":"John Williams"},"up_vote_count":2,"is_accepted":true,"creation_date":1681147118,"answer_id":75979192,"body":"<p>It is not possible to force an open-api POST requestBody with application/x-www-form-urlencoded content to generate a Java Controller method that accepts a  @RequestBody instead of @RequestParam.</p>\n<p>The reason is that the <em>The Servlet API requires ServletRequest.getParameter() methods to support <strong>form field</strong> access only for <strong>HTTP POST</strong></em>.- from <a href=\"https://docs.spring.io/spring-framework/docs/6.0.x/reference/html/web.html#filters-http-put\" rel=\"nofollow noreferrer\">spring-framework/docs</a></p>\n<p>Also <a href=\"https://tomcat.apache.org/tomcat-5.5-doc/servletapi/javax/servlet/ServletRequest.html#getParameter(java.lang.String)\" rel=\"nofollow noreferrer\">ServletRequest.html#getParameter(java.lang.String)</a></p>\n"}],"owner":{"user_id":21260927,"display_name":"Ananya"},"view_count":78,"up_vote_count":2,"accepted_answer_id":75979192,"answer_count":1,"score":2,"creation_date":1681138840,"question_id":75978209,"body":"<p>I am using openapi 3.0.3 and I am trying to write an API which accepts data in the form of\n'application/x-www-form-urlencoded' by api specification looks something like this:</p>\n<pre><code>/path/to/api/v1/testApi:\n    post:\n      tags:\n        - Extract data\n      operationId: &quot;testApi&quot;   \n    requestBody:\n     content:\n       application/x-www-form-urlencoded:\n         schema:\n          type: object\n          properties:\n            effectiveDate:\n              type: string\n     required: true\n</code></pre>\n<p>using the above specification when an api is generated automatically, the request is accepted by the api as @RequestParam.</p>\n<pre><code>ResponseEntity&lt;String&gt; testAPi(\n        @Parameter(name = &quot;effectiveDate&quot;, description = &quot;&quot;) @Valid @RequestParam(value = &quot;effectiveDate&quot;, required = false) String effectiveDate\n    ) {\n        return new ResponseEntity&lt;&gt;(HttpStatus.NOT_IMPLEMENTED);\n\n    }\n</code></pre>\n<p>Is there a possibility to make it accept @RequestBody instead of @RequestParam with the same x-www-form-urlencoded data?</p>\n"},{"tags":["java","amazon-web-services","amazon-dynamodb"],"comments":[{"owner":{"user_id":271415,"display_name":"jarmod"},"edited":false,"comment_id":133972897,"body":"Why are your clients generating such large partition keys? Perhaps you should address that issue. Secondly, why not simply catch this DynamoDB error when it happens and report a relevant error back to the client?"},{"owner":{"user_id":3591946,"display_name":"Kohei Nozaki"},"edited":false,"comment_id":133973663,"body":"The key can come from public internet. I cannot control what a malicious user does. Also it’s not so easy to tell what exactly the problem was from the error from DynamoDB. I don’t want to parse the error message string for example."}],"answers":[{"owner":{"user_id":7909676,"display_name":"Lee Hannigan"},"up_vote_count":1,"is_accepted":true,"creation_date":1680860558,"answer_id":75957285,"body":"<p>Yes simply counting the byte length will allow you to avoid hitting the 2KB partition key value limit.</p>\n"},{"owner":{"user_id":17464257,"display_name":"Alex Chadyuk"},"up_vote_count":2,"is_accepted":false,"creation_date":1680860983,"answer_id":75957331,"body":"<p>If your table does not use a sort key, the 2048 bytes should fit in the length of the partition-key name, in addition to the UTF-8-encoded value.  For a composite key, the length is limited to 1024.</p>\n"}],"owner":{"user_id":3591946,"display_name":"Kohei Nozaki"},"view_count":64,"up_vote_count":2,"accepted_answer_id":75957285,"answer_count":2,"score":2,"creation_date":1680855147,"question_id":75956642,"body":"<p>I have a Java-based backend app which issues a getItem request to my DynamoDB table based on a request from my user. Occasionally my user sends a request to my app which ends up sending a getItem request to DynamoDB which hits the maximum size limit of the key below (quote from <a href=\"https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.NamingRulesDataTypes.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/amazondynamodb/latest/developerguide/HowItWorks.NamingRulesDataTypes.html</a> ):</p>\n<blockquote>\n<p>For a simple primary key, the maximum length of the first attribute value (the partition key) is 2048 bytes.</p>\n</blockquote>\n<p>I get this error from the DynamoDB SDK when that happens: <code>One or more parameter values were invalid: Size of hashkey has exceeded the maximum size limit of 2048 bytes</code></p>\n<p>Now I need to implement a validation for this situation where my user sends a request which hits the limit to avoid the error. My question here is: what is the right way to implement this validation in my app? Judging by the documentation linked above, DynamoDB seems to be using UTF-8 internally, so will something like below be fine?</p>\n<pre><code>boolean isPartitionKeySizeValid(String partitionKey) {\n    int size = partitionKey.getBytes(StandardCharsets.UTF_8).length;\n    return 1 &lt;= size &amp;&amp; size &lt;= 2048;\n}\n</code></pre>\n<p>My app uses the <code>com.amazonaws:aws-java-sdk-dynamodb</code> library to interact with DynamoDB.</p>\n"},{"tags":["java","scala","utf-8","sbt","sbt-assembly"],"comments":[{"owner":{"user_id":12083015,"display_name":"Erwin"},"edited":false,"comment_id":133968329,"body":"According to the <a href=\"https://stackoverflow.com/a/12111542/12083015\">correct answer</a> to the link that you gave, the problem was when writing the file, not when downloading the file. Maybe you can check it too."},{"owner":{"user_id":3439404,"display_name":"JosefZ"},"edited":false,"comment_id":133974494,"body":"<code>CAFEBABE</code> is (hexadecimal) Java class file <a href=\"https://en.wikipedia.org/wiki/List_of_file_signatures\" rel=\"nofollow noreferrer\">signature</a> (so called <i>magic number</i>) while <code>EFBFBD</code> are <code>UTF-8</code> bytes for <a href=\"https://symbl.cc/en/FFFD/\" rel=\"nofollow noreferrer\">Replacement Character</a> and <code>4022320623</code> is decimal representation for <code>0xEFBFBDEF</code> (== 4 leading bytes in <b>EFBFBDEF</b>BFBD)."}],"answers":[{"owner":{"user_id":5249621,"display_name":"Dmytro Mitin"},"up_vote_count":2,"is_accepted":true,"creation_date":1680838590,"answer_id":75955286,"body":"<p>It's hard to say without <code>libraryDependencies</code> and <code>assemblyMergeStrategy</code> of your <code>build.sbt</code> and without a specific class of assembly jar that is not valid.</p>\n<p>I suspect that <code>MergeStrategy.concat</code> or <code>MergeStrategy.filterDistinctLines</code> was incorrectly applied to some <code>.class</code> files and this leads to not valid class files. <code>MergeStrategy.concat / filterDistinctLines</code> are for config files, <code>.properties</code> files, service files (i.e. files with names <code>com.example.SomeInterface</code> and contents <code>com.example.impl.SomeImplementation</code>) etc., not for <code>.class</code> files.</p>\n<p>You can temporarily change <code>assemblyMergeStrategy</code> to</p>\n<pre><code>assembly / assemblyMergeStrategy := {\n  case _ =&gt; MergeStrategy.singleOrError\n}\n</code></pre>\n<p>to see all the duplicates, or to</p>\n<pre><code>ThisBuild / assemblyMergeStrategy := {\n  case PathList(ps @ _*) if ps.last endsWith &quot;.class&quot; =&gt; MergeStrategy.singleOrError\n  case x =&gt;\n    val standardStrategy = (ThisBuild / assemblyMergeStrategy).value\n    standardStrategy(x)\n}\n</code></pre>\n<p>to see all the <code>.class</code> duplicates. You should see among them the class files that become not valid upon <code>MergeStrategy.concat/filterDistinctLines</code>.</p>\n<p>Sbt 1.3.13 is quite old, current is 1.8.2.</p>\n"}],"owner":{"user_id":21584819,"display_name":"Bean"},"view_count":63,"up_vote_count":2,"accepted_answer_id":75955286,"answer_count":1,"score":2,"creation_date":1680833710,"question_id":75955027,"body":"<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Tools</th>\n<th>Version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>OS</td>\n<td>Win10</td>\n</tr>\n<tr>\n<td>JavaJDK</td>\n<td>11</td>\n</tr>\n<tr>\n<td>Scala</td>\n<td>2.13.5</td>\n</tr>\n<tr>\n<td>SBT</td>\n<td>1.3.13</td>\n</tr>\n<tr>\n<td>Assembly</td>\n<td>2.1.0</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p><a href=\"https://github.com/sbt/sbt-assembly\" rel=\"nofollow noreferrer\">The repository of sbt-assembly</a></p>\n<ol>\n<li>The Error message.</li>\n</ol>\n<p>I run <code>assembly</code> in sbt shell and it prints [success].</p>\n<p>Then I try to run the output <em>.jar</em> with <code>java -jar MyProject.jar</code> in cmd, and get this error:</p>\n<pre><code>java.lang.ClassFormatError: Incompatible magic value 4022320623 in class file Main\n</code></pre>\n<p>The same error message as this one: <a href=\"https://stackoverflow.com/questions/12111065/java-incompatible-magic-value-4022320623\">Java Incompatible magic value 4022320623</a></p>\n<p>But all my work are done locally without any upload or download operation.</p>\n<ol start=\"2\">\n<li>The header of the class files.</li>\n</ol>\n<p>I decompression the <em>.jar</em> package and find that all <em>.class</em> files are started with <code>0xEFBFBD EFBFBD</code>, which means the character cannot be recognized by <code>UTF-8</code>.</p>\n<p>I've run <code>sbt package</code> before, in that case, every java class file is started with <code>0xCAFE BABE</code>.</p>\n<p>I compared these two class files in binary form. Most of them are the same, but the one generated by assembly command has several <code>0xEFBFBD</code> in it.</p>\n<ol start=\"3\">\n<li>What I'm trying to do.</li>\n</ol>\n<p>I'm trying to assembly a large project with multiple modules to one <em>.jar</em> file.</p>\n<ul>\n<li><p>The whole project is encoded in <code>UTF-8</code> =&gt;\nIDEA: Global / Project Encoding: <code>UTF-8</code></p>\n</li>\n<li><p>SBT has VM option: <code>-Dfile.encoding=UTF-8</code></p>\n</li>\n<li><p>build.sbt has line: <code>javaOptions ++= Seq(&quot;-encoding&quot;, &quot;UTF-8&quot;)</code></p>\n</li>\n</ul>\n<p>I tried everything I can to make sure all the files are encoded &amp; decoded in <code>UTF-8</code>.</p>\n<ol start=\"4\">\n<li>Other versions of assembly.</li>\n</ol>\n<p>I also tried sbt-assembly releases <em>2.1.1</em> and <em>2.0.0</em>, and got the same results.</p>\n<p>I need to customize the Merge Strategy which is supported after <em>2.0.0</em>, so I didn't try more versions.</p>\n<p>I can't show any code here since I don't have right to do so. But if you need more information about this issue please let me know.</p>\n"},{"tags":["java","android","firebase","google-cloud-platform","firebase-authentication"],"comments":[{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"edited":false,"comment_id":133936104,"body":"Are you sure you&#39;re authenticated with a Google account on the device where you&#39;re launching the app?"},{"owner":{"user_id":21442434,"display_name":"Edziu Kowalski"},"edited":false,"comment_id":133940521,"body":"I&#39;m not authenticated with a Google account on the device. That&#39;s why <code>setFilterByAuthorizedAccounts</code> is set to <code>false</code>, so I could choose an account I want to log in with."},{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"edited":false,"comment_id":133941009,"body":"To choose an account, you have to be authenticated with the account first on the device. Have you even tried it? When you&#39;re using <code>.setFilterByAuthorizedAccounts(false)</code> it means that you want to show all accounts on the device. If you aren&#39;t authenticated, then there is nothing to show."},{"owner":{"user_id":21442434,"display_name":"Edziu Kowalski"},"edited":false,"comment_id":133941505,"body":"Oh, alright, so I have to have every google account authenticated on the device? Because, now, that I&#39;ve authenticated my main google account on the device the authentication inside my app works, but it only shows the main account. I&#39;ve used other applications and there&#39;s almost always an option to authenticate with a new account without adding it to the device."},{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"edited":false,"comment_id":133942360,"body":"Aside from my answer, since you&#39;re using Java, I think that this <a href=\"https://medium.com/firebase-tips-tricks/how-to-create-a-clean-firebase-authentication-using-mvvm-37f9b8eb7336\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/FirebaseAuthentication\" rel=\"nofollow noreferrer\">repo</a>."},{"owner":{"user_id":21442434,"display_name":"Edziu Kowalski"},"edited":false,"comment_id":133942669,"body":"I&#39;ve already read it. It&#39;s a nice resource, I need to read more about the differences between the one tap auth and the &quot;old&quot; way. But now, I have to find out why registerForActivityResult gives Activity.RESULT_CANCEL instead of RESULT_OK... eh.. why it cannot just work hahaha. Thanks for help, though"}],"answers":[{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"up_vote_count":2,"is_accepted":true,"creation_date":1680700350,"answer_id":75939878,"body":"<p>To be able to choose an account when you authenticate with Google in your app, you have to be authenticated first with that account on the device where you're launching the app.</p>\n<p>If you're using in your code <code>.setFilterByAuthorizedAccounts(false)</code> it means that you want to show all accounts on the device. If you are not authenticated with any account, then there is nothing to show but an Exception.</p>\n<p>If you want to be able to choose between multiple accounts, then you have to sign in with each account on the device.</p>\n<blockquote>\n<p>I've used other applications and there's almost always an option to authenticate with a new account without adding it to the device.</p>\n</blockquote>\n<p>All devices with Android have associated at least a Google account. So in order to be able to sign in with Google inside your app, you have to be authenticated on your device first or asked to sign in with a Google account.</p>\n"}],"owner":{"user_id":21442434,"display_name":"Edziu Kowalski"},"view_count":94,"up_vote_count":2,"accepted_answer_id":75939878,"answer_count":1,"score":2,"creation_date":1680645885,"question_id":75934193,"body":"<p>I want to implement signing in to my application using a Google account. I use Firebase to authenticate the user.</p>\n<p>I've already read the documentation like million times. I've added SH1 debug key to Firebase project as a fingerprint and I use <code>Web SDK configuration</code> from the Firebase as a web client id:\n<a href=\"https://i.stack.imgur.com/OoPSi.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/OoPSi.png\" alt=\"this thing\" /></a></p>\n<p>I've got it set up in strings.xml file</p>\n<p><code>&lt;string name=&quot;web_client_id&quot;&gt;**HERE**&lt;/string&gt;</code></p>\n<p>the rest of my code looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class AuthFragment extends Fragment {\n    private FragmentAuthBinding binding;\n    private SignInClient oneTapClient;\n    ActivityResultLauncher&lt;Intent&gt; oneTapLauncher = registerForActivityResult(new ActivityResultContracts.StartActivityForResult(),\n        result -&gt; {\n            if (result.getResultCode() == Activity.RESULT_OK) {\n                Intent data = result.getData();\n                try {\n                    var credential = oneTapClient.getSignInCredentialFromIntent(data);\n                    String idToken = credential.getGoogleIdToken();\n                } catch (ApiException e) {\n                    throw new RuntimeException(e);\n                }\n            }\n        });\n    public AuthFragment() {}\n\n    @Override\n    public View onCreateView(@NonNull LayoutInflater inflater, ViewGroup container, Bundle savedInstanceState) {\n        binding = FragmentAuthBinding.inflate(inflater, container, false);\n        return binding.getRoot();\n    }\n\n    public void onViewCreated(@NonNull View view, Bundle savedInstanceState) {\n        super.onViewCreated(view, savedInstanceState);\n        \n        HandleGoogleLogin();\n    }\n\n    @Override\n    public void onDestroyView() {\n        super.onDestroyView();\n        binding = null;\n    }\n\n    void HandleGoogleLogin()\n    {\n        oneTapClient = Identity.getSignInClient(requireActivity());\n        var signInRequest = BeginSignInRequest.builder()\n                .setGoogleIdTokenRequestOptions(BeginSignInRequest.GoogleIdTokenRequestOptions.builder()\n                        .setSupported(true)\n                        .setServerClientId(getString(R.string.web_client_id))\n                        .setFilterByAuthorizedAccounts(false)\n                        .build())\n                .build();\n\n        var googleLoginButton = binding.googleLoginButton;\n        googleLoginButton.setOnClickListener(v -&gt; {\n            oneTapClient.beginSignIn(signInRequest)\n                    .addOnSuccessListener(requireActivity(), result -&gt; {\n                        var intentSenderRequest = new IntentSenderRequest\n                                .Builder(result.getPendingIntent().getIntentSender())\n                                .build();\n                        oneTapLauncher.launch(intentSenderRequest.getFillInIntent());\n                    })\n                    .addOnFailureListener(requireActivity(), e -&gt; {\n                        Log.d(&quot;googleLoginButton&quot;, &quot;oneTapClient.beginSignIn:onError - &quot; + e.getMessage());\n                        // Handle errors or continue presenting the signed-out UI\n                    });\n        });\n    }\n}\n</code></pre>\n<p>this is not the only way I've tried to implement it. I've also tried adding sh1 key to <a href=\"https://console.cloud.google.com/\" rel=\"nofollow noreferrer\">https://console.cloud.google.com/</a> and configuring OAuth 2.0 from the <a href=\"https://console.cloud.google.com/apis/credentials?project=myproject\" rel=\"nofollow noreferrer\">https://console.cloud.google.com/apis/credentials?project=myproject</a> site:</p>\n<p><a href=\"https://i.stack.imgur.com/1wGuh.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1wGuh.png\" alt=\"cloud.google\" /></a></p>\n<p>but nothing actually works.</p>\n<p>All I always get is <code>Log.d(&quot;googleLoginButton&quot;, &quot;oneTapClient.beginSignIn:onError - &quot; + e.getMessage());</code> -&gt; <code>Cannot find a matching credential.</code></p>\n<p>I don't know what I do wrong. Note that I've got <code>setFilterByAuthorizedAccounts</code> set to <code>false</code>.</p>\n<p>How can I make it work? What do I do wrong?</p>\n<p>I've already read:</p>\n<p><a href=\"https://stackoverflow.com/questions/61768804/getting-16-cannot-find-a-matching-credential-when-doing-one-tap-sign-in-and-s\">Getting &quot;16: Cannot find a matching credential&quot; when doing One Tap sign-in and sign-up on Android</a></p>\n<p><a href=\"https://stackoverflow.com/questions/72175934/google-one-tap-sign-in\">Google One Tap Sign In</a></p>\n<p><a href=\"https://stackoverflow.com/questions/70101036/firebase-google-auth-signing-out-and-logging-in-again-will-log-in-with-the-last\">Firebase Google auth, signing out and logging in again will log in with the last signed account</a></p>\n<p><a href=\"https://stackoverflow.com/questions/42312758/when-users-signout-of-my-firebase-app-why-doesnt-it-also-signout-from-the-auth\">When users SignOut of my Firebase app, why doesn&#39;t it also SignOut from the auth provider, say Google?</a></p>\n<p><a href=\"https://stackoverflow.com/questions/38707133/google-firebase-sign-out-and-forget-user-in-android-app\">Google Firebase sign out and forget user in Android app</a></p>\n<p><a href=\"https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-google-one-tap-in-jetpack-compose-60b30e621d0d\" rel=\"nofollow noreferrer\">https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-google-one-tap-in-jetpack-compose-60b30e621d0d</a></p>\n<p>nothing helps.</p>\n"},{"tags":["java","thymeleaf"],"answers":[{"owner":{"user_id":12567365,"display_name":"andrewJames"},"up_vote_count":2,"is_accepted":true,"creation_date":1680630608,"answer_id":75932411,"body":"<p>One Java approach is to generate a random value using your method if you want, or see <a href=\"https://stackoverflow.com/q/363681/12567365\">How do I generate random integers within a specific range in Java?</a>, if you want an integer with a certain number of digits in it.</p>\n<p>Then you can add that value (let's call it <code>randNumber</code>) to the template's model in the usual Spring way - for example:</p>\n<pre><code>model.addAttribute(&quot;randNumber&quot;, randNumber);\n</code></pre>\n<p>Now you can use the following in your Thymeleaf template:</p>\n<pre><code>&lt;script th:src=&quot;@{/main.js(version=${randNumber})}&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>Note how the variable needs to be a Thymeleaf expression in <code>${...}</code>.</p>\n<hr />\n<p>One alternative approach, which may be acceptable is to use Thymeleaf's expression utility method for random alphanumeric strings:</p>\n<pre><code>${#strings.randomAlphanumeric(count)}\n</code></pre>\n<p>So, for example, for a string of length 5:</p>\n<pre><code>&lt;script th:src=&quot;@{/main.js(version=${#strings.randomAlphanumeric(5)})}&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>You don't need any Java for this.</p>\n<p>The end result would be similar to the first approach, but can contain characters as well as digits:</p>\n<pre><code>&lt;script src=&quot;/main.js?version=2Q931&quot;&gt;&lt;/script&gt;\n</code></pre>\n"}],"owner":{"user_id":577647,"display_name":"tolga"},"view_count":38,"up_vote_count":2,"accepted_answer_id":75932411,"answer_count":1,"score":2,"creation_date":1680616143,"question_id":75930169,"body":"<p>I have a main.js in thymeleaf template, each time I call it I want to add a version parameter so that it will not be cached and my latest changes will work.</p>\n<pre><code>    &lt;script src=&quot;/main.js?version=345345456&quot;&gt;&lt;/script&gt;\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p>Since it's the layout behind all other templates, I don't want to pass a variable from controllers.</p>\n<p>So I decided to add a bean method to my application class</p>\n<pre><code>@SpringBootApplication\npublic class NexusApplication {\n\n    @Bean\n    public double jsVersion(){\n        return Math.random();\n    }\n\n}\n</code></pre>\n<p>Than I added:</p>\n<pre><code>&lt;script th:src=&quot;@{/js/my-script.js(version=NexusApplication.jsVersion())}&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>Output is:</p>\n<pre><code>&lt;script th:src=&quot;@{/main.js?(version=NexusApplication.jsVersion())}&quot;&gt;&lt;/script&gt;\n</code></pre>\n<p>What am I missing? How should I approach this issue in a better way?</p>\n"},{"tags":["java","jooq","jooq-codegen"],"comments":[{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"edited":false,"comment_id":133937762,"body":"Do you have to use MySQL&#39;s encryption/decryption functions, or can you work with client side encryption/decryption as well? And what&#39;s the rationale for this decision?"},{"owner":{"user_id":8903828,"display_name":"introvertkernel"},"edited":false,"comment_id":133941267,"body":"To not deviate from existing conventions in the system, I&#39;ve to use the MySQL&#39;s encryption/decryption methods."},{"owner":{"user_id":8903828,"display_name":"introvertkernel"},"edited":false,"comment_id":133941307,"body":"I couldn&#39;t actually figure out the way to access current <code>org.jooq.RecordContext</code> inside <code>Converter</code>"},{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"edited":false,"comment_id":133941474,"body":"Yeah, because that&#39;s already possible today. There&#39;s a pending feature request for the server side implementation, but it&#39;s not ready yet for jOOQ 3.18."},{"owner":{"user_id":8903828,"display_name":"introvertkernel"},"edited":false,"comment_id":133941580,"body":"@LukasEder I&#39;ve updated my question, do you see any other possibility to achieve my goal in Jooq v.3.17.8 ? Thanks."},{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"edited":false,"comment_id":133941635,"body":"Couldn&#39;t find the feature request, so I created a new one, just in case: <a href=\"https://github.com/jOOQ/jOOQ/issues/14913\" rel=\"nofollow noreferrer\">github.com/jOOQ/jOOQ/issues/14913</a>"}],"answers":[{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"up_vote_count":2,"is_accepted":true,"creation_date":1680698518,"answer_id":75939555,"body":"<h2>An out of the box feature</h2>\n<p>As of jOOQ 3.18, there isn't an out of the box feature for this sort of computation. I've created a feature request, as this isn't the first time someone was looking for it:</p>\n<ul>\n<li><a href=\"https://github.com/jOOQ/jOOQ/issues/14913\" rel=\"nofollow noreferrer\">https://github.com/jOOQ/jOOQ/issues/14913</a></li>\n</ul>\n<h2>Custom implementation on the server side</h2>\n<p>If you must encrypt / decrypt on the server side using SQL expressions, perhaps you can get away with the new experimental <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/model-api/\" rel=\"nofollow noreferrer\">query object model</a> <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/model-api/model-api-traversal/\" rel=\"nofollow noreferrer\">traversal</a> and <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/model-api/model-api-replacement/\" rel=\"nofollow noreferrer\">replacement</a> features.</p>\n<p>The idea is that you:</p>\n<ul>\n<li>Specify which columns or types are supposed to be encrypted (either in a configuration or using a custom data type)</li>\n<li>Then transform all SQL queries to always\n<ul>\n<li>Replace <code>Field&lt;MyType&gt;</code> by <code>Field&lt;byte[]&gt;</code> using encryption in contexts where a bind variable is written</li>\n<li>Replace generated SQL for all <code>Field&lt;MyType&gt;</code> to decryption in contexts where a projection is made</li>\n<li>Leave other expressions untouched</li>\n</ul>\n</li>\n</ul>\n<h2>Custom implementation on the client side</h2>\n<p>All of this seems much easier to achieve with a simple <code>Converter</code>, if you can encrypt / decrypt on the client instead of the server.</p>\n"}],"owner":{"user_id":8903828,"display_name":"introvertkernel"},"view_count":38,"up_vote_count":2,"accepted_answer_id":75939555,"answer_count":1,"score":2,"creation_date":1680615873,"question_id":75930129,"body":"<p>I'm trying to achieve below using Jooq library,</p>\n<ul>\n<li>Encrypt and decrypt specified column using org.jooq.util.mysql.MySQLDSL methods</li>\n<li>This must be a jooq global configuration, so that whenever a new query method return fetch/insert/update the record encryption/decryption should be automatically taken care.</li>\n<li>Secret key for encryption/decryption will be value from the another column in the same table</li>\n<li>I'm trying to avoid Spring framework here.</li>\n</ul>\n<p>Currently I'm trying to do this using <code>org.jooq.Converter</code> and <code>org.jooq.meta.jaxb.ForcedType</code> But</p>\n<ul>\n<li>Not able to access <code>org.jooq.RecordContext</code> in the CustomConverter class to get the secret key</li>\n<li>Also I'm not able to make this generic configuration</li>\n</ul>\n<p>Links I'm referring to:</p>\n<ul>\n<li><a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/util/mysql/MySQLDSL.html\" rel=\"nofollow noreferrer\">https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/util/mysql/MySQLDSL.html</a></li>\n<li><a href=\"https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/util/mysql/MySQLDSL.html\" rel=\"nofollow noreferrer\">https://www.jooq.org/javadoc/latest/org.jooq/org/jooq/util/mysql/MySQLDSL.html</a></li>\n<li><a href=\"https://www.jooq.org/doc/3.18/manual/code-generation/codegen-advanced/codegen-config-database/codegen-database-forced-types/codegen-database-forced-types-converter/\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/3.18/manual/code-generation/codegen-advanced/codegen-config-database/codegen-database-forced-types/codegen-database-forced-types-converter/</a></li>\n<li><a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/fetching/data-type-conversion/\" rel=\"nofollow noreferrer\">https://www.jooq.org/doc/latest/manual/sql-execution/fetching/data-type-conversion/</a></li>\n</ul>\n<p>Update:\nIn short this is what I'm trying to achieve through Jooq:</p>\n<pre><code>CREATE TABLE TESTCRYPT(\nId mediumint AUTO_INCREMENT,\nSecret int NOT NULL,\nencrypteddata BLOB,\nPRIMARY KEY(Id)\n);\n\nINSERT INTO TESTCRYPT(Secret,encrypteddata) VALUE ('1234',AES_ENCRYPT('my-data','1234'));\n\nSELECT Secret ,AES_DECRYPT(encrypteddata,Secret) from TESTCRYPT t ;\n\n</code></pre>\n"},{"tags":["java","pdf-generation","emoji","apache-fop"],"comments":[{"owner":{"user_id":20306007,"display_name":"life888888"},"edited":false,"comment_id":133917975,"body":"You also need to modify <code>fo-pdf.xsl</code>, like this <code>&lt;xsl:attribute-set name=&quot;footer.content.properties&quot;&gt;          &lt;xsl:attribute name=&quot;font-family&quot;&gt;Noto Color Emoji,Sans-serif,Arial&lt;&#47;xsl:attribute&gt;          &lt;xsl:attribute name=&quot;font-size&quot;&gt;8pt&lt;&#47;xsl:attribute&gt;      &lt;&#47;xsl:attribute-set&gt;</code> , add your font into some define like this <code>footer.content.properties</code>"},{"owner":{"user_id":4453460,"display_name":"lfurini"},"edited":false,"comment_id":133921422,"body":"Do you get any error / warning if you run the pdf creation from a command prompt?"},{"owner":{"user_id":2491227,"display_name":"Kevin Brown"},"edited":false,"comment_id":133930689,"body":"Have you checked FOP support documents? They would need to support supplemental planes .. aka: Unicode Character “🐐” (U+1F410) = Unicode 1F410"},{"owner":{"user_id":2837973,"display_name":"SachinD"},"edited":false,"comment_id":134020342,"body":"@life888888 Thanks for the information. I added the &quot;Noto Color Emoji&quot; into the xsl file I use and it stopped outputting #######. But still I&#39;m not able to see the characters in the PDF. What I see is some empty white spaces in the pdf. But when I copy the text including the white spaces in the PDF and paste it into notepad I could see some characters in it. Any idea on what might be causing the issue here?"},{"owner":{"user_id":2837973,"display_name":"SachinD"},"edited":false,"comment_id":134020349,"body":"@lfurini No I couldn&#39;t see any errors in the logs."},{"owner":{"user_id":20306007,"display_name":"life888888"},"edited":false,"comment_id":134028415,"body":"@SachinD, use this font: <a href=\"https://github.com/asciidoctor/asciidoctor-pdf/blob/main/data/fonts/notoemoji-subset.ttf\" rel=\"nofollow noreferrer\">github.com/asciidoctor/asciidoctor-pdf/blob/main/data/fonts/&zwnj;&#8203;&hellip;</a>"}],"answers":[{"owner":{"user_id":2491227,"display_name":"Kevin Brown"},"up_vote_count":2,"is_accepted":false,"creation_date":1680635037,"answer_id":75932970,"body":"<p>I do not believe that would be supported in FOP. Most all the characters in that font are in the Supplementary Multilingual Plane. From FOP documentation:</p>\n<p>&quot;Support for Unicode characters outside of the Base Multilingual Plane (BMP), i.e., characters whose code points are greater than 65535, is not yet implemented. See issue FOP-1969.&quot;</p>\n<p>For instance:</p>\n<p>Unicode Character “🐐” (U+1F410) = Unicode 1F410 = 128016</p>\n<p>If you installed that font in a Windows machine and use charmap to view it, you will find only maybe 35 characters. Searching for one shows no character:</p>\n<p><a href=\"https://i.stack.imgur.com/HoWmz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/HoWmz.png\" alt=\"enter image description here\" /></a></p>\n<p>If you tried to view the entire font, you only see these:</p>\n<p><a href=\"https://i.stack.imgur.com/v0wWE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/v0wWE.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"user_id":2837973,"display_name":"SachinD"},"view_count":76,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680553143,"question_id":75923463,"body":"<p>I'm generating PDF in a web application which is using Apache FOP 2.4. When generating PDF with Emojis it is resulting in the PDF as ###############. But normal alphanumeric text is appearing properly.\nFollowing is how my renderers looks like in fop.xconf file.</p>\n<pre><code>&lt;renderers&gt;\n    &lt;renderer mime=&quot;application/pdf&quot;&gt;\n        &lt;filterList&gt;\n            &lt;value&gt;flate&lt;/value&gt;\n        &lt;/filterList&gt;\n        &lt;fonts&gt;\n            &lt;font embed-url=&quot;ARIAL.TTF&quot;&gt;\n                &lt;font-triplet name=&quot;Arial&quot; style=&quot;normal&quot; weight=&quot;normal&quot;/&gt;\n            &lt;/font&gt;\n            &lt;font embed-url=&quot;ARIALBD.TTF&quot;&gt;\n                &lt;font-triplet name=&quot;Arial&quot; style=&quot;normal&quot; weight=&quot;bold&quot;/&gt;\n            &lt;/font&gt;\n            &lt;font embed-url=&quot;ARIALI.TTF&quot;&gt;\n                &lt;font-triplet name=&quot;Arial&quot; style=&quot;italic&quot; weight=&quot;normal&quot;/&gt;\n            &lt;/font&gt;\n            &lt;font embed-url=&quot;ARIALBI.TTF&quot;&gt;\n                &lt;font-triplet name=&quot;Arial&quot; style=&quot;italic&quot; weight=&quot;bold&quot;/&gt;\n            &lt;/font&gt;\n            &lt;font embed-url=&quot;ARIALUNI.TTF&quot;&gt;\n                &lt;font-triplet name=&quot;Arial Unicode MS&quot; style=&quot;normal&quot; weight=&quot;normal&quot;/&gt;\n            &lt;/font&gt;\n            &lt;font embed-url=&quot;NotoColorEmoji-Regular.ttf&quot;&gt;\n                &lt;font-triplet name=&quot;Noto Color Emoji&quot; style=&quot;normal&quot; weight=&quot;normal&quot;/&gt;\n            &lt;/font&gt;\n            &lt;font embed-url=&quot;MSGOTHIC.TTC&quot; metrics-url=&quot;msgothic.xml&quot;&gt;\n                &lt;font-triplet name=&quot;Gothic&quot; style=&quot;normal&quot; weight=&quot;normal&quot;/&gt;\n                &lt;font-triplet name=&quot;Gothic&quot; style=&quot;normal&quot; weight=&quot;bold&quot;/&gt;\n                &lt;font-triplet name=&quot;Gothic&quot; style=&quot;italic&quot; weight=&quot;normal&quot;/&gt;\n                &lt;font-triplet name=&quot;Gothic&quot; style=&quot;italic&quot; weight=&quot;bold&quot;/&gt;\n            &lt;/font&gt;\n        &lt;/fonts&gt;\n    &lt;/renderer&gt;\n&lt;/renderers&gt;\n\n</code></pre>\n<p>I added the NotoColorEmoji-Regular.ttf to support emojis. But I'm still not getting the emojis in the PDF properly.\nI have added all the font files at the same level as the fop.xconf file.\nHow can I resolve this emoji issue?</p>\n<p><strong>[Update as at 11/04/2023]</strong></p>\n<p>Once I added the &quot;Noto Color Emoji&quot; into the font-family attribute in the XSL file, it stopped showing ####### symbols. Instead now it's giving empty white symbols.</p>\n<p>It order to test this further I created a sample application to generate PDF files using Apache FOP. You can find the project here <a href=\"https://github.com/sachindragh/pdf-testing\" rel=\"nofollow noreferrer\">https://github.com/sachindragh/pdf-testing</a>.</p>\n<p>Following are the java code, xsl file, input.xml and the fop.xonf file contents in it.</p>\n<pre><code>public static void main(String[] args) throws SAXException, TransformerException, IOException {\n    FopFactory fopFactory = FopFactory.newInstance(new File(&quot;./fop.xconf&quot;));\n    OutputStream out = new BufferedOutputStream(new FileOutputStream(new File(&quot;fop2_8output.pdf&quot;)));\n    try {\n        Fop fop = fopFactory.newFop(MimeConstants.MIME_PDF, out);\n        TransformerFactory factory = TransformerFactory.newInstance();\n        Transformer transformer = factory.newTransformer(new StreamSource(new File(&quot;stylesheet.xsl&quot;)));\n        Source src = new StreamSource(new File(&quot;input.xml&quot;));\n        Result res = new SAXResult(fop.getDefaultHandler());\n        transformer.transform(src, res);\n        System.out.println(&quot;PDF file generated successfully.&quot;);\n    } finally {\n        out.close();\n    }\n}\n</code></pre>\n<p>stylesheet.xsl</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;xsl:stylesheet version=&quot;1.0&quot;\n                xmlns:xsl=&quot;http://www.w3.org/1999/XSL/Transform&quot;\n                xmlns:fo=&quot;http://www.w3.org/1999/XSL/Format&quot;&gt;\n    &lt;xsl:output method=&quot;xml&quot; indent=&quot;yes&quot;/&gt;\n    &lt;xsl:template match=&quot;/&quot;&gt;\n        &lt;!-- Vladimir Script    VLADIMIR.TTF --&gt;\n        &lt;!-- Viner Hand ITC     VINERITC.TTF --&gt;\n        &lt;!-- Noto Color Emoji   NotoColorEmoji-Regular.ttf --&gt;\n        &lt;fo:root font-family=&quot;Noto Color Emoji,Viner Hand ITC&quot;&gt;\n            &lt;fo:layout-master-set&gt;\n                &lt;fo:simple-page-master master-name=&quot;A4-portrait&quot;\n                                       page-height=&quot;29.7cm&quot; page-width=&quot;21.0cm&quot; margin=&quot;2cm&quot;&gt;\n                    &lt;fo:region-body/&gt;\n                &lt;/fo:simple-page-master&gt;\n            &lt;/fo:layout-master-set&gt;\n            &lt;fo:page-sequence master-reference=&quot;A4-portrait&quot;&gt;\n                &lt;fo:flow flow-name=&quot;xsl-region-body&quot;&gt;\n                    &lt;fo:block font-family=&quot;Noto Color Emoji,Viner Hand ITC&quot;&gt;\n                        &lt;xsl:value-of select=&quot;value&quot;/&gt;\n                    &lt;/fo:block&gt;\n                &lt;/fo:flow&gt;\n            &lt;/fo:page-sequence&gt;\n        &lt;/fo:root&gt;\n    &lt;/xsl:template&gt;\n&lt;/xsl:stylesheet&gt;\n</code></pre>\n<p>input.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;value&gt;\n    This is a sample text Emojis\n    BMP Glyphs  &amp;#x2663; &amp;#x2705;\n    Non-BMP Glyphs  &amp;#x1F410; &amp;#x1F600;\n&lt;/value&gt;\n</code></pre>\n<p>fop.xconf</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot;?&gt;\n&lt;fop version=&quot;1.0&quot;&gt;\n  &lt;renderers&gt;\n    &lt;renderer mime=&quot;application/pdf&quot;&gt;\n      &lt;filterList&gt;\n        &lt;value&gt;flate&lt;/value&gt;\n      &lt;/filterList&gt;\n      &lt;fonts&gt;\n        &lt;font embed-url=&quot;NotoColorEmoji-Regular.ttf&quot;&gt;\n            &lt;font-triplet name=&quot;Noto Color Emoji&quot; style=&quot;normal&quot; weight=&quot;normal&quot;/&gt;\n        &lt;/font&gt;\n        &lt;font embed-url=&quot;VINERITC.TTF&quot;&gt;\n          &lt;font-triplet name=&quot;Viner Hand ITC&quot; style=&quot;normal&quot; weight=&quot;normal&quot;/&gt;\n        &lt;/font&gt;\n        &lt;!--&lt;font embed-url=&quot;VLADIMIR.TTF&quot;&gt;\n          &lt;font-triplet name=&quot;Vladimir Script&quot; style=&quot;normal&quot; weight=&quot;normal&quot;/&gt;\n        &lt;/font&gt;--&gt;\n      &lt;/fonts&gt;\n      &lt;version&gt;1.7&lt;/version&gt;\n    &lt;/renderer&gt;\n  &lt;/renderers&gt;\n&lt;/fop&gt;\n</code></pre>\n<p>I ran the above example for Apache FOP library version 2.4 and 2.8 with PDF version set to 1.4 and 1.7 in each library. In the input.xml I added both BMP glyphs(U+2663, U+2705) and non-BMP glyphs(U+1F410, U+1F600). But I get the same result with empty white symbols for both BMP glyphs and non-BMP glyphs. Following is what pdf output looks like.</p>\n<p><a href=\"https://i.stack.imgur.com/t1aHS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/t1aHS.png\" alt=\"enter image description here\" /></a></p>\n<p>When I do a select all I can see some characters getting selected in those empty spaces.</p>\n<p><a href=\"https://i.stack.imgur.com/ksnyY.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ksnyY.png\" alt=\"enter image description here\" /></a></p>\n<p>And when I copy and paste the selected text into notepad some of the characters appear as follows.</p>\n<p><a href=\"https://i.stack.imgur.com/uc7hZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/uc7hZ.png\" alt=\"enter image description here\" /></a></p>\n<p>I also looked into the FOP issue <a href=\"https://issues.apache.org/jira/browse/FOP-1969\" rel=\"nofollow noreferrer\">https://issues.apache.org/jira/browse/FOP-1969</a> mentioned by @Kevin Brown. It seems a fix for the issue is already merged in 2.3 release.</p>\n<p><a href=\"https://i.stack.imgur.com/qeC2S.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qeC2S.png\" alt=\"enter image description here\" /></a></p>\n<p>Can anyone help me to figure this issue or any options that I can try to solve this?</p>\n"},{"tags":["java","intellij-idea","dto","mapstruct","mapper"],"answers":[{"owner":{"user_id":10231374,"display_name":"birca123"},"up_vote_count":2,"is_accepted":true,"creation_date":1680533555,"answer_id":75920814,"body":"<p>The installation of <a href=\"https://plugins.jetbrains.com/plugin/10036-mapstruct-support\" rel=\"nofollow noreferrer\">Mapstruct Support</a> plugin, which provides code completion and other features for projects that use Mapstruct, was the solution in my case.</p>\n"}],"owner":{"user_id":13174149,"display_name":"Charlo Poitras"},"view_count":71,"up_vote_count":2,"accepted_answer_id":75920814,"answer_count":1,"score":2,"creation_date":1680530343,"question_id":75920292,"body":"<p>I have this Mapper class, I'm trying to combine all tree objects into a single Dto for a the view to use the Dto object :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapping(source = &quot;childSeat.id&quot;, target = &quot;childSeatId&quot;)\n@Mapping(source = &quot;childSeatCol.id&quot;, target = &quot;childSeatColId&quot;)\n@Mapping(source = &quot;dummyCollision.id&quot;, target = &quot;dummyCollisionId&quot;)\nListeDePositionsUniquesDto toDTO(ChildSeat childSeat, ChildSeatCol childSeatCol, DummyCollision dummyCollision);\n</code></pre>\n<p>Here is a screenshot from the IDE : <a href=\"https://i.stack.imgur.com/2XooD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2XooD.png\" alt=\"Ide screenshot\" /></a>\nWhen I hover the source error it says : <code>Can't find related attribute</code> <br />\nHere are my dependencies :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;!-- MapStruct + Lombok --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;${org.projectlombok.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n            &lt;artifactId&gt;mapstruct&lt;/artifactId&gt;\n            &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n...\n    &lt;build&gt;\n       ...\n                    &lt;annotationProcessorPaths&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                            &lt;version&gt;${org.projectlombok.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.mapstruct&lt;/groupId&gt;\n                            &lt;artifactId&gt;mapstruct-processor&lt;/artifactId&gt;\n                            &lt;version&gt;${org.mapstruct.version}&lt;/version&gt;\n                        &lt;/path&gt;\n                        &lt;!-- other annotation processors --&gt;\n                        &lt;!-- additional annotation processor required as of Lombok 1.18.16 --&gt;\n                        &lt;path&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok-mapstruct-binding&lt;/artifactId&gt;\n                            &lt;version&gt;0.2.0&lt;/version&gt;\n                        &lt;/path&gt;\n                    &lt;/annotationProcessorPaths&gt;\n                ...\n    &lt;/build&gt;\n</code></pre>\n<p>I'm using Java 1.8, Intellj Idea Utilmate</p>\n"},{"tags":["java","asynchronous","completable-future"],"answers":[{"owner":{"user_id":5685043,"display_name":"Himanshu"},"up_vote_count":1,"is_accepted":false,"creation_date":1680197071,"answer_id":75891250,"body":"<p>You might get a performance gain which may be very negligible since you are removing the processing of thenApply(), But if all 3 methods needs to be run sequentially in any case, then why to even consider the first approach and instead create a new method which will call other 3 and use the new one.</p>\n<pre><code>service.processAsync(context, id)\n        .thenApply(this::callerMethod)\n        .exceptionally(this::handleError);\n</code></pre>\n<pre><code>callerMethod() {\ndoSimpleStuff();\ndoAnotherExtraStuff();\ndoFinalStuff();\n}\n</code></pre>\n"},{"owner":{"user_id":10118965,"display_name":"davidalayachew"},"up_vote_count":1,"is_accepted":false,"creation_date":1680681090,"answer_id":75936904,"body":"<p>As @Himanshu mentioned, the performance benefit gained will be negligible, so much so that you should not depend on it as justification unless you are doing something <em><strong>really</strong></em> performance intensive (in which case, there are much higher priority things to fix before trying to stick all of the functions in one methond).</p>\n<p>But to contrast the answer that @Himanshu gave, I would encourage you to keep the functions separate. It allows you to swap out a function for another should an implementation detail need to change in the future, and it lets you keep your code base free of ad-hoc simplification functions all over the place. Those tend to be a place where bugs hide.</p>\n<p>But truthfully, it's not much loss either direction, so do what makes sense for your situation.</p>\n"}],"owner":{"user_id":12683575,"display_name":"Stranger95"},"view_count":44,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1680196100,"question_id":75891111,"body":"<p>I'm using java 11.</p>\n<p>Let's say I have this code snippet where we're handling the completable future response:</p>\n<pre><code>service.processAsync(context)\n            .thenApply(this::doSimpleStuff)\n            .thenApply(this::doAnotherExtraStuff)\n            .thenApply(this::doFinalStuff)\n            .exceptionally(this::handleError);\n</code></pre>\n<p>If I fold all my <code>doSimpleStuff</code>, <code>doAnotherExtraStuff</code> and <code>doFinalStuff</code> into one function would it make a difference performance-wise?</p>\n<p>Will this code run faster or will this be just less readable?</p>\n<pre><code>service.processAsync(context)\n            .thenApply(this::doEverythingInOneFunction)\n            .exceptionally(this::handleError);\n</code></pre>\n"},{"tags":["java","methods","overloading"],"comments":[{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":133847184,"body":"Vague title. Rewrite to summarize your <i>specific</i> technical issue."}],"answers":[{"owner":{"user_id":9513184,"display_name":"Unmitigated"},"up_vote_count":2,"is_accepted":false,"creation_date":1680127982,"answer_id":75882599,"body":"<p>With <code>method(1, 1, 1);</code>, strict invocation finds two applicable methods: <code>method(long x, long y, long z)</code> and <code>method(int x, long y, int z)</code>. <code>method(short x, int y, double z)</code> is not applicable because <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.12.2.2\" rel=\"nofollow noreferrer\">strict invocation</a> only allows widening primitives conversions. <code>int</code> to <code>long</code> is fine, but not <code>int</code> to <code>short</code>.</p>\n<p>According to <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.12.2.5\" rel=\"nofollow noreferrer\">§15.12.2.5. Choosing the Most Specific Method</a>:</p>\n<blockquote>\nOne applicable method m1 is more specific than another applicable method m2, for an invocation with argument expressions e1, ..., ek, if any of the following are true:\n<ul>\n<li>[...]</li>\n<li>m1 and m2 are applicable by strict or loose invocation, and where m1 has formal parameter types S1, ..., Sn and m2 has formal parameter types T1, ..., Tn, the type Si is more specific than Ti for argument ei for all i (1 ≤ i ≤ n, n = k).</li>\n</ul>\n</blockquote>\n<p>And on type specificity:</p>\n<blockquote>\n<p>A type S is more specific than a type T for any expression if S &lt;: T</p>\n</blockquote>\n<p>From <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-4.html#jls-4.10.1\" rel=\"nofollow noreferrer\">4.10.1. Subtyping among Primitive Types</a>, we have that <code>int</code> is considered a subtype of <code>long</code>. <code>method(int x, long y, int z)</code> is thus more specific than <code>method(long x, long y, long z)</code> since the type of each parameter is either the same or a subtype of the corresponding parameter of the latter method.</p>\n<blockquote>\n<p>A method m1 is strictly more specific than another method m2 if and only if m1 is more specific than m2 and m2 is not more specific than m1. <br>\nA method is said to be maximally specific for a method invocation if it is accessible and applicable and there is no other method that is accessible and applicable that is strictly more specific.</p>\n</blockquote>\n<p><code>method(long x, long y, long z)</code> is not more specific than <code>method(int x, long y, int z)</code>, so <code>method(int x, long y, int z)</code> is maximally specific. There are no other maximally specific methods, so it is the most specific method and will be called.</p>\n<p>With <code>method((short) 1, 1, 1);</code>, all three methods are considered applicable by widening conversion.</p>\n<p>However, <code>method(short x, int y, double z)</code> is not more specific than all the other two methods because <code>double</code> is not a subtype or <code>int</code> or a subtype of <code>long</code> (in fact, it is considered a supertype). Similarly, none of the other methods have a more specific first parameter type since <code>int</code> and <code>long</code> are supertypes of <code>short</code>.</p>\n<p>We have no method that is strictly more specific than every other applicable method, so there is no single maximally specific method. Thus the call is ambiguous.</p>\n<p>See <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-15.html#jls-15.12.2\" rel=\"nofollow noreferrer\">§15.12.2. Compile-Time Step 2: Determine Method Signature</a> to read more about the whole process.</p>\n"}],"owner":{"user_id":21522145,"display_name":"nemidunam"},"view_count":68,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680125260,"question_id":75882313,"body":"<p>Why is method((short)1,1,1); only ambiguous between the 2nd and 3rd method although it can also be implicitly casted to the first?\nWhy is it ambigious at all even though it needs less implicit casting for the 3rd than for the 2nd?</p>\n<p>If the amount of implicit castings doesn't matter, why is method(1,1,1) not ambiguous between 1 and 2 although it can be implicitly casted to both?</p>\n<pre><code>public class Main {\n    static void method(long x, long y, long z) {\n        System.out.println(&quot;1&quot;);\n    }\n\n    static void method(int x, long y, int z) {\n        System.out.println(&quot;2&quot;);\n    }\n\n    static void method(short x, int y, double z) {\n        System.out.println(&quot;3&quot;);\n    }\n\n    public static void main(String[] args) {\n        method((short) 1, 1, 1); // ambiguous between 2 and 3\n        method(1, 1, 1); // calls 2\n    }\n}\n</code></pre>\n"},{"tags":["java","regex","regex-lookarounds"],"comments":[{"owner":{"user_id":11002,"display_name":"tgdavies"},"edited":false,"comment_id":133775397,"body":"What are the rules for escaping <code>&#39;</code>, <code>&quot;</code> and <code>=</code>? Personally I would probably write a simple state machine rather than use a regex."},{"owner":{"user_id":5354987,"display_name":"Samuel Marchant"},"edited":false,"comment_id":133775408,"body":"Just a point here ! Do you control the send form charsetaccept, operate the page in a particular charset and the same operational configurations for charset and language locale in the server and server program configurations?   Read this about charsets.     <a href=\"https://drive.google.com/file/d/1gjHmdC-BW0Q2vXiQYmp1rzPU497sybNy/view?usp=drivesdk\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1gjHmdC-BW0Q2vXiQYmp1rzPU497sybNy/&hellip;</a>"},{"owner":{"user_id":18313005,"display_name":"Allmighty Fishmonger"},"edited":false,"comment_id":133775419,"body":"@tfdavies I don&#39;t fully understand what you mean with &quot;rules&quot;, but anything goes as long as it is between either <code>&#39;</code> or <code>&quot;</code>. For example, key=&quot;siodfjsdoifjsdoifsjdofisdjfoisdjf&quot; should return <code>{key=siodfjsdoifjsdoifsjdofisdjfoisdjf}</code>. However, key = &quot;example&quot;notreally&quot; should result in <code>{key=example, notreally&quot;=null}</code>"},{"owner":{"user_id":256196,"display_name":"Bohemian"},"edited":false,"comment_id":133775423,"body":"Please show a variety of input to demonstrate different cases and show exactly what you want matched from them."},{"owner":{"user_id":18313005,"display_name":"Allmighty Fishmonger"},"edited":false,"comment_id":133775425,"body":"However, I will take a look at simple state machines. I never heard of those until now"},{"owner":{"user_id":18313005,"display_name":"Allmighty Fishmonger"},"edited":false,"comment_id":133775432,"body":"@Bohemian will do, give me a minute"},{"owner":{"user_id":16376827,"display_name":"g00se"},"edited":false,"comment_id":133777516,"body":"Wouldn&#39;t you be better to start off by doing <code>s = s.replaceAll(&quot;\\\\s*=\\\\s*&quot;, &quot;=&quot;);</code>?"}],"answers":[{"owner":{"user_id":1863229,"display_name":"Tim Biegeleisen"},"up_vote_count":2,"is_accepted":true,"creation_date":1679719581,"answer_id":75839687,"body":"<p>We could use the following regex match all approach:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String input = &quot;key=false hotel    =       trivago foo       cool='tr  ue' feels=\\&quot;good\\&quot;&quot;;\nMap&lt;String, String&gt; map = new HashMap&lt;&gt;();\nString regex = &quot;(\\\\S+)\\\\s*=\\\\s*(?:'(.*?)'|\\&quot;(.*?)\\&quot;|(\\\\S+))&quot;;\nPattern r = Pattern.compile(regex);\nMatcher m = r.matcher(input);\nwhile (m.find()) {\n    String value = m.group(2);\n    if (value == null) {\n        value = m.group(3) == null ? m.group(4) : m.group(3);\n    }\n    map.put(m.group(1), value);\n}\n\nSystem.out.println(map);\n\n// {feels=good, cool=tr  ue, hotel=trivago, key=false}\n</code></pre>\n<p>The regex pattern used here eagerly tries to find a value in single or double quotes.  That failing, it defines a value as any continuous group of non whitespace characters (<code>\\S+</code>).</p>\n"}],"owner":{"user_id":18313005,"display_name":"Allmighty Fishmonger"},"view_count":55,"up_vote_count":2,"accepted_answer_id":75839687,"answer_count":1,"score":2,"creation_date":1679718200,"question_id":75839632,"body":"<p>I know that this type of question has been asked several times (<a href=\"https://stackoverflow.com/questions/62616023/regex-split-if-not-inside-the-two-characters?noredirect=1&amp;lq=1\">For example here</a> or <a href=\"https://stackoverflow.com/questions/62616023/regex-split-if-not-inside-the-two-characters\">here</a>), but it appears that my problem is different since I can't find a solution.</p>\n<p>Suppose I'm given this String:</p>\n<p><code>key=false hotel    =       trivago foo       cool='tr  ue' feels=&quot;good&quot;</code></p>\n<p>(Be wary that each whitespace is put there on purpose)</p>\n<p>I'm meant to extract each pair of values, so e.g. key=false is one of them. However, if a word has no &quot;=&quot; after some optional whitespaces, I'm meant to return <em>word</em> = null. Otherwise, this is the relevant part, if the word is between either the symbols ' or &quot;, I should save whatever is between those symbols. An example to explain what I mean:\nThe above example is meant to return this map:</p>\n<p><code>{key=false, hotel=trivago, foo=null, cool=tr ue, feels=good}</code></p>\n<p>I've tried all sorts of patterns for my problem above. The closest I feel like I've got in terms of what I want is this:\n<code>([a-zA-Z0-9]+)\\s*[= ]+(?![^\\&quot;']*[\\&quot;'])</code></p>\n<p>The idea is: Look for a word with numbers in it <strong>([a-zA-Z0-9]+)</strong>, followed by an optional amount of whitespaces. Then look for a &quot;=&quot;. This part isn't the real issue (I think at least...)\nThe issue is my desired group(2): To consider examples like &quot;stuff&quot; or 'wo    wsers', I looked up the links above and considered using a negative lookahead.</p>\n<p>And I think that is exactly what I need: group(2) should contain whatever follows after the = symbol. If there is a &quot;, add whatever is in the String until we reach the next &quot;; same deal for '. However, if there is none of the mentioned symbols, stop at the next whitespace.</p>\n<p>I've been trying for hours but I don't know any further. Can anyone help me? If you have any more questions, feel free to ask!</p>\n<p>Edit: Since I was asked to provide a few more examples, here goes:</p>\n<pre><code>example with a lot of words. Makes=sense.\n</code></pre>\n<p>Should return</p>\n<pre><code>{example=null, with=null, a=null, lot=null, of=null, words.=null, Makes=sense.}\n</code></pre>\n<p>Another example:</p>\n<pre><code>Did=you know that=I like=           &quot;cod ing&quot;?\n</code></pre>\n<p>Should return</p>\n<pre><code>{Did=you, know=null, that=I, like=cod ing?}\n</code></pre>\n"},{"tags":["java"],"comments":[{"owner":{"user_id":16034206,"display_name":"experiment unit 1998X"},"edited":false,"comment_id":133758824,"body":"I think you are directly comparing the array objects and not the contents with .equals, you should probably try the Arrays utility <code>Arrays.equals()</code>"},{"owner":{"user_id":29470,"display_name":"Tim Moore"},"edited":false,"comment_id":133758864,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/744735/java-array-hashcode-implementation\">Java Array HashCode implementation</a>"},{"owner":{"user_id":29470,"display_name":"Tim Moore"},"edited":false,"comment_id":133758883,"body":"In brief, Java arrays don’t implement <code>equals</code> and <code>hashCode</code> in a useful way, and should generally not be used as hash keys. Try <code>ArrayList</code> instead."},{"owner":{"user_id":12299000,"display_name":"kaya3"},"edited":false,"comment_id":133758919,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/12292513/how-to-overide-equals-for-array-in-java\">How to overide equals for array in Java?</a>"},{"owner":{"user_id":256196,"display_name":"Bohemian"},"edited":false,"comment_id":133758949,"body":"As per the <a href=\"https://stackoverflow.com/questions/how-to-ask\">How to Ask</a>, please <a href=\"https://meta.stackoverflow.com/questions/285551\"><b>do not</b> post images of code, data, error message, etc</a>. Instead, copy or type the text into your question, <a href=\"https://meta.stackoverflow.com/questions/251361#251362\">formatted as code</a>. Reserve the use of images for diagrams or demonstrating rendering bugs; things that are impossible to describe accurately via text."}],"answers":[{"owner":{"user_id":15221898,"display_name":"connellrobert"},"up_vote_count":0,"is_accepted":false,"creation_date":1679624209,"answer_id":75829515,"body":"<p>Please look at this question for the reason why this doesn't work:\n<a href=\"https://stackoverflow.com/questions/8777257/equals-vs-arrays-equals-in-java\">equals vs Arrays.equals in Java</a></p>\n<p>Essentially, you are comparing the memory address of the arrays. The <code>java.util.Arrays.equals</code> method will compare whether the length is the same and each objects <code>equals</code> method returns true for the values. Since string <code>equals</code> method compares the chars, then they will return true and this will give you the result you are looking for.</p>\n<p>If you continue and change this into an array of objects, then it will depend on how the class implements the <code>equals</code> method. If you leave the implementation as the default, then it will only compare memory address (use <code>==</code>) and would return false if they weren't the same reference.</p>\n"},{"owner":{"user_id":298278,"display_name":"Windle"},"up_vote_count":2,"is_accepted":false,"creation_date":1679624347,"answer_id":75829525,"body":"<p>Using <code>.equals()</code> is right when comparing strings, but when you use that method on two <code>String[]</code> then you are really back to comparing the object references. If you want to compare the contents of two String arrays against each other then you can use <code>Arrays.equals(Object[] a1,Object[] a2)</code>. The docs <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/Arrays.html#equals(java.lang.Object%5B%5D,java.lang.Object%5B%5D)\" rel=\"nofollow noreferrer\">are here</a>, but basically that will compare the length of each array and then make sure they contain the same items.</p>\n<p>In the end, your code would become something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>if (Arrays.equals(key, candidateKey)) {\n  return entry.getValue();\n}\n</code></pre>\n"}],"owner":{"user_id":1264703,"display_name":"Maxsteel"},"view_count":48,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1679623484,"question_id":75829465,"body":"<p>I am using ImmutableMap in my very simple code. At one point I am trying to return value corresponding to a key which is an array of string with only 1 value &quot;1234&quot;. Here's a screenshot of debugging step:</p>\n<p><a href=\"https://i.stack.imgur.com/Vht3Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Vht3Y.png\" alt=\"Debugger with key that I pass and candidate key that is being checked in ImmutableMap. Notice they're the same\" /></a></p>\n<p>However, I get no value and keys don't match.\nHere's candidateKey in debugger:\n<a href=\"https://i.stack.imgur.com/UXaJQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UXaJQ.png\" alt=\"enter image description here\" /></a></p>\n<p>Here's my key in debugger:\n<a href=\"https://i.stack.imgur.com/p114m.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/p114m.png\" alt=\"enter image description here\" /></a></p>\n<p>Here's debugger saying they're not equal!\n<a href=\"https://i.stack.imgur.com/7bWs6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7bWs6.png\" alt=\"enter image description here\" /></a></p>\n<p>It's driving me nuts. Am I missing something here?</p>\n"},{"tags":["java","algorithm","time-complexity","big-o"],"comments":[{"owner":{"user_id":1745544,"display_name":"OldProgrammer"},"edited":false,"comment_id":133748010,"body":"well other than generating more code, it is still O(n)"},{"owner":{"user_id":19646829,"display_name":"ayseguldmrblk"},"edited":false,"comment_id":133748086,"body":"@OldProgrammer Then the only difference is writability and readability I guess, thank you."},{"owner":{"user_id":2330053,"display_name":"Idle_Mind"},"edited":false,"comment_id":133748115,"body":"They&#39;re both LINEAR TIME / O(n), meaning the length of time required to complete the algorithm will be DIRECTLY PROPORTIONAL to the amount of input. But the second version is a COMPLETE WASTE OF TIME and will get you FIRED. See the difference?  ;)"},{"owner":{"user_id":10559142,"display_name":"Berthur"},"edited":false,"comment_id":133748182,"body":"Technically, the second option requires a new program for each input length. So you can&#39;t really say that the time complexity of the PROGRAM is <i>Θ(n)</i>. It would be <i>O(1)</i>, because for any such program, the time doesn&#39;t actually depend on the size of your input anymore. It will just execute as many times as you have that instruction in your code, a constant time. However, the time complexity of the PROBLEM is still <i>O(n)</i>. And if, hypothetically, those 3 dots had been correct java syntax that actually produces <i>n</i> executions of your print, then it would be <i>O(n)</i>."}],"answers":[{"owner":{"user_id":10559142,"display_name":"Berthur"},"up_vote_count":2,"is_accepted":true,"creation_date":1679579520,"answer_id":75823905,"body":"<p>It's a philosophical question.</p>\n<p>Technically, the second option requires a new program for each input length. So you can't really say that the time complexity of the <strong>program</strong> is <em>Θ(n)</em>. Instead, it would be <em>O(1)</em> because for any such program, the time doesn't actually depend on the size of your input anymore. It will just execute as many times as you have that instruction in your code: a constant number. But such programs aren't really solutions to the problem for a general array, rather to the special-case problem when the length of the array is known, and thus constant.</p>\n<p>The time complexity of the <strong>problem</strong> is still <em>O(n)</em>. And if, hypothetically, those three dots had been correct Java syntax that actually produces <em>n</em> executions of your print, then it would be O(n). And you can continue this argument: You could have a program that produces your second code snippet as a separate program, and then executes it. This would also be <em>O(n)</em>.</p>\n<p>So it boils down to how you view it. If you want to be formal, you need to define a computation model (and delve into the realm of <a href=\"https://en.wikipedia.org/wiki/Random-access_machine\" rel=\"nofollow noreferrer\">Turing Machines</a>, <a href=\"https://en.wikipedia.org/wiki/Random-access_machine\" rel=\"nofollow noreferrer\">Random Access Machines</a> etc.) and ask your question in relation to that.</p>\n"}],"owner":{"user_id":19646829,"display_name":"ayseguldmrblk"},"view_count":49,"up_vote_count":2,"accepted_answer_id":75823905,"answer_count":1,"score":2,"creation_date":1679574474,"question_id":75822998,"body":"<p>Let's say the function simply prints the elements of an array. I know the time complexity of the following loop version will be O(n).</p>\n<pre><code>static void printArray(int[] myArray)\n{\n    for(int i = 0; i &lt; myArray.length; i++)\n    {\n        System.out.println(myArray[i]);\n    }\n}\n</code></pre>\n<p>Let's say the print statement is written for the length of the myArray, the complexity is same or not?</p>\n<pre><code>static void printArray(int[] myArray)\n{\n    int i = 0;\n    System.out.println(myArray[i++]);\n    System.out.println(myArray[i++]);\n    System.out.println(myArray[i++]);\n    .\n    .\n    .\n    System.out.println(myArray[i++]);\n}\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["java","selenium-webdriver","testing","webdriverwait","web-testing"],"comments":[{"owner":{"user_id":12540841,"display_name":"gxslash"},"edited":false,"comment_id":133737857,"body":"Did you consider using WebDriverWait? <a href=\"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/support/ui/WebDriverWait\" rel=\"nofollow noreferrer\">selenium.dev/selenium/docs/api/java/org/openqa/selenium/supp&zwnj;&#8203;ort/&hellip;</a>"}],"answers":[{"owner":{"user_id":21425739,"display_name":"howard_9"},"up_vote_count":2,"is_accepted":true,"creation_date":1679516274,"answer_id":75816916,"body":"<p>Two ideas...</p>\n<hr />\n<h2>Idea #1</h2>\n<p>Right after you click &quot;next page&quot;, you mentioned there is a 1-second window that the previous product remains on the page.</p>\n<p>Start checking for <code>visibilityOfElementLocated() = false</code> on the <strong>previous product</strong> right after you click &quot;next page&quot;.</p>\n<hr />\n<h2>Idea #2</h2>\n<p>Idea #1 might fail if your CPU is not fast enough to catch the previous product during that 1-second window.  In that case, try forking a new worker thread to check for the previous product right before you click &quot;next page&quot;.  Then, after you click &quot;next page&quot;, the master thread will wait for the worker thread to confirm that the previous product has disappeared.</p>\n"},{"owner":{"user_id":4282691,"display_name":"Joshua Penn"},"up_vote_count":0,"is_accepted":false,"creation_date":1679616128,"answer_id":75828978,"body":"<p>You'll want to pair WebdriverWait with ExpectedConditions</p>\n<pre><code>new WebDriverWait(driver1, timeout).until(ExpectedConditions.visibilityOf(element));\n</code></pre>\n<p>I recommend this explanation of how to use WebDriverWait in conjunction with ExpectedConditions: <a href=\"https://www.browserstack.com/guide/expectedconditions-in-selenium\" rel=\"nofollow noreferrer\">https://www.browserstack.com/guide/expectedconditions-in-selenium</a></p>\n"},{"owner":{"user_id":21389490,"display_name":"Narendra Kulkarni"},"up_vote_count":0,"is_accepted":false,"creation_date":1679815364,"answer_id":75846405,"body":"<p>Use like this...</p>\n<pre><code>webdeivewait wait =new webdeivewait (driver,some seconds here);\n\nwait.until (ExpectedConditions.Visibilityofelementlocated(By.xpath(&quot;xpath of webelement you want to wait&quot;)).click();\n</code></pre>\n"}],"owner":{"user_id":19734191,"display_name":"Lydia"},"view_count":82,"up_vote_count":2,"accepted_answer_id":75816916,"answer_count":3,"score":2,"creation_date":1679512199,"question_id":75816376,"body":"<p>For a graduation project, I am testing an online store using Selenium Webdriver and Java. I'm stuck in this part of the testing , where I have to check whether all search results (products) contains partucular word.<br />\nMy search returns several pages of products. There is a pagination at the bottom of the page, but I don't know and can't check the exact number of pages, so I just click the [Next page] button while it is available.</p>\n<p>So the promblem is that when I click the [Next Page] button at the bottom of the page, the page scrolls up, the previous products remain for about 1 second, and then are replaced with new ones from the next page. The page itself is not reloaded, only the previous products are replaced by the next ones in the corresponding block on the page. The block and products are  element.</p>\n<p>It works if I use Thread.sleep, but this is considered a bad decision. I can't figure out if there's any way I can use explicity wait (textToBePresentInElement, elementToBeClickable, visibilityOfElementLocated, presenceOfElementLocated don't suit) as in my other tests.</p>\n<pre><code>    List&lt;WebElement&gt; products = driver.findElements(By.className(SearchPage.LABEL_PRODUCT_NAME));\n    for (WebElement product : products) {\n        Assertions.assertTrue(product.getText().toLowerCase().contains(SearchPage.textForSearchWithResults),\n                &quot;Error. No &quot; + SearchPage.textForSearchWithResults + &quot; found.&quot;);\n    }\n\n    WebElement pagination = driver.findElement(By.xpath(SearchPage.BUTTON_PAGINATION_NEXT));\n    while (driver.findElements(By.xpath(SearchPage.BUTTON_PAGINATION_NEXT)).size() &gt; 0) {\n        pagination.click();\n        try {\n            Thread.sleep(2000);\n        } catch (InterruptedException e) {\n            throw new RuntimeException(e);\n        }\n        List&lt;WebElement&gt; productsOnTheNextPage = driver.findElements(By.className(SearchPage.LABEL_PRODUCT_NAME));\n        for (WebElement product : productsOnTheNextPage) {\n            System.out.println(product.getText());\n            Assertions.assertTrue(product.getText().toLowerCase().\n                            contains(SearchPage.textForSearchWithResults.toLowerCase()),\n                    &quot;Error. No &quot; + SearchPage.textForSearchWithResults + &quot; found.&quot;);\n        }\n    }\n</code></pre>\n<p>How can I replace this Thread.sleep?</p>\n"},{"tags":["java","git","sdk","jgit"],"answers":[{"owner":{"user_id":6309,"display_name":"VonC"},"up_vote_count":2,"is_accepted":false,"creation_date":1679388010,"answer_id":75798916,"body":"<p>As <a href=\"https://stackoverflow.com/a/28105276/6309\">noted here</a>, the token can be use alone, as a &quot;username&quot;.</p>\n<pre class=\"lang-java prettyprint-override\"><code>String remoteUrl = &quot;https://${token}@github.com/user/repo.git&quot;;\nCredentialsProvider credentialsProvider = new UsernamePasswordCredentialsProvider(&quot;${token}&quot;, &quot;&quot;);\n</code></pre>\n<p>As long as the token works, the username might be ignored in your case.</p>\n<p>&quot;<a href=\"https://www.codeaffine.com/2014/12/09/jgit-authentication/\" rel=\"nofollow noreferrer\">JGit Authentication Explained</a>&quot; explains:</p>\n<blockquote>\n<p>Please note one thing if you are accessing a GitHub repository through HTTPS with an OAuth access token.<br />\nThe token does not need to be specified in the URL but only given as a user name.</p>\n</blockquote>\n"},{"owner":{"user_id":1554195,"display_name":"tquadrat"},"up_vote_count":0,"is_accepted":false,"creation_date":1679388922,"answer_id":75799043,"body":"<p>The JGit library just sends the credentials to the Git Repository, and that decides what is &quot;wrong&quot; or &quot;correct&quot;.</p>\n<p>As said in <a href=\"https://stackoverflow.com/a/75798916/1554195\">this answer</a>, GitHub expects the access token as the username, while the repo that you try to access wants to have it as the password. GitHub ignores the provided password, your repository don't care about the username.</p>\n"}],"owner":{"user_id":8967633,"display_name":"Deepika Karanji"},"view_count":42,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1679384707,"question_id":75798452,"body":"<p>While trying to clone a repo with jgit, passing wrong username to <code>UsernamePasswordCredentialsProvider</code> actually does not result in any error, which is very surprising to me. Why is it working? How is the repo being cloned when the username is incorrect?\nTried it with version 4.6.0.201612231935-r and 6.5.0.202303070854-r</p>\n<p>I have a function that is trying to clone a git repo, given a username and access token.\nWhile trying to handle exceptions for edge cases, I noticed that passing an incorrect username, but correct access token for a specific git url and branch does NOT give any error at all!</p>\n<pre><code>` return Git.cloneRepository()\n          .setURI(repoDetailsModel.getRepoUrl())\n          .setCredentialsProvider(\n              new UsernamePasswordCredentialsProvider(\n                      &quot;INCORRECT_RANDOM_USER&quot; , repoDetailsModel.getAccessToken()))\n          .setDirectory(tempDir)\n          .setBranchesToClone(Arrays.asList(REPO_BRANCH_PATH + repoDetailsModel.getRepoBranch()))\n          .setBranch(REPO_BRANCH_PATH + repoDetailsModel.getRepoBranch())\n          .call();`\n</code></pre>\n<p>But passing incorrect access token does give the expected &quot;not authorized&quot; error.\nIs this a bug in the jgit library?\nDoes <code>UsernamePasswordCredentialsProvider</code> allow for anonymous access as long as the access token is correct by design?</p>\n"},{"tags":["java","junit"],"answers":[{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"up_vote_count":1,"is_accepted":false,"creation_date":1679331970,"answer_id":75793253,"body":"<p>You need to provide a constructor with the right amount and types of parameters as returned by your <code>testValues()</code> method, then you assign the values as fields and use those fields in your test.</p>\n<p>For each set of values returned by the <code>@Parameterized.Parameters</code> method, and each <code>@Test</code> annotated method, the <code>Parameterized</code> test runner will create a new instance of your test class, with the set of  values, and the run the test method (this means that if you have 5 sets of values and 3 test-methods, it will create 5 * 3 instances of your test class).</p>\n<p>So, change your code to:</p>\n<pre><code>@RunWith(Parameterized.class)\npublic class ParamaterizedTest {\n\n  private final double testDouble;\n  private final boolean expectedResult;\n\n  public ParameterizedTest(double testDouble, boolean expectedResult) {\n    this.testDouble = testDouble;\n    this.expectedResult = expectedResult;\n  }\n\n  @Parameterized.Parameters\n  public static Collection testValues() {\n    return Arrays.asList(new Object[][] {\n        { 18.5, true },\n        { 16.5, false },\n        { 19.5, true },\n        { 15.5, false },\n        { 20.5, true }\n    });\n  }\n\n  @Test\n  public void testinputBiggerThanExpected(){\n    Double expected = 17.5;\n    assertEquals(expectedResult, expected &lt; testDouble);\n  }\n}\n</code></pre>\n<p>See also the JUnit 4 documentation on <a href=\"https://github.com/junit-team/junit4/wiki/Parameterized-tests\" rel=\"nofollow noreferrer\">Parameterized tests</a>.</p>\n<p>As an aside, you're currently using JUnit 4, and the way of using parameterized tests in JUnit 5 is both simpler and more powerful. I recommend switching. See the JUnit 5 User Guide, section <a href=\"https://junit.org/junit5/docs/current/user-guide/#writing-tests-parameterized-tests\" rel=\"nofollow noreferrer\">Parameterized Tests</a> for more information.</p>\n"},{"owner":{"user_id":893952,"display_name":"Harry Coder"},"up_vote_count":1,"is_accepted":true,"creation_date":1679332166,"answer_id":75793290,"body":"<p>You can first migrate to JUnit5. Your test method <code>testinputBiggerThanExpected</code> should use <code>@ParameterizedTest</code> annotation instead of <code>@Test</code>. Read this <a href=\"https://www.baeldung.com/parameterized-tests-junit-5\" rel=\"nofollow noreferrer\">link</a>.</p>\n<pre><code>public class ParamaterizedTest {\n\n  public static Collection testValues() {\n    return Arrays.asList(new Object[][] {\n        { 18.5, true },\n        { 16.5, false },\n        { 19.5, true },\n        { 15.5, false },\n        { 20.5, true }\n    });\n  }\n\n  @ParameterizedTest\n  @MethodSource(&quot;testValues&quot;)\n  public void testinputBiggerThanExpected(float floatValue, boolean booleanValue){\n    Double expected = 17.5;\n    assertTrue(expected &lt; floatValue);\n  }\n}\n</code></pre>\n<p>or a more simple approach:</p>\n<pre><code>public class ParamaterizedTest {\n\n  @ParameterizedTest\n  @ValueSource(floats = { 18.5, 16.5, 19.5, 15.5, 20.5 })\n  public void testinputBiggerThanExpected(float floatValue) {\n    Double expected = 17.5;\n    assertTrue(expected &lt; floatValue);\n  }\n}\n</code></pre>\n"}],"owner":{"user_id":8593764,"display_name":"jennifer ruurs"},"view_count":59,"up_vote_count":2,"accepted_answer_id":75793290,"answer_count":2,"score":2,"creation_date":1679330956,"question_id":75793097,"body":"<p>I want that the method public void testinputBiggerThan() is performed with all testvalue in the method public static Collection testValues().</p>\n<p>So I want to give multiple parameters with a true or false condition of that testValue and than this been evaluated inside <code>AssertTrue</code></p>\n<pre><code>@RunWith(Parameterized.class)\npublic class ParamaterizedTest {\n\n\n  @Parameterized.Parameters\n  public static Collection testValues() {\n    return Arrays.asList(new Object[][] {\n        { 18.5, true },\n        { 16.5, false },\n        { 19.5, true },\n        { 15.5, false },\n        { 20.5, true }\n    });\n  }\n\n  @Test\n  public void testinputBiggerThanExpected(){\n    Double expected = 17.5;\n    AssertTrue(expected &lt; //how do I get here all the values testValues() and evaluated whether this is the case 18.5 is (true because 18.5 is bigger than 17.5)&amp; true in testValues()=true, etc );\n\n  }\n}\n</code></pre>\n"},{"tags":["java","spring-data-r2dbc"],"answers":[{"owner":{"user_id":11604871,"display_name":"Tonykay"},"up_vote_count":3,"is_accepted":false,"creation_date":1679221795,"answer_id":75781359,"body":"<p>You can still use @IdClass to fix this, here is what i came up with</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@Table(&quot;tutor_student&quot;)\n@IdClass(TutorStudentId.class)\npublic class TutorStudentEntity {\n\n    @Id\n    @Column(&quot;relation_id&quot;)\n    private Long relationId;\n\n    @Id\n    @Column(&quot;tutor_id&quot;)\n    private Long tutorId;\n\n    @Column(&quot;student_id&quot;)\n    private String studentId;\n\n    @Column(&quot;status&quot;)\n    private String status;\n\n}\n</code></pre>\n<p>StudentId Class Should look like this</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@AllArgsConstructor\npublic class TutorStudentId implements Serializable {\n\n    private Long relationId;\n    private Long tutorId;\n\n}\n</code></pre>\n"},{"owner":{"user_id":3795036,"display_name":"K.Nicholas"},"up_vote_count":0,"is_accepted":false,"creation_date":1679247627,"answer_id":75783840,"body":"<p><code>TutorStudentEntity</code> needs to implement <code>org.springframework.data.domain.Persistable</code> and have <code>Persistable::isNew</code> default to false;</p>\n<p>Example given for a <code>Handler</code></p>\n<pre><code>public class SomeEntity implements Persistable&lt;String&gt; {\n    @Transient\n    private boolean isNew;\n    @Id\n    private String name;\n    @NotNull\n    ...\n</code></pre>\n<p>and</p>\n<pre><code>public Mono&lt;ServerResponse&gt; updateSomeEntity(ServerRequest request) {\n    return ServerResponse.ok().contentType(MediaType.APPLICATION_JSON)\n            .body(request.bodyToMono(SomeEntity.class)\n                    .doOnNext(this::validate)\n                    .flatMap(someEntityRepository::save), SomeEntity.class);\n}\n</code></pre>\n<p>Git repo for above <a href=\"https://github.com/karlnicholas/WebFluxDataR2dbc.git\" rel=\"nofollow noreferrer\">WebFluxDataR2dbc</a></p>\n"}],"owner":{"user_id":10028584,"display_name":"Andrii Torzhkov"},"view_count":83,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1679219861,"question_id":75781229,"body":"<p>I have entity which handles many-to-mane relation between <code>student</code> and <code>tutor</code> tables where primary key is complex key(<code>relation_id</code> and <code>tutor_id</code>).</p>\n<pre><code>@Getter\n@Setter\n@NoArgsConstructor\n@Table(&quot;tutor_student&quot;)\npublic class TutorStudentEntity implements Serializable {\n\n    @Column(&quot;tutor_id&quot;)\n    private Long tutorId;\n    @Column(&quot;student_id&quot;)\n    private String studentId;\n    @Column(&quot;status&quot;)\n    private String status;\n\n}\n</code></pre>\n<p>When I want to update record with <code>ReactiveCrudRepository#save</code> Spring R2DBC tries to create new record in DB because can not define id.</p>\n<p>I know several solutions with JPA like <code>@EmbeddedId</code> and <code>@IdClass</code>. I tried to do the same here but obviously It is not JPA that is why it has not worked.</p>\n<p>What is solution for this case? how Can I configure complex primary key and update record with the help of Spring R2DBC?</p>\n"},{"tags":["java","generics","arraylist","implementation"],"comments":[{"owner":{"user_id":3553434,"display_name":"时间只会一直走"},"edited":false,"comment_id":133651210,"body":"1.you are correct; 2.for compatibility with previous code, rawtypes are allowed"},{"owner":{"user_id":5133585,"display_name":"Sweeper"},"edited":false,"comment_id":133651218,"body":"Your assumption is mostly correct. As for <i>why</i> they did not implement something, <a href=\"https://meta.stackoverflow.com/q/293815/5133585\">you should clarify what you mean by &quot;why&quot;</a>."},{"owner":{"user_id":5103317,"display_name":"Old Dog Programmer"},"edited":false,"comment_id":133659089,"body":"Add this line to the code: <code>char foo = Names.get(1).charAt (2);</code>. You should get a <code>ClassCastException</code>.  When generics were added to Java (version 5, year 2004), how generics were implemented conflicted with how arrays were implemented. The result was, if an array was allowed to be generic, there would be a loophole that would allow an element of a different type to be put into the array. Accessing the element where the incorrect type was would result in a <code>ClassCastException</code>. To prevent this, it was forbidden to create a generic array. So, why is this loophole still allowed?"}],"answers":[{"owner":{"user_id":689853,"display_name":"Harinder"},"up_vote_count":2,"is_accepted":true,"creation_date":1679030831,"answer_id":75764038,"body":"<p>Java allows adding an <code>int</code> to a <code>List&lt;String&gt;</code> due to the way generics are implemented in the language. Generics in Java are implemented through type erasure, which means that the type information is erased at runtime and not available for runtime checks.</p>\n<p>In other words, at runtime, a <code>List&lt;String&gt;</code> and a <code>List&lt;Integer&gt;</code> are both just List objects. This allows for greater compatibility between different versions of Java that might have different types of List objects. However, it also means that the compiler can't always catch type errors at compile-time.</p>\n<p>To address this issue, Java provides some level of type checking at compile-time through the use of bounded type parameters and wildcards. By specifying a type parameter with an upper bound, such as <code>List&lt;? extends Number&gt;</code>, you can restrict the types that can be added to the list. This helps catch errors at compile-time and prevents type errors at runtime.</p>\n<p>However, it's worth noting that even with these restrictions, it's still possible to cast objects to different types in Java, which can lead to runtime errors. This is why it's important to always use generics and type checking whenever possible to avoid errors and ensure code correctness.</p>\n"}],"owner":{"user_id":17801533,"display_name":"Prakarsh Pathak"},"view_count":58,"up_vote_count":2,"accepted_answer_id":75764038,"answer_count":1,"score":2,"creation_date":1679030332,"question_id":75763990,"body":"<p>I am new to generics, and I came across this experiment.</p>\n<pre><code>import java.util.List;\nimport java.util.ArrayList;\npublic class Main {\n    private static void addIntegerToNames(List listOfNames, Integer i) {\n        listOfNames.add(i);\n    }\n    public static void main(String[] args) {\n        List&lt;String&gt; Names = new ArrayList&lt;String&gt;();\n        Names.add(&quot;stackOverFlow&quot;);\n        addIntegerToNames(Names, 100);\n        System.out.println(Names);\n    }\n}\n\nOutput : [stackOverFlow, 100]\n</code></pre>\n<p>The compiler does not throw an error while adding an integer to listOfNames because it sees that listOfNames is a list of objects. When this goes at runtime, it still doesn't throw an error, My assumption is that at runtime, &quot;Names&quot; is a List of Objects, because generics are only implemented at compile time.</p>\n<p>I have two follow up questions.</p>\n<ol>\n<li>Is my assumption correct?</li>\n<li>Why did java not implemented generics strictly both at compile time and runtime ? Does the current implementation of generics not make Java more error-prone? Was it a tradeoff between performance and safety?</li>\n</ol>\n"},{"tags":["java","oracle","jdbc","ojdbc","autocommit"],"answers":[{"owner":{"user_id":4612499,"display_name":"Jean de Lavarene"},"up_vote_count":2,"is_accepted":false,"creation_date":1678379409,"answer_id":75687457,"body":"<p>A more plausible explanation is that the connection object is used by more than one thread concurrently, and the other thread has changed the auto-commit mode between your two getAutoCommit() calls. It is strongly recommended to not concurrently share a JDBC connection across threads for various reasons, one of which is the behavior you're seeing, but you could also end up dead-locking your database session.</p>\n<p>The JDBC spec states that the calling commit() on a connection that has auto-commit mode enabled should throw an exception. But there is a JDBC property that can be used to relax this behavior: set &quot;oracle.jdbc.autoCommitSpecCompliant&quot; to &quot;false&quot;. See the Javadoc <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/21/jajdb/oracle/jdbc/OracleConnection.html#CONNECTION_PROPERTY_AUTO_COMMIT_SPEC_COMPLIANT\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"user_id":3103244,"display_name":"AnR"},"view_count":74,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678378049,"question_id":75687184,"body":"<p>We have a Java application that uses connection pooling. Usuallay at the start of each function/process we use <code>setAutoCommit(false);</code> to switch off AutoCommit. And in the finally section, after commit/rollback we switch it back to ON using <code>setAutoCommit(true);</code></p>\n<p>From time to time we were getting this Exception in a few functions:</p>\n<pre><code>java.sql.SQLException: Could not commit with auto-commit set on\n</code></pre>\n<p>Upon investigation we found that <strong>randomly</strong> the AutoCommit status changes from OFF/false to ON/true after <code>executeUpdate</code> without any apparent reason.</p>\n<pre><code>status = connection.getAutoCommit(); // stores false\nstatement.executeUpdate(sQuery.toString());\nstatus = connection.getAutoCommit(); // stores true\n</code></pre>\n<p>As I said it doesn't always happen. There is no other function call between these lines that could possibly change the status.</p>\n<p>As a workaround we have restored the AutoCommit status after executeUpdate if it changes. But we need to know more as executeUpdate is used a few dozen time in the application.</p>\n<p>Has anyone faced similar issue? Any solution other than the above?</p>\n<p>We are using Java 1.8 with Oracle 11 and ojdbc8-19.3.0.0.jar</p>\n"},{"tags":["java","spring-boot","unit-testing","junit5"],"answers":[{"owner":{"user_id":1185421,"display_name":"Seppo420"},"up_vote_count":2,"is_accepted":false,"creation_date":1678359626,"answer_id":75683680,"body":"<p>Argh, JFC, just after posting this I noticed that I have</p>\n<pre><code>    @Bean\n    @Primary\n    public GenericDataProcessor genericDataProcessor() {\n        return new GenericDataProcessor();\n    }\n</code></pre>\n<p>But no</p>\n<pre><code>    @Bean\n    @Primary\n    public DerpProcessor derpProcessor() {\n        return new DerpProcessor();\n    }\n</code></pre>\n<p>Thanks, rubberducks!</p>\n"}],"owner":{"user_id":1185421,"display_name":"Seppo420"},"view_count":37,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678359435,"question_id":75683647,"body":"<p>So, I'm trying to inject a dependency to my test class with <code>@Autowired</code>, but I am getting weird errors with certain dependencies.</p>\n<p>I've tried to isolate the issue and this is the simplest example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package mycompany.service;\n\nimport lombok.extern.slf4j.Slf4j;\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class GenericDataProcessor {\n\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package mycompany.service;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport mycompany.config.ServiceTestConfiguration;\nimport mycompany.query.CachedQueryService;\nimport mycompany.sink.ProcessedDataSink;\nimport org.junit.jupiter.api.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.junit.MockitoJUnitRunner;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.test.context.ActiveProfiles;\nimport org.springframework.test.context.ContextConfiguration;\n\n@RunWith(MockitoJUnitRunner.class)\n@ActiveProfiles(&quot;test&quot;)\n@SpringBootTest(classes = {ServiceTestConfiguration.class})\n@ContextConfiguration(classes = {ObjectMapper.class})\nclass GenericDataProcessorTest {\n\n    @Autowired\n    GenericDataProcessor genericDataProcessor;\n\n    @Autowired\n    ObjectMapper objectMapper;\n\n    @MockBean\n    ProcessedDataSink processedDataSink;\n\n    @MockBean\n    CachedQueryService cachedQueryService;\n\n\n    @Test\n    void test() {\n\n    }\n\n}\n\n</code></pre>\n<p>This works just fine. But now when I just copypaste this (all to the same packages) as <code>DerpProcessor</code> and <code>DerpProcessorTest</code> like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package mycompany.service;\n\nimport org.springframework.stereotype.Service;\n\n@Service\npublic class DerpProcessor {\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>package mycompany.service;\n\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport mycompany.config.ServiceTestConfiguration;\nimport mycompany.query.CachedQueryService;\nimport mycompany.sink.ProcessedDataSink;\nimport org.junit.jupiter.api.Test;\nimport org.junit.runner.RunWith;\nimport org.mockito.junit.MockitoJUnitRunner;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.context.SpringBootTest;\nimport org.springframework.boot.test.mock.mockito.MockBean;\nimport org.springframework.test.context.ActiveProfiles;\nimport org.springframework.test.context.ContextConfiguration;\n\n@RunWith(MockitoJUnitRunner.class)\n@ActiveProfiles(&quot;test&quot;)\n@SpringBootTest(classes = {ServiceTestConfiguration.class})\n@ContextConfiguration(classes = {ObjectMapper.class})\nclass DerpProcessorTest {\n\n    @Autowired\n    DerpProcessor derp;\n\n    @Autowired\n    ObjectMapper objectMapper;\n\n    @MockBean\n    ProcessedDataSink processedDataSink;\n\n    @MockBean\n    CachedQueryService cachedQueryService;\n\n\n    @Test\n    void test() {\n\n    }\n\n}\n\n</code></pre>\n<p>I get the following error:</p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mycompany.service.DerpProcessorTest': Unsatisfied dependency expressed through field 'derp'; nested exception is org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'fi.cinia.dataconsumerservice.service.DerpProcessor' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:659)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:639)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.autowireBeanProperties(AbstractAutowireCapableBeanFactory.java:417)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.injectDependencies(DependencyInjectionTestExecutionListener.java:119)\n    at org.springframework.test.context.support.DependencyInjectionTestExecutionListener.prepareTestInstance(DependencyInjectionTestExecutionListener.java:83)\n    at org.springframework.boot.test.autoconfigure.SpringBootDependencyInjectionTestExecutionListener.prepareTestInstance(SpringBootDependencyInjectionTestExecutionListener.java:43)\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:248)\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$8(ClassBasedTestDescriptor.java:363)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:368)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$9(ClassBasedTestDescriptor.java:363)\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197)\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179)\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625)\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509)\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499)\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735)\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734)\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:362)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:283)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:282)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:272)\n    at java.base/java.util.Optional.orElseGet(Optional.java:364)\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:271)\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:102)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:101)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:66)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:107)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:88)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:67)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:52)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:235)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:54)\nCaused by: org.springframework.beans.factory.NoSuchBeanDefinitionException: No qualifying bean of type 'mycompany.service.DerpProcessor' available: expected at least 1 bean which qualifies as autowire candidate. Dependency annotations: {@org.springframework.beans.factory.annotation.Autowired(required=true)}\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.raiseNoMatchingBeanFound(DefaultListableBeanFactory.java:1801)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1357)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1311)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.resolveFieldValue(AutowiredAnnotationBeanPostProcessor.java:656)\n    ... 76 more\n</code></pre>\n<p>I get the same error both when running it with IntelliJ &amp; mvn command line. I also checked the target folder and it's building the <code>DerpProcessor</code> <code>DerpProcessorTest</code> classes correctly. There are also no weird configurations that would either filter <code>DerpProcessor</code> out or only include <code>GenericDataProcessor</code></p>\n<p>Really starting to run out of ideas &amp; considering a career as a hermit fisherman.</p>\n"},{"tags":["java","image","javafx","jdbc","h2"],"answers":[{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"up_vote_count":2,"is_accepted":false,"creation_date":1678139448,"answer_id":75656159,"body":"<h1>Example app</h1>\n<p>While I am no expert on JavaFX/OpenJFX, nor am I an expert on image encoding, I was able to cobble together this crude but effective little app to demonstrate:</p>\n<ol>\n<li>Loading an image from a local file.</li>\n<li>Displaying that image in an <a href=\"https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/image/ImageView.html\" rel=\"nofollow noreferrer\"><code>ImageView</code></a> field in JavaFX.</li>\n<li>Writing that image content to a field in an <a href=\"https://en.wikipedia.org/wiki/H2_(DBMS)\" rel=\"nofollow noreferrer\">H2</a> database.</li>\n<li>Showing a list of IDs tracking each saved image. (IDs are <a href=\"https://en.wikipedia.org/wiki/Universally_unique_identifier\" rel=\"nofollow noreferrer\">UUID</a>s.)</li>\n<li>Retrieving a selected image from database, and displaying in JavaFX.</li>\n</ol>\n<p><a href=\"https://i.stack.imgur.com/80iZw.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/80iZw.jpg\" alt=\"screenshot of example app showing images displayed while reading and writing to database\" /></a></p>\n<p>I found various chunks of code for encoding/decoding image data. I do not know what chunks may be old-fashioned or outmoded. All I know is that I got them to work.</p>\n<p>Some used classes from the <a href=\"https://en.wikipedia.org/wiki/Abstract_Window_Toolkit\" rel=\"nofollow noreferrer\">AWT</a> and <a href=\"https://en.wikipedia.org/wiki/Swing_(Java)\" rel=\"nofollow noreferrer\">Swing</a> frameworks bundled with Java. But be aware that this example JavaFX app is <a href=\"https://en.wikipedia.org/wiki/Java_Platform_Module_System\" rel=\"nofollow noreferrer\">modularized</a>, so you must add elements to your <code>module-info.java</code> file to access those classes.</p>\n<p>In this example, the H2 database is configured to be an <a href=\"https://en.wikipedia.org/wiki/In-memory_database\" rel=\"nofollow noreferrer\">in-memory database</a>. This means the stored data is <em>not</em> written to storage. When your app ends, the database and all its rows disappear, poof 💨.</p>\n<p>This app was written in Java 19 with OpenJFX 19.</p>\n<p>I starting this app by creating a project using the <em>JavaFX</em> template built into the <em>New Project</em> dialog box of the <a href=\"https://en.wikipedia.org/wiki/IntelliJ_IDEA\" rel=\"nofollow noreferrer\">IntelliJ</a> <a href=\"https://en.wikipedia.org/wiki/Integrated_development_environment\" rel=\"nofollow noreferrer\">IDE</a>.</p>\n<p>The code for encoding the image data is found in the two <code>transform…</code> methods.</p>\n<p>The <code>transformImageIntoInputStream</code> method takes a JavaFX image object, uses Swing &amp; AWT to create an AWT buffered image (not to be confused with JavaFX image). That buffered image is then converted to an array of <code>byte</code>, from which we get an <code>InputStream</code>. The input stream can be passed to the JDBC method <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/PreparedStatement.html#setBlob(int,java.io.InputStream)\" rel=\"nofollow noreferrer\"><code>PreparedStatement :: setBlob</code></a> to store a <a href=\"https://en.wikipedia.org/wiki/Binary_large_object\" rel=\"nofollow noreferrer\">BLOB</a> in the database.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    @SuppressWarnings ( &quot;UnnecessaryLocalVariable&quot; )\n    private InputStream transformImageIntoInputStream ( final Image image )\n    {\n        BufferedImage awtBufferedImage = SwingFXUtils.fromFXImage( image , null );\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        try\n        {\n            ImageIO.write( awtBufferedImage , &quot;jpg&quot; , outputStream );\n            byte[] res = outputStream.toByteArray();\n            InputStream inputStream = new ByteArrayInputStream( res );\n            return inputStream;\n        }\n        catch ( IOException e ) { e.printStackTrace(); }\n        throw new IllegalStateException( &quot;Should not reach this point in method `transformImageIntoInputStream`.&quot; );\n    }\n</code></pre>\n<p>To retrieve from the database, we call <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/ResultSet.html#getBlob(java.lang.String)\" rel=\"nofollow noreferrer\"><code>ResultSet :: getBlob</code></a> to produce a <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.sql/java/sql/Blob.html\" rel=\"nofollow noreferrer\"><code>java.sql.Blob</code></a> object. We use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/imageio/ImageIO.html\" rel=\"nofollow noreferrer\"><code>javax.imageio.ImageIO</code></a> to read a binary stream obtained from that <code>Blob</code> object we retrieved. That produces another AWT buffered image (again, not to be confused with a JavaFX image). We then make use of Swing again to produce a JavaFX image from that AWT image.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    private Image transformBlobIntoImage ( final Blob blob )\n    {\n        try\n        {\n            BufferedImage awtBufferedImage = ImageIO.read( blob.getBinaryStream() );\n            Image image = SwingFXUtils.toFXImage( awtBufferedImage , null );\n            return image;\n        }\n        catch ( IOException e ) { throw new RuntimeException( e ); }\n        catch ( SQLException e ) { throw new RuntimeException( e ); }\n    }\n</code></pre>\n<p>As noted above, I am no expert on image handling. This sure seems a roundabout way to go to get image data encoded/decoded. And I am surprised to have found only approaches using AWT and Swing rather than straight JavaFX. If anyone knows better approaches, please do post!</p>\n<h2>Source Code</h2>\n<p>Here is the entire Java code for the app, in a single file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>/*\n By Basil Bourque.  http://www.Basil.work/\n\n This code is a response to this Question on Stack Overflow:\n &gt; insert an image to a database with javafx\n https://stackoverflow.com/q/75632865/642706\n\n This code was cobbled together quickly, as a starting point\n for further learning. Not meant for production use.\n Caveat: I an not an expert in JavaFX nor in image encoding.\n Use at your own risk.\n\n This demo app opens a window with five items, running left to right:\n • A button to load JPEG files from your local storage.\n • An `ImageView` field to show the image you loaded. Defaults to the Java mascot &quot;Duke&quot;, loaded over the internet.\n • A button to save the loaded image to an in-memory database using the H2 Database Engine (written in pure Java).\n • A list of the UUIDs that each identify an image stored in the database.\n • Another `ImageView` field to show the image retrieved from the database per the UUID selected in the list.\n*/\npackage work.basil.example.fximage;\n\nimport javafx.application.Application;\nimport javafx.beans.value.ObservableValue;\nimport javafx.collections.FXCollections;\nimport javafx.collections.ObservableList;\nimport javafx.embed.swing.SwingFXUtils;\nimport javafx.event.ActionEvent;\nimport javafx.geometry.Insets;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.control.ListView;\nimport javafx.scene.image.Image;\nimport javafx.scene.image.ImageView;\nimport javafx.scene.layout.HBox;\nimport javafx.stage.FileChooser;\nimport javafx.stage.Stage;\n\nimport javax.imageio.ImageIO;\nimport javax.sql.DataSource;\nimport java.awt.image.BufferedImage;\nimport java.io.*;\nimport java.sql.*;\nimport java.util.Objects;\nimport java.util.UUID;\n\n@SuppressWarnings ( &quot;SqlNoDataSourceInspection&quot; )\npublic class App extends Application\n{\n    @Override\n    public void start ( final Stage stage )\n    {\n        // Widgets  ---------------------------------------\n        Button loadFromDesktopButton = new Button( &quot;Open JPEG file…&quot; );\n\n        String url = &quot;https://www.oracle.com/a/ocom/img/rc24-duke-java-mascot.jpg&quot;;  // Arbitrary example image.\n        Image duke = new Image( url );\n        ImageView desktopImageView = new ImageView();\n        desktopImageView.setImage( duke );\n\n        desktopImageView.setFitWidth( 300 );\n        desktopImageView.setPreserveRatio( true );\n        desktopImageView.setSmooth( true );\n        desktopImageView.setCache( true );\n\n        Button storeInDatabaseButton = new Button( &quot;Store in database&quot; );\n\n        ListView &lt; UUID &gt; listView = new ListView &lt;&gt;();\n        listView.setPrefWidth( 300 );\n        ObservableList &lt; UUID &gt; ids = FXCollections.observableArrayList();\n        listView.setItems( ids );\n\n        ImageView databaseImageView = new ImageView();\n        databaseImageView.setFitWidth( 300 );\n        databaseImageView.setPreserveRatio( true );\n        databaseImageView.setSmooth( true );\n        databaseImageView.setCache( true );\n\n        // Behavior  --------------------------------------\n        DataSource dataSource = this.configureDataSource();\n        this.configureDatabase( dataSource );\n\n        loadFromDesktopButton.setOnAction(\n                ( ActionEvent event ) -&gt; this.loadImageFromLocalStorage( stage , desktopImageView )\n        );\n        storeInDatabaseButton.setOnAction(\n                ( ActionEvent event ) -&gt; {\n                    Image image = desktopImageView.getImage();\n                    UUID id = this.storeImageInDatabase( image , dataSource );\n                    ids.add( id );  // Add a list item for the image we just stored in database.\n                    listView.getSelectionModel().select( id ); // Select the newly added list item.\n                }\n        );\n\n        listView.getSelectionModel().selectedItemProperty().addListener(\n                ( ObservableValue &lt; ? extends UUID &gt; observableValue , UUID oldValue , UUID newValue ) -&gt; {\n                    Image image = this.fetchImageFromDatabase( newValue , dataSource );\n                    databaseImageView.setImage( image );\n                }\n        );\n\n        // Layout  --------------------------------------\n        stage.setTitle( &quot;Image To Database&quot; );\n        HBox root = new HBox();\n        root.setPadding( new Insets( 15 , 12 , 15 , 12 ) );\n        root.setSpacing( 10 );\n        root.setStyle( &quot;-fx-background-color: Grey;&quot; );\n\n        // Arrange  --------------------------------------\n        root.getChildren().add( loadFromDesktopButton );\n        root.getChildren().add( desktopImageView );\n        root.getChildren().add( storeInDatabaseButton );\n        root.getChildren().add( listView );\n        root.getChildren().add( databaseImageView );\n\n        Scene scene = new Scene( root , 1_250 , 300 );\n        stage.setScene( scene );\n        stage.show();\n    }\n\n\n    // Subroutines  --------------------------------------\n    private void loadImageFromLocalStorage ( final Stage stage , final ImageView imageView )\n    {\n        FileChooser fileChooser = new FileChooser();\n        fileChooser.setTitle( &quot;Open JPEG file&quot; );\n        File file = fileChooser.showOpenDialog( stage );\n        if ( file != null )\n        {\n            System.out.println( file );\n            Image image = new Image( file.toURI().toString() );\n            imageView.setImage( image );\n        }\n    }\n\n    private DataSource configureDataSource ( )\n    {\n        org.h2.jdbcx.JdbcDataSource ds = new org.h2.jdbcx.JdbcDataSource();  // Implementation of `DataSource` bundled with H2. You may choose to use some other implementation.\n        ds.setURL( &quot;jdbc:h2:mem:test;DB_CLOSE_DELAY=-1;&quot; );\n        ds.setUser( &quot;scott&quot; );\n        ds.setPassword( &quot;tiger&quot; );\n        ds.setDescription( &quot;An example database for storing an image.&quot; );\n        return ds;\n    }\n\n    private void configureDatabase ( final DataSource dataSource )\n    {\n        // Create table.\n        String sql =\n                &quot;&quot;&quot;\n                CREATE TABLE IF NOT EXISTS image_\n                (\n                    id_ uuid NOT NULL ,\n                    CONSTRAINT image_pkey_ PRIMARY KEY ( id_ ) ,\n                    row_created_ TIMESTAMP WITH TIME ZONE NOT NULL DEFAULT CURRENT_TIMESTAMP() ,\n                    content_ BLOB\n                )\n                ;\n                &quot;&quot;&quot;;\n        try (\n                Connection conn = dataSource.getConnection() ;\n                Statement stmt = conn.createStatement()\n        )\n        {\n            System.out.println( &quot;INFO - Running `configureDatabase` method.&quot; );\n            stmt.executeUpdate( sql );\n        }\n        catch ( SQLException e ) { e.printStackTrace(); }\n    }\n\n\n    private UUID storeImageInDatabase ( final Image image , final DataSource dataSource )\n    {\n        InputStream inputStream = this.transformImageIntoInputStream( Objects.requireNonNull( image ) );\n\n        // Write to database\n        String sql =\n                &quot;&quot;&quot;\n                INSERT INTO image_ ( id_ , content_ )\n                VALUES ( ? , ? )\n                ;\n                &quot;&quot;&quot;;\n        try\n                (\n                        Connection conn = dataSource.getConnection() ;\n                        PreparedStatement preparedStatement = conn.prepareStatement( sql )\n                )\n        {\n            UUID id = UUID.randomUUID(); // In real work, we would retrieve the value generated by the database rather the app.\n            preparedStatement.setObject( 1 , id );\n            preparedStatement.setBlob( 2 , inputStream );\n            int rowCount = preparedStatement.executeUpdate();\n            if ( rowCount != 1 ) { throw new IllegalStateException( &quot;SQL insert failed to affect any rows.&quot; ); }\n            return id;\n        }\n        catch ( SQLException e ) { e.printStackTrace(); }\n        throw new IllegalStateException( &quot;Should never have reached this point in `storeImageInDatabase` method. &quot; );\n    }\n\n    private Image fetchImageFromDatabase ( final UUID id , final DataSource dataSource )\n    {\n        byte[] bytes = null;\n        String sql =\n                &quot;&quot;&quot;\n                SELECT *\n                FROM image_\n                WHERE id_ = ?\n                ;\n                &quot;&quot;&quot;;\n        try\n                (\n                        Connection conn = dataSource.getConnection() ;\n                        PreparedStatement preparedStatement = conn.prepareStatement( sql )\n                )\n        {\n            System.out.println( &quot;DEBUG id = &quot; + id );\n            preparedStatement.setObject( 1 , id );\n            try (\n                    ResultSet resultSet = preparedStatement.executeQuery() ;\n            )\n            {\n                if ( resultSet.next() )\n                {\n                    System.out.println( &quot;DEBUG resultSet = &quot; + resultSet );\n                    Blob blob = resultSet.getBlob( &quot;content_&quot; );\n                    System.out.println( &quot;DEBUG blob = &quot; + blob );\n                    Image image = this.transformBlobIntoImage( blob );\n                    return image;\n                }\n                else { throw new IllegalStateException( &quot;Failed to find any rows for id: &quot; + id ); }\n            }\n        }\n        catch ( SQLException e ) { e.printStackTrace(); }\n        throw new IllegalStateException( &quot;Should never have reached this point in `storeImageInDatabase` method. &quot; );\n    }\n\n\n    @SuppressWarnings ( &quot;UnnecessaryLocalVariable&quot; )\n    private InputStream transformImageIntoInputStream ( final Image image )\n    {\n        BufferedImage awtBufferedImage = SwingFXUtils.fromFXImage( image , null );\n        ByteArrayOutputStream outputStream = new ByteArrayOutputStream();\n        try\n        {\n            ImageIO.write( awtBufferedImage , &quot;jpg&quot; , outputStream );\n            byte[] res = outputStream.toByteArray();\n            InputStream inputStream = new ByteArrayInputStream( res );\n            return inputStream;\n        }\n        catch ( IOException e ) { e.printStackTrace(); }\n        throw new IllegalStateException( &quot;Should not reach this point in method `transformImageIntoInputStream`.&quot; );\n    }\n\n    private Image transformBlobIntoImage ( final Blob blob )\n    {\n        try\n        {\n            BufferedImage awtBufferedImage = ImageIO.read( blob.getBinaryStream() );\n            Image image = SwingFXUtils.toFXImage( awtBufferedImage , null );\n            return image;\n        }\n        catch ( IOException e ) { throw new RuntimeException( e ); }\n        catch ( SQLException e ) { throw new RuntimeException( e ); }\n    }\n\n    public static void main ( final String[] args )\n    {\n        launch();\n    }\n}\n</code></pre>\n<p>Here is the <code>module-info.java</code> file.</p>\n<pre class=\"lang-java prettyprint-override\"><code>module work.basil.example.fximage {\n    requires javafx.controls;  // JavaFX/OpenJFX API.\n\n    requires java.desktop;     // Needed for classes in AWT that convert image to octets.\n    requires javafx.swing;     // Needed for `javafx.embed.swing.SwingFXUtils` class to convert image to octets.\n\n    requires java.sql;         // JDBC API.\n    requires java.naming;      // Java Naming and Directory Interface (JNDI) API. Needed for `DataSource` in JDBC.\n    requires com.h2database;   // H2 Database Engine.\n\n    exports work.basil.example.fximage;\n}\n</code></pre>\n<p>And my <a href=\"https://en.wikipedia.org/wiki/Apache_Maven\" rel=\"nofollow noreferrer\">Apache Maven</a> <a href=\"https://en.wikipedia.org/wiki/Apache_Maven#Project_Object_Model\" rel=\"nofollow noreferrer\">POM</a> file.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns = &quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi = &quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation = &quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;work.basil.example&lt;/groupId&gt;\n    &lt;artifactId&gt;FxImageToDb&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;FxImage&lt;/name&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx-controls --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-controls&lt;/artifactId&gt;\n            &lt;version&gt;19.0.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/org.openjfx/javafx-swing --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n            &lt;artifactId&gt;javafx-swing&lt;/artifactId&gt;\n            &lt;version&gt;19.0.2.1&lt;/version&gt;\n        &lt;/dependency&gt;\n\n\n        &lt;!-- https://mvnrepository.com/artifact/org.junit.jupiter/junit-jupiter --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n            &lt;version&gt;5.9.2&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/com.h2database/h2 --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;version&gt;2.1.214&lt;/version&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;19&lt;/source&gt;\n                    &lt;target&gt;19&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.openjfx&lt;/groupId&gt;\n                &lt;artifactId&gt;javafx-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;0.0.8&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;!-- Default configuration for running with: mvn clean javafx:run --&gt;\n                        &lt;id&gt;default-cli&lt;/id&gt;\n                        &lt;configuration&gt;\n                            &lt;mainClass&gt;work.basil.example.fximage/work.basil.example.fximage.App&lt;/mainClass&gt;\n                            &lt;launcher&gt;app&lt;/launcher&gt;\n                            &lt;jlinkZipName&gt;app&lt;/jlinkZipName&gt;\n                            &lt;jlinkImageName&gt;app&lt;/jlinkImageName&gt;\n                            &lt;noManPages&gt;true&lt;/noManPages&gt;\n                            &lt;stripDebug&gt;true&lt;/stripDebug&gt;\n                            &lt;noHeaderFiles&gt;true&lt;/noHeaderFiles&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<h2>Resources</h2>\n<p><a href=\"https://stackoverflow.com/q/27846062/642706\"><em>Convert Blob to JPG and update blob</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/50427495/642706\"><em>Java BLOB to image file</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/49469666/642706\"><em>Auto-generate lambda expression as argument in IntelliJ</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/11088612/642706\"><em>JavaFX select item in ListView</em></a></p>\n<p><a href=\"https://docs.oracle.com/javafx/2/ui_controls/list-view.htm\" rel=\"nofollow noreferrer\"><em>Using JavaFX UI Controls — 11 List View</em></a></p>\n<p><a href=\"https://docs.oracle.com/javafx/2/ui_controls/file-chooser.htm\" rel=\"nofollow noreferrer\"><em>Using JavaFX UI Controls — 26 File Chooser</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/22710053/642706\"><em>How can I show an image using the ImageView component in javafx and fxml?</em></a></p>\n<p>H2 Database Engine documentation for <a href=\"http://h2database.com/html/datatypes.html#binary_large_object_type\" rel=\"nofollow noreferrer\"><code>BLOB</code></a> type and for <a href=\"http://h2database.com/html/advanced.html#large_objects\" rel=\"nofollow noreferrer\">discussion of the Large Object</a> types.</p>\n<p>AWT &amp; Swing classes: <a href=\"https://openjfx.io/javadoc/19/javafx.swing/javafx/embed/swing/SwingFXUtils.html\" rel=\"nofollow noreferrer\"><code>SwingFXUtils</code></a></p>\n<p><a href=\"https://stackoverflow.com/q/49335128/642706\"><em>How to convert a JavaFX ImageView to InputStream</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/15035883/642706\"><em>Saving an image in MySQL from Java</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/50783126/642706\"><em>How to save an image from HTML to a DATABASE using JAVA</em></a></p>\n<p><a href=\"https://stackoverflow.com/q/21500339/642706\"><em>Storing Image in Data Base Using Java in Binary Format</em></a></p>\n"}],"owner":{"user_id":642706,"display_name":"Basil Bourque"},"view_count":123,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678139448,"question_id":75656158,"body":"<p>As part of learning <a href=\"https://en.wikipedia.org/wiki/JavaFX\" rel=\"nofollow noreferrer\">JavaFX</a>, I would like to see a minimal example of how to read &amp; write JPEG images to a database while displaying them in a JavaFX app.</p>\n<p>This Question may be similar to this other Question, <a href=\"https://stackoverflow.com/q/75632865/642706\">insert an image to a database with javafx</a>, but hopefully more focused.</p>\n<p>I have seen bits of code here and there for processing images, but I have not been able to convert an image from a <a href=\"https://openjfx.io/\" rel=\"nofollow noreferrer\">OpenJFX</a> <a href=\"https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/image/Image.html\" rel=\"nofollow noreferrer\"><code>Image</code></a> object to something that can be stored in a field in a <a href=\"https://en.wikipedia.org/wiki/SQL\" rel=\"nofollow noreferrer\">SQL</a> database such as <a href=\"https://en.wikipedia.org/wiki/H2_(DBMS)\" rel=\"nofollow noreferrer\">H2 Database Engine</a> via <a href=\"https://en.wikipedia.org/wiki/Java_Database_Connectivity\" rel=\"nofollow noreferrer\">JDBC</a>.</p>\n"},{"tags":["java","javafx"],"answers":[{"owner":{"user_id":2189127,"display_name":"James_D"},"up_vote_count":2,"is_accepted":true,"creation_date":1678126943,"answer_id":75654469,"body":"<p>From the <a href=\"https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/input/MouseDragEvent.html\" rel=\"nofollow noreferrer\">documentation</a>:</p>\n<blockquote>\n<p>When you drag a node, it's still under cursor, so it is considered being a potential gesture target during the whole gesture. If you need to drag a node to a different node and let the other node know about it, you need to ensure that the nodes under the dragged node are picked as the potential gesture targets. You can achieve this by calling setMouseTransparent(true) on the dragged node</p>\n</blockquote>\n<p>In your case, the line is immediately under the mouse cursor (because you set the end coordinates of the line to the mouse coordinates during dragging), so the line receives the mouse drag released event.</p>\n<p>Call</p>\n<pre><code>line.setMouseTransparent(true);\n</code></pre>\n<p>so that the node underneath can receive the event.</p>\n<p>If you need the line to be able to receive mouse events at times other than the dragging, call</p>\n<pre><code>line.setMouseTransparent(true);\n</code></pre>\n<p>in the <code>onDragDetected</code> handler, and</p>\n<pre><code>line.setMouseTransparent(false);\n</code></pre>\n<p>in the <code>onMouseDragReleased</code> handler.</p>\n<p>Note also that <code>onDragDetected</code> is only called after the mouse has been dragged a few pixels. From the <a href=\"https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/input/MouseEvent.html#DRAG_DETECTED\" rel=\"nofollow noreferrer\">documentation</a></p>\n<blockquote>\n<p>Note that his event is generated based on dragging the mouse over a platform-specific distance threshold.</p>\n</blockquote>\n<p>On the other hand, <code>onMouseDragged</code> events are generated during simple mouse press-drag-release, so <code>onMouseDragged</code> is invoked <em>immediately</em> the mouse is dragged a single pixel. Consequently, during the beginning of the drag gesture, the <code>onMouseDragged</code> handler is invoked <em>before</em> the <code>onDragDetected</code> handler, causing the line's end coordinates to be set while its start coordinates are out of sync.</p>\n<p>One solution to this is to use <code>onMouseDragOver</code> (which is only invoked during full mouse press-drag-release gestures, which are initiated by the call to <code>startFullDrag()</code>) in place of <code>onMouseDragged</code>. Since you want to detect drag over <em>anywhere</em>, add this handler to the scene, not to the individual nodes. Since it is only invoked during the full mouse press-drag-release gestures, it will only be invoked after dragging has started on a node. I implement this solution in the code below.</p>\n<p>Another option is to force detection of a mouse drag gesture by calling <code>setDragDetect(true)</code> in the <code>onMouseDragged</code> handler.</p>\n<p>There are also a couple of copy-paste errors in the original code which I have fixed below.</p>\n<p>(Credit to @SedJ601 for spotting a couple of these bugs.)</p>\n<pre><code>public class Example extends Application {\n    @Override\n    public void start(Stage stage) throws Exception {\n        Pane pane = new Pane();\n        Scene scene = new Scene(pane, 1000, 1000);\n        Circle circle = new Circle(400, 500, 50);\n        Rectangle rect = new Rectangle(200, 200, 20, 30);\n        Line line = new Line();\n        line.setStroke(Color.RED);\n        pane.getChildren().add(circle);\n        pane.getChildren().add(rect);\n        pane.getChildren().add(line);\n        Node[] nodes = {circle, rect};\n        scene.setOnMouseDragReleased(e -&gt; {\n            System.out.println(&quot;Scene: drag released&quot;);\n        });\n        for (Node node:nodes) {\n            node.setOnDragDetected(e -&gt; {\n                System.out.println(&quot;drag started&quot;);\n                line.setStartX(node.localToScene(node.getBoundsInLocal()).getCenterX());\n                line.setStartY(node.localToScene(node.getBoundsInLocal()).getCenterY());\n                line.setEndX(e.getX());\n\n                // Copy-paste bug fixed in line below;\n                line.setEndY(e.getY());\n\n                line.setMouseTransparent(true);\n                node.startFullDrag();\n            });\n\n\n            node.setOnMouseDragReleased(e -&gt; {\n                System.out.println(&quot;Node: drag released&quot;);\n                line.setEndX((node.localToScene(node.getBoundsInLocal()).getCenterX()));\n                // Note you had a copy-and-paste error in the next line, which I have fixed:\n                line.setEndY((node.localToScene(node.getBoundsInLocal()).getCenterY()));\n                line.setMouseTransparent(false);\n            });\n\n        }\n\n        // onMouseDragged replaced by onMouseDragOver:\n        scene.setOnMouseDragOver(e -&gt; {\n            line.setEndX(e.getX());\n            line.setEndY(e.getY());\n        });\n\n        stage.setScene(scene);\n        stage.show();\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":21344205,"display_name":"Stach"},"view_count":48,"up_vote_count":2,"accepted_answer_id":75654469,"answer_count":1,"score":2,"creation_date":1678126286,"question_id":75654376,"body":"<pre><code>public class Example extends Application {\n    @Override\n    public void start(Stage stage) throws Exception {\n        Pane pane = new Pane();\n        Scene scene = new Scene(pane, 1000, 1000);\n        Circle circle = new Circle(400, 500, 50);\n        Rectangle rect = new Rectangle(200, 200, 20, 30);\n        Line line = new Line();\n        line.setStroke(Color.RED);\n        pane.getChildren().add(circle);\n        pane.getChildren().add(rect);\n        pane.getChildren().add(line);\n        Node[] nodes = {circle, rect};\n        scene.setOnMouseDragReleased(e -&gt; {\n            System.out.println(&quot;Scene: drag released&quot;);\n        });\n        for (Node node:nodes) {\n            node.setOnDragDetected(e -&gt; {\n                System.out.println(&quot;drag started&quot;);\n                line.setStartX(node.localToScene(node.getBoundsInLocal()).getCenterX());\n                line.setStartY(node.localToScene(node.getBoundsInLocal()).getCenterY());\n                line.setEndX(e.getX());\n                line.setEndY(e.getX());\n                node.startFullDrag();\n            });\n            node.setOnMouseDragged(e -&gt; {\n                line.setEndX(e.getX());\n                line.setEndY(e.getY());\n            });\n            node.setOnMouseDragReleased(e -&gt; {\n                System.out.println(&quot;Node: drag released&quot;);\n                line.setEndX((node.localToScene(node.getBoundsInLocal()).getCenterX()));\n                line.setEndY((node.localToScene(node.getBoundsInLocal()).getCenterX()));\n            });\n\n            stage.setScene(scene);\n            stage.show();\n        }\n    }\n}\n</code></pre>\n<p>For some reason, drag release is called only for scene, but not for node. When line update in onMouseDragged for node is commented out, end of line doesn't follow the cursor, but onMouseDragRelease is called for both scene and node.\nI want to have smooth line drawing, but also preserve onMouseDragRelease particulary for the node.</p>\n"},{"tags":["java","android","android-emulator"],"comments":[{"owner":{"user_id":833647,"display_name":"Ken Wolf"},"edited":false,"comment_id":133424264,"body":"Could it be this? <a href=\"https://developer.android.com/about/versions/13/behavior-changes-13#granular-media-permissions\" rel=\"nofollow noreferrer\">developer.android.com/about/versions/13/&hellip;</a> &quot;Granular media permissions&quot;"},{"owner":{"user_id":8556269,"display_name":"SDIDSA"},"edited":false,"comment_id":133424360,"body":"OH SHUCKS, I scanned through that page multiple times thinking it was &quot;optional&quot;, just now I noticed the use of the word &quot;must&quot; : ** you must request one or more of the following granular media permissions instead of the READ_EXTERNAL_STORAGE permission**"},{"owner":{"user_id":8556269,"display_name":"SDIDSA"},"edited":false,"comment_id":133424408,"body":"yes that was the issue, I just tried READ_MEDIA_IMAGES and the request shows properly and the handler is executed, thank you so much. consider writing an answer and I&#39;ll mark it accepted"}],"answers":[{"owner":{"user_id":833647,"display_name":"Ken Wolf"},"up_vote_count":2,"is_accepted":true,"creation_date":1677862798,"answer_id":75629907,"body":"<p>As of Android 13 and above, apps that request <code>READ_EXTERNAL_STORAGE</code> must instead request one or more of the following more granular permissions:</p>\n<ul>\n<li><code>READ_MEDIA_IMAGES</code></li>\n<li><code>READ_MEDIA_VIDEO</code></li>\n<li><code>READ_MEDIA_AUDIO</code></li>\n</ul>\n<p>Reference: <a href=\"https://developer.android.com/about/versions/13/behavior-changes-13#granular-media-permissions\" rel=\"nofollow noreferrer\">https://developer.android.com/about/versions/13/behavior-changes-13#granular-media-permissions</a></p>\n"}],"owner":{"user_id":8556269,"display_name":"SDIDSA"},"view_count":93,"up_vote_count":2,"accepted_answer_id":75629907,"answer_count":1,"score":2,"creation_date":1677852688,"question_id":75628155,"body":"<p>I'm trying to set up a way to register permission result handlers after the activity is initialized, by creating a <code>Map&lt;Integer, Runnable&gt;</code> to hold the handlers, when I request permission I use a randomly generated code and save a runnable to the Map of codes/handlers.</p>\n<p>Here's what I have so far in my activity class</p>\n<pre><code>private final HashMap&lt;Integer, Runnable&gt; onPermission = new HashMap&lt;&gt;();\n\n//i call this from other classes to ask for a permission and register a handler\npublic void requestPermission(Runnable onGranted, String...permissions) {\n    int code = Permissions.permissionRequestCode();\n    onPermission.put(code, onGranted);\n    requestPermissions(permissions, code);\n}\n\n//overriding this method to check if the Map has a handler for the granted request\n@Override\npublic void onRequestPermissionsResult(int requestCode, @NonNull String[] permissions, @NonNull int[] grantResults) {\n    Runnable handler = onPermission.get(requestCode);\n    if (handler != null &amp;&amp; isGranted(grantResults)) {\n        handler.run();\n        onPermission.remove(requestCode);\n    }\n    super.onRequestPermissionsResult(requestCode, permissions, grantResults);\n}\n\n//utility method to check if all the requested permissions are granted\nprivate boolean isGranted(int[] results) {\n    for (int i : results) {\n        if (i != PackageManager.PERMISSION_GRANTED) {\n            return false;\n        }\n    }\n    return true;\n}\n</code></pre>\n<p>And here is an example of how this can be used, where <code>owner</code> is an my Activity instance :</p>\n<pre><code>private void readImages() {\n    if (ContextCompat.checkSelfPermission(owner, Manifest.permission.READ_EXTERNAL_STORAGE)\n            == PackageManager.PERMISSION_GRANTED) {\n        loadImages();\n    } else {\n        owner.requestPermission(this::loadImages, Manifest.permission.READ_EXTERNAL_STORAGE);\n    }\n}\n</code></pre>\n<p>Now running this on an actual device (Android 12, API 31), works exactly like I would expect (the request shows, and the handler is executed when the permission is granted), however on the emulator (Android 13, API 33), nothing shows when the permission is requested, and it remains &quot;not granted&quot;, the permission doesn't even show in the &quot;App info&quot; even though it's included in the manifest.</p>\n<p>Real device :</p>\n<p><a href=\"https://i.stack.imgur.com/MU1Yd.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MU1Yd.jpg\" alt=\"screenshot from the real device\" /></a></p>\n<p>Emulator :</p>\n<p><a href=\"https://i.stack.imgur.com/a2yhD.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/a2yhD.png\" alt=\"screenshot from the emulator\" /></a></p>\n<p>My manifest :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;uses-permission android:name=&quot;android.permission.INTERNET&quot; /&gt;\n    &lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot;/&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;Mesa&quot;\n        android:roundIcon=&quot;@mipmap/ic_launcher&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/Theme.Mesa.NoActionBar&quot;\n        android:usesCleartextTraffic=&quot;true&quot;&gt;\n        &lt;activity\n            android:name=&quot;.app.Mesa&quot;\n            android:configChanges=&quot;uiMode|screenSize|colorMode&quot;\n            android:exported=&quot;true&quot;\n            android:theme=&quot;@style/Theme.Mesa.NoActionBar&quot;\n            android:windowSoftInputMode=&quot;adjustResize&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>My build.gradle :</p>\n<pre><code>android {\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;org.luke.mesa&quot;\n        minSdk 24\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n        proguardFiles 'proguard-rules.pro'\n    }\n\n    buildTypes {\n        release {\n            minifyEnabled true\n        }\n\n        debug {\n            minifyEnabled false\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n        allprojects {\n            tasks.withType(JavaCompile){\n                options.compilerArgs &lt;&lt;&quot;-Xlint:deprecation&quot;\n            }\n        }\n    }\n    buildFeatures {\n        viewBinding true\n        dataBinding true\n    }\n    packagingOptions {\n        resources {\n            merges += ['META-INF/DEPENDENCIES']\n        }\n    }\n    namespace 'org.luke.mesa'\n    dependenciesInfo {\n        includeInApk true\n        includeInBundle true\n    }\n    buildToolsVersion '33.0.0'\n}\n</code></pre>\n<p>possible duplicates which didn't solve my problem :</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/32213608/no-permissions-granted-on-android-emulator\">No permissions granted on Android emulator</a></li>\n<li><a href=\"https://stackoverflow.com/questions/69102394/permissions-dialog-not-showing-in-android-11\">Permissions Dialog not showing in Android 11</a></li>\n</ul>\n"},{"tags":["java","json","jackson"],"answers":[{"owner":{"user_id":11713777,"display_name":"dariosicily"},"up_vote_count":2,"is_accepted":true,"creation_date":1677869601,"answer_id":75630862,"body":"<p>Because you want to encapsulate a polymorphic value into the <code>Object</code>field of your <code>Field</code> class the task can be solved with a custom <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/deser/std/StdDeserializer.html\" rel=\"nofollow noreferrer\"><code>StdDeserializer</code></a> deserializer distinguishing the three cases you indicated (string, array, and map). So if you take a simplified version of your classes like below:</p>\n<pre><code>@Data\npublic class Field {\n    @JsonDeserialize(using = OptionDeserializer.class)\n    private Object option;\n}\n\n@Data\npublic class DetFieldOption {\n    private String value;\n    private String label;\n}\n</code></pre>\n<p>You can define a custom <code>stdDeserializer</code> that can return a different object in the three cases you indicated checking if the <code>JsonNode</code> option is a string, an array, or an object:</p>\n<pre><code>public class OptionDeserializer extends StdDeserializer&lt;Object&gt; {\n\n    public OptionDeserializer() {\n        super(Object.class);\n    }\n\n    @Override\n    public Object deserialize(JsonParser jp, DeserializationContext dc) throws IOException, JsonProcessingException {\n        ObjectCodec codec = jp.getCodec();\n        JsonNode node = codec.readTree(jp);\n        //jsonnode is an array so it will be converted to DetFieldOption[]\n        if (node.isArray()) {\n            return codec.treeToValue(node, DetFieldOption[].class);\n        }\n        //jsonnode is a pojo so to convert it to a Map&lt;String, String&gt;\n        //it is necessary to define a new TypeReference\n        //no key as Integer because in a json keys are always string\n        //but you can convert them to integer if you need\n        if (node.isObject()) {\n            TypeReference typeRef = new TypeReference&lt;Map&lt;String, String&gt;&gt;(){};\n            Map&lt;String, String&gt; map = codec.readValue(codec.treeAsTokens(node),\n                    dc.getTypeFactory().constructType(typeRef));\n            return map;\n        }\n        //default case node is a string\n        return node.asText();\n    }\n}\n</code></pre>\n<p>Then you can convert json strings like the following below to <code>Field</code> objects:</p>\n<pre><code>String json3 = &quot;&quot;&quot;\n                    {&quot;option&quot;: &quot;myString&quot;}\n              &quot;&quot;&quot;;\n\nString json2 = &quot;&quot;&quot;\n                    {&quot;option&quot;: [{&quot;value&quot;: &quot;myValue&quot;}]}\n               &quot;&quot;&quot;;\nString json3 = &quot;&quot;&quot;\n                    {&quot;option&quot;: {&quot;1&quot;: &quot;myString1&quot;}}\n               &quot;&quot;&quot;;\nField field1 = mapper.readValue(json1, Field.class);\nField field2 = mapper.readValue(json2, Field.class);\nField field3 = mapper.readValue(json3, Field.class);\n</code></pre>\n"}],"owner":{"user_id":471213,"display_name":"usr-local-ΕΨΗΕΛΩΝ"},"view_count":100,"up_vote_count":2,"accepted_answer_id":75630862,"answer_count":1,"score":2,"creation_date":1677843394,"question_id":75626593,"body":"<p>I have a Typescript model being sent as JSON request to my back end server. I can't change the model into a more engineered format, so I have to use what the client is going to send me.</p>\n<p>The Typescript interface uses the pipe to perform polymorphism as shown below:</p>\n<pre class=\"lang-js prettyprint-override\"><code>export interface Field {\n  align: 'center' | 'left'; // css property that does not work  disabled: boolean;\n  label: string;\n  readonly: boolean;\n  ref: string; // unique identifier  size: string; // css width  type: FIELD_TYPES;\n  value: string;\n  required: boolean;\n  visible: string; // 'true' | 'plugin:...'  \n  invisible: 'true' | 'false'; // never used  \n  optional: string; // just in 3 fields, never used \n  option:\n    | string // 'plugin:...'    \n    | { value: string; label: string; disable?: string; labelEng?: string, valueOfAnswerInInterestType?: string }[] //FieldOption\n    | { 1?: string; 2?: string; 3?: string; 4?: string; 5?: string; 6?: string };  //Map&lt;Integer,String&gt;\n}\n</code></pre>\n<p>As you can see, <code>option</code> can either be <code>String</code> or an array, or a plain POJO.</p>\n<p>What I need to achieve is to create a Jackson mapping and use Java's powerful <code>instanceof</code> operator to work on the deserialized class.</p>\n<p>Look at this target model:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\npublic class Field {    \n    private DetFieldAlignment align; // css property that does not work  disabled: boolean;    \n    ....\n    private String optional;//  just in 3 fields, never used    \n   \n    private Object option; // 'plugin:...' | [{ value: 1, label: 'my value' }, ...] | { &quot;1&quot;: &quot;Option one ...&quot;}\n}\n\n@Data\npublic class DetFieldOption {\n    private String value;\n    private String label;\n    private String disable;\n    ....\n}\n\n</code></pre>\n<p>I need to instruct Jackson about polymorphic serialization for the possible subclasses of <code>Object</code>, but I am having difficulty.\nI wrote JUnit tests to validate the result (<code>option instanceof String</code> vs check that every item in list is <code>instanceof FieldOption</code>) but obviously it's not working.</p>\n<p>With the above model, a <code>String</code> is recognized in my test payload, but the array of <code>FieldOption</code> translated into an array of <code>LinkedHashMap</code>s</p>\n<p>Without yet working on the case of <code>Map&lt;Integer,String&gt;</code>, I have tried to add the following polymorphic annotations to <code>Object option</code> field</p>\n<pre class=\"lang-java prettyprint-override\"><code> @JsonTypeInfo(use = JsonTypeInfo.Id.DEDUCTION)    \n    @JsonSubTypes({\n        @JsonSubTypes.Type(String.class),            \n        @JsonSubTypes.Type(FieldOption.class)     \n    })    \n</code></pre>\n<p>It does not work with the following exception</p>\n<pre><code>Caused by: java.lang.IllegalStateException: Subtypes java.lang.String and java.lang.Object have the same signature and cannot be uniquely deduced.\n    at com.fasterxml.jackson.databind.jsontype.impl.AsDeductionTypeDeserializer.buildFingerprints(AsDeductionTypeDeserializer.java:89)\n    at com.fasterxml.jackson.databind.jsontype.impl.AsDeductionTypeDeserializer.&lt;init&gt;(AsDeductionTypeDeserializer.java:48)\n    at com.fasterxml.jackson.databind.jsontype.impl.StdTypeResolverBuilder.buildTypeDeserializer(StdTypeResolverBuilder.java:166)\n    at com.fasterxml.jackson.databind.deser.BasicDeserializerFactory.findPropertyTypeDeserializer(BasicDeserializerFactory.java:2022)\n    ... 89 more\n</code></pre>\n<p>I can't control the payload coming from the front end, which means I can't ask the FE developers to add a type indication in the payload, especially considering that the object could be a String.</p>\n<h2>Question</h2>\n<p>How can I define a polymorphic serialization that deserializes into either:</p>\n<ul>\n<li>java.lang.String</li>\n<li>java.util.Collection</li>\n<li>java.util.Map&lt;Integer,String&gt;</li>\n</ul>\n<p>Of course, I don't expect keys to be other than integers</p>\n"},{"tags":["java","apache-commons"],"comments":[{"owner":{"user_id":1180351,"display_name":"Rob Spoor"},"edited":false,"comment_id":133421997,"body":"Can&#39;t you switch to NIO/2 and its <code>WatchService</code>?"},{"owner":{"user_id":9601720,"display_name":"thmasker"},"edited":false,"comment_id":133459188,"body":"<code>WatchService</code> works, but I can&#39;t use it in my application for other reasons..."}],"answers":[{"owner":{"user_id":2511915,"display_name":"Dark Knight"},"up_vote_count":2,"is_accepted":false,"creation_date":1677835206,"answer_id":75625209,"body":"<p>make use of <code>onFileChange</code> hook provided by <code>FileAlterationListener</code></p>\n<pre><code>@Override\npublic void onFileChange(File file) {\n    System.out.println(&quot;File got changed &quot;+ file);\n}\n</code></pre>\n"}],"owner":{"user_id":9601720,"display_name":"thmasker"},"view_count":34,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1677834892,"question_id":75625163,"body":"<p>I'm using Apache's <code>FileAlterationMonitor</code> to monitor a specific directory in my project, and I was wondering if there is a way to monitor file overwriting too, since otherwise I'd have to delete a file, wait the monitor to perform a check to detect the file was deleted, and then write the file again to behave correctly</p>\n"},{"tags":["java","spring","spring-el"],"answers":[{"owner":{"user_id":17010647,"display_name":"Ksu"},"up_vote_count":2,"is_accepted":false,"creation_date":1677752288,"answer_id":75614062,"body":"<pre><code>@Value(value = &quot;${com.abc.pvc.path}&quot;)\nprivate Path path;\n\n// one level works fine\n@Value(value = &quot;${com.abc.pvc.ftp.path:${com.abc.pvc.path}/ftp}&quot;)\nprivate Path ftpPath;\n\n// two levels do not work\n@Value(value = &quot;${com.abc.pvc.etc.path:${com.abc.pvc.ftp.path:${com.abc.pvc.path}}/etc}&quot;)\nprivate Path etcPath;\n</code></pre>\n<p>you not set placeholder com.abc.pvc.ftp.path, when you set ftpPath<br />\nGuide <a href=\"https://www.baeldung.com/spring-value-annotation\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-value-annotation</a></p>\n"}],"owner":{"user_id":671639,"display_name":"BetaRide"},"view_count":49,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1677751892,"question_id":75613988,"body":"<p>I have a number of <code>@Value</code> properties in my spring bean. Most of the time only the first one is set in the properties file. The others should derieve their values from the first one with sensible defaults if not overwritten.</p>\n<p>Unfortunately this only works with one level. If I try to reference a property with 2 level its not finding it any more.</p>\n<pre><code>@Component(&quot;pvcConfiguration&quot;)\npublic class PvcConfiguration {\n\n    @Value(value = &quot;${com.abc.pvc.path}&quot;)\n    private Path path;\n    \n    // one level works fine\n    @Value(value = &quot;${com.abc.pvc.ftp.path:${com.abc.pvc.path}/ftp}&quot;)\n    private Path ftpPath;\n\n    // two levels do not work\n    @Value(value = &quot;${com.abc.pvc.etc.path:${com.abc.pvc.ftp.path}/etc}&quot;)\n    private Path etcPath;\n\n}\n</code></pre>\n<p>Error message:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: Could not resolve placeholder 'com.abc.pvc.ftpPath' in value &quot;com.abc.pvc.etcPath:${ch.sbb.infop.pvc.ftp.path}/etc&quot;\n</code></pre>\n<p>Any ideas how to get this working?</p>\n"},{"tags":["java","junit","automated-tests","cucumber","junit5"],"comments":[{"owner":{"user_id":32352,"display_name":"johanneslink"},"edited":false,"comment_id":133392501,"body":"The extension API is mostly about exactly that. <a href=\"https://junit.org/junit5/docs/current/user-guide/#extensions\" rel=\"nofollow noreferrer\">junit.org/junit5/docs/current/user-guide/#extensions</a>"}],"answers":[{"owner":{"user_id":3429133,"display_name":"beatngu13"},"up_vote_count":2,"is_accepted":true,"creation_date":1677704331,"answer_id":75608953,"body":"<p>As mentioned by <a href=\"https://stackoverflow.com/questions/75602216/does-junit-5-have-anything-like-cucumbers-tagged-hooks#comment133392501_75602216\">@johanneslink</a>, <a href=\"https://junit.org/junit5/docs/current/user-guide/#extensions\" rel=\"nofollow noreferrer\">extensions</a> are the JUnit Jupiter way of doing stuff like that:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyTest {\n\n    @Retention(RetentionPolicy.RUNTIME)\n    @Target(ElementType.METHOD)\n    @ExtendWith(MyExtension.class)\n    @interface MyAnnotation {\n\n    }\n\n    static class MyExtension implements BeforeTestExecutionCallback {\n\n        @Override\n        public void beforeTestExecution(ExtensionContext context) {\n            System.out.println(&quot;extension&quot;);\n        }\n\n    }\n\n    @Test\n    @MyAnnotation\n    void testWithExtension() {\n        System.out.println(&quot;test with extension&quot;);\n    }\n\n    @Test\n    void testWithoutExtension() {\n        System.out.println(&quot;test without extension&quot;);\n    }\n\n}\n</code></pre>\n<p>Output:</p>\n<pre class=\"lang-none prettyprint-override\"><code>extension\ntest with extension\ntest without extension\n</code></pre>\n"}],"owner":{"user_id":21310543,"display_name":"blurryface21"},"view_count":70,"up_vote_count":2,"accepted_answer_id":75608953,"answer_count":1,"score":2,"creation_date":1677665239,"question_id":75602216,"body":"<p>Is there any way to annotate single test with hooks in JUnit5 like in Cucumber?</p>\n<p>For example in cucumber it's possible to write hook like</p>\n<pre><code>@Before(&quot;@SomeTest&quot;)\npublic void beforeSomeTest(){\n}\n</code></pre>\n<p>And then if we tag test with @SomeTest annotation then hook will run before test.</p>\n<p>Is there any way to do this in JUnit5?</p>\n"},{"tags":["java","multithreading"],"comments":[{"owner":{"user_id":3890632,"display_name":"khelwood"},"edited":false,"comment_id":133360779,"body":"It seems to say that long/double operations are <i>atomic</i> if the variable is <i>volatile</i>. It does <b>not</b> say that int variables are inherently volatile."},{"owner":{"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"edited":false,"comment_id":133361024,"body":"It says that <i>reading or writing a variable</i> of a variable (of type <code>int</code>) is an atomic operation (i.e. you can never observe it reading or writing two halves separately). It doesn&#39;t say that <i>changes</i> are atomic."},{"owner":{"user_id":5133585,"display_name":"Sweeper"},"edited":false,"comment_id":133361145,"body":"There is literally nothing about visibility in the quote."},{"owner":{"user_id":21303173,"display_name":"mkarmi"},"edited":false,"comment_id":133361192,"body":"@Sweeper what I want to understand is if that atomic guarantees visibility for other threads."},{"owner":{"user_id":2846138,"display_name":"cyberbrain"},"edited":false,"comment_id":133361432,"body":"&quot;atomic&quot; will guarantee that a thread always reads a complete change at once, but not that it reads every change from another thread at the right time (e.g. due to register read optimiziations). <code>volatile</code> ensures that a thread reads in a field &quot;freshly&quot; from memory before an operation."}],"answers":[{"owner":{"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"up_vote_count":1,"is_accepted":true,"creation_date":1677585430,"answer_id":75591757,"body":"<p>An atomic write means that all the bits of a value a transfered from the CPU core into memory in one chunk. An atomic read means similarly that all the bits of a value are transfered from the memory into the CPU core in one chunk.</p>\n<p>A non-atomic write or read means that the value is transfered in two (or more) separate chunks.</p>\n<hr />\n<p>Consider a field</p>\n<pre><code>long someField = 0x00000000_12345678;\n</code></pre>\n<p>and two threads: thread one reads that field at the same time thread two updates that field to <code>0x12345678_00000000</code>.</p>\n<p>With non-atomic reads and writes the following can happen:</p>\n<ul>\n<li>thread two writes the first 32 bits to memory (0x12345678)</li>\n<li>thread one reads the first 32 bits from memory (0x12345678)</li>\n<li>thread one reads the second 32 bits from memory (0x12345678)</li>\n<li>thread two writes the second 32 bits to memory (0x00000000)</li>\n</ul>\n<p>After this sequence, the value that thread one has read is 0x12345678_12345678 - a value that was never written as a whole.</p>\n<p>The statement in the JLS states that for <code>long</code> and <code>double</code> this can happen unless you declare the field as <code>volatile</code>.</p>\n<p>It also states that a similar behaviour for all other types will never occur. For example with <code>int</code> values:</p>\n<pre><code>int someOtherField = 0x1234_0000;\n</code></pre>\n<p>and one thread reading that field while another thread updates that field to 0x0000_1234: the value that the first thread reads will either be 0x1234_0000 or 0x0000_1234.</p>\n<hr />\n<p>For non-volatile fields however another outcome is possible (not related to atomicity, but to <code>volatile</code> fields):</p>\n<pre><code>while (someOtherField == 0x1234_0000) {\n    // do something\n}\n</code></pre>\n<p>A thread executing this piece of code is allowed to read the field only once and evaluate the condition to <code>true</code>, even if some other thread later changes the value of <code>someOtherField</code>.</p>\n<hr />\n<p>Why did the designers of Java use the <code>volatile</code> designator to also guarantee atomic reads and writes of <code>long</code> and <code>double</code>?</p>\n<p>Probably because they didn't want to introduce another designator for &quot;these values must be read and written atomically&quot;.</p>\n<p>Either your code cares about values (of type double or long) being written atomically - and then you are working with different threads, so you are most probably also interested in these changed values being visible to other threads, so you need the field to be volatile anyway.</p>\n<p>Or the values are only accessed from a single thread - in this case atomicity is not required (because reading both halves and writing both halves are never interleaved) and visibility in other threads is also not required.</p>\n"},{"owner":{"user_id":2245707,"display_name":"pveentjer"},"up_vote_count":1,"is_accepted":false,"creation_date":1677762773,"answer_id":75615898,"body":"<p>In simple terms, volatile provides the following 3 properties:</p>\n<ul>\n<li>atomicity</li>\n<li>ordering</li>\n<li>visibility</li>\n</ul>\n<p>As Thomas Klager already explained, atomicity guarantees that an operation is atomic so isn't some interleaving of other operations like torn read or write. This is only a problem on 32 bits JVMs in combination with long/doubles.</p>\n<p>Ordering guarantees that surrounding loads and stores are ordered. E.g.:</p>\n<pre><code>int a;\nvolatile int b;\n\nthread1(){\n   a=1; \n   b=1;\n}\n\nthread2(){\n    while(b==0);\n    print(&quot;a=:&quot;+a);\n}\n</code></pre>\n<p>Can it happen that a=0 is printed? In the above example this can't happen because the 'b' orders the accesses to 'b'. But if 'b' would be a plain variable, then the 'a=0' could be printed.</p>\n<p>The last one is visibility. So will a write to a variable on one CPU, be seen on another CPU? On modern hardware visibility isn't a concern because caches are coherent and store buffers eventually get written to the coherent cache. It is mostly a compiler concern, e.g the compiler could optimize this:</p>\n<pre><code>boolean stop;\n\nthread1(){\n   while(!stop){\n      print(&quot;loop&quot;);\n   }\n}\n\nthread2(){\n  stop = true;\n}\n</code></pre>\n<p>To:</p>\n<pre><code>boolean stop;\n\nthread1(){\n   if(!stop){\n      while(true){\n         print(&quot;loop&quot;);\n      }\n   }\n}\n\nthread2(){\n  stop = true;\n}\n</code></pre>\n<p>Now it is clear that this loop never needs to see the updated stop value. With volatile, such compiler optimizations are prohibited.</p>\n"}],"owner":{"user_id":21303173,"display_name":"mkarmi"},"view_count":97,"up_vote_count":2,"accepted_answer_id":75591757,"answer_count":2,"score":2,"creation_date":1677576354,"question_id":75590089,"body":"<p>I was reading this statement :</p>\n<blockquote>\n<p>The Java language specification guarantees that reading or writing a variable is an atomic operation(unless the variable is of type long or double). Operations variables of type long or double are only atomic if they declared with the volatile keyword.</p>\n</blockquote>\n<p>now I wonder if I need really to use volatile on &quot;int&quot; or any variable that is not long or double for example considering it's atomic, are the changes to that variable guaranteed to be visible by other thread ?</p>\n<hr />\n<p>What I want to understand if that atomic guarantees visibility for other thread without using volatile.</p>\n"},{"tags":["java"],"answers":[{"owner":{"user_id":527312,"display_name":"ktm5124"},"up_vote_count":2,"is_accepted":false,"creation_date":1677566970,"answer_id":75588687,"body":"<p>Interesting question!</p>\n<p>I wrote a small program that outputs some memory statistics.</p>\n<pre><code>public class Memory {\n    public static void main(String[] args) {\n        Runtime runtime = Runtime.getRuntime();\n\n        System.out.println(&quot;Max memory&quot;);\n        System.out.println(runtime.maxMemory());\n\n        System.out.println(&quot;Total memory&quot;);\n        System.out.println(runtime.totalMemory());\n\n        System.out.println(&quot;Free memory&quot;);\n        System.out.println(runtime.freeMemory());\n    }\n}\n</code></pre>\n<p>We can run this program with the command:</p>\n<pre><code>java -Xms16m -Xmx16m Memory.java\n</code></pre>\n<p>The &quot;max memory&quot; and &quot;total memory&quot; values should be identical.</p>\n<p>Now let's try the command:</p>\n<pre><code>java -Xms16m -Xmx64m Memory.java\n</code></pre>\n<p>The value of &quot;max memory&quot; should be larger than the value of &quot;total memory&quot;.</p>\n<p>Why is this?</p>\n<p>It's because the -Xms flag corresponds to &quot;heap initial capacity&quot; and the -Xmx flag corresponds to &quot;heap max capacity&quot;. You can verify this fact by running the program with additional flags.</p>\n<pre><code>java -Xms16m -Xmx64m -XX:+PrintCommandLineFlags Memory.java\n</code></pre>\n<p>To summarize what we have covered... we are using the -Xms and -Xmx flags to set the initial capacity of the heap and the maximum capacity of the heap. The small program included in this post behaves as expected, printing memory statistics that are consistent with the -Xms and -Xmx arguments.</p>\n<p>The option <code>-Xms16m</code> is equivalent to <code>-Xms16M</code> and they both mean an initial heap capacity of 16 MB.</p>\n<p>I hope this helps.</p>\n"}],"owner":{"user_id":7194392,"display_name":"Jack Ma"},"view_count":30,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1677564397,"question_id":75588384,"body":"<p>IDEA VMoptions: <code>-Xmx100m -Xms100m -XX:+PrintGCDetails -XX:+PrintCommandLineFlags</code></p>\n<p>code:</p>\n<pre><code>    public static void main(String[] args) {\n        Runtime rt = Runtime.getRuntime();\n        System.out.println(rt.maxMemory());\n        System.out.println(rt.totalMemory());\n        System.out.println(rt.freeMemory());\n    }\n</code></pre>\n<p>Question:</p>\n<ol>\n<li><p>From comments of source code, maxMemory is the max amount of memory JVM attempt to use, but why the output is smaller than 10MB? So what do these memory represents for?</p>\n</li>\n<li><p>From the output, Metaspace seems belonging to Heap. Why?</p>\n</li>\n<li><p>From the output, PSYoungGen+ParOldGen != 10MB configured in vm options <code>-Xmx100m -Xms100m</code></p>\n</li>\n</ol>\n<p>output:</p>\n<pre><code>-XX:InitialHeapSize=104857600 -XX:MaxHeapSize=104857600 -XX:+PrintCommandLineFlags -XX:+PrintGCDetails -XX:+UseCompressedClassPointers -XX:+UseCompressedOops -XX:+UseParallelGC \nobjc[73147]: Class JavaLaunchHelper is implemented in both /Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home/bin/java (0x108b194c0) and /Library/Java/JavaVirtualMachines/jdk1.8.0_144.jdk/Contents/Home/jre/lib/libinstrument.dylib (0x108c5e4e0). One of the two will be used. Which one is undefined.\n100663296\n100663296\n98035184\nHeap\n PSYoungGen      total 29696K, used 3078K [0x00000007bdf00000, 0x00000007c0000000, 0x00000007c0000000)\n  eden space 25600K, 12% used [0x00000007bdf00000,0x00000007be201b88,0x00000007bf800000)\n  from space 4096K, 0% used [0x00000007bfc00000,0x00000007bfc00000,0x00000007c0000000)\n  to   space 4096K, 0% used [0x00000007bf800000,0x00000007bf800000,0x00000007bfc00000)\n ParOldGen       total 68608K, used 0K [0x00000007b9c00000, 0x00000007bdf00000, 0x00000007bdf00000)\n  object space 68608K, 0% used [0x00000007b9c00000,0x00000007b9c00000,0x00000007bdf00000)\n Metaspace       used 3269K, capacity 4496K, committed 4864K, reserved 1056768K\n  class space    used 359K, capacity 388K, committed 512K, reserved 1048576K\n</code></pre>\n<p>Thanks</p>\n"},{"tags":["java","spring-boot","nested"],"answers":[{"owner":{"user_id":19598245,"display_name":"Phil Ku"},"up_vote_count":1,"is_accepted":false,"creation_date":1677559583,"answer_id":75587963,"body":"<p>Try this:</p>\n<pre><code>public &lt;T&gt; ResponseEntity&lt;T&gt; validateRequest(Request request) {\n  if(agentRepository.findAgentByRequestPoint(request.getPoint()).isEmpty())\n    return ResponseEntity.ok((T)ErrorDTO.from(bundle.getString(&quot;point.not.set&quot;)));\n    \n  if(!request.getAdvanced().getFunction().equals(&quot;CheckAcc&quot;))\n    return ResponseEntity.ok((T) response.wrongCheck(1, 1));\n\n  if(ServiceRepository.findServiceByServiceId(Long.parseLong(request.getAdvanced().getService())).isEmpty())\n    return ResponseEntity.ok((T)  response.wrongCheck(1, 4));\n}\n</code></pre>\n<p>I would suggest more validations or null checkings on the variables / methods, as some fields like <code>request.getAdvanced().getFunction().equals(&quot;CheckAcc&quot;)</code> or <code>request.getAdvanced().getService()</code> seems vulnerable to NPEs.</p>\n<p>Or at least try catching the method and log stacktraces for future debugging purposes.</p>\n<p>Hope it can help.</p>\n"},{"owner":{"user_id":9443176,"display_name":"Max Aminov"},"up_vote_count":1,"is_accepted":true,"creation_date":1677560103,"answer_id":75588008,"body":"<p>The best way to make your code more readable is to split it into different methods:</p>\n<pre><code>public &lt;T&gt; ResponseEntity&lt;T&gt; validateRequest(Request request) {\n    if (!isAgentExists(request)) {\n        return ResponseEntity.ok((T) ErrorDTO.from(bundle.getString(&quot;point.not.set&quot;)));\n    }\n\n    if (!isRequestFunctionCorrect(request, &quot;CheckAcc&quot;)) {\n        return ResponseEntity.ok((T) response.wrongCheck(1, 1));\n    }\n\n    if (!isServiceExists(request)) {\n        return ResponseEntity.ok((T)  response.wrongCheck(1, 4);\n    }\n\n    // do the logic if everything is correct\n}\n\nprivate boolean isAgentExists(Request request) {\n    return agentRepository.findAgentByRequestPoint(request.getPoint()).isPresent();\n}\n\nprivate boolean isRequestFunctionCorrect(Request request, String func) {\n    if (request.getAdvanced() != null) {\n        return func.equals(request.getAdvanced().getFunction());\n    }\n    return false;\n}\n\nprivate boolean isServiceExists(Request request) {\n    Long serviceId = Long.parseLong(request.getAdvanced().getService());\n    return ServiceRepository.findServiceByServiceId(serviceName).isPresent()\n}\n\n</code></pre>\n<p>In some cases I added additional null check to avoid NPE.</p>\n<p>Hope it will helps you :)</p>\n"}],"owner":{"user_id":7307613,"display_name":"Akbar  Amanov"},"view_count":55,"up_vote_count":2,"accepted_answer_id":75588008,"answer_count":2,"score":2,"creation_date":1677558847,"question_id":75587909,"body":"<p>I am handling response to a request, and I need to make sure that request is formed correctly and for different mistakes in a request I need to return different answers. I ended up doing nested ifs and after the third one I kinda feel that it looks quite messy and potentially buggy. So I came here to ask for an advice on how I can modify my code to avoid nested if statements.</p>\n<p>Here is the code:</p>\n<pre><code> public &lt;T&gt; ResponseEntity&lt;T&gt; validateRequest(Request request) {\n        if(agentRepository.findAgentByRequestPoint(request.getPoint()).isPresent()){\n            if(request.getAdvanced().getFunction().equals(&quot;CheckAcc&quot;)){\n                if(ServiceRepository\n.findServiceByServiceId(Long.parseLong(request.getAdvanced().getService()))\n                        .isPresent()){\n                    \n                }else{\n                    ResponseEntity.ok((T)  response.wrongCheck(1, 4);\n                }\n            }else{\n                ResponseEntity.ok((T) response.wrongCheck(1, 1));\n            }\n        }else{\n            return ResponseEntity.ok((T)ErrorDTO.from(bundle.getString(&quot;point.not.set&quot;)));\n        }\n       \n    }\n</code></pre>\n"},{"tags":["java","gradle"],"comments":[{"owner":{"user_id":1079354,"display_name":"Makoto"},"edited":false,"comment_id":133347803,"body":"You&#39;re going to <i>either</i> have to change your build script or change your test.  I personally would want to isolate where I&#39;m using those environment variables and inject them instead, since <code>System.getenv</code> introduces state that&#39;s outside of your control normally."},{"owner":{"user_id":2868801,"display_name":"dave_thompson_085"},"edited":false,"comment_id":133352237,"body":"Even with plain <code>java</code>, <code>-Dthis=that</code> sets a <b>system property</b> NOT an env var. AND it does so only if before (to the left of) the &#39;what-to-run&#39; parameter (main class or module name or jar name, depending)."}],"answers":[{"owner":{"user_id":1100135,"display_name":"piotrek"},"up_vote_count":2,"is_accepted":true,"creation_date":1677587041,"answer_id":75592028,"body":"<p>found it. as simple as:</p>\n<pre><code>my_var=xyz ./gradlew test \n</code></pre>\n"}],"owner":{"user_id":1100135,"display_name":"piotrek"},"view_count":80,"up_vote_count":2,"accepted_answer_id":75592028,"answer_count":1,"score":2,"creation_date":1677512729,"question_id":75582593,"body":"<p>I have a standard java project layout and in some of my tests i have <code>System.getenv(&quot;my_var&quot;)</code>. I'd like to do run my tests using command line (from CI server) and pass the value of env var. Something like</p>\n<pre><code>./gradlew test -Dmy_var=xyz\n</code></pre>\n<p>but of course, this one doesn't work as tests are run by different jvm. so what's the exact command to pass the env var? i would prefer not to change my build scripts, create new tasks etc. i just want to pass env var via commandline. how can i do it?</p>\n"},{"tags":["java","iso8583","jpos"],"answers":[{"owner":{"user_id":139985,"display_name":"Stephen C"},"up_vote_count":1,"is_accepted":true,"creation_date":1677407474,"answer_id":75571363,"body":"<blockquote>\n<p>My understanding is that, the purpose of <code>&lt;property name=&quot;timeout&quot; value=&quot;60000&quot;/&gt;</code> and <code>timeout</code> param of <code>QMUX.request(msg,timeout)</code> method same.</p>\n</blockquote>\n<p>I don't think so.</p>\n<ul>\n<li><p>The former results in <code>setSOTimeout</code> being called on each <code>Socket</code> as it is connected.  According to the javadoc, setting an <code>SO_Timeout</code> has the following effect:</p>\n<blockquote>\n<p>Enable/disable <code>SO_TIMEOUT</code> with the specified timeout, in milliseconds. With this option set to a non-zero timeout, a read() call on the <code>InputStream</code> associated with this <code>Socket</code> will block for only this amount of time. If the timeout expires, a <code>java.net.SocketTimeoutException</code> is raised, though the <code>Socket</code> is still valid. The option must be enabled prior to entering the blocking operation to have effect. The <code>timeout</code> must be &gt; 0. A <code>timeout</code> of zero is interpreted as an infinite timeout.</p>\n</blockquote>\n<p>In other words, this is a transport level timeout.  I haven't researched what happens when <code>SocketTimeoutException</code> is raised, but I imagine that the channel will be marked as failed ... in some way.</p>\n</li>\n<li><p>The latter is a timeout for the specific request.  It is an application protocol timeout.  When it occurs, it looks like the <code>request(...)</code> call returns <code>null</code>.  The channel will still be alive.</p>\n<p>If you pass zero as the timeout, there is no request level timeout.  The <code>request</code> call will wait indefinitely for the response.</p>\n</li>\n</ul>\n<hr />\n<blockquote>\n<p>Why is <code>QMUX.request()</code> method designed to pass the timeout parameter compulsorily?</p>\n</blockquote>\n<p>That is something you would need to ask the <code>org.jpos</code> designers.</p>\n"},{"owner":{"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"up_vote_count":1,"is_accepted":false,"creation_date":1677423176,"answer_id":75572794,"body":"<p>The timeout of the request method is the time it waits for a response.</p>\n<p>The timeout of the channel is the time after which it disconnects without any activity.</p>\n<p>They are two different things, that's why you need to specify one on the request method.</p>\n<p>If you don't want to wait for a response, you can use the send method. If you want to wait forever, you can use a timeout of zero, but this is not recommended.</p>\n<p>One more thing, the mux doesn't have a reference to the channel, it talks to it through its queues, so it cannot override any configuration in any way.</p>\n"}],"owner":{"user_id":3124992,"display_name":"Sanjok"},"view_count":68,"up_vote_count":2,"accepted_answer_id":75571363,"answer_count":2,"score":2,"creation_date":1677403577,"question_id":75571062,"body":"<p>I am connecting to a host using the config below, which has the <strong>timeout</strong> property too.\nNow my question is why do I again need to pass the <strong>timeout</strong> param to <code>QMUX.request(msg, timeout)</code> ?\nmy understanding is that, the purpose of <code>&lt;property name=&quot;timeout&quot; value=&quot;60000&quot;/&gt;</code> and <strong>timeout</strong> param of <code>QMUX.request(msg,timeout)</code> method same. please correct me if I am wrong.</p>\n<pre><code> &lt;channel-adaptor name=&quot;my-channel-adaptor&quot;\n                     class=&quot;org.jpos.q2.iso.ChannelAdaptor&quot;\n                     logger=&quot;Q2&quot;\n                     realm=&quot;my-channel-realm&quot;\n                     pool-size=&quot;50&quot;\n                     thread-pool-size=&quot;10&quot;&gt;\n      &lt;channel class=&quot;org.jpos.iso.channel.ASCIIChannel&quot;\n               packager=&quot;org.jpos.iso.packager.GenericPackager&quot;&gt;\n        &lt;property name=&quot;host&quot; value=&quot;localhost&quot;/&gt;\n        &lt;property name=&quot;port&quot; value=&quot;65000&quot;/&gt;\n        &lt;property name=&quot;timeout&quot; value=&quot;60000&quot;/&gt;\n        &lt;property name=&quot;maxPacketLength&quot; value=&quot;4096&quot;/&gt;\n        &lt;property name=&quot;header&quot; value=&quot;600&quot;/&gt;\n        &lt;property name=&quot;lengthHeader&quot; value=&quot;2&quot;/&gt;\n        &lt;property name=&quot;keepAlive&quot; value=&quot;true&quot;/&gt;\n      &lt;/channel&gt;\n    &lt;/channel-adaptor&gt;\n</code></pre>\n"},{"tags":["java","http-post","httpclient"],"answers":[{"owner":{"user_id":5899430,"display_name":"Majid Asadi"},"up_vote_count":0,"is_accepted":false,"creation_date":1677393145,"answer_id":75570334,"body":"<pre><code>byte[] emptyData = new byte[0];\n\nHttpPost httpPost = new HttpPost(&quot;http://example.com/upload&quot;);\n\nhttpPost.setEntity(new ByteArrayEntity(emptyData));\n\nHttpClient httpClient = new DefaultHttpClient();\nHttpResponse httpResponse = httpClient.execute(httpPost);\n</code></pre>\n"},{"owner":{"user_id":7739083,"display_name":"Stempler"},"up_vote_count":2,"is_accepted":true,"creation_date":1677771098,"answer_id":75617579,"body":"<p>The code you provide is for json type, not binary type:</p>\n<pre><code>httpPost.addHeader(&quot;Content-Type&quot;, &quot;application/json;charset=utf-8&quot;);\n</code></pre>\n<p>If you want an empty json request body, do:</p>\n<pre><code>StringEntity se = new StringEntity(&quot;{}&quot;, &quot;UTF-8&quot;);\n</code></pre>\n<p>This the equivalent of</p>\n<pre><code> --data-binary {}\n</code></pre>\n<p>&quot;application/octet-stream&quot; is a generic binary data type, meaning it can be used to represent any type of binary data. This MIME type is commonly used when the content type of the data is unknown or when the data being transferred does not fit any other specific MIME type. It is often used to transfer files or raw binary data.</p>\n<p>For binary, use:</p>\n<pre><code>httpPost.addHeader(&quot;Content-Type&quot;, &quot;application/octet-stream&quot;);\n</code></pre>\n<p>and initialize the entity with an empty inputStream:</p>\n<pre><code>import org.apache.commons.io.IOUtils;\nimport org.apache.http.HttpEntity;\nimport org.apache.http.client.HttpClient;\nimport org.apache.http.client.methods.HttpPost;\nimport org.apache.http.entity.ContentType;\nimport org.apache.http.entity.InputStreamEntity;\nimport org.apache.http.impl.client.HttpClientBuilder;\n....\npublic static void main(String[] args) throws IOException {\n    \n    String url = &quot;https://example.com/api/binary-endpoint&quot;;\n    \n    // create HttpClient instance\n    HttpClient httpClient = HttpClientBuilder.create().build();\n    \n    // create HttpPost instance with URL\n    HttpPost httpPost = new HttpPost(url);\n    \n    // create empty HttpEntity with binary content type\n    HttpEntity entity = new InputStreamEntity(IOUtils.toInputStream(&quot;&quot;), ContentType.APPLICATION_OCTET_STREAM);\n    \n    // set entity to request\n    httpPost.setEntity(entity);\n    \n    // send request\n    httpClient.execute(httpPost);\n}\n</code></pre>\n"}],"owner":{"user_id":1433066,"display_name":"Nick Dong"},"view_count":204,"up_vote_count":2,"accepted_answer_id":75617579,"answer_count":2,"score":2,"creation_date":1677217163,"question_id":75552968,"body":"<p>I wanna implement the HTTP post from curl.</p>\n<p><code>curl $CURL_OPTS -X POST --data-binary {} -s -K &lt;(cat &lt;&lt;&lt; &quot;-u micromdm:$API_TOKEN&quot;) &quot;$SERVER_URL/$endpoint&quot;</code></p>\n<p>The curl command above sends empty binary data.</p>\n<p>I know how to send string data.</p>\n<p><strong>Sending string data</strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>try {\n            CloseableHttpClient httpClient = null;\n            try {\n                httpClient = HttpClients.createDefault();\n                HttpPost httpPost = new HttpPost(url);\n\n                httpPost.addHeader(&quot;Content-Type&quot;, &quot;application/json;charset=utf-8&quot;);\n                httpPost.addHeader(&quot;Accept&quot;, &quot;application/json;charset=utf-8&quot;);\n                httpPost.addHeader(&quot;Authorization&quot;, &quot;XXXXXXXX&quot;);\n\n                StringEntity se = new StringEntity(jsonstring, &quot;UTF-8&quot;);\n                httpPost.setEntity(se);\n\n                HttpResponse httpResponse = httpClient.execute(httpPost);\n            catch () {\n            }\ncatch () {\n}\n</code></pre>\n<p>But how to send empty binary data?</p>\n<p>Trying</p>\n<pre class=\"lang-java prettyprint-override\"><code>                ByteArrayEntity byteArrayEntity = [];\n                httpPost.setEntity(byteArrayEntity, ContentType.DEFAULT_BINARY);\n</code></pre>\n<p>It is not work.</p>\n<p>I read some articles which are not properly solutions.</p>\n<p><a href=\"https://stackoverflow.com/questions/9692166/http-post-in-java-with-file-upload\">http-post-in-java-with-file-upload</a></p>\n<p><a href=\"https://stackoverflow.com/questions/36901714/how-to-get-raw-binary-data-from-a-post-request-processed-by-spring\">how-to-get-raw-binary-data-from-a-post-request-processed-by-spring</a></p>\n<p><a href=\"https://stackoverflow.com/questions/37141157/uploading-binary-data-with-httppost\">uploading-binary-data-with-httppost</a></p>\n<p><a href=\"https://www.baeldung.com/httpclient-post-http-request\" rel=\"nofollow noreferrer\">httpclient-post-http-request</a></p>\n<p>There are many similar related articles, but I didn't find the solution. Can anyone give me the code sample for this? Thank you.</p>\n"},{"tags":["java","java-native-interface"],"comments":[{"owner":{"user_id":40342,"display_name":"Joachim Sauer"},"edited":false,"comment_id":133290491,"body":"Wouldn&#39;t it be sufficient to search for invocations of <code>System.loadLibrary</code> in all your jar files that make up your application? Yes, in theory code could call that reflectively, but I don&#39;t know why they&#39;d do that."},{"owner":{"user_id":21274485,"display_name":"Augustin Cayot "},"edited":false,"comment_id":133290596,"body":"Ok, perhaps but help me understand your suggestion . . . my pom includes dozens of dependencies and those dependencies are jar files that get bundled with the application. . . given that I don&#39;t have access to the source code in those jar files, I&#39;m not clear how you propose to check for invocations of <code>System.loadLibrary</code> within them. Could you elaborate a bit? Thanks for the suggestion by the way."},{"owner":{"user_id":40342,"display_name":"Joachim Sauer"},"edited":false,"comment_id":133291744,"body":"<a href=\"https://stackoverflow.com/questions/930289/how-can-i-find-all-the-methods-that-call-a-given-method-in-java\">Something like this</a> could quite easily search through all the libraries, but it seems you already got a better option."}],"answers":[{"owner":{"user_id":3699139,"display_name":"Jorn Vernee"},"up_vote_count":2,"is_accepted":true,"creation_date":1677174305,"answer_id":75548470,"body":"<p>You can use the <code>-Xlog:library=trace</code> VM flag to print out information about libraries that are loaded and symbol lookups. For instance:</p>\n<pre><code>&gt; java '-Xlog:library=info' Main\n[0.011s][info][library] Loaded library jsvml.dll, handle 0x00007ffbd4ab0000\n[0.052s][info][library] Failed to find _JNI_OnLoad_jimage@8 in library with handle 0x00007ff6a9610000\n[0.052s][info][library] Failed to find JNI_OnLoad_jimage in library with handle 0x00007ff6a9610000\n[0.053s][info][library] Loaded library C:\\Program Files\\Java\\jdk-17\\bin\\jimage.dll, handle 0x00007ffbfd960000\n[0.053s][info][library] Failed to find _JNI_OnLoad@8 in library with handle 0x00007ffbfd960000\n[0.053s][info][library] Failed to find JNI_OnLoad in library with handle 0x00007ffbfd960000\n[0.054s][info][library] Found Java_jdk_internal_jimage_NativeImageBuffer_getNativeMap in library with handle 0x00007ffbfd960000\n</code></pre>\n"}],"owner":{"user_id":21274485,"display_name":"Augustin Cayot "},"view_count":144,"up_vote_count":2,"accepted_answer_id":75548470,"answer_count":1,"score":2,"creation_date":1677172704,"question_id":75548200,"body":"<p>I have profiled my Java application and know that it contains a memory leak in native code but not in the application's own Java source code. I'm trying to identify the dependency or dependencies that might be at fault.</p>\n<p>Back in earlier versions of the JDK, you could find native libraries in a Java app with something like this:</p>\n<pre><code>public class ClassScope {\n    private static final java.lang.reflect.Field LIBRARIES;\n    static {\n        LIBRARIES = ClassLoader.class.getDeclaredField(&quot;loadedLibraryNames&quot;);\n        LIBRARIES.setAccessible(true);\n    }\n    public static String[] getLoadedLibraries(final ClassLoader loader) {\n        final Vector&lt;String&gt; libraries = (Vector&lt;String&gt;) LIBRARIES.get(loader);\n        return libraries.toArray(new String[] {});\n    }\n}\n\nfinal String[] libraries = ClassScope.getLoadedClasses(ClassLoader.getSystemClassLoader()); \n\n</code></pre>\n<p>However, if you try this on JDKs after 9, you get warned that this access will be revoked from Java 12 om:</p>\n<pre><code>\nWARNING: An illegal reflective access operation has occurred\nWARNING: Illegal reflective access by &lt;class&gt; (file:&lt;file&gt;) to method|constructor\nWARNING: Please consider reporting this to the maintainers of &lt;file&gt;\nWARNING: Use --illegal-access=warn to enable warnings of further illegal reflective access operations\nWARNING: All illegal access operations will be denied in a future release\n\n</code></pre>\n<p>And in JDK 17 the field has been removed completely:</p>\n<pre><code>No field loadedLibraryNames in class Ljava/lang/ClassLoader;\n\n</code></pre>\n<p>So, in a JDK 17 app, what options are there to identify native libraries used via JNI?</p>\n"},{"tags":["java","regex","java-stream","matcher"],"answers":[{"owner":{"user_id":7928721,"display_name":"samabcde"},"up_vote_count":2,"is_accepted":true,"creation_date":1677161552,"answer_id":75545968,"body":"<p>The problem is on line <code>while (P.matcher(i).find())</code>, each time the while loop checking the condition, <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Pattern.html#matcher(java.lang.CharSequence)\" rel=\"nofollow noreferrer\"><code>P.matcher(i)</code></a> is invoked and a new matcher instance is created to call <code>find()</code>, of course it return true every time, hence it becomes infinite loop.</p>\n<p>To solve the problem, assign <code>P.matcher(i)</code> to a variable first so <code>find()</code> is invoked on the same <code>Matcher</code> instance.</p>\n<pre class=\"lang-java prettyprint-override\"><code>...\nMatcher matcher = P.matcher(i);\nwhile (true) {\n    if (!matcher.find()) break;\n    count++;\n}\nreturn count;\n...\n</code></pre>\n<p>One improvement is we can make use of <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/regex/Matcher.html#results()\" rel=\"nofollow noreferrer\"><code>Matcher.results()</code></a> to get the count, as below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Matcher matcher = P.matcher(i);\nreturn (int) matcher.results().count();\n</code></pre>\n"}],"owner":{"user_id":21273478,"display_name":"Salamantha"},"view_count":41,"up_vote_count":2,"accepted_answer_id":75545968,"answer_count":1,"score":2,"creation_date":1677160884,"question_id":75545823,"body":"<p>What I want: [”Einstein”, “ist”, “kein”, “Stein”] ⇒ {”Einstein”=2, “kein”=1, “Stein”=1}\nUsing a Stream I want to transform a list of strings to a map finding all the &quot;ei&quot; instances.</p>\n<p>My Code is stuck in an infinite loop:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n  List&lt;String&gt; L5 = List.of(&quot;Einstein&quot;, &quot;ist&quot;, &quot;kein&quot;, &quot;Stein&quot;);\n  Pattern P = Pattern.compile(&quot;[Ee]i&quot;);\n  Map&lt;String, Integer&gt; result = L5.stream().filter(S -&gt; P.matcher(S).find()).collect(\n    Collectors.toMap(i -&gt; i, i -&gt; {\n      int count = 0;\n      while (P.matcher(i).find()) {\n        count++;\n      }\n      return count;\n    })\n  );\n  System.out.println(result);\n}\n</code></pre>\n<p>I want to count the instances of &quot;ei&quot; in a map (specifically using streams)</p>\n"},{"tags":["java","spring-boot","apache-httpclient-4.x","apache-httpclient-5.x"],"answers":[{"owner":{"user_id":1005607,"display_name":"gene b."},"up_vote_count":2,"is_accepted":false,"creation_date":1677095427,"answer_id":75537517,"body":"<p>The <code>org.apache.hc.httpclient5.</code> imports had to be slightly different, as follows:</p>\n<pre><code>import org.apache.hc.client5.http.ssl.SSLConnectionSocketFactory;\nimport org.apache.hc.client5.http.ssl.TrustSelfSignedStrategy;\nimport org.apache.hc.core5.ssl.SSLContextBuilder;\nimport org.apache.hc.client5.http.impl.classic.CloseableHttpClient;\nimport org.apache.hc.client5.http.impl.classic.HttpClients;\n</code></pre>\n<p>rather than</p>\n<pre><code>import org.apache.hc.httpclient5.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.hc.httpclient5.conn.ssl.TrustSelfSignedStrategy;\nimport org.apache.hc.httpclient5.impl.client.CloseableHttpClient;\nimport org.apache.hc.httpclient5.impl.client.HttpClients;\nimport org.apache.hc.httpclient5.ssl.SSLContextBuilder;\n</code></pre>\n"},{"owner":{"user_id":1392873,"display_name":"mandroid"},"up_vote_count":0,"is_accepted":false,"creation_date":1679089859,"answer_id":75772503,"body":"<p>I had the same problem when I tried to upgrade the spring framework version to <code>3.0.4</code> from <code>2.7.9</code>, and <code>spring-cloud-starter-vault-config:3.1.2</code> to <code>spring-cloud-starter-vault-config:4.0.0</code>.</p>\n<p>After some digging, I found out that <code>spring-cloud-starter-vault-config</code> requires two other vault dependencies: <code>spring-cloud-vault-config</code> and <code>spring-vault-core</code>.</p>\n<pre><code>[INFO] +- org.springframework.cloud:spring-cloud-starter-vault-config:jar:4.0.0:compile\n[INFO] |  +- org.apache.httpcomponents.client5:httpclient5:jar:5.1.4:compile\n[INFO] |  |  \\- org.apache.httpcomponents.core5:httpcore5-h2:jar:5.1.5:compile\n[INFO] |  +- org.apache.httpcomponents.core5:httpcore5:jar:5.1.5:compile\n[INFO] |  +- org.springframework.cloud:spring-cloud-starter:jar:3.1.5:compile\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-context:jar:3.1.5:compile\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-commons:jar:3.1.5:compile\n[INFO] |  |  \\- org.springframework.security:spring-security-rsa:jar:1.0.11.RELEASE:compile\n[INFO] |  |     \\- org.bouncycastle:bcpkix-jdk15on:jar:1.69:compile\n[INFO] |  |        +- org.bouncycastle:bcprov-jdk15on:jar:1.69:compile\n[INFO] |  |        \\- org.bouncycastle:bcutil-jdk15on:jar:1.69:compile\n[INFO] |  +- org.springframework.cloud:spring-cloud-vault-config:jar:3.1.1:compile\n[INFO] |  \\- org.springframework.vault:spring-vault-core:jar:2.3.2:compile\n</code></pre>\n<p>In the above dependency tree, you can see that two dependencies versions are <code>spring-cloud-vault-config:3.1.1</code> and <code>spring-vault-core:2.3.2</code>.</p>\n<p>I added these dependencies manually in my application <code>pom.xml</code> with their latest versions to <strong>resolve</strong> the issue.</p>\n<p><a href=\"https://central.sonatype.com/artifact/org.springframework.vault/spring-vault-core/3.0.1\" rel=\"nofollow noreferrer\">spring-cloud-vault-config:4.0.0</a> and <a href=\"https://central.sonatype.com/artifact/org.springframework.vault/spring-vault-core/3.0.1\" rel=\"nofollow noreferrer\">spring-vault-core:3.0.1</a>.</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-vault-config&lt;/artifactId&gt;\n        &lt;version&gt;4.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.vault&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-vault-core&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The dependency tree after manually adding the two dependencies.</p>\n<pre><code>[INFO] +- org.springframework.cloud:spring-cloud-starter-vault-config:jar:4.0.0:compile\n[INFO] |  +- org.apache.httpcomponents.client5:httpclient5:jar:5.1.4:compile\n[INFO] |  |  \\- org.apache.httpcomponents.core5:httpcore5-h2:jar:5.1.5:compile\n[INFO] |  +- org.apache.httpcomponents.core5:httpcore5:jar:5.1.5:compile\n[INFO] |  \\- org.springframework.cloud:spring-cloud-starter:jar:3.1.5:compile\n[INFO] |     +- org.springframework.cloud:spring-cloud-context:jar:3.1.5:compile\n[INFO] |     +- org.springframework.cloud:spring-cloud-commons:jar:3.1.5:compile\n[INFO] |     \\- org.springframework.security:spring-security-rsa:jar:1.0.11.RELEASE:compile\n[INFO] |        \\- org.bouncycastle:bcpkix-jdk15on:jar:1.69:compile\n[INFO] |           +- org.bouncycastle:bcprov-jdk15on:jar:1.69:compile\n[INFO] |           \\- org.bouncycastle:bcutil-jdk15on:jar:1.69:compile\n[INFO] +- org.springframework.cloud:spring-cloud-vault-config:jar:4.0.0:compile\n[INFO] |  \\- org.springframework:spring-web:jar:6.0.6:compile\n[INFO] +- org.springframework.vault:spring-vault-core:jar:3.0.1:compile\n[INFO] |  +- org.springframework:spring-core:jar:6.0.6:compile\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:6.0.6:compile\n[INFO] |  +- org.springframework:spring-context:jar:6.0.6:compile\n[INFO] |  \\- org.springframework:spring-beans:jar:6.0.6:compile\n</code></pre>\n"}],"owner":{"user_id":1005607,"display_name":"gene b."},"view_count":1325,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1677091294,"question_id":75536902,"body":"<p>I had to upgrade the Spring Boot dependency <strong>2.7.5 --&gt; 3.0.2</strong>:</p>\n<pre><code>&lt;parent&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n    &lt;version&gt;3.0.2&lt;/version&gt;\n    &lt;relativePath /&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>The <code>pom.xml</code> currently references a relatively new version of <code>HttpClient</code>, <strong>4.5.3</strong>:</p>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n        &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;version&gt;4.5.3&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>The code uses the <code>org.apache.http</code> classes which now produce the following error on Maven Build:</p>\n<pre><code>import org.apache.http.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.http.conn.ssl.TrustSelfSignedStrategy;\nimport org.apache.http.impl.client.CloseableHttpClient;\nimport org.apache.http.impl.client.HttpClients;\nimport org.apache.http.ssl.SSLContextBuilder;\n</code></pre>\n<p>--&gt;\n<strong>incompatible types: org.apache.http.impl.client.CloseableHttpClient cannot be converted to org.apache.hc.client5.http.classic.HttpClient</strong></p>\n<p>To tackle this error, I replaced all occurrences of <code>org.apache.http</code> with <code>org.apache.hc.httpclient5</code> per <a href=\"https://hc.apache.org/httpcomponents-client-5.2.x/migration-guide/migration-to-classic.html\" rel=\"nofollow noreferrer\">https://hc.apache.org/httpcomponents-client-5.2.x/migration-guide/migration-to-classic.html</a> :</p>\n<pre><code>import org.apache.hc.httpclient5.conn.ssl.SSLConnectionSocketFactory;\nimport org.apache.hc.httpclient5.conn.ssl.TrustSelfSignedStrategy;\nimport org.apache.hc.httpclient5.impl.client.CloseableHttpClient;\nimport org.apache.hc.httpclient5.impl.client.HttpClients;\nimport org.apache.hc.httpclient5.ssl.SSLContextBuilder;\n</code></pre>\n<p>But now the error is\n<strong>package org.apache.hc.httpclient5.conn.ssl does not exist</strong> . It can't resolve the HC5 package. Any tips?\n<a href=\"https://i.stack.imgur.com/DOBDs.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DOBDs.jpg\" alt=\"enter image description here\" /></a></p>\n<p>NOTE: I also tried replacing the HttpClient dependency with the new <strong>httpclient5</strong> dependency, but it's the same error:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.httpcomponents.client5&lt;/groupId&gt;\n    &lt;artifactId&gt;httpclient5&lt;/artifactId&gt;\n    &lt;version&gt;5.2.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"tags":["java","kotlin","selenium-webdriver"],"comments":[{"owner":{"user_id":4744568,"display_name":"pcalkins"},"edited":false,"comment_id":133293127,"body":"imho, you should try/catch all driver calls.  Selenium&#39;s exceptions are very well designed and there are cases when you&#39;d want to actually do something with and in the catch {} part.  (outputting reports, working with stale elements, etc...)  Also remember that the way current Page Objects are designed, they do not use webddriverwaits with explicit conditions.  These are necessary for site&#39;s that update the DOM via JS.  (implicit waits only go so far...)"}],"answers":[{"owner":{"user_id":3136143,"display_name":"attila-fazekas"},"up_vote_count":2,"is_accepted":true,"creation_date":1679143795,"answer_id":75775997,"body":"<p>The <code>PageFactory</code> class resides among other classes such as <code>SlowLoadableComponent</code>, <code>FluentWait</code>, and <code>WebDriverWait</code> in the <code>selenium-support</code> library. Consider these classes as tools at your disposal; it's up to you whether you choose to use them or not.</p>\n<p>Regarding <code>PageFactory</code>: Interestingly, Simon Stewart (Selenium project lead) admits that it was not the best idea to make it available to the public, as a result almost everybody is using it.\nFor reference:\n<a href=\"https://www.youtube.com/watch?v=gyfUpOysIF8&amp;t=1541s\" rel=\"nofollow noreferrer\">https://www.youtube.com/watch?v=gyfUpOysIF8&amp;t=1541s</a>\n<a href=\"https://twitter.com/shs96c/status/880809924607057920\" rel=\"nofollow noreferrer\">https://twitter.com/shs96c/status/880809924607057920</a></p>\n<p>There are many ways to work around PageFactory and still use Page Object model for abstracting your domain, but if you still intend to use it in Kotlin, then make sure to use <code>lateinit var</code> for your <code>WebElement</code>s:</p>\n<pre><code>@FindBy(id = &quot;boligLink&quot;)\nlateinit var boliglink: WebElement\n</code></pre>\n<p>And use <code>MutableList</code> instead of <code>List</code> to avoid <code>UninitializedPropertyAccessException</code> at runtime:</p>\n<pre><code>@FindBy(className = &quot;image&quot;)\nlateinit var companyNames: MutableList&lt;WebElement&gt;\n</code></pre>\n<p>Please notice you don’t need nullable <code>WebElement</code>s in order to make <code>PageFactory</code> work:</p>\n<pre><code>import org.openqa.selenium.WebDriver\nimport org.openqa.selenium.WebElement\nimport org.openqa.selenium.support.FindBy\nimport org.openqa.selenium.support.PageFactory\n\nclass HomePage(driver: WebDriver) {\n\n    @FindBy(id = &quot;boligLink&quot;)\n    lateinit var boliglink: WebElement\n\n    @FindBy(className = &quot;image&quot;)\n    lateinit var images: MutableList&lt;WebElement&gt;\n\n    init {\n        PageFactory.initElements(driver, this)\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":7101236,"display_name":"kakemonsteret"},"view_count":62,"up_vote_count":2,"accepted_answer_id":75775997,"answer_count":1,"score":2,"creation_date":1677060129,"question_id":75531072,"body":"<p>I'm having some trouble agreeing with myself on wether or not to use PageFactory or not in my Selenium PageObjects.</p>\n<p>As far as I can see, the point of using it is null safety, and that no WebElements are intialized before they're &quot;used&quot;.</p>\n<p>When I'm using Kotlin, I have to constantly null-check a WebElement intialized, like this:</p>\n<p>From the PageObject class:</p>\n<pre><code>@FindBy(id = &quot;boligLink&quot;)\nval boliglink: WebElement? = null\n</code></pre>\n<p>The calling code (usually a Step Definition class):</p>\n<pre><code>boliglink?.click()\n\nOr, something like:\n\nreturn boliglink?.isDisplayed()\n</code></pre>\n<p>Are there any other advantages to this, compared to just using a try/catch - possibly abstracted - for each time the code accesses the WebElement?</p>\n<p>Besides caching, but I don't think that's any point unless you access several elements more than once?</p>\n<p>Wouldn't this do basically the same?</p>\n<p>(The <code>getElementInElement()</code> is my function, for finding an element inside an element. It could just be <code>.findElementBy</code> blabla.)</p>\n<pre><code>return try { getElementInElement(element, By.cssSelector(&quot;[data-e2e-selector=boliginLink]&quot;)) }\n    catch (e: NoSuchElementException) { throw NoSuchElementException(&quot;Couldn't find link to    boliginformasjon&quot;) }\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-security"],"comments":[{"owner":{"user_id":1915448,"display_name":"g00glen00b"},"edited":false,"comment_id":133253272,"body":"Are you sure you want to have the double role in <code>hasRole(&quot;ROLE_USER&quot;)</code>? If you use the <code>hasRole(..)</code> method it already checks for authorities starting with <code>ROLE_</code>, so <code>hasRole(&quot;USER&quot;)</code> might be enough."},{"owner":{"user_id":21260876,"display_name":"Expert_Introvert"},"edited":false,"comment_id":133257357,"body":"@g00glen00b Thanks for replying, for some reason even <code>hasRole(&quot;USER&quot;)</code> is giving me a 403. The JWT token I am receiving on the client seems fine and I am unsure how to debug it.  Any tips on how to debug this?"}],"answers":[{"owner":{"user_id":1915448,"display_name":"g00glen00b"},"up_vote_count":2,"is_accepted":true,"creation_date":1677054477,"answer_id":75529945,"body":"<p>The default <code>JwtGrantedAuthoritiesConverter</code> implementation reads the authorities from the <code>scope</code> claim (which you provided) and prefixes them with <code>SCOPE_</code>. This means that your authorities will become <code>SCOPE_ROLE_USER</code> and <code>SCOPE_ROLE_ADMIN</code>.</p>\n<p>You can either adapt to it and change the <code>SecurityFilterChain</code> to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>a.requestMatchers(&quot;/student/&quot;).hasAnyAuthority(&quot;SCOPE_ROLE_USER&quot;);\n</code></pre>\n<p>Or you can create a custom <code>JwtGrantedAuthoritiesConverter</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\npublic JwtGrantedAuthoritiesConverter authoritiesConverter() {\n    JwtGrantedAuthoritiesConverter converter = new JwtGrantedAuthoritiesConverter();\n    converter.setAuthorityPrefix(&quot;&quot;); // Cannot be null\n}\n    \n@Bean\npublic JwtAuthenticationConverter authenticationConverter(JwtGrantedAuthoritiesConverter authoritiesConverter) {\n    JwtAuthenticationConverter converter = new JwtAuthenticationConverter();\n    converter.setJwtGrantedAuthoritiesConverter(authoritiesConverter);\n    return converter;\n}\n</code></pre>\n<p>Also be aware that the difference between authorities and roles is that roles are just authorities that follow a specific naming convention (= being prefixed with <code>ROLE_</code>).\nThis means that you should either use <code>hasAnyAuthority(&quot;ROLE_USER&quot;)</code> or <code>hasAnyRole(&quot;USER&quot;)</code>.\nSo if you disable the scope prefix, you should change your <code>SecurityFilterChain</code> to this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>a.requestMatchers(&quot;/student/&quot;).hasAnyRole(&quot;USER&quot;);\n\n// or\n\na.requestMatchers(&quot;/student/&quot;).hasAnyAuthority(&quot;ROLE_USER&quot;);\n</code></pre>\n<hr />\n<p>In the comments you also asked how to debug this. To debug whether it's behaving correctly you can:</p>\n<ul>\n<li>Decode your JWT token to verify that you have a <code>scope</code> claim containing your original authorities.</li>\n<li>Put a breakpoint in the <code>JwtGrantedAuthoritiesConverter.getAuthorities()</code> method to verify whether the token is properly read.</li>\n</ul>\n"}],"owner":{"user_id":21260876,"display_name":"Expert_Introvert"},"view_count":341,"up_vote_count":2,"accepted_answer_id":75529945,"answer_count":1,"score":2,"creation_date":1677013849,"question_id":75525940,"body":"<p>I'm using Oauth2 resource server JWT for authentication.\nI'm trying to add authentication for two routes , route  &quot;/student/&quot; to give acess to role ROLE_USER and route &quot;/students/&quot; to role ROLE_ADMIN.</p>\n<h1>Security config</h1>\n<pre><code>    public SecurityFilterChain securityFilterChain(HttpSecurity httpSecurity) throws Exception{\n        return httpSecurity\n                .csrf(AbstractHttpConfigurer::disable)\n                .authorizeHttpRequests(a -&gt;\n                {\n                    a.requestMatchers(&quot;/student/&quot;).hasAnyRole(&quot;ROLE_USER&quot;);\n                    a.requestMatchers(&quot;/student/**&quot;).hasAnyRole(&quot;ROLE_USER&quot;);\n                    a.requestMatchers(&quot;/students/&quot;).hasAnyRole(&quot;ROLE_ADMIN&quot;);\n                    a.requestMatchers(&quot;/students/**&quot;).hasAnyRole(&quot;ROLE_ADMIN&quot;);\n                    a.requestMatchers(&quot;/&quot;).permitAll();\n                    a.requestMatchers(&quot;/token/&quot;).permitAll();\n                    a.requestMatchers(&quot;/token/**&quot;).permitAll();\n                    a.anyRequest().authenticated();\n                })\n                .oauth2ResourceServer(OAuth2ResourceServerConfigurer::jwt)\n                .userDetailsService(userDetailsService)\n                .headers(headers -&gt; headers.frameOptions().sameOrigin())\n                .httpBasic(Customizer.withDefaults())\n                .sessionManagement(session -&gt; session.sessionCreationPolicy(SessionCreationPolicy.STATELESS))\n                .build();\n    }\n\n</code></pre>\n<p>I tried to change <code>hasRole()</code> to <code>hasAnyRole()</code> , <code>hasAuthority()</code> , treid <code>@PreAuthorize()</code> on controller and  checked with using roles without &quot;<code>ROLE_</code>&quot; prefix but nothing has worked.</p>\n<h1>UserDetailsService</h1>\n<pre><code>public class jpaUserDetailsService implements UserDetailsService {\n    UserRepository userRepository;\n\n    public jpaUserDetailsService(UserRepository userRepository) {\n        this.userRepository = userRepository;\n    }\n\n    @Override\n    public UserDetails loadUserByUsername(String username) throws UsernameNotFoundException {\n        return userRepository.findUserByUsername(username)\n                .map(SecurityUser::new)\n                .orElseThrow(() -&gt; new UsernameNotFoundException(&quot;Username not found &quot; + username));\n    }\n}\n\n</code></pre>\n<h1>UserDetails</h1>\n<pre><code>public class SecurityUser implements UserDetails {\n    public Collection&lt;? extends GrantedAuthority&gt; getAuthorities() {\n        return user.getRoles().stream()\n                .map(Role::getRole)\n                .map(UserRoles::toString)\n                .map(SimpleGrantedAuthority::new).toList();\n    }\n}\n</code></pre>\n<h1>I am using an enum for all my Roles</h1>\n<pre><code>public enum UserRoles {\n    ROLE_ADMIN,\n    ROLE_USER\n}\n</code></pre>\n<h1>Service to generate jwt Token</h1>\n<pre><code>public class TokenService  {\n    private final JwtEncoder jwtEncoder;\n\n    public TokenService(JwtEncoder jwtEncoder) {\n        this.jwtEncoder = jwtEncoder;\n    }\n\n    public String generateToken(Authentication authentication){\n        Instant now = Instant.now();\n\n        String scope = authentication.getAuthorities().stream()\n                .map(GrantedAuthority::getAuthority)\n                .collect(Collectors.joining(&quot; &quot;));\n\n        JwtClaimsSet claims =  JwtClaimsSet.builder()\n                .issuer(&quot;self&quot;)\n                .issuedAt(now.plus(1 , ChronoUnit.HOURS))\n                .subject(authentication.getName())\n                .claim(&quot;scope&quot; , scope)\n                .build();\n\n        return this.jwtEncoder.encode(JwtEncoderParameters.from(claims)).getTokenValue();\n    }\n\n</code></pre>\n<h1>User Entity</h1>\n<pre><code>public class User {\n    @Id\n    @GeneratedValue\n    private long userId;\n    @Column(unique = true , nullable = false)\n    private String username;\n    @Column(nullable = false)\n    private String password;\n    @ManyToMany(fetch = FetchType.EAGER)\n    @JoinTable(\n            joinColumns = @JoinColumn(name = &quot;userId&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;roleId&quot;)\n    )\n    @ToString.Exclude\n    private List&lt;Role&gt; roles;\n\n}\n</code></pre>\n<h1>Role Entity</h1>\n<pre><code>public class Role {\n    @Id\n    @GeneratedValue\n    private Long roleId;\n    @Column(unique = true , nullable = false)\n    @Enumerated(EnumType.STRING)\n    private UserRoles role;\n}\n</code></pre>\n<p>finally my Contoroller</p>\n<pre><code>    @GetMapping(&quot;/student/&quot;) // route i want to allow with role user;\n    public Student getStudent(Principal principal){\n     \n    }\n\n    @GetMapping(&quot;/students/&quot;) // route i want to allow only role admin\n    public List&lt;Student&gt; getStudents(Principal principal){\n       \n    }\n}\n\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/ZJaB7.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n"},{"tags":["java","spring-boot","maven"],"comments":[{"owner":{"user_id":296328,"display_name":"khmarbaise"},"edited":false,"comment_id":133229109,"body":"Do not use maven-assembly-plugin... use the spring-boot-maven-plugin which is intended for that purpose... with maven-assembly-plugin you will not achieve that... (easy)..."}],"answers":[{"owner":{"user_id":3424245,"display_name":"Syn"},"up_vote_count":2,"is_accepted":true,"creation_date":1676913850,"answer_id":75512398,"body":"<p>Instead of using the <code>maven-assembly-plugin</code> you can try using the <code>spring-boot-maven-plugin</code>.</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;mainClass&gt;net.regnology.devautomation.GmpDevAutomationBeApplication&lt;/mainClass&gt;\n    &lt;/configuration&gt;\n\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;repackage&lt;/goal&gt;\n            &lt;/goals&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>If you have the <code>spring-boot-starter-parent</code> in you pom, you do not have to define <code>repackage</code> as a goal. You can then just call <code>mvn package</code> and the jar should run.</p>\n"}],"owner":{"user_id":8361949,"display_name":"G&#246;rkem Demirkol"},"view_count":145,"up_vote_count":2,"accepted_answer_id":75512398,"answer_count":1,"score":2,"creation_date":1676910988,"question_id":75511941,"body":"<p>I have a very basic Spring application without any database connection. When i run the application main class from intellij it works. However, when I build it and execute the jar from command line I get below error message.</p>\n<p>You can see part of my application below.</p>\n<pre><code>@SpringBootApplication(exclude={DataSourceAutoConfiguration.class, HibernateJpaAutoConfiguration.class})\npublic class GmpDevAutomationBeApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(GmpDevAutomationBeApplication.class, args);\n    }\n\n}\n</code></pre>\n<pre><code>@RestController\n@CrossOrigin(origins = &quot;http://localhost:4200&quot;)\npublic class JGitController {\n\n    @GetMapping(&quot;/branches&quot;)\n    @ResponseBody\n    public List&lt;String&gt; getBranches(@RequestParam String userName, @RequestParam String password) {\n\n        JGitService jGitService = new JGitService(userName,password);\n        return jGitService.getBranches();\n\n    }\n\n\n}\n</code></pre>\n<p>I am using the following maven plugin to build my jar.</p>\n<pre><code>&lt;plugin&gt;\n    &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;archive&gt;\n            &lt;manifest&gt;\n                &lt;mainClass&gt;net.regnology.devautomation.GmpDevAutomationBeApplication&lt;/mainClass&gt;\n            &lt;/manifest&gt;\n        &lt;/archive&gt;\n        &lt;descriptorRefs&gt;\n            &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n        &lt;/descriptorRefs&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<pre><code>17:12:11.895 [main] DEBUG org.springframework.scheduling.concurrent.ThreadPoolTaskExecutor - Shutting down ExecutorService 'applicationTaskExecutor'\n17:12:11.898 [main] ERROR org.springframework.boot.SpringApplication - Application run failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'resourceHandlerMapping' defined in class path resource [org/springframework/boot/autoconfigure/web/servlet/WebMvcAutoConfiguration$EnableWebMvcConfiguration.class]: Bean instantiation via factory method failed; nested exception is org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method 'resourceHandlerMapping' threw exception; nested exception is java.lang.IllegalStateException: No ServletContext set\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:658)\n        ...\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\n        at net.regnology.devautomation.GmpDevAutomationBeApplication.main(GmpDevAutomationBeApplication.java:13)\nCaused by: org.springframework.beans.BeanInstantiationException: Failed to instantiate [org.springframework.web.servlet.HandlerMapping]: Factory method 'resourceHandlerMapping' threw exception; nested exception is java.lang.IllegalStateException: No ServletContext set\n        at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:185)\n        at org.springframework.beans.factory.support.ConstructorResolver.instantiate(ConstructorResolver.java:653)\n        ... 18 common frames omitted\nCaused by: java.lang.IllegalStateException: No ServletContext set\n\n</code></pre>\n<p>Can you tell me what is wrong with my configuration?</p>\n"},{"tags":["java","collections","linked-list"],"answers":[{"owner":{"user_id":5133585,"display_name":"Sweeper"},"up_vote_count":2,"is_accepted":true,"creation_date":1676789770,"answer_id":75498483,"body":"<p>The difference is that <code>LinkedList.clone</code> also copies <em>all the nodes in the entire linked list</em>, whereas your <code>Node1.clone</code> only copies that one node, and not any of the nodes linked to it.</p>\n<p>You can find an implementation of <code>LinkedList.clone</code> <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/util/LinkedList.java#L1024\" rel=\"nofollow noreferrer\">here</a>,</p>\n<pre><code>public Object clone() {\n    LinkedList&lt;E&gt; clone = superClone();\n\n    // Put clone into &quot;virgin&quot; state\n    clone.first = clone.last = null;\n    clone.size = 0;\n    clone.modCount = 0;\n\n    // Initialize clone with our elements\n    for (Node&lt;E&gt; x = first; x != null; x = x.next)\n        clone.add(x.item);\n\n    return clone;\n}\n</code></pre>\n<p>Notice that it calls <code>add</code> on the cloned list (called <code>clone</code> here) in the loop. Each call to <code>add</code> creates a new linked list node.</p>\n<p>Note that this is still a shallow copy, in the sense that the data in the nodes are not cloned. For example, if the lists stores <code>String</code> objects, no new strings are created.</p>\n<p>So after cloning, you actually get two &quot;chains&quot; with the builtin <code>LinkedList</code>:</p>\n<pre><code>O-O-O\nO-O-O\n</code></pre>\n<p>whereas with your <code>Node1</code>, since only one node is cloned, you get something like this:</p>\n<pre><code> first -&gt; O\n           \\\n            -O-O\n           /\nrohit2 -&gt; O\n</code></pre>\n<p>The two &quot;heads&quot; of the lists share the same &quot;end&quot;, so adding an element to the end of the list adds it to both lists.</p>\n<p>You can rewrite your <code>clone</code> so that it copies all the nodes. One simple way is to do it recursively:</p>\n<pre><code>protected Node1 clone() throws CloneNotSupportedException {\n    Node1 newNode = new Node1(this.data);\n    if (next != null) {\n        newNode.next = next.clone();\n    }\n    return newNode;\n}\n</code></pre>\n"}],"owner":{"user_id":10805392,"display_name":"Rohit Rohra"},"view_count":46,"up_vote_count":2,"accepted_answer_id":75498483,"answer_count":1,"score":2,"creation_date":1676786925,"question_id":75498323,"body":"<p>In example below, in &quot;main&quot; when after cloning LinkedList l1 to l2, when I add element to l2, I do not get 300 in l1.</p>\n<p>However, in the the method &quot;addTwoLists&quot; when I use custom implementation, adding any element to &quot;rohit&quot; adds it to &quot;first&quot; as well.</p>\n<pre><code>package hackerrank;\n\nimport java.util.LinkedList;\nimport java.util.concurrent.atomic.AtomicInteger;\n\nclass Node1 implements Cloneable{\n    int data;\n    Node1 next;\n    Node1(int x){\n        this.data=x;\n        this.next=null;\n    }\n    Node1 (){\n        \n    }\n    protected Node1 clone() throws CloneNotSupportedException {\n        return (Node1) super.clone();\n    }\n    \n}\npublic class MS_linkedlist_copy {\n\n    \n    public static void main(String[] args) {\n        // TODO Auto-generated method stub\n        \n        \n         LinkedList&lt;AtomicInteger&gt; l1 = new LinkedList&lt;&gt;();\n            l1.add(new AtomicInteger(100));\n            l1.add(new AtomicInteger(200));\n\n            LinkedList&lt;AtomicInteger&gt; l2 = (LinkedList) l1.clone();\n            l2.add(new AtomicInteger(300));\n\n            System.out.println(l1);\n            System.out.println(l2);\n\n            // change element on first list\n            l1.get(0).incrementAndGet();\n\n            System.out.println();\n            System.out.println(&quot;After change internal state of first element&quot;);\n            System.out.println(l1);\n            System.out.println(l2);\n            \n            \n            \n        Node1 first = new Node1(1);\n        Node1 second = new Node1(2);\n        first.next= second;\n        \n        \n        Node1 third = new Node1(3);\n        Node1 fourth = new Node1(4);\n        third.next=fourth;\n        \n        addTwoLists(first, third);\n    }\n    \n    static Node1 reverse(Node1 head){\n        Node1 prev =null;\n        while(head!=null){\n            Node1 next_node = head.next;\n            head.next = prev;\n            prev=head;\n            head=next_node;\n        }\n        return prev;\n    }\n    //\n    static Node1 addTwoLists(Node1 first, Node1 second){\n        System.out.println(first.data);\n        Node1 rohit = null;\n        try {\n            rohit = (Node1)first.clone();\n        } catch (CloneNotSupportedException e) {\n            // TODO Auto-generated catch block\n            e.printStackTrace();\n        }\n        rohit.data=1000;\n        rohit.next.data=1000;\n        System.out.println(first.data);\n        System.out.println(rohit.data);\n        \n        Node1 rohit2= rohit;\n        while(rohit.next!=null) {\n            rohit= rohit.next;\n        }\n        Node1 rohit_add = new Node1(2000);\n        rohit.next = rohit_add;\n        System.out.println(first.data);\n        System.out.println(rohit2.data);\n//      rohit = first;\n//        rohit= reverse(rohit); \n//        reverse(second);\n//        System.out.println(first.data);\n//        System.out.println(rohit.data);\n        \n        \n        return null;\n        }\n\n}\n</code></pre>\n<p>I tried to add elements to a shallow copy in custom, which got added to main list successfully. However, after trying to add elements to shallow copy of built-in LinkedList, the elements are not added to original list. I am trying to understand what is going on in the built-in LinkedList.</p>\n"},{"tags":["java","html","thymeleaf"],"comments":[{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":133198895,"body":"Is your example data for a 9-hole course? If so, then (a) it would probably help to have a Java field which captures that - e.g. <code>int holes</code>; (b) with <code>holes</code> you can then use that value with Thymeleaf&#39;s <code>${#numbers.sequence(1, holes)}</code>, to generate the 9 columns you need."},{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":133198896,"body":"Even better, create a <code>Hole</code> class and only create that many instances (each with its par value) per course. Then you have a collection of holes you can iterate over, the same as you iterate over your courses."},{"owner":{"user_id":19263679,"display_name":"Kayd Anderson"},"edited":false,"comment_id":133200192,"body":"Honestly I did consider that, but how do I add a dynamic number of holes? As I said some are 9, some are 12 some are 15, 18 etc. I added how I add a new course."},{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":133200252,"body":"I don&#39;t know where you get your <code>par</code> data, so this is a bit speculative, but... If the <code>par</code> data for holes 10 onwards is blank/null, then you know you don&#39;t need any <code>Hole</code> objects for those. Your <code>List&lt;Hole&gt;</code> collection will only contain 9 <code>Hole</code> objects. Or 9 <code>List&lt;Integer&gt;</code> values if you just want to capture the <code>par</code> numbers."},{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":133200316,"body":"Sorry if we&#39;re getting bogged down in details here. Perhaps this is more relevant: The principle I try to follow is: I try to make my Thymeleaf logic as simple as possible, by building a Java structure which is as easy as possible for Thymeleaf to iterate over."},{"owner":{"user_id":19263679,"display_name":"Kayd Anderson"},"edited":false,"comment_id":133207035,"body":"Yep everything you said makes sense now, rookie error but it was a good learning curve. So I created an int array of numbers 1-18, so when I create a course I have 18 different fields but when it saves now its a list of &#39;Hole&#39; objects that has in id, a number and a par. ``` [Course{id=1, name=&#39;Test Update Edit&#39;, holes=[Hole{holeId=1, number=1, par=3}, ... Hole{holeId=9, number=9, par=4}]}]``` Each hole object is linked to a course_id as well  so a course can have n holes. Thanks guy!!!"}],"answers":[{"owner":{"user_id":3020903,"display_name":"Tarmo"},"up_vote_count":1,"is_accepted":false,"creation_date":1676734525,"answer_id":75494397,"body":"<p>If your <code>parHole</code> would be a <code>List&lt;Int&gt;</code> or <code>Map&lt;Int,Int&gt;</code> then you could iterate over it or its entries with <code>th:each</code> like with any list. But as you have static field names for each parHole you can't do it and you have to be repetetive like in your example.</p>\n"},{"owner":{"user_id":14257071,"display_name":"tmaasen"},"up_vote_count":1,"is_accepted":false,"creation_date":1676735349,"answer_id":75494490,"body":"<p>Following Tarmo's answer, if I were you, I would convert your parList to a List of holes, add the &quot;Hole&quot; and &quot;Par&quot; as the first values in your list so they can be included as the header rows in your table, and then iterate over them. Also then you could then use index in your :each iterator to keep track of your hole numbers</p>\n"}],"owner":{"user_id":19263679,"display_name":"Kayd Anderson"},"view_count":59,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1676733984,"question_id":75494349,"body":"<p>Hi Im relatively new with Spring and Thymeleaf but I am creating a disc golf CRUD app and I'm able to add a course with a Course object which has a oneToMany relation to ParList. All works fine I can add a course but a course doesnt always have 18 holes. How can I show this dynamically so a 9 hole courses table has 9 columns, a 14 - 14 columns etc?\nI have tried using th:each=&quot;par, iterStat : ${course.parLists}&quot; and trying to use iterStat.index but I can't quite get it.\nSo how can I get the index of the list and use it in the hole number  and display the courses par  without repeating like I have below?\nSo my data looks like this:</p>\n<pre><code>Course{id=3, name='Legende Main', parLists=[ParList{parListId=10, parHole1='3', parHole2='3', parHole3='3', parHole4='3', parHole5='3', parHole6='3', parHole7='3', parHole8='3', parHole9='3', parHole10='', parHole11='', parHole12='', parHole13='', parHole14='', parHole15='', parHole16='', parHole17='', parHole18=''}]}\n</code></pre>\n<p>My HTML</p>\n<pre><code>&lt;div class=&quot;container&quot; th:each=&quot;course : ${courses}&quot;&gt;\n        &lt;div class=&quot;border&quot;&gt;\n            &lt;div id=&quot;courseDetails&quot; class=&quot;row&quot;&gt;\n                &lt;div class=&quot;col-sm-4&quot;&gt;\n                    &lt;p&gt;&lt;strong&gt;Course Name:&lt;/strong&gt;\n                        &lt;a th:text=&quot;${course.name}&quot;&gt;&lt;/a&gt;\n                    &lt;/p&gt;\n                &lt;/div&gt;\n            &lt;/div&gt;\n        &lt;/div&gt;\n        &lt;div &gt;\n            &lt;table th:each=&quot;par, index : ${course.parLists}&quot; id=&quot;courseInfo&quot; class=&quot;table table-bordered w-auto&quot;&gt;\n                &lt;tr &gt;\n                    &lt;th th:text=&quot;${'Hole'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#2'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#3'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#4'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#5'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#6'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#7'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#8'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#9'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#10'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#11'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#12'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#13'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#14'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#15'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#16'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#17'}&quot;&gt;&lt;/th&gt;\n                    &lt;th th:text=&quot;${'#18'}&quot;&gt;&lt;/th&gt;\n                    &lt;th&gt;Actions&lt;/th&gt;\n                &lt;/tr&gt;\n\n                &lt;tr&gt;\n                    &lt;td th:text=&quot;${'Par'}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole1}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole2}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole3}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole4}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole5}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole6}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole7}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole8}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole9}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole10}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole11}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole12}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole13}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole14}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole15}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole16}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole17}&quot;&gt;&lt;/td&gt;\n                    &lt;td th:text=&quot;${par.parHole18}&quot;&gt;&lt;/td&gt;\n                    &lt;td&gt;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/T0fuF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/T0fuF.png\" alt=\"enter image description here\" /></a></p>\n<p>New Course</p>\n<pre><code>&lt;form action=&quot;#&quot; th:action=&quot;@{/discgolf/saveCourse}&quot; th:object=&quot;${newCourse}&quot;\n                      method=&quot;POST&quot;&gt;\n                    &lt;div class=&quot;form-group&quot;&gt;\n                    &lt;input type=&quot;text&quot; th:field=&quot;*{name}&quot;\n                           placeholder=&quot;Course name&quot; class=&quot;form-control mb-4 col-4&quot;&gt;\n                    &lt;/div&gt;\n                    &lt;th:block  th:object=&quot;${hole}&quot;&gt;\n                    &lt;div class=&quot;container&quot;&gt;\n                        &lt;div id=&quot;parRow&quot; class=&quot;row g-0&quot;&gt;\n                            &lt;div class=&quot;col&quot;&gt;\n                                &lt;label&gt;#1&lt;/label&gt;\n                                &lt;input type=&quot;text&quot; th:field=&quot;*{par}&quot; placeholder=&quot;#1&quot;&gt;\n                            &lt;/div&gt;\n                            #2 - #17\n                            &lt;div class=&quot;col&quot;&gt;\n                                &lt;label&gt;#18&lt;/label&gt;\n                                &lt;input type=&quot;text&quot; th:field=&quot;*{par}&quot; placeholder=&quot;#18&quot;&gt;\n                            &lt;/div&gt;\n                        &lt;/div&gt;\n                    &lt;/div&gt;\n                    &lt;/th:block&gt;\n                    &lt;button type=&quot;submit&quot; class=&quot;btn btn-info col-2&quot;&gt;Save Course&lt;/button&gt;\n                &lt;/form&gt;\n</code></pre>\n"},{"tags":["java","node.js","spring","spring-boot","express"],"answers":[{"owner":{"user_id":15224052,"display_name":"Oliver"},"up_vote_count":2,"is_accepted":true,"creation_date":1676731728,"answer_id":75494125,"body":"<p>Welcome to the Spring Ecosystem. We hope you enjoy your stay!</p>\n<p>My first bit of advice, forget everything you know about Express because Spring is very different. I have not used Express in a while, but I remember it had a very programmatic approach. While that is possible in Spring, the most popular approach is declarative with annotations. Or, if you are old and like old technology, you can configure everything with XML.</p>\n<p>What's Tomcat? Tomcat is a implementation of various Jakarta EE (formally Java EE) specifications. Depending on the Spring Boot version, you may see packages that start with <code>jakarta</code> or <code>javax</code>. Tomcat implements, Jakarta Servlet, Server Pages, Expression Language, WebSocket, Annotations, and Authentications. You can read more about each specification <a href=\"https://jakarta.ee/specifications/\" rel=\"nofollow noreferrer\">here</a>. Note: Spring Boot by itself does not necessary use all of these modules and mostly Spring has many abstraction layers on top of them anyway, so you rarely will work with Tomcat directly. Specifically, <code>spring-boot-starter-tomcat</code> is the Spring module that uses Tomcat, and is most often included as a transitive dependency through <code>spring-boot-starter-web</code>.</p>\n<p>Now, to answer your question...</p>\n<p>Spring Boot Web configures Tomcat for you. You can definitely override this behavior! One basic way is through configuration properties. Anything under <code>server.tomcat</code>. A good IDE should autocomplete and show you the options. You can also change the address and port of the Tomcat server with <code>server.address</code> and <code>server.port</code>. Another popular property developers change is <code>server.error.whitelabel.enabled</code>. They set it to <code>false</code> and provide their own error page. <a href=\"https://www.baeldung.com/spring-boot-custom-error-page\" rel=\"nofollow noreferrer\">Here</a> is a great example. By the way, <a href=\"https://www.baeldung.com/\" rel=\"nofollow noreferrer\">Baeldung</a> offers a lot of free Spring tutorials and guides. It is a great place to get started. They also offer paid courses with certifications.</p>\n<p>FYI, you do not have to use Tomcat. Read more <a href=\"https://docs.spring.io/spring-boot/docs/2.1.9.RELEASE/reference/html/howto-embedded-web-servers.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n"}],"owner":{"user_id":19297279,"display_name":"M. EH"},"view_count":54,"up_vote_count":2,"accepted_answer_id":75494125,"answer_count":1,"score":2,"creation_date":1676727000,"question_id":75493673,"body":"<p>I've started learning Spring Boot coming from a NodeJS/Express background and I'm wondering what's the difference between the server that we create ourselves in an express app that listens on a certain port, and the Tomcat server in a spring application also called a container ? Why can't we do the same in a spring boot application where we create the server ourselves ?</p>\n<pre class=\"lang-js prettyprint-override\"><code>const app = express();\napp.listen(3000, () =&gt; console.log(&quot;Server listening on port 3000&quot;));\n</code></pre>\n"},{"tags":["java","bytecode","java-bytecode-asm"],"comments":[{"owner":{"user_id":21234503,"display_name":"Andrey Tarasov"},"edited":false,"comment_id":133186055,"body":"I parsing already compiled class file."},{"owner":{"user_id":40342,"display_name":"Joachim Sauer"},"edited":false,"comment_id":133186599,"body":"It sounds like you &quot;simply&quot; must read and apply the rules in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.8.1\" rel=\"nofollow noreferrer\">&#167; 8.4.8.1 of the JLS</a> and read especially <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-8.html#jls-8.4.2\" rel=\"nofollow noreferrer\">&#167; 8.4.2</a>. Note that the <i>return type</i> of the overriding method is irrelevant: as long as name, type parameters and parameters match, it&#39;s overridden."}],"answers":[{"owner":{"user_id":2711488,"display_name":"Holger"},"up_vote_count":2,"is_accepted":true,"creation_date":1676659661,"answer_id":75488233,"body":"<p>Note that your issue does not only apply to generic supertype. You can also override a method with a more specific return type, with no Generics involved, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface SomeInterface {\n    Object method();\n}\nclass SomeImplementation implements SomeInterface {\n    @Override\n    public Integer method() {\n        return null;\n    }\n}\n</code></pre>\n<p>You have to understand the concept of <a href=\"https://docs.oracle.com/javase/tutorial/java/generics/bridgeMethods.html\" rel=\"nofollow noreferrer\">bridge methods</a>.</p>\n<p>A bridge method performs the task of overriding a method on the byte code level, having exactly the same parameter types and return type as the overridden method, and delegates to the actual implementation method.</p>\n<p>Since the bridge method only consists of this invocation instruction, some type casts if required, and the return instruction, it is easy to parse such a method to find the actual method it belongs to, without dealing with the complex rules of the Generic type system.</p>\n<p>Using, the following helper classes</p>\n<pre class=\"lang-java prettyprint-override\"><code>record MethodSignature(String name, String desc) {}\n\nrecord MethodInfo(int access, String owner, String name, String desc) {\n    MethodSignature signature() {\n        return new MethodSignature(name, desc);\n    }\n}\n\nfinal class MethodAndBridges {\n    MethodInfo actual;\n    final List&lt;MethodInfo&gt; bridges = new ArrayList&lt;&gt;();\n\n    MethodAndBridges(MethodSignature sig) {}\n\n    void set(MethodInfo mi) {\n        if(actual != null) throw new IllegalStateException();\n        actual = mi;\n    }\n\n    void addBridge(MethodInfo mi) {\n        bridges.add(mi);\n    }\n}\n</code></pre>\n<p>We can gather the information in a form ready for checking override relations with <a href=\"https://asm.ow2.io/javadoc/org/objectweb/asm/package-summary.html\" rel=\"nofollow noreferrer\">the ASM library</a> as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MethodCollector extends ClassVisitor {\n    static Map&lt;MethodSignature, MethodAndBridges&gt; getMethods(ClassReader cr) {\n        MethodCollector mc = new MethodCollector();\n        cr.accept(mc, ClassReader.SKIP_DEBUG | ClassReader.SKIP_FRAMES);\n        return mc.found;\n    }\n\n    final Map&lt;MethodSignature, MethodAndBridges&gt; found = new HashMap&lt;&gt;();\n    String owner, superClass;\n    List&lt;String&gt; interfaces;\n\n    protected MethodCollector() {\n        super(Opcodes.ASM9);\n    }\n\n    @Override\n    public void visit(int version, int acc,\n            String name, String sig, String superName, String[] ifNames) {\n        owner = name;\n        superClass = superName;\n        this.interfaces = ifNames == null? List.of(): List.of(ifNames);\n    }\n\n    @Override\n    public MethodVisitor visitMethod(\n        int acc, String name, String desc, String sig, String[] exceptions) {\n\n        MethodInfo mi = new MethodInfo(acc, owner, name, desc);\n        if((acc &amp; Opcodes.ACC_BRIDGE) == 0) {\n            found.computeIfAbsent(mi.signature(), MethodAndBridges::new).set(mi);\n            return null;\n        }\n        return new MethodVisitor(Opcodes.ASM9) {\n            @Override public void visitMethodInsn(\n                    int op, String owner, String name, String tDesc, boolean i) {\n                found.computeIfAbsent(new MethodSignature(name, tDesc),\n                    MethodAndBridges::new).addBridge(mi);\n            }\n        };\n    }\n}\n</code></pre>\n<hr />\n<p>To demonstrate how this work, let’s enhance your example, to address more cases</p>\n<pre class=\"lang-java prettyprint-override\"><code>interface SupplierOfSerializable {\n    Serializable get();\n}\n\ninterface ISetting&lt;T extends CharSequence&gt; extends Supplier&lt;T&gt;, Consumer&lt;T&gt; {\n    T get();\n    @Override void accept(T t);\n    Number method(int i);\n    static void method(Object o) {}\n    private void method(Number n) {}\n}\n\nclass Setting implements ISetting&lt;String&gt;, SupplierOfSerializable {\n    public String get() {\n        return &quot;&quot;;\n    }\n    @Override\n    public void accept(String t) {}\n    public Integer method(int i) {\n        return i;\n    }\n    static void method(Object o) {}\n    void method(Number n) {}\n}\n</code></pre>\n<p>and check the override relations (only considering the direct interfaces, without recursion)</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CheckOverride {\n    public static void main(String[] args) throws IOException {\n        MethodCollector mc = new MethodCollector();\n        new ClassReader(Setting.class.getName())\n            .accept(mc, ClassReader.SKIP_DEBUG | ClassReader.SKIP_FRAMES);\n\n        Map&lt;MethodSignature, MethodAndBridges&gt; implMethods = mc.found;\n        Map&lt;MethodInfo, Set&lt;MethodInfo&gt;&gt; overrides = new HashMap&lt;&gt;();\n\n        for(String ifType: mc.interfaces) {\n            Map&lt;MethodSignature, MethodAndBridges&gt; ifMethods\n                = MethodCollector.getMethods(new ClassReader(ifType));\n\n            System.out.println(&quot;interface &quot; + ifType.replace('/', '.'));\n            printMethods(ifMethods);\n            System.out.println();\n            ifMethods.values().removeIf(CheckOverride::nonOverridable);\n\n            implMethods.forEach((sig, method) -&gt; {\n                if(nonOverridable(method)) {\n                    overrides.putIfAbsent(method.actual, Set.of());\n                    return;\n                }\n                var overridden = ifMethods.get(sig);\n                if(overridden == null &amp;&amp; method.bridges.isEmpty()) {\n                    overrides.putIfAbsent(method.actual, Set.of());\n                    return;\n                }\n                Set&lt;MethodInfo&gt; set = overrides.compute(method.actual,\n                    (k, s) -&gt; s == null || s.isEmpty()? new HashSet&lt;&gt;(): s);\n                if(overridden != null) set.add(overridden.actual);\n                for(var mi: method.bridges) {\n                    overridden = ifMethods.get(mi.signature());\n                    if(overridden != null) set.add(overridden.actual);\n                }\n            });\n        }\n\n        System.out.println(&quot;class &quot; + mc.owner.replace('/', '.'));\n        printMethods(implMethods);\n        System.out.println();\n\n        System.out.println(&quot;Final result&quot;);\n        System.out.println(&quot;class &quot; + mc.owner.replace('/', '.'));\n        overrides.forEach((m,overridden) -&gt; {\n            System.out.println(&quot;  &quot; + toDeclaration(m, false));\n            if(!overridden.isEmpty()) {\n                System.out.println(&quot;    overrides&quot;);\n                overridden.forEach(o -&gt;\n                    System.out.println(&quot;      &quot; + toDeclaration(o, true)));\n            }\n        });\n    }\n\n    static boolean nonOverridable(MethodAndBridges m) {\n        return (m.actual.access() &amp; (Opcodes.ACC_PRIVATE|Opcodes.ACC_STATIC)) != 0\n             || m.actual.name().startsWith(&quot;&lt;&quot;);\n    }\n\n    static void printMethods(Map&lt;MethodSignature, MethodAndBridges&gt; methods) {\n        methods.forEach((sig, methodAndBridges) -&gt; {\n            System.out.println(&quot;  &quot;+toDeclaration(methodAndBridges.actual,false));\n            if(!methodAndBridges.bridges.isEmpty()) {\n                System.out.println(&quot;    bridges&quot;);\n                for(MethodInfo mi: methodAndBridges.bridges) {\n                    System.out.println(&quot;      &quot; + toDeclaration(mi, false));\n                }\n            };\n        });\n    }\n\n    private static String toDeclaration(MethodInfo mi, boolean withType) {\n        StringBuilder sb = new StringBuilder();\n        sb.append(Modifier.toString(mi.access() &amp; Modifier.methodModifiers()));\n        if(sb.length() &gt; 0) sb.append(' ');\n        String clName = mi.owner();\n        var mt = MethodTypeDesc.ofDescriptor(mi.desc());\n        if(mi.name().equals(&quot;&lt;init&gt;&quot;))\n            sb.append(clName, clName.lastIndexOf('/') + 1, clName.length());\n        else {\n            sb.append(mt.returnType().displayName()).append(' ');\n            if(withType) sb.append(clName.replace('/', '.')).append('.');\n            sb.append(mi.name());\n        }\n        if(mt.parameterCount() == 0) sb.append(&quot;()&quot;);\n        else {\n            String sep = &quot;(&quot;;\n            for(ClassDesc cd: mt.parameterList()) {\n                sb.append(sep).append(cd.displayName());\n                sep = &quot;, &quot;;\n            }\n            sb.append(')');\n        }\n        return sb.toString();\n    }\n}\n</code></pre>\n<pre class=\"lang-none prettyprint-override\"><code>interface ISetting\n  public static void method(Object)\n  public abstract void accept(CharSequence)\n    bridges\n      public void accept(Object)\n  public abstract Number method(int)\n  private void method(Number)\n  public abstract CharSequence get()\n    bridges\n      public Object get()\n\ninterface SupplierOfSerializable\n  public abstract Serializable get()\n\nclass Setting\n  Setting()\n  public Integer method(int)\n    bridges\n      public Number method(int)\n  public void accept(String)\n    bridges\n      public void accept(Object)\n      public void accept(CharSequence)\n  static void method(Object)\n  public String get()\n    bridges\n      public Object get()\n      public CharSequence get()\n      public Serializable get()\n  void method(Number)\n\nFinal result\nclass Setting\n  public String get()\n    overrides\n      public abstract Serializable SupplierOfSerializable.get()\n      public abstract CharSequence ISetting.get()\n  Setting()\n  public Integer method(int)\n    overrides\n      public abstract Number ISetting.method(int)\n  public void accept(String)\n    overrides\n      public abstract void ISetting.accept(CharSequence)\n  void method(Number)\n  static void method(Object)\n</code></pre>\n<p>The code uses newer Java features, like <code>var</code>, <code>record</code>, and the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/constant/package-summary.html\" rel=\"nofollow noreferrer\">constant API</a>, but I think, the result is straight-forward enough for converting it to older Java versions, if really required.</p>\n"}],"owner":{"user_id":21234503,"display_name":"Andrey Tarasov"},"view_count":79,"up_vote_count":2,"accepted_answer_id":75488233,"answer_count":1,"score":2,"creation_date":1676644527,"question_id":75485622,"body":"<p>I have a problem with method override checks. I can detect simple override relations, but if the parent class has generics and the abstract method uses type parameters (return value/args), my code breaks down because the method description is not equal to the checked method.</p>\n<p>Example:</p>\n<pre><code>public interface ISetting&lt;T&gt; {\n\npublic T method();\n\n}\n</code></pre>\n<pre><code>public class Setting implements ISetting&lt;Integer&gt; {\n\npublic Integer method() {\n//Something\n}\n\n}\n</code></pre>\n<p>In <code>ISetting</code>, the method description is <code>()Ljava/lang/Object;</code>\nand in <code>Setting</code>, the method description is <code>()Ljava/lang/Integer;</code></p>\n<p>How I can check this Override ?</p>\n<p>On my head no thoughts come, how I can make this &gt;~&lt; All ideas which come to my head are bad (example: ignore check on desc, but overload method just break this idea)</p>\n"},{"tags":["java","constructor","jvm"],"comments":[{"owner":{"user_id":438154,"display_name":"Sotirios Delimanolis"},"edited":false,"comment_id":133184845,"body":"<a href=\"https://stackoverflow.com/questions/25447910/how-can-i-create-an-instance-of-class-without-invoking-constructor-of-this-class\" title=\"how can i create an instance of class without invoking constructor of this class\">stackoverflow.com/questions/25447910/&hellip;</a>"}],"answers":[{"owner":{"user_id":9624439,"display_name":"ryoii"},"up_vote_count":2,"is_accepted":true,"creation_date":1676647792,"answer_id":75486238,"body":"<p>You wanna allocate an <strong>uninitialized object</strong>.</p>\n<p>You can try the library named <strong><a href=\"http://objenesis.org/details.html\" rel=\"nofollow noreferrer\">Objenesis</a></strong>.</p>\n<p>Otherwise, you can create an object by serialization. This is a widely used method to create a uninitialized object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Serialization {\n\n    static class TestSerialization  implements Serializable {\n        int val = 0;\n        public TestSerialization() {\n            System.out.println(&quot;constructor&quot;);\n            val = 1;\n        }\n\n        @Override\n        public String toString() {\n            return &quot;val is &quot; + val;\n        }\n    }\n\n\n    public static void main(String[] args) throws IOException, ClassNotFoundException {\n        TestSerialization testSerialization = new TestSerialization();\n\n        // constructor\n        // val is 1\n        System.out.println(testSerialization);\n\n        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n\n        ObjectOutputStream oos = new ObjectOutputStream(bos);\n        oos.writeObject(testSerialization);\n        oos.close();\n\n        ObjectInputStream ois = new ObjectInputStream(new ByteArrayInputStream(bos.toByteArray()));\n        Object obj = ois.readObject();\n        // val is 1\n        System.out.println(obj);\n    }\n}\n</code></pre>\n<p>One step closer, you can use <em>ReflectionFactory</em> to create an empty uninitialized object.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n\n    static class TestClass {\n        public int val = 0;\n\n        public TestClass() {\n            val = 1;\n        }\n\n        @Override\n        public String toString() {\n            return &quot;value is &quot; + val;\n        }\n    }\n\n    public static void main(String[] args) throws Exception {\n\n        // by constructor\n        TestClass obj = new TestClass();\n        // value is 1\n        System.out.println(obj);\n\n        // by reflect\n        Constructor&lt;TestClass&gt; constructor = TestClass.class.getConstructor();\n        obj = constructor.newInstance();\n        // value is 1\n        System.out.println(obj);\n\n        // by ReflectionFactory\n        ReflectionFactory reflectionFactory = ReflectionFactory.getReflectionFactory();\n        Constructor&lt;Object&gt; objectConstructor = Object.class.getDeclaredConstructor();\n        Constructor&lt;?&gt; targetConstructor = reflectionFactory.newConstructorForSerialization(TestClass.class, objectConstructor);\n        obj = (TestClass) targetConstructor.newInstance();\n        // value is 0\n        System.out.println(obj);\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":45843,"display_name":"rwallace"},"view_count":58,"up_vote_count":2,"accepted_answer_id":75486238,"answer_count":1,"score":2,"creation_date":1676643296,"question_id":75485389,"body":"<p>In Java, given</p>\n<pre><code>Class c = ...\n</code></pre>\n<p>We can make an object of this class by first obtaining a constructor. For example, if we want to use the default (no parameters) constructor,</p>\n<pre><code>c.getConstructor().newInstance()\n</code></pre>\n<p>This seems straightforward, and seems to match how things are done in Java source code.</p>\n<p>But, curiously, it is not how things are done in JVM byte code. There, creating an object is done in two steps: <code>new</code> to actually create the object, then <code>invokespecial</code> to call an appropriate constructor.</p>\n<p>Is there a way to bypass the constructor when what you have is a <code>Class</code> (with the actual class to be determined at runtime)? If not, was the rationale for the difference between how this works, and how the byte code works, ever documented?</p>\n"},{"tags":["java","android","x509certificate","keychain"],"answers":[{"owner":{"user_id":3865138,"display_name":"Mr Heelis"},"up_vote_count":2,"is_accepted":true,"creation_date":1677057569,"answer_id":75530519,"body":"<p>I figured it out, the code needs to become slightly different, but this wasn't documented anywhere I could find: I had to literally face roll the keyboard to get it done</p>\n<p>so. the OP example was me using the pfx file in the assets folder.</p>\n<p><a href=\"https://i.stack.imgur.com/GtBfQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/GtBfQ.png\" alt=\"enter image description here\" /></a></p>\n<p>In order to <em><strong>not</strong></em> use a from an asset file in the build environment (aka <code>KeyStore</code>), in order to load the cert direcly from a part of android OS at run time and get at it in code (aka <code>KeyChain</code>)(i.e. in order to load the cert you can see in the screen below on the device) ....</p>\n<p><strong>THIS IS AN illustration of where it is in android, BUT NOT MY SCREEN SHOT</strong> <a href=\"https://i.stack.imgur.com/nK0nC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nK0nC.png\" alt=\"enter image description here\" /></a></p>\n<p>...use this code</p>\n<pre><code>final char[] PASSWORD = &quot;***SOMEPASSWORD****&quot;.toCharArray();\nTrustManager[] trustManager;\nSSLSocketFactory sslSocketFactory;\nKeyStore keyStore;\n\nX509Certificate[] keychain;  \nPrivateKey privateKey;   \nkeychain = KeyChain.getCertificateChain(context, &quot;xkeyx-xaliasxx&quot;);\nprivateKey = KeyChain.getPrivateKey(context, &quot;xkeyx-xaliasxx&quot;); \nkeyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\nkeyStore.load(null, null);\nkeyStore.setKeyEntry(&quot;xkeyx-xaliasxx&quot;, privateKey, PASSWORD, keychain);  \nTrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance (TrustManagerFactory.getDefaultAlgorithm());\ntrustManagerFactory.init(keyStore);\nTrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\nif (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager))\n  {\n    throw new IllegalStateException(&quot;Unexpected default trust managers:&quot;\n      + Arrays.toString(trustManagers));\n  }\ntrustManager = trustManagers;\n\nKeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;X509&quot;);\nkeyManagerFactory.init(keyStore,PASSWORD);\nSSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\nsslContext.init(keyManagerFactory.getKeyManagers(),null,null);\nsslSocketFactory = sslContext.getSocketFactory();\n\n\nOkHttpClient.Builder builder = new OkHttpClient.Builder()\n    .connectTimeout(15000, TimeUnit.MILLISECONDS).readTimeout(0, TimeUnit.MILLISECONDS)\n    .writeTimeout(15000, TimeUnit.MILLISECONDS).cookieJar(new ReactCookieJarContainer());\nbuilder.sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManager[0]);\n\nOkHttpClient okHttpClient = builder.build();\n</code></pre>\n<p><strong>NOTE this will only work AFTER the user in app has confirmed the certificate: so this code needs to have been run at least ONCE</strong></p>\n<p><a href=\"https://i.stack.imgur.com/Ood2y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Ood2y.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>KeyChain.choosePrivateKeyAlias(RN.getReactActivity(), (KeyChainAliasCallback) alias -&gt; {\nLog.d(&quot;cert&quot;, String.format(&quot;User has selected client certificate alias: %s should be xkeyx-xaliasxx&quot;, alias));\n X509Certificate[] truechain;\n try {\n    truechain = KeyChain.getCertificateChain(Context, alias);\n    if (truechain != null) {\n        Log.d(&quot;cert&quot;, &quot;truechain count&quot; + truechain.length);\n    }\n    else{\n        Log.d(&quot;cert&quot;, &quot;truechain count is null&quot;);\n    }\n } catch (InterruptedException e) {\n     Log.e(&quot;cert&quot;, &quot;InterruptedException&quot;, e);\n } catch (KeyChainException e) {\n     Log.e(&quot;cert&quot;, &quot;KeyChainException&quot;, e);\n }\n}, null, null, null, -1, null);\n</code></pre>\n"}],"owner":{"user_id":3865138,"display_name":"Mr Heelis"},"view_count":177,"up_vote_count":2,"accepted_answer_id":75530519,"answer_count":1,"score":2,"creation_date":1676628259,"question_id":75482765,"body":"<p>I'm an Android Developer who has to use <code>KeyChain</code> not <code>KeyStore</code>. The KeyStore variant of our code works. I need to add <code>KeyChain</code> equivalent.</p>\n<p>this works</p>\n<pre><code>  final char[] PASSWORD = &quot;***SOMEPASSWORD****&quot;.toCharArray();\n  TrustManager[] trustManager;\n  SSLSocketFactory sslSocketFactory;\n  KeyStore keyStore;\n\n  InputStream inputStream = context.getResources().getAssets().open(&quot;xxxx-xxxxx-xxxxx-xxxx.pfx&quot;);\n  keyStore = KeyStore.getInstance(&quot;PKCS12&quot;);\n  keyStore.load(inputStream,PASSWORD);\n  TrustManagerFactory trustManagerFactory = TrustManagerFactory.getInstance (TrustManagerFactory.getDefaultAlgorithm());\n  trustManagerFactory.init(keyStore);\n  TrustManager[] trustManagers = trustManagerFactory.getTrustManagers();\n  if (trustManagers.length != 1 || !(trustManagers[0] instanceof X509TrustManager))\n  {\n    throw new IllegalStateException(&quot;Unexpected default trust managers:&quot;\n      + Arrays.toString(trustManagers));\n  }\n  trustManager = trustManagers;\n\n  KeyManagerFactory keyManagerFactory = KeyManagerFactory.getInstance(&quot;X509&quot;);\n  keyManagerFactory.init(keyStore,PASSWORD);\n  SSLContext sslContext = SSLContext.getInstance(&quot;TLS&quot;);\n  sslContext.init(keyManagerFactory.getKeyManagers(),null,null);\n  sslSocketFactory = sslContext.getSocketFactory();\n\n\n  OkHttpClient.Builder builder = new OkHttpClient.Builder()\n    .connectTimeout(15000, TimeUnit.MILLISECONDS).readTimeout(0, TimeUnit.MILLISECONDS)\n    .writeTimeout(15000, TimeUnit.MILLISECONDS).cookieJar(new ReactCookieJarContainer());\n  builder.sslSocketFactory(sslSocketFactory, (X509TrustManager) trustManager[0]);\n\n  OkHttpClient okHttpClient = builder.build();\n</code></pre>\n<p>The problem is this line <code>InputStream inputStream = context.getResources().getAssets().open(&quot;xxxx-xxxxx-xxxxx-xxxx.pfx&quot;);</code> we're not allowed to use the assets folder (for reasons outside the scope of this conversation) but we are allowed to put the self same file in the <code>KeyChain</code> so I did, and I can retrieve it using the following. <code>X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;); </code></p>\n<p>so since</p>\n<pre><code>   X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;); //this gets the correct X509Certificate\n</code></pre>\n<p>Gets the certificate via <code>KeyChain</code> my instinct was to swap it out with this:</p>\n<pre><code>   X509TrustManager customTm = new X509TrustManager() {\n    @Override\n    public void checkClientTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\n\n    }\n\n    @Override\n    public void checkServerTrusted(java.security.cert.X509Certificate[] chain, String authType) throws CertificateException {\n\n    }\n\n    @Override\n    public java.security.cert.X509Certificate[] getAcceptedIssuers() {\n      try {\n        return X509Certificate[] chain = KeyChain.getCertificateChain(context, &quot;xxxx-xxxxx-xxxxx-xxxx&quot;);\n      } catch (InterruptedException e) {\n        e.printStackTrace();\n      } catch (KeyChainException e) {\n        e.printStackTrace();\n      }\n      return null;\n    }\n  };\n  TrustManager[] trustManager = new TrustManager[] { customTm };\n  sslContext.init(null, trustManager, null);\n \n</code></pre>\n<p>but it doesn't work, so my question is: <strong>How do I use the X509Certificate I have from the <code>KeyChain</code> as a drop in replacement to the asset I pulled into the <code>KeyStore</code>?</strong></p>\n"},{"tags":["java","android","firebase","crashlytics"],"comments":[{"owner":{"user_id":16796366,"display_name":"Nitish"},"edited":false,"comment_id":133141060,"body":"<code>&#47;&#47; When using the BoM, you don&#39;t specify versions in Firebase library dependencies</code> -  Also from <a href=\"https://firebase.google.com/support/release-notes/android#2023-02-10\" rel=\"nofollow noreferrer\">firebase bom</a> release notes it seems support for <code>18.3.4</code> was added in latest version, Try using latest versions or compatible versions of library"},{"owner":{"user_id":19682526,"display_name":"Katlego"},"edited":false,"comment_id":133146086,"body":"@Nitish Oh I see, actually that did solve the issue, I upgraded the BoM version and removed the version of the firebase products and the application built and ran successfully"}],"answers":[{"owner":{"user_id":19682526,"display_name":"Katlego"},"up_vote_count":2,"is_accepted":false,"creation_date":1676479546,"answer_id":75462936,"body":"<p>As commented by @Nitish, the BoM version did not support that version of Crashlytics. So I have updated the BoM version and removed the versions on the specific product version. My app build.gradle dependencies now look like this:</p>\n<pre><code>dependencies { ....\nimplementation platform('com.google.firebase:firebase-bom:31.2.0')\n\nimplementation 'com.google.firebase:firebase-analytics'\nimplementation 'com.google.firebase:firebase-database'\nimplementation 'com.google.firebase:firebase-messaging'\nimplementation 'com.google.firebase:firebase-crashlytics' ....\n</code></pre>\n<p>In line with the latest release by the time of writing taken from <a href=\"https://firebase.google.com/support/release-notes/android#2023-02-10\" rel=\"nofollow noreferrer\">Firebase</a> and the app now builds and runs without crashing on start up. <a href=\"https://firebase.google.com/docs/android/learn-more\" rel=\"nofollow noreferrer\">Firebase</a> also shows here that I did not have to specify the version for the specific firebase products.</p>\n"}],"owner":{"user_id":19682526,"display_name":"Katlego"},"view_count":309,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1676463839,"question_id":75459758,"body":"<p>It seems that changing from\n<code>'implementation com.google.firebase:firebase-crashlytics:18.3.3'</code>\nto\n<code>'implementation com.google.firebase:firebase-crashlytics:18.3.4'</code>\nproduces the following crashlog when the app initialises. Is there any dependencies I could be missing?</p>\n<pre><code>2023-02-14 23:43:27.026 13135-13135/ I/MultiDex: VM has multidex support, MultiDex support library is disabled.\n2023-02-14 23:43:27.052 13135-13135/ D/AndroidRuntime: Shutting down VM\n2023-02-14 23:43:27.054 13135-13135/ E/AndroidRuntime: FATAL EXCEPTION: main\n    Process: , PID: 13135\n    java.lang.NoClassDefFoundError: Failed resolution of: Lcom/google/firebase/annotations/concurrent/Background;\n        at com.google.firebase.installations.FirebaseInstallationsRegistrar.getComponents(FirebaseInstallationsRegistrar.java:45)\n        at com.google.firebase.tracing.ComponentMonitor.processRegistrar(ComponentMonitor.java:28)\n        at com.google.firebase.components.ComponentRuntime.discoverComponents(ComponentRuntime.java:117)\n        at com.google.firebase.components.ComponentRuntime.&lt;init&gt;(ComponentRuntime.java:99)\n        at com.google.firebase.components.ComponentRuntime.&lt;init&gt;(ComponentRuntime.java:46)\n        at com.google.firebase.components.ComponentRuntime$Builder.build(ComponentRuntime.java:387)\n        at com.google.firebase.FirebaseApp.&lt;init&gt;(FirebaseApp.java:437)\n        at com.google.firebase.FirebaseApp.initializeApp(FirebaseApp.java:303)\n        at com.google.firebase.FirebaseApp.initializeApp(FirebaseApp.java:271)\n        at com.google.firebase.FirebaseApp.initializeApp(FirebaseApp.java:256)\n        at com.google.firebase.provider.FirebaseInitProvider.onCreate(FirebaseInitProvider.java:51)\n        at android.content.ContentProvider.attachInfo(ContentProvider.java:2404)\n        at android.content.ContentProvider.attachInfo(ContentProvider.java:2374)\n        at com.google.firebase.provider.FirebaseInitProvider.attachInfo(FirebaseInitProvider.java:45)\n        at android.app.ActivityThread.installProvider(ActivityThread.java:7422)\n        at android.app.ActivityThread.installContentProviders(ActivityThread.java:6939)\n        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:6710)\n        at android.app.ActivityThread.access$1500(ActivityThread.java:247)\n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2053)\n        at android.os.Handler.dispatchMessage(Handler.java:106)\n        at android.os.Looper.loopOnce(Looper.java:201)\n        at android.os.Looper.loop(Looper.java:288)\n        at android.app.ActivityThread.main(ActivityThread.java:7839)\n        at java.lang.reflect.Method.invoke(Native Method)\n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548)\n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003)\n     Caused by: java.lang.ClassNotFoundException: Didn't find class &quot;com.google.firebase.annotations.concurrent.Background&quot; on path: DexPathList[[zip file &quot;/data/app/~~s71FMMPQjbON5bHQXPtW2w==/-mUP09Nn8ZAhW8aCE_JxV8w==/base.apk&quot;],nativeLibraryDirectories=[/data/app/~~s71FMMPQjbON5bHQXPtW2w==/-mUP09Nn8ZAhW8aCE_JxV8w==/lib/x86_64, /data/app/~~s71FMMPQjbON5bHQXPtW2w==/-mUP09Nn8ZAhW8aCE_JxV8w==/base.apk!/lib/x86_64, /system/lib64, /system_ext/lib64]]\n        at dalvik.system.BaseDexClassLoader.findClass(BaseDexClassLoader.java:218)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:379)\n        at java.lang.ClassLoader.loadClass(ClassLoader.java:312)\n        at com.google.firebase.installations.FirebaseInstallationsRegistrar.getComponents(FirebaseInstallationsRegistrar.java:45) \n        at com.google.firebase.tracing.ComponentMonitor.processRegistrar(ComponentMonitor.java:28) \n        at com.google.firebase.components.ComponentRuntime.discoverComponents(ComponentRuntime.java:117) \n        at com.google.firebase.components.ComponentRuntime.&lt;init&gt;(ComponentRuntime.java:99) \n        at com.google.firebase.components.ComponentRuntime.&lt;init&gt;(ComponentRuntime.java:46) \n        at com.google.firebase.components.ComponentRuntime$Builder.build(ComponentRuntime.java:387) \n        at com.google.firebase.FirebaseApp.&lt;init&gt;(FirebaseApp.java:437) \n        at com.google.firebase.FirebaseApp.initializeApp(FirebaseApp.java:303) \n        at com.google.firebase.FirebaseApp.initializeApp(FirebaseApp.java:271) \n        at com.google.firebase.FirebaseApp.initializeApp(FirebaseApp.java:256) \n        at com.google.firebase.provider.FirebaseInitProvider.onCreate(FirebaseInitProvider.java:51) \n        at android.content.ContentProvider.attachInfo(ContentProvider.java:2404) \n        at android.content.ContentProvider.attachInfo(ContentProvider.java:2374) \n        at com.google.firebase.provider.FirebaseInitProvider.attachInfo(FirebaseInitProvider.java:45) \n        at android.app.ActivityThread.installProvider(ActivityThread.java:7422) \n        at android.app.ActivityThread.installContentProviders(ActivityThread.java:6939) \n        at android.app.ActivityThread.handleBindApplication(ActivityThread.java:6710) \n        at android.app.ActivityThread.access$1500(ActivityThread.java:247) \n        at android.app.ActivityThread$H.handleMessage(ActivityThread.java:2053) \n        at android.os.Handler.dispatchMessage(Handler.java:106) \n        at android.os.Looper.loopOnce(Looper.java:201) \n        at android.os.Looper.loop(Looper.java:288) \n        at android.app.ActivityThread.main(ActivityThread.java:7839) \n        at java.lang.reflect.Method.invoke(Native Method) \n        at com.android.internal.os.RuntimeInit$MethodAndArgsCaller.run(RuntimeInit.java:548) \n        at com.android.internal.os.ZygoteInit.main(ZygoteInit.java:1003) \n2023-02-14 23:43:28.677 13135-13147/ W/System: A resource failed to call close. \n\n</code></pre>\n<p>my module build.gradle has these dependencies</p>\n<pre><code>dependencies {\n    implementation platform('com.google.firebase:firebase-bom:30.4.1')\n\n    implementation 'androidx.multidex:multidex:2.0.1'\n    implementation 'androidx.appcompat:appcompat:1.6.1'\n    implementation 'com.google.android.material:material:1.8.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'androidx.navigation:navigation-fragment:2.5.3'\n    implementation 'androidx.navigation:navigation-ui:2.5.3'\n    implementation 'androidx.preference:preference:1.2.0'\n    implementation 'androidx.legacy:legacy-support-v4:1.0.0'\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n    implementation 'androidx.swiperefreshlayout:swiperefreshlayout:1.1.0'\n    implementation 'com.android.volley:volley:1.2.1'\n    implementation 'androidx.core:core:1.9.0'\n\n    implementation 'com.google.firebase:firebase-analytics:21.2.0'\n    implementation 'com.google.firebase:firebase-database:20.1.0'\n    implementation 'com.google.firebase:firebase-messaging:23.1.1'\n    implementation 'com.google.firebase:firebase-crashlytics:18.3.4'\n\n    implementation 'com.google.android.gms:play-services-maps:18.1.0'\n    implementation 'com.google.android.gms:play-services-analytics:18.0.2'\n    implementation 'com.google.android.gms:play-services-location:21.0.1'\n\n    implementation 'com.google.android.gms:play-services-auth:20.4.1'\n    implementation 'com.google.android.gms:play-services-auth-api-phone:18.0.1'\n\n    implementation &quot;com.github.parse-community.Parse-SDK-Android:parse:1.26.0&quot;\n\n    implementation 'androidx.camera:camera-camera2:1.3.0-alpha02'\n    implementation &quot;androidx.camera:camera-lifecycle:1.2.1&quot;\n    implementation 'androidx.camera:camera-view:1.3.0-alpha02'\n\n    implementation 'com.google.zxing:core:3.5.0'\n    implementation 'com.google.code.gson:gson:2.9.1'\n}\n\napply plugin: 'com.google.firebase.crashlytics'\n\n</code></pre>\n<p>and my project project build.gradle has the following dependencies</p>\n<pre><code> dependencies {\n        classpath 'com.android.tools.build:gradle:7.2.2'\n        classpath 'com.google.gms:google-services:4.3.15'\n        classpath 'com.google.firebase:firebase-crashlytics-gradle:2.9.4'\n        // NOTE: Do not place your application dependencies here; they belong\n        // in the individual module build.gradle files\n    }\n\n</code></pre>\n<p>I am aware that I could just stay with version 18.3.3 but I am trying to understand why this crash is occuring.</p>\n"},{"tags":["java","multithreading","concurrency","volatile","java-memory-model"],"comments":[{"owner":{"user_id":20905944,"display_name":"Layosh M"},"edited":false,"comment_id":133132088,"body":"I&#39;ve added some examples, maybe it can clarify what i am talking about, so u can provide some more precise answer. But anyway thank you for the answer )"},{"owner":{"user_id":20905944,"display_name":"Layosh M"},"edited":false,"comment_id":133132151,"body":"&#39;xxx&#39; is not boolean value, it is just any object that was changes or set in the Thread1, and i am interested if writing to the same volatile variable will provide access to this data for another Thread2. In case of reading it is 100%, but nothing about subsequent writes :("},{"owner":{"user_id":20905944,"display_name":"Layosh M"},"edited":false,"comment_id":133132238,"body":"you are not correct, when you are reading volatile field all the data that was accessible to the writer thread becomes accessible to the reader thread: <a href=\"http://jeremymanson.blogspot.com/2008/11/what-volatile-means-in-java.html\" rel=\"nofollow noreferrer\">jeremymanson.blogspot.com/2008/11/&hellip;</a>"},{"owner":{"user_id":139985,"display_name":"Stephen C"},"edited":false,"comment_id":133132562,"body":"<i>&quot;[I] can&#39;t find anything about it in the official docs.&quot;</i> -  It is all specified in Chapter 17 of the JLS.  Yes, it is not easy to read ... but if you are going to write code that depends on <code>volatile</code> for synchronization, then you need to understand this stuff.  And conversely, if you can&#39;t understand what the JLS says you shouldn&#39;t be attempting to do your synchronization this way.  (Use the higher level concurrency primitives.  In the vast majority of use-cases, &quot;lock free&quot; synchronization is unnecessary.)"},{"owner":{"user_id":20905944,"display_name":"Layosh M"},"edited":false,"comment_id":133132941,"body":"Thank you for your comment. I’ve read it once more and found same blocks of text. A write to a volatile variable v (&#167;8.3.1.4) synchronizes-with all subsequent reads of v by any thread (where &quot;subsequent&quot; is defined according to the synchronization order). And this: A write to a volatile field (&#167;8.3.1.4) happens-before every subsequent read of that field. So no info about subsequent writes... maybe i m just blind("},{"owner":{"user_id":139985,"display_name":"Stephen C"},"edited":false,"comment_id":133133041,"body":"Well ... it doesn&#39;t mention subsequent writes by thread A because subsequent writes  have no associated guarantees.  The JMM spec is all about what &gt;is&lt; guaranteed.  It doesn&#39;t (and doesn&#39;t need to) enumerate the infinite set of things that are not guaranteed. If something is not <i>stated</i> as guaranteed then it is not guaranteed."},{"owner":{"user_id":139985,"display_name":"Stephen C"},"edited":false,"comment_id":133133050,"body":"Like I said, the spec is not easy to read ... but all of the information is there.  And if <i>reasoning</i> about what is stated (and not stated) in the spec is too difficult for you, you shouldn&#39;t be attempting to do clever things with <code>volatile</code>.   IMO."},{"owner":{"user_id":20905944,"display_name":"Layosh M"},"edited":false,"comment_id":133133139,"body":"Maybe you are right. And I am still not ready for such things. But anyway thanks a lot for clarifying the correct answer to my question!"}],"answers":[{"owner":{"user_id":2245707,"display_name":"pveentjer"},"up_vote_count":2,"is_accepted":true,"creation_date":1676426207,"answer_id":75454851,"body":"<p>To give a bit more comprehensive answer by building up the happens-before relation out of its basic orders:</p>\n<ol>\n<li><p>synchronization order: this is the total order of all synchronization actions. Since a volatile write is a synchronization action, the 2 volatile writes to the same or different variables are part of the synchronization order. The synchronization order will even order e.g. the lock of A and the volatile read of B because it is a total order.</p>\n</li>\n<li><p>synchronizes-with order. This is a partial order that only orders certain synchronization actions. For example, the release of a lock with all subsequent acquires of that same lock and the write of a volatile variable and all subsequent reads of that variable. So 2 volatile writes to different or the same variables are not ordered by the synchronizes-with order.</p>\n</li>\n<li><p>program order: in simple terms, it is the order as specified by the program code. In your case, the 2 volatiles writes are not ordered by program order since they are issued by different threads.</p>\n</li>\n</ol>\n<p>Now we get to the last step: the happens-before relation which is an order. It is the transitive closure of the union of the program order and the synchronizes-with order.</p>\n<p>So even though the 2 volatile writes are part of the synchronization order, they are not part of the synchronizes-with order, and as a consequence, they are not part of the happens-before order. So they don't induce any happens-before edges.</p>\n"}],"owner":{"user_id":20905944,"display_name":"Layosh M"},"view_count":86,"up_vote_count":3,"accepted_answer_id":75454851,"answer_count":1,"score":2,"creation_date":1676414814,"question_id":75453944,"body":"<p>&quot;A write to a volatile field (§8.3.1.4) happens-before every subsequent read of that field.&quot;</p>\n<p>So I know that volatile field can be used as synchronization in order to guarantee that that all the information that thread 1 has before writing to volatile field is going to be visible to thread 2 after reading that volatile.</p>\n<p>But what about subsequent writes? Is the behavior the same?\nAny help appreciated, can't find anything about it in the official docs.</p>\n<p>Examples:</p>\n<pre><code>### Write -&gt; Read\n\n#Thread1 (Write)\nxxx = &quot;anyValue&quot; - any variable with value before volatile\nboolean volatile b = true\n\n#Thread2 (Read)\nif (b) { -&gt; here we read volatile value\n print(xxx) -&gt; guaranteed visibility of 'xxx' 100%, will print 100% &quot;anyValue&quot;\n}\n\n### Write -&gt; Write\n\n#Thread1 (Write)\nxxx = &quot;anyValue&quot; - any variable with value before volatile\nboolean volatile b = true;\n\n#Thread2 (Write)\nb = false; -&gt; here we write to volatile value\nprint(xxx); -&gt; guaranteed visibility of 'xxx'???, what will be printed?\n</code></pre>\n"},{"tags":["java","rest","runtime","code-coverage","jacoco"],"answers":[{"owner":{"user_id":12331751,"display_name":"Dr Drake Ramoray"},"up_vote_count":2,"is_accepted":true,"creation_date":1676454485,"answer_id":75457962,"body":"<p>So basically I got the solution just reset the exec dump at my middleware after the request has been made in this order I am able to get the coverage analysis per request.</p>\n<pre><code> ExecDumpClient execDumpClient = new ExecDumpClient();\n        execDumpClient.setReset(true);\n        execDumpClient.dump(&quot;localhost&quot;, 36320);\n</code></pre>\n"}],"owner":{"user_id":12331751,"display_name":"Dr Drake Ramoray"},"view_count":72,"up_vote_count":3,"accepted_answer_id":75457962,"answer_count":1,"score":2,"creation_date":1676377533,"question_id":75447804,"body":"<p>I am using <code>jacoco</code> agent to generate my <a href=\"https://dzone.com/articles/code-coverage-report-generator-for-java-projects-a\" rel=\"nofollow noreferrer\">coverage reports</a> in the form of <code>xml</code> files by running the command:</p>\n<pre><code>java -jar &lt;path&gt;/sample_projects/beta/jacoco-code-coverage/jacoco-code-coverage-example/src/main/resources/lib/jacococli.jar report &lt;path&gt;/sample_projects/beta/jacoco-code-coverage/jacoco-code-coverage-example/target/jacoco-it.exec --classfiles &lt;path&gt;/sample_projects/beta/jacoco-code-coverage/jacoco-code-coverage-example/target/classes/com --sourcefiles src/main/java/ --xml &lt;path&gt;/sample_projects/beta/jacoco-code-coverage/jacoco-code-coverage-example/target/report.xml\n</code></pre>\n<p>This basically writes to <code>jacoco-it.exec</code> file and it saves previous coverage data as well.\nBut I want coverage analysis per request made, is there any way I can erase previous data collected by jacoco agent.</p>\n"},{"tags":["java","gradle","jdbc","jar","build.gradle"],"answers":[{"owner":{"user_id":6395627,"display_name":"Slaw"},"up_vote_count":2,"is_accepted":true,"creation_date":1676345715,"answer_id":75443211,"body":"<p>You need to configure the Gradle Shadow Plugin to merge the provider-configuration files. How to do that is <a href=\"https://imperceptiblethoughts.com/shadow/configuration/merging/#merging-service-descriptor-files\" rel=\"nofollow noreferrer\">documented here</a>:</p>\n<blockquote>\n<h2>Merging Service Descriptor Files</h2>\n<p>Java libraries often contain service descriptors files in the <code>META-INF/services</code> directory of the JAR. A service descriptor typically contains a line delimited list of classes that are supported for a particular <em>service</em>. At runtime, this file is read and used to configure library or application behavior.</p>\n<p>Multiple dependencies may use the same service descriptor file name. In this case, it is generally desired to merge the content of each instance of the file into a single output file. The <code>ServiceFileTransformer</code> class is used to perform this merging. By default, it will merge each copy of a file under <code>META-INF/services</code> into a single file in the output JAR.</p>\n<pre><code>// Merging Service Files\nshadowJar {\n  mergeServiceFiles()\n}\n</code></pre>\n<p>The above code snippet is a convenience syntax for calling <code>transform(ServiceFileTransformer.class)</code></p>\n</blockquote>\n<p>If using the Kotlin DSL, it would look like:</p>\n<pre><code>tasks {\n    shadowJar {\n        mergeServiceFiles()\n    }\n}\n</code></pre>\n<p>Or:</p>\n<pre><code>tasks.shadowJar {\n    mergeServiceFiles()\n}\n</code></pre>\n"}],"owner":{"user_id":9278319,"display_name":"greatFritz"},"view_count":141,"up_vote_count":2,"accepted_answer_id":75443211,"answer_count":1,"score":2,"creation_date":1676344209,"question_id":75443119,"body":"<p>I am encountering an issue when I try to build a fat jar file with gradle. Is there a way to configure gradle to support multiple JDBC drivers in the JAR file? I noticed in my <code>META-INF/services/java.sqlDriver</code> that it will take whatever JDBC library comes first. So when running the jar file I would often see this error.</p>\n<pre><code>java.sql.SQLException: No suitable driver\n    at java.sql/java.sql.DriverManager.getDriver(DriverManager.java:299)\n</code></pre>\n<p>I see that the solution to this issue revolves around adding <code>Class.forName('jdbcDriver')</code> before I initialize my db connections, but I see that for JTDS libraries you do not need that anymore because of JDBC type 4 can automatically detect which driver you need based on the connection string.</p>\n<p>My build.gradle file</p>\n<pre><code>plugins {\n    id(&quot;application&quot;)\n    id(&quot;com.github.johnrengelman.shadow&quot;) version &quot;7.1.0&quot;\n}\n\ndependencies {\n    implementation group: 'net.sourceforge.jtds', name: 'jtds', version: '1.3.1'\n    implementation group: 'mysql', name: 'mysql-connector-java', version: '8.0.26'\n}\n</code></pre>\n<p>My connection string</p>\n<p><code>jdbc:jtds:sqlserver://localhost:1111/db;user=TEST;password=DUMMY</code></p>\n<p>I am using Java 17 and Gradle 7.3.3</p>\n"},{"tags":["java","generics","jackson"],"answers":[{"owner":{"user_id":21197077,"display_name":"gneginskiy"},"up_vote_count":2,"is_accepted":true,"creation_date":1676212401,"answer_id":75427737,"body":"<p>Currently, there's no good solution for it .</p>\n<p>one possible approach is to use raw types (and delete generics whatsoever)</p>\n<p>another would be to add a method to add serializers to the module, and cast types within the method:</p>\n<pre><code>    @SuppressWarnings(&quot;unchecked&quot;)\n    private &lt;T&gt; void addSerializers(SimpleModule module) {\n        this.serializers.forEach((type, serializer) -&gt;\n                module.addSerializer((Class&lt;? extends T&gt;) type, (JsonSerializer&lt;T&gt;) serializer));\n    }\n</code></pre>\n<p>btw, the code above is taken from <a href=\"https://github.com/oyh980707/JavaArchitects/blob/939581d646eba0c43e3c1ceba9ffd31fd5607713/code/spring-framework-5.0.x/spring-web/src/main/java/org/springframework/http/converter/json/Jackson2ObjectMapperBuilder.java#L722\" rel=\"nofollow noreferrer\">spring-web sources</a></p>\n<p>The third approach would be to create a wrapper for a Map with accessors methods, which will ensure that no incorrect type-serializer pairs were added. e.g.:</p>\n<pre><code>        SerializersWrapper serializersWrapper = new SerializersWrapper();\n        SimpleModule module = new SimpleModule();\n        serializersWrapper.getAll().forEach(module::addSerializer);\n</code></pre>\n<p>and the wrapper code is</p>\n<pre><code>\nimport com.fasterxml.jackson.databind.JsonSerializer;\n\nimport java.util.Collections;\nimport java.util.HashMap;\nimport java.util.Map;\n\npublic class SerializersWrapper {\n    private final Map&lt;Class,JsonSerializer&gt; serializers = new HashMap&lt;&gt;();\n\n    public &lt;T&gt; void addSerializer(Class&lt;T&gt; type, JsonSerializer&lt;T&gt; serializer) {\n        serializers.put(type, serializer);\n    }\n\n    public &lt;T&gt; JsonSerializer&lt;T&gt;  getSerializer(Class&lt;T&gt; type){\n        return serializers.get(type);\n    }\n\n    public &lt;T&gt; Map&lt;Class&lt;T&gt;,JsonSerializer&lt;T&gt;&gt; getAll(){\n        return (Map&lt;Class&lt;T&gt;, JsonSerializer&lt;T&gt;&gt;) (Map) Collections.unmodifiableMap(serializers);\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":13115701,"display_name":"Paul Marcelin Bejan"},"view_count":74,"up_vote_count":2,"accepted_answer_id":75427737,"answer_count":1,"score":2,"creation_date":1676209348,"question_id":75427395,"body":"<p>How can I declare a map variable using Generics, that has <strong>Class of X as Key</strong>, and the related <strong>Serializer of X as Value</strong>.</p>\n<p>as example I want to have a Map that can contains:</p>\n<p>K, V\n<br>BigDecimal.class, new BigDecimalSerializer()\n<br>LocalDate.class, new LocalDateSerializer()\n<br>Date.class, new DateSerializer()</p>\n<p>Serializer example:</p>\n<pre><code>public class BigDecimalSerializer extends JsonSerializer&lt;BigDecimal&gt; {\n\n    @Override\n    public void serialize(BigDecimal value, JsonGenerator gen, SerializerProvider serializers) throws IOException {\n        gen.writeString(FormatUtils.format(value));\n    }\n\n}\n</code></pre>\n<p>I tried <code>Map&lt;Class&lt;?&gt;, ? extends JsonSerializer&lt;?&gt;&gt;</code></p>\n<pre><code>@Getter\n@AllArgsConstructor\npublic class CsvWriterConfig {\n    \n    private final Map&lt;Class&lt;?&gt;, ? extends JsonSerializer&lt;?&gt;&gt; serializers;\n    private final char separator;\n    \n}\n</code></pre>\n<p>but adding them to SimpleModule</p>\n<pre><code>SimpleModule module = new SimpleModule();\nserializers.forEach(module::addSerializer);\n</code></pre>\n<p>gives me an error:</p>\n<pre><code>The type SimpleModule does not define addSerializer(Class&lt;capture#5-of ?&gt;, capture#4-of ? extends JsonSerializer&lt;?&gt;) that is applicable here\n</code></pre>\n<p>The SimpleModule addSerializer is:</p>\n<pre><code>public &lt;T&gt; SimpleModule addSerializer(Class&lt;? extends T&gt; type, JsonSerializer&lt;T&gt; ser)\n{\n    _checkNotNull(type, &quot;type to register serializer for&quot;);\n    _checkNotNull(ser, &quot;serializer&quot;);\n    if (_serializers == null) {\n        _serializers = new SimpleSerializers();\n    }\n    _serializers.addSerializer(type, ser);\n    return this;\n}\n</code></pre>\n"},{"tags":["java","jvm","garbage-collection","g1gc"],"answers":[{"owner":{"user_id":139985,"display_name":"Stephen C"},"up_vote_count":1,"is_accepted":false,"creation_date":1676185029,"answer_id":75425378,"body":"<p>It is not possible to say why it happened with certainty.  I can't see anything about the heap allocation that (I assume) triggered the OOME that killed your application.</p>\n<p>However, if you were attempting to allocate a <em>large</em> object, the collector may have been unable to find enough <em>contiguous</em> space to allocate it.  I notice that you do have a lot of homogeneous regions so there is evidence that your application has been allocating large objects.</p>\n"},{"owner":{"user_id":1554195,"display_name":"tquadrat"},"up_vote_count":1,"is_accepted":false,"creation_date":1676193482,"answer_id":75425959,"body":"<p>Assume the following scenario: you have 1GB of heap space, currently allocated are 800 MB.</p>\n<p>Now your code tries to execute <code>new byte [256 * 1024 * 1024]</code>. The gc will attempt to free some additional memory, but fails, and an OOME will be thrown, without allocating memory – there had been all time 200 MB of free memory.</p>\n<p>You may find the offending statement in the logs, a J9 JVM will write the exact reason for the OOM to the javacore file, but the GC logs will not tell you anything in this regard.</p>\n"}],"owner":{"user_id":3930219,"display_name":"SLY"},"view_count":96,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1676183689,"question_id":75425299,"body":"<p>I'm trying to understand G1 garbage collection logs. Most important details you may find in the top of the log file. Heap max capacity is 594M, but the latest garbage collection cycle had used only 351M, before the jvm exit. Jvm crashed with <code>java.lang.OutOfMemoryError: Java heap space</code></p>\n<pre><code>[05:58:15.812][info][gc] Using G1\n[05:58:15.831][info][gc,init] Version: 17.0.4.1+9-LTS (release)\n[05:58:15.843][info][gc,init] CPUs: 6 total, 6 available\n[05:58:15.844][info][gc,init] Memory: 1536M\n[05:58:15.845][info][gc,init] Large Page Support: Disabled\n[05:58:15.846][info][gc,init] NUMA Support: Disabled\n[05:58:15.846][info][gc,init] Compressed Oops: Enabled (32-bit)\n[05:58:15.846][info][gc,init] Heap Region Size: 1M\n[05:58:15.847][info][gc,init] Heap Min Capacity: 594M\n[05:58:15.847][info][gc,init] Heap Initial Capacity: 594M\n[05:58:15.847][info][gc,init] Heap Max Capacity: 594M\n[05:58:15.847][info][gc,init] Pre-touch: Disabled\n[05:58:15.847][info][gc,init] Parallel Workers: 6\n[05:58:15.847][info][gc,init] Concurrent Workers: 2\n[05:58:15.849][info][gc,init] Concurrent Refinement Workers: 6\n[05:58:15.849][info][gc,init] Periodic GC: Disabled\n...\n[06:01:10.226][info][gc          ] GC(15) Pause Young (Normal) (G1 Evacuation Pause) 231M-&gt;69M(594M) 152.677ms\n[06:01:10.228][info][gc,cpu      ] GC(15) User=0.08s Sys=0.08s Real=0.16s\n[06:01:13.502][info][gc,start    ] GC(16) Pause Young (Normal) (G1 Evacuation Pause)\n[06:01:13.504][info][gc,task     ] GC(16) Using 6 workers of 6 for evacuation\n[06:01:13.661][info][gc,phases   ] GC(16)   Pre Evacuate Collection Set: 2.0ms\n[06:01:13.663][info][gc,phases   ] GC(16)   Merge Heap Roots: 1.4ms\n[06:01:13.664][info][gc,phases   ] GC(16)   Evacuate Collection Set: 125.0ms\n[06:01:13.669][info][gc,phases   ] GC(16)   Post Evacuate Collection Set: 25.1ms\n[06:01:13.670][info][gc,phases   ] GC(16)   Other: 6.0ms\n[06:01:13.671][info][gc,heap     ] GC(16) Eden regions: 46-&gt;0(330)\n[06:01:13.673][info][gc,heap     ] GC(16) Survivor regions: 20-&gt;3(9)\n[06:01:13.675][info][gc,heap     ] GC(16) Old regions: 42-&gt;61\n[06:01:13.678][info][gc,heap     ] GC(16) Archive regions: 2-&gt;2\n[06:01:13.681][info][gc,heap     ] GC(16) Humongous regions: 7-&gt;7\n[06:01:13.685][info][gc,metaspace] GC(16) Metaspace: 80929K(81856K)-&gt;80929K(81856K) NonClass: 70613K(71040K)-&gt;70613K(71040K) Class: 10316K(10816K)-&gt;10316K(10816K)\n[06:01:13.689][info][gc          ] GC(16) Pause Young (Normal) (G1 Evacuation Pause) 115M-&gt;71M(594M) 186.642ms\n[06:01:13.691][info][gc,cpu      ] GC(16) User=0.14s Sys=0.10s Real=0.19s\n[06:01:20.646][info][gc,start    ] GC(17) Pause Young (Normal) (G1 Evacuation Pause)\n[06:01:20.648][info][gc,task     ] GC(17) Using 6 workers of 6 for evacuation\n[06:01:20.697][info][gc,phases   ] GC(17)   Pre Evacuate Collection Set: 0.2ms\n[06:01:20.698][info][gc,phases   ] GC(17)   Merge Heap Roots: 3.4ms\n[06:01:20.699][info][gc,phases   ] GC(17)   Evacuate Collection Set: 25.8ms\n[06:01:20.700][info][gc,phases   ] GC(17)   Post Evacuate Collection Set: 17.2ms\n[06:01:20.701][info][gc,phases   ] GC(17)   Other: 3.7ms\n[06:01:20.701][info][gc,heap     ] GC(17) Eden regions: 330-&gt;0(349)\n[06:01:20.703][info][gc,heap     ] GC(17) Survivor regions: 3-&gt;7(42)\n[06:01:20.703][info][gc,heap     ] GC(17) Old regions: 61-&gt;61\n[06:01:20.704][info][gc,heap     ] GC(17) Archive regions: 2-&gt;2\n[06:01:20.704][info][gc,heap     ] GC(17) Humongous regions: 7-&gt;7\n[06:01:20.705][info][gc,metaspace] GC(17) Metaspace: 86881K(87808K)-&gt;86881K(87808K) NonClass: 75830K(76288K)-&gt;75830K(76288K) Class: 11050K(11520K)-&gt;11050K(11520K)\n[06:01:20.707][info][gc          ] GC(17) Pause Young (Normal) (G1 Evacuation Pause) 401M-&gt;74M(594M) 60.350ms\n[06:01:20.708][info][gc,cpu      ] GC(17) User=0.07s Sys=0.09s Real=0.07s\n[06:01:28.403][info][gc,start    ] GC(18) Pause Young (Normal) (G1 Evacuation Pause)\n[06:01:28.404][info][gc,task     ] GC(18) Using 6 workers of 6 for evacuation\n[06:01:28.458][info][gc,phases   ] GC(18)   Pre Evacuate Collection Set: 1.8ms\n[06:01:28.459][info][gc,phases   ] GC(18)   Merge Heap Roots: 1.5ms\n[06:01:28.460][info][gc,phases   ] GC(18)   Evacuate Collection Set: 39.3ms\n[06:01:28.462][info][gc,phases   ] GC(18)   Post Evacuate Collection Set: 10.1ms\n[06:01:28.463][info][gc,phases   ] GC(18)   Other: 2.8ms\n[06:01:28.463][info][gc,heap     ] GC(18) Eden regions: 349-&gt;0(144)\n[06:01:28.466][info][gc,heap     ] GC(18) Survivor regions: 7-&gt;39(45)\n[06:01:28.466][info][gc,heap     ] GC(18) Old regions: 61-&gt;61\n[06:01:28.468][info][gc,heap     ] GC(18) Archive regions: 2-&gt;2\n[06:01:28.468][info][gc,heap     ] GC(18) Humongous regions: 11-&gt;11\n[06:01:28.468][info][gc,metaspace] GC(18) Metaspace: 97955K(98944K)-&gt;97955K(98944K) NonClass: 85583K(86016K)-&gt;85583K(86016K) Class: 12371K(12928K)-&gt;12371K(12928K)\n[06:01:28.468][info][gc          ] GC(18) Pause Young (Normal) (G1 Evacuation Pause) 427M-&gt;110M(594M) 65.566ms\n[06:01:28.469][info][gc,cpu      ] GC(18) User=0.18s Sys=0.08s Real=0.07s\n[06:01:30.412][info][gc,start    ] GC(19) Pause Young (Normal) (G1 Evacuation Pause)\n[06:01:30.412][info][gc,task     ] GC(19) Using 6 workers of 6 for evacuation\n[06:01:30.478][info][gc,phases   ] GC(19)   Pre Evacuate Collection Set: 1.0ms\n[06:01:30.479][info][gc,phases   ] GC(19)   Merge Heap Roots: 1.4ms\n[06:01:30.480][info][gc,phases   ] GC(19)   Evacuate Collection Set: 54.0ms\n[06:01:30.480][info][gc,phases   ] GC(19)   Post Evacuate Collection Set: 8.6ms\n[06:01:30.481][info][gc,phases   ] GC(19)   Other: 1.8ms\n[06:01:30.481][info][gc,heap     ] GC(19) Eden regions: 144-&gt;0(348)\n[06:01:30.481][info][gc,heap     ] GC(19) Survivor regions: 39-&gt;8(23)\n[06:01:30.481][info][gc,heap     ] GC(19) Old regions: 61-&gt;99\n[06:01:30.481][info][gc,heap     ] GC(19) Archive regions: 2-&gt;2\n[06:01:30.484][info][gc,heap     ] GC(19) Humongous regions: 13-&gt;11\n[06:01:30.485][info][gc,metaspace] GC(19) Metaspace: 104263K(105216K)-&gt;104263K(105216K) NonClass: 91248K(91712K)-&gt;91248K(91712K) Class: 13015K(13504K)-&gt;13015K(13504K)\n[06:01:30.487][info][gc          ] GC(19) Pause Young (Normal) (G1 Evacuation Pause) 256M-&gt;117M(594M) 74.925ms\n[06:01:30.487][info][gc,cpu      ] GC(19) User=0.09s Sys=0.10s Real=0.08s\n[06:01:35.850][info][gc,start    ] GC(20) Pause Young (Concurrent Start) (Metadata GC Threshold)\n[06:01:35.851][info][gc,task     ] GC(20) Using 6 workers of 6 for evacuation\n[06:01:35.897][info][gc,phases   ] GC(20)   Pre Evacuate Collection Set: 1.0ms\n[06:01:35.898][info][gc,phases   ] GC(20)   Merge Heap Roots: 2.2ms\n[06:01:35.898][info][gc,phases   ] GC(20)   Evacuate Collection Set: 31.2ms\n[06:01:35.899][info][gc,phases   ] GC(20)   Post Evacuate Collection Set: 9.2ms\n[06:01:35.900][info][gc,phases   ] GC(20)   Other: 2.8ms\n[06:01:35.902][info][gc,heap     ] GC(20) Eden regions: 335-&gt;0(343)\n[06:01:35.903][info][gc,heap     ] GC(20) Survivor regions: 8-&gt;13(45)\n[06:01:35.903][info][gc,heap     ] GC(20) Old regions: 99-&gt;99\n[06:01:35.905][info][gc,heap     ] GC(20) Archive regions: 2-&gt;2\n[06:01:35.907][info][gc,heap     ] GC(20) Humongous regions: 11-&gt;11\n[06:01:35.907][info][gc,metaspace] GC(20) Metaspace: 111583K(112640K)-&gt;111583K(112640K) NonClass: 97634K(98176K)-&gt;97634K(98176K) Class: 13949K(14464K)-&gt;13949K(14464K)\n[06:01:35.911][info][gc          ] GC(20) Pause Young (Concurrent Start) (Metadata GC Threshold) 452M-&gt;122M(594M) 60.235ms\n[06:01:35.912][info][gc,cpu      ] GC(20) User=0.06s Sys=0.13s Real=0.06s\n[06:01:35.913][info][gc          ] GC(21) Concurrent Mark Cycle\n[06:01:35.913][info][gc,marking  ] GC(21) Concurrent Clear Claimed Marks\n[06:01:35.915][info][gc,marking  ] GC(21) Concurrent Clear Claimed Marks 1.447ms\n[06:01:35.916][info][gc,marking  ] GC(21) Concurrent Scan Root Regions\n[06:01:35.954][info][gc,marking  ] GC(21) Concurrent Scan Root Regions 38.159ms\n[06:01:35.959][info][gc,marking  ] GC(21) Concurrent Mark\n[06:01:35.961][info][gc,marking  ] GC(21) Concurrent Mark From Roots\n[06:01:35.961][info][gc,task     ] GC(21) Using 2 workers of 2 for marking\n[06:01:36.052][info][gc,marking  ] GC(21) Concurrent Mark From Roots 91.284ms\n[06:01:36.053][info][gc,marking  ] GC(21) Concurrent Preclean\n[06:01:36.056][info][gc,marking  ] GC(21) Concurrent Preclean 3.797ms\n[06:01:36.060][info][gc,start    ] GC(21) Pause Remark\n[06:01:36.101][info][gc          ] GC(21) Pause Remark 127M-&gt;126M(594M) 40.502ms\n[06:01:36.101][info][gc,cpu      ] GC(21) User=0.09s Sys=0.05s Real=0.04s\n[06:01:36.108][info][gc,marking  ] GC(21) Concurrent Mark 148.167ms\n[06:01:36.111][info][gc,marking  ] GC(21) Concurrent Rebuild Remembered Sets\n[06:01:36.237][info][gc,marking  ] GC(21) Concurrent Rebuild Remembered Sets 126.496ms\n[06:01:36.254][info][gc,start    ] GC(21) Pause Cleanup\n[06:01:36.256][info][gc          ] GC(21) Pause Cleanup 128M-&gt;128M(594M) 2.162ms\n[06:01:36.256][info][gc,cpu      ] GC(21) User=0.00s Sys=0.00s Real=0.00s\n[06:01:36.259][info][gc,marking  ] GC(21) Concurrent Cleanup for Next Mark\n[06:01:36.264][info][gc,marking  ] GC(21) Concurrent Cleanup for Next Mark 5.166ms\n[06:01:36.266][info][gc          ] GC(21) Concurrent Mark Cycle 352.545ms\n[06:01:43.740][info][gc,start    ] GC(22) Pause Young (Prepare Mixed) (G1 Evacuation Pause)\n[06:01:43.741][info][gc,task     ] GC(22) Using 6 workers of 6 for evacuation\n[06:01:43.844][info][gc,phases   ] GC(22)   Pre Evacuate Collection Set: 0.5ms\n[06:01:43.845][info][gc,phases   ] GC(22)   Merge Heap Roots: 4.1ms\n[06:01:43.847][info][gc,phases   ] GC(22)   Evacuate Collection Set: 61.2ms\n[06:01:43.849][info][gc,phases   ] GC(22)   Post Evacuate Collection Set: 30.9ms\n[06:01:43.850][info][gc,phases   ] GC(22)   Other: 7.4ms\n[06:01:43.851][info][gc,heap     ] GC(22) Eden regions: 343-&gt;0(8)\n[06:01:43.852][info][gc,heap     ] GC(22) Survivor regions: 13-&gt;21(45)\n[06:01:43.852][info][gc,heap     ] GC(22) Old regions: 99-&gt;99\n[06:01:43.852][info][gc,heap     ] GC(22) Archive regions: 2-&gt;2\n[06:01:43.853][info][gc,heap     ] GC(22) Humongous regions: 10-&gt;10\n[06:01:43.854][info][gc,metaspace] GC(22) Metaspace: 119561K(120704K)-&gt;119561K(120704K) NonClass: 104432K(104960K)-&gt;104432K(104960K) Class: 15128K(15744K)-&gt;15128K(15744K)\n[06:01:43.858][info][gc          ] GC(22) Pause Young (Prepare Mixed) (G1 Evacuation Pause) 464M-&gt;129M(594M) 118.686ms\n[06:01:43.860][info][gc,cpu      ] GC(22) User=0.07s Sys=0.13s Real=0.12s\n[06:01:44.034][info][gc,start    ] GC(23) Pause Young (Mixed) (G1 Evacuation Pause)\n[06:01:44.037][info][gc,task     ] GC(23) Using 6 workers of 6 for evacuation\n[06:01:44.150][info][gc,phases   ] GC(23)   Pre Evacuate Collection Set: 0.5ms\n[06:01:44.151][info][gc,phases   ] GC(23)   Merge Heap Roots: 2.5ms\n[06:01:44.152][info][gc,phases   ] GC(23)   Evacuate Collection Set: 85.8ms\n[06:01:44.153][info][gc,phases   ] GC(23)   Post Evacuate Collection Set: 20.3ms\n[06:01:44.155][info][gc,phases   ] GC(23)   Other: 7.5ms\n[06:01:44.155][info][gc,heap     ] GC(23) Eden regions: 8-&gt;0(354)\n[06:01:44.157][info][gc,heap     ] GC(23) Survivor regions: 21-&gt;2(4)\n[06:01:44.160][info][gc,heap     ] GC(23) Old regions: 99-&gt;117\n[06:01:44.160][info][gc,heap     ] GC(23) Archive regions: 2-&gt;2\n[06:01:44.173][info][gc,heap     ] GC(23) Humongous regions: 10-&gt;10\n[06:01:44.173][info][gc,metaspace] GC(23) Metaspace: 119798K(120896K)-&gt;119798K(120896K) NonClass: 104634K(105152K)-&gt;104634K(105152K) Class: 15164K(15744K)-&gt;15164K(15744K)\n[06:01:44.179][info][gc          ] GC(23) Pause Young (Mixed) (G1 Evacuation Pause) 137M-&gt;129M(594M) 145.364ms\n[06:01:44.184][info][gc,cpu      ] GC(23) User=0.04s Sys=0.08s Real=0.15s\n[06:02:06.822][info][gc,start    ] GC(24) Pause Young (Normal) (G1 Evacuation Pause)\n[06:02:06.822][info][gc,task     ] GC(24) Using 6 workers of 6 for evacuation\n[06:02:06.969][info][gc,phases   ] GC(24)   Pre Evacuate Collection Set: 0.4ms\n[06:02:06.970][info][gc,phases   ] GC(24)   Merge Heap Roots: 1.4ms\n[06:02:06.970][info][gc,phases   ] GC(24)   Evacuate Collection Set: 124.4ms\n[06:02:06.970][info][gc,phases   ] GC(24)   Post Evacuate Collection Set: 18.6ms\n[06:02:06.970][info][gc,phases   ] GC(24)   Other: 2.7ms\n[06:02:06.971][info][gc,heap     ] GC(24) Eden regions: 354-&gt;0(153)\n[06:02:06.972][info][gc,heap     ] GC(24) Survivor regions: 2-&gt;37(45)\n[06:02:06.976][info][gc,heap     ] GC(24) Old regions: 117-&gt;117\n[06:02:06.976][info][gc,heap     ] GC(24) Archive regions: 2-&gt;2\n[06:02:06.980][info][gc,heap     ] GC(24) Humongous regions: 38-&gt;33\n[06:02:06.983][info][gc,metaspace] GC(24) Metaspace: 126433K(127552K)-&gt;126433K(127552K) NonClass: 110590K(111104K)-&gt;110590K(111104K) Class: 15842K(16448K)-&gt;15842K(16448K)\n[06:02:06.985][info][gc          ] GC(24) Pause Young (Normal) (G1 Evacuation Pause) 511M-&gt;187M(594M) 162.976ms\n[06:02:06.985][info][gc,cpu      ] GC(24) User=0.24s Sys=0.19s Real=0.16s\n[06:02:07.219][info][gc,start    ] GC(25) Pause Young (Concurrent Start) (G1 Humongous Allocation)\n[06:02:07.220][info][gc,task     ] GC(25) Using 6 workers of 6 for evacuation\n[06:02:07.427][info][gc,mmu      ] GC(25) MMU target violated: 201.0ms (200.0ms/201.0ms)\n[06:02:07.428][info][gc,phases   ] GC(25)   Pre Evacuate Collection Set: 0.3ms\n[06:02:07.430][info][gc,phases   ] GC(25)   Merge Heap Roots: 1.0ms\n[06:02:07.430][info][gc,phases   ] GC(25)   Evacuate Collection Set: 197.2ms\n[06:02:07.431][info][gc,phases   ] GC(25)   Post Evacuate Collection Set: 6.4ms\n[06:02:07.433][info][gc,phases   ] GC(25)   Other: 4.2ms\n[06:02:07.433][info][gc,heap     ] GC(25) Eden regions: 122-&gt;0(5)\n[06:02:07.434][info][gc,heap     ] GC(25) Survivor regions: 37-&gt;24(24)\n[06:02:07.435][info][gc,heap     ] GC(25) Old regions: 117-&gt;250\n[06:02:07.436][info][gc,heap     ] GC(25) Archive regions: 2-&gt;2\n[06:02:07.436][info][gc,heap     ] GC(25) Humongous regions: 120-&gt;120\n[06:02:07.441][info][gc,metaspace] GC(25) Metaspace: 126443K(127552K)-&gt;126443K(127552K) NonClass: 110600K(111104K)-&gt;110600K(111104K) Class: 15843K(16448K)-&gt;15843K(16448K)\n[06:02:07.445][info][gc          ] GC(25) Pause Young (Concurrent Start) (G1 Humongous Allocation) 395M-&gt;394M(594M) 225.136ms\n[06:02:07.445][info][gc,cpu      ] GC(25) User=0.69s Sys=0.29s Real=0.22s\n[06:02:07.446][info][gc          ] GC(26) Concurrent Mark Cycle\n[06:02:07.447][info][gc,marking  ] GC(26) Concurrent Clear Claimed Marks\n[06:02:07.448][info][gc,marking  ] GC(26) Concurrent Clear Claimed Marks 0.986ms\n[06:02:07.455][info][gc,marking  ] GC(26) Concurrent Scan Root Regions\n[06:02:07.532][info][gc,marking  ] GC(26) Concurrent Scan Root Regions 77.048ms\n[06:02:07.533][info][gc,marking  ] GC(26) Concurrent Mark\n[06:02:07.532][info][gc,start    ] GC(27) Pause Young (Normal) (G1 Evacuation Pause)\n[06:02:07.534][info][gc,marking  ] GC(26) Concurrent Mark From Roots\n[06:02:07.534][info][gc,task     ] GC(27) Using 6 workers of 6 for evacuation\n[06:02:07.535][info][gc,task     ] GC(26) Using 2 workers of 2 for marking\n[06:02:07.594][info][gc,phases   ] GC(27)   Pre Evacuate Collection Set: 1.5ms\n[06:02:07.594][info][gc,phases   ] GC(27)   Merge Heap Roots: 0.6ms\n[06:02:07.594][info][gc,phases   ] GC(27)   Evacuate Collection Set: 51.6ms\n[06:02:07.595][info][gc,phases   ] GC(27)   Post Evacuate Collection Set: 4.1ms\n[06:02:07.595][info][gc,phases   ] GC(27)   Other: 5.1ms\n[06:02:07.596][info][gc,heap     ] GC(27) Eden regions: 5-&gt;0(25)\n[06:02:07.596][info][gc,heap     ] GC(27) Survivor regions: 24-&gt;4(4)\n[06:02:07.597][info][gc,heap     ] GC(27) Old regions: 250-&gt;278\n[06:02:07.597][info][gc,heap     ] GC(27) Archive regions: 2-&gt;2\n[06:02:07.597][info][gc,heap     ] GC(27) Humongous regions: 173-&gt;173\n[06:02:07.598][info][gc,metaspace] GC(27) Metaspace: 126444K(127552K)-&gt;126444K(127552K) NonClass: 110601K(111104K)-&gt;110601K(111104K) Class: 15843K(16448K)-&gt;15843K(16448K)\n[06:02:07.598][info][gc          ] GC(27) Pause Young (Normal) (G1 Evacuation Pause) 452M-&gt;455M(594M) 66.643ms\n[06:02:07.599][info][gc,cpu      ] GC(27) User=0.19s Sys=0.09s Real=0.07s\n[06:02:07.626][info][gc,start    ] GC(28) Pause Young (Normal) (G1 Evacuation Pause)\n[06:02:07.627][info][gc,task     ] GC(28) Using 6 workers of 6 for evacuation\n[06:02:07.661][info][gc,phases   ] GC(28)   Pre Evacuate Collection Set: 0.5ms\n[06:02:07.661][info][gc,phases   ] GC(28)   Merge Heap Roots: 1.6ms\n[06:02:07.664][info][gc,phases   ] GC(28)   Evacuate Collection Set: 23.0ms\n[06:02:07.666][info][gc,phases   ] GC(28)   Post Evacuate Collection Set: 6.4ms\n[06:02:07.666][info][gc,phases   ] GC(28)   Other: 3.4ms\n[06:02:07.667][info][gc,heap     ] GC(28) Eden regions: 25-&gt;0(25)\n[06:02:07.668][info][gc,heap     ] GC(28) Survivor regions: 4-&gt;4(4)\n[06:02:07.668][info][gc,heap     ] GC(28) Old regions: 278-&gt;303\n[06:02:07.670][info][gc,heap     ] GC(28) Archive regions: 2-&gt;2\n[06:02:07.670][info][gc,heap     ] GC(28) Humongous regions: 173-&gt;173\n[06:02:07.672][info][gc,metaspace] GC(28) Metaspace: 126445K(127552K)-&gt;126445K(127552K) NonClass: 110602K(111104K)-&gt;110602K(111104K) Class: 15843K(16448K)-&gt;15843K(16448K)\n[06:02:07.673][info][gc          ] GC(28) Pause Young (Normal) (G1 Evacuation Pause) 480M-&gt;480M(594M) 47.159ms\n[06:02:07.674][info][gc,cpu      ] GC(28) User=0.10s Sys=0.04s Real=0.04s\n[06:02:07.713][info][gc,start    ] GC(29) Pause Young (Normal) (G1 Evacuation Pause)\n[06:02:07.716][info][gc,task     ] GC(29) Using 6 workers of 6 for evacuation\n[06:02:07.761][info][gc,phases   ] GC(29)   Pre Evacuate Collection Set: 0.7ms\n[06:02:07.762][info][gc,phases   ] GC(29)   Merge Heap Roots: 1.0ms\n[06:02:07.763][info][gc,phases   ] GC(29)   Evacuate Collection Set: 38.6ms\n[06:02:07.764][info][gc,phases   ] GC(29)   Post Evacuate Collection Set: 3.8ms\n[06:02:07.764][info][gc,phases   ] GC(29)   Other: 4.1ms\n[06:02:07.767][info][gc,heap     ] GC(29) Eden regions: 25-&gt;0(25)\n[06:02:07.767][info][gc,heap     ] GC(29) Survivor regions: 4-&gt;4(4)\n[06:02:07.768][info][gc,heap     ] GC(29) Old regions: 303-&gt;329\n[06:02:07.768][info][gc,heap     ] GC(29) Archive regions: 2-&gt;2\n[06:02:07.769][info][gc,heap     ] GC(29) Humongous regions: 173-&gt;173\n[06:02:07.770][info][gc,metaspace] GC(29) Metaspace: 126447K(127552K)-&gt;126447K(127552K) NonClass: 110604K(111104K)-&gt;110604K(111104K) Class: 15843K(16448K)-&gt;15843K(16448K)\n[06:02:07.771][info][gc          ] GC(29) Pause Young (Normal) (G1 Evacuation Pause) 505M-&gt;506M(594M) 57.670ms\n[06:02:07.771][info][gc,cpu      ] GC(29) User=0.09s Sys=0.07s Real=0.06s\n[06:02:07.786][info][gc,start    ] GC(30) Pause Young (Normal) (G1 Humongous Allocation)\n[06:02:07.787][info][gc,task     ] GC(30) Using 6 workers of 6 for evacuation\n[06:02:07.809][info][gc,phases   ] GC(30)   Pre Evacuate Collection Set: 0.6ms\n[06:02:07.809][info][gc,phases   ] GC(30)   Merge Heap Roots: 1.4ms\n[06:02:07.809][info][gc,phases   ] GC(30)   Evacuate Collection Set: 13.7ms\n[06:02:07.810][info][gc,phases   ] GC(30)   Post Evacuate Collection Set: 3.0ms\n[06:02:07.811][info][gc,phases   ] GC(30)   Other: 4.9ms\n[06:02:07.811][info][gc,heap     ] GC(30) Eden regions: 16-&gt;0(25)\n[06:02:07.812][info][gc,heap     ] GC(30) Survivor regions: 4-&gt;4(4)\n[06:02:07.812][info][gc,heap     ] GC(30) Old regions: 329-&gt;346\n[06:02:07.813][info][gc,heap     ] GC(30) Archive regions: 2-&gt;2\n[06:02:07.815][info][gc,heap     ] GC(30) Humongous regions: 173-&gt;173\n[06:02:07.816][info][gc,metaspace] GC(30) Metaspace: 126450K(127552K)-&gt;126450K(127552K) NonClass: 110606K(111104K)-&gt;110606K(111104K) Class: 15843K(16448K)-&gt;15843K(16448K)\n[06:02:07.817][info][gc          ] GC(30) Pause Young (Normal) (G1 Humongous Allocation) 522M-&gt;523M(594M) 32.264ms\n[06:02:07.819][info][gc,cpu      ] GC(30) User=0.05s Sys=0.03s Real=0.04s\n[06:02:07.819][info][gc,ergo     ] Attempting full compaction\n[06:02:07.821][info][gc,task     ] GC(31) Using 6 workers of 6 for full compaction\n[06:02:07.822][info][gc,start    ] GC(31) Pause Full (G1 Compaction Pause)\n[06:02:07.824][info][gc,phases,start] GC(31) Phase 1: Mark live objects\n[06:02:08.020][info][gc,phases      ] GC(31) Phase 1: Mark live objects 196.222ms\n[06:02:08.021][info][gc,phases,start] GC(31) Phase 2: Prepare for compaction\n[06:02:08.038][info][gc,phases      ] GC(31) Phase 2: Prepare for compaction 16.989ms\n[06:02:08.040][info][gc,phases,start] GC(31) Phase 3: Adjust pointers\n[06:02:08.111][info][gc,phases      ] GC(31) Phase 3: Adjust pointers 70.781ms\n[06:02:08.112][info][gc,phases,start] GC(31) Phase 4: Compact heap\n[06:02:08.136][info][gc,phases      ] GC(31) Phase 4: Compact heap 24.822ms\n[06:02:08.158][info][gc,heap        ] GC(31) Eden regions: 0-&gt;0(68)\n[06:02:08.159][info][gc,heap        ] GC(31) Survivor regions: 4-&gt;0(4)\n[06:02:08.161][info][gc,heap        ] GC(31) Old regions: 346-&gt;294\n[06:02:08.163][info][gc,heap        ] GC(31) Archive regions: 2-&gt;2\n[06:02:08.164][info][gc,heap        ] GC(31) Humongous regions: 173-&gt;59\n[06:02:08.164][info][gc,metaspace   ] GC(31) Metaspace: 126450K(127552K)-&gt;125580K(127552K) NonClass: 110606K(111104K)-&gt;109899K(111104K) Class: 15843K(16448K)-&gt;15681K(16448K)\n[06:02:08.166][info][gc             ] GC(31) Pause Full (G1 Compaction Pause) 523M-&gt;351M(594M) 343.997ms\n[06:02:08.168][info][gc,cpu         ] GC(31) User=1.19s Sys=0.11s Real=0.35s\n[06:02:08.169][info][gc,ergo        ] Attempting maximum full compaction clearing soft references\n[06:02:08.170][info][gc,task        ] GC(32) Using 6 workers of 6 for full compaction\n[06:02:08.171][info][gc,start       ] GC(32) Pause Full (G1 Compaction Pause)\n[06:02:08.172][info][gc,phases,start] GC(32) Phase 1: Mark live objects\n[06:02:08.382][info][gc,phases      ] GC(32) Phase 1: Mark live objects 209.907ms\n[06:02:08.384][info][gc,phases,start] GC(32) Phase 2: Prepare for compaction\n[06:02:08.415][info][gc,phases      ] GC(32) Phase 2: Prepare for compaction 31.599ms\n[06:02:08.416][info][gc,phases,start] GC(32) Phase 3: Adjust pointers\n[06:02:08.476][info][gc,phases      ] GC(32) Phase 3: Adjust pointers 59.899ms\n[06:02:08.479][info][gc,phases,start] GC(32) Phase 4: Compact heap\n[06:02:08.574][info][gc,phases      ] GC(32) Phase 4: Compact heap 95.300ms\n[06:02:08.589][info][gc,heap        ] GC(32) Eden regions: 0-&gt;0(72)\n[06:02:08.590][info][gc,heap        ] GC(32) Survivor regions: 0-&gt;0(4)\n[06:02:08.592][info][gc,heap        ] GC(32) Old regions: 294-&gt;286\n[06:02:08.592][info][gc,heap        ] GC(32) Archive regions: 2-&gt;2\n[06:02:08.594][info][gc,heap        ] GC(32) Humongous regions: 59-&gt;59\n[06:02:08.595][info][gc,metaspace   ] GC(32) Metaspace: 125580K(127552K)-&gt;124605K(127488K) NonClass: 109899K(111104K)-&gt;109098K(111040K) Class: 15681K(16448K)-&gt;15506K(16448K)\n[06:02:08.596][info][gc             ] GC(32) Pause Full (G1 Compaction Pause) 351M-&gt;343M(594M) 424.729ms\n[06:02:08.598][info][gc,cpu         ] GC(32) User=1.51s Sys=0.15s Real=0.43s\n[06:02:08.602][info][gc,marking     ] GC(26) Concurrent Mark From Roots 1068.450ms\n[06:02:08.603][info][gc,marking     ] GC(26) Concurrent Mark Abort\n[06:02:08.605][info][gc             ] GC(26) Concurrent Mark Cycle 1158.585ms\n</code></pre>\n<p>Can some one please explan why this happened, why the jvm not used all the available heap space?</p>\n"},{"tags":["java","spring-boot"],"comments":[{"owner":{"user_id":619830,"display_name":"ch4mp"},"edited":false,"comment_id":133071639,"body":"What are your dependencies? Did you read the migration guide? <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Migration-Guide\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/wiki/&hellip;</a>"},{"owner":{"user_id":21185196,"display_name":"Davis"},"edited":false,"comment_id":133160725,"body":"&lt;parent&gt; \t\t&lt;groupId&gt;org.springframework.boot&lt;/groupId&gt; \t\t&lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt; \t\t&lt;version&gt;3.0.2&lt;/version&gt; \t\t&lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt; \t&lt;/parent&gt;"},{"owner":{"user_id":619830,"display_name":"ch4mp"},"edited":false,"comment_id":133161797,"body":"This is not all dependencies, this a parent. Also, you need to provide your conf and the code throwing that if you expect an answer. Edit your question."},{"owner":{"user_id":8041003,"display_name":"John Williams"},"edited":false,"comment_id":133339352,"body":"Looks like spring-security-oauth2-client version is not Spring Boot 3 compatible  - directly or via spring-boot-starter-oauth2-client. Needs to be v6. If you post your entire pom file we can investigate."}],"answers":[{"owner":{"user_id":16785907,"display_name":"Mihail2048"},"up_vote_count":2,"is_accepted":false,"creation_date":1677480609,"answer_id":75577453,"body":"<p>You have made a major version jump, from <code>spring-boot</code> 2.X to <code>spring-boot</code> 3.X - you <em>must</em> expect that there will be incompatible changes. Now this offending method has changed the return value, <a href=\"https://github.com/spring-projects/spring-framework/blob/main/spring-web/src/main/java/org/springframework/http/client/ClientHttpResponse.java\" rel=\"nofollow noreferrer\">check the source</a>. I think the problem is clear - in JVM bytecode you have a versions of the method with different signatures than you expect (Note, that for JVM <a href=\"https://stackoverflow.com/questions/1134054/changing-return-type-of-method-gives-java-lang-nosuchmethoderror\">return type is a part of the invoke instruction and is a part of signature</a>):</p>\n<ol>\n<li><p>You have different <code>spring-web</code> JARs during your compilation and runtime. It can happen, there is even a concept in CS called <a href=\"https://en.wikipedia.org/wiki/Dependency_hell\" rel=\"nofollow noreferrer\">dependencies hell</a>. Because this return types change is incompatible so your code shouldn't even compile, but still you was able to do so. You need to ensure that your compilation classpath has the same <code>spring-web</code> jar as runtime classpath.</p>\n</li>\n<li><p>You have code that is already compiled with old <code>spring-web</code> verison, and now you are launching a jar providing a classpath with newer version of <code>spring-web</code>. It is unlikely, but still, worth mentioning.</p>\n</li>\n</ol>\n<p>Finally, there are <a href=\"https://web.archive.org/web/20210418055531/http://thegordian.blogspot.com/2014/12/when-you-change-method-return-type.html\" rel=\"nofollow noreferrer\">some good articles</a> that illustrate the problem that you encountered. Consider taking a look.</p>\n"},{"owner":{"user_id":7038893,"display_name":"David G."},"up_vote_count":0,"is_accepted":false,"creation_date":1681977227,"answer_id":76061731,"body":"<p>I was in the same situation, and needed code that could work with both Spring Boot 2 and 3.\nIf that's your case, the simplest solution is to use instead the (now deprecated) method <a href=\"https://docs.spring.io/spring-framework/docs/current/javadoc-api/org/springframework/http/ResponseEntity.html#getStatusCodeValue()\" rel=\"nofollow noreferrer\">getStatusCodeValue()</a> this will work the same in spring-web from 4.x to 6.x (it returns an int value instead of a String, but you should be able to manage that).</p>\n<p>Mind you, there have been lots of other incompatible changes (a ton more than there were between spring-web 4.x and 5.x) so you might still encounter problems...</p>\n"}],"owner":{"user_id":21185196,"display_name":"Davis"},"view_count":1623,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1676011782,"question_id":75407765,"body":"<p>I have updated spring boot version from 2.7.5 to 3.0.2 . I have updated Jakarta too . Only when trying to fatch url it is getting following error:</p>\n<pre><code>java.lang.NoSuchMethodError: 'org.springframework.http.HttpStatus org.springframework.http.client.ClientHttpResponse.getStatusCode()'\nat org.springframework.security.oauth2.client.http.OAuth2ErrorHandler.hasError(OAuth2ErrorHandler.java:76) \\~\\[spring-security-oauth2-2.0.17.RELEASE.jar:na\\]\nat org.springframework.web.client.RestTemplate.handleResponse(RestTemplate.java:904) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.springframework.web.client.RestTemplate.doExecute(RestTemplate.java:864) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.springframework.web.client.RestTemplate.execute(RestTemplate.java:804) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.springframework.web.client.RestTemplate.exchange(RestTemplate.java:665) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat com.mbusa.gm.repository.OneApiRepository.getVehicleFromSWT(OneApiRepository.java:178) \\~\\[classes/:na\\]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\~\\[na:na\\]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) \\~\\[na:na\\]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) \\~\\[na:na\\]\nat java.base/java.lang.reflect.Method.invoke(Method.java:568) \\~\\[na:na\\]\nat org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343) \\~\\[spring-aop-6.0.4.jar:6.0.4\\]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196) \\~\\[spring-aop-6.0.4.jar:6.0.4\\]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163) \\~\\[spring-aop-6.0.4.jar:6.0.4\\]\nat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752) \\~\\[spring-aop-6.0.4.jar:6.0.4\\]\nat org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) \\~\\[spring-tx-6.0.4.jar:6.0.4\\]\nat org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) \\~\\[spring-aop-6.0.4.jar:6.0.4\\]\nat org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752) \\~\\[spring-aop-6.0.4.jar:6.0.4\\]\nat org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703) \\~\\[spring-aop-6.0.4.jar:6.0.4\\]\nat com.mbusa.gm.repository.OneApiRepository$$SpringCGLIB$$0.getVehicleFromSWT(\\&lt;generated\\&gt;) \\~\\[classes/:na\\]\nat com.mbusa.gm.service.GreyMarketService.addVehicleExport(GreyMarketService.java:47) \\~\\[classes/:na\\]\nat com.mbusa.gm.controller.GreyMarketController.addVehicleExport(GreyMarketController.java:98) \\~\\[classes/:na\\]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) \\~\\[na:na\\]\nat java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) \\~\\[na:na\\]\nat java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) \\~\\[na:na\\]\nat java.base/java.lang.reflect.Method.invoke(Method.java:568) \\~\\[na:na\\]\nat org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) \\~\\[spring-webmvc-6.0.4.jar:6.0.4\\]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) \\~\\[spring-webmvc-6.0.4.jar:6.0.4\\]\nat org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) \\~\\[spring-webmvc-6.0.4.jar:6.0.4\\]\nat org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) \\~\\[spring-webmvc-6.0.4.jar:6.0.4\\]\nat org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080) \\~\\[spring-webmvc-6.0.4.jar:6.0.4\\]\nat org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973) \\~\\[spring-webmvc-6.0.4.jar:6.0.4\\]\nat org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) \\~\\[spring-webmvc-6.0.4.jar:6.0.4\\]\nat org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) \\~\\[spring-webmvc-6.0.4.jar:6.0.4\\]\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731) \\~\\[tomcat-embed-core-10.1.5.jar:6.0\\]\nat org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) \\~\\[spring-webmvc-6.0.4.jar:6.0.4\\]\nat jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814) \\~\\[tomcat-embed-core-10.1.5.jar:6.0\\]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) \\~\\[tomcat-embed-websocket-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) \\~\\[spring-web-6.0.4.jar:6.0.4\\]\nat org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) \\~\\[tomcat-embed-core-10.1.5.jar:10.1.5\\]\nat java.base/java.lang.Thread.run(Thread.java:833) \\~\\[na:na\\]\n</code></pre>\n<p>What should i update or change for this error?</p>\n"},{"tags":["java","hibernate","jpa","many-to-many","entity-relationship"],"comments":[{"owner":{"user_id":7109162,"display_name":"XtremeBaumer"},"edited":false,"comment_id":133033472,"body":"<code>user_category</code> has an actual FK on the <code>category_id</code> in the database it seems. Is the same the case for the <code>user_id</code>?"},{"owner":{"user_id":19580540,"display_name":"coder001"},"edited":false,"comment_id":133033611,"body":"I have added a screenshot for better understanding. user_category table holds the P.K. of user and category for Many to Many relationship."},{"owner":{"user_id":7109162,"display_name":"XtremeBaumer"},"edited":false,"comment_id":133034031,"body":"The screenshot does not show any constraints? Or at least not that I can tell"}],"answers":[{"owner":{"user_id":412446,"display_name":"Christian Beikov"},"up_vote_count":1,"is_accepted":false,"creation_date":1676020616,"answer_id":75409026,"body":"<p>Changing the <code>Category#users</code> collections has no effect on the relationship, because that is not the owning side of it. The owning side is the one which has no use of <code>mappedBy</code>.</p>\n<p>So if you want to remove a category, you will first have to remove the category from every <code>User#categories</code> collection.</p>\n<p>Maybe it's easier if you don't map that relationship as a <code>@ManyToMany</code> association and instead introduce an entity for the join table. Then you can use <code>@OneToMany</code> on both sides with <code>DELETE</code> cascading.</p>\n"},{"owner":{"user_id":6295381,"display_name":"AlbertOu"},"up_vote_count":1,"is_accepted":false,"creation_date":1682338793,"answer_id":76091806,"body":"<p>your entity Category should :</p>\n<ol>\n<li>remove all association from its Users;</li>\n<li>override hashCode() and equals() functions properly;</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>class Category{\n    \n    @ManyToMany(mappedBy = &quot;categories&quot;, ...)\n    Set&lt;User&gt; users = new HashSet&lt;&gt;();\n\n    @PreRemove\n    public void removeUsers() {\n        users.forEach(user-&gt;{\n            user.getCategories().removeIf(e-&gt;e.equals(this));\n        });\n        \n    }\n    \n    @Override\n    public boolean equals(Object o) {\n        if (this == o) return true;\n        if (!(o instanceof Category)) return false;\n        Category category = (Category) o;\n        return getId() != null &amp;&amp; getId().equals(category.getId());\n    }\n\n    @Override\n    public int hashCode() {\n        return Objects.hash(Category.class);\n    }\n}\n</code></pre>\n<p>it is suggested to put the deletion inside transaction, or otherwise you may end up with Exception like &quot;Multiple representations of the same entity&quot;</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Transactional(propagation = Propagation.REQUIRED)\nvoid deleteCategory(Long id) {\n    Category category = categoryRepository.findById(id);\n    categoryRepository.delete(category);\n    log.info(&quot;deleted --&gt; {}&quot;, category);\n}\n</code></pre>\n"}],"owner":{"user_id":19580540,"display_name":"coder001"},"view_count":74,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1675924231,"question_id":75394989,"body":"<p>I am working on a Spring Boot Project in which I have used a <strong>Many TO Many</strong> relationship between two entities- <strong>User</strong> and <strong>Category</strong>.<br />\n<strong>For User-</strong></p>\n<pre><code>//Set of categories a user is following\n    @ManyToMany(cascade = {CascadeType.DETACH,CascadeType.MERGE,CascadeType.PERSIST, CascadeType.REFRESH}, fetch = FetchType.EAGER) \n    @JoinTable(name = &quot;user_category&quot;, \n            joinColumns = @JoinColumn(\n                    name = &quot;user_id&quot;,              \n                    referencedColumnName = &quot;id&quot;),          \n            inverseJoinColumns = @JoinColumn(                \n                    name = &quot;category_id&quot;,\n                    referencedColumnName = &quot;categoryId&quot;))\n    private Set&lt;Category&gt; categories=new HashSet&lt;&gt;();\n</code></pre>\n<p><strong>For Category-</strong></p>\n<pre><code>// set of users who follow the category\n    @ManyToMany(mappedBy = &quot;categories&quot;,cascade={CascadeType.DETACH, CascadeType.MERGE, CascadeType.PERSIST, CascadeType.REFRESH})\n    Set&lt;User&gt; users = new HashSet&lt;&gt;();\n</code></pre>\n<p><strong>What I want-</strong><br />\nWhen I delete a <strong>User</strong> only user should be deleted and not the <strong>Category</strong>.<br />\nWhen I delete a <strong>Category</strong> only category should be deleted and not the <strong>User</strong>.<br />\n<strong>Problem-</strong>\nWhen I delete a <strong>User</strong>, it gets deleted successfully without affecting category. But, when I delete a <strong>Category</strong>, I get an error-</p>\n<pre><code>java.sql.SQLIntegrityConstraintViolationException: Cannot delete or update a parent row: a foreign key constraint fails (`blog_application_database`.`user_category`, CONSTRAINT `FK4x6ipr43cfvhqc3aqda6j8c2l` FOREIGN KEY (`category_id`) REFERENCES `categories` (`category_id`))\n</code></pre>\n<p>Now, to remove the associated users, in the category I use-</p>\n<pre><code> @PreRemove\n    public void removeUsers() {\n        System.out.println(&quot;Removing users for &quot; + this.categoryName + &quot; before deleting&quot;);\n        this.users=null;\n        this.users=new HashSet&lt;&gt;();\n    }\n</code></pre>\n<p>But, the problem is not resolved.</p>\n<ul>\n<li>One approach I came across from several other posts was to manually remove each and every mapping from each user (from user side) but it would be highly inefficient.<br />\nI am adding a screenshot of the db tables-\n<a href=\"https://i.stack.imgur.com/2wGdg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/2wGdg.png\" alt=\"enter image description here\" /></a><br />\nPlease help me understand what is going wrong here and how to resolve it.</li>\n</ul>\n"},{"tags":["java","spring","spring-boot","yaml"],"comments":[{"owner":{"user_id":1440565,"display_name":"Code-Apprentice"},"edited":false,"comment_id":133029024,"body":"Not an answer to your question, but Lists can only hold references (non-primitives). So this wording is redundant in your title."}],"answers":[{"owner":{"user_id":5151202,"display_name":"times29"},"up_vote_count":2,"is_accepted":true,"creation_date":1675931371,"answer_id":75395976,"body":"<p>You should use <a href=\"https://docs.spring.io/spring-boot/docs/current/api/org/springframework/boot/context/properties/ConfigurationProperties.html\" rel=\"nofollow noreferrer\"><code>@ConfigurationProperties</code></a> in this case!</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@ConfigurationProperties(&quot;myservice.api&quot;)\n@Getter\n@Setter\n@Validated\npublic class ApiProperties {\n\n    @NestedConfigurationProperty\n    @NotEmpty\n    private List&lt;@Valid Perm&gt; perms;\n\n    @Getter\n    @Setter\n    public static class Perm {\n\n        @NotBlank\n        private String name;\n\n        @NotBlank\n        private String guid;\n\n        @NotNull\n        @Positive\n        private Integer index;\n\n    }\n\n}\n</code></pre>\n<p>More resources:</p>\n<ul>\n<li><a href=\"https://www.baeldung.com/configuration-properties-in-spring-boot\" rel=\"nofollow noreferrer\">Guide to @ConfigurationProperties in Spring Boot</a> (Baeldung)</li>\n<li><a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/features.html#features.external-config.typesafe-configuration-properties\" rel=\"nofollow noreferrer\">Type-safe Configuration Properties</a> (Spring reference)</li>\n</ul>\n"}],"owner":{"user_id":8507504,"display_name":"Jared"},"view_count":106,"up_vote_count":2,"accepted_answer_id":75395976,"answer_count":1,"score":2,"creation_date":1675895280,"question_id":75392363,"body":"<p>Hi Spring/SpringBoot/Yaml/Java Experts, I want to inject a list of values that belong to the class <code>Perm</code> in @Value</p>\n<p>However, Spring fails to start my application and is throwing the error shown below:</p>\n<p><code>Injection of autowired dependencies failed; nested exception is java.lang.IllegalArgumentException: Could not resolve placeholder 'myservice.api.perms' in value &quot;${myservice.api.perms}&quot;</code></p>\n<p>May I request you to help me as I am new to Spring, Spring Boot, and Yaml</p>\n<pre><code># application.yaml file\n\nmyservice:\n  api:\n    perms:\n      -\n        name: xyz\n        guid: abc\n        index: 0\n</code></pre>\n<pre><code>// Class file that wants to read a List&lt;Perm&gt; from the application.yaml file\n\n@Slf4j\n@Getter\n@Service\n@Accessors(fluent = true)\npublic class MyService {\n\n    @Value(&quot;${myservice.api.perms}&quot;)\n    private List&lt;Perm&gt; perms;\n\n    public List&lt;Perm&gt; getListOfPerms() {\n        return perms;\n    }\n\n    @Getter\n    @Setter\n    @Builder\n    @NoArgsConstructor\n    @AllArgsConstructor\n    public static class Perm {\n\n        @NotBlank\n        private String name;\n\n        @NotBlank\n        private String guid;\n\n        private int index;\n    }\n}\n</code></pre>\n"},{"tags":["java","swing","jscrollpane","springlayout"],"comments":[{"owner":{"user_id":2164365,"display_name":"Abra"},"edited":false,"comment_id":133019915,"body":"Would you consider setting the horizontal <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/scrollpane.html\" rel=\"nofollow noreferrer\">scrollbar</a> policy to <code>HORIZONTAL_SCROLLBAR_ALWAYS</code>?"},{"owner":{"user_id":10791320,"display_name":"MineRickStar"},"edited":false,"comment_id":133020195,"body":"That unfotunately produces the same result."},{"owner":{"user_id":203657,"display_name":"kleopatra"},"edited":false,"comment_id":133020458,"body":"<i>SpringLayout is, however, very low-level and as such you really should only use it with a GUI builder, rather than attempting to code a spring layout manager by hand.</i> from <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/layout/spring.html\" rel=\"nofollow noreferrer\">docs.oracle.com/javase/tutorial/uiswing/layout/spring.html</a>"}],"answers":[{"owner":{"user_id":1831987,"display_name":"VGR"},"up_vote_count":2,"is_accepted":true,"creation_date":1675865988,"answer_id":75387103,"body":"<p>Do not pass negative numbers to <code>putConstraint</code>.</p>\n<p>From <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.desktop/javax/swing/SpringLayout.html#putConstraint(java.lang.String,java.awt.Component,int,java.lang.String,java.awt.Component)\" rel=\"nofollow noreferrer\">the documentation of putConstraint</a>:</p>\n<blockquote>\n<p>Links edge e1 of component c1 to edge e2 of component c2, with a fixed distance between the edges.</p>\n</blockquote>\n<p>The <code>pad</code> value is not an absolute pixel offset, it is the amount of padding (the distance) between the component and the linked edge.  It should always be positive.</p>\n<p>The same javadoc also describes the <code>pad</code> parameter as:</p>\n<blockquote>\n<p><code>pad</code> - the fixed distance between dependent and anchor</p>\n</blockquote>\n<p>SpringLayout is complex, which means it’s easy to make mistakes with it.  You can easily accomplish the same layout with a BorderLayout:</p>\n<pre><code>setLayout(new BorderLayout());\nadd(label, BorderLayout.PAGE_START);\nadd(scrollPane, BorderLayout.CENTER);\nadd(buttonPanel, BorderLayout.PAGE_END);\n\nlabel.setBorder(BorderFactory.createEmptyBorder(0, 0, 10, 0));\nbuttonPanel.setBorder(BorderFactory.createEmptyBorder(10, 0, 0, 0));\nthis.setBorder(BorderFactory.createEmptyBorder(10, 10, 10, 10));\n</code></pre>\n"}],"owner":{"user_id":10791320,"display_name":"MineRickStar"},"view_count":34,"up_vote_count":2,"accepted_answer_id":75387103,"answer_count":1,"score":2,"creation_date":1675865570,"question_id":75387016,"body":"<pre><code>public void createSpringLayout(SpringLayout spring, JLabel label, JScrollPane scrollPane, JPanel buttonPanel) {\n    spring.putConstraint(SpringLayout.NORTH, label, 10, SpringLayout.NORTH, this);\n    spring.putConstraint(SpringLayout.WEST, label, 10, SpringLayout.WEST, this);\n\n    spring.putConstraint(SpringLayout.NORTH, scrollPane, 10, SpringLayout.SOUTH, label);\n    spring.putConstraint(SpringLayout.WEST, scrollPane, 0, SpringLayout.WEST, label);\n    spring.putConstraint(SpringLayout.EAST, scrollPane, -10, SpringLayout.EAST, this);\n\n    spring.putConstraint(SpringLayout.NORTH, buttonPanel, Spring.constant(10, 30, 30), SpringLayout.SOUTH, scrollPane);\n\n    spring.putConstraint(SpringLayout.SOUTH, buttonPanel, -10, SpringLayout.SOUTH, this);\n    spring.putConstraint(SpringLayout.WEST, buttonPanel, 0, SpringLayout.WEST, label);\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/TdiRG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/TdiRG.png\" alt=\"This is what happens\" /></a></p>\n<p>The two Jpanels with all the stuff on them are using the same superclass for better looks.\nHowever as you can see if the contents of the scrollpane are to wide the scrollpane just uses extra space in the bottom to create a horizontal scrollbar.\nEven if I tell the Springlayout that the spring between the scrollpane and the buttonPanel can be between 10 and 30.</p>\n<p>I think that first the SpringLayoutManager is called to layout its components and then the ScrollPane comes along and notices that its displayed Components do not fit in the Viewport and creates a Scrollbar, which the SpringLayoutManager is unaware of.</p>\n<p>I can't find any solution tha tell the ScrollPane beforehand to calculate its needed Size or for it to just dont use more Space than it has from the beginning.</p>\n"},{"tags":["java","spring-boot","routes","apache-camel","spring-camel"],"answers":[{"owner":{"user_id":12555370,"display_name":"Artique"},"up_vote_count":2,"is_accepted":true,"creation_date":1676034182,"answer_id":75411512,"body":"<p>The <code>@Consume</code> annotation in Apache Camel is used to subscribe to a Camel endpoint and consume messages from it. The endpoint can be either a direct endpoint or any other type of endpoint such as a JMS queue or a REST endpoint, depending on your use case.</p>\n<p>The endpoint URI, which is specified in the uri attribute of the <code>@Consume</code> annotation, determines where the messages are consumed from. In your example, <code>direct:products.create.validate.interceptor</code> and <code>direct:listAccountsPostHook</code> are both direct endpoints.</p>\n<p>In Apache Camel, direct endpoints are in-memory endpoints that allow you to send messages directly to another endpoint in the same JVM. The mapping between the endpoint and the method that consumes the messages is done by Camel's routing engine.\nMore on Camel Direct endpoints you can read <a href=\"https://camel.apache.org/components/3.20.x/direct-component.html\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>To understand how the messages are being consumed, you should look at the Camel routes that are defined in your project. In a Spring Boot project, you can define your Camel routes in a <code>RouteBuilder</code> class. This is where you would specify the mapping between the direct endpoint and the method that will consume the messages.</p>\n<p>For example, if you have a <code>RouteBuilder</code> class that looks like this:</p>\n<pre><code>public class MyRouteBuilder extends RouteBuilder {\n  @Override\n  public void configure() {\n    from(&quot;direct:products.create.validate.interceptor&quot;)\n      .to(&quot;bean:myBean?method=executeCreate&quot;);\n  }\n}\n</code></pre>\n<p>In this example, the direct endpoint <code>direct:products.create.validate.interceptor</code> is mapped to the <code>executeCreate</code> method in the <code>myBean</code> bean. The <code>?method=executeCreate</code> part of the to URI tells Camel <strong>to</strong> call the executeCreate method on the myBean bean when a message is received at the endpoint.</p>\n<p>So, in short, you should look for the Camel routes in your project that define the mapping between the endpoint and the method that consumes the messages.</p>\n"}],"owner":{"user_id":7516740,"display_name":"elvis"},"view_count":160,"up_vote_count":2,"accepted_answer_id":75411512,"answer_count":1,"score":2,"creation_date":1675769976,"question_id":75372840,"body":"<p>I'm learning about Apache Camel routes in Spring Boot projects and I have a project that does extension from some endpoints. The endpoints are not in this project, only the extension is done here. The extension is done using @Consume from org.apache.camel in this way:</p>\n<pre><code>@Consume(uri = &quot;direct:products.create.validate.interceptor&quot;)\npublic void executeCreate(RequestWrapper&lt;Product&gt; productWrapper) {\n...\n}\n</code></pre>\n<p>I try to understand how this direct:products.create.validate.interceptor is mapped to an endpoint from another service. Can somebody explain me how this @Consume annotation does the mapping?\nOr another example is this:</p>\n<pre><code>@Consume(uri = &quot;direct:listAccountsPostHook&quot;)\npublic void executeCreate(RequestWrapper&lt;Account&gt; accountWrapper) {\n...\n}\n</code></pre>\n<p>Where should I look to understand how they are mapped? In the controller of the other service? I can't find any example with @Consume. Thank you!</p>\n"},{"tags":["java","openapi","openapi-generator","openapi-generator-maven-plugin"],"answers":[{"owner":{"user_id":9095551,"display_name":"Beppe C"},"up_vote_count":1,"is_accepted":false,"creation_date":1675792256,"answer_id":75377159,"body":"<p>You can implement those customizations by changing the <a href=\"https://openapi-generator.tech/docs/templating/\" rel=\"nofollow noreferrer\">Mustache templates</a></p>\n<p>Fetch the templates of the Java framework (ie spring-boot) you want to use (ie <code>openapi-generator-cli author template -g spring --additional-properties=library=spring-boot -o tmp/mytemplates</code></p>\n<p>Modify the local <code>model.mustache</code> file to import the packages you want (lombok) and <code>pojo.mustache</code> to remove the getters/setters. There might other customisations necessary (each framework templates are different) but this the recommended approach.</p>\n"},{"owner":{"user_id":6860078,"display_name":"tbatch"},"up_vote_count":1,"is_accepted":false,"creation_date":1675800805,"answer_id":75378513,"body":"<p>As @beppe suggested in their <a href=\"https://stackoverflow.com/a/75377159/6860078\">answer</a>, this can easily be done by modifying the mustache template.  However, I highly advice against it.  In doing so, you discard many of the the features included with the model objects created by the generator.  Some of the features you lose are:</p>\n<ul>\n<li>Bean Validation</li>\n<li>Jackson Serialization Library Support</li>\n<li><a href=\"https://github.com/OpenAPITools/openapi-generator/blob/master/docs/generators/java.md#supported-vendor-extensions\" rel=\"nofollow noreferrer\">Support for vendor extensions</a></li>\n</ul>\n<p>By adding the <code>Lombok</code> annotation to the generated files, you are basically ignoring the main point of the generator, which is to generate files that support each other.  You are instead using a generator to call a generator.</p>\n<p>Finally, the amount of customization necessary to make the lombok library work with the mustache files is much more than is really worth it.  Sure, you can add <code>@Data</code> or <code>@Jacksonized</code> to your model, but what about <code>@JsonIgnore</code>?  Do you want to use parameters in your Lombok calls?  Because you can't set the builder classname via <code>@Builder(builderClassName = &quot;EmployeeBuilder&quot;)</code>.  That would be hardcoded.  Instead, you'd have to use mustache parameters, such as <code>@Builder(builderClassName = {{$builderClassName}})</code>, which you'd then have to define elsewhere.  What about <code>@Builder</code> vs <code>@SuperBuilder</code>?  Which one do you use in which situation?  How do you define and template it?</p>\n<p>At this point, you might as well rewrite the entire <code>pojo.mustache</code> to be able to use the lombok annotations.  But, what if you need the old <code>pojo.mustache</code> functionality elsewhere?  Now you need to write a custom generator to determine which mustache to use in which situations.</p>\n<p>It is best to just build the domain models as the <code>openapi-generator</code> intends and use them as they are.  You can add annotations if you need to via vendor extensions such as <code>x-field-extra-annotation</code> and <code>x-class-extra-annotation</code> if you really feel the need to.</p>\n"}],"owner":{"user_id":10309166,"display_name":"nixfuerdiecharts"},"view_count":295,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1675751049,"question_id":75369562,"body":"<p>I am using the openapi-generator-maven-plugin to generate model sources.</p>\n<p>Is there a way to generate them only with fields and without any access methods?\nI want the access methods to be generated via lombok with the additionalModelTypeAnnotations configOption in the maven configuration of the openapi-generator-maven-plugin</p>\n"},{"tags":["java","spring","spring-boot","spring-security","h2"],"answers":[{"owner":{"user_id":1220802,"display_name":"rph"},"up_vote_count":2,"is_accepted":true,"creation_date":1675727203,"answer_id":75367690,"body":"<p>By default, when <code>requestMatchers(WHITE_LIST_URLS)</code> is used, it will fall into the <code>MvcRequestMatcher</code> (<a href=\"https://github.com/spring-projects/spring-security/blob/50bbe88a2e7971155f53a1dabdb37b17c593a06e/config/src/main/java/org/springframework/security/config/annotation/web/AbstractRequestMatcherRegistry.java#L181-L190\" rel=\"nofollow noreferrer\">Reference</a>). The <code>MvcRequestMatcher</code> will only match against the Web MVC DispatcherServlet internal mappings. The H2 Console is not part of the DispatcherServlet by default, but the custom controllers in the application are, hence the difference.</p>\n<p>One option to fix it is by using an <code>AntPathRequestMatcher</code> for H2 Console like so:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class WebSecurityConfig {\n    // some of the original code was omitted for brevity\n\n    private static final String[] WHITE_LIST_URLS = {\n            &quot;/register&quot;,\n            &quot;/api/v1/getUsers&quot;\n    };\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests()\n                .requestMatchers(WHITE_LIST_URLS)\n                .permitAll()\n                .and()\n                .authorizeHttpRequests()\n                .requestMatchers(new AntPathRequestMatcher(&quot;/h2-console/**&quot;))\n                .permitAll();\n        http.csrf().disable();\n\n        return http.build();\n    }\n}\n</code></pre>\n<p>A possible alternative is to use an array of <code>AntPathRequestMatcher</code> instead of an array of <code>String</code> for the whitelist, and keep the security filter as-is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class WebSecurityConfig {\n    // some of the original code was omitted for brevity\n\n    private static final AntPathRequestMatcher[] WHITE_LIST_URLS = {\n            new AntPathRequestMatcher(&quot;/register&quot;),\n            new AntPathRequestMatcher(&quot;/api/v1/getUsers&quot;),\n            new AntPathRequestMatcher(&quot;/h2-console/**&quot;)\n    };\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http.authorizeHttpRequests()\n                .requestMatchers(WHITE_LIST_URLS)\n                .permitAll();\n        http.csrf().disable();\n\n        return http.build();\n    }\n}\n</code></pre>\n<p>Another option is to add a customizer to ignore H2 Console, which should be fine since H2 Console has its own authentication mechanism.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nWebSecurityCustomizer webSecurityCustomizer() {\n    return web -&gt; web.ignoring()\n            .requestMatchers(new AntPathRequestMatcher(&quot;/h2-console/**&quot;));\n}\n</code></pre>\n<p>EDIT 1: It is also necessary to disable CSRF, added to snippets above.</p>\n<p>EDIT 2: Adding an extra option to ignore H2 Console with Spring Boot 3.</p>\n"}],"owner":{"user_id":21160973,"display_name":"SpEcTaCuLaR"},"view_count":483,"up_vote_count":2,"accepted_answer_id":75367690,"answer_count":1,"score":2,"creation_date":1675721873,"question_id":75367159,"body":"<p>So I am trying to learn Spring because I'll need it for a project later on this year. Project is using Spring Boot 3.0.2 and Java 17. I am also using the Spring Security dependency, which means that I'll need to authorize some URL's without using tokens.</p>\n<p>I found a way to do that for all URL's except the H2-console. For some reason, no matter how I write the code, I can't access the H2-console because I'll get 403(Unauthorized) when going to localhost:8080/h2-console.</p>\n<p>Any help on this would be appreciated.</p>\n<p>This is the pom file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;newproject&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;newproject&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>This is the application.properties file:</p>\n<pre><code>#For h2 database\nspring.datasource.url=jdbc:h2:mem:test;DB_CLOSE_DELAY=-1\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=\n\nspring.jpa.generate-ddl=true\nspring.jpa.show-sql=true\nspring.jpa.hibernate.ddl-auto=create-drop\nspring.jpa.properties.hibernate.format_sql=true\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\n\n## H2 specific settings\nspring.h2.console.enabled=true\n</code></pre>\n<p>This is the WebSecurityConfig class:</p>\n<pre><code>package com.example.newproject.configs;\n\nimport org.springframework.context.annotation.Bean;\nimport org.springframework.context.annotation.Configuration;\nimport org.springframework.security.config.annotation.web.builders.HttpSecurity;\nimport org.springframework.security.config.annotation.web.configuration.EnableWebSecurity;\nimport org.springframework.security.crypto.bcrypt.BCryptPasswordEncoder;\nimport org.springframework.security.crypto.password.PasswordEncoder;\nimport org.springframework.security.web.SecurityFilterChain;\n\n@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    private static final String[] WHITE_LIST_URLS = {\n            &quot;/register&quot;,\n            &quot;/api/v1/getUsers&quot;,\n            &quot;/h2-console/**&quot;\n    };\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder(11);\n    }\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        // FIXME: Cant access h2 console\n//        http\n//                .cors()\n//                .and()\n//                .csrf()\n//                .disable()\n//                .authorizeHttpRequests()\n//                .requestMatchers(WHITE_LIST_URLS)\n//                .permitAll();\n//\n        http.authorizeHttpRequests().requestMatchers(WHITE_LIST_URLS).permitAll();\n        return http.build();\n    }\n}\n\n</code></pre>\n<p>This is the result:\n<a href=\"https://i.stack.imgur.com/JA386.png\" rel=\"nofollow noreferrer\">result</a></p>\n<p>As you can see, I tried to do this in 2 ways. Both work for &quot;/register&quot; and &quot;/api/v1/getUsers&quot;, but do not work for &quot;/h2-console/**&quot;. I might be doing something wrong, but the commented code is from a youtube guide and the uncommented code is from another question on StackOverflow, so I am all out of ideas. Any help would be appreciated.</p>\n<p>EDIT 1: Problem was solved by the marked answers. This is the code that works for me:</p>\n<pre><code>public class WebSecurityConfig {\n\n    private static final AntPathRequestMatcher[] WHITE_LIST_URLS = {\n            new AntPathRequestMatcher(&quot;/register&quot;),\n            new AntPathRequestMatcher(&quot;/api/v1/getUsers&quot;),\n            // new AntPathRequestMatcher(&quot;/h2-console/**&quot;),\n    };\n\n    @Bean\n    public PasswordEncoder passwordEncoder() {\n        return new BCryptPasswordEncoder(11);\n    }\n\n    @Bean\n    SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .cors()\n                .and()\n                .csrf()\n                .disable()\n                .authorizeHttpRequests()\n                .requestMatchers(WHITE_LIST_URLS)\n                .permitAll();\n\n        return http.build();\n    }\n\n    @Bean\n    WebSecurityCustomizer webSecurityCustomizer() {\n        return web -&gt; web.ignoring()\n                .requestMatchers(new AntPathRequestMatcher(&quot;/h2-console/**&quot;));\n    }\n}\n</code></pre>\n"},{"tags":["java","random"],"comments":[{"owner":{"user_id":2636929,"display_name":"Stultuske"},"edited":false,"comment_id":132973867,"body":"that&#39;s probably because you never guessed right. just for testing, add a print that shows the number you&#39;re supposed to guess"},{"owner":{"user_id":1531124,"display_name":"GhostCat"},"edited":false,"comment_id":132973998,"body":"First of all: indenting matters. Why do you indent the third print, it looks like you think it should be part of the loop (but it isnt). And yeah, the code looks correct, the logical conclusion is that <i>you</i> got it wrong. And you know, for debugging ... there is no need to use a RANDOM number. Just hardcode it to a fixed value. You have to separate concerns. You want to write code that keeps looping until you give the &quot;right&quot; input. There is no point in testing THAT part of the code with a random number. First get THAT code right, then provide RANDOM input to it."}],"answers":[{"owner":{"user_id":16280853,"display_name":"Stoian Dardzhikov"},"up_vote_count":2,"is_accepted":false,"creation_date":1675679309,"answer_id":75360082,"body":"<p>I ran it myself and it runs as expected. Maybe the confusion comes from the fact that you've switched up the places where you print &quot;Less than it&quot; and &quot;More than that&quot;.\nIt should be like</p>\n<pre><code>     while (randomInt != userInput) {\n        userInput = read.nextInt();\n        if (randomInt &gt; userInput) {\n            System.out.println(&quot;More than that&quot;);\n        } else if (randomInt &lt; userInput){\n            System.out.println(&quot;Less than it&quot;);\n        }\n    }\n</code></pre>\n"},{"owner":{"user_id":18334636,"display_name":"SLNM"},"up_vote_count":0,"is_accepted":false,"creation_date":1675679337,"answer_id":75360089,"body":"<p>You got something wrong with the if statements. Also the scanner should be closed with <code>read.close()</code> to prevent memory leaks. Since there is no reason to put the scanner in the main class I also moved that to the <code>main</code> function. This should work for you know.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Scanner;\nimport java.util.Random;\npublic class Main {\n    public static void main(String[] args) {\n        Scanner read = new Scanner(System.in);\n        int randomInt = new Random().nextInt(1000);\n        int userInput = -1;\n        System.out.println(&quot;I guessed a number\\nYour turn: &quot;);\n\n        while (randomInt != userInput) {\n            System.out.println(randomInt);\n            userInput = read.nextInt();\n            if (randomInt &gt; userInput) {\n                System.out.println(&quot;More than it&quot;);\n            }\n            if (randomInt &lt; userInput){\n                System.out.println(&quot;Less than that&quot;);\n            }\n        }\n        System.out.println(&quot;That's right!&quot;);\n        read.close();\n    }\n}\n</code></pre>\n"},{"owner":{"user_id":21156193,"display_name":"aidanmclean"},"up_vote_count":0,"is_accepted":false,"creation_date":1675679590,"answer_id":75360130,"body":"<p>The console message &quot;More than that&quot; prints if <code>randomInt</code> is less than user input (<code>randomInt &lt; userInput</code>). Wouldn't you want it to print that if it is more than user input? The inverse condition applies to the other message. Could this be the issue? Otherwise, as already suggested, use a print statement to print the number out so you can test the correct guess.</p>\n"},{"owner":{"user_id":18521537,"display_name":"Aledlp5"},"up_vote_count":0,"is_accepted":false,"creation_date":1675686290,"answer_id":75361287,"body":"<p>I tried your code, and basically it works. The only problem I see is that you print the wrong string.</p>\n<pre><code>import java.util.Scanner;\nimport java.util.Random;\n\npublic class Test {\n\n    static Scanner read = new Scanner(System.in);\n\n    public static void main(String[] args) {\n        int randomInt = new Random().nextInt(10);\n        int userInput = -1;\n        System.out.println(&quot;I guessed a number\\nYour turn: &quot;);\n\n        while (randomInt != userInput) {\n            userInput = read.nextInt();\n            if (randomInt &gt; userInput) {\n                System.out.println(&quot;More than it&quot;);\n            } else if (randomInt &lt; userInput) {\n                System.out.println(&quot;Less than that&quot;);\n            }\n        }\n        System.out.println(&quot;That's right!&quot;);\n    }\n}\n</code></pre>\n<p>Some tips: <br></p>\n<ol>\n<li>Do not use such big numbers for tests</li>\n<li>Instead of using a while loop use a do while loop</li>\n</ol>\n"}],"owner":{"user_id":20952449,"display_name":"Chernosmaga"},"view_count":85,"up_vote_count":2,"answer_count":4,"score":2,"creation_date":1675678804,"question_id":75360002,"body":"<p>Okay, I want to create a simple game. I input a number, which was generated by PC using Random package and if I guess it, game over. But! I've no idea what is wrong with it.</p>\n<pre><code>import java.util.Scanner;\nimport java.util.Random; \npublic class Main {\n    static Scanner read = new Scanner(System.in);\n    public static void main(String[] args) {\n        int randomInt = new Random().nextInt(1000);\n        int userInput = -1;\n        System.out.println(&quot;I guessed a number\\nYour turn: &quot;);\n\n        while (randomInt != userInput) {\n            userInput = read.nextInt();\n            if (randomInt &gt; userInput) {\n                System.out.println(&quot;Less than it&quot;);\n            } else if (randomInt &lt; userInput){\n                System.out.println(&quot;More than that&quot;);\n            }\n        }\n            System.out.println(&quot;That's right!&quot;);\n        }\n    }\n</code></pre>\n<p>I used Debug and program worked. I mean, Random did his job, generated a number, but then it didn't show me &quot;That's right!&quot; output when I guessed a number. It just goes like &quot;More that that&quot; and &quot;More that that&quot;...</p>\n"},{"tags":["java","javafx","apple-m1"],"comments":[{"owner":{"user_id":14577449,"display_name":"Juhuja"},"edited":false,"comment_id":132934819,"body":"Did you find <a href=\"https://stackoverflow.com/a/53994717/14577449\">this</a> answer already? Maybe it helps your case."},{"owner":{"user_id":203657,"display_name":"kleopatra"},"edited":false,"comment_id":132934830,"body":"not on mac, so a bit of guessing: the error <i>mach-o file, but is an incompatible architecture (have &#39;x86_64&#39;, need &#39;arm64&#39;</i> seems to tell you what&#39;s wrong .. make sure to follow the instructions of <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">openjfx.io/openjfx-docs</a>"},{"owner":{"user_id":1515052,"display_name":"Simulant"},"edited":false,"comment_id":132934975,"body":"JDK11 and onwards removes JavaFX from the JDK. you have to declare it as explicit dependency."},{"owner":{"user_id":1155209,"display_name":"jewelsea"},"edited":false,"comment_id":132935318,"body":"Use a recent version of JavaFX (19+).  Most older versions either don’t have M processor support, or that support is broken."},{"owner":{"user_id":1155209,"display_name":"jewelsea"},"edited":false,"comment_id":132935409,"body":"Provide the gradle build script in the question. Where did the libraries at <code>.openjfx&#47;cache&#47;17</code> come from and how did they get there?"},{"owner":{"user_id":17728236,"display_name":"Jon"},"edited":false,"comment_id":132935631,"body":"If I wanted to use JavaFX with a clean install of Java (ie from <a href=\"https://download.oracle.com/java/19/latest/jdk-19_macos-aarch64_bin.dmg\" rel=\"nofollow noreferrer\">download.oracle.com/java/19/latest/jdk-19_macos-aarch64_bin.&zwnj;&#8203;dmg</a>), how would I install JavaFX?"},{"owner":{"user_id":1155209,"display_name":"jewelsea"},"edited":false,"comment_id":132936169,"body":"@Jon to use JavaFX with Oracle JDK, you would follow the instructions at open.jfx.io linked earlier by kleopatra (substituting Oracle JDK for OpenJDK)."},{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":132936452,"body":"Alternatively, you can just use <i>IntelliJ</i> by JetBrains. That IDE can download and install a JDK from your choice of several vendors. And that IDE offers a template specially for starting a new project for a JavaFX (OpenJFX) app. You can create and run a new JavaFX app in less than a minute. (No need for <i>brew</i> in this scenario.)"}],"answers":[{"owner":{"user_id":17728236,"display_name":"Jon"},"up_vote_count":2,"is_accepted":false,"creation_date":1675438769,"answer_id":75337968,"body":"<p>Just found <a href=\"https://stackoverflow.com/a/67854230/17728236\">this</a></p>\n<p>I installed <a href=\"https://www.azul.com/downloads-new/?os=macos&amp;architecture=arm-64-bit&amp;package=jdk-fx#zulu\" rel=\"nofollow noreferrer\">this</a></p>\n<p>Not sure that this was the best solution (I don't really know what Azul is), but the program runs at least.</p>\n"}],"owner":{"user_id":17728236,"display_name":"Jon"},"view_count":364,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1675436466,"question_id":75337482,"body":"<p>When attempting to run the following program, an error occurs.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>jon@jonathans-mbp-4 lab4 % sysctl -a | grep brand\nmachdep.cpu.brand_string: Apple M1\n\njon@jonathans-mbp-4 lab4 % java --version\njava 19.0.2 2023-01-17\nJava(TM) SE Runtime Environment (build 19.0.2+7-44)\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.2+7-44, mixed mode, sharing)\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.application.Application;\n\npublic class App {\n    public static void main(String[] args) {\n        Application.launch(GUIApplication.class, args);\n    }\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n\n\npublic class GUIApplication extends Application{\n\n    @Override\n    public void start(Stage stage) throws Exception {\n\n        // Fix weird font issue in dialog boxes on Macs\n        // Application.setUserAgentStylesheet(Application.STYLESHEET_MODENA);        \n        // com.sun.javafx.css.StyleManager.getInstance().addUserAgentStylesheet(&quot;MainWindow.css&quot;);\n        \n        var loader = new FXMLLoader(getClass().getResource(&quot;MainWindow.fxml&quot;));\n        var scene = new Scene(loader.load());\n\n        stage.setScene(scene);\n        stage.setTitle(&quot;Hello&quot;); // Title of main window\n        stage.show();\n    }\n\n}\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>import javafx.event.ActionEvent;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.*;\nimport javafx.scene.control.Alert.AlertType;\n\n\npublic class MainWindow {\n\n    @FXML\n    void onGreetClicked(ActionEvent event) {\n        var alert = new Alert(AlertType.INFORMATION, &quot;Hello, world!&quot;);\n        alert.setHeaderText(null);\n        alert.show();\n\n    }\n}\n</code></pre>\n<pre class=\"lang-css prettyprint-override\"><code>.root {\n    -fx-padding: 10; /* Add a small padding around the window */\n    -fx-font-family: 'Helvetica', Arial, sans-serif;\n}\n\n/* for Macs */\n.dialog-pane  {\n    -fx-font-family: 'Helvetica', Arial, sans-serif;\n}\n</code></pre>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.*?&gt;\n&lt;?import javafx.scene.layout.*?&gt;\n\n&lt;VBox fx:controller=&quot;MainWindow&quot; xmlns:fx=&quot;http://javafx.com/fxml&quot;  stylesheets=&quot;@MainWindow.css&quot;\n    spacing=&quot;10&quot; prefHeight=&quot;400&quot; prefWidth=&quot;250&quot;&gt;\n\n    &lt;Button onAction=&quot;#onGreetClicked&quot; text=&quot;Greet&quot;  /&gt;\n\n&lt;/VBox&gt;\n</code></pre>\n<pre class=\"lang-bash prettyprint-override\"><code>jon@jonathans-mbp-4 lab4 % gradle clean install\n\n&gt; Configure project :\nProject : =&gt; no module-info.java found\n\nBUILD SUCCESSFUL in 782ms\n6 actionable tasks: 6 executed\njon@jonathans-mbp-4 lab4 % gradle clean run\n\n&gt; Configure project :\nProject : =&gt; no module-info.java found\n\n&gt; Task :run FAILED\nLoading library prism_es2 from resource failed: java.lang.UnsatisfiedLinkError: /Users/jon/.openjfx/cache/17/libprism_es2.dylib: dlopen(/Users/jon/.openjfx/cache/17/libprism_es2.dylib, 0x0001): tried: '/Users/jon/.openjfx/cache/17/libprism_es2.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64')), '/System/Volumes/Preboot/Cryptexes/OS/Users/jon/.openjfx/cache/17/libprism_es2.dylib' (no such file), '/Users/jon/.openjfx/cache/17/libprism_es2.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64'))\njava.lang.UnsatisfiedLinkError: /Users/jon/.openjfx/cache/17/libprism_es2.dylib: dlopen(/Users/jon/.openjfx/cache/17/libprism_es2.dylib, 0x0001): tried: '/Users/jon/.openjfx/cache/17/libprism_es2.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64')), '/System/Volumes/Preboot/Cryptexes/OS/Users/jon/.openjfx/cache/17/libprism_es2.dylib' (no such file), '/Users/jon/.openjfx/cache/17/libprism_es2.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64'))\n        at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n        at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:174)\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2389)\n        at java.base/java.lang.Runtime.load0(Runtime.java:755)\n        at java.base/java.lang.System.load(System.java:1953)\n        at javafx.graphics/com.sun.glass.utils.NativeLibLoader.installLibraryFromResource(NativeLibLoader.java:217)\n        at javafx.graphics/com.sun.glass.utils.NativeLibLoader.loadLibraryFromResource(NativeLibLoader.java:197)\n        at javafx.graphics/com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:138)\n        at javafx.graphics/com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:54)\n        at javafx.graphics/com.sun.prism.es2.ES2Pipeline.lambda$static$0(ES2Pipeline.java:63)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\n        at javafx.graphics/com.sun.prism.es2.ES2Pipeline.&lt;clinit&gt;(ES2Pipeline.java:52)\n        at java.base/java.lang.Class.forName0(Native Method)\n        at java.base/java.lang.Class.forName(Class.java:375)\n        at javafx.graphics/com.sun.prism.GraphicsPipeline.createPipeline(GraphicsPipeline.java:218)\n        at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:92)\n        at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:125)\n        at java.base/java.lang.Thread.run(Thread.java:833)\nLoading library prism_sw from resource failed: java.lang.UnsatisfiedLinkError: /Users/jon/.openjfx/cache/17/libprism_sw.dylib: dlopen(/Users/jon/.openjfx/cache/17/libprism_sw.dylib, 0x0001): tried: '/Users/jon/.openjfx/cache/17/libprism_sw.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64')), '/System/Volumes/Preboot/Cryptexes/OS/Users/jon/.openjfx/cache/17/libprism_sw.dylib' (no such file), '/Users/jon/.openjfx/cache/17/libprism_sw.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64'))\njava.lang.UnsatisfiedLinkError: /Users/jon/.openjfx/cache/17/libprism_sw.dylib: dlopen(/Users/jon/.openjfx/cache/17/libprism_sw.dylib, 0x0001): tried: '/Users/jon/.openjfx/cache/17/libprism_sw.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64')), '/System/Volumes/Preboot/Cryptexes/OS/Users/jon/.openjfx/cache/17/libprism_sw.dylib' (no such file), '/Users/jon/.openjfx/cache/17/libprism_sw.dylib' (mach-o file, but is an incompatible architecture (have 'x86_64', need 'arm64'))\n        at java.base/jdk.internal.loader.NativeLibraries.load(Native Method)\n        at java.base/jdk.internal.loader.NativeLibraries$NativeLibraryImpl.open(NativeLibraries.java:388)\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:232)\n        at java.base/jdk.internal.loader.NativeLibraries.loadLibrary(NativeLibraries.java:174)\n        at java.base/java.lang.ClassLoader.loadLibrary(ClassLoader.java:2389)\n        at java.base/java.lang.Runtime.load0(Runtime.java:755)\n        at java.base/java.lang.System.load(System.java:1953)\n        at javafx.graphics/com.sun.glass.utils.NativeLibLoader.installLibraryFromResource(NativeLibLoader.java:217)\n        at javafx.graphics/com.sun.glass.utils.NativeLibLoader.loadLibraryFromResource(NativeLibLoader.java:197)\n        at javafx.graphics/com.sun.glass.utils.NativeLibLoader.loadLibraryInternal(NativeLibLoader.java:138)\n        at javafx.graphics/com.sun.glass.utils.NativeLibLoader.loadLibrary(NativeLibLoader.java:54)\n        at javafx.graphics/com.sun.prism.sw.SWPipeline.lambda$static$0(SWPipeline.java:43)\n        at java.base/java.security.AccessController.doPrivileged(AccessController.java:318)\n        at javafx.graphics/com.sun.prism.sw.SWPipeline.&lt;clinit&gt;(SWPipeline.java:42)\n        at java.base/java.lang.Class.forName0(Native Method)\n        at java.base/java.lang.Class.forName(Class.java:375)\n        at javafx.graphics/com.sun.prism.GraphicsPipeline.createPipeline(GraphicsPipeline.java:218)\n        at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:92)\n        at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:125)\n        at java.base/java.lang.Thread.run(Thread.java:833)\nGraphics Device initialization failed for :  es2, sw\nError initializing QuantumRenderer: no suitable pipeline found\njava.lang.RuntimeException: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\n        at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer.getInstance(QuantumRenderer.java:283)\n        at javafx.graphics/com.sun.javafx.tk.quantum.QuantumToolkit.init(QuantumToolkit.java:254)\n        at javafx.graphics/com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:264)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:291)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:163)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:659)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:679)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\n        at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.RuntimeException: Error initializing QuantumRenderer: no suitable pipeline found\n        at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.init(QuantumRenderer.java:95)\n        at javafx.graphics/com.sun.javafx.tk.quantum.QuantumRenderer$PipelineRunnable.run(QuantumRenderer.java:125)\n        ... 1 more\nException in thread &quot;main&quot; java.lang.RuntimeException: No toolkit found\n        at javafx.graphics/com.sun.javafx.tk.Toolkit.getToolkit(Toolkit.java:276)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:291)\n        at javafx.graphics/com.sun.javafx.application.PlatformImpl.startup(PlatformImpl.java:163)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.startToolkit(LauncherImpl.java:659)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.launchApplication1(LauncherImpl.java:679)\n        at javafx.graphics/com.sun.javafx.application.LauncherImpl.lambda$launchApplication$2(LauncherImpl.java:196)\n        at java.base/java.lang.Thread.run(Thread.java:833)\n\nFAILURE: Build failed with an exception.\n\n* What went wrong:\nExecution failed for task ':run'.\n&gt; Process 'command '/opt/homebrew/Cellar/openjdk@17/17.0.6/libexec/openjdk.jdk/Contents/Home/bin/java'' finished with non-zero exit value 1\n\n* Try:\n&gt; Run with --stacktrace option to get the stack trace.\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Get more help at https://help.gradle.org\n\nBUILD FAILED in 777ms\n5 actionable tasks: 5 executed\n</code></pre>\n<p>I have run the program from java to install Java 19 (my understanding is that uninstalls previous versions) and nothing changed. I manually deleted the JDKs (/Library/Java/JavaVirtualMachines) and reinstalled jdk-19.jdk.</p>\n<p>If it's not obvious, I don't really know what I'm doing. I need to get JavaFX to work for a university lab.</p>\n<p>The only other question I found said to reinstall Java, which I believe I did, but didn't fix the issue.</p>\n"},{"tags":["java","generics","lambda","type-inference","jls"],"comments":[{"owner":{"user_id":5133585,"display_name":"Sweeper"},"edited":false,"comment_id":132927419,"body":"Just to be clear, are you asking about the rationale of <i>why</i> Java has been designed this way, which only the designers can answer, or are you not sure which behaviour of the compiler corresponds to this clause, and would like an example?"},{"owner":{"user_id":11687703,"display_name":"theutonium.18"},"edited":false,"comment_id":132934437,"body":"The 2nd part Sweeper :)."}],"answers":[{"owner":{"user_id":5133585,"display_name":"Sweeper"},"up_vote_count":2,"is_accepted":true,"creation_date":1675471523,"answer_id":75342277,"body":"<p>The case that this clause is talking about is situations like this:</p>\n<pre><code>public class SomeClass {\n    public static void main(String[] args) {\n        f();\n    }\n\n    public static &lt;T extends Exception&gt; void f() throws T {}\n}\n</code></pre>\n<p>At the callsite <code>f();</code>, the type variable <code>T</code> has both an <code>Exception</code> bound and also a <code>throws</code> bound. According to the spec, since it is <em>possible</em> for <code>T</code> to be instantiated as a non-checked exception type, it <em>is</em> instantiated as a non-checked exception type, namely <code>RuntimeException</code> in this case</p>\n<p>As a result, the code above does not give any &quot;unhandled exception&quot; compile-time errors, which hopefully is what you expect. If the spec hadn't included the sentence about &quot;if possible, it is not a checked exception type&quot;, <code>T</code> would have been instantiated as <code>Exception</code> and I would have needed to handle it at the call site.</p>\n<p>On the other hand, if it is <em>not possible</em> to infer a non-checked exception type for <code>T</code>, then inference process continues as usual. Inference will not fail because of the existence of a <code>throws</code> bound, hence the phrases &quot;purely informational&quot; and &quot;if possible&quot;.</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    f(new Exception());\n}\n\npublic static &lt;T extends Exception&gt; void f(T t) throws T { }\n</code></pre>\n<p>The idea is that, for a method that can throw any type of exception (both checked and unchecked), it shouldn't throw a checked exception <em>unless</em> it is impossible to throw an unchecked one. e.g. if the caller is specifying the type arguments explicitly, or is passing in other arguments that make it impossible for <code>T</code> to be an unchecked exception. In short, unchecked is the default.</p>\n<p>It might also be helpful to compare the case of having the <code>throws</code> bound vs not having it:</p>\n<pre><code>public static void main(String[] args) {\n    var x = f();\n    var y = g();\n}\n\npublic static &lt;T extends Exception&gt; T f() throws T { return null; }\npublic static &lt;T extends Exception&gt; T g() { return null; }\n</code></pre>\n<p>The type of <code>x</code> is inferred to be <code>RuntimeException</code>, whereas the type of <code>y</code> is inferred to be <code>Exception</code>.</p>\n"}],"owner":{"user_id":11687703,"display_name":"theutonium.18"},"view_count":50,"up_vote_count":2,"accepted_answer_id":75342277,"answer_count":1,"score":2,"creation_date":1675410013,"question_id":75332761,"body":"<p>Consider the following type of constraint: <a href=\"https://docs.oracle.com/javase/specs/jls/se9/html/jls-18.html#jls-18.1.3\" rel=\"nofollow noreferrer\">18.1.3. Bounds</a></p>\n<ul>\n<li>‹LambdaExpression →throws T›</li>\n<li>The corresponding bound derived as:</li>\n</ul>\n<blockquote>\n<p>throws α: The inference variable α appears in a throws clause.</p>\n</blockquote>\n<p>JLS says that:</p>\n<blockquote>\n<p>A bound of the form throws α is purely informational: it directs resolution to optimize the instantiation of α so that, if possible, it is not a checked exception type.</p>\n</blockquote>\n<p>Now when it is said that &quot;optimize the instantiation of α so that, if possible, it is not a checked exception type&quot; - <strong>Not sure why it says that is optimized to be a non-checked type exception type?</strong> It should rather be a &quot;checked&quot; type as that is what being deliberate in the declaration.</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"owner":{"user_id":9513184,"display_name":"Unmitigated"},"up_vote_count":2,"is_accepted":true,"creation_date":1675221139,"answer_id":75305287,"body":"<p>Remove the alias for <code>method</code> in the annotation and use <code>@PostMapping</code> instead of <code>@RequestMapping</code>. Set the defaults in the body of the annotation itself.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@PostMapping\npublic @interface JsonPostMapping {\n    // ...\n    @AliasFor(annotation = PostMapping.class)\n    String[] consumes() default { MediaType.APPLICATION_JSON_VALUE };\n\n    @AliasFor(annotation = PostMapping.class)\n    String[] produces() default { MediaType.APPLICATION_JSON_VALUE };\n}\n</code></pre>\n"}],"owner":{"user_id":20625439,"display_name":"Luke"},"view_count":121,"up_vote_count":2,"accepted_answer_id":75305287,"answer_count":1,"score":2,"creation_date":1675220110,"question_id":75305192,"body":"<p>I have created custom annotation like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Retention(RUNTIME)\n@Target(METHOD)\n@RequestMapping(consumes = { MediaType.APPLICATION_JSON_VALUE }, produces = {\n        MediaType.APPLICATION_JSON_VALUE }, method = RequestMethod.POST)\npublic @interface JsonPostMapping {\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;value&quot;)\n    String[] value() default {};\n\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;method&quot;)\n    RequestMethod[] method() default {};\n\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;params&quot;)\n    String[] params() default {};\n\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;headers&quot;)\n    String[] headers() default {};\n\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;consumes&quot;)\n    String[] consumes() default {};\n\n    @AliasFor(annotation = RequestMapping.class, attribute = &quot;produces&quot;)\n    String[] produces() default {};\n}\n\n</code></pre>\n<p>I have the following controller</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.config.requestmappings.JsonPostMapping;\n\n@RestController\npublic class TestController {\n\n    @JsonPostMapping(value = &quot;/hello&quot;)\n    public String hello() {\n        return &quot;Hi, how are you&quot;;\n    }\n\n}\n</code></pre>\n<p>The <code>hello</code> api is also being called with GET request, i am expecting that it should only be called upon POST request.</p>\n"},{"tags":["java","swing"],"answers":[{"owner":{"user_id":177145,"display_name":"aterai"},"up_vote_count":1,"is_accepted":false,"creation_date":1675665878,"answer_id":75358097,"body":"<p>How about using <code>JLayer</code> to replace the disabled <code>JButton</code> drawing?</p>\n<p><a href=\"https://i.stack.imgur.com/LvfTe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LvfTe.png\" alt=\"enter image description here\" /></a></p>\n<pre><code>import java.awt.*;\nimport javax.swing.*;\nimport javax.swing.plaf.LayerUI;\n\npublic final class ButtonDisabledTextTest {\n  private Component makeUI() {\n    UIManager.put(&quot;Button.disabledText&quot;, Color.GRAY);\n    String html = &quot;&lt;html&gt;&lt;center&gt;&lt;font color = white&gt;Reset&lt;br&gt;Diagram&lt;/font&gt;&quot;;\n    JButton button0 = makeButton(html);\n    JButton button1 = makeButton(html);\n\n    JCheckBox check = new JCheckBox(&quot;setEnabled&quot;, true);\n    check.addActionListener(e -&gt; {\n      boolean isSelected = ((JCheckBox) e.getSource()).isSelected();\n      button0.setEnabled(isSelected);\n      button1.setEnabled(isSelected);\n    });\n\n    JPanel p = new JPanel();\n    p.add(button0);\n    p.add(new JLayer&lt;&gt;(button1, new DisabledHtmlTextLayerUI&lt;&gt;()));\n    p.add(check);\n    return p;\n  }\n\n  private static JButton makeButton(String title) {\n    JButton b = new JButton(title);\n    b.setBackground(Color.DARK_GRAY);\n    return b;\n  }\n\n  public static void main(String[] args) {\n    EventQueue.invokeLater(() -&gt; {\n      JFrame frame = new JFrame();\n      frame.setDefaultCloseOperation(WindowConstants.EXIT_ON_CLOSE);\n      frame.getContentPane().add(new ButtonDisabledTextTest().makeUI());\n      frame.pack();\n      frame.setLocationRelativeTo(null);\n      frame.setVisible(true);\n    });\n  }\n}\n\nclass DisabledHtmlTextLayerUI&lt;V extends AbstractButton&gt; extends LayerUI&lt;V&gt; {\n  private final JButton button = new JButton();\n  private final JPanel canvas = new JPanel();\n\n  @Override public void updateUI(JLayer&lt;? extends V&gt; l) {\n    super.updateUI(l);\n    SwingUtilities.updateComponentTreeUI(button);\n  }\n\n  @Override public void paint(Graphics g, JComponent c) {\n    if (c instanceof JLayer) {\n      Component view = ((JLayer&lt;?&gt;) c).getView();\n      super.paint(g, (JComponent) view);\n      if (!view.isEnabled()) {\n        paintDisabledText(g, view);\n      }\n    }\n  }\n\n  private void paintDisabledText(Graphics g, Component c) {\n    if (c instanceof AbstractButton) {\n      AbstractButton b = (AbstractButton) c;\n      button.setFont(b.getFont());\n      button.setText(&quot;&lt;html&gt;&lt;center&gt;&lt;font color = gray&gt;Reset&lt;br&gt;Diagram&lt;/font&gt;&quot;);\n      button.setIcon(b.getIcon());\n      button.setVerticalAlignment(b.getVerticalAlignment());\n      button.setHorizontalAlignment(b.getHorizontalAlignment());\n      button.setVerticalTextPosition(b.getVerticalTextPosition());\n      button.setHorizontalTextPosition(b.getHorizontalTextPosition());\n      // button.setForeground(UIManager.getColor(&quot;Button.disabledText&quot;));\n      // button.setOpaque(false);\n      button.setOpaque(true);\n      button.setBackground(Color.LIGHT_GRAY);\n      Graphics2D g2 = (Graphics2D) g.create();\n      Rectangle r = b.getBounds();\n      SwingUtilities.paintComponent(g2, button, canvas, r.x, r.y, r.width, r.height);\n      g2.dispose();\n    }\n  }\n}\n</code></pre>\n"},{"owner":{"user_id":203657,"display_name":"kleopatra"},"up_vote_count":1,"is_accepted":true,"creation_date":1675693949,"answer_id":75362664,"body":"<p>Disabled Swing components with <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/components/html.html\" rel=\"nofollow noreferrer\">html formatting</a> use a uniform foreground color taken from the UIManager by key &quot;textInactiveText&quot;. The key was introduced as fix for <a href=\"https://bugs.openjdk.org/browse/JDK-4783068\" rel=\"nofollow noreferrer\">JDK-4783068</a> - further refinement to allow per-component disabled color rejected in <a href=\"https://bugs.openjdk.org/browse/JDK-7150926\" rel=\"nofollow noreferrer\">JDK-7150926</a>.</p>\n<p>Obviously the value depends on the LaF - the light blue (only?) configured by Metal (actually, the Ocean Theme). Applications can replace the default setting, f.i. with standard button's disabled text color</p>\n<pre><code>UIManager.put(&quot;textInactiveText&quot;, UIManager.get(&quot;Button.disabledText&quot;));\n</code></pre>\n<p>or a hard-coded color</p>\n<pre><code>UIManager.put(&quot;textInactiveText&quot;, new ColorUIResource(Color.GRAY));\n</code></pre>\n<p>For Metal, we could also implement and use a custom theme which returns the color from its <code>getInactiveSystemTextColor()</code>.</p>\n"}],"owner":{"user_id":1573856,"display_name":"fadd"},"view_count":102,"up_vote_count":2,"accepted_answer_id":75362664,"answer_count":2,"score":2,"creation_date":1675116462,"question_id":75290674,"body":"<p>I have a java swing button with multi-line text, I used <code>&lt;HTML&gt;</code> tag as follows:</p>\n<pre><code>button.setText(&quot;&lt;html&gt;&lt;center&gt;&lt;font color = white&gt;Reset&lt;br&gt;Diagram&lt;/font&gt;&lt;/html&gt;&quot;);\n</code></pre>\n<p>But when I set <code>button.setEnabled(false);</code>, the text color becomes light blue, while the rest of button without <code>&lt;HTML&gt;</code> tag have the text color gray when disabled.</p>\n<p>I tried using UIManager, but it only worked for buttons without <code>&lt;HTML&gt;</code> tag:</p>\n<pre><code>UIManager.put(&quot;Button.disabledText&quot;, new ColorUIResource(Color.GRAY));\n</code></pre>\n<p>Any idea on how to overcome this problem?</p>\n"},{"tags":["java","spring","maven","kotlin","gradle"],"comments":[{"owner":{"user_id":3426309,"display_name":"Andrey B. Panfilov"},"edited":false,"comment_id":132840047,"body":"&quot;we are creating a lot of short lived test projects at my work. Dozens of them each day&quot; that is exactly what <a href=\"https://maven.apache.org/guides/introduction/introduction-to-archetypes.html\" rel=\"nofollow noreferrer\">maven archetypes</a> are supposed to solve"},{"owner":{"user_id":296328,"display_name":"khmarbaise"},"edited":false,"comment_id":132840323,"body":"Simply create a parent pom which contains all definitions of plugins/configuration and a BOM file which contains the default dependencies. You project pom will contain only a parent and a usage of a BOM (<a href=\"https://maven.apache.org/guides/introduction/introduction-to-dependency-mechanism.html#importing-dependencies\" rel=\"nofollow noreferrer\">maven.apache.org/guides/introduction/&hellip;</a>) That will give you a clean separation of concern..."}],"answers":[{"owner":{"user_id":9443176,"display_name":"Max Aminov"},"up_vote_count":2,"is_accepted":false,"creation_date":1675064368,"answer_id":75281384,"body":"<p>You can create a parent pom dependency, include all needed dependencies in it and then use it as parent dependency for your small projects, like this:</p>\n<pre><code>&lt;parent&gt;\n  &lt;groupId&gt;com.example&lt;/groupId&gt;\n  &lt;artifactId&gt;some-parent-pom&lt;/artifactId&gt;\n  &lt;version&gt;DEV-SNAPSHOT&lt;/version&gt;\n&lt;/parent&gt;\n</code></pre>\n<p>Do not forget to run <code>mvn clean install</code> to install the parent POM to your local repository.</p>\n"}],"owner":{"user_id":112050,"display_name":"Sandeep"},"view_count":101,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1675056668,"question_id":75280554,"body":"<p>we are creating a lot of short lived test projects at my work. Dozens of them each day. we have about 10 dependencies that we use internally at our workplace - these are all custom plugins.\nI want to get people to not have to mess with their pom.xml for the official dependencies just to get started. so either create a bash script that has all the dependencies on cli...or try to inherit one common xml from all these pom.xml.</p>\n<p>I looked at other answers (like <a href=\"https://stackoverflow.com/questions/16056194/reusing-ant-snippets-in-multi-module-maven-build/27869461#27869461\">Reusing ant-snippets in multi-module maven build</a>), but i dont think these work. im also looking to see if i can use multimodule builds, but then it is even more boilerplate.</p>\n<p>i was also looking at maven-dependency-plugin, but I think it only copies/downloads dependencies...u still need to add them to pom.xml.</p>\n<p>I also saw some similar questions in gradle area (<a href=\"https://stackoverflow.com/questions/40607153/add-dynamic-dependencies-via-command-line\">Add dynamic dependencies via command line</a>), but unsure if it works in maven.</p>\n<p>so my question stands - how do I add a large number of dependencies to a maven project, WITHOUT messing with the pom.xml file ?\nAny help will be much appreciated.</p>\n"},{"tags":["java","spring-boot","maven","pom.xml"],"comments":[{"owner":{"user_id":296328,"display_name":"khmarbaise"},"edited":false,"comment_id":132828720,"body":"I&#39;m a bit puzzled. This is documented in the release notes: <a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes\" rel=\"nofollow noreferrer\">github.com/spring-projects/spring-boot/wiki/&hellip;</a>"}],"answers":[{"owner":{"user_id":11729079,"display_name":"bakarJc"},"up_vote_count":0,"is_accepted":false,"creation_date":1674974634,"answer_id":75273059,"body":"<p>The following import should work:</p>\n<pre><code>import javax.validation.constraints.NotBlank;\n</code></pre>\n"},{"owner":{"user_id":8041003,"display_name":"John Williams"},"up_vote_count":2,"is_accepted":true,"creation_date":1674991129,"answer_id":75274457,"body":"<p>From Spring Boot 3.0.0 it uses Java 17. In Java 17 the location of of validators has moved from javax.validation to jakarta.validation - see <a href=\"https://github.com/spring-projects/spring-boot/issues/29533\" rel=\"nofollow noreferrer\">Bug: Spring Boot 3.0.0-M1 cannot find javax.validation#2953</a> - not really a bug.</p>\n<p>Your options are to stay with spring-boot-starter-parent v3.0.2 (jdk17) and use the following import:</p>\n<pre><code>import jakarta.validation.constraints.NotBlank;\n</code></pre>\n<p>Or to drop spring-boot-starter-parent to a version before 3.0.0, eg 2.7.8 and use the following import. I recomment this unless you really need Java17.</p>\n<pre><code>import javax.validation.constraints.NotBlank;\n</code></pre>\n"}],"owner":{"user_id":11863754,"display_name":"mvalpha"},"view_count":217,"up_vote_count":2,"accepted_answer_id":75274457,"answer_count":2,"score":2,"creation_date":1674974132,"question_id":75273030,"body":"<p>I am new to spring-boot and I am following freecodecamp's tutorial and there the tutor imported @NotBlank, I am trying to import it from org.springframework.boot but it is not working.\nCan anyone tell me how to import @NotBlank.</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;learning-spring&lt;/name&gt;\n    &lt;description&gt;Trying to learn&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jetbrains&lt;/groupId&gt;\n            &lt;artifactId&gt;annotations&lt;/artifactId&gt;\n            &lt;version&gt;20.1.0&lt;/version&gt;\n            &lt;scope&gt;compile&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n\n</code></pre>\n<p>This is pom.xml and I have added org.springframework.boot in the dependency</p>\n<pre><code>&lt;dependency&gt;\n                        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>I don't know how to import it into my code?</p>\n<p>This is my code, help me out.</p>\n<pre><code>package com.example.demo.model;\n\nimport com.fasterxml.jackson.annotation.JsonProperty;\nimport java.util.UUID;\npublic class Person\n{\n    private final UUID id;\n\n    @NotBlank\n    private final String name;\n\n    public Person(@JsonProperty(&quot;id&quot;)UUID id,\n                  @JsonProperty(&quot;name&quot;) String name)\n    {\n        this.id = id;\n        this.name = name;\n    }\n    public UUID getId()\n    {\n        return id;\n    }\n    public String getName()\n    {\n        return name;\n    }\n}\n\n</code></pre>\n<p>Thanks in advance.</p>\n"},{"tags":["java","multithreading","project-loom"],"answers":[{"owner":{"user_id":2357112,"display_name":"user2357112"},"up_vote_count":2,"is_accepted":true,"creation_date":1674965653,"answer_id":75272562,"body":"<p>Your understanding is wrong. Quoting <a href=\"https://openjdk.org/jeps/425\" rel=\"nofollow noreferrer\">JEP 425</a>,</p>\n<blockquote>\n<p>A virtual thread can be scheduled on different carriers over the course of its lifetime</p>\n</blockquote>\n<p>However, it doesn't matter if a virtual thread gets scheduled on a new carrier. The Java Memory Model's guarantees are based on Java threads, not OS threads. Code running in a single virtual thread is running in a single thread as far as any synchronization requirements are concerned, regardless of how many carrier threads the virtual thread is scheduled on over its lifetime.</p>\n<p>You will not have to mark anything <code>volatile</code> with virtual threads that you would not have had to mark <code>volatile</code> with platform threads.</p>\n"}],"owner":{"user_id":1075051,"display_name":"Sanjay"},"view_count":89,"up_vote_count":2,"accepted_answer_id":75272562,"answer_count":1,"score":2,"creation_date":1674958068,"question_id":75272197,"body":"<p>Is my understanding correct that a virtual thread runs on the same carrier thread throughout its lifetime? If not, then I'm wondering if we'd need to have our instance variables as <code>volatile</code> to have the correct value after a virtual threads blocks in one carrier thread and wakes up in another. For example, see the code snippet below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class VirtualThreadDemo {\n\n    private int disabledUserCount;\n\n    void countDisabledUsers() {\n\n        while (moreUsers()) {\n            User user = getNextUserFromDb(); // virtual thread blocks for IO\n            if (user.isDisabled())\n                disabledUserCount++; // always happens in same carrier thread?\n        }\n        System.out.println(disabledUserCount);\n    }\n}\n</code></pre>\n<p>We don't have to declare <code>disabledUserCount</code> as volatile (because the carrier thread is gauranteed to remain same). Correct?</p>\n<p>If not, what if it were a local variable?</p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"comments":[{"owner":{"user_id":9492915,"display_name":"SputNick"},"edited":false,"comment_id":132800230,"body":"For spring to make use of the Value and Autowired annotation, the class should be annotated with Component so that it can be picked up during context initialization. Have you tried creating a spring Bean from the SchemaPhysicalNamingStrategy ?"},{"owner":{"user_id":2358472,"display_name":"Sammy Pawar"},"edited":false,"comment_id":132805078,"body":"@NikhilJoseph, yes. My SchemaPhysicalNamingStrategy has Compoent annotation, but it doesn&#39;t help. Its instance is created by Spring using reflection. HibernateJpaConfiguration.java    \t\tthis.hibernatePropertiesCustomizers = determineHibernatePropertiesCustomizers( \t\t\t\tphysicalNamingStrategy.getIfAvailable(), implicitNamingStrategy.getIfAvailable(), beanFactory, \t\t\t\thibernatePropertiesCustomizers.orderedStream().collect(C&zwnj;&#8203;ollectors.toList()))&zwnj;&#8203;;"},{"owner":{"user_id":1303158,"display_name":"Bernie"},"edited":false,"comment_id":132839479,"body":"What are you trying to accomplish? Why are you trying to inject <code>schema</code> and <code>catalogName</code> into a naming strategy? Can you add the values to the Map in <code>jpaProperties()</code>?"},{"owner":{"user_id":1303158,"display_name":"Bernie"},"edited":false,"comment_id":132839745,"body":"I don&#39;t think that Spring is the issue here. <code>hibernate.physical_naming_strategy</code> is vendor-specific (Hibernate), and it&#39;s unlikely that Spring is involved in the construction of the object."},{"owner":{"user_id":2358472,"display_name":"Sammy Pawar"},"edited":false,"comment_id":132850959,"body":"@Bernie. Thanks. I just want to dynamically set schema, catalog names in physical naming strategy instance instead of hard coding in java code. I am not sure how I can set schema and catalog names in jpaProperties -     protected Map&lt;String, Object&gt; jpaProperties() {         return of(                 &quot;hibernate.physical_naming_strategy&quot;, SchemaPhysicalNamingStrategy.class.getName());     }"},{"owner":{"user_id":2358472,"display_name":"Sammy Pawar"},"edited":false,"comment_id":132851104,"body":"@Bernie, Thanks. see HibernateJpaConfiguration.java, if LocalContainerEntityManagerFactoryBean bean is present then spring won&#39;t touch vendor properties. Because of &quot;ConditionalOnMissingBean&quot;.   \tBean \tPrimary \tConditionalOnMissingBean({ LocalContainerEntityManagerFactoryBean.class, EntityManagerFactory.class }) \tpublic LocalContainerEntityManagerFactoryBean entityManagerFactory(EntityManagerFactoryBuilder factoryBuilder) { \t\tMap&lt;String, Object&gt; vendorProperties = getVendorProperties(); \t\tcustomizeVendorProperties(vendorProperties);"}],"answers":[{"owner":{"user_id":3426309,"display_name":"Andrey B. Panfilov"},"up_vote_count":2,"is_accepted":true,"creation_date":1675101302,"answer_id":75288308,"body":"<p>Documentation <a href=\"https://docs.jboss.org/hibernate/orm/current/userguide/html_single/Hibernate_User_Guide.html#beans-manageable\" rel=\"nofollow noreferrer\">says</a> following:</p>\n<p>Hibernate supports using the following integrations as managed beans:</p>\n<ul>\n<li>jakarta.persistence.AttributeConverter</li>\n<li>Jakarta Persistence &quot;entity listener&quot; classes</li>\n<li>org.hibernate.type.descriptor.jdbc.JdbcType</li>\n<li>org.hibernate.type.descriptor.java.BasicJavaType</li>\n<li>org.hibernate.type.descriptor.java.MutabilityPlan</li>\n<li>org.hibernate.usertype.UserType</li>\n<li>org.hibernate.usertype.UserCollectionType</li>\n<li>org.hibernate.metamodel.EmbeddableInstantiator</li>\n<li>org.hibernate.envers.RevisionListener</li>\n<li>org.hibernate.id.IdentifierGenerator</li>\n</ul>\n<p>Since Hibernate do not recognise naming strategies as managed beans you need to pass them as instances to property map, for example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean(name = &quot;integrationEntityManagerFactory&quot;)\npublic LocalContainerEntityManagerFactoryBean integrationEntityManagerFactory(\n        EntityManagerFactoryBuilder builder\n        SchemaPhysicalNamingStrategy namingStrategy) {\n    return builder.dataSource(integrationDataSource())\n            .packages(&quot;xx.xx.xx.xxxx.entity&quot;)\n            .properties(jpaProperties(namingStrategy))\n            .build();\n}\n\n\nprotected Map&lt;String, Object&gt; jpaProperties(PhysicalNamingStrategy namingStrategy) {\n    return of(&quot;hibernate.physical_naming_strategy&quot;, namingStrategy);\n}\n</code></pre>\n"}],"owner":{"user_id":2358472,"display_name":"Sammy Pawar"},"view_count":150,"up_vote_count":2,"accepted_answer_id":75288308,"answer_count":1,"score":2,"creation_date":1674812450,"question_id":75256306,"body":"<p>Something similar to this question but OP there not mentioned that whether they creating LocalContainerEntityManagerFactoryBean .<br />\n<a href=\"https://stackoverflow.com/questions/64141279/spring-not-injecting-value-or-autowired-annotated-variables-in-physicalnamings\">Spring not injecting @Value or @Autowired annotated variables in PhysicalNamingStrategy Implementations:</a></p>\n<pre><code>@Configuration\npublic class SchemaPhysicalNamingStrategy extends CamelCaseToUnderscoresNamingStrategy {\n\n    @Value(value = &quot;${spring.jpa.hibernate.default_schema}&quot;)\n    private String schemaName;\n\n    @Value(value = &quot;${spring.jpa.hibernate.default_catalog}&quot;)\n    private String catalogName;\n\n    /**\n     * @param identifier\n     * @param jdbcEnvironment\n     * @return\n     */\n    @Override\n    public Identifier toPhysicalSchemaName(Identifier identifier, JdbcEnvironment jdbcEnvironment) {\n        if (isNull(identifier)) {\n            identifier = toIdentifier(this.schemaName);\n        }\n        return super.toPhysicalSchemaName(identifier, jdbcEnvironment);\n    }\n\n    @Override\n    public Identifier toPhysicalCatalogName(\n            Identifier identifier, JdbcEnvironment jdbcEnvironment) {\n        if (isNull(identifier)) {\n            identifier = toIdentifier(this.catalogName);\n        }\n        return super.toPhysicalCatalogName(identifier, jdbcEnvironment);\n    }\n}\n</code></pre>\n<p>Below is one of the two LocalContainerEntityManagerFactoryBean objects which needs customised physical naming strategy.</p>\n<pre><code>@Bean(name = &quot;integrationEntityManagerFactory&quot;)\npublic LocalContainerEntityManagerFactoryBean integrationEntityManagerFactory(\n        EntityManagerFactoryBuilder builder) {\n    return builder.dataSource(integrationDataSource())\n            .packages(&quot;xx.xx.xx.xxxx.entity&quot;)\n            .properties(jpaProperties())\n            .build();\n}\n\n\n    protected Map&lt;String, Object&gt; jpaProperties() {\n        return of(\n                &quot;hibernate.physical_naming_strategy&quot;, SchemaPhysicalNamingStrategy.class.getName());\n    }\n</code></pre>\n<p>Issue is - @Value and @Autowired are not working on SchemaPhysicalNamingStrategy as spring creates instance using reflection. Can't add it to constructor as spring calls constructor without params using reflection. One option is to create SessionFactory bean and set on it but that will be overkill. Please help.</p>\n"},{"tags":["java","spring","spring-boot","spring-security","mtls"],"comments":[{"owner":{"user_id":843943,"display_name":"Grim"},"edited":false,"comment_id":132796549,"body":"What url do you use? Did you install the client-certificate into the browser?"},{"owner":{"user_id":843943,"display_name":"Grim"},"edited":false,"comment_id":132796647,"body":"Using chrome/chromium, did you activated <code>chrome:&#47;&#47;flags#allow-insecure-localhost</code>? Firefox, did you activated <code>about:config#security.default_personal_cert</code>?"},{"owner":{"user_id":843943,"display_name":"Grim"},"edited":false,"comment_id":132796677,"body":"Is the public part of the client-cert within the server&#39;s truststore?"},{"owner":{"user_id":843943,"display_name":"Grim"},"edited":false,"comment_id":132796714,"body":"Is the client-certificate issued by the server only? Is the client-certificate signed by the server&#39;s certificate?"},{"owner":{"user_id":7154462,"display_name":"desertSniper87"},"edited":false,"comment_id":132802981,"body":"@Grim, I create a root CA, client certificate and server certificate using openssl (<a href=\"https://torsho-digital-garden.netlify.app/net/sec/pki/tls/implementation-of-m-tls-in-node-js/\" rel=\"nofollow noreferrer\">torsho-digital-garden.netlify.app/net/sec/pki/tls/&hellip;</a>). I then imported the root CA as a certificate authority and client certificate as my certificate in firefox. The client.crt is imported into the truststore using <code>keytool -import -alias torsho -file ~&#47;dev&#47;mTLS-nodejs-poc&#47;client.crt -keystore server.p12 -storepass 123456</code>. The client certificate and server certificate both are signed by the root CA. Then. I am going to <a href=\"https://localhost:8081/user\" rel=\"nofollow noreferrer\">localhost:8081/user</a> in firefox."},{"owner":{"user_id":7154462,"display_name":"desertSniper87"},"edited":false,"comment_id":132803009,"body":"I can enter the website by choosing the certificate but cannot get the client certificate in the application layer in the spring boot application."},{"owner":{"user_id":7154462,"display_name":"desertSniper87"},"edited":false,"comment_id":132803017,"body":"I am using <code>https:&#47;&#47;localhost:8081&#47;user</code> to hit the webpage."},{"owner":{"user_id":5277820,"display_name":"dur"},"edited":false,"comment_id":132816619,"body":"@desertSniper87 you can enter an authenticated URL (other than <code>&#47;</code>, <code>&#47;home</code> and <code>&#47;login</code>)?"},{"owner":{"user_id":7154462,"display_name":"desertSniper87"},"edited":false,"comment_id":132825341,"body":"@dur, yes i can."},{"owner":{"user_id":843943,"display_name":"Grim"},"edited":false,"comment_id":132834390,"body":"@desertSniper87 Your code looks correct. All things you told looks correct. Indeed, very interresting! +1 from me"}],"answers":[{"owner":{"user_id":843943,"display_name":"Grim"},"up_vote_count":2,"is_accepted":true,"creation_date":1675025405,"answer_id":75278293,"body":"<p>Please try</p>\n<pre><code>jakarta.servlet.request.X509Certificate\n</code></pre>\n<p>instead of</p>\n<pre><code>javax.servlet.request.X509Certificate\n</code></pre>\n<p>See: <a href=\"https://tomcat.apache.org/tomcat-10.0-doc/servletapi/jakarta/servlet/ServletRequest.html#getAttribute(java.lang.String)\" rel=\"nofollow noreferrer\">https://tomcat.apache.org/tomcat-10.0-doc/servletapi/jakarta/servlet/ServletRequest.html#getAttribute(java.lang.String)</a></p>\n"}],"owner":{"user_id":7154462,"display_name":"desertSniper87"},"view_count":322,"up_vote_count":2,"accepted_answer_id":75278293,"answer_count":1,"score":2,"creation_date":1674755674,"question_id":75249923,"body":"<p>I want to read client's x509 certificate in a mTLS connection. I am using Spring Boot with embedded tomcat.</p>\n<p>My <code>WebSecurityConfig.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n                .authorizeHttpRequests((requests) -&gt; requests\n                        .requestMatchers(&quot;/&quot;, &quot;/home&quot;).permitAll()\n                        .anyRequest().authenticated()\n                )\n                .x509().withObjectPostProcessor(new ObjectPostProcessor&lt;X509AuthenticationFilter&gt;() {\n                    @Override\n                    public &lt;O extends X509AuthenticationFilter&gt; O postProcess(O filter) {\n//                        filter.setContinueFilterChainOnUnsuccessfulAuthentication(false);\n                        return filter;\n                    }\n                }).and()\n                .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.NEVER)\n                .and()\n                .csrf()\n                .disable()\n                .formLogin((form) -&gt; form\n                        .loginPage(&quot;/login&quot;)\n                        .permitAll()\n                )\n                .logout((logout) -&gt; logout.permitAll());\n\n\n        return http.build();\n    }\n\n    @Bean\n    public UserDetailsService userDetailsService() {\n        UserDetails user =\n                User.withDefaultPasswordEncoder()\n                        .username(&quot;u&quot;)\n                        .password(&quot;p&quot;)\n                        .roles(&quot;USER&quot;)\n                        .build();\n\n        return new InMemoryUserDetailsManager(user);\n    }\n}\n</code></pre>\n<p>I have a <code>UserController.java</code></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Controller  \npublic class UserController {  \n    @Autowired  \n    private HttpServletRequest context;  \n  \n    @RequestMapping(value = &quot;/user&quot;)  \n    public String user(HttpServletRequest request) {  \n  \n        X509Certificate[] certs = (X509Certificate[]) request.getAttribute(&quot;javax.servlet.request.X509Certificate&quot;);  \n        System.out.println(certs[0]);  \n  \n        return &quot;user&quot;;  \n    }  \n}\n</code></pre>\n<p>My <code>application.yml</code></p>\n<pre class=\"lang-yaml prettyprint-override\"><code>server:  \n  port: 8081  \n  ssl:  \n    enabled: true  \n    key-store: &quot;classpath:server.p12&quot;  \n    key-store-password: 123456  \n    key-store-type: PKCS12  \n    client-auth: need  \n    enabled-protocols: TLSv1.2  \n  \n    trust-store: &quot;classpath:server.p12&quot;  \n    trust-store-type: pkcs12  \n    trust-store-password: 123456\n</code></pre>\n<p>Then I run the code using <code>mvn spring-boot:run -DclientAuth=true</code></p>\n<p>But it seems, certificate is null when I hit the <code>/user</code> endpoint.</p>\n<pre class=\"lang-java prettyprint-override\"><code>java.lang.NullPointerException: Cannot load from object array because &quot;certs&quot; is null\n    at com.example.securingweb.UserController.user(UserController.java:20) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1003) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:895) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:705) ~[tomcat-embed-core-10.1.1.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:880) ~[spring-webmvc-6.0.2.jar:6.0.2]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814) ~[tomcat-embed-core-10.1.1.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.springframework.security.web.FilterChainProxy.lambda$doFilterInternal$3(FilterChainProxy.java:231) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:365) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.access.intercept.AuthorizationFilter.doFilter(AuthorizationFilter.java:100) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:126) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.access.ExceptionTranslationFilter.doFilter(ExceptionTranslationFilter.java:120) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:131) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.session.SessionManagementFilter.doFilter(SessionManagementFilter.java:85) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.authentication.AnonymousAuthenticationFilter.doFilter(AnonymousAuthenticationFilter.java:100) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.servletapi.SecurityContextHolderAwareRequestFilter.doFilter(SecurityContextHolderAwareRequestFilter.java:179) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.savedrequest.RequestCacheAwareFilter.doFilter(RequestCacheAwareFilter.java:63) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:227) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.authentication.AbstractAuthenticationProcessingFilter.doFilter(AbstractAuthenticationProcessingFilter.java:221) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.authentication.preauth.AbstractPreAuthenticatedProcessingFilter.doFilter(AbstractPreAuthenticatedProcessingFilter.java:150) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:107) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.authentication.logout.LogoutFilter.doFilter(LogoutFilter.java:93) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.header.HeaderWriterFilter.doHeadersAfter(HeaderWriterFilter.java:90) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.header.HeaderWriterFilter.doFilterInternal(HeaderWriterFilter.java:75) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.context.SecurityContextHolderFilter.doFilterInternal(SecurityContextHolderFilter.java:69) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.context.request.async.WebAsyncManagerIntegrationFilter.doFilterInternal(WebAsyncManagerIntegrationFilter.java:62) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.session.DisableEncodeUrlFilter.doFilterInternal(DisableEncodeUrlFilter.java:42) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.security.web.FilterChainProxy$VirtualFilterChain.doFilter(FilterChainProxy.java:374) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy.doFilterInternal(FilterChainProxy.java:233) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.security.web.FilterChainProxy.doFilter(FilterChainProxy.java:191) ~[spring-security-web-6.0.0.jar:6.0.0]\n    at org.springframework.web.filter.DelegatingFilterProxy.invokeDelegate(DelegatingFilterProxy.java:351) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.filter.DelegatingFilterProxy.doFilter(DelegatingFilterProxy.java:267) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.2.jar:6.0.2]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:197) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:861) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1739) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.1.jar:10.1.1]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n\n\n</code></pre>\n<p>My <code>keytool -list -keystore server.p12</code> output:</p>\n<pre><code>Enter keystore password:  \nKeystore type: PKCS12\nKeystore provider: SUN\n\nYour keystore contains 3 entries\n\n1, Jan 27, 2023, PrivateKeyEntry, \nCertificate fingerprint (SHA-256): 4F:04:0B:CF:21:AB:45:4A:17:C1:83:93:B0:5D:3C:D4:04:80:B2:0B:79:24:68:70:18:36:5C:CE:7B:77:6C:23\nbcc, Jan 27, 2023, trustedCertEntry, \nCertificate fingerprint (SHA-256): 49:EF:A6:0F:E7:81:71:22:2B:F5:BD:D0:76:48:77:70:EE:5E:E9:23:BB:FF:66:AC:68:2D:CB:D3:4F:D1:87:DC\ntorsho, Jan 27, 2023, trustedCertEntry, \nCertificate fingerprint (SHA-256): C0:42:3A:FD:9F:00:A9:6D:05:8B:2F:F9:B9:DE:A7:A7:DA:6F:19:6B:D7:33:34:D6:4F:D3:D8:78:12:AA:25:0A\n</code></pre>\n<p><a href=\"https://github.com/desertSniper87/spring-boot-mtls\" rel=\"nofollow noreferrer\">My full project</a></p>\n"},{"tags":["java","libgdx"],"answers":[{"owner":{"user_id":8178842,"display_name":"Tobias"},"up_vote_count":1,"is_accepted":true,"creation_date":1674540427,"answer_id":75217957,"body":"<p>The problem is that the alignment of a label will <strong>only align the text within the label</strong>, but not the label itself.<br />\nFrom the <a href=\"https://github.com/libgdx/libgdx/blob/9fb9353c99ae5b30b455262832c13a84c2736bd4/gdx/src/com/badlogic/gdx/scenes/scene2d/Actor.java#L515\" rel=\"nofollow noreferrer\">libgdx API</a> (class Actor, which is a super class of Label):</p>\n<blockquote>\n<p>/** Sets the position of the actor's bottom left corner. */<br />\npublic void setPosition (float x, float y)</p>\n</blockquote>\n<p>If you want to center the text within your label you can <strong>set the bounds of the label</strong> (see the <a href=\"https://github.com/libgdx/libgdx/blob/9fb9353c99ae5b30b455262832c13a84c2736bd4/gdx/src/com/badlogic/gdx/scenes/scene2d/Actor.java#L628\" rel=\"nofollow noreferrer\">libgdx API</a> for reference).</p>\n<p>This will change the position along with the width and height of the label. Then the text of the label will be centered within this label.</p>\n"},{"owner":{"user_id":4254303,"display_name":"gloccck18"},"up_vote_count":1,"is_accepted":false,"creation_date":1676333673,"answer_id":75442345,"body":"<p>To set the label alignment, you should use the <code>setAlignment</code> method:</p>\n<pre><code>label.setAlignment(Align.center);\n</code></pre>\n<p>The <code>int alignment</code> argument of the <code>Actor.setPosition</code> method specifies how the actor should be aligned in relation to the passed <code>x</code> and <code>y</code> position. This method only updates the label position, not its alignment.</p>\n<p>The <code>Label.setAlignment</code> method, on the other hand, updates the <code>labelAlign</code> and <code>lineAlign</code> properties of the <code>Label</code> class, which have a direct effect on the label position and how it is updated within layout invalidation.</p>\n"}],"owner":{"user_id":16887604,"display_name":"Adixe"},"view_count":76,"up_vote_count":2,"accepted_answer_id":75217957,"answer_count":2,"score":2,"creation_date":1674470383,"question_id":75208314,"body":"<p>I have a problem. I'm creating a simple menu for my LibGDX game. I create a label as follows:</p>\n<pre><code>Label label = new Label(&quot;Text&quot;, new Label.LabelStyle(font, Color.WHITE));\nlabel.setPosition(960, 960, Align.center);\nstage.addActor(label);\n</code></pre>\n<p>As you can see, I set the position along with the centering. The problem occurs when I want to update the label text with <em>setText()</em> method. Centering is completely broken.</p>\n<pre><code>label.setText(&quot;New text&quot;);\n</code></pre>\n<p>I tried re-executing the <em>setPosition()</em> method as in the example above, but it didn't help. I would like to know why after updating the text LibGDX still remembers the old label size. What's a good way to fix this?</p>\n"},{"tags":["java","classloader"],"comments":[{"owner":{"user_id":29470,"display_name":"Tim Moore"},"edited":false,"comment_id":132710623,"body":"Does the application class loader have tobeloaded-1.0-SNAPSHOT.jar in its classpath?"},{"owner":{"user_id":16320675,"display_name":"user16320675"},"edited":false,"comment_id":132710922,"body":"I got two <code>false</code> when testing that code... but I am sure that <code>Main.class.getClassLoader().loadClass(&quot;example.ToBeLoaded&quot;)</code> is throwing a <code>ClassNotFoundException</code> - <a href=\"https://i.stack.imgur.com/103uG.png\" rel=\"nofollow noreferrer\">screenshot</a>"},{"owner":{"user_id":13160706,"display_name":"Machi"},"edited":false,"comment_id":132710941,"body":"@TimMoore No. tobeloaded-1.0-SNAPSHOT.jar is compiled seperately and locates in another path."},{"owner":{"user_id":13160706,"display_name":"Machi"},"edited":false,"comment_id":132710997,"body":"@user16320675 Two false is the correct result. But Why? The tobeloaded.jar should be loaded by Application ClassLoader because of parent delegation principle. Both the UrlClassLoader cl1 and cl2 should delegate the loading task to their parent, which is Application ClassLoader."},{"owner":{"user_id":13160706,"display_name":"Machi"},"edited":false,"comment_id":132711112,"body":"@user16320675 A little weird. Parent Delegation Principle only works for classes in class path. How did classloader distingguish classes loaded from class path or not. Need more investigation."},{"owner":{"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"edited":false,"comment_id":132711181,"body":"Each class loader has its classpath - a list of URLs that it searches for classes to load. If the parent classloader doesn&#39;t have a class in its classpath it cannot load it (it cannot find the class file). Your <code>cl1</code> and <code>cl2</code> class loaders have a very specific classpath containing an URL that is not in the application class loaders classpath."},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":132713722,"body":"The term “classpath” used in this discussion, is an unnecessary distraction. <a href=\"https://stackoverflow.com/questions/75206840/why-this-class-can-be-loaded-twice-by-java-classloader#comment132710922_75206840\">This comment</a> points into the right direction. All that matters, is whether <code>Main.class.getClassLoader() .loadClass(&quot;example.ToBeLoaded&quot;)</code> will successfully load a class of that name. If so, it wouldn’t matter whether it has been loaded from this specific jar file, through a classpath, or by some other means."}],"answers":[{"owner":{"user_id":4222206,"display_name":"Queeg"},"up_vote_count":2,"is_accepted":true,"creation_date":1674461995,"answer_id":75207018,"body":"<p>If the parent delegation principle is in effect you are right. But that is not always the desired behaviour.</p>\n<p>In JEE containers this is per design different. Just imagine two different applications refer to the same class (named mypackage.MyClass). But for some reason one application expects the library 'mypackage' in version 1, while the other in version two. And both of them are incompatible.</p>\n<p>Thus JEE containers assign one classloader for each of the applications, and each of them will load that specific version of the class. They reside in memory in parallel, and they are distinct different types, so if you try to cast one into the other you will see an exception raised.</p>\n<p>So to really know whether two classes are the same, not only compare their fully qualified class names but also compare the classloader they belong to. I am not aware that at runtime the JVM would check if two classes are the same (content-wise), as it might pop up in your example.</p>\n"}],"owner":{"user_id":13160706,"display_name":"Machi"},"view_count":120,"up_vote_count":3,"accepted_answer_id":75207018,"answer_count":1,"score":2,"creation_date":1674460563,"question_id":75206840,"body":"<p>This code can load the same class twice by two distinct Classloader.</p>\n<pre><code>import java.net.URL;\nimport java.net.URLClassLoader;\n\npublic class Main {\n    public static void main(String[] args) throws Exception {\n        URL childAndParentClassesLocation = new URL(&quot;file:///C:\\\\Users\\\\Machi\\\\Desktop\\\\tobeloaded-1.0-SNAPSHOT.jar&quot;);\n        ClassLoader cl1 = new URLClassLoader(new URL[]{childAndParentClassesLocation}, Main.class.getClassLoader());\n        ClassLoader cl2 = new URLClassLoader(new URL[]{childAndParentClassesLocation}, Main.class.getClassLoader());\n        Class child1 = cl1.loadClass(&quot;example.ToBeLoaded&quot;);\n        Class child2 = cl2.loadClass(&quot;example.ToBeLoaded&quot;);\n        System.out.println(child2 == child1);\n        System.out.println(child2.equals(child1));\n\n    }\n}\n</code></pre>\n<p>But a URLClassLoader has the Application ClassLoader as a parent. According to the parent delegation principle, should not the ToBeLoaded class be loaded by the Application ClassLoader once and only once?</p>\n"},{"tags":["java","lambda","jvm","closures","invokedynamic"],"comments":[{"owner":{"user_id":2970947,"display_name":"Elliott Frisch"},"edited":false,"comment_id":132707727,"body":"In your code, there are two values <code>1.23f</code> (when you construct the &quot;functor&quot;) and <code>4.56f</code> (when you apply it). Does that help? And are you asking how it gets <code>1.23</code> or <code>4.56</code>?"},{"owner":{"user_id":45843,"display_name":"rwallace"},"edited":false,"comment_id":132707764,"body":"@ElliottFrisch I&#39;m asking how 1.23 gets supplied as an argument to the functor, given that both in the source and byte code of <code>main</code>, it only seems to be supplied as an argument to <code>makeAdder</code>."},{"owner":{"user_id":2970947,"display_name":"Elliott Frisch"},"edited":false,"comment_id":132707820,"body":"See <a href=\"https://openjdk.org/jeps/126\" rel=\"nofollow noreferrer\">JEP 126: Lambda Expressions &amp; Virtual Extension Methods</a> and <a href=\"https://openjdk.org/projects/lambda/\" rel=\"nofollow noreferrer\">Project Lambda</a> if you really want to dig into the how (hint: <code>1: invokedynamic #7,  0</code>)."}],"answers":[{"owner":{"user_id":768644,"display_name":"rzwitserloot"},"up_vote_count":2,"is_accepted":true,"creation_date":1674437016,"answer_id":75205045,"body":"<p>The relevant aspect is in the output of <code>javap</code> but you didn't include it in your question. At the very end of the javap output: (make sure to run with <code>javap -c -v</code>!)</p>\n<pre><code>SourceFile: &quot;Test.java&quot;\nBootstrapMethods:\n  0: #56 REF_invokeStatic java/lang/invoke/LambdaMetafactory.metafactory:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodHandle;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;\n    Method arguments:\n      #63 (Ljava/lang/Object;)Ljava/lang/Object;\n      #64 REF_invokeStatic Adder.lambda$makeAdder$0:(Ljava/lang/Float;Ljava/lang/Float;)Ljava/lang/Float;\n      #67 (Ljava/lang/Float;)Ljava/lang/Float;\nInnerClasses:\n  public static final #74= #70 of #72;    // Lookup=class java/lang/invoke/MethodHandles$Lookup of class java/lang/invoke/MethodHandles\n\n</code></pre>\n<p>This... doesn't really come across as useful, but it <em>is</em> the underlying mechanism that makes all this work.</p>\n<p>The relevant call is the <code>invokedynamic</code> bytecode instruction. <code>invokedynamic</code> is, well, dynamic: The first time <code>invokedynamic</code> is encountered the JVM will take a slow path and executes some code that can arbitrarily decide what this invocation is actually going to end up looking like. Any further executions of that same <code>invokedynamic</code> call no longer do that - they 'memoize'. So, an <code>invokedynamic</code> call can result in any kind of actual method invocation you want (here, it'll end up being a <a href=\"https://en.wikipedia.org/wiki/Partial_application\" rel=\"nofollow noreferrer\">partial application</a> of that <code>lambda$makeAdder$0(float, float)</code>, of course), and is nevertheless fast.</p>\n<p><code>javap</code>'s output isn't all that enlightening. A lot of the crucial moving parts of it all are actually in the <code>java.lang.invoke.LambdaMetaFactory</code> class which is a real class in the JVM <a href=\"https://github.com/openjdk/jdk/blob/master/src/java.base/share/classes/java/lang/invoke/LambdaMetafactory.java\" rel=\"nofollow noreferrer\">whose source is part of the core JDK and thus open</a>.</p>\n<p>This <a href=\"https://www.baeldung.com/java-invoke-dynamic\" rel=\"nofollow noreferrer\">baeldung tutorial on <code>invokedynamic</code></a> is probably something you want to go through top to bottom if you are interested in fully understanding how this works.</p>\n"}],"owner":{"user_id":45843,"display_name":"rwallace"},"view_count":77,"up_vote_count":2,"accepted_answer_id":75205045,"answer_count":1,"score":2,"creation_date":1674432460,"question_id":75204784,"body":"<p>I'm trying to figure out exactly how lambdas and closures work in the JVM. To that end, I've tried compiling this simple test case:</p>\n<pre><code>import java.util.function.*;\n\nclass Adder {\n  static Function&lt;Float, Float&gt; makeAdder(Float a) {\n    return b -&gt; a + b;\n  }\n\n  public static void main(String[] args) {\n    Function&lt;Float, Float&gt; f = makeAdder(1.23f);\n    System.out.println(f.apply(4.56f));\n  }\n}\n</code></pre>\n<p>Disassembling the resulting byte code is interesting:</p>\n<pre><code>  static java.util.function.Function&lt;java.lang.Float, java.lang.Float&gt; makeAdder(java.lang.Float);\n    descriptor: (Ljava/lang/Float;)Ljava/util/function/Function;\n    flags: (0x0008) ACC_STATIC\n    Code:\n      stack=1, locals=1, args_size=1\n         0: aload_0\n         1: invokedynamic #7,  0              // InvokeDynamic #0:apply:(Ljava/lang/Float;)Ljava/util/function/Function;\n         6: areturn\n      LineNumberTable:\n        line 4: 0\n    Signature: #48                          // (Ljava/lang/Float;)Ljava/util/function/Function&lt;Ljava/lang/Float;Ljava/lang/Float;&gt;;\n\n  public static void main(java.lang.String[]);\n    descriptor: ([Ljava/lang/String;)V\n    flags: (0x0009) ACC_PUBLIC, ACC_STATIC\n    Code:\n      stack=3, locals=2, args_size=1\n         0: ldc           #11                 // float 1.23f\n         2: invokestatic  #12                 // Method java/lang/Float.valueOf:(F)Ljava/lang/Float;\n         5: invokestatic  #18                 // Method makeAdder:(Ljava/lang/Float;)Ljava/util/function/Function;\n         8: astore_1\n         9: getstatic     #23                 // Field java/lang/System.out:Ljava/io/PrintStream;\n        12: aload_1\n        13: ldc           #29                 // float 4.56f\n        15: invokestatic  #12                 // Method java/lang/Float.valueOf:(F)Ljava/lang/Float;\n        18: invokeinterface #30,  2           // InterfaceMethod java/util/function/Function.apply:(Ljava/lang/Object;)Ljava/lang/Object;\n        23: invokevirtual #35                 // Method java/io/PrintStream.println:(Ljava/lang/Object;)V\n        26: return\n      LineNumberTable:\n        line 9: 0\n        line 10: 9\n        line 11: 26\n\n  private static java.lang.Float lambda$makeAdder$0(java.lang.Float, java.lang.Float);\n    descriptor: (Ljava/lang/Float;Ljava/lang/Float;)Ljava/lang/Float;\n    flags: (0x100a) ACC_PRIVATE, ACC_STATIC, ACC_SYNTHETIC\n    Code:\n      stack=2, locals=2, args_size=2\n         0: aload_0\n         1: invokevirtual #41                 // Method java/lang/Float.floatValue:()F\n         4: aload_1\n         5: invokevirtual #41                 // Method java/lang/Float.floatValue:()F\n         8: fadd\n         9: invokestatic  #12                 // Method java/lang/Float.valueOf:(F)Ljava/lang/Float;\n        12: areturn\n      LineNumberTable:\n        line 4: 0\n        \n</code></pre>\n<p>Some of the above is clear, some less so. The part I'm most puzzled about right now is the implementation of the lambda function, <code>lambda$makeAdder$0(java.lang.Float, java.lang.Float)</code>. That signature suggests the lambda has <em>two</em> parameters even though it was declared with just one.</p>\n<p>Well, it's obvious what the extra one is for; it's for the value of <code>a</code> that was bound into the closure. So at one level, that answers the question of how Java closures are supplied with the values of bound variables: they are prepended to the parameter list.</p>\n<p>But then, how does the ultimate caller know about this? The disassembled code for <code>main</code> looks isomorphic to the source code, i.e. completely innocent of knowledge about how closures are implemented. It seems to be supplying one argument to <code>makeAdder</code>, then the second argument to the lambda. In other words, supplying just one argument to the lambda.</p>\n<p>How is the first argument also supplied to the lambda?</p>\n<p>Does it anything to do with the final <code>BootstrapMethods</code> section of the disassembled code?</p>\n<pre><code>BootstrapMethods:\n  0: #56 REF_invokeStatic java/lang/invoke/LambdaMetafactory.metafactory:(Ljava/lang/invoke/MethodHandles$Lookup;Ljava/lang/String;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodType;Ljava/lang/invoke/MethodHandle;Ljava/lang/invoke/MethodType;)Ljava/lang/invoke/CallSite;\n    Method arguments:\n      #63 (Ljava/lang/Object;)Ljava/lang/Object;\n      #64 REF_invokeStatic Adder.lambda$makeAdder$0:(Ljava/lang/Float;Ljava/lang/Float;)Ljava/lang/Float;\n      #67 (Ljava/lang/Float;)Ljava/lang/Float;\nInnerClasses:\n  public static final #74= #70 of #72;    // Lookup=class java/lang/invoke/MethodHandles$Lookup of class java/lang/invoke/MethodHandles\n</code></pre>\n"},{"tags":["java","mysql","sql","spring-boot"],"comments":[{"owner":{"user_id":888580,"display_name":"lane.maxwell"},"edited":false,"comment_id":132681942,"body":"@Muhammad_786 those look correct.  So, in your controller, add a simple print to verify that you&#39;re getting what you expect.  Since you&#39;re using Lombok, you can simply do something like, <code>System.out.println(employee);</code> in the first line of the controller"},{"owner":{"user_id":17890787,"display_name":"Muhammad_786"},"edited":false,"comment_id":132682127,"body":"@lane.maxwell I have added that would you like me to show the console from spring tool?"},{"owner":{"user_id":7082956,"display_name":"Valerij Dobler"},"edited":false,"comment_id":132699559,"body":"You could add an <code>org.springframework.ui.Model</code> as an parameter to your RestController endpoint and take a look, on what postman is providing you because something is wrong with the mapping. Moreover, I would add a NewEmployeeDto class with the given three fields as Strings and @NonNull and let Spring map to it."}],"answers":[{"owner":{"user_id":1037018,"display_name":"Hypino"},"up_vote_count":3,"is_accepted":false,"creation_date":1674251500,"answer_id":75189652,"body":"<p>You say you're not getting and errors in your Spring Boot log, but you've posted a stack trace, which is the best type of error you could hope for. In fact, it tells you exactly what the problem is:</p>\n<blockquote>\n<p>org.hibernate.PropertyValueException: not-null property references a null or transient value : com.advanced.app1.model.Employee.firstName</p>\n</blockquote>\n<p>Your entity does not have &quot;firstName&quot; marked as nullable</p>\n<pre><code>@Column(name = &quot;first_name&quot;, nullable = false)\n</code></pre>\n<p>Somehow, your Employee entity is not being populated with the data from your POST request. This can happen if the deserialization can't &quot;automatically&quot; map from your JSON fields to your <code>Employee</code> object fields.</p>\n<p>One possible reason is that you do not have any getters or setters defined on your Entity. I see you're using <code>lombok</code> for this, but I would suggest at least for now ruling out any issue with this not working with Spring's framework and manually generating these methods directly.</p>\n<p>You're also writing directly from the REST API into a database Entity. While this isn't strictly a problem, it's not a best practice and can sometimes lead to weird behaviour. I'd recommend creating a model object (POJO) specifically intended for use in your REST interface, and then map to an entity in your Repository.</p>\n"},{"owner":{"user_id":8370915,"display_name":"invzbl3"},"up_vote_count":0,"is_accepted":false,"creation_date":1674356512,"answer_id":75197922,"body":"<p>The cause of the issue:</p>\n<pre><code>{\n    &quot;timestamp&quot;: &quot;2023-01-22T14:43:44.841+00:00&quot;,\n    &quot;status&quot;: 500,\n    &quot;error&quot;: &quot;Internal Server Error&quot;,\n    &quot;path&quot;: &quot;/api/employees&quot;\n}\n</code></pre>\n<p>as correctly, mentioned, <a href=\"https://stackoverflow.com/a/75189652/8370915\">Hypino</a>, is inside your provided <code>entity</code>:</p>\n<pre><code>@Data\n@Entity\n@Table(name=&quot;employees&quot;)\npublic class Employee {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    \n    @Column(name = &quot;first_name&quot;, nullable = false)\n    private String firstName;\n    \n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n    \n    @Column(name = &quot;email&quot;)\n    private String email;\n}\n</code></pre>\n<p>This <em>implies</em> that you labeled <code>first_name</code> to not being able to have <code>null</code> and so <code>Spring</code> isn't able to map the <code>json</code> request to an object, so <code>first_name</code> is always <code>null</code>.</p>\n<p>In your case:</p>\n<p><code>nullable = false</code> means this value can't be <code>null</code>.</p>\n<pre><code>@Column(name = &quot;first_name&quot;, nullable = false)\n</code></pre>\n<p>this means when creating the schema for the table, it will use the name <code>&quot;first_name&quot;</code> as the name and <code>name = &quot;firstName&quot;, nullable = false</code> means that while saving to the database, if the value is <code>null</code>, it will not save and throw an exception:</p>\n<pre><code>Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value\n</code></pre>\n<p>if you were to look at the actual <code>sql</code> that is generated.</p>\n<p>In the same time, <code>@Column</code> only cares about the database, so when you are calling it via a <code>Rest API</code>, <code>Spring</code> is only caring about the variable name and not the column name.</p>\n<p>As result, you have <em>several</em> options how to handle it and it really depends on you and your project requirements:</p>\n<hr />\n<p><strong>Option #1</strong></p>\n<p>(To use <em>explicitly</em> <code>nullable = true</code> as the option)</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;employees&quot;)\npublic class Employee {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    @Column(name = &quot;first_name&quot;, nullable = true)\n    private String first_name;\n\n    @Column(name = &quot;last_name&quot;, nullable = true)\n    private String last_name;\n\n    @Column(name = &quot;email&quot;, nullable = true)\n    private String email;\n}    \n</code></pre>\n<p>in accordance with the <code>body</code> in <code>Postman</code> as:</p>\n<pre><code>{\n    &quot;first_name&quot;: &quot;testFirstName&quot;,\n    &quot;last_name&quot;: &quot;testLastName&quot;,\n    &quot;email&quot;: &quot;testEmail@gmail.com&quot;\n}\n</code></pre>\n<p><em><strong>Pros</strong></em></p>\n<ul>\n<li><p>you can see right away that it is nullable. This could be useful when you are analyzing the code directly from github for example or you don't know the default value.</p>\n</li>\n<li><p>if default value ever changes, you have it set and don't have to worry about it.</p>\n</li>\n</ul>\n<p><em><strong>Cons</strong></em>:</p>\n<ul>\n<li><p>there is very very small chance that default value ever changes</p>\n</li>\n<li><p>it makes code more verbose and that is generaly frowned upon.</p>\n</li>\n</ul>\n<p><code>true</code> is the default option for nullable, so can be omitted. In the absence of a <code>@Column</code> annotation with a name, <code>Hibernate</code> will create a column using the field name, replacing camel-case with snake-case.</p>\n<blockquote>\n<p>If you like keeping things explicit - fine.</p>\n</blockquote>\n<hr />\n<p><strong>Option #2</strong></p>\n<p>(To avoid the usage of annotations: <code>@Column(name = &quot;first_name&quot;, nullable = false</code> for specific fields, as attached below)</p>\n<p><code>Controller</code> class:</p>\n<pre><code>@RestController\n@RequestMapping(&quot;/api/employees&quot;)\npublic class EmployeeController {\n\n    private EmployeeService employeeService;\n\n    public EmployeeController(EmployeeService employeeService) {\n        this.employeeService = employeeService;\n    }\n\n    @PostMapping\n    public ResponseEntity&lt;Employee&gt; saveEmployee(@RequestBody Employee employee){\n        return new ResponseEntity&lt;&gt;\n                (employeeService.saveEmployee(employee), HttpStatus.CREATED);\n    }\n}\n</code></pre>\n<p><code>ResourceNotFoundException</code> class:</p>\n<pre><code>@ResponseStatus(value = HttpStatus.NOT_FOUND)\npublic class ResourceNotFoundException extends RuntimeException {\n\n    private static final long serialVersionUID = 1L;\n    private String resourceName;\n    private String fieldName;\n    private Object fieldValue;\n\n    public ResourceNotFoundException(String resourceName, String fieldName, Object fieldValue) {\n        super(String.format(&quot;%s not found with %s : '%s'&quot;, resourceName, fieldName, fieldValue));\n        this.resourceName = resourceName;\n        this.fieldName = fieldName;\n        this.fieldValue = fieldValue;\n    }\n\n    public String getResourceName() {\n        return resourceName;\n    }\n\n    public String getFieldName() {\n        return fieldName;\n    }\n\n    public Object getFieldValue() {\n        return fieldValue;\n    }\n}\n</code></pre>\n<p><code>Model</code> class:</p>\n<pre><code>@Data\n@Entity\n@Table(name = &quot;employees&quot;)\npublic class Employee {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n\n    private String firstName;\n\n    private String lastName;\n\n    private String email;\n}\n</code></pre>\n<p><code>Repository</code>:</p>\n<pre><code>public interface EmployeeRepository extends JpaRepository&lt;Employee, Long&gt; {\n\n}\n</code></pre>\n<p><code>Service</code> implementation (<em>business-logic</em>):</p>\n<pre><code>@Service\npublic class EmployeeServiceImpl implements EmployeeService {\n\n    private final EmployeeRepository employeeRepository;\n\n    public EmployeeServiceImpl(EmployeeRepository employeeRepository) {\n        super();\n        this.employeeRepository = employeeRepository;\n    }\n\n    @Override\n    public Employee saveEmployee(Employee employee) {\n        return employeeRepository.save(employee);\n    }\n}\n</code></pre>\n<p><code>Service</code>:</p>\n<pre><code>public interface EmployeeService {\n\n    Employee saveEmployee(Employee employee);\n}\n</code></pre>\n<p><code>Main</code> class:</p>\n<pre><code>@SpringBootApplication\npublic class SpringBootAdvancedApplication {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SpringBootAdvancedApplication.class, args);\n    }\n}\n</code></pre>\n<p>and accordingly <code>database</code> configuration:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/testdb?useSSL=false&amp;allowPublicKeyRetrieval=true\nspring.datasource.username=root\nspring.datasource.password=...\nspring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQLDialect\nspring.jpa.hibernate.ddl-auto=update\n</code></pre>\n<p>As result, you can test via <code>Postman</code> using <code>POST</code> request as the following:</p>\n<pre><code>http://localhost:8080/api/employees\n</code></pre>\n<p>with <code>body</code> as in the example:</p>\n<pre><code>{\n    &quot;firstName&quot;: &quot;testFirstName&quot;,\n    &quot;lastName&quot;: &quot;testLastName&quot;,\n    &quot;email&quot;: &quot;testEmail@gmail.com&quot;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/XysCi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XysCi.jpg\" alt=\"enter image description here\" /></a></p>\n<p>choosing <code>raw</code> &amp; <code>JSON</code> as your options.</p>\n<p><a href=\"https://i.stack.imgur.com/eY3fk.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/eY3fk.jpg\" alt=\"enter image description here\" /></a></p>\n<p><em>Headers for request</em>:</p>\n<p><a href=\"https://i.stack.imgur.com/1nXSi.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1nXSi.jpg\" alt=\"enter image description here\" /></a></p>\n<p>The content of <code>POM</code> file:</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n        &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n        &lt;scope&gt;runtime&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n        &lt;optional&gt;true&lt;/optional&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n        &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n    &lt;/dependency&gt;\n\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n        &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n\n&lt;build&gt;\n    &lt;plugins&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;source&gt;10&lt;/source&gt;\n                &lt;target&gt;10&lt;/target&gt;\n                &lt;encoding&gt;UTF-8&lt;/encoding&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;configuration&gt;\n                &lt;excludes&gt;\n                    &lt;exclude&gt;\n                        &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                        &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                    &lt;/exclude&gt;\n                &lt;/excludes&gt;\n            &lt;/configuration&gt;\n        &lt;/plugin&gt;\n    &lt;/plugins&gt;\n&lt;/build&gt;\n</code></pre>\n<blockquote>\n<p>If you prefer avoiding boilerplate when you are aware of the defaults - also fine. The key here is keeping the rules consistent throughout the entire project.</p>\n</blockquote>\n<hr />\n<p>Additional <em><code>useful</code></em> &amp; <em><code>informative</code></em> links:</p>\n<ol>\n<li><a href=\"https://thorben-janssen.com/hibernate-tips-whats-the-difference-between-column-nullable-false-and-notnull/\" rel=\"nofollow noreferrer\">Hibernate Tips: What’s the difference between @Column(nullable = false) and @NotNull</a></li>\n<li><a href=\"https://www.baeldung.com/hibernate-notnull-vs-nullable\" rel=\"nofollow noreferrer\">Hibernate @NotNull vs @Column(nullable = false)</a></li>\n<li><a href=\"https://stackoverflow.com/a/24002892/8370915\">Hibernate handling of nullable=true in @Column</a></li>\n<li><a href=\"https://www.reddit.com/r/learnjava/comments/10irw2d/comment/j5h2vae/?utm_source=share&amp;utm_medium=web2x&amp;context=3\" rel=\"nofollow noreferrer\">Does it make sense to write @Column(nullable = true) for entity while using Hibernate?</a></li>\n</ol>\n"},{"owner":{"user_id":1755342,"display_name":"Gunasekaran R"},"up_vote_count":0,"is_accepted":false,"creation_date":1674496835,"answer_id":75213302,"body":"<p>A status 500 &quot;Internal Server Error&quot; is a general error message that indicates that something went wrong on the server side of your application. There could be multiple reasons for this error, but some common causes include:</p>\n<p>Configuration issues: Check your application's configuration, such as the properties files, to make sure everything is set up correctly.</p>\n<p>Coding errors: This could be a bug in your code that is causing the server to crash or return the error. Check for syntax errors, null pointer exceptions, and other common coding issues.</p>\n<p>Database issues: Make sure your database is running and configured correctly. Check your database connection settings and ensure that the correct user has access to the database.</p>\n<p>Dependency issues: If you're using any dependencies or libraries, make sure they are up-to-date and compatible with your application.</p>\n<p>Permission issues: check if the user running the application has the correct permissions to access the resources it needs.</p>\n<p>It's recommended to check the server logs to see more detailed information about the error, which could help you identify the root cause of the problem and fix it.</p>\n<p>It's worth mentioning that testing your application using Postman could not reveal all the possible issues, so it could be worth testing your application by running it directly on a browser or other clients as well.</p>\n"}],"owner":{"user_id":17890787,"display_name":"Muhammad_786"},"view_count":1898,"up_vote_count":2,"answer_count":3,"score":2,"creation_date":1674218143,"question_id":75184113,"body":"<p>I am new to <code>SpringBoot</code> and <code>Postman</code> and just started learning Java I was following a tutorial, but I keep getting the following error when I try to <em>POST</em> using <code>POSTMAN</code> after running my files on <code>SpringBoot</code>:\n<a href=\"https://i.stack.imgur.com/YcE53.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YcE53.png\" alt=\"Error in POSTMAN\" /></a></p>\n<p>I have double checked the database and that is running fine, I am also not getting any errors on <code>SpringBoot</code>.</p>\n<p>LOG from SpringBoot:</p>\n<pre><code>2023-01-20T17:57:07.313Z[0;39m [31mERROR[0;39m [35m8208[0;39m [2m---[0;39m [2m[nio-8080-exec-5][0;39m [36mo.a.c.c.C.[.[.[/].[dispatcherServlet]   [0;39m [2m:[0;39m Servlet.service() for servlet [dispatcherServlet] in context with path [] threw exception [Request processing failed: org.springframework.dao.DataIntegrityViolationException: not-null property references a null or transient value : com.advanced.app1.model.Employee.firstName] with root cause\n\norg.hibernate.PropertyValueException: not-null property references a null or transient value : com.advanced.app1.model.Employee.firstName\n    at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:111) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.engine.internal.Nullability.checkNullability(Nullability.java:55) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.action.internal.AbstractEntityInsertAction.nullifyTransientReferencesIfNotAlready(AbstractEntityInsertAction.java:119) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.action.internal.EntityIdentityInsertAction.execute(EntityIdentityInsertAction.java:68) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.engine.spi.ActionQueue.execute(ActionQueue.java:653) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.engine.spi.ActionQueue.addResolvedEntityInsertAction(ActionQueue.java:283) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.engine.spi.ActionQueue.addInsertAction(ActionQueue.java:264) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.engine.spi.ActionQueue.addAction(ActionQueue.java:322) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.AbstractSaveEventListener.addInsertAction(AbstractSaveEventListener.java:340) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.AbstractSaveEventListener.performSaveOrReplicate(AbstractSaveEventListener.java:286) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.AbstractSaveEventListener.performSave(AbstractSaveEventListener.java:192) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.AbstractSaveEventListener.saveWithGeneratedId(AbstractSaveEventListener.java:122) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.DefaultPersistEventListener.entityIsTransient(DefaultPersistEventListener.java:184) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:129) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.internal.DefaultPersistEventListener.onPersist(DefaultPersistEventListener.java:53) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.internal.SessionImpl.firePersist(SessionImpl.java:737) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at org.hibernate.internal.SessionImpl.persist(SessionImpl.java:721) ~[hibernate-core-6.1.6.Final.jar:6.1.6.Final]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.orm.jpa.ExtendedEntityManagerCreator$ExtendedEntityManagerInvocationHandler.invoke(ExtendedEntityManagerCreator.java:360) ~[spring-orm-6.0.4.jar:6.0.4]\n    at jdk.proxy2/jdk.proxy2.$Proxy96.persist(Unknown Source) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:307) ~[spring-orm-6.0.4.jar:6.0.4]\n    at jdk.proxy2/jdk.proxy2.$Proxy96.persist(Unknown Source) ~[na:na]\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.save(SimpleJpaRepository.java:610) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.4.jar:6.0.4]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.4.jar:6.0.4]\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77) ~[spring-data-commons-3.0.1.jar:3.0.1]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.4.jar:6.0.4]\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123) ~[spring-tx-6.0.4.jar:6.0.4]\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388) ~[spring-tx-6.0.4.jar:6.0.4]\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119) ~[spring-tx-6.0.4.jar:6.0.4]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.4.jar:6.0.4]\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137) ~[spring-tx-6.0.4.jar:6.0.4]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.4.jar:6.0.4]\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163) ~[spring-data-jpa-3.0.1.jar:3.0.1]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.4.jar:6.0.4]\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97) ~[spring-aop-6.0.4.jar:6.0.4]\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184) ~[spring-aop-6.0.4.jar:6.0.4]\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218) ~[spring-aop-6.0.4.jar:6.0.4]\n    at jdk.proxy2/jdk.proxy2.$Proxy100.save(Unknown Source) ~[na:na]\n    at com.advanced.app1.service.impl.EmployeeServiceImpl.saveEmployee(EmployeeServiceImpl.java:21) ~[classes/:na]\n    at com.advanced.app1.controller.EmployeeController.saveEmployee(EmployeeController.java:27) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.web.method.support.InvocableHandlerMethod.doInvoke(InvocableHandlerMethod.java:207) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:152) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:884) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:797) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1080) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:973) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1011) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at org.springframework.web.servlet.FrameworkServlet.doPost(FrameworkServlet.java:914) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:731) ~[tomcat-embed-core-10.1.5.jar:6.0]\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:885) ~[spring-webmvc-6.0.4.jar:6.0.4]\n    at jakarta.servlet.http.HttpServlet.service(HttpServlet.java:814) ~[tomcat-embed-core-10.1.5.jar:6.0]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:223) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.websocket.server.WsFilter.doFilter(WsFilter.java:53) ~[tomcat-embed-websocket-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.springframework.web.filter.RequestContextFilter.doFilterInternal(RequestContextFilter.java:100) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.springframework.web.filter.FormContentFilter.doFilterInternal(FormContentFilter.java:93) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:116) ~[spring-web-6.0.4.jar:6.0.4]\n    at org.apache.catalina.core.ApplicationFilterChain.internalDoFilter(ApplicationFilterChain.java:185) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.ApplicationFilterChain.doFilter(ApplicationFilterChain.java:158) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.StandardWrapperValve.invoke(StandardWrapperValve.java:177) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.StandardContextValve.invoke(StandardContextValve.java:97) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.authenticator.AuthenticatorBase.invoke(AuthenticatorBase.java:542) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.StandardHostValve.invoke(StandardHostValve.java:119) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.valves.ErrorReportValve.invoke(ErrorReportValve.java:92) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.core.StandardEngineValve.invoke(StandardEngineValve.java:78) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.catalina.connector.CoyoteAdapter.service(CoyoteAdapter.java:357) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.coyote.http11.Http11Processor.service(Http11Processor.java:400) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.coyote.AbstractProcessorLight.process(AbstractProcessorLight.java:65) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.coyote.AbstractProtocol$ConnectionHandler.process(AbstractProtocol.java:859) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.util.net.NioEndpoint$SocketProcessor.doRun(NioEndpoint.java:1734) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.util.net.SocketProcessorBase.run(SocketProcessorBase.java:52) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1191) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.util.threads.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:659) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at org.apache.tomcat.util.threads.TaskThread$WrappingRunnable.run(TaskThread.java:61) ~[tomcat-embed-core-10.1.5.jar:10.1.5]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<pre><code> {\n     &quot;timestamp&quot;: &quot;2023-01-20T12:47:38.113+00:00&quot;, \n     &quot;status&quot;: 500, \n     &quot;error&quot;: &quot;Internal Server Error&quot;, \n     &quot;path&quot;: &quot;/api/employees&quot; \n }\n</code></pre>\n<p>My <code>pom.xml</code> file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.advanced&lt;/groupId&gt;\n    &lt;artifactId&gt;sprintboot-advanced&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;war&lt;/packaging&gt;\n    &lt;name&gt;sprintboot-advanced&lt;/name&gt;\n    &lt;description&gt;Sprinboot Advanced&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-tomcat&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Main:</p>\n<pre><code>package com.advanced.app1;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\n\n@SpringBootApplication\npublic class SprintbootAdvanced1Application {\n\n    public static void main(String[] args) {\n        SpringApplication.run(SprintbootAdvanced1Application.class, args);\n    }\n\n}\n</code></pre>\n<p>Controller:</p>\n<pre><code>package com.advanced.app1.controller;\n\nimport org.springframework.http.HttpStatus; \nimport org.springframework.http.ResponseEntity;\nimport org.springframework.web.bind.annotation.PostMapping;\nimport org.springframework.web.bind.annotation.RequestBody;\nimport org.springframework.web.bind.annotation.RequestMapping;\nimport org.springframework.web.bind.annotation.RestController;\nimport com.advanced.app1.model.Employee;\nimport com.advanced.app1.service.EmployeeService;\n\n@RestController\n@RequestMapping(&quot;/api/employees&quot;)\npublic class EmployeeController {\n    \n    private EmployeeService employeeService;\n\n    public EmployeeController(EmployeeService employeeService) {\n        super();\n        this.employeeService = employeeService;\n    }\n    \n    // build REST API\n    @PostMapping()\n    public ResponseEntity&lt;Employee&gt; saveEmployee(@RequestBody Employee employee){\n        return new ResponseEntity&lt;Employee&gt;(employeeService.saveEmployee(employee), HttpStatus.CREATED);\n    }\n}\n</code></pre>\n<p>Exception:</p>\n<pre><code>package com.advanced.app1.exception;\n\nimport org.springframework.http.HttpStatus;\nimport org.springframework.web.bind.annotation.ResponseStatus;\n\n@ResponseStatus(value = HttpStatus.NOT_FOUND)\npublic class ResourceNotFoundException extends RuntimeException{\n    /**\n     * \n     */\n    private static final long serialVersionUID = 1L;\n    private String resourceName;\n    private String fieldName;\n    private Object fieldValue;\n    \n    public ResourceNotFoundException(String resourceName, String fieldName, Object fieldValue) {\n        super(String.format(&quot;%s not found with %s : '%s'&quot;, resourceName, fieldName, fieldValue));\n        this.resourceName = resourceName;\n        this.fieldName = fieldName;\n        this.fieldValue = fieldValue;\n    }\n    \n    public String getResourceName() {\n        return resourceName;\n    }\n    \n    public String getFieldName() {\n        return fieldName;\n    }\n    \n    public Object getFieldValue() {\n        return fieldValue;\n    }   \n}\n</code></pre>\n<p>Model:</p>\n<pre><code>package com.advanced.app1.model;\n\nimport jakarta.persistence.Column;\nimport jakarta.persistence.Entity;\nimport jakarta.persistence.GeneratedValue;\nimport jakarta.persistence.GenerationType;\nimport jakarta.persistence.Id;\nimport jakarta.persistence.Table;\nimport lombok.Data;\n\n@Data\n@Entity\n@Table(name=&quot;employees&quot;)\npublic class Employee {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private long id;\n    \n    @Column(name = &quot;first_name&quot;, nullable = false)\n    private String firstName;\n    \n    @Column(name = &quot;last_name&quot;)\n    private String lastName;\n    \n    @Column(name = &quot;email&quot;)\n    private String email;\n}\n</code></pre>\n<p>Repository:</p>\n<pre><code>package com.advanced.app1.repository;\n\nimport org.springframework.data.jpa.repository.JpaRepository;   \nimport com.advanced.app1.model.Employee;\n\npublic interface EmployeeRepository extends JpaRepository&lt;Employee, Long&gt; {\n\n}\n</code></pre>\n<p>Service:</p>\n<pre><code>package com.advanced.app1.service;\n\nimport com.advanced.app1.model.Employee;\n\npublic interface EmployeeService {\n\n    Employee saveEmployee(Employee employee);\n} \n</code></pre>\n<p>ServiceImpl:</p>\n<pre><code>package com.advanced.app1.service.impl;\n\nimport org.springframework.stereotype.Service;  \nimport com.advanced.app1.model.Employee;\nimport com.advanced.app1.repository.EmployeeRepository;\nimport com.advanced.app1.service.EmployeeService;\n\n@Service\npublic class EmployeeServiceImpl implements EmployeeService{\n\n    private EmployeeRepository employeeRepository;\n    \n    public EmployeeServiceImpl(EmployeeRepository employeeRepository) {\n        super();\n        this.employeeRepository = employeeRepository;\n    }\n\n    @Override\n    public Employee saveEmployee(Employee employee) {\n        return employeeRepository.save(employee);\n    }\n\n}\n</code></pre>\n<p><code>application.properties</code>:</p>\n<pre><code>spring.datasource.url=jdbc:mysql://localhost:3306/test?useSSL=false\nspring.datasource.username=root\nspring.datasource.password=root\nspring.jpa.properties.hibernate.dialect= org.hibernate.dialect.MySQLDialect\nspring.jpa.hibernate.ddl-auto = update\n</code></pre>\n<p>Headers for request and return <code>POSTMAN</code>:\n<a href=\"https://i.stack.imgur.com/9oMiT.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9oMiT.png\" alt=\"Headers\" /></a></p>\n"},{"tags":["java","calendar"],"comments":[{"owner":{"user_id":7109162,"display_name":"XtremeBaumer"},"edited":false,"comment_id":132653460,"body":"This works just fine for me. But you should definitely be using new <code>java.time</code> classes for this"},{"owner":{"user_id":3474,"display_name":"erickson"},"edited":false,"comment_id":132664678,"body":"I can&#39;t reproduce this behavior on Java 17 or Java 8. Can you please be specific about the version of Java you are running (vendor and version)?"},{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":132668789,"body":"Which is your default time zone? Is that BRT for Brasilia Time? America/Sao_Paulo??"},{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":132669002,"body":"Could this have to do with an outdated time zone database? I seem to remember that the summer time (DST) rules in Brazil were changed a few years ago, and I figure that if your Java has the old version, it just might give unexpected results like these."},{"owner":{"user_id":8007713,"display_name":"Guilherme Barboza"},"edited":false,"comment_id":132673281,"body":"@Ole V.V could be right. I&#39;m starting to believe that this problem might be the result of a somewhat outdated Java version and some weird PC configurations. I&#39;ll try to run the same tests on a newer machine (a remote production server on S&#227;o Paulo) and see what happens there."},{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":132675218,"body":"If you have reasons not to switch to a newer Java version immediately, you can probably find a tool for updating the tz data in the Java installation that you have got. I believe this happens differently in Java implementations from different vendors, so search for how to do in your case."}],"answers":[{"owner":{"user_id":8873770,"display_name":"Jonxag"},"up_vote_count":0,"is_accepted":false,"creation_date":1674136290,"answer_id":75173269,"body":"<p>Probably this is caused by the default TimeZone of your PC , try adding this after you declare the Calnedar object</p>\n<pre><code>cal.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\n</code></pre>\n"},{"owner":{"user_id":10819573,"display_name":"Arvind Kumar Avinash"},"up_vote_count":2,"is_accepted":false,"creation_date":1674143354,"answer_id":75174847,"body":"<h2>java.time</h2>\n<p>The <code>java.util</code> Date-Time API and their formatting API, <code>SimpleDateFormat</code> are outdated and error-prone. It is recommended to stop using them completely and switch to the <a href=\"https://www.oracle.com/technical-resources/articles/java/jf14-Date-Time.html\" rel=\"nofollow noreferrer\">modern Date-Time API</a>.</p>\n<p>With <code>java.time</code>, the modern date-time API, you have <a href=\"https://docs.oracle.com/javase/tutorial/datetime/iso/overview.html\" rel=\"nofollow noreferrer\">specialized types</a> for different purposes. A very common type is <code>ZonedDateTime</code> which contains the information of the timezone along with the date and time information.</p>\n<p><strong>Note</strong>: Unlike <code>java.util</code> date-time types, <code>java.time</code> types are immutable i.e. you always get a new instance on setting a new value; therefore, like a <code>String</code>, you need to assign the new value to the reference if you want the reference to point to the new value.</p>\n<p><strong>Demo</strong>:</p>\n<pre><code>import java.time.LocalDate;\nimport java.time.LocalTime;\nimport java.time.ZoneId;\nimport java.time.ZonedDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.time.temporal.ChronoField;\nimport java.time.temporal.TemporalAdjusters;\nimport java.util.Locale;\n\nclass Main {\n    public static void main(String[] args) {\n        // Replace ZoneId.systemDefault() with the applicable ZoneId e.g.\n        // ZoneId.of(&quot;America/New_York&quot;)\n        ZonedDateTime zdt = ZonedDateTime.now(ZoneId.systemDefault());\n        System.out.println(zdt);\n\n        zdt = zdt.with(TemporalAdjusters.firstDayOfMonth());\n        System.out.println(zdt);\n\n        zdt = zdt.withHour(LocalTime.MIN.getHour());\n        System.out.println(zdt);\n\n        zdt = zdt.withMinute(LocalTime.MIN.getMinute());\n        System.out.println(zdt);\n\n        zdt = zdt.withSecond(LocalTime.MIN.getSecond());\n        System.out.println(zdt);\n\n        zdt = zdt.with(ChronoField.MILLI_OF_SECOND, LocalTime.MIN.getLong(ChronoField.MILLI_OF_SECOND));\n        DateTimeFormatter formatter = DateTimeFormatter.ofPattern(&quot;uuuu-MM-dd'T'HH:mm:ss.SSSXXX&quot;, Locale.ENGLISH);\n        System.out.println(zdt.format(formatter));\n\n        // In a single statement\n        String output = ZonedDateTime.now(ZoneId.systemDefault())\n                .with(TemporalAdjusters.firstDayOfMonth())\n                .withHour(LocalTime.MIN.getHour())\n                .withMinute(LocalTime.MIN.getMinute())\n                .withSecond(LocalTime.MIN.getSecond())\n                .with(ChronoField.MILLI_OF_SECOND, LocalTime.MIN.getLong(ChronoField.MILLI_OF_SECOND))\n                .format(formatter);\n        System.out.println(output);\n\n        // There is a better way if all you want is day-1 with minimum time\n        zdt = LocalDate.now(ZoneId.systemDefault())\n                .with(TemporalAdjusters.firstDayOfMonth())\n                .atStartOfDay()\n                .atZone(ZoneId.systemDefault());\n        System.out.println(zdt.format(formatter));\n    }\n}\n</code></pre>\n<p><strong>Output from a sample run</strong>:</p>\n<pre><code>2023-01-19T16:50:43.811714Z[GMT]\n2023-01-01T16:50:43.811714Z[GMT]\n2023-01-01T00:50:43.811714Z[GMT]\n2023-01-01T00:00:43.811714Z[GMT]\n2023-01-01T00:00:00.811714Z[GMT]\n2023-01-01T00:00:00.000Z\n2023-01-01T00:00:00.000Z\n2023-01-01T00:00:00.000Z\n</code></pre>\n<p><a href=\"https://ideone.com/nIPvu7\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n<p>Learn more about the modern Date-Time API from <strong><a href=\"https://docs.oracle.com/javase/tutorial/datetime/index.html\" rel=\"nofollow noreferrer\">Trail: Date Time</a></strong>.</p>\n<h2>In case you need a solution using the legacy API:</h2>\n<p><a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Calendar.html#getTime()\" rel=\"nofollow noreferrer\"><code>Calendar#getTime</code></a> returns an instance of <code>java.util.Date</code> which is not a real date-time object; rather, it just contains the number of milliseconds from <em>January 1, 1970, 00:00:00 GMT</em>. The <a href=\"https://docs.oracle.com/javase/7/docs/api/java/util/Date.html#toString()\" rel=\"nofollow noreferrer\"><code>Date#toString</code></a> applies the system's timezone to calculate the date-time and returns the same.</p>\n<p>The way to get the date-time string with the desired timezone is by applying the timezone to the <code>SimpleDateFormat</code> and using it to format the instance of <code>java.util.Date</code>.</p>\n<p><strong>Demo</strong>:</p>\n<pre><code>import java.text.SimpleDateFormat;\nimport java.util.Calendar;\nimport java.util.Locale;\nimport java.util.TimeZone;\n\nclass Main {\n    public static void main(String[] args) {\n        SimpleDateFormat sdf = new SimpleDateFormat(&quot;EEE MMM dd HH:mm:ss.SSS z yyyy&quot;, Locale.ENGLISH);\n        sdf.setTimeZone(TimeZone.getTimeZone(&quot;UTC&quot;));\n\n        Calendar cal = Calendar.getInstance();\n        System.out.println(&quot;After instantiation:                  &quot; + sdf.format(cal.getTime()));\n\n        cal.set(Calendar.DAY_OF_MONTH, cal.getActualMinimum(Calendar.DAY_OF_MONTH));\n        System.out.println(&quot;After configuring the Day of Month:   &quot; + sdf.format(cal.getTime()));\n\n        cal.set(Calendar.HOUR_OF_DAY, cal.getActualMinimum(Calendar.HOUR_OF_DAY));\n        System.out.println(&quot;After configuring the Hour of day:    &quot; + sdf.format(cal.getTime()));\n\n        cal.set(Calendar.MINUTE, cal.getActualMinimum(Calendar.MINUTE));\n        System.out.println(&quot;After configuring the Minutes:        &quot; + sdf.format(cal.getTime()));\n\n        cal.set(Calendar.SECOND, cal.getActualMinimum(Calendar.SECOND));\n        System.out.println(&quot;After configuring the Seconds:        &quot; + sdf.format(cal.getTime()));\n\n        cal.set(Calendar.MILLISECOND, cal.getActualMinimum(Calendar.MILLISECOND));\n        System.out.println(&quot;After configuring the Millis:         &quot; + sdf.format(cal.getTime()));\n    }\n}\n</code></pre>\n<p><strong>Output from a sample run</strong>:</p>\n<pre><code>After instantiation:                  Thu Jan 19 15:29:38.381 UTC 2023\nAfter configuring the Day of Month:   Sun Jan 01 15:29:38.381 UTC 2023\nAfter configuring the Hour of day:    Sun Jan 01 00:29:38.381 UTC 2023\nAfter configuring the Minutes:        Sun Jan 01 00:00:38.381 UTC 2023\nAfter configuring the Seconds:        Sun Jan 01 00:00:00.381 UTC 2023\nAfter configuring the Millis:         Sun Jan 01 00:00:00.000 UTC 2023\n</code></pre>\n<p><a href=\"https://ideone.com/tqSSxl\" rel=\"nofollow noreferrer\"><kbd>ONLINE DEMO</kbd></a></p>\n"}],"owner":{"user_id":8007713,"display_name":"Guilherme Barboza"},"view_count":252,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1674135918,"question_id":75173196,"body":"<p>I need to compare a certain date to the current date/time to make sure that it comes before the first day/hour/min/sec of the current month. In order to implement this feature, a configure a <code>Calendar</code> instance using its <code>getActualMinimum</code> method, however, today (Thursday, 19/01/2023 - 10:40:18 BRT 2023), it presented a behavior that I have never faced before. Consider the following code:</p>\n<pre><code>    Calendar cal = Calendar.getInstance();\n    System.out.println(&quot;After instantiation:                  &quot; + cal.getTime());\n    \n    cal.set(Calendar.DAY_OF_MONTH, cal.getActualMinimum(Calendar.DAY_OF_MONTH));\n    System.out.println(&quot;After configuring the Day of Month:   &quot; + cal.getTime());\n    \n    cal.set(Calendar.HOUR_OF_DAY, cal.getActualMinimum(Calendar.HOUR_OF_DAY));\n    System.out.println(&quot;After configuring the Hour of day:    &quot; + cal.getTime());\n    \n    cal.set(Calendar.MINUTE, cal.getActualMinimum(Calendar.MINUTE));\n    System.out.println(&quot;After configuring the Minutes:        &quot; + cal.getTime());\n    \n    cal.set(Calendar.SECOND, cal.getActualMinimum(Calendar.SECOND));\n    System.out.println(&quot;After configuring the Seconds:        &quot; + cal.getTime());\n    \n    cal.set(Calendar.MILLISECOND, cal.getActualMinimum(Calendar.MILLISECOND));\n    System.out.println(&quot;After configuring the Millis:         &quot; + cal.getTime());\n</code></pre>\n<p>The code above, in the moment that this post is being created, would print to the console:</p>\n<pre><code>After instantiation:                  Thu Jan 19 10:40:18 BRT 2023\nAfter configuring the Day of Month:   Sun Jan 01 10:40:18 BRT 2023\nAfter configuring the Hour of day:    Sat Dec 31 23:40:18 BRT 2022\nAfter configuring the Minutes:        Sat Dec 31 23:00:18 BRT 2022\nAfter configuring the Seconds:        Sat Dec 31 23:00:00 BRT 2022\nAfter configuring the Millis:         Sat Dec 31 23:00:00 BRT 2022\n</code></pre>\n<p>Could someone explain why, after configuring the Hour of day, the value was set to <strong>23</strong> and not <strong>00</strong>?</p>\n<p>Edit: I`m using Java 8, specifically JDK 1.8.0_241</p>\n<p>My current and default Time Zone is the <em>Horário Padrão de Brasília</em> (BRT or GMT-3)</p>\n"},{"tags":["java","css","javafx"],"comments":[{"owner":{"user_id":1155209,"display_name":"jewelsea"},"edited":false,"comment_id":132642818,"body":"Read the <a href=\"https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/doc-files/cssref.html#typeurl\" rel=\"nofollow noreferrer\">uri documentation in the CSS reference</a>.  The resolution path is different depending on whether you access from a style sheet or an inline style.  Try specifying the fully qualified path relative to the root of the classpath."},{"owner":{"user_id":1155209,"display_name":"jewelsea"},"edited":false,"comment_id":132644126,"body":"Follow <a href=\"https://www.oracle.com/java/technologies/javase/codeconventions-namingconventions.html\" rel=\"nofollow noreferrer\">java naming conventions</a>.  There are also <a href=\"https://stackoverflow.com/questions/7927193/css-class-naming-convention\">CSS naming conventions</a>, they are generally less rigorously followed, but it can&#39;t hurt to follow a useful standard there too."}],"answers":[{"owner":{"user_id":1155209,"display_name":"jewelsea"},"up_vote_count":2,"is_accepted":false,"creation_date":1674097493,"answer_id":75167365,"body":"<p><strong>Try specifying the fully qualified path relative to the root of the classpath.</strong></p>\n<p>The resolution path is different depending on whether you access a CSS URL resource from a style sheet or an inline style.</p>\n<p>Read the <a href=\"https://openjfx.io/javadoc/19/javafx.graphics/javafx/scene/doc-files/cssref.html#typeurl\" rel=\"nofollow noreferrer\">uri documentation in the CSS reference</a>. It is well-written, with clear examples that will help you understand your issue.  Quoting from the documentation for CSS URL resolution:</p>\n<blockquote>\n<ol>\n<li>If the address does not have a <code>scheme:</code> component, the address is considered to be the <code>path</code> component only.</li>\n<li>A leading <code>/</code> character indicates that the <code>path</code> is relative to the root of the classpath.</li>\n<li>If the style appears in a stylesheet and has no leading <code>/</code> character, the path is relative to the base URI of the stylesheet.</li>\n<li>If the style appears in an inline style, the path is relative to the root of the classpath (regardless of whether or not there is a leading <code>/</code>).</li>\n</ol>\n</blockquote>\n<p><strong>Example</strong></p>\n<pre><code>-fx-background-image: url('Background.quiz.jpg');\n</code></pre>\n<p>When written inside a CSS stylesheet, this will look for an image location in the classpath adjacent to the stylesheet.</p>\n<p>When written in an inline style, it will look for an image location in the root of the classpath.</p>\n<p>Instead, for the inline style URL, if you specify the full path to the image relative to the root of the classpath, then the image will be found.</p>\n<p>If you package your app as a jar, then run <code>jar tvf</code> on the packaged jar, and your image is located, for instance, in the location <code>image/Background2.quiz.jpg</code>, then the URL to use in an inline style would be:</p>\n<pre><code>settingsGrid.setStyle(&quot;-fx-background-image: url('image/Background2.quiz.jpg')&quot;);\n</code></pre>\n"}],"owner":{"user_id":21039788,"display_name":"Ignitz"},"view_count":54,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1674084223,"question_id":75166288,"body":"<p>I want to change the background image from a scene.</p>\n<p>This is from the css file.</p>\n<pre><code>.SettingsGrid {\n    -fx-background-image: url('Background.quiz.jpg');\n    /*-fx-background: #ffffff;*/\n    -fx-background-size: cover;\n}\n</code></pre>\n<p>I tried using this:</p>\n<pre><code>SettingsGrid.setStyle(&quot;-fx-background-image: url('Background2.quiz.jpg')&quot;);\n</code></pre>\n<p>But instead of the background changing to the new image, it just went white.</p>\n<p>Just changing the background colour works.</p>\n"},{"tags":["java","maven","log4j","pom.xml","slf4j"],"comments":[{"owner":{"user_id":3636601,"display_name":"Jens"},"edited":false,"comment_id":132635526,"body":"You have log4j and logback in the classpath remove one."},{"owner":{"user_id":13954773,"display_name":"Ashley Xu"},"edited":false,"comment_id":132635637,"body":"@Jens Would you happen to know how to remove it?  Thanks!"},{"owner":{"user_id":3636601,"display_name":"Jens"},"edited":false,"comment_id":132636309,"body":"it must be a dependency in your project. remove it from there"}],"answers":[{"owner":{"user_id":1064245,"display_name":"M A"},"up_vote_count":2,"is_accepted":true,"creation_date":1674060295,"answer_id":75162534,"body":"<p>Based on <a href=\"https://logging.apache.org/log4j/2.x/log4j-slf4j-impl/\" rel=\"nofollow noreferrer\">this documentation</a>:</p>\n<blockquote>\n<p>Due to a break in compatibility in the SLF4J binding, as of release 2.19.0 two SLF4J to Log4j Adapters are provided.</p>\n<ol>\n<li><code>log4j-slf4j-impl</code> should be used with SLF4J 1.7.x releases or older.</li>\n<li><code>log4j-slf4j2-impl</code> should be used with SLF4J 2.0.x releases or newer.</li>\n</ol>\n<p>Applications that take advantage of the Java Module System should use SLF4J 2.0.x and log4j-slf4j2-impl.</p>\n</blockquote>\n<p>So the simplest way (if you need SLF4J 2) is to use <code>&lt;artifactId&gt;log4j-slf4j2-impl&lt;/artifactId&gt;</code>. The other thing you can do is to revert back to <code>slf4j-api</code> 1.7.x.</p>\n<p><strong>Other notes:</strong></p>\n<ul>\n<li><p>The SLF4J log shows that <code>logback-classic</code> is also present in the dependency tree. You need to select either <code>logback-classic</code> or the log4j binding. Run <code>mvn dependency:tree</code> on your project to find where <code>logback-classic</code> is being added.</p>\n</li>\n<li><p>If you want to keep <code>logback-classic</code>, then same as mentioned above, you need to use the <code>logback-classic</code> compatible with SLF4J 2.</p>\n</li>\n</ul>\n"}],"owner":{"user_id":13954773,"display_name":"Ashley Xu"},"view_count":981,"up_vote_count":3,"accepted_answer_id":75162534,"answer_count":1,"score":2,"creation_date":1674059118,"question_id":75162281,"body":"<p>I am currently getting the below errors when trying to run a Spring Java program.</p>\n<pre><code>SLF4J: No SLF4J providers were found.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See https://www.slf4j.org/codes.html#noProviders for further details.\nSLF4J: Class path contains SLF4J bindings targeting slf4j-api versions 1.7.x or earlier.\nSLF4J: Ignoring binding found at [jar:file:/C:/Users/user/.m2/repository/ch/qos/logback/logback-classic/1.2.11/logback-classic-1.2.11.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: Ignoring binding found at [jar:file:/C:/Users/user/.m2/repository/org/apache/logging/log4j/log4j-slf4j-impl/2.19.0/log4j-slf4j-impl-2.19.0.jar!/org/slf4j/impl/StaticLoggerBinder.class]\nSLF4J: See https://www.slf4j.org/codes.html#ignoredBindings for an explanation.\n</code></pre>\n<p>Here is the section in the pom.xml file that has the SLF4J and Log4J dependencies.  This same section has worked in previous projects.</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;org.slf4j&lt;/groupId&gt;\n            &lt;artifactId&gt;slf4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.0.5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-slf4j-impl&lt;/artifactId&gt;\n            &lt;version&gt;2.19.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-api&lt;/artifactId&gt;\n            &lt;version&gt;2.19.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.logging.log4j&lt;/groupId&gt;\n            &lt;artifactId&gt;log4j-core&lt;/artifactId&gt;\n            &lt;version&gt;2.19.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I don't have any components that are targeting  indings for slf4j-api version 1..x or earlier.  This error message seems to both say that I don't have SLF4J and that I have the wrong version.</p>\n<p>If there are any thoughts on how to resolve this, I would appreciate it.  Thank you!</p>\n<p>I have tried using different dependencies in the pom.xml file, but ultimately these have worked in a previous program.  I have also tried looking at dependencies that might also use SLF4J and excluding SLF4J from them, but I am still getting an error message.  I have tried solutions from other similar questions asked but keep getting the same error.</p>\n"},{"tags":["java","openrewrite"],"answers":[{"owner":{"user_id":1685998,"display_name":"MGK"},"up_vote_count":2,"is_accepted":false,"creation_date":1674050321,"answer_id":75160369,"body":"<p>I found a solution. I've added the following to my <code>init.gradle</code> file:</p>\n<pre><code> rewrite {\n      exclusion(\n        &quot;**/*.gradle&quot;\n      )\n</code></pre>\n"}],"owner":{"user_id":1685998,"display_name":"MGK"},"view_count":89,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1673945925,"question_id":75143989,"body":"<p>I want to use the recipe <code>AddOrUpdateAnnotationAttribute</code> for adding parameters to a Java annotation. This is part of the package <code>org.openrewrite.java</code>, so I've added only the following dependency in my <code>init.gradle</code>:</p>\n<pre><code>    dependencies {\n      rewrite(&quot;org.openrewrite:rewrite-java&quot;)\n    }\n</code></pre>\n<p>When I am running the recipe, I'm getting the error</p>\n<blockquote>\n<p>There were problems parsing 1 sources:\nbuild.gradle</p>\n</blockquote>\n<p>As the recipe only refactors java files, I wonder, why <code>build.gradle</code> is parsed at all. How can I exclude build.gradle from being parsed?</p>\n"},{"tags":["java","kubernetes","fabric8"],"answers":[{"owner":{"user_id":2830116,"display_name":"Rohan Kumar"},"up_vote_count":2,"is_accepted":false,"creation_date":1673885735,"answer_id":75136897,"body":"<p>If you want to trigger an already existing CronJob, you need to provide ownerReference for the existing CronJob in Job:</p>\n<pre class=\"lang-java prettyprint-override\"><code>// Get already existing CronJob\nCronJob cronJob = kubernetesClient.batch().v1()\n       .cronjobs()\n       .inNamespace(namespace)\n       .withName(cronJobName)\n       .get();\n\n// Create new Job object referencing CronJob\nJob newJobToCreate = new JobBuilder()\n       .withNewMetadata()\n       .withName(jobName)\n       .addNewOwnerReference()\n       .withApiVersion(&quot;batch/v1&quot;)\n       .withKind(&quot;CronJob&quot;)\n       .withName(cronJob.getMetadata().getName())\n       .withUid(cronJob.getMetadata().getUid())\n       .endOwnerReference()\n       .addToAnnotations(&quot;cronjob.kubernetes.io/instantiate&quot;, &quot;manual&quot;)\n       .endMetadata()\n       .withSpec(cronJob.getSpec().getJobTemplate().getSpec())\n       .build();\n// Apply job object to Kubernetes Cluster\nkubernetesClient.batch().v1()\n       .jobs()\n       .inNamespace(namespace)\n       .resource(newJobToCreate)\n       .create();\n</code></pre>\n"}],"owner":{"user_id":1914510,"display_name":"Ali Taha"},"view_count":161,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1673820075,"question_id":75128703,"body":"<p>I'm trying to trigger cronjob manually(not scheduled) using fabric8 library\nbut getting the following error:</p>\n<pre><code>Caused by: io.fabric8.kubernetes.client.KubernetesClientException: Failure executing: POST at: https://172.20.0.1:443/apis/batch/v1/\nnamespaces/engineering/jobs. Message: Job.batch &quot;app-chat-manual-947171&quot; is invalid: spec.template.spec.containers[0].name: Re\nquired value. Received status: Status(apiVersion=v1, code=422, details=StatusDetails(causes=[StatusCause(field=spec.template.spec.co\nntainers[0].name, message=Required value, reason=FieldValueRequired, additionalProperties={})], group=batch, kind=Job, name=ap\np-chat-manual-947171, retryAfterSeconds=null, uid=null, additionalProperties={}), kind=Status, message=Job.batch &quot;app-chat-man\nual-947171&quot; is invalid: spec.template.spec.containers[0].name: Required value, metadata=ListMeta(_continue=null, remainingItemCount=\nnull, resourceVersion=null, selfLink=null, additionalProperties={}), reason=Invalid, status=Failure, additionalProperties={}).\n</code></pre>\n<p>my code is running at the cluster:</p>\n<p>maven dependency:</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;io.fabric8&lt;/groupId&gt;\n            &lt;artifactId&gt;kubernetes-client&lt;/artifactId&gt;\n            &lt;version&gt;6.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>java code:</p>\n<pre><code>public static void triggerCronjob(String cronjobName, String applicableNamespace) {\n        KubernetesClient kubernetesClient = new KubernetesClientBuilder().build();\n\n        final String podName = String.format(&quot;%s-manual-%s&quot;, cronjobName.length() &gt; 38 ? cronjobName.substring(0, 38) : cronjobName,\n                new Random().nextInt(999999));\n\n        System.out.println(&quot;triggerCronjob method invoked, applicableNamespace: &quot; + applicableNamespace\n                + &quot;, cronjobName: &quot; + cronjobName + &quot;, podName: &quot; + podName);\n\n        Job job = new JobBuilder()\n                .withApiVersion(&quot;batch/v1&quot;)\n                .withNewMetadata()\n                .withName(podName)\n                .endMetadata()\n                .withNewSpec()\n                .withBackoffLimit(4)\n                .withNewTemplate()\n                .withNewSpec()\n                .addNewContainer()\n                .withName(podName)\n                .withImage(&quot;perl&quot;)\n                .withCommand(&quot;perl&quot;, &quot;-Mbignum=bpi&quot;, &quot;-wle&quot;, &quot;print bpi(2000)&quot;)\n                .endContainer()\n                .withRestartPolicy(&quot;Never&quot;)\n                .endSpec()\n                .endTemplate()\n                .endSpec().build();\n\n        kubernetesClient.batch().v1().jobs().inNamespace(applicableNamespace).createOrReplace(job);\n        kubernetesClient.close();\n        System.out.println(&quot;CronJob triggered: applicableNamespace: &quot; + applicableNamespace + &quot;, cronjob name: &quot; + cronjobName);\n    }\n</code></pre>\n<p>the code executed at the kubernetes cluster, but not form the application, it's an external program that's running in the cluster.</p>\n<p>my goal is to trigger given job in a given namespace.</p>\n"},{"tags":["java","winapi","visibility","jna"],"answers":[{"owner":{"user_id":1161484,"display_name":"Daniel Widdis"},"up_vote_count":2,"is_accepted":true,"creation_date":1673823662,"answer_id":75128982,"body":"<p>Your intuition to use <code>IsWindowVisible</code> from <code>User32</code> is good. JNA has actually implemented this in its <a href=\"https://github.com/java-native-access/jna/blob/master/contrib/platform/src/com/sun/jna/platform/WindowUtils.java\" rel=\"nofollow noreferrer\">WindowUtils</a> class.</p>\n<pre><code>List&lt;DesktopWindow&gt; windows = WindowUtils.getAllWindows(true);\n</code></pre>\n<p>The boolean parameter is <code>onlyVisibleWindows</code>.</p>\n<p>Note that &quot;visible&quot; here refers to the state of the window itself, not whether it is minimized (may have off-screen or &quot;zero&quot; coordinate) or &quot;behind&quot; vs. &quot;on top&quot; of other windows and thus visible to the user.  From the <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/winuser/nf-winuser-iswindowvisible\" rel=\"nofollow noreferrer\"><code>IsWindowVisible</code></a> documentation (note the second paragraph):</p>\n<blockquote>\n<p>If the specified window, its parent window, its parent's parent window, and so forth, have the <strong>WS_VISIBLE</strong> style, the return value is nonzero. Otherwise, the return value is zero.</p>\n<p>Because the return value specifies whether the window has the <strong>WS_VISIBLE</strong> style, it may be nonzero even if the window is totally obscured by other windows.</p>\n</blockquote>\n<p>In order to determine whether the window is partially or fully obscured, you would have to evaluate its <code>locAndSize</code> rectangle relative to all windows &quot;in front&quot; of it using Z-order.  You could do this on a pixel-by-pixel basis or just evaluate the corner points, depending on how you want to handle partially obscured windows.</p>\n<p>The JNA <code>getAllWindows()</code> method returns a list (filtered by visibility) of JNA <code>DesktopWindow</code>s encapsulating these fields:</p>\n<pre><code>private HWND hwnd;\nprivate String title;\nprivate String filePath;\nprivate Rectangle locAndSize;\n</code></pre>\n<p>Internally you can see <a href=\"https://github.com/java-native-access/jna/blob/8f9886fb766b43700941c878a264a9d0302f7517/contrib/platform/src/com/sun/jna/platform/WindowUtils.java#L1240-L1270\" rel=\"nofollow noreferrer\">the implementation</a> in the inner class <code>W32WindowUtils</code>, which uses a callback function sent to <code>User32</code>'s <code>EnumWindows</code> function:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic List&lt;DesktopWindow&gt; getAllWindows(final boolean onlyVisibleWindows) {\n    final List&lt;DesktopWindow&gt; result = new LinkedList&lt;DesktopWindow&gt;();\n\n    final WNDENUMPROC lpEnumFunc = new WNDENUMPROC() {\n        @Override\n        public boolean callback(final HWND hwnd, final Pointer arg1) {\n            try {\n                final boolean visible = !onlyVisibleWindows\n                    || User32.INSTANCE.IsWindowVisible(hwnd);\n                if (visible) {\n                    final String title = getWindowTitle(hwnd);\n                    final String filePath = getProcessFilePath(hwnd);\n                    final Rectangle locAndSize = getWindowLocationAndSize(hwnd);\n                    result.add(new DesktopWindow(hwnd, title, filePath,\n                                                 locAndSize));\n                }\n            } catch (final Exception e) {\n                // FIXME properly handle whatever error is raised\n                e.printStackTrace();\n            }\n\n            return true;\n        }\n    };\n\n    if (!User32.INSTANCE.EnumWindows(lpEnumFunc, null))\n        throw new Win32Exception(Kernel32.INSTANCE.GetLastError());\n\n    return result;\n}\n</code></pre>\n<p>I maintain the JNA-based <a href=\"https://github.com/oshi/oshi\" rel=\"nofollow noreferrer\">OSHI</a> project, and have implemented this cross-platform via <code>new SystemInfo().getOperatingSystem().getDesktopWindows()</code>, which uses the above implementation on Windows and adds information from other functions to get the window ordering. OSHI's return list includes these fields and the returned list is already sorted in <code>order</code> to aid you in determining user visibility:</p>\n<pre><code>private final long windowId;\nprivate final String title;\nprivate final String command;\nprivate final Rectangle locAndSize;\nprivate final long owningProcessId;\nprivate final int order;\nprivate final boolean visible;\n</code></pre>\n"}],"owner":{"user_id":17481728,"display_name":"Noah Fraiture"},"view_count":170,"up_vote_count":2,"accepted_answer_id":75128982,"answer_count":1,"score":2,"creation_date":1673815882,"question_id":75128321,"body":"<p>I am programming an overlay in Java showing information for multiple windows.</p>\n<p>I need it to follow the window that it is tracking, and to do this I regularly take information about the current windows to update the position of my overlay. But I would also need to know if the windows are visible to hide the overlay if not. Ideally I should be able to do all this in real time but I'm afraid it's too performance-intensive.</p>\n<p>I do all of this with JNA</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface User32 extends StdCallLibrary {\n    User32 INSTANCE = (User32) Native.load(&quot;user32&quot;, User32.class, W32APIOptions.DEFAULT_OPTIONS);\n    HWND FindWindow(String lpClassName, String lpWindowName);\n    int GetWindowRect(HWND handle, int[] rect);\n    boolean IsWindowVisible(HWND handle); // always true if window exist\n}\n\npublic static int[] getWindowInformation(String windowName) {\n\n    int[] rectangle = {0,0,0,0};\n\n    HWND hwnd = User32.INSTANCE.FindWindow(null, windowName);\n\n    User32.INSTANCE.GetWindowRect(hwnd, rectangle);\n    boolean res = User32.INSTANCE.IsWindowVisible(hwnd);\n    System.out.println(windowName + &quot; is visible ? &quot; + res);\n\n    return rectangle;\n}\n</code></pre>\n<p>Here is my code, you can see that I tried &quot;IsWindowVisible&quot; after read entirely the User32 API of JNA, but it doesn't do what I want.</p>\n"},{"tags":["java","json","jolt"],"answers":[{"owner":{"user_id":5841306,"display_name":"Barbaros &#214;zhan"},"up_vote_count":1,"is_accepted":true,"creation_date":1673609688,"answer_id":75108640,"body":"<p>You can rearrange the last shift transformation spec by using a conditional logic through matching <code>&quot;@(0,itemSelectionDetails.extSelectionDetails.isP1Customer)&quot;</code> identifier with <code>true</code> such as</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;operation&quot;: &quot;shift&quot;,\n  &quot;spec&quot;: {\n    &quot;customerId&quot;: &quot;requests[0].payload.context.CustomerID&quot;,\n    &quot;data&quot;: {\n      &quot;payload&quot;: {\n        &quot;content&quot;: {\n          &quot;cartEvent&quot;: {\n            &quot;cart&quot;: {\n              &quot;cartId&quot;: &quot;referenceNumber&quot;,\n              &quot;cartLineItems&quot;: {\n                &quot;*&quot;: {\n                  &quot;@(0,itemSelectionDetails.extSelectionDetails.isP1Customer)&quot;: {\n                    &quot;true&quot;: {\n                      &quot;#carteSaleEvent\\\\.PREMIUM&quot;: &quot;requests[0].eventType&quot;,\n                      &quot;$2&quot;: &quot;retryConfigRequestMap.carteSaleEvent\\\\.PREMIUM.maxAttempts&quot;\n                    },\n                    &quot;*&quot;: {\n                      &quot;@(2,eventType)&quot;: &quot;requests[0].eventType&quot;,\n                      &quot;$2&quot;: &quot;retryConfigRequestMap.@(3,eventType).maxAttempts&quot;\n                    }\n                  },\n                  &quot;itemId&quot;: &quot;requests[0].payload.context.itemId&quot;,\n                  &quot;numberOfUnits&quot;: &quot;requests[0].payload.context.noOfUnits&quot;,\n                  &quot;startsAt&quot;: &quot;requests[0].payload.context.earliestDate&quot;,\n                  &quot;endsAt&quot;: &quot;requests[0].payload.context.latestDate&quot;\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  }\n}\n</code></pre>\n<p>where we've gone two levels deeper by using <code>$2</code>,<code>&quot;@(2,eventType)&quot;</code> or <code>&quot;@(3,eventType)&quot;</code>(<em>which needs to traverse one more level as stated on the Right-hand-side</em>)</p>\n<p>Btw, if the order of the attributes matter, then you can add a <strong>sort</strong> transformation spec to the end just before closing square bracket <code>]</code> such as</p>\n<pre class=\"lang-json prettyprint-override\"><code>  ,\n  {\n    &quot;operation&quot;: &quot;sort&quot;\n  }\n</code></pre>\n"},{"owner":{"user_id":8428397,"display_name":"Mohammad Reza"},"up_vote_count":1,"is_accepted":false,"creation_date":1673609719,"answer_id":75108649,"body":"<p>you can use this spec:</p>\n<p>I moved all of your operations to one <code>shift</code> jolt spec, and create a <code>temp</code> variable with this value:</p>\n<p>If <code>isP1Customer</code> is <code>true</code>: <code>carteSaleEvent.PREMIUM</code>.</p>\n<p>If <code>isP1Customer</code> is <code>false</code>: <code>eventType</code> value.</p>\n<p>And finally, you can use the <code>temp</code> value.</p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;*&quot;: {\n        &quot;*&quot;: {\n          &quot;*&quot;: {\n            &quot;*&quot;: {\n              &quot;*&quot;: {\n                &quot;*&quot;: {\n                  &quot;*&quot;: {\n                    &quot;eventType&quot;: &quot;=concat('carteSaleEvent.', @(1,itemId))&quot;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;customerId&quot;: &quot;requests[0].payload.context.CustomerID&quot;,\n      &quot;#Cart.Sale.Complete&quot;: &quot;eventType&quot;,\n      &quot;data&quot;: {\n        &quot;*&quot;: {\n          &quot;*&quot;: {\n            &quot;*&quot;: {\n              &quot;cart&quot;: {\n                &quot;cartId&quot;: &quot;referenceNumber&quot;,\n                &quot;cartLineItems&quot;: {\n                  &quot;*&quot;: {\n                    &quot;eventType&quot;: &quot;temp&quot;,\n                    &quot;#test&quot;: &quot;requests[&amp;1].test&quot;,\n                    &quot;$&quot;: &quot;retryConfigRequestMap.@eventType.maxAttempts&quot;,\n                    &quot;#cartSaleComplete&quot;: &quot;retryConfigRequestMap.@eventType.altEventName&quot;,\n                    &quot;#true&quot;: &quot;retryConfigRequestMap.@eventType.enabled&quot;,\n                    &quot;itemId&quot;: &quot;requests[&amp;1].payload.context.&amp;&quot;,\n                    &quot;numberOfUnits&quot;: &quot;requests[&amp;1].payload.context.noOfUnits&quot;,\n                    &quot;startsAt&quot;: &quot;requests[&amp;1].payload.context.earliestDate&quot;,\n                    &quot;endsAt&quot;: &quot;requests[&amp;1].payload.context.latestDate&quot;,\n                    &quot;itemSelectionDetails&quot;: {\n                      &quot;*&quot;: {\n                        &quot;*&quot;: {\n                          &quot;true&quot;: {\n                            &quot;#carteSaleEvent.PREMIUM&quot;: &quot;temp&quot;\n                          }\n                        }\n                      }\n                    }\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;temp&quot;: &quot;=lastElement&quot;\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;eventType&quot;: &quot;&amp;&quot;,\n      &quot;requests&quot;: {\n        &quot;*&quot;: {\n          &quot;*&quot;: &quot;&amp;2[&amp;1].&amp;&quot;,\n          &quot;test&quot;: {\n            &quot;@(4,temp)&quot;: &quot;&amp;3[&amp;2].eventType&quot;\n          }\n        }\n      },\n      &quot;retryConfigRequestMap&quot;: {\n        &quot;*&quot;: &quot;&amp;1.@(2,temp)&quot;\n      }\n    }\n  }\n]\n</code></pre>\n"}],"owner":{"user_id":98044,"display_name":"Vini"},"view_count":151,"up_vote_count":2,"accepted_answer_id":75108640,"answer_count":2,"score":2,"creation_date":1673603030,"question_id":75107383,"body":"<p>I have a service that receives a JSON and needs to transform it to a different structure before sending to a third party API. Our team is using <a href=\"https://github.com/bazaarvoice/jolt\" rel=\"nofollow noreferrer\">JOLT</a> for transformations in the application. I have detailed the current scenario below along with the new ask. The issue with the new ask is that the elements/fields in the resultant JSON have to be derived based on the value of a nested element. I have spent several hours trying different operations (mainly shift and modify-overwrite-beta) but have not been able to find a solution.</p>\n<p><strong>Source JSON</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;id&quot;: &quot;wert23sd-0891-4fcd-ae31-380c0ef61198&quot;,\n  &quot;topic&quot;: &quot;cartsaleOmni/sale&quot;,\n  &quot;subject&quot;: &quot;EventTypeEvent.Cart.Sale&quot;,\n  &quot;data&quot;: {\n    &quot;payload&quot;: {\n      &quot;content&quot;: {\n        &quot;cartEvent&quot;: {\n          &quot;eventOccurrenceTime&quot;: &quot;2023-01-12T03:09:42.254Z&quot;,\n          &quot;cartEventId&quot;: &quot;fe9c22ca-dc38-4bcd-a220-c7425b9bed7e&quot;,\n          &quot;eventTriggerTime&quot;: &quot;2023-01-12T02:38:43.609Z&quot;,\n          &quot;eventName&quot;: &quot;Sale Cart&quot;,\n          &quot;cart&quot;: {\n            &quot;cartId&quot;: &quot;be8b22ba-dc38-4bcd-a120-c7425b9bed7e&quot;,\n            &quot;cartLineItems&quot;: [\n              {\n                &quot;itemId&quot;: &quot;44e610ab-c209-4232-8bb4-51f7b9b13a75&quot;,\n                &quot;cartLineItemId&quot;: &quot;fe9c22ca-23ad-46e0-8629-a6593597f183&quot;,\n                &quot;startsAt&quot;: &quot;2023-01-16&quot;,\n                &quot;endsAt&quot;: &quot;2023-01-19&quot;,\n                &quot;numberOfUnits&quot;: 2,\n                &quot;clientChannel&quot;: &quot;web&quot;,\n                &quot;clientSource&quot;: &quot;mgmri&quot;,\n                &quot;itemSelectionDetails&quot;: {\n                  &quot;extSelectionDetails&quot;: {\n                    &quot;isP1Customer&quot;: true\n                  }\n                },\n                &quot;eventType&quot;: &quot;saleEvent.44e610ab-c209-4232-8bb4-51f7b9b13a75&quot;\n              }\n            ]\n          }\n        }\n      }\n    }\n  },\n  &quot;customerId&quot;: &quot;CORP11A38249&quot;\n}\n</code></pre>\n<p><strong>Current JOLT Spec</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>[\n  {\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;data&quot;: {\n        &quot;payload&quot;: {\n          &quot;content&quot;: {\n            &quot;cartEvent&quot;: {\n              &quot;cart&quot;: {\n                &quot;cartLineItems&quot;: {\n                  &quot;*&quot;: {\n                    &quot;eventType&quot;: &quot;=concat('carteSaleEvent.', @(1,itemId))&quot;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;shift&quot;,\n    &quot;spec&quot;: {\n      &quot;customerId&quot;: &quot;requests[0].payload.context.CustomerID&quot;,\n      &quot;data&quot;: {\n        &quot;payload&quot;: {\n          &quot;content&quot;: {\n            &quot;cartEvent&quot;: {\n              &quot;cart&quot;: {\n                &quot;cartId&quot;: &quot;referenceNumber&quot;,\n                &quot;cartLineItems&quot;: {\n                  &quot;*&quot;: {\n                    &quot;eventType&quot;: &quot;requests[0].eventType&quot;,\n                    &quot;$&quot;: &quot;retryConfigRequestMap.@eventType.maxAttempts&quot;,\n                    &quot;itemId&quot;: &quot;requests[0].payload.context.itemId&quot;,\n                    &quot;numberOfUnits&quot;: &quot;requests[0].payload.context.noOfUnits&quot;,\n                    &quot;startsAt&quot;: &quot;requests[0].payload.context.earliestDate&quot;,\n                    &quot;endsAt&quot;: &quot;requests[0].payload.context.latestDate&quot;\n                  }\n                }\n              }\n            }\n          }\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;modify-overwrite-beta&quot;,\n    &quot;spec&quot;: {\n      &quot;retryConfigRequestMap&quot;: {\n        &quot;*&quot;: {\n          &quot;altEventName&quot;: &quot;cartSaleComplete&quot;,\n          &quot;enabled&quot;: true\n        }\n      }\n    }\n  },\n  {\n    &quot;operation&quot;: &quot;default&quot;,\n    &quot;spec&quot;: {\n      &quot;eventType&quot;: &quot;Cart.Sale.Complete&quot;\n    }\n  }\n]\n</code></pre>\n<p><strong>Current State Output JSON</strong></p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;eventType&quot;: &quot;Cart.Sale.Complete&quot;,\n  &quot;referenceNumber&quot;: &quot;be8b22ba-dc38-4bcd-a120-c7425b9bed7e&quot;,\n  &quot;requests&quot;: [\n    {\n      &quot;eventType&quot;: &quot;carteSaleEvent.44e610ab-c209-4232-8bb4-51f7b9b13a75&quot;,\n      &quot;payload&quot;: {\n        &quot;context&quot;: {\n          &quot;CustomerID&quot;: &quot;CORP11A38249&quot;,\n          &quot;earliestDate&quot;: &quot;2023-01-16&quot;,\n          &quot;itemId&quot;: &quot;44e610ab-c209-4232-8bb4-51f7b9b13a75&quot;,\n          &quot;latestDate&quot;: &quot;2023-01-19&quot;,\n          &quot;noOfUnits&quot;: 2\n        }\n      }\n    }\n  ],\n  &quot;retryConfigRequestMap&quot;: {\n    &quot;carteSaleEvent.44e610ab-c209-4232-8bb4-51f7b9b13a75&quot;: {\n      &quot;altEventName&quot;: &quot;cartSaleComplete&quot;,\n      &quot;enabled&quot;: true,\n      &quot;maxAttempts&quot;: &quot;0&quot;\n    }\n  }\n}\n</code></pre>\n<p>Now I am required to change <code>eventType</code> to <code>cartSaleEvent.PREMIUM</code> in elements in <code>requests</code> array and also in the <code>retryConfigRequestMap</code> if the value of <code>...itemSelectionDetails.extSelectionDetails.isP1Customer</code> is <code>true</code>.  and remain the same if that field is set to 'false' or is not present. So the desired JSON should look like below:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;eventType&quot;: &quot;Cart.Sale.Complete&quot;,\n  &quot;referenceNumber&quot;: &quot;be8b22ba-dc38-4bcd-a120-c7425b9bed7e&quot;,\n  &quot;requests&quot;: [\n    {\n      &quot;eventType&quot;: &quot;carteSaleEvent.PREMIUM&quot;,\n      &quot;payload&quot;: {\n        &quot;context&quot;: {\n          &quot;CustomerID&quot;: &quot;CORP11A38249&quot;,\n          &quot;earliestDate&quot;: &quot;2023-01-16&quot;,\n          &quot;itemId&quot;: &quot;44e610ab-c209-4232-8bb4-51f7b9b13a75&quot;,\n          &quot;latestDate&quot;: &quot;2023-01-19&quot;,\n          &quot;noOfUnits&quot;: 2\n        }\n      }\n    }\n  ],\n  &quot;retryConfigRequestMap&quot;: {\n    &quot;carteSaleEvent.PREMIUM&quot;: {\n      &quot;altEventName&quot;: &quot;cartSaleComplete&quot;,\n      &quot;enabled&quot;: true,\n      &quot;maxAttempts&quot;: &quot;0&quot;\n    }\n  }\n}\n</code></pre>\n<p>Apologies for the lengthy question. I read through the documentation and also the below links but could not device a working solution. Any help/pointers will be greatly appreciated.</p>\n<ul>\n<li><a href=\"https://docs.digibee.com/documentation/components/tools/transformer-jolt/if-else-simple-with-jolt\" rel=\"nofollow noreferrer\">Transformer Operations</a></li>\n<li><a href=\"https://docs.digibee.com/documentation/components/tools/transformer-jolt/if-else-simple-with-jolt\" rel=\"nofollow noreferrer\">IF ... ELSE with JOLT</a></li>\n</ul>\n"},{"tags":["java","maven","timsort"],"comments":[{"owner":{"user_id":11002,"display_name":"tgdavies"},"edited":false,"comment_id":132538054,"body":"Which versions of maven-artifact have you tried, and what&#39;s the precise dependency?"},{"owner":{"user_id":296328,"display_name":"khmarbaise"},"edited":false,"comment_id":132538121,"body":"First question why do you like to use it? Second as question already which version do you use? A version does not contain <code>&#47;&#47;</code> ??"},{"owner":{"user_id":19448783,"display_name":"HHHHNNNNNNIIIII"},"edited":false,"comment_id":132538194,"body":"@tgdavies precise dependency and tried version is updated in question."},{"owner":{"user_id":19448783,"display_name":"HHHHNNNNNNIIIII"},"edited":false,"comment_id":132538224,"body":"@khmarbaise Sorry for not expressing clearly,  versions  can be get like this  String[] versions = data.split(&quot;//&quot;)"},{"owner":{"user_id":296328,"display_name":"khmarbaise"},"edited":false,"comment_id":132538320,"body":"So you have an array of Strings but not an array of ComparableVersions; Every element of the array has to be using the constructor(if I correctly remember) of ComarableVersions and you can sort a list/array of ComparableVersions or there is a method (parseVersion)..."},{"owner":{"user_id":1707427,"display_name":"S&#246;ren"},"edited":false,"comment_id":132538413,"body":"All the back-and-forth is confusing. Please read <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>"},{"owner":{"user_id":19448783,"display_name":"HHHHNNNNNNIIIII"},"edited":false,"comment_id":132538654,"body":"@S&#246;ren Thanks, I&#39;ve refined my problem desc."},{"owner":{"user_id":19448783,"display_name":"HHHHNNNNNNIIIII"},"edited":false,"comment_id":132538686,"body":"@khmarbaise Yes, I&#39;ve add example code on question description."}],"answers":[{"owner":{"user_id":11002,"display_name":"tgdavies"},"up_vote_count":1,"is_accepted":false,"creation_date":1673599687,"answer_id":75106803,"body":"<p>Make sure that you don't have any duplicate version numbers which have different string representations:</p>\n<pre><code>import org.apache.maven.artifact.versioning.ComparableVersion;\n\nimport java.util.Arrays;\nimport java.util.Collections;\nimport java.util.List;\nimport java.util.stream.Collectors;\n\npublic class Test2 {\n\n    public static void main(String[] args) {\n        String data = &quot;0.0.1576817712//0.0.3//0.0.4//0.0.4.//0.0.4.1//0.0.4.2//0.0.4.3//0.0.4.4//0.0.4.5//0.0.5//0.0.5.1//0.0.5.2//0.0.5.3//0.0.5.4//0.0.6//0.0.7//0.0.8//0.1.0//0.1.2//0.1.2.1//0.1.2.2//0.1.2.3//0.1.2.4//0.1.2.5//0.1.2.6//0.1.2.7//0.1.2.8//0.1.3//0.1.3.1//0.1.3.2//0.1.3.3//0.1.4//0.1.4.1//0.1.4.2//0.1.4.3//0.1.4.4//0.1.4.5//0.1.4.6//0.1.4.7//0.1.4.8//0.1.4.9//0.1.5//0.1.7//0.1.7.1//0.1.7.2//0.1.7.3//0.1.7.4//0.1.7.5//0.1.7.6//0.1.7.7//0.1.8//0.1.9//0.1.9.1//0.1.9.11//0.1.9.12//0.1.9.13//0.1.9.2//0.1.9.3//0.1.9.8//0.1.9.9//0.1.9.9.1//1.0.0.1//1.0.0.2//1.0.0.3//1.0.0.3.1//1.0.0.4//1.0.0.5//0.0.0.1-SNAPSHOT//0.0.11-SNAPSHOT//0.0.1576066498-SNAPSHOT//0.0.1576066912-SNAPSHOT//0.0.1576209616-SNAPSHOT//0.0.1576677646-SNAPSHOT//0.0.1576722159-SNAPSHOT//0.0.1576732580-SNAPSHOT//0.0.1576737990-SNAPSHOT//0.0.1576757185-SNAPSHOT//0.0.1576812388-SNAPSHOT//0.0.1576817712-SNAPSHOT//0.0.1576821661-SNAPSHOT//0.0.1576821977-SNAPSHOT//0.0.1576825998-SNAPSHOT//0.0.1577182101-SNAPSHOT//0.0.1577266235-SNAPSHOT//0.0.1577267400-SNAPSHOT//0.0.1577268933-SNAPSHOT//0.0.2-SNAPSHOT//0.0.3-SNAPSHOT//0.0.4-SNAPSHOT//0.0.4.1-SNAPSHOT//0.0.4.2-SNAPSHOT//0.0.4.4-SNAPSHOT//0.0.4.5-SNAPSHOT//0.0.5-SNAPSHOT//0.0.5.11151113-SNAPSHOT//0.0.5.2-SNAPSHOT//0.0.5.2.1-SNAPSHOT//0.0.5.20180829-SNAPSHOT//0.0.5.20181115-SNAPSHOT//0.0.5.4-SNAPSHOT//0.0.5.4.181113-SNAPSHOT//0.0.5.5-SNAPSHOT//0.0.6-SNAPSHOT//0.0.7-SNAPSHOT//0.0.8-SNAPSHOT//0.0.9-SNAPSHOT//0.0.91576063257-SNAPSHOT//0.0.91576066026-SNAPSHOT//0.1.0-SNAPSHOT//0.1.1-SNAPSHOT//0.1.2-SNAPSHOT//0.1.2.2-SNAPSHOT//0.1.2.3-SNAPSHOT//0.1.2.4-SNAPSHOT//0.1.2.5-SNAPSHOT//0.1.2.6-SNAPSHOT//0.1.2.7-SNAPSHOT//0.1.3-SNAPSHOT//0.1.3.1-SNAPSHOT//0.1.3.3-SNAPSHOT//0.1.3.4-SNAPSHOT//0.1.4-SNAPSHOT//0.1.4.1-SNAPSHOT//0.1.4.4-SNAPSHOT//0.1.4.5-SNAPSHOT//0.1.4.6-SNAPSHOT//0.1.4.7-SNAPSHOT//0.1.4.9-SNAPSHOT//0.1.4.l-SNAPSHOT//0.1.4.y-SNAPSHOT//0.1.4.yl-SNAPSHOT//0.1.4.yy-SNAPSHOT//0.1.5-push-SNAPSHOT//0.1.5-SNAPSHOT//0.1.5.1-SNAPSHOT//0.1.5.2-SNAPSHOT//0.1.5.3-SNAPSHOT//0.1.5.4-SNAPSHOT//0.1.5.5-SNAPSHOT//0.1.5.6-SNAPSHOT//0.1.5.l-SNAPSHOT//0.1.5.testpush-SNAPSHOT//0.1.5.y-SNAPSHOT//0.1.5.yl-SNAPSHOT//0.1.6-SNAPSHOT//0.1.7-SNAPSHOT//0.1.7.1-SNAPSHOT//0.1.7.2-SNAPSHOT//0.1.7.3-SNAPSHOT//0.1.7.4-SNAPSHOT//0.1.7.6.1-SNAPSHOT//0.1.8-SNAPSHOT//0.1.9.15-SNAPSHOT//0.1.9.16-SNAPSHOT//0.1.9.2-SNAPSHOT//0.1.9.6-SNAPSHOT//0.1.9.7-SNAPSHOT//0.1.9.9.2-SNAPSHOT//0.1.9.9.3-SNAPSHOT//0.2.0-SNAPSHOT//1.0.0.0-SNAPSHOT//1.0.0.1-SNAPSHOT//1.0.0.2-SNAPSHOT//1.0.0.3-lv-SNAPSHOT//1.0.0.3-SNAPSHOT//1.0.0.4-SNAPSHOT//1.0.0.5-SNAPSHOT//1.0.0.6-SNAPSHOT//1.0.0.7-SNAPSHOT//1.0.0.8-SNAPSHOT//1.0.0.9-SNAPSHOT//1.0.1-SNAPSHOT//1.0.1.0-SNAPSHOT//1.0.1.1-SNAPSHOT//1.0.1.2-SNAPSHOT//1.0.1.3-SNAPSHOT&quot;; // the above string\n        String[] versions = data.split(&quot;//&quot;);\n        List&lt;ComparableVersion&gt; comparableVersions = Arrays.stream(versions)\n                .map(ComparableVersion::new)\n                .distinct()\n                .collect(Collectors.toList());\n        Collections.sort(comparableVersions);\n        System.out.println(comparableVersions);\n    }\n}\n</code></pre>\n<p>This assumes that <code>ComparableVersion.equals()</code> is not going to return true for any pair of versions which you don't think are equal.</p>\n<p>In this case, the latter of <code>0.0.4</code> and <code>0.0.4.</code> will be removed from the stream.</p>\n"},{"owner":{"user_id":11587741,"display_name":"Dan"},"up_vote_count":1,"is_accepted":false,"creation_date":1674851964,"answer_id":75263140,"body":"<p>It seems like Maven's ComparableVersion comparison algorithm doesn't respect the rule of transitivity, namely: if a &lt; b and b &lt; c then a &lt; c. More info <a href=\"https://stackoverflow.com/questions/11441666/java-error-comparison-method-violates-its-general-contract\">here</a>.</p>\n<p>Therefore Timsort, which assumes that a comparison algorithm respects transitivity, will not work in many cases.</p>\n<p>Here's an example of a test in the Maven repo that will fail since transitivity is not followed:</p>\n<pre><code>    @Test\n    public void transitivity() {\n        ComparableVersion c1 = new ComparableVersion(&quot;c1&quot;);\n        ComparableVersion alpha13 = new ComparableVersion(&quot;0.0.0-alpha13&quot;);\n        ComparableVersion allZeroes = new ComparableVersion(&quot;0.0.0&quot;);\n\n        // A: c1 &lt; 0.0.0-alpha13\n        System.out.println(c1.compareTo(alpha13));\n        assertTrue(c1.compareTo(alpha13) &lt; 0, &quot;c1 &lt; 0.0.0-alpha13&quot;);\n        \n        // B: 0.0.0-alpha13 &lt; 0.0.0\n        System.out.println(alpha13.compareTo(allZeroes));\n        assertTrue(alpha13.compareTo(allZeroes) &lt; 0, &quot;0.0.0-alpha13 &lt; 0.0.0&quot;);\n\n        // Since c1 &lt; 0.0.0-alpha13 (A) and 0.0.0-alpha13 &lt; 0.0.0 (B), Therefore c1 &lt; 0.0.0\n        System.out.println(c1.compareTo(allZeroes));\n        assertTrue(c1.compareTo(allZeroes) &lt; 0, &quot;c1 &lt; 0.0.0&quot;);\n    }\n</code></pre>\n<p>The output will be:</p>\n<pre><code>-1\n-5\n2\n\norg.opentest4j.AssertionFailedError: c1 &lt; 0.0.0 ==&gt; \nExpected :true\nActual   :false\n</code></pre>\n<p>You could try running your program with the following flag: <code>-Djava.util.Arrays.useLegacyMergeSort=true</code> if you would like your program to not crash (more info <a href=\"https://stackoverflow.com/questions/15893487/compile-in-java-6-run-in-7-how-to-specify-uselegacymergesort\">here</a>), but I believe that the same array may be sorted in different and conflicting ways since transitivity isn't respected.</p>\n<p>I would raise an issue for this in the <a href=\"https://github.com/apache/maven\" rel=\"nofollow noreferrer\">Maven</a> repo. But, it doesn't seem like they allow issues.</p>\n"}],"owner":{"user_id":19448783,"display_name":"HHHHNNNNNNIIIII"},"view_count":88,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1673592220,"question_id":75105691,"body":"<p>ComparableVersion offered by maven-artifact is used in my project to sort artifact by its version. For example, these versions is offered(should spilt by //).</p>\n<pre><code>0.0.1576817712//0.0.3//0.0.4//0.0.4.//0.0.4.1//0.0.4.2//0.0.4.3//0.0.4.4//0.0.4.5//0.0.5//0.0.5.1//0.0.5.2//0.0.5.3//0.0.5.4//0.0.6//0.0.7//0.0.8//0.1.0//0.1.2//0.1.2.1//0.1.2.2//0.1.2.3//0.1.2.4//0.1.2.5//0.1.2.6//0.1.2.7//0.1.2.8//0.1.3//0.1.3.1//0.1.3.2//0.1.3.3//0.1.4//0.1.4.1//0.1.4.2//0.1.4.3//0.1.4.4//0.1.4.5//0.1.4.6//0.1.4.7//0.1.4.8//0.1.4.9//0.1.5//0.1.7//0.1.7.1//0.1.7.2//0.1.7.3//0.1.7.4//0.1.7.5//0.1.7.6//0.1.7.7//0.1.8//0.1.9//0.1.9.1//0.1.9.11//0.1.9.12//0.1.9.13//0.1.9.2//0.1.9.3//0.1.9.8//0.1.9.9//0.1.9.9.1//1.0.0.1//1.0.0.2//1.0.0.3//1.0.0.3.1//1.0.0.4//1.0.0.5//0.0.0.1-SNAPSHOT//0.0.11-SNAPSHOT//0.0.1576066498-SNAPSHOT//0.0.1576066912-SNAPSHOT//0.0.1576209616-SNAPSHOT//0.0.1576677646-SNAPSHOT//0.0.1576722159-SNAPSHOT//0.0.1576732580-SNAPSHOT//0.0.1576737990-SNAPSHOT//0.0.1576757185-SNAPSHOT//0.0.1576812388-SNAPSHOT//0.0.1576817712-SNAPSHOT//0.0.1576821661-SNAPSHOT//0.0.1576821977-SNAPSHOT//0.0.1576825998-SNAPSHOT//0.0.1577182101-SNAPSHOT//0.0.1577266235-SNAPSHOT//0.0.1577267400-SNAPSHOT//0.0.1577268933-SNAPSHOT//0.0.2-SNAPSHOT//0.0.3-SNAPSHOT//0.0.4-SNAPSHOT//0.0.4.1-SNAPSHOT//0.0.4.2-SNAPSHOT//0.0.4.4-SNAPSHOT//0.0.4.5-SNAPSHOT//0.0.5-SNAPSHOT//0.0.5.11151113-SNAPSHOT//0.0.5.2-SNAPSHOT//0.0.5.2.1-SNAPSHOT//0.0.5.20180829-SNAPSHOT//0.0.5.20181115-SNAPSHOT//0.0.5.4-SNAPSHOT//0.0.5.4.181113-SNAPSHOT//0.0.5.5-SNAPSHOT//0.0.6-SNAPSHOT//0.0.7-SNAPSHOT//0.0.8-SNAPSHOT//0.0.9-SNAPSHOT//0.0.91576063257-SNAPSHOT//0.0.91576066026-SNAPSHOT//0.1.0-SNAPSHOT//0.1.1-SNAPSHOT//0.1.2-SNAPSHOT//0.1.2.2-SNAPSHOT//0.1.2.3-SNAPSHOT//0.1.2.4-SNAPSHOT//0.1.2.5-SNAPSHOT//0.1.2.6-SNAPSHOT//0.1.2.7-SNAPSHOT//0.1.3-SNAPSHOT//0.1.3.1-SNAPSHOT//0.1.3.3-SNAPSHOT//0.1.3.4-SNAPSHOT//0.1.4-SNAPSHOT//0.1.4.1-SNAPSHOT//0.1.4.4-SNAPSHOT//0.1.4.5-SNAPSHOT//0.1.4.6-SNAPSHOT//0.1.4.7-SNAPSHOT//0.1.4.9-SNAPSHOT//0.1.4.l-SNAPSHOT//0.1.4.y-SNAPSHOT//0.1.4.yl-SNAPSHOT//0.1.4.yy-SNAPSHOT//0.1.5-push-SNAPSHOT//0.1.5-SNAPSHOT//0.1.5.1-SNAPSHOT//0.1.5.2-SNAPSHOT//0.1.5.3-SNAPSHOT//0.1.5.4-SNAPSHOT//0.1.5.5-SNAPSHOT//0.1.5.6-SNAPSHOT//0.1.5.l-SNAPSHOT//0.1.5.testpush-SNAPSHOT//0.1.5.y-SNAPSHOT//0.1.5.yl-SNAPSHOT//0.1.6-SNAPSHOT//0.1.7-SNAPSHOT//0.1.7.1-SNAPSHOT//0.1.7.2-SNAPSHOT//0.1.7.3-SNAPSHOT//0.1.7.4-SNAPSHOT//0.1.7.6.1-SNAPSHOT//0.1.8-SNAPSHOT//0.1.9.15-SNAPSHOT//0.1.9.16-SNAPSHOT//0.1.9.2-SNAPSHOT//0.1.9.6-SNAPSHOT//0.1.9.7-SNAPSHOT//0.1.9.9.2-SNAPSHOT//0.1.9.9.3-SNAPSHOT//0.2.0-SNAPSHOT//1.0.0.0-SNAPSHOT//1.0.0.1-SNAPSHOT//1.0.0.2-SNAPSHOT//1.0.0.3-lv-SNAPSHOT//1.0.0.3-SNAPSHOT//1.0.0.4-SNAPSHOT//1.0.0.5-SNAPSHOT//1.0.0.6-SNAPSHOT//1.0.0.7-SNAPSHOT//1.0.0.8-SNAPSHOT//1.0.0.9-SNAPSHOT//1.0.1-SNAPSHOT//1.0.1.0-SNAPSHOT//1.0.1.1-SNAPSHOT//1.0.1.2-SNAPSHOT//1.0.1.3-SNAPSHOT//\n</code></pre>\n<p>And here is my code</p>\n<pre class=\"lang-java prettyprint-override\"><code>String data = &quot;....&quot;; // the above string\nString[] versions = data.split(&quot;//&quot;);\nList&lt;ComparableVersion&gt; comparableVersions = Arrays.stream(versions).map(ComparableVersion::new).collect(Collectors.toList());\nCollections.sort(comparableVersions);\n\n</code></pre>\n<p>And an error occured</p>\n<pre><code>java.lang.IllegalArgumentException: Comparison method violates its general contract!\n\n    at java.util.ComparableTimSort.mergeHi(ComparableTimSort.java:866)\n    at java.util.ComparableTimSort.mergeAt(ComparableTimSort.java:483)\n    at java.util.ComparableTimSort.mergeForceCollapse(ComparableTimSort.java:422)\n    at java.util.ComparableTimSort.sort(ComparableTimSort.java:222)\n    at java.util.Arrays.sort(Arrays.java:1312)\n    at java.util.Arrays.sort(Arrays.java:1506)\n    at java.util.ArrayList.sort(ArrayList.java:1464)\n    at java.util.Collections.sort(Collections.java:143)\n</code></pre>\n<p>1 I've already tried add different version of maven-artifact dependencies, but all with the same problem.</p>\n<pre><code>// version 3.8.6 3.8.7 and 3.6.3 are tried\n&lt;dependency&gt;\n   &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n   &lt;artifactId&gt;maven-artifact&lt;/artifactId&gt;\n   &lt;version&gt;3.6.3&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>2 Using LegacyMergeSort instead of timsort can solve the problem by adding <code>-Djava.util.Arrays.useLegacyMergeSort=true</code> to jvm params, but I don't want it to work on all the array.sort in my project.</p>\n<p>So what's wrong with ComparableVersion working with timsort. And how can I find another way to solving this sorting problem. Thanks~</p>\n"},{"tags":["java","json"],"comments":[{"owner":{"user_id":20015640,"display_name":"Urvish Shiroya"},"edited":false,"comment_id":132515174,"body":"can you use <code>okhttp</code> <code>JSONObject</code> and <code>JSONArray</code>?"},{"owner":{"user_id":7109162,"display_name":"XtremeBaumer"},"edited":false,"comment_id":132518334,"body":"It does not seem to be possible to reference values within <code>calc()</code> that reside at a different node/level. As soon as you include a <code>.</code> in the <code>calc</code> function, it fails"}],"answers":[{"owner":{"user_id":7109162,"display_name":"XtremeBaumer"},"up_vote_count":0,"is_accepted":false,"creation_date":1673518350,"answer_id":75094668,"body":"<p><a href=\"https://stackoverflow.com/a/75095081/7109162\">Answer by Raymond Choi </a> would be the best solution.</p>\n<hr />\n<p>Alright, I have found a possible solution to this using <a href=\"https://github.com/octomix/josson#fill-in\" rel=\"nofollow noreferrer\">Jossons</a> template engine.</p>\n<pre><code>String json = &quot;{\\&quot;data\\&quot;:{\\&quot;B\\&quot;:\\&quot;calc(348+(96*{{SelectedPump-&gt;stg}}*{{ModelMaster-&gt;count}}))\\&quot;},\\&quot;SelectedPump\\&quot;:{\\&quot;stg\\&quot;:10,\\&quot;ab\\&quot;:200},\\&quot;ModelMaster\\&quot;:{\\&quot;count\\&quot;:20}}&quot;;\n\nJossons jossons = Jossons.fromJsonString(json);\nString output = jossons.fillInPlaceholder(&quot;{\\&quot;s\\&quot;:\\&quot;{{data-&gt;B}}\\&quot;}&quot;);\noutput = jossons.fillInPlaceholder(output);\nSystem.out.println(output);\nSystem.out.println(Josson.fromJsonString(output).getNode(&quot;$.eval(s)&quot;));\n</code></pre>\n<p>It is necessary to adjust the JSON string to use placeholder to access the values from a different/nested node. We also have to create a new JSON string with a template that is filled in. Also also, it does sadly not recursively replace the placeholder, making it necessary to call <code>jossons.fillInPlaceholder()</code> two times. The first time it fetches the calculated formula and the second time it replaces the placeholder that are now present in the formula.</p>\n<p>The output is:</p>\n<pre><code>output -&gt; {&quot;s&quot;:&quot;calc(348+(96*10*20))&quot;}\nJosson.fromJsonString(output).getNode(&quot;$.eval(s)&quot;) -&gt; 19548.0\n</code></pre>\n<hr />\n<p>The proposed code in the question fails, because Josson is not able to resolve nested/different node values. Pretty much as soon as we have a <code>.</code> present in the <code>calc()</code> formula, the syntax check fails. It is however possible to access nodes at the same level. So a JSON like this:</p>\n<pre><code>{\n  &quot;data&quot; : {\n    &quot;B&quot; : &quot;calc(348+(96*SelectedPumpStg*ModelMasterCount))&quot;,\n    &quot;SelectedPumpStg&quot; : 10,\n    &quot;ModelMasterCount&quot; : 20\n  }\n}\n</code></pre>\n<p>can be evaluated by:</p>\n<pre><code>String json = &quot;{\\&quot;data\\&quot;:{\\&quot;B\\&quot;:\\&quot;calc(348+(96*SelectedPumpStg*ModelMasterCount))\\&quot;,\\&quot;SelectedPumpStg\\&quot;:10,\\&quot;ModelMasterCount\\&quot;:20}}&quot;;\nJosson josson = Josson.fromJsonString(json.toString());\nSystem.out.println(josson.getNode(&quot;data.eval(B)&quot;));\n</code></pre>\n<p>resulting in the same: <code>19548.0</code>.</p>\n<p>Either way, the input JSON has to be adjusted to work with <code>Josson</code></p>\n"},{"owner":{"user_id":9402689,"display_name":"Raymond Choi"},"up_vote_count":2,"is_accepted":false,"creation_date":1673520284,"answer_id":75095081,"body":"<p>The variables inside the math equation cannot contains special characters. You need to use substitution. The variable name can whatever you want without special characters and <code>.</code>. So, the statement of B become...</p>\n<pre><code>calc(348+(96*A*B), A:SelectedPump.stg, B:ModelMaster.count)\n</code></pre>\n<p>The function <code>eval()</code> in query <code>data.eval(B)</code> works on node <code>data</code>. So the original evaluation statement needs <code>$.</code> to re-start from the root to get the value. For this revised version <code>eval(data.B)</code>, <code>eval()</code> works on the root node with parameter <code>data.B</code>. And therefore, <code>$.</code> is not necessary.</p>\n<pre><code>String json =\n    &quot;{\\n&quot; +\n    &quot;    \\&quot;data\\&quot;: {\\n&quot; +\n    &quot;        \\&quot;B\\&quot;: \\&quot;calc(348+(96*A*B), A:SelectedPump.stg, B:ModelMaster.count)\\&quot;\\n&quot; +\n    &quot;    },\\n&quot; +\n    &quot;    \\&quot;SelectedPump\\&quot;: {\\n&quot; +\n    &quot;        \\&quot;stg\\&quot;: 10,\\n&quot; +\n    &quot;        \\&quot;ab\\&quot;: 200\\n&quot; +\n    &quot;    },\\n&quot; +\n    &quot;    \\&quot;ModelMaster\\&quot;: {\\n&quot; +\n    &quot;        \\&quot;count\\&quot;: 20\\n&quot; +\n    &quot;    }\\n&quot; +\n    &quot;}&quot;;\nJosson josson = Josson.fromJsonString(json);\nSystem.out.println(josson.getNode(&quot;eval(data.B)&quot;));\n// Output: 19548.0\n</code></pre>\n"}],"owner":{"user_id":20961840,"display_name":"dattam katore"},"view_count":83,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1673504590,"question_id":75092326,"body":"<p>I am trying to evaluate json expression using <a href=\"https://github.com/octomix/josson\" rel=\"nofollow noreferrer\">Josson</a>, but it gives invalid function error</p>\n<pre><code>String json =&quot;{\\&quot;data\\&quot;:{\\&quot;B\\&quot;:\\&quot;calc(348+(96*$.SelectedPump.stg*$.ModelMaster.count))\\&quot;},\\&quot;SelectedPump\\&quot;:{\\&quot;stg\\&quot;:10,\\&quot;ab\\&quot;:200},\\&quot;ModelMaster\\&quot;:{\\&quot;count\\&quot;:20}}&quot;;\n        \nJosson josson = Josson.fromJsonString(json.toString());\nSystem.out.println(josson.getNode(&quot;data.eval(B)&quot;));\n</code></pre>\n<p>Stacktrace:</p>\n<pre><code>Exception in thread &quot;main&quot; java.lang.IllegalArgumentException: Invalid function call eval() : Invalid function call calc() : Calc syntax error.\n    at com.octomix.josson.FuncDispatcher.apply(FuncDispatcher.java:84)\n    at com.octomix.josson.JossonCore.getPathBySteps(JossonCore.java:328)\n    at com.octomix.josson.JossonCore.getPathBySteps(JossonCore.java:352)\n    at com.octomix.josson.JossonCore.getPathBySteps(JossonCore.java:249)\n    at com.octomix.josson.JossonCore.getPathByExpression(JossonCore.java:211)\n    at com.octomix.josson.JossonCore.getNodeByExpression(JossonCore.java:147)\n    at com.octomix.josson.JossonCore.getNodeByExpression(JossonCore.java:142)\n    at com.octomix.josson.Josson.getNode(Josson.java:279)\n</code></pre>\n"},{"tags":["java","spring","reactor-kafka"],"answers":[{"owner":{"user_id":1898563,"display_name":"Michael"},"up_vote_count":2,"is_accepted":true,"creation_date":1673440128,"answer_id":75083063,"body":"<p>I'm 99% sure that <code>Map&lt;String, Object&gt; kafkaProperties</code> is completely different from what you're expecting. It's not your <code>kafkaProperties</code> bean, but a map of <em>all</em> bean-names to their instances.</p>\n<p>Change it to <code>@Qualifier(&quot;kafkaProperties&quot;) Map&lt;String, Object&gt; kafkaProperties</code>.</p>\n<p>Spring lets you autowire collections. You can depend upon <code>List&lt;Foo&gt;</code>, and Spring will construct a List containing all beans extending/implementing <code>Foo</code>. That doesn't mean that an actual bean exists of type <code>List&lt;Foo&gt;</code>.</p>\n<p>You're being stung by this feature in way that's contrary to what you're trying to express.</p>\n<p>For this reason, I personally avoid registering any type of collection as a bean. It can sometimes be too ambiguous. I'd create something like a <code>KafkaProperties</code> class, and register that as a bean instead of the Map.</p>\n"}],"owner":{"user_id":4743869,"display_name":"ByeBye"},"view_count":108,"up_vote_count":2,"accepted_answer_id":75083063,"answer_count":1,"score":2,"creation_date":1673439441,"question_id":75082926,"body":"<p>I have two beans:</p>\n<pre><code>@Configuration\npublic class KafkaConfiguration {\n\n    @Bean\n    @ConfigurationProperties(prefix = &quot;spring.kafka.consumer&quot;)\n    public Map&lt;String, Object&gt; kafkaProperties() {\n        return new HashMap&lt;&gt;();\n    }\n\n    @Bean\n    public ReceiverOptions&lt;String, Object&gt; kafkaReceiverOptions(Map&lt;String, Object&gt; kafkaProperties) {\n        return ReceiverOptions.create(kafkaProperties);\n    }\n\n}\n</code></pre>\n<p>and second:</p>\n<pre><code>@Slf4j\n@Component\npublic class SpringReactorKafkaConsumer {\n\n    private final ReceiverOptions&lt;String, Object&gt; kafkaReceiverOptions;\n\n    public SpringReactorKafkaConsumer(ReceiverOptions&lt;String, Object&gt; kafkaReceiverOptions) {\n        this.kafkaReceiverOptions = kafkaReceiverOptions;\n    }\n\n    @PostConstruct\n    public void consume() {\n\n    }\n\n}\n</code></pre>\n<p>After starting my program I have a log:</p>\n<pre><code>┌─────┐\n    |  springReactorKafkaConsumer defined in file [...adapter/kafka/consumer/SpringReactorKafkaConsumer.class]\n↑     ↓\n|  kafkaReceiverOptions defined in class path resource [...configuration/KafkaConfiguration.class]\n└─────┘\n</code></pre>\n<p>But I don't really see why? KafkaReceiverOptions does not depend on SpringReactorKafkaConsumer</p>\n"},{"tags":["java","division","digits"],"comments":[{"owner":{"user_id":214525,"display_name":"f1sh"},"edited":false,"comment_id":132497002,"body":"So for example if you enter <code>123</code>, what is <code>a</code> going to be? And since <code>b = a &#47; 10</code>, why would <code>b</code> be anything other than <code>0</code> (it&#39;s an <code>int</code> division!)?"}],"answers":[{"owner":{"user_id":2422776,"display_name":"Mureinik"},"up_vote_count":2,"is_accepted":false,"creation_date":1673435394,"answer_id":75082095,"body":"<p>Anything modulo 10 will return a result in the range of 0 to 9, and (integer) dividing that by 10 will return 0. You need to reverse the order - first divide the 10 to remove the last digit, and then take the remainder from 10 to keep the middle digit:</p>\n<pre class=\"lang-java prettyprint-override\"><code>int b = (number / 10) % 10;\n</code></pre>\n"},{"owner":{"user_id":11066298,"display_name":"Jakhongir Anasov"},"up_vote_count":1,"is_accepted":false,"creation_date":1673436207,"answer_id":75082256,"body":"<p>I suggest using this instead of %. Because you can split and get any digit of number using this code:</p>\n<pre><code>  int x=158;\n  char[] xValueInString = Integer.toString(x).toCharArray();\n  for(int i=0; i&lt;xValueInString.length; i++){\n      System.out.println(xValueInString[i]);\n  }\n</code></pre>\n"},{"owner":{"user_id":19425620,"display_name":"Yashwant Panchal"},"up_vote_count":0,"is_accepted":false,"creation_date":1673436574,"answer_id":75082333,"body":"<p>You missed scanner in your code, add Scanner before reading number, try this with little change</p>\n<pre><code>    public static void main(String[] args) {\n        System.out.println(&quot;Input the number&quot;);\n        Scanner read = new Scanner(System.in);\n        int number = read.nextInt();\n        int a = number%10;\n        int b = (number/10)%10; // the answer is always 0\n        int c = number/100;\n        System.out.println(c + &quot; &quot; + b + &quot; &quot; + a);\n    }\n</code></pre>\n"}],"owner":{"user_id":20952449,"display_name":"Chernosmaga"},"view_count":67,"up_vote_count":2,"answer_count":3,"score":2,"creation_date":1673435098,"question_id":75082045,"body":"<p>I am trying to get 3 numbers separated by a space after user's input. I can get the first number and the last one dividing by 10, but I really have no idea how to get the middle number</p>\n<p>I tried to take the remainder of the first two numbers and then divide them by ten, but IDEA says that the answer is always zero</p>\n<pre><code>public static void main(String[] args) {\n    System.out.println(&quot;Input the number&quot;);\n    int number = read.nextInt();\n    int a = number%10;\n    int b = (number%10)/10; // the answer is always 0\n    int c = number / 100;\n    System.out.println(c + &quot; &quot; + b + &quot; &quot; + a);\n}\n</code></pre>\n"},{"tags":["java","spring-boot","spring-data-jpa"],"comments":[{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":132492944,"body":"Use the framework don&#39;t work around it. I would strongly suggest to put this in a <code>Specification</code> and use the <code>JpaSpecificationExecutor</code> to invoke the <code>findAll(Specification, PageRequest)</code> method instead of trying to invent your own."},{"owner":{"user_id":13884720,"display_name":"Abdalrhman Alkraien"},"edited":false,"comment_id":132497859,"body":"You can use two ways to create a dynamic filter with pagination, <code>ExampleMatcher</code> or <code>specification</code> both support JPA"}],"answers":[{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"up_vote_count":2,"is_accepted":false,"creation_date":1673424467,"answer_id":75079940,"body":"<p>Ditch your own method and use the framework. Use <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#specifications\" rel=\"nofollow noreferrer\">specifications</a> to create a dynamic query.</p>\n<p>Your repository should extend the <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/api/org/springframework/data/jpa/repository/JpaSpecificationExecutor.html\" rel=\"nofollow noreferrer\"><code>JpaSpecificationExecutor</code></a> and then you should invoke the <code>findAll(Specification, Pageable)</code> from your service. Your service should prepare the <code>Specification</code> it needs to build the query.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface YourRepository extends JpaRepository&lt;HistoryBank, Long&gt;,\nJpaSpecificationExecutor&lt;HistoryBank&gt; {}\n</code></pre>\n<p>Your service can then use the aforementioned <code>findAll</code> method.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public PaginationList&lt;HistoryBankWrapper, HistoryBank&gt; findByFilter(String keyfilter,String sortField,String sortOrder, int page, int size) {\n    Sort sort = Sort.by(Sort.Direction.fromString(sortOrder), sortField); \n    Pageable paging = PageRequest.of(page, size);\n    Specification&lt;HistoryBank&gt; spec = (r, c, b) -&gt; b.like(r.get(sortField), &quot;%&quot; + keyFilter + &quot;%&quot;));\n    Page&lt;HistoryBank&gt; historyPage = historyBankRepository.findAllFilter(spec, paging);\n    List&lt;HistoryBank&gt; historyList =  historyPage.getContent();\n    List&lt;HistoryBankWrapper&gt; historyWrapperList = toWrapperList(historyList);\n    return new PaginationList&lt;HistoryBankWrapper, HistoryBank&gt;(historyWrapperList, historyPage);\n    }\n</code></pre>\n<p>You can even make this easier by modifying your controller to directly bind to a <code>Pageable</code> object, that saves you creating it.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public DataResponsePagination&lt;HistoryBankWrapper, HistoryBank&gt; pageFilter(\n        @RequestParam(&quot;filter&quot;) String keyfilter ,\n        Pageable page) {\n        {\n</code></pre>\n<p>Now you only need to create the <code>Specification</code> and can just pass along the <code>Pageable</code>.</p>\n"},{"owner":{"user_id":19519118,"display_name":"surendra ingle"},"up_vote_count":0,"is_accepted":false,"creation_date":1673492798,"answer_id":75091167,"body":"<p>In the Jpa repository you use the symbol of OR (||) try with a keyword or\nand modified your query for filtering you have to use and instead of or</p>\n"}],"owner":{"user_id":20663370,"display_name":"Juan Kalyzta"},"view_count":111,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1673417086,"question_id":75078898,"body":"<p>I want to make paginable service with filter but its fail to resultset</p>\n<p>Here is my controller</p>\n<pre><code> @GetMapping(path = &quot;/PageFilter&quot;)\n    public DataResponsePagination&lt;HistoryBankWrapper, HistoryBank&gt; pageFilter(\n        @RequestParam(&quot;filter&quot;) String keyfilter ,\n        @RequestParam(&quot;sortField&quot;) String field ,\n        @RequestParam(&quot;sortOrder&quot;) String order ,\n        @RequestParam(&quot;page&quot;) int page, \n        @RequestParam(&quot;size&quot;) int size) {\n        return new DataResponsePagination&lt;HistoryBankWrapper, HistoryBank&gt;(historyBankService.findByFilter(keyfilter,field,order, page, size));\n    }\n</code></pre>\n<p>Here is my service</p>\n<pre><code>public PaginationList&lt;HistoryBankWrapper, HistoryBank&gt; findByFilter(String keyfilter,String sortField,String sortOrder, int page, int size) {\n    Pageable paging = PageRequest.of(page, size);\n    Page&lt;HistoryBank&gt; historyPage = historyBankRepository.findAllFilter(keyfilter, sortField, sortOrder, paging);\n    List&lt;HistoryBank&gt; historyList =  historyPage.getContent();\n    List&lt;HistoryBankWrapper&gt; historyWrapperList = toWrapperList(historyList);\n    return new PaginationList&lt;HistoryBankWrapper, HistoryBank&gt;(historyWrapperList, historyPage);\n    }\n</code></pre>\n<p>here is my Repository</p>\n<pre><code>@Query(value = &quot;SELECT * FROM HISTORY_BANK WHERE :sortField LIKE '%' || :keyFilter || '%' ORDER BY :sortField :sortOrder&quot;,\n          countQuery = &quot;SELECT count(*) FROM HISTORY_BANK&quot;,\n          nativeQuery = true)\nPage&lt;HistoryBank&gt; findAllFilter(@Param(&quot;keyFilter&quot;) String keyfilter,  @Param(&quot;sortOrder&quot;) String sortOrder,@Param(&quot;sortField&quot;) String sortField, @Param(&quot;paging&quot;) Pageable paging);\n</code></pre>\n"},{"tags":["java","regex","regex-group"],"comments":[{"owner":{"user_id":9472740,"display_name":"Jan Šebek"},"edited":false,"comment_id":132488976,"body":"<a href=\"https://regex101.com/r/c5b1kP/2\" rel=\"nofollow noreferrer\">regex101.com/r/c5b1kP/2</a>"}],"answers":[{"owner":{"user_id":256196,"display_name":"Bohemian"},"up_vote_count":2,"is_accepted":true,"creation_date":1673404974,"answer_id":75077840,"body":"<p>You need to change 2 things:</p>\n<ol>\n<li>make the url match <em>reluctant</em> (ie <code>.*?</code>)</li>\n<li>move the leading space and quotes around the hint type <em>inside</em> the conditional</li>\n</ol>\n<p>This works for your examples:</p>\n<pre><code>\\[(.*)]\\((.*?)(?: \\&quot;(icon|small|medium|big)\\&quot;)?\\)\n</code></pre>\n<p>See <a href=\"https://rubular.com/r/ByIWwAHUHqxVLU\" rel=\"nofollow noreferrer\">live demo</a>.</p>\n<hr />\n<p>Side note, you don't need to escape the <code>]</code></p>\n"}],"owner":{"user_id":9472740,"display_name":"Jan Šebek"},"view_count":49,"up_vote_count":3,"accepted_answer_id":75077840,"answer_count":1,"score":2,"creation_date":1673398784,"question_id":75077365,"body":"<p>I am trying to convert MD syntax to HTML in Java.</p>\n<p>On <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">https://regex101.com/</a> I am trying to match this:</p>\n<p><code>\\[(.*)\\]\\((.*) \\&quot;(icon|small|medium|big)?\\&quot;\\)</code></p>\n<p>regex to these test lines:</p>\n<pre><code>[link 1](https://aka.ms/aadrecoverykey &quot;icon&quot;)\n[link 1](https://aka.ms/aadrecoverykey &quot;small&quot;)\n[link 1](https://aka.ms/aadrecoverykey &quot;medium&quot;)\n[link 1](https://aka.ms/aadrecoverykey &quot;big&quot;)\n[link 2](http://myaccount.microsoft.com)\n</code></pre>\n<p>what I am trying to do is catch icon, small, medium or big keywords in quote marks in case it's there to maybe set size hints to resulting  tag. I am struggling to capture it conditionally. (ideally regex should match all test lines with 0-3 having additional capture group, 4th line not having that capture group at all because there is no hint specified.</p>\n<p>I played around in regex generator but no luck capturing the group conditionally.</p>\n"},{"tags":["java","jms","ibm-mq","spring-jms"],"comments":[{"owner":{"user_id":638413,"display_name":"Daniel Steinmann"},"edited":false,"comment_id":132487496,"body":"I don&#39;t think you can do this in JMS, you have to use the Java API classes <a href=\"https://www.ibm.com/docs/en/ibm-mq/9.3?topic=java-mqiih\" rel=\"nofollow noreferrer\">MQIIH</a>, <code>MQHeaderList</code>, <code>MQMessage</code>, <code>MQQueue</code> and <code>MQQueueManager</code> to create and send such a message."},{"owner":{"user_id":16901319,"display_name":"Javanectar"},"edited":false,"comment_id":132493345,"body":"Thanks, @DanielSteinmann do you have a sample code that I can refer to?"},{"owner":{"user_id":638413,"display_name":"Daniel Steinmann"},"edited":false,"comment_id":132518933,"body":"I added an answer which only uses <code>MQIIH</code> MQ Java class but everything else stays on the JMS API. Does this work four you?"},{"owner":{"user_id":16901319,"display_name":"Javanectar"},"edited":false,"comment_id":132525219,"body":"Yes @DanielSteinmann it works perfectly fine, Now I have one more question. How can we pass trancode in IMS messages?"}],"answers":[{"owner":{"user_id":638413,"display_name":"Daniel Steinmann"},"up_vote_count":2,"is_accepted":true,"creation_date":1673427633,"answer_id":75080501,"body":"<p>You can not do this with pure JMS, you have to use the <a href=\"https://www.ibm.com/docs/en/ibm-mq/9.3?topic=java-mqiih\" rel=\"nofollow noreferrer\">MQIIH</a> helper class:</p>\n<pre><code>import java.io.ByteArrayOutputStream;\nimport java.io.DataOutputStream;\nimport javax.jms.BytesMessage;\nimport com.ibm.mq.headers.MQIIH;\nimport com.ibm.msg.client.jms.JmsConstants;\n...\n\npublic void send(Request mqRequest) throws JMSException {\n    log.info(&quot;sending with message [{}] to queue [{}].&quot;, mqRequest.getMessage(), QUEUE_NAME);\n    MQIIH mqiih = new MQIIH();\n    mqiih.setAuthenticator(&quot;***&quot;);\n    // set other MQIIH header values\n    ByteArrayOutputStream mqiihBytes = new ByteArrayOutputStream();\n    mqiih.write(new DataOutputStream(mqiihBytes));\n    String destinationQueue = &quot;queue:///&quot; + QUEUE_NAME + &quot;?targetClient=1&quot;;\n    jmsTemplate.send(destinationQueue, (MessageCreator) session -&gt; {\n        BytesMessage message = session.createBytesMessage();\n        message.setStringProperty(JmsConstants.JMS_IBM_FORMAT, &quot;MQIMS&quot;);\n        message.writeBytes(mqiihBytes.toByteArray());\n        message.writeBytes(&quot;This Is The Body&quot;.getBytes());\n        return message;\n\n    });\n}\n</code></pre>\n<p>With the queue option <code>targetClient=1</code> the usual RFH2 header with JMS meta information gets stripped. The message will look like this:</p>\n<pre><code>5724-H72 (C) Copyright IBM Corp. 1994, 2022.\nIBM MQ Queue Load/Unload Utility\n* DMPMQMSG Version:9.3.1.0 Created:Wed Jan 11 08:41:37 2023\n* Qmgr  = QM1\n* Queue = Q1\n\nA VER 2\nA RPT 0\nA MST 8\nA EXP -1\nA FDB 0\nA ENC 273\nA CCS 819\nA FMT MQIMS   \nA PRI 4\nA PER 1\nA MSI 414D5120514D312020202020202020204337BB6301ED0140\nA COI 000000000000000000000000000000000000000000000000\nA BOC 0\nA RTQ                                                 \nA RTM QM1                                             \nA USR mqm         \nA ACC 0000000000000000000000000000000000000000000000000000000000000000\nA AIX 2020202020202020202020202020202020202020202020202020202020202020\nA PAT 28\nA PAN runner.RemoteTestRunner     \nA PTD 20230111\nA PTT 08413426\nA AOX 20202020\nA GRP 000000000000000000000000000000000000000000000000\nA MSQ 1\nA OFF 0\nA MSF 0\nA ORL -1\nT IIH \nX 00000001000000\nT T\nX 0000011100000000\nT         \nX 00000000\nT                         ***     \nX 00000000000000000000000000000000\nT     This Is The Body\n\nRead    - Files:   0  Messages:1  Bytes:100\nWritten - Files:   0  Messages:1  Bytes:100\n</code></pre>\n"}],"owner":{"user_id":16901319,"display_name":"Javanectar"},"view_count":470,"up_vote_count":3,"accepted_answer_id":75080501,"answer_count":1,"score":2,"creation_date":1673373581,"question_id":75074042,"body":"<p>Can someone help me to send a JMS message to IBM-MQ with IIH (MQIIH) headers?</p>\n<p>I am using the Spring Boot application with <strong>mq-jms-spring-boot-starter</strong> version <strong>2.4.5</strong>.</p>\n<p>When I send a message it always goes with the RFH2 header although it sets <code>StrucId</code> as <code>IIH</code> in the message header.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public void send(Request mqRequest) throws JMSException {\n    log.info(&quot;sending with message [{}] to queue [{}].&quot;, mqRequest.getMessage(), QUEUE_NAME);\n    MQQueue destinationQueue = new MQQueue(QUEUE_NAME);\n    jmsTemplate.convertAndSend(destinationQueue, mqRequest.getMessage(), message -&gt; {\n        log.info(&quot;setting standard JMS headers before sending&quot;);\n       message.setJMSCorrelationID(UUID.randomUUID().toString());\n        message.setJMSDestination(new MQQueue(QUEUE_NAME));\n        message.setJMSTimestamp(System.nanoTime());\n        message.setJMSType(&quot;MQIIH&quot;);\n        message.setStringProperty(&quot;Authenticator&quot;, &quot;********&quot;);\n        message.setStringProperty(&quot;Format&quot;, &quot;********&quot;);\n        message.setStringProperty(&quot;ReplyToFormat&quot;, &quot;********&quot;);\n        message.setIntProperty(&quot;CommitMode&quot;, '0');\n        message.setStringProperty(&quot;LTermOverride&quot;, &quot;********&quot;);\n        message.setStringProperty(&quot;MFSMapName&quot;, &quot;********&quot;);\n        message.setIntProperty(&quot;SecurityScope&quot;, 'C');\n        message.setStringProperty(&quot;StrucId&quot;, &quot;IIH &quot;);\n        message.setIntProperty(&quot;StrucLength&quot;, 84);\n        message.setIntProperty(&quot;Version&quot;, 1);\n        return message;\n    });\n}\n</code></pre>\n"},{"tags":["java","maven","web-applications","maven-archetype"],"answers":[{"owner":{"user_id":19835740,"display_name":"Daxelarne"},"up_vote_count":2,"is_accepted":true,"creation_date":1673358405,"answer_id":75070897,"body":"<p>After a bit of searching it seems it is only related to a slow or slowed internet connection.</p>\n<p>You can use <code>-DinteractiveMode=false</code> to generate the project in batch mode</p>\n<p>Source : <a href=\"https://stackoverflow.com/questions/17524148/generating-project-in-interactive-mode-taking-lot-of-time\">Generating project in Interactive mode Taking lot of time</a></p>\n"}],"owner":{"user_id":1759063,"display_name":"Eljah"},"view_count":75,"up_vote_count":2,"accepted_answer_id":75070897,"answer_count":1,"score":2,"creation_date":1673357926,"question_id":75070800,"body":"<p>I create the folder for the project as <code>D:\\Java\\games&gt;cd prometheus2graphana</code> and call for the project generation from the archetype like that:</p>\n<pre><code>mvn archetype:generate -DarchetypeGroupId=org.apache.maven.archetypes -DarchetypeArtifactId=maven-archetype-webapp -DarchetypeVersion=1.4\n\n[INFO] Scanning for projects...\n[INFO]\n[INFO] ------------------&lt; org.apache.maven:standalone-pom &gt;-------------------\n[INFO] Building Maven Stub Project (No POM) 1\n[INFO] --------------------------------[ pom ]---------------------------------\n[INFO]\n[INFO] &gt;&gt;&gt; maven-archetype-plugin:3.2.1:generate (default-cli) &gt; generate-sources @ standalone-pom &gt;&gt;&gt;\n[INFO]\n[INFO] &lt;&lt;&lt; maven-archetype-plugin:3.2.1:generate (default-cli) &lt; generate-sources @ standalone-pom &lt;&lt;&lt;\n[INFO]\n[INFO]\n[INFO] --- maven-archetype-plugin:3.2.1:generate (default-cli) @ standalone-pom ---\n[INFO] Generating project in Interactive mode\n</code></pre>\n<p>But it hangs on the last line.</p>\n"},{"tags":["java","kotlin","build.gradle"],"comments":[{"owner":{"user_id":2684,"display_name":"Martin Marconcini"},"edited":false,"comment_id":132473973,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/9854176/in-gradle-is-there-a-better-way-to-get-environment-variables\">In Gradle, is there a better way to get Environment Variables?</a>"},{"owner":{"user_id":19776112,"display_name":"justrying"},"edited":false,"comment_id":132473993,"body":"Hi @MartinMarconcini nope it doesn&#39;t, I know how to that, my question is how to migrate the build.gradle variables to build.gradle.kts"}],"answers":[{"owner":{"user_id":2684,"display_name":"Martin Marconcini"},"up_vote_count":2,"is_accepted":true,"creation_date":1673350724,"answer_id":75069428,"body":"<p>Well, the issue is shown in <a href=\"https://stackoverflow.com/questions/9854176/in-gradle-is-there-a-better-way-to-get-environment-variables\">the other question</a>, <code>System.getenv</code> is a static java method that doesn't guarantee the nullability of the returned String. In Kotlin, this is a compilation error. So what the compiler is telling you is &quot;I cannot guarantee that calling <code>toString()</code> on the returned string won't crash with a NullPointerException because the JVM method <code>getenv</code> doesn't guarantee it&quot;. I'd argue that you don't need the <code>toString()</code> call at all.</p>\n<pre><code>lateinit var db: String\n// or\nvar db: String? = null //this can now be null\n\n\n//then\next {\n    db = System.getenv(&quot;YOUR_DB&quot;) ?: &quot;&quot; //UPDATE: you also need this since getenv can return null, or you need to make the variable `String?`\n//or\n    db = System.getenv(&quot;YOUR_DB&quot;) ?: &quot;&quot; // since it can be null, set some fallback, like empty or null\n}\n</code></pre>\n<p>This should work no problem.</p>\n<h3>UPDATE</h3>\n<p>I've created a new empty android project with compose (which uses build.gradle.kt instead of groovy), and added this:</p>\n<pre><code>lateinit var something1: String\nvar something2: String? = null\n\next {\n    something1 = System.getenv(&quot;something&quot;) ?: &quot;&quot;\n    something2 = System.getenv(&quot;something2&quot;) ?: &quot;&quot;\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/mIjxR.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/mIjxR.png\" alt=\"Image of Android Studio editor with a short code snippet\" /></a></p>\n<p>It compiled no problem. (And I'd assume it would work if the environment variables were set).</p>\n<p><code>BUILD SUCCESSFUL in 25s</code></p>\n<h3>Update 2 a real test</h3>\n<p>I've actually done this</p>\n<pre><code>lateinit var something1: String\nvar something2: String? = null\n\next {\n    something1 = System.getenv(&quot;SHELL&quot;) ?: &quot;&quot;\n    something2 = System.getenv(&quot;SHELL&quot;) ?: &quot;&quot;\n}\n\ntasks.register(&quot;printSomething&quot;) {\n    println(&quot;Something 1 is $something1&quot;)\n    println(&quot;Something 2 is $something2&quot;)\n}\n</code></pre>\n<p>Then I ran <code>./gradle printSomething</code></p>\n<p>And here's the result:</p>\n<p><a href=\"https://i.stack.imgur.com/Awx9W.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Awx9W.png\" alt=\"Image of terminal emulator where gradlew printsomething was executed and the output is as expected according the code snipet above this image.\" /></a></p>\n"}],"owner":{"user_id":19776112,"display_name":"justrying"},"view_count":162,"up_vote_count":2,"accepted_answer_id":75069428,"answer_count":1,"score":2,"creation_date":1673349874,"question_id":75069264,"body":"<p>In build.gradle I Know you can do this</p>\n<pre><code>ext {\n    dbUsername = System.getenv(&quot;DB_USER&quot;).toString()\n    dbPassword = System.getenv(&quot;DB_PASS&quot;).toString()\n    libsUserNameNew = System.getenv(&quot;LIBS_USERNAME_NEW&quot;).toString()\n    libsPassNew = System.getenv(&quot;LIBS_PASS_NEW&quot;).toString()\n    gitShortTag = System.getenv(&quot;SHORT_SHA&quot;).toString()\n    repoName = System.getenv(&quot;REPO_NAME&quot;).toString()\n    group = &quot;app.test.customerservicepoc&quot;\n    mainClass = &quot;app.test.customerservicepoc.CustomerServicePOC&quot;\n}\n</code></pre>\n<p>How can I achieve the same using <code>build.gradle.kts</code>\nThis is what I have tried</p>\n<pre><code>var dbUsername =&quot;&quot;\nvar dbPassword =&quot;&quot;\nvar LibsUserNameNew = &quot;&quot;\nvar LibsPassNew = &quot;&quot;\nvar gitShortTag  = &quot;&quot;\nvar repoName = &quot;&quot;\n</code></pre>\n<p>and then</p>\n<pre><code>ext {\n    dbUsername = System.getenv(&quot;DB_USER&quot;).toString()\n    dbPassword = System.getenv(&quot;DB_PASS&quot;).toString()\n    kyoskLibsUserNameNew = System.getenv(&quot;LIBS_USERNAME_NEW&quot;).toString()\n    LibsPassNew = System.getenv(&quot;LIBS_PASS_NEW&quot;).toString()\n    gitShortTag = System.getenv(&quot;SHORT_SHA&quot;).toString()\n    repoName = System.getenv(&quot;REPO_NAME&quot;).toString()\n    group = &quot;app.test.mms&quot;\n}\n</code></pre>\n<p>during build I end up getting errors</p>\n<blockquote>\n<ul>\n<li>What went wrong: 945 Cannot invoke &quot;String.toString()&quot; because the return value of\n&quot;org.gradle.internal.classpath.Instrumented.getenv(String, String)&quot; is\nnull</li>\n</ul>\n</blockquote>\n<p>I am migrating the project to <code>kotlin gradle</code>, how can I define the variables in kotlin gradle?</p>\n"},{"tags":["java","specifications","operands"],"answers":[{"owner":{"display_name":"user19443549"},"up_vote_count":0,"is_accepted":false,"creation_date":1673326094,"answer_id":75065577,"body":"<p>Use below piece of code -</p>\n<pre><code>  if(object == null || (object != null &amp;&amp; &quot; &quot;.equals(object.value))) {\n        // do something\n    }\n    else {\n        // do something else \n    }\n</code></pre>\n<p>Also Always keep constant values in left side of equals, it will prevent NPE.</p>\n<p>For Above code if object is null or object.value is &quot; &quot;(space), it will go inside if otherwise it will go in else.</p>\n"},{"owner":{"user_id":984823,"display_name":"Joop Eggen"},"up_vote_count":2,"is_accepted":true,"creation_date":1673327632,"answer_id":75065729,"body":"<p>In Java <code>&amp;&amp;</code> and <code>||</code> are <strong>short circuit</strong> (boolean!) operators. So <strong>everything works as assumed</strong>. No unnecessary evaluation running into an error. Some languages Name these <em>and-then</em>, <em>or-else</em>.</p>\n<pre><code>boolean newGraphRequired = graphNode == null\n    || gaphNode.timeStamp() != moduleNode.timeStamp();\n</code></pre>\n<p>Conditions become more straightforward.</p>\n"}],"owner":{"user_id":15363867,"display_name":"Lauren_G"},"view_count":60,"up_vote_count":2,"accepted_answer_id":75065729,"answer_count":2,"score":2,"creation_date":1673325729,"question_id":75065538,"body":"<p>I have some code that does the following:</p>\n<pre><code>if(object == null || object.value.equals(&quot; &quot;)) {\n    // do something\n}\nelse {\n   // do something else \n}\n</code></pre>\n<p>The above seems dangerous to me because if I switched the order of the two conditions or changed this to an AND expression, the code will crash when object is null, but I also read somewhere that Java guarantees operands are evaluated from left to right. That said, I also read do not assume this to be true.</p>\n<p>I am confused by all this conflicting advice and wondering whether the above code constitutes a bug. That said, what is the best way to recode this if indeed this is considered bad practice?</p>\n"},{"tags":["java","algorithm","matrix","breadth-first-search"],"answers":[{"owner":{"user_id":9350720,"display_name":"Abhinav Mathur"},"up_vote_count":2,"is_accepted":true,"creation_date":1673324240,"answer_id":75065427,"body":"<p>You'll need to keep a track of the visited nodes.</p>\n<p><code>0,0</code> will queue <code>0,1</code>, <code>0,1</code> will queue <code>0,0</code> again, and this will go on indefinitely. As soon as you pop the queue, mark the node as visited. While queueing neighbours for a root, don't enqueue the visited ones.</p>\n"}],"owner":{"user_id":13451504,"display_name":"beatmaister"},"view_count":46,"up_vote_count":2,"accepted_answer_id":75065427,"answer_count":1,"score":2,"creation_date":1673323972,"question_id":75065402,"body":"<p>This code finds a path through a binary matrix to a location with '9'.</p>\n<p>Each iteration, dequeues a root and checks if all children are in bound and contain  '0'. If so, that child is added to the queue.</p>\n<p>Each que element 'Box' has a parent, which will give the path if followed once the target is reached.</p>\n<p>The code gets stuck because the que somehow just increases in size and is never empty. Am I missing something?</p>\n<pre><code>public static Queue&lt;Box&gt; q = new LinkedList&lt;Box&gt;();\n    public static void searchPath(int[][] maze, int x, int y, ArrayList&lt;Integer&gt; path) {\n        q.add(new Box(x,y,null));\n\n        while(!q.isEmpty()) {\n            Box p = q.poll();\n\n            if (maze[p.y][p.x] == 9) {\n                System.out.println(&quot;Exit is reached!&quot;);\n                getPath(p, maze, path);\n                return;\n            }\n\n            if(isFree(maze, p.x+1,p.y)) {             \n                Box nextP= new Box(p.x+1,p.y,p);\n                q.add(nextP);\n            }\n\n            if(isFree(maze, p.x-1,p.y)) {               \n                Box nextP= new Box(p.x-1,p.y,p);\n                q.add(nextP);\n            }\n\n            if(isFree(maze, p.x,p.y+1)) {               \n                Box nextP= new Box(p.x,p.y+1,p);\n                q.add(nextP);\n            }\n\n            if(isFree(maze, p.x,p.y-1)) {\n                Box nextP= new Box(p.x,p.y-1,p);\n                q.add(nextP);\n            }\n        }\n    }\n\n\n    public static boolean isFree(int[][] maze, int x, int y) {\n        if((x &gt;= 0 &amp;&amp; x &lt; maze.length) &amp;&amp; (y &gt;= 0 &amp;&amp; y &lt; maze[x].length) &amp;&amp; (maze[y][x] == 2 || maze[y][x] == 0 || maze[y][x] == 9)) {\n            return true;\n        }\n        return false;\n        \n            \n    }\n\n    public static ArrayList&lt;Integer&gt; getPath(Box node, int[][] maze, ArrayList&lt;Integer&gt; path){\n        while(node!=null){\n            path.add(node.x);\n            path.add(node.y);\n            maze[node.y][node.x] = 2;\n            node = node.parent;\n        }\n        return path;\n    }\n</code></pre>\n"},{"tags":["java","android","android-studio"],"comments":[{"owner":{"user_id":9417126,"display_name":"Abhishek sheshagiri"},"edited":false,"comment_id":132467430,"body":"Do you have all the SDKs installed on Android Studio?"},{"owner":{"user_id":20440272,"display_name":"Sohaib Ahmed"},"edited":false,"comment_id":132467965,"body":"Add manifest code as well"}],"answers":[{"owner":{"user_id":18059131,"display_name":"prodohsamuel"},"up_vote_count":2,"is_accepted":true,"creation_date":1673323356,"answer_id":75065345,"body":"<p>I went to <code>Run &gt; Edit Configurations</code> and set launch to a Specified Activity. I then set the specified activity and in AndroidMainfest.xml, inside the activity tag, I set exported=true. Now it works.</p>\n"}],"owner":{"user_id":18059131,"display_name":"prodohsamuel"},"view_count":516,"up_vote_count":2,"accepted_answer_id":75065345,"answer_count":1,"score":2,"creation_date":1673321856,"question_id":75065213,"body":"<p>I'm running:</p>\n<pre><code>package com.example.projectTest;\n\nimport androidx.appcompat.app.AppCompatActivity;\n\nimport android.os.Bundle;\n\npublic class WelcomePage extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_welcome_page);\n    }\n}\n</code></pre>\n<p>with:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;androidx.constraintlayout.widget.ConstraintLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.WelcomePage&quot;&gt;\n\n&lt;/androidx.constraintlayout.widget.ConstraintLayout&gt;\n</code></pre>\n<p>but I'm getting the following error in the logcat when I run:</p>\n<pre><code>Could not get package user id: run-as: unknown package: com.example.projectTest\nCould not find apks for this package: com.example.projectTest\nCould not get package user id: run-as: unknown package: com.example.projectTest\nCould not find apks for this package: com.example.projectTest\nFailed to measure fs-verity, errno 1: /data/app/~~kWSycfQmCvKbfYx2KzxrNA==/com.example.projectTest-x4Zc9BUq0kRGdN5aX5AxXQ==/base.apk\n</code></pre>\n<p>The launch succeeds, but no app shows up on the emulator (Pixel 6 API 32). What could be the problem? Thank you.</p>\n"},{"tags":["java","multidimensional-array","big-o"],"comments":[{"owner":{"user_id":7212686,"display_name":"azro"},"edited":false,"comment_id":132434593,"body":"<code>n x n</code> =&gt; <code>O(n&#178;)</code> and if you do that 1, 2, 3 times we don&#39;t care but , but if if depends of a variable then it matters <code>O(m.n&#178;)</code>"},{"owner":{"user_id":15325295,"display_name":"JackRaBeat"},"edited":false,"comment_id":132434783,"body":"I suggest to do to read a bit on big O notation but in a simple way, it&#39;s a way to analyze the algorithm complexity that depended on the size of the input (which usually named with &quot;n&quot;) and not on the constant operations that the algorithm do. so any kind of operation which is not depended on the size of the input is constant and considered O(1) and if you run over all the inputs a constant number of times it consider linear and written as O(n). so if you consider your input as an 2d array in size of n (each dimension) and you run on all the array constant number of times is O(n^2)"},{"owner":{"user_id":4818212,"display_name":"AcK"},"edited":false,"comment_id":132435289,"body":"The question has nothing to do with Java."}],"answers":[{"owner":{"user_id":20396069,"display_name":"Donkassu"},"up_vote_count":1,"is_accepted":false,"creation_date":1673173593,"answer_id":75047015,"body":"<p>The algorithm that you made is initializing a multidimensional array. Although the array is filled by 9 of <code>&quot;-&quot;</code>, the Big O Notation implies the upper bound on the complexity of the algorithm which is the maximum number of operations that the algorithm will perform given the worst-case input.\nSo, the input value that you have given (3x3) should not be considered to get the Big O Notation of your algorithms.</p>\n<p>Since you have two iterations in your algorithms, the maximum iteration would be n*n, so your Big O is <code>O(n^2)</code>.</p>\n<p>Because your input data is given, which are 3 and 3, you can estimate the time complexity via <code>O(n^2)</code>, which is <code>O(9)</code>.</p>\n<p>For more information: <a href=\"https://www.geeksforgeeks.org/difference-between-big-oh-big-omega-and-big-theta/\" rel=\"nofollow noreferrer\">https://www.geeksforgeeks.org/difference-between-big-oh-big-omega-and-big-theta/</a></p>\n"},{"owner":{"user_id":10559142,"display_name":"Berthur"},"up_vote_count":1,"is_accepted":false,"creation_date":1673279323,"answer_id":75059735,"body":"<p>Time complexity describes how an algorithm's time grows, as a function of the input, as time approaches infinity.</p>\n<p>In this case, it is clear that the running time depends only on the size of the input, not on its content. So it is up to you to define a variable that describes your input size.</p>\n<p>In your code example, the input size is constant 3x3, so if this never changes, then you can just say the algorithm has constant time complexity, <em>O(1)</em>.</p>\n<p>If the input can change, then it is up to you to decide how it can change, and how it makes sense to define it. For example, you can say that it is an <em>n * n</em> quadratic grid. Fine. Then, clearly both your loops run <em>n</em> times, so you get a total complexity of <em>O(n * n) = O(n<sup>2</sup>)</em>.</p>\n<p>It is also perfectly correct to define <em>n</em> as the total number of elements in your array. Then, we have some <em>n = a * b</em>. One of your loops runs <em>a</em> times, the other <em>b</em> times, so in total the complexity becomes <em>O(a * b) = O(n)</em>.</p>\n<p>As for your second question, yes if you apply this for a board <em>m</em> times, then your complexity would be <em>O(m n<sup>2</sup>)</em> or <em>O(m n)</em>, depending on your chosen definition.</p>\n<p>What matters is that you make your definitions clear and define your variables in a way that makes sense for what you are trying to say.</p>\n"}],"owner":{"user_id":20957016,"display_name":"nono"},"view_count":55,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1673171819,"question_id":75046878,"body":"<p>I am having trouble figuring out how to calculate the big O notation for a project. What would the big O notation be for a 3x3 grid, or a nxn grid with n being decided by the user.</p>\n<p>Also, if I output a 3x3 grid multiple times, do I add the big O notations of each array together, or is there just one big O notation for all?</p>\n<p>Sorry, I'm a little confused on how big O notation works and how to calculate it, and what parts of code it can be used for.</p>\n<p>I really don't know what to do, this is the code for my multidimentional array.</p>\n<pre><code>String board[][] = new String[3][3];\n    for (int i = 0; i &lt; board.length; i++) {\n\n        for (int j = 0; j &lt; board[0].length; j++) {\n\n            board[i][j] = &quot;-&quot;;\n        }\n    }\n</code></pre>\n"},{"tags":["java","json","serialization","jackson","deserialization"],"comments":[{"owner":{"user_id":1180351,"display_name":"Rob Spoor"},"edited":false,"comment_id":132422967,"body":"Jackson by default tries to serialize dates, times, etc. as timestamps, even if you have registered the <code>JavaTimeModule</code> or added other similar configuration. You need to explicitly disable that. In this case, you need to disable SerializationFeature.WRITE_DURATIONS_AS_TIMESTAMPS, but I suggest to also disable SerializationFeature.WRITE_DATES_AS_TIMESTAMPS."},{"owner":{"user_id":3426309,"display_name":"Andrey B. Panfilov"},"edited":false,"comment_id":132423025,"body":"@citizen_code what result do you expect when duration is negative or exceeds 24 hours?"},{"owner":{"user_id":20926873,"display_name":"citizen_code"},"edited":false,"comment_id":132426765,"body":"Good points. @RobSpoor disabeling the TIMESTAMPS feature just left me with the default textual representation <code>&quot;PT1H11M&quot;</code>. @Andrey as negative durations make no sense in this context only positive durations should be allowed. Durations above 1 day should be still represented as hh:mm, but I guess that isn&#39;t how DateTimeFormatter is able to function?!"}],"answers":[{"owner":{"user_id":51591,"display_name":"Michał Ziober"},"up_vote_count":2,"is_accepted":true,"creation_date":1673108211,"answer_id":75041865,"body":"<p><code>hh:mm</code> format is not supported by <code>Jackson</code> since <code>Java</code> does not recognise it by default. We need to customise serialisation/deserialisation mechanism and provide custom implementation.</p>\n<p>Take a look at:</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/266825/how-to-format-a-duration-in-java-e-g-format-hmmss\">How to format a duration in java? (e.g format H:MM:SS)</a></li>\n<li><a href=\"https://www.baeldung.com/java-ms-to-hhmmss\" rel=\"nofollow noreferrer\">Format a Milliseconds Duration to HH:MM:SS</a></li>\n</ul>\n<p>Using some examples from linked articles I have created custom serialiser and deserialiser. They do not handle all possible cases but should do the trick for your requirements:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import com.fasterxml.jackson.annotation.JsonFormat;\nimport com.fasterxml.jackson.core.JsonGenerator;\nimport com.fasterxml.jackson.core.JsonParser;\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.BeanProperty;\nimport com.fasterxml.jackson.databind.DeserializationContext;\nimport com.fasterxml.jackson.databind.JsonDeserializer;\nimport com.fasterxml.jackson.databind.JsonMappingException;\nimport com.fasterxml.jackson.databind.JsonSerializer;\nimport com.fasterxml.jackson.databind.ObjectMapper;\nimport com.fasterxml.jackson.databind.SerializationFeature;\nimport com.fasterxml.jackson.databind.SerializerProvider;\nimport com.fasterxml.jackson.databind.json.JsonMapper;\nimport com.fasterxml.jackson.databind.module.SimpleModule;\nimport com.fasterxml.jackson.datatype.jsr310.JavaTimeModule;\nimport com.fasterxml.jackson.datatype.jsr310.deser.DurationDeserializer;\nimport com.fasterxml.jackson.datatype.jsr310.ser.DurationSerializer;\nimport lombok.AllArgsConstructor;\nimport lombok.Data;\nimport lombok.NoArgsConstructor;\nimport org.apache.commons.lang3.StringUtils;\nimport org.apache.commons.lang3.time.DurationFormatUtils;\n\nimport java.io.IOException;\nimport java.time.Duration;\nimport java.time.LocalTime;\nimport java.util.Objects;\nimport java.util.concurrent.TimeUnit;\n\npublic class DurationApp {\n    public static void main(String[] args) throws JsonProcessingException {\n        LocalTime startTime = LocalTime.of(13, 30);\n        LocalTime endTime = LocalTime.of(14, 41);\n\n        Book firstBook = new Book(Duration.between(startTime, endTime));\n\n        // create the mapper, add the java8 time support module and enable pretty parsing\n        ObjectMapper objectMapper = JsonMapper.builder()\n                .addModule(new JavaTimeModule())\n                .addModule(new SimpleModule()\n                        .addSerializer(Duration.class, new ApacheDurationSerializer())\n                        .addDeserializer(Duration.class, new ApacheDurationDeserializer()))\n                .build()\n                .enable(SerializationFeature.INDENT_OUTPUT);\n\n        String json = objectMapper.writeValueAsString(firstBook);\n        System.out.println(json);\n        Book deserialisedBook = objectMapper.readValue(json, Book.class);\n        System.out.println(deserialisedBook);\n    }\n}\n\n@Data\n@NoArgsConstructor\n@AllArgsConstructor\nclass Book {\n    @JsonFormat(pattern = &quot;HH:mm&quot;)\n    private Duration duration;\n}\n\n\nclass ApacheDurationSerializer extends DurationSerializer {\n\n    private final String apachePattern;\n\n    public ApacheDurationSerializer() {\n        this(null);\n    }\n\n    ApacheDurationSerializer(String apachePattern) {\n        this.apachePattern = apachePattern;\n    }\n\n    @Override\n    public void serialize(Duration duration, JsonGenerator generator, SerializerProvider provider) throws IOException {\n        if (Objects.nonNull(apachePattern) &amp;&amp; Objects.nonNull(duration)) {\n            String value = DurationFormatUtils.formatDuration(duration.toMillis(), apachePattern);\n\n            generator.writeString(value);\n        } else {\n            super.serialize(duration, generator, provider);\n        }\n    }\n\n    @Override\n    public JsonSerializer&lt;?&gt; createContextual(SerializerProvider prov, BeanProperty property) throws JsonMappingException {\n        JsonFormat.Value format = findFormatOverrides(prov, property, handledType());\n        if (format != null &amp;&amp; format.hasPattern() &amp;&amp; isApacheDurationPattern(format.getPattern())) {\n            return new ApacheDurationSerializer(format.getPattern());\n        }\n\n        return super.createContextual(prov, property);\n    }\n\n    private boolean isApacheDurationPattern(String pattern) {\n        try {\n            DurationFormatUtils.formatDuration(Duration.ofDays(1).toMillis(), pattern);\n            return true;\n        } catch (Exception e) {\n            return false;\n        }\n    }\n}\n\nclass ApacheDurationDeserializer extends DurationDeserializer {\n    private final String apachePattern;\n    private final int numberOfColonsInPattern;\n\n    public ApacheDurationDeserializer() {\n        this(null);\n    }\n\n    ApacheDurationDeserializer(String apachePattern) {\n        this.apachePattern = apachePattern;\n        this.numberOfColonsInPattern = countColons(apachePattern);\n    }\n\n    @Override\n    public Duration deserialize(JsonParser parser, DeserializationContext context) throws IOException {\n        if (Objects.nonNull(apachePattern)) {\n            String value = parser.getText();\n            if (this.numberOfColonsInPattern != countColons(value)) {\n                throw new JsonMappingException(parser, String.format(&quot;Pattern '%s' does not match value '%s'!&quot;, apachePattern, value));\n            }\n            if (numberOfColonsInPattern == 0) {\n                return Duration.ofSeconds(Long.parseLong(value.trim()));\n            }\n            String[] parts = value.trim().split(&quot;:&quot;);\n            return switch (parts.length) {\n                case 1 -&gt; Duration.ofSeconds(Long.parseLong(value.trim()));\n                case 2 -&gt; Duration.ofSeconds(TimeUnit.HOURS.toSeconds(Long.parseLong(parts[0]))\n                        + TimeUnit.MINUTES.toSeconds(Long.parseLong(parts[1])));\n                case 3 -&gt; Duration.ofSeconds(TimeUnit.HOURS.toSeconds(Long.parseLong(parts[0]))\n                        + TimeUnit.MINUTES.toSeconds(Long.parseLong(parts[1]))\n                        + Long.parseLong(parts[2]));\n                default -&gt;\n                        throw new JsonMappingException(parser, String.format(&quot;Pattern '%s' does not match value '%s'!&quot;, apachePattern, value));\n            };\n        } else {\n            return super.deserialize(parser, context);\n        }\n    }\n\n    @Override\n    public Duration deserialize(JsonParser p, DeserializationContext ctxt, Duration intoValue) throws IOException {\n        return super.deserialize(p, ctxt, intoValue);\n    }\n\n    @Override\n    public JsonDeserializer&lt;?&gt; createContextual(DeserializationContext ctxt, BeanProperty property) throws JsonMappingException {\n        JsonFormat.Value format = findFormatOverrides(ctxt, property, handledType());\n        if (format != null &amp;&amp; format.hasPattern() &amp;&amp; isApacheDurationPattern(format.getPattern())) {\n            return new ApacheDurationDeserializer(format.getPattern());\n        }\n\n        return super.createContextual(ctxt, property);\n    }\n\n    private boolean isApacheDurationPattern(String pattern) {\n        try {\n            DurationFormatUtils.formatDuration(Duration.ofDays(1).toMillis(), pattern);\n            return true;\n        } catch (Exception e) {\n            return false;\n        }\n    }\n\n    private static int countColons(String apachePattern) {\n        return StringUtils.countMatches(apachePattern, ':');\n    }\n}\n</code></pre>\n<p>Above code prints:</p>\n<pre><code>{\n  &quot;duration&quot; : &quot;01:11&quot;\n}\nBook(duration=PT1H11M)\n</code></pre>\n"}],"owner":{"user_id":20926873,"display_name":"citizen_code"},"view_count":281,"up_vote_count":2,"accepted_answer_id":75041865,"answer_count":1,"score":2,"creation_date":1673091745,"question_id":75040032,"body":"<h2>Description</h2>\n<p>I'm new to Java AND Jackson and I try to save a <code>java.time.duration</code> to a JSON in a nice and readable hh:mm (hours:minutes) format for storing and retrieving.</p>\n<p>In my project I use:</p>\n<ul>\n<li>Jackson <code>com.fasterxml.jackson.core:jackson-databind:2.14.1</code>.</li>\n<li>Jackson <code>com.fasterxml.jackson.datatype:jackson-datatype-jsr310:2.14.1</code> for the support of the newer Java 8 time/date classes.</li>\n</ul>\n<h2>Minimum working example:</h2>\n<p>Consider following example class:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Book {\n\n    private Duration timeToComplete;\n\n    public Book(Duration durationToComplete) {\n        this.timeToComplete = durationToComplete;\n    }\n\n    // default constructor + getter &amp; setter\n}\n</code></pre>\n<p>If I try to serialize a book instance into JSON like in the following code section</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class JavaToJson throws JsonProcessingException {\n\n    public static void main(String[] args) {\n        \n        // create the instance of Book, duration 01h:11min\n        LocalTime startTime = LocalTime.of(13,30);\n        LocalTime endTime = LocalTime.of(14,41);\n        Book firstBook = new Book(Duration.between(startTime, endTime));\n\n        // create the mapper, add the java8 time support module and enable pretty parsing\n        ObjectMapper objectMapper = JsonMapper.builder()\n                .addModule(new JavaTimeModule())\n                .build()\n                .enable(SerializationFeature.INDENT_OUTPUT);\n\n        // serialize and print to console\n        System.out.println(objectMapper.writeValueAsString(firstBook));\n    }\n\n}\n</code></pre>\n<p>it gives me the duration in seconds instead of <code>01:11</code>.</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;timeToComplete&quot; : 4740.000000000\n}\n</code></pre>\n<p>How would I change the JSON output into a hh:mm format?</p>\n<h2>What I tried until now</h2>\n<p>I thought about adding a custom Serializer/Deserializer (potentially a <code>DurationSerializer</code>?) during instantiation of the ObjectMapper but it seems I can't make the formatting work...</p>\n<pre class=\"lang-java prettyprint-override\"><code>ObjectMapper objectMapper = JsonMapper.builder()\n                .addModule(new JavaTimeModule())\n\n                // add the custom serializer for the duration\n                .addModule(new SimpleModule().addSerializer(new DurationSerializer(){\n                    \n                    @Override\n                    protected DurationSerializer withFormat(Boolean useTimestamp, DateTimeFormatter dtf, JsonFormat.Shape shape) {\n                    // here I try to change the formatting\n                    DateTimeFormatter dtf = DateTimeFormatter.ofPattern(&quot;HH:mm&quot;);\n                        return super.withFormat(useTimestamp, dtf, shape);\n                    }\n                }))\n                .build()\n                .enable(SerializationFeature.INDENT_OUTPUT);\n</code></pre>\n<p>All it does is change it to this strange textual representation of the Duration:</p>\n<pre class=\"lang-json prettyprint-override\"><code>{\n  &quot;timeToComplete&quot; : &quot;PT1H11M&quot;\n}\n</code></pre>\n<p>So it seems I'm not completely off but the formatting is still not there. Maybe someone can help with the serializing/de-serializing?</p>\n<p>Thanks a lot</p>\n"},{"tags":["java","spring","mongodb","spring-boot","docker"],"comments":[{"owner":{"user_id":6656833,"display_name":"Pavel"},"edited":false,"comment_id":132420750,"body":"what error it gives you? you have not specified network in your docker file, the default network is bridge I believe, you are trying to access the port on the host, so I think you should set the network to host"},{"owner":{"user_id":6656833,"display_name":"Pavel"},"edited":false,"comment_id":132420756,"body":"or change spring.data.mongodb.host to point to the mongo db container through docker network, so spring.data.mongodb.host=docker-mongo"},{"owner":{"user_id":8888065,"display_name":"Vishal Poddar"},"edited":false,"comment_id":132420949,"body":"Yes, i am using the default network."},{"owner":{"user_id":8888065,"display_name":"Vishal Poddar"},"edited":false,"comment_id":132421175,"body":"2023-01-07 08:50:03.146  INFO 1 --- [localhost:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server localhost:27017 wacaj         |  wacaj         | com.mongodb.MongoSocketOpenException: Exception opening socket wacaj         |         at com.mongodb.internal.connection.SocketStream.open(SocketStre&zwnj;&#8203;am.java:70) ~[mongodb-driver-core-4.6.1.jar!/:na]"},{"owner":{"user_id":10008173,"display_name":"David Maze"},"edited":false,"comment_id":132422922,"body":"@Pavel A Compose file with no <code>networks:</code> blocks is a good setup: Compose creates a network named <code>default</code> and all of the normal container networking features work fine.  You should <i>not</i> need host networking for this case.  Also see <a href=\"https://docs.docker.com/compose/networking/\" rel=\"nofollow noreferrer\">Networking in Compose</a> in the Docker documentation."},{"owner":{"user_id":10008173,"display_name":"David Maze"},"edited":false,"comment_id":132422943,"body":"This question seems very similar to <a href=\"https://stackoverflow.com/questions/56938511/springboot-in-docker-not-connecting-to-mongo-in-docker\">SpringBoot in Docker not connecting to Mongo in Docker</a>, though it seems somewhat inconclusive.  Definitely <code>localhost</code> (&quot;the current container&quot;) is wrong and <code>spring.data.mongodb.host=mongo</code> is right (maybe set in an environment variable)."}],"answers":[{"owner":{"user_id":5151202,"display_name":"times29"},"up_vote_count":2,"is_accepted":true,"creation_date":1673079017,"answer_id":75038937,"body":"<p>You need to change the hostname:</p>\n<pre><code>spring.data.mongodb.host=mongo\n</code></pre>\n<p>Docker makes every service in a docker compose setup available under its service name, in your case <code>mongo</code> and <code>wacaj_docker</code>.</p>\n<p>Please refer to the <a href=\"https://docs.docker.com/compose/networking/\" rel=\"nofollow noreferrer\">docs</a> for further details.</p>\n"}],"owner":{"user_id":8888065,"display_name":"Vishal Poddar"},"view_count":288,"up_vote_count":2,"accepted_answer_id":75038937,"answer_count":1,"score":2,"creation_date":1673077174,"question_id":75038793,"body":"<p>When I trying to run my spring-boot application on docker , it is not able to connect to the Mongodb container running in docker.</p>\n<p>Application.properties</p>\n<pre><code>spring.data.mongodb.port=27017\nspring.data.mongodb.host=localhost\n</code></pre>\n<p>Dockerfile for spring application</p>\n<pre><code>FROM openjdk\nCOPY target/*.jar app.jar\nENTRYPOINT [&quot;java&quot;,&quot;-jar&quot;,&quot;/app.jar&quot;]\n</code></pre>\n<p>docker-compose.yaml</p>\n<pre><code>version: '3'\nservices:\n  mongo:\n    image: mongo:latest\n    container_name: docker-mongo\n    ports:\n      - &quot;27017:27017&quot;\n  wacaj_docker:\n    image: wacaj\n    depends_on:\n      - mongo\n    container_name: wacaj\n    build: .\n    ports:\n      - &quot;8080:8080&quot;\n</code></pre>\n<p>I am able to connect to the mongodb container from my local system , but the spring-application container is not able to connect to mongo container.\nAnd also if I run the spring application in local it is able to connect to the mongo runneing in docker container.\nI am unable to troubleshoot the problem.</p>\n<p>I tried changing hostname to both servicename i.e. mongo\nand container name i.e. docker-mongo, but it is still not working.</p>\n<pre><code>2023-01-07 08:50:03.146  INFO 1 --- [localhost:27017] org.mongodb.driver.cluster               : Exception in monitor thread while connecting to server localhost:27017\nwacaj         | \nwacaj         | com.mongodb.MongoSocketOpenException: Exception opening socket\nwacaj         |         at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:70) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at com.mongodb.internal.connection.InternalStreamConnection.open(InternalStreamConnection.java:180) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.lookupServerDescription(DefaultServerMonitor.java:193) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at com.mongodb.internal.connection.DefaultServerMonitor$ServerMonitorRunnable.run(DefaultServerMonitor.java:157) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\nwacaj         | Caused by: java.net.ConnectException: Connection refused\nwacaj         |         at java.base/sun.nio.ch.Net.pollConnect(Native Method) ~[na:na]\nwacaj         |         at java.base/sun.nio.ch.Net.pollConnectNow(Net.java:672) ~[na:na]\nwacaj         |         at java.base/sun.nio.ch.NioSocketImpl.timedFinishConnect(NioSocketImpl.java:539) ~[na:na]\nwacaj         |         at java.base/sun.nio.ch.NioSocketImpl.connect(NioSocketImpl.java:594) ~[na:na]\nwacaj         |         at java.base/java.net.SocksSocketImpl.connect(SocksSocketImpl.java:327) ~[na:na]\nwacaj         |         at java.base/java.net.Socket.connect(Socket.java:633) ~[na:na]\nwacaj         |         at com.mongodb.internal.connection.SocketStreamHelper.initialize(SocketStreamHelper.java:107) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at com.mongodb.internal.connection.SocketStream.initializeSocket(SocketStream.java:79) ~[mongodb-driver-core-4.6.1.jar!/:na]\nwacaj         |         at com.mongodb.internal.connection.SocketStream.open(SocketStream.java:65) ~[mongodb-driver-core-4.6.1.jar!/:na]\n</code></pre>\n"},{"tags":["java","maven","lwjgl"],"answers":[{"owner":{"user_id":2082195,"display_name":"Valerie Thiesent"},"up_vote_count":2,"is_accepted":true,"creation_date":1673041888,"answer_id":75036402,"body":"<p>plugins listed under <code>&lt;pluginManagement&gt;</code> will only get executed by projects in child directories which have their own <code>pom.xml</code></p>\n<p>plugins for execution in the current project should be listed without <code>&lt;pluginManagement&gt;</code></p>\n<p>to fix remove pluginManagement, or re-organize your plugins to correctly reflect which plugins should be run and which should be used for child projects.</p>\n<pre><code>&lt;build&gt;\n  &lt;plugins&gt;\n    [...]\n  &lt;/plugins&gt;\n  &lt;pluginManagement&gt;\n    &lt;plugins&gt;\n      [...]\n    &lt;/plugins&gt;\n  &lt;/pluginManagement&gt;\n&lt;/build&gt;\n</code></pre>\n"}],"owner":{"user_id":2082195,"display_name":"Valerie Thiesent"},"view_count":201,"up_vote_count":2,"accepted_answer_id":75036402,"answer_count":1,"score":2,"creation_date":1673041083,"question_id":75036298,"body":"<p>I have a project which uses LWJGL, and I would like to copy the required jars and related natives to the output directory of the generated jar. I would not like to inject the dependencies into the final jar itself.</p>\n<p>I can run <code>mvn package</code> and <code>mvn dependency:copy-dependencies</code>, both of which work great.</p>\n<p>My attempts to run the goal &quot;copy-dependencies&quot; is by adding an execution to the &quot;maven-dependency-plugin&quot; as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;executions&gt;\n  &lt;execution&gt;\n    &lt;id&gt;copy-dependencies&lt;/id&gt;\n    &lt;phase&gt;prepare-package&lt;/phase&gt;\n    &lt;goals&gt;\n      &lt;goal&gt;copy-dependencies&lt;/goal&gt;\n    &lt;/goals&gt;\n    &lt;configuration&gt;\n      &lt;outputDirectory&gt;\n        ${project.build.directory}/libs\n      &lt;/outputDirectory&gt;\n    &lt;/configuration&gt;\n  &lt;/execution&gt;\n&lt;/executions&gt;\n</code></pre>\n<p>and again, as referenced by <a href=\"https://stackoverflow.com/a/23986765/2082195\">this answer</a>, with the same result: packaging completes, creating a jar, but no dependencies beside it. no logging that <code>prepare-package</code> is occurring, or the <code>maven-dependency-plugin</code> is being run at all.</p>\n<p>I've also tried binding to other phases, such as <code>package</code>, <code>validate</code>, <code>test</code>, and none of them will cause an execution to occur. This is the only execution in my <code>pom.xml</code>. I have only a handful of plugins:</p>\n<pre><code>maven-clean-plugin\nmaven-resources-plugin\nmaven-compiler-plugin\nmaven-jar-plugin (with a config declaring its manifest, shown below)\nmaven-install-plugin\nmaven-dependency-plugin\n</code></pre>\n<p>Aforementioned config:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;configuration&gt;\n  &lt;archive&gt;\n    &lt;manifest&gt;\n      &lt;addClasspath&gt;true&lt;/addClasspath&gt;\n      &lt;classpathPrefix&gt;libs/&lt;/classpathPrefix&gt;\n      &lt;mainClass&gt;\n        xyz.valnet.hadean.HadeanGame\n      &lt;/mainClass&gt;\n    &lt;/manifest&gt;\n  &lt;/archive&gt;\n&lt;/configuration&gt;\n</code></pre>\n<p>I additionally have 3 profiles, for selecting which LWJGL natives to use by setting the property <code>lwjgl-natives</code> and that being used in the dependencies.</p>\n<p>My question is mainly: what things could cause this execution to not occur.</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":182}