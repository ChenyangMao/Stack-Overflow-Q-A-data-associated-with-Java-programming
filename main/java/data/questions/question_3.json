{"items":[{"tags":["java","spring-boot","hibernate","kotlin","spring-data-jpa"],"comments":[{"owner":{"user_id":4762502,"display_name":"Gaurav Jeswani"},"edited":false,"comment_id":133302973,"body":"It intermittently, create issues with the list, as it internally uses hibernate, prefer to use native query in this case."},{"owner":{"user_id":10134209,"display_name":"gidds"},"edited":false,"comment_id":133313138,"body":"What is the exact error message (the question title might have mangled it a little), and where is it thrown? It might also help to see your <code>Recipe</code> class."},{"owner":{"user_id":12043263,"display_name":"Just A Question"},"edited":false,"comment_id":133321069,"body":"I  added the error log. The recipe class is really basic, but I can add it too, if it would help you."},{"owner":{"user_id":12706564,"display_name":"Emanuel Trandafir"},"edited":false,"comment_id":133419088,"body":"you can log the generated sql and then try to execute it in sqldeveloper, maybe you&#39;ll find something related to the mapping. <a href=\"https://www.baeldung.com/sql-logging-spring-boot\" rel=\"nofollow noreferrer\">baeldung.com/sql-logging-spring-boot</a>"}],"answers":[{"owner":{"user_id":3426309,"display_name":"Andrey B. Panfilov"},"up_vote_count":3,"is_accepted":true,"creation_date":1677423275,"answer_id":75572804,"body":"<p>Since Hibernate team <a href=\"https://vladmihalcea.com/hibernate-sqm-semantic-query-model/\" rel=\"nofollow noreferrer\">completely redesigned query model in HBN6</a>, that is expected something have stopped working, especially for cases like yours which actually looks like a hack/trick. Here I would suggest to ask a question on <a href=\"https://discourse.hibernate.org/c/hibernate-orm/5\" rel=\"nofollow noreferrer\">HBN forum</a>.</p>\n<p>However, some workarounds do exist:</p>\n<p>I. idiomatic way to implement such queries is to use jpa specifications, something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface RecipeRepository extends JpaRepository&lt;Recipe, Long&gt;, JpaSpecificationExecutor&lt;Recipe&gt; {\n\n    default List&lt;Recipe&gt; findRecipesBy(List&lt;Long&gt; authorIds, List&lt;Long&gt; recipeIds) {\n        Specification&lt;Recipe&gt; specification = (root, cq, cb) -&gt; {\n            List&lt;Predicate&gt; predicates = new ArrayList&lt;&gt;();\n            if (authorIds != null &amp;&amp; !authorIds.isEmpty()) {\n                predicates.add(root.get(&quot;author&quot;).get(&quot;id&quot;).in(authorIds));\n            }\n            if (recipeIds != null &amp;&amp; !recipeIds.isEmpty()) {\n                predicates.add(root.get(&quot;id&quot;).in(recipeIds));\n            }\n            return cb.and(predicates.toArray(new Predicate[0]));\n        };\n        return findAll(specification);\n    }\n    \n}\n</code></pre>\n<p>II. trick with <code>coalesce</code> - seems to be applicable for PostgreSQL only:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Query(&quot;SELECT r FROM Recipe r WHERE &quot;\n            + &quot;(coalesce(:authorIds) is null or r.author.id in (:authorIds)) &quot;\n            + &quot;and (coalesce(:recipeIds) is null or r.id in (:recipeIds)) &quot;\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\n            + &quot;and (coalesce(:categoryIds) is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\n    )\n</code></pre>\n<p>III. trick with SpEL - delegate null checks to SpEL:</p>\n<pre><code>@Query(&quot;SELECT r FROM Recipe r WHERE &quot;\n            + &quot;(:#{#authorIds == null} = true or r.author.id in (:authorIds)) &quot;\n            + &quot;and (:#{#recipeIds == null} = true or r.id in (:recipeIds)) &quot;\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\n            + &quot;and (:#{#categoryIds == null} = true or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\n    )\n\n</code></pre>\n"}],"owner":{"user_id":12043263,"display_name":"Just A Question"},"view_count":601,"up_vote_count":3,"accepted_answer_id":75572804,"answer_count":1,"score":3,"creation_date":1677238666,"question_id":75556114,"body":"<p>I'm encountering unstable errors when using a parameter of type List with my repository methods. The issue seems to be related to the interoperability between Kotlin lists and Java. When I run my unit test, it fails randomly, and I suspect this has something to do with the MutableList returned by listOf() in Kotlin. More information can be found in this StackOverflow post: <a href=\"https://stackoverflow.com/questions/52580173/listof-returns-mutablelist\">listOf() returns MutableList</a>.</p>\n<p>Here's an example of my unit test and repository method:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>            @Test\n            fun `should return recipes with the specified author, locale and categories`() {\n                println(&quot;AuthorID: &quot; + author.id)\n\n                recipeRepo.findRecipesBy(\n                    locale = LanguageSelection.ENGLISH,\n                    authorIds = arrayListOf(44),\n                )\n                // it throws before reaching asserts\n            }\n\n</code></pre>\n<p>Repository:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>interface RecipeRepository : JpaRepository&lt;Recipe, Long&gt; {\n\n    @Query(&quot;SELECT r FROM Recipe r WHERE &quot;\n            + &quot;(:authorIds is null or r.author.id in (:authorIds)) &quot;\n            + &quot;and (:recipeIds is null or r.id in (:recipeIds)) &quot;\n            + &quot;and (:minPrice is null or r.estimatedPrice &gt;= :minPrice) &quot;\n            + &quot;and (:maxPrice is null or r.estimatedPrice &lt;= :maxPrice) &quot;\n            + &quot;and ( cast(:beforeDate as timestamp) is null or r.createdAt &lt; cast(:beforeDate as timestamp)) &quot;\n            + &quot;and ( cast(:afterDate as timestamp) is null or r.createdAt &gt; cast(:afterDate as timestamp)) &quot;\n            + &quot;and (:minLikeCount is null or r.likeCount &gt;= :minLikeCount) &quot;\n            + &quot;and (:categoryIds is null or exists(select rc from r.categories rc where rc.id in (:categoryIds))) &quot;\n    )\n\n    fun findRecipesBy(\n        @Param(&quot;authorIds&quot;) authorIds: ArrayList&lt;Long&gt;? = null,\n        @Param(&quot;recipeIds&quot;) recipeIds: ArrayList&lt;Long&gt;? = null,\n        @Param(&quot;minPrice&quot;) minPrice: Double? = null,\n        @Param(&quot;maxPrice&quot;) maxPrice: Double? = null,\n        @Param(&quot;beforeDate&quot;) beforeDate: Date? = null,\n        @Param(&quot;afterDate&quot;) afterDate: Date? = null,\n        @Param(&quot;minLikeCount&quot;) minLikeCount: Int? = null,\n        @Param(&quot;categoryIds&quot;) categoryIds: ArrayList&lt;Long&gt;? = null,\n        sort: Sort = Sort.by(Sort.Direction.ASC, &quot;createdAt&quot;),\n    ): List&lt;Recipe&gt;\n\n}\n</code></pre>\n<p>Error:</p>\n<pre><code>\nParameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]\norg.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [[44]] did not match expected type [BasicSqmPathSource(id : Long) ]\n    at app//org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)\n    at app//org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235)\n    at app//org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\n    at app//org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at app//org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at app//org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.data.repository.core.support.MethodInvocationValidator.invoke(MethodInvocationValidator.java:94)\n    at app//org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at app//org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\n    at app/jdk.proxy3/jdk.proxy3.$Proxy189.findRecipesBy(Unknown Source)\n    at app//com.fittastetic.fittastetic_backend.shared.recipe.repository.RecipeRepository$DefaultImpls.findRecipesBy$default(RecipeRepository.kt:38)\n    ...\nCaused by: org.hibernate.type.descriptor.java.CoercionException: Cannot coerce value `[44]` [java.util.ArrayList] as Long\n    at app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:155)\n    at app//org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:24)\n    at app//org.hibernate.query.internal.QueryParameterBindingImpl.coerce(QueryParameterBindingImpl.java:144)\n    at app//org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:111)\n    ... 141 more\n\n</code></pre>\n"},{"tags":["java","math","javafx"],"comments":[{"owner":{"user_id":2189127,"display_name":"James_D"},"edited":false,"comment_id":133292966,"body":"It depends how you have things set up. I think the way I would set this up, I wouldn’t even need to make that conversion."},{"owner":{"user_id":7587451,"display_name":"Giovanni Contreras"},"edited":false,"comment_id":133293089,"body":"you can retrieve that data  from pick result  . do you want a hint ?"},{"owner":{"user_id":1155209,"display_name":"jewelsea"},"edited":false,"comment_id":133293141,"body":"It would seem that <code>HashMap&lt;Tile, Point&gt; board;</code> would be more useful.  Also, the points could be a field member of a tile and you would not need to maintain a map at all, the board could just be a list of tiles, and the list could be ordered by point coordinates using a comparator if needed and there is some natural ordering here.  Just some thoughts, there are many ways to implement this."},{"owner":{"user_id":2189127,"display_name":"James_D"},"edited":false,"comment_id":133293329,"body":"Specifically, given the size of each hexagon and the hexagon board coordinates you showed, you can easily figure out where to draw the hexagon. The only reason I can see that you’d want to go from pixel coordinates to the hexagon is if you needed to process user mouse clicks. But if you render each hexagon with a <code>Polygon</code>, you can just register mouse handlers directly with each <code>Polygon</code>, and you’d never need to do that calculation. At any rate, the answer to this depends greatly on the implementation you choose, which you haven’t shown in the question."},{"owner":{"user_id":21128942,"display_name":"st3ems"},"edited":false,"comment_id":133296115,"body":"@James_D I can&#39;t quite figure out where to draw the hexagon :(. So let&#39;s say if I was given the point (1,0) I can easily convert that to (100,0), (2,0) -&gt; (200,0), (-1,0) -&gt; (-100,0)... but when it comes to points like (2,-1) how do I convert that?"},{"owner":{"user_id":2189127,"display_name":"James_D"},"edited":false,"comment_id":133307816,"body":"Given your layout, you can figure the coordinates of hexagon (x,y+1) relative to hexagon (x,y) using basic trigonometry. As you&#39;ve pointed out, hexagon (x+k,y) is just k*100 to the right of hexagon (x,y). From there it&#39;s trivial to figure out a formula for the position of hexagon (x,y)."}],"answers":[{"owner":{"user_id":7587451,"display_name":"Giovanni Contreras"},"up_vote_count":3,"is_accepted":false,"creation_date":1677186399,"answer_id":75550330,"body":"<p><strong>Storing coordinates as field</strong></p>\n<p>In this approach <code>Hexagon</code>  instances have two integers wich represent coords . Any hexagon will print x and y as stage tittle like so :</p>\n<p><a href=\"https://i.stack.imgur.com/muzYg.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/muzYg.gif\" alt=\"hexagon javafx\" /></a></p>\n<p>This is a single javafx app you can try</p>\n<p><strong>App.java</strong></p>\n<pre><code>public class App extends Application {\n\n@Override\npublic void start(Stage stage) {\n\n    double HexagonRadius = 100;\n\n    Hexagon hexagon1 = new Hexagon(1, 2, HexagonRadius, Color.CADETBLUE);\n\n    Hexagon hexagon2 = new Hexagon(1, 0, HexagonRadius, Color.MEDIUMPURPLE);\n    hexagon2.setTranslateY(hexagon1.getOffsetY() * 2);\n\n    Hexagon hexagon3 = new Hexagon(1, 1, HexagonRadius, Color.MEDIUMSEAGREEN);\n    hexagon3.setTranslateY(-hexagon1.getOffsetY() * 2);\n\n    Hexagon hexagon4 = new Hexagon(0, 0, HexagonRadius, Color.CORNFLOWERBLUE);\n    hexagon4.setTranslateY(-hexagon1.getOffsetY());\n    hexagon4.setTranslateX(hexagon1.getOffsetX());\n\n    Hexagon hexagon5 = new Hexagon(2, 2, HexagonRadius, Color.YELLOW);\n    hexagon5.setTranslateY(-hexagon1.getOffsetY());\n    hexagon5.setTranslateX(-hexagon1.getOffsetX());\n\n    Hexagon hexagon6 = new Hexagon(2, 0, HexagonRadius, Color.ORANGE);\n    hexagon6.setTranslateY(hexagon1.getOffsetY());\n    hexagon6.setTranslateX(-hexagon1.getOffsetX());\n\n    Hexagon hexagon7 = new Hexagon(2, 3, HexagonRadius, Color.SKYBLUE);\n    hexagon7.setTranslateY(hexagon1.getOffsetY());\n    hexagon7.setTranslateX(hexagon1.getOffsetX());\n\n    Group hexagonsGroup\n            = new Group(hexagon1, hexagon2, hexagon3, hexagon4, hexagon5, hexagon6, hexagon7);\n\n    StackPane stackPane = new StackPane(hexagonsGroup);\n\n    var scene = new Scene(stackPane, 640, 480);\n    scene.setFill(Color.ANTIQUEWHITE);\n    stage.setScene(scene);\n    stage.show();\n}\n\npublic final class Hexagon extends Group {\n\n    private Polygon polygon;\n    private final double radius;\n    private final double radianStep = (2 * Math.PI) / 6;\n\n    private final int x;\n    private final int y;\n\n    private final double offsetY;\n    private final double offsetX;\n\n    public int getX() {\n        return x;\n    }\n\n    public int getY() {\n        return y;\n    }\n\n    public Hexagon(int x, int y, double radius, Paint color) {\n        this.x = x;\n        this.y = y;\n        this.radius = radius;\n        makeHexagon(radius, color);\n        offsetY = calculateApothem();\n\n        offsetX = radius * 1.5;\n        changeTittle();\n\n    }\n\n    private void makeHexagon(double radius, Paint color) {\n        polygon = new Polygon();\n        this.getChildren().add(polygon);\n        polygon.setFill(color);\n        polygon.setStroke(Color.WHITESMOKE);\n        polygon.setEffect(new DropShadow(10, Color.BLACK));\n        polygon.setStrokeWidth(10);\n        polygon.setStrokeType(StrokeType.INSIDE);\n\n        for (int i = 0; i &lt; 6; i++) {\n            double angle = radianStep * i;\n\n            polygon.getPoints().add(Math.cos(angle) * radius / 1.1);\n            polygon.getPoints().add(Math.sin(angle) * radius / 1.1);\n\n        }\n    }\n\n    public void changeTittle() {\n\n        polygon.setOnMouseClicked(e -&gt; {\n            Stage stage = (Stage) this.getScene().getWindow();\n            stage.setTitle(&quot;cordinate =&quot; + x + &quot;,&quot; + y);\n        });\n\n    }\n\n    public double getOffsetY() {\n        return offsetY;\n    }\n\n    public double getOffsetX() {\n        return offsetX;\n    }\n\n    private double calculateApothem() {\n        System.out.println(Math.tan(radianStep) * radius);\n        return (Math.tan(radianStep) * radius) / 2;\n\n    }\n\n}\n\npublic static void main(String[] args) {\n    launch();\n}\n\n}\n</code></pre>\n"}],"owner":{"user_id":21128942,"display_name":"st3ems"},"view_count":83,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1677181905,"question_id":75549676,"body":"<p>I'm trying to build a game called <a href=\"https://www.alderac.com/wp-content/uploads/2021/08/Cascadia-Rules.pdf\" rel=\"nofollow noreferrer\">Cascadia</a>. Since every tile is a hexagon, to represent it I used a hashmap to store the point(coordinate) and the tile.</p>\n<p><code>HashMap&lt;Point, Tile&gt; board;</code></p>\n<p>The point follows this <a href=\"https://i.stack.imgur.com/1xdLT.png\" rel=\"nofollow noreferrer\">structure</a>.</p>\n<p>Each tile is a width of 100 pixels.\nexample of a <a href=\"https://i.stack.imgur.com/ZlrqA.png\" rel=\"nofollow noreferrer\">tile</a>.</p>\n<p>The problem is how do I convert those points that I used in my hashmap and convert it into the actual coordinate on my scene?</p>\n<p>I have no problem with the tiles going left or right since I can just add or subtract 100(pixels).</p>\n"},{"tags":["java"],"comments":[{"owner":{"user_id":5133585,"display_name":"Sweeper"},"edited":false,"comment_id":133072332,"body":"Well, clearly you thought incorrectly. Why did you think that?"},{"owner":{"user_id":5133585,"display_name":"Sweeper"},"edited":false,"comment_id":133072359,"body":"Please read <a href=\"https://meta.stackoverflow.com/a/323382/5133585\">this</a> and clarify your question."},{"owner":{"user_id":4443784,"display_name":"Tom"},"edited":false,"comment_id":133072370,"body":"@Sweeper there are <code>final</code> variable issue with inner class,but i can&#39;t reproduce when this problem would occur,thanks."}],"answers":[{"owner":{"user_id":5133585,"display_name":"Sweeper"},"up_vote_count":3,"is_accepted":true,"creation_date":1676087642,"answer_id":75418005,"body":"<p>The <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-8.html#jls-8.1.3\" rel=\"nofollow noreferrer\">Java Language Specification</a> says:</p>\n<blockquote>\n<p>Any local variable, formal parameter, or exception parameter used but not declared in an inner class must either be declared final or be effectively final (<a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.12.4\" rel=\"nofollow noreferrer\">§4.12.4</a>), or a compile-time error occurs where the use is attempted.</p>\n</blockquote>\n<p>You most likely recalled/remembered an incorrect version of that. You might have mistook it as:</p>\n<blockquote>\n<p>Any <strong>instance variable</strong>, local variable, formal parameter, or exception parameter used but not declared in an inner class must either be declared final <s><strong>or be effectively final (<a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.12.4\" rel=\"nofollow noreferrer\">§4.12.4</a>)</strong></s>, or a compile-time error occurs where the use is attempted.</p>\n</blockquote>\n<p><code>greeting</code> is a field (aka instance variable), so can be used in inner classes whether or not it is final or not.</p>\n<p><code>ss</code>, though it is a formal parameter, is <em>effectively final</em>, so it can be used in inner classes too. Note that the phrase &quot;effectively final&quot; has a formal definition in <a href=\"https://docs.oracle.com/javase/specs/jls/se8/html/jls-4.html#jls-4.12.4\" rel=\"nofollow noreferrer\">§4.12.4</a>, but informally, it just means &quot;you did not reassign it another value in this method&quot; in this context.</p>\n<p>See this <a href=\"https://stackoverflow.com/q/39889003/5133585\">post</a> for why this restriction exists.</p>\n"}],"owner":{"user_id":4443784,"display_name":"Tom"},"view_count":37,"up_vote_count":3,"accepted_answer_id":75418005,"answer_count":1,"score":3,"creation_date":1676085779,"question_id":75417914,"body":"<p>I have always thought that  <code>inner class CAN NOT refer non final variable defined in outer class</code></p>\n<p>But, when I write the following code, it compiles correctly and can be run in Intellij Idea,</p>\n<p>I am confused,could some one help explain why the following code works? thanks!</p>\n<pre><code>public class Outer {\n\n    /**\n     * non final variable greeting is used in inner class, non final is OK?\n     */\n    private String greeting = &quot;Greeting1&quot;;\n\n    /**\n     * non final variable s is used in inner class, non final is OK?\n     */\n    public String doWork(String s) {\n        class Inner {\n            public String speak(String ss) {\n                return greeting + &quot;--- &quot; + s + &quot;---&quot; + ss;\n            }\n        }\n        Inner obj = new Inner();\n        return obj.speak(&quot;Inner&quot;);\n    }\n\n    public static void main(String[] args) {\n        Outer obj = new Outer();\n        //Can assign here.\n        obj.greeting=&quot;Greeting2&quot;;\n        System.out.println(obj.doWork(&quot;Outer&quot;));\n    }\n}\n</code></pre>\n"},{"tags":["java","timezone","java-time"],"comments":[{"owner":{"user_id":634824,"display_name":"Matt Johnson-Pint"},"edited":false,"comment_id":133070853,"body":"So <code>9:00 MST</code> - is that <code>America&#47;Denver</code> or <code>America&#47;Phoenix</code>?  They both use &quot;MST&quot;, but Denver uses it only when they&#39;re not in daylight saving time, and Phoenix uses it year-round.  Same with <code>HAST</code> - could be <code>America&#47;Adak</code> (uses DST) or <code>Pacific&#47;Honolulu</code> (no DST)."},{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":133073034,"body":"I would go for building my own map. After making sure with the customer that by CDT they always mean Cuba Daylight Time and never Central Daylight Time, or the other way around. And that they accept all errors and inaccuracies incurred. Because you can never avoid those. If the times are always assumed to fall on nearby dates, you may consider adding a few heuristics so that MST means America/Denver during standard time and America/Phoenix during summer. You may be able to get it, say, 75 % correct."}],"answers":[{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"up_vote_count":3,"is_accepted":false,"creation_date":1676076551,"answer_id":75417409,"body":"<h1>Time with zone makes no sense</h1>\n<blockquote>\n<p>13:30 EDT</p>\n</blockquote>\n<p>A time-of-day plus a time zone makes no sense. Without the context of a date, there is no real meaning here.</p>\n<p>The <a href=\"https://en.wikipedia.org/wiki/SQL-92\" rel=\"nofollow noreferrer\">SQL-92</a> standard declares a <code>TIME WITH TIME ZONE</code> type, but neglects to define its meaning. I am not alone in being mystified by the SQL committee’s intention. And also, importantly, that data type is a misnomer: the SQL standard means <em>offset</em> when they say “time zone”.</p>\n<p>Java offers an <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/time/OffsetTime.html\" rel=\"nofollow noreferrer\"><code>OffsetTime</code></a> class. I presume this class exists merely for mapping through JDBC to that screwy SQL type of <code>TIME WITH TIME ZONE</code>. The Javadoc offers no real explanation as to the meaning of this class.</p>\n<p>So what is your goal? I suggest you edit your Question to indicate what kind of processing you intend to do with such inputs. Perhaps we can guide you from there.</p>\n<h1>Pseudo time zones are not unique</h1>\n<p>You asked:</p>\n<blockquote>\n<p>Is there a clean way to convert these short ids to a property ZoneId?</p>\n</blockquote>\n<p>No.</p>\n<p>These 2-4 character pseudo time zones are not defined, are not standardized, and are not unique.</p>\n<ul>\n<li><code>CST</code> — Do you mean <em>Central Standard Time</em> in the Americas? Or do you mean <em>China Standard Time</em>? Or <em>Cuba Standard Time</em>?</li>\n<li><code>IST</code> — Do you mean <a href=\"https://www.timeanddate.com/time/zones/ist\" rel=\"nofollow noreferrer\"><em>India Standard Time</em></a>? Or <a href=\"https://www.timeanddate.com/time/zones/ist-ireland\" rel=\"nofollow noreferrer\"><em>Ireland Standard Time</em></a>?</li>\n<li><code>PST</code> — <em>Pacific Standard Time</em> or <em>Pitcairn Standard Time</em>?</li>\n<li><code>BST</code> — <em>Bangladesh Standard Time</em>, <em>Bougainville Standard Time</em>, or <em>British Summer Time</em>?</li>\n<li><code>AMST</code> — <em>Amazon Summer Time</em> or <em>Armenia Summer Time</em>?</li>\n</ul>\n<p>So, no you cannot cleanly determine a time zone from a pseudo zone. You can only guess. If you know for certain the domain of possible values you expect to receive, and you are certain as to their intended actual time zone, then you can create your own mapping.</p>\n<p>But even then, there is no class in Java nor data type in SQL to represent a date with time zone. You would have to convert that time zone to an offset from UTC. And for that conversion, you would need a date to determine a moment to determine the offset in use at that moment by the people of that zone… which leads us back in a circle to point at the top of this Answer: A time with only a zone (or offset), but without the context of a date, makes no sense.</p>\n<h1>Reject senseless data</h1>\n<p>You said:</p>\n<blockquote>\n<p>but unfortunately I have no way to get the client to change their api</p>\n</blockquote>\n<p>Providing a time-of-day with an ambiguous pseudo time zone is like providing a money amount tagged with &quot;dollar&quot; while asking to convert to &quot;francs&quot;.</p>\n<ul>\n<li>We don't know if &quot;dollar&quot; means Canada Dollar (CAD), United States Dollar (USD), or a Australian dollar (AUD), or any of the twenty <a href=\"https://en.wikipedia.org/wiki/Dollar\" rel=\"nofollow noreferrer\">currencies with that name</a>.</li>\n<li>We don't know if <code>franc</code> means the <a href=\"https://en.wikipedia.org/wiki/CFA_franc\" rel=\"nofollow noreferrer\">franc CFA</a> in West Africa, the <a href=\"https://en.wikipedia.org/wiki/Swiss_franc\" rel=\"nofollow noreferrer\">Swiss franc</a>, or some other <a href=\"https://en.wikipedia.org/wiki/Franc\" rel=\"nofollow noreferrer\">currency with that name</a>.</li>\n<li>We don't have a date on which to look up a conversion rate.</li>\n</ul>\n<p>So what would you do with such a request? What <em>can</em> you do? You would have to either ask for much more explicit definitions, or you would have to refuse the request.</p>\n"}],"owner":{"user_id":1516152,"display_name":"Naty722"},"view_count":141,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1676069770,"question_id":75416863,"body":"<p>A client's API that I am integrating with returns a time with the time zone as a short id (3 letter id). e.g.</p>\n<pre><code>9:00 MST\n13:30 EDT\n17:00 MDT\n</code></pre>\n<p>I realize this is bad practice (especially with the daylight savings), and short ids should be avoided, but unfortunately I have no way to get the client to change their api. Is there a clean way to convert these short ids to a property <code>ZoneId</code>? <code>ZoneId.SHORT_IDS</code> looks like the closest, but it doesn't include daylights savings. Worst case, I think I can just make my own map of short ids to <code>ZoneIds</code> since it's limited to the US</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"user_id":1786065,"display_name":"Rogue"},"edited":false,"comment_id":133029449,"body":"As another possible guess: It may be the case that IntelliJ detaches itself in a shutdown hook or similar. In other words, the problem may not lay with how the application is ended, but instead in how IntelliJ handles ending a running instance."}],"answers":[{"owner":{"user_id":21033369,"display_name":"LJ replica"},"up_vote_count":3,"is_accepted":true,"creation_date":1675913877,"answer_id":75393946,"body":"<p>Just as @Rogue guessed, when you click the stop button, the IDEA disconnects the debugger and sends SIGINT to the app.</p>\n<p>There is no setting to configure this behavior currently. Check the related issue here for details: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-170313/Breakpoints-not-working-after-stop-signal\" rel=\"nofollow noreferrer\">https://youtrack.jetbrains.com/issue/IDEA-170313/Breakpoints-not-working-after-stop-signal</a></p>\n<p>As a workaround, you could open <code>Settings | Tools | External Tools</code>, add a script that could find your java process, and send the SIGINT. Then assign a shortcut for it or add a menu in the IDEA's Toolbar in <code>Settings | Appearance &amp; Behavior | Menus and Toolbars</code> so you could use it easily like the stop button.</p>\n"}],"owner":{"user_id":7631480,"display_name":"CryptoFool"},"view_count":65,"up_vote_count":3,"accepted_answer_id":75393946,"answer_count":1,"score":3,"creation_date":1675896644,"question_id":75392494,"body":"<p>I'm noticing an unexpected and undesirable behavior out of IntelliJ's debugger that I'm wondering if anyone knows anything about.</p>\n<p>Our Spring app has some fairly complex shutdown logic. We make use of Spring's &quot;Disposable Bean&quot; interface, and we also register our own JVM shutdown hook. I often find myself wanting to stop in the debugger in this code. I'd love to be able to do so by pressing the IntelliJ debugger's Stop button and having my breakpoints be hit. This is the behavior I expected.</p>\n<p>When I press the Stop button in the IntelliJ debugger, my breakpoints in my shutdown code are not hit. At first, I thought that maybe IntelliJ was hard-killing my app rather than sending a termination signal (I believe it sends a SIGINT) to the process. But I have since confirmed that my shutdown code runs when I press the Stop button. The behavior is as though IntelliJ unregisters my breakpoints before sending the SIGINT signal to my app.</p>\n<p>My workaround is to send a SIGINT to my app from a shell prompt. When I do this, my breakpoints get hit. This is a pain. So I'm wondering if anyone has either a way to cause the breakpoints to be hit when the Stop button is pressed, or at least some information as to why the debugger behaves this way.</p>\n"},{"tags":["java","flutter"],"comments":[{"owner":{"user_id":2288659,"display_name":"Silvio Mayolo"},"edited":false,"comment_id":133006668,"body":"As seen <a href=\"https://en.wikipedia.org/wiki/Java_class_file#General_layout\" rel=\"nofollow noreferrer\">here</a>, class file version 63 corresponds to Java 19. If it says that&#39;s not supported, then that means you aren&#39;t using Java 19. Go back to 19 and make absolutely sure that your IDE is pointing to  the correct Java version. Simply installing a bunch of random Java versions doesn&#39;t necessarily tell your IDE and other programs to use the new versions."},{"owner":{"user_id":421195,"display_name":"paulsm4"},"edited":false,"comment_id":133006677,"body":"Version 63 is Java 19.  Your &quot;build environment&quot; is somehow using an <i>OLDER</i> JRE. Q: Are you using VSCode (my preference) , Android Studio or the Flutter CLI to build your Flutter app?  Q: What happens if you try the Flutter CLI (in my experience, VSCode build == CLI build)?  You should also try a CLI &quot;flutter doctor&quot;."},{"owner":{"user_id":391162,"display_name":"tazboy"},"edited":false,"comment_id":133007031,"body":"@SilvioMayolo I&#39;ve looked in the settings and I&#39;m not seeing where to point VSCode to use Java 19. Are you familiar with that process?"},{"owner":{"user_id":391162,"display_name":"tazboy"},"edited":false,"comment_id":133007085,"body":"@paulsm4 Flutter doctor is all good. I&#39;m using VSCode. The project runs but there are two errors in the Android folder. Thoughts on how to fix this?"},{"owner":{"user_id":421195,"display_name":"paulsm4"},"edited":false,"comment_id":133008042,"body":"Look here: <a href=\"https://github.com/flutter/flutter/issues/110807\" rel=\"nofollow noreferrer\">github.com/flutter/flutter/issues/110807</a>.  Try <code>flutter build apk -v</code> from a command prompt and tell us what happens.  Ensure <code>JAVA_HOME </code>is set throughout your environment, and that wherever it&#39;s set, it points to your Java 19.  Based on the &quot;flutter issues&quot; link above ... you might even consider hacking the JAVA_HOME in your &quot;gradle.dart&quot; (as a last resort)."},{"owner":{"user_id":391162,"display_name":"tazboy"},"edited":false,"comment_id":133090006,"body":"@paulsm4 Here is what prints out as a warning after running <code>flutter build apk -v</code>. Runtime JAR files in the classpath should have the same version. These files were found in the classpath: C:/Users/Main/.gradle/caches/modules-2/files-2.1/org.jetbrai&zwnj;&#8203;ns.kotlin/kotlin-std&zwnj;&#8203;lib-jdk8/1.5.30/5fd4&zwnj;&#8203;7535cc85f9e24996f939&zwnj;&#8203;c2de6583991481b0/kot&zwnj;&#8203;lin-stdlib-jdk8-1.5.&zwnj;&#8203;30.jar (version 1.5) C:/Users/Main/.gradle/caches/modules-2/files-2.1/org.jetbrai&zwnj;&#8203;ns.kotlin/kotlin-std&zwnj;&#8203;lib-jdk7/1.6.10/e1c3&zwnj;&#8203;80673654a089c4f0c9f8&zwnj;&#8203;3d0ddfdc1efdb498/kot&zwnj;&#8203;lin-stdlib-jdk7-1.6.&zwnj;&#8203;10.jar (version 1.6)"},{"owner":{"user_id":421195,"display_name":"paulsm4"},"edited":false,"comment_id":133154436,"body":"Q: Did you resolve this?  Q: What about <a href=\"https://stackoverflow.com/q/75356399/421195\">this</a>?"}],"answers":[{"owner":{"user_id":12806961,"display_name":"Banjoe"},"up_vote_count":1,"is_accepted":false,"creation_date":1675872746,"answer_id":75388624,"body":"<p>I encountered this error while trying to run <a href=\"https://github.com/flutter/flutter/tree/main/packages/integration_test#android-device-testing\" rel=\"nofollow noreferrer\">Flutter integration tests on Firebase Test Lab</a>. I was able to solve this by updating a few things in Android Studio.</p>\n<h3>Update the Project's JDK</h3>\n<p>Open the Android Studio project settings page (File -&gt; Project Settings) and add the newest JDK version.</p>\n<p><a href=\"https://i.stack.imgur.com/JokLW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/JokLW.png\" alt=\"enter image description here\" /></a></p>\n<h3>Update com.android.tools.build:gradle</h3>\n<p>In android/build.gradle, update the com.android.tools.build:gradle value to the latest version found <a href=\"https://mvnrepository.com/artifact/com.android.tools.build/gradle?repo=google\" rel=\"nofollow noreferrer\">here</a>.</p>\n<pre><code> dependencies {\n        classpath 'com.android.tools.build:gradle:7.4.1'\n        ...\n    }\n</code></pre>\n<h3>Update the gradle distributionUrl</h3>\n<p>In <code>android/gradle/wrapper/gradle-wrapper.properties</code>, update the distributionUrl property to use the <a href=\"https://gradle.org/releases/\" rel=\"nofollow noreferrer\">latest Gradle version</a>.</p>\n<pre><code>distributionUrl=https\\://services.gradle.org/distributions/gradle-7.6-all.zip\n</code></pre>\n<hr />\n<h1>Other Useful Tips</h1>\n<ul>\n<li><p>You can type <code>/usr/libexec/java_home</code> into the terminal to see which version of Java you have installed.</p>\n</li>\n<li><p>You can find the current value of JAVA_HOME by running <code>%echo $JAVA_HOME</code> in your terminal (<a href=\"https://www.baeldung.com/find-java-home\" rel=\"nofollow noreferrer\">source</a>).</p>\n</li>\n<li><p>You can update JAVA_HOME by following <a href=\"https://stackoverflow.com/a/19663996/12806961\">these steps</a></p>\n</li>\n</ul>\n"},{"owner":{"user_id":421195,"display_name":"paulsm4"},"up_vote_count":2,"is_accepted":false,"creation_date":1676242926,"answer_id":75430716,"body":"<p>The problem is that somehow, either deliberately or inadvertently, you've built one or more Java files (or you're using one or more 3rd party .jars) with Java 19 ... but your &quot;build environment&quot; is using an older JRE. Hence the <code>Unsupported class file</code> error.</p>\n<p>I, too, am using VSCode for my Flutter IDE; and I, too have Android Studio in my environment.  Unfortunately, there are constantly new releases for Flutter, for VSCode, for the Android SDK, for Android Studio (with its own embedded Java/Kotlin!) and - last, but not least - for Gradle and the A/S Gradle plugin.  Any one of them falling out of sync can break your entire development environment :(</p>\n<p>I just tried to rebuild a project that compiled fine a few months ago... and (as expected) the build failed.  None of the source change - but I recently upgraded A/S, and that inadvertently broke the Flutter build :(</p>\n<p>SUGGESTION:</p>\n<ol>\n<li><p>See if you can identify which Java class or .jar is using Java 19 ... and back it down to an older version.</p>\n</li>\n<li><p>In parallel, upgrade <em>EVERYTHING</em> in your build environment:</p>\n<ul>\n<li><p><code>flutter upgrade</code> =&gt; Flutter 3.7.3, Dart 2.19.2</p>\n</li>\n<li><p>VSCode update, <code>pub upgrade</code> =&gt; VSCode 1.751, Dart Code 3.58.0</p>\n</li>\n<li><p>A/S upgrade =&gt; Electric Eel 2022.1.1 Patch 1, Gradle Plugin 4.2.2</p>\n<p><em>Note</em>: Gradle Plugin 4.2.2 =&gt; Gradle version =&gt; 6.7.1, Default=Java8, AGP dependency 4.2.2</p>\n</li>\n<li><p>A/S Electric Eel gives you java 11... in (new!) directory &quot;c:\\Program Files\\Android\\Android Studio\\jbr&quot;</p>\n</li>\n</ul>\n</li>\n</ol>\n"}],"owner":{"user_id":391162,"display_name":"tazboy"},"view_count":2195,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1675803652,"question_id":75378928,"body":"<p>&quot;General error during conversion: Unsupported class file major version 63&quot;</p>\n<p>I've tried multiple suggestions on here. None have worked. I think I need more of a step-by-step solution because I've tried installing multiple versions of Java (19,16,11), <code>flutter clean</code>, <code>flutter doctor</code> is all good, and I've installed a newer version of Android Studio (just in case). Here is what I see in VSCode:</p>\n<p><a href=\"https://i.stack.imgur.com/AiAbS.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AiAbS.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/7gmWc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7gmWc.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","deployment","open-liberty","server-configuration"],"answers":[{"owner":{"user_id":496562,"display_name":"Alasdair"},"up_vote_count":3,"is_accepted":false,"creation_date":1674134341,"answer_id":75172859,"body":"<p>No it is not possible to use wildcards in the location field. If wildcards were supported it could match multiple files and we wouldn't be able to determine which file to use.</p>\n<p>What I do is make sure the version number is not in the war file name. Assuming you are using maven configuring a final name in the pom.xml is the simplest way to do this. Something like this would work:</p>\n<pre><code>  &lt;build&gt;\n        &lt;finalName&gt;${project.name}&lt;/finalName&gt;\n  &lt;/build&gt;\n</code></pre>\n"}],"owner":{"user_id":725306,"display_name":"Mohammad Faisal"},"view_count":35,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1674106997,"question_id":75168164,"body":"<p>I have a WAR file which contains the version number to it. In openliberty <code>server.xml</code> I had to specify the application location where the version number could be replaced by wildcard matching.<br />\ne.g., the file name is: <code>my-company-project-vX.Y.war</code> and the corresponding application definition in <code>server.xml</code> is:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;server description=&quot;my-company&quot;&gt;\n\n    &lt;application context-root=&quot;my-company-project&quot; \n        id=&quot;my-company-project-war&quot; name=&quot;my-company-project-war&quot; \n        type=&quot;war&quot; location=&quot;my-company-project-vX.Y.war&quot;&gt;&lt;/application&gt;\n\n&lt;/server&gt;\n</code></pre>\n<p>Now if the project version is changed I have to always change the <code>location</code> attribute in <code>application</code>.</p>\n<p>Is it possible to use some kind of wildcard so that I do not always have to replace the version?</p>\n<p>I had tried <code>*</code> as <code>location=&quot;my-company-project-*.war&quot;</code> but that did not worked and I got warning in server logs:</p>\n<pre><code>[WARNING ] CWWKZ0014W: The application my-company-project-war could not be started \nas it could not be found at location my-company-project-*.war.\n</code></pre>\n<p>And I was expecting it to pick the <code>my-company-project-vX.Y.war</code> correctly.</p>\n"},{"tags":["java","floating-point","precision","floating-accuracy"],"comments":[{"owner":{"user_id":2970947,"display_name":"Elliott Frisch"},"edited":false,"comment_id":132526275,"body":"What is the result of <code>(1+sqrt(5))&#47;2</code>.... is it an <code>int</code>? And is that <code>int</code> in fact <code>1</code>?"},{"owner":{"user_id":13963086,"display_name":"k314159"},"edited":false,"comment_id":132526358,"body":"@ElliottFrisch, no of course not, it&#39;s defined to be a <code>double</code> by the Java specification. Java&#39;s <code>Math.sqrt</code> always returns <code>double</code>, and every other number gets promoted to double because it takes part in an operation involving a <code>double</code>."},{"owner":{"user_id":2970947,"display_name":"Elliott Frisch"},"edited":false,"comment_id":132526377,"body":"So <code>sqrt</code> is <code>Math.sqrt</code>? Some reason you aren&#39;t logging the values?"},{"owner":{"user_id":13963086,"display_name":"k314159"},"edited":false,"comment_id":132526434,"body":"@ElliottFrisch I wrote this test after printing out the values returned by <code>f(variety_of_doubles)</code> and seeing that it always completes (never goes into infinite loop) and always returns 1.618...."},{"owner":{"user_id":3923896,"display_name":"Steve Summit"},"edited":false,"comment_id":132526456,"body":"This is a great example of the sad paradox of floating-point arithmetic.  It&#39;s not perfect, meaning it does have some problems, and people always notice problems, so they loom large, and plenty of people get the — rather badly mistaken — impression that floating point arithmetic is &quot;always inaccurate&quot; or &quot;terrible&quot; or &quot;broken&quot;.  But in fact, the IEEE-754 standard was written very carefully, and it&#39;s designed to always  give you the best possible results you can, within certain immovable constraints.  And it <i>does</i> often work very well, as your code demonstrates!"},{"owner":{"user_id":3923896,"display_name":"Steve Summit"},"edited":false,"comment_id":132526459,"body":"Although, with that said, it doesn&#39;t <i>always</i> work perfectly, which is why you can&#39;t always expect an exactly-equal result such as you get here.  (Also I think Java isn&#39;t exactly defined to use strict IEEE-754, so my argument breaks down a little.)"},{"owner":{"user_id":3923896,"display_name":"Steve Summit"},"edited":false,"comment_id":132526507,"body":"I think the bottom line is that you — perhaps accidentally — picked a good algorithm, that was guaranteed to converge, and that never ended up oscillating.  Most of the time, when you&#39;re computing a result via an infinite sequence like this, you do need to use an approximately-equal termination test, otherwise your loop may run forever if it ends up oscillating through values that are alternately a little above and a little below the &quot;true&quot; result."},{"owner":{"user_id":2970947,"display_name":"Elliott Frisch"},"edited":false,"comment_id":132526576,"body":"@SteveSummit As of JEP-306 and Java 17, Java is back to using strict IEEE-754 even on Intel. <a href=\"https://howtodoinjava.com/java/new-features/\" rel=\"nofollow noreferrer\">howtodoinjava.com/java/new-features</a>"},{"owner":{"user_id":990750,"display_name":"Tarik"},"edited":false,"comment_id":132539300,"body":"@SteveSummit Could you put an answer out of your comments. I would love to upvote."}],"answers":[{"owner":{"user_id":1796579,"display_name":"Henry"},"up_vote_count":2,"is_accepted":false,"creation_date":1673538655,"answer_id":75098968,"body":"<p>You were just lucky, in general you don't get exact equality. Try this for example:</p>\n<pre><code>public static void main(String[] args) {\n    var s = 0.0;\n    for (int i = 0; i &lt; 10; i++) {\n        s += 0.1;\n    }\n    System.out.println(s == 1.0);\n}\n</code></pre>\n<p>In your concrete example one would have to do a careful analysis to prove that your iteration always converges to the floating point number closest to phi. If sqrt also returns the closest floating point number to the exact root we would get exact equality.</p>\n"},{"owner":{"user_id":2410359,"display_name":"chux - Reinstate Monica"},"up_vote_count":1,"is_accepted":true,"creation_date":1673584773,"answer_id":75104901,"body":"<blockquote>\n<p>... and to my surprise it seems to always work:</p>\n</blockquote>\n<p>Not <em>always</em>.</p>\n<p>When I tried <code>f(-1/1.6180339887498949)</code>, the <code>x</code> and <code>y</code> values oscillated between two floating point values that differed in the last few bits <a href=\"https://stackoverflow.com/questions/75098720/floating-point-equality-unexpectedly-working/75104901#comment132526507_75098720\">@Steve Summit</a>. Thus an infinite loop.</p>\n<pre><code>x:-0.61803398874989490  y:-0.61803398874989468   // Decimal notation\nx:-0x1.3c6ef372fe950p-1 y:-0x1.3c6ef372fe94ep-1  // Hex notation\n\nx:-0.61803398874989479  y:-0.6180339887498949\nx:-0x1.3c6ef372fe94fp-1 y:-0x1.3c6ef372fe950p-1\n\nx:-0.61803398874989490  y:-0.61803398874989468\nx:-0x1.3c6ef372fe950p-1 y:-0x1.3c6ef372fe94ep-1\n</code></pre>\n<p><code>f(some_starting_x)</code> generally converges to render an <code>x</code>, such that <code>1 + 1 / x</code> is <code>x</code> again and so meeting the stopping condition.</p>\n<p>Better routines can prove that if <code>x</code> is reasonably close, the <code>while</code> loop will eventually get close to the desired answer, yet even then, an oscillation, as shown above is possible.  Thus using an <strong>iteration limit</strong> or <strong>close enough test</strong> is needed.  Usually the 2 oscillation values, when close, they are <em>massaged</em> (e.g. averaged)  to form the best answer.  If not close, the looping simply failed to find a stable answer.</p>\n<hr />\n<blockquote>\n<p>Can anyone tell me why I never come across a situation where the two floating-point numbers are different by a very small amount?</p>\n</blockquote>\n<p>Inadequate testing.</p>\n<hr />\n<p><strong>Morale of the story</strong>:</p>\n<p>Do not rely on only floating point equality, except in select cases.<br />\n<code>f()</code> was not a select case and deserved additional stopping code.</p>\n<hr />\n<p>Ref: Two <code>x</code> with math property: <code>x = 1 + 1/x</code>:</p>\n<pre><code>x1 = 1.6180339887498948482045868343656...\nx2 = -0.61803398874989484820458683436564...\n</code></pre>\n<p>Note <code>x1*x2 == -1</code>.  <code>x1</code> is the <a href=\"https://en.wikipedia.org/wiki/Golden_ratio\" rel=\"nofollow noreferrer\">Golden_ratio φ</a>.</p>\n"}],"owner":{"user_id":13963086,"display_name":"k314159"},"view_count":77,"up_vote_count":3,"accepted_answer_id":75104901,"answer_count":2,"score":3,"creation_date":1673537462,"question_id":75098720,"body":"<p>We are often taught that floating-point numbers should not be compared for exact equality. However, the following function, which returns the Golden Ratio when passed any positive number, does in fact compare doubles for equality and to my surprise it seems to always work:</p>\n<pre><code>public static double f(double x) {\n    double y;\n    while ((y = 1 + 1 / x) != x)\n        x = (x + y) / 2;\n    return x;\n}\n\n@Test\nvoid test() {\n    assertEquals((1 + sqrt(5)) / 2, f(1.0));  // Passes!\n}\n</code></pre>\n<p>I thought that maybe it works for some input arguments but not others. But even if I use JQwik's property testing, it still works!</p>\n<pre><code>@Property\nvoid test2(@ForAll @Positive double x) {\n    assertEquals((1 + sqrt(5)) / 2, f(x));  // Always passes!\n}\n</code></pre>\n<p>Can anyone tell me why I never come across a situation where the two floating-point numbers are different by a very small amount?</p>\n"},{"tags":["java","algorithm","matrix","depth-first-search"],"answers":[{"owner":{"user_id":5483526,"display_name":"Matt Timmermans"},"up_vote_count":1,"is_accepted":true,"creation_date":1673307430,"answer_id":75064035,"body":"<p>Stack space is limited, so you should only write a recursive algorithm when you know that it will use a reasonable amount of it.</p>\n<p>Using recursive DFS to find your way out of an NxM maze can use O(N*M) stack space -- not reasonable.</p>\n<p>You could write DFS using a separate stack data structure, but really you should use BFS with a queue.  It's a little simpler, and you will get the shortest path.</p>\n"},{"owner":{"user_id":10929107,"display_name":"MohammadMH"},"up_vote_count":2,"is_accepted":false,"creation_date":1673308213,"answer_id":75064083,"body":"<p>method callings are in stack memory and after some calls it overflows. you can add <code>-Xss12m</code> as JVM argument (It gives 12 MB memory to your application stack memory. if it wasn't enough increase it.) and you can add this argument to the Run config in IntelliJ Idea as a JVM argument or as argument of java command in command line.</p>\n"}],"owner":{"user_id":13451504,"display_name":"beatmaister"},"view_count":38,"up_vote_count":3,"accepted_answer_id":75064035,"answer_count":2,"score":3,"creation_date":1673305615,"question_id":75063845,"body":"<p>This algorithm successfully gives me a path through a maze. The maze is a 2D binary matrix, and the target location is '9'.</p>\n<p>The algorithm works by going through the '0' path that reaches '9' (base case) and recursively adds the previous locations to my path array.</p>\n<p>I observed that removing the border detecting line  at the top gives an index out of bounds error. but I am pretty sure this algo is breaking  when the path reaches a wall.</p>\n<p>It also works smoothly on matrices 200x200 or less and about 50% of the time at 250x250.\n(As seen in the 100 width one below.)</p>\n<pre><code>public static boolean searchPath(int[][]maze, int x, int y, ArrayList&lt;Integer&gt; path){\n        if(x&lt;0 || x&gt;=maze[1].length || y&lt;0 || y&gt;=maze.length) return false;\n        if(maze[y][x] == 9){\n            path.add(x);\n            path.add(y);\n            return true;\n        }\n        if(maze[y][x] == 0){\n            maze[y][x] = 2;\n\n            int dx = -1;\n            int dy = 0;\n            if(searchPath(maze,  x+dx, y+dy, path)){\n                path.add(x);\n                path.add(y);\n                return true;\n            }\n            dx = 1;\n            dy = 0;\n            if(searchPath(maze,  x+dx, y+dy, path)){\n                path.add(x);\n                path.add(y);\n                return true;\n            }\n            dx = 0;\n            dy = -1;\n            if(searchPath(maze,  x+dx, y+dy, path)){\n                path.add(x);\n                path.add(y);\n                return true;\n            }\n            dx = 0;\n            dy = 1;\n            if(searchPath(maze,  x+dx, y+dy, path)){\n                path.add(x);\n                path.add(y);\n                return true;\n            }\n        }\n        return false;\n    }\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/jmx0A.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/jmx0A.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/0f2x0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/0f2x0.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","docker","gitlab-ci","gitlab-ci-runner"],"answers":[{"owner":{"user_id":3730077,"display_name":"Slava Kuravsky"},"up_vote_count":0,"is_accepted":false,"creation_date":1673604897,"answer_id":75107755,"body":"<p>Try to wrap your script in single quotes:</p>\n<pre><code>script:\n    - 'download -f zip -u true test-download.zip'\n</code></pre>\n<p>EDIT:</p>\n<p>Oh, this <a href=\"https://gitlab.com/gitlab-org/gitlab-runner/-/issues/27706\" rel=\"nofollow noreferrer\">open bug</a> in gitlab could be relevant to you</p>\n"},{"owner":{"user_id":5465973,"display_name":"Pierre B."},"up_vote_count":2,"is_accepted":false,"creation_date":1673607210,"answer_id":75108233,"body":"<blockquote>\n<p>I would like to avoid using the entrypoint directive as it needs to be used on multiple files, so I rather fix the issue at the root.</p>\n</blockquote>\n<p>You can change your Dockerfile instead to keep default <code>ENTRYPOINT</code> (as <code>openjdk:18</code> doesn't define any entrypoint, it will be empty):</p>\n<pre><code>FROM openjdk:18\n\n# ...\n\n# ENTRYPOINT [&quot;./run.sh&quot;] # remove this\n\n# Add run.sh to path to be able to use `run.sh` from any directory\nENV PATH=&quot;${PATH}:/opt/app&quot;\n</code></pre>\n<p>And update your <code>run.sh</code> to specify full path to <code>jar</code>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\njava $JAVA_OPTS -Djava.security.egd=file:/dev/./urandom -jar $PROJECT_HOME/cli.jar &quot;$@&quot;\n</code></pre>\n<p>Now your container will start in Gitlab without having to specify <code>entrypoint</code> keyword for job. You can then setup something like this:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>download:\n  stage: download\n  image: &lt;url&gt;/my-image:&lt;tag&gt;\n  variables:\n    URL: &lt;URL&gt;\n    API_KEY: &lt;API_KEY&gt;\n    CI_DEBUG_TRACE: &quot;true&quot;\n  script:\n  # Specify command using run.sh\n  # This command is run from within your container\n  # Note that script is not an argument passed on your image startup\n  # But independent commands run within your container using shell\n  - run.sh download -f zip -u true test-download.zip\n</code></pre>\n<p>Notes:</p>\n<ul>\n<li>Gitlab won't run your script in Dockerfile's <code>WORKDIR</code> but <a href=\"https://docs.gitlab.com/ee/ci/runners/configure_runners.html#custom-build-directories\" rel=\"nofollow noreferrer\">in a dedicated directory where your project will be cloned.</a>. Using <code>./</code> will look for script and jar in current directory at the moment your command is run, but they wouldn't be found if not run from <code>/opt/app</code>. Specyfing full path to jar and adding your <code>run.sh</code> script to <code>PATH</code> make sure they'll be found wherever your <code>run.sh</code> from. Alternatively you could run <code>cd /opt/app</code> in your job's script but it may cause unwanted side effects.</li>\n<li>Without <code>ENTRYPOINT</code> you won't be able to run Docker commands like this\n<pre><code>docker run &quot; &lt;url&gt;/my-image:&lt;tag&gt;&quot; download ...\n</code></pre>\nYou'll need to specify either <code>COMMAND</code> or <code>--entrypoint</code> such as\n<pre><code>docker run &quot;&lt;url&gt;/my-image:&lt;tag&gt;&quot; run.sh download ...\ndocker run --entrypoint run.sh &quot;&lt;url&gt;/my-image:&lt;tag&gt;&quot; download ...\n</code></pre>\n</li>\n<li>You specified not wanting to do this, but <a href=\"https://docs.gitlab.com/ee/ci/docker/using_docker_images.html#override-the-entrypoint-of-an-image\" rel=\"nofollow noreferrer\">overriding image <code>entrypoint</code> on your job</a> seems a much simpler and straightforward solution. Using multiple files you may leverage Gitlab's <a href=\"https://docs.gitlab.com/ee/ci/yaml/#extends\" rel=\"nofollow noreferrer\"><code>extends</code></a> and <a href=\"https://docs.gitlab.com/ee/ci/yaml/#include\" rel=\"nofollow noreferrer\"><code>include</code></a>.</li>\n</ul>\n<hr />\n<p>And now for the fun part</p>\n<blockquote>\n<p>what is happening</p>\n</blockquote>\n<p>When Gitlab run your container for a job it will use the <code>entrypoint</code> defined in your Dockerfile by default. <a href=\"https://docs.gitlab.com/ee/ci/docker/using_docker_images.html#override-the-entrypoint-of-an-image\" rel=\"nofollow noreferrer\">From doc</a>:</p>\n<blockquote>\n<ol>\n<li>The runner starts a Docker container <strong>using the defined entrypoint</strong>. The default from Dockerfile that may be overridden in the\n.gitlab-ci.yml file.</li>\n<li>The runner attaches itself to a running container.</li>\n<li>The runner prepares a script (the combination of before_script, script, and after_script).</li>\n<li>The runner sends the script to the container’s shell stdin and receives the output.</li>\n</ol>\n</blockquote>\n<p>And what the doc doesn't say is that <a href=\"https://github.com/gitlabhq/gitlab-runner/blob/39ebe9ab9f0f9c14e9745d1a59a15018880c6962/shells/bash.go#L16\" rel=\"nofollow noreferrer\">Gitlab will try to use various form of <code>sh</code> as Docker <em>command</em></a>. In short for step 1. it's like running this Docker command:</p>\n<pre class=\"lang-bash prettyprint-override\"><code># Gitlab tries to run container for your job\ndocker run -it &quot;&lt;url&gt;/my-image:&lt;tag&gt;&quot; sh\n</code></pre>\n<p>It doesn't work as Gitlab will use default entrypoint and the final command run in Docker is:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>./run.sh sh\n</code></pre>\n<p>Where <code>./run.sh</code> is the <code>entrypoint</code> from Dockerfile and <code>sh</code> is the <code>command</code> provided by Gitlab. It causes the error you see:</p>\n<blockquote>\n<p><code>tool: error:  invalid  choice:  'sh'  (choose  from  'upload',  'download', 'apply')</code></p>\n</blockquote>\n<p>You never reach your job's script (step 4). See <a href=\"https://docs.docker.com/engine/reference/builder/#understand-how-cmd-and-entrypoint-interact\" rel=\"nofollow noreferrer\">ENTRYPOINT vs. CMD for details</a>.</p>\n<p>Furthermore, the script you define is a command itself. Even if your container started, it wouldn't work as the following command would be run inside your container:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>download -f zip -u true test-download.zip\n\n# 'download' command doesn't exists\n# You probably want to run instead something like:\n\n/opt/app/run.sh download -f zip -u true test-download.zip\n</code></pre>\n"},{"owner":{"user_id":2287089,"display_name":"ruben1691"},"up_vote_count":1,"is_accepted":true,"creation_date":1674066340,"answer_id":75163716,"body":"<p>So, after a bit of research, I have been able to find a solution that works for me.</p>\n<p>From my research (and as Pierre B. pointed out in <a href=\"https://stackoverflow.com/a/75108233/2287089\">his answer</a>), Gitlab essentially tries to inject a shell script that performs a check for which shell is available.</p>\n<p>Now, my solution is in no way elegant, but does achieve what I wanted. I modified the Dockerfile like so:</p>\n<pre><code>FROM openjdk:18-bullseye\n\nENV JAR_NAME &quot;my-jar.jar&quot;\n\nENV PROJECT_HOME /opt/app\nRUN mkdir -p $PROJECT_HOME\n\nWORKDIR $PROJECT_HOME\nCOPY run.sh $PROJECT_HOME/run.sh\nRUN chmod +x $PROJECT_HOME/run.sh\n\nCOPY target/$JAR_NAME $PROJECT_HOME/cli.jar\n\nRUN  echo '#!/bin/bash \\njava $JAVA_OPTS -Djava.security.egd=file:/dev/./urandom -jar $PROJECT_HOME/cli.jar &quot;$@&quot;' &gt; /usr/bin/i18n &amp;&amp;  \\\n     chmod +x /usr/bin/i18n\n\nENTRYPOINT [&quot;./run.sh&quot;]\n</code></pre>\n<p>And also modified the <code>run.sh</code> script this way:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\nif [[ -n &quot;$CI&quot; ]]; then\n    echo &quot;this block will only execute in a CI environment&quot;\n    exec /bin/bash\nelse\n    echo &quot;Not in CI. Running the image normally&quot;\n    java $JAVA_OPTS -Djava.security.egd=file:/dev/./urandom -jar ./cli.jar &quot;$@&quot;\nfi\n</code></pre>\n<p>This works because Gitlab, in its list of <a href=\"https://docs.gitlab.com/ee/ci/variables/predefined_variables.html\" rel=\"nofollow noreferrer\">predefined variables</a>, provides a <code>CI</code> env var that is set when the script is running on the CI. By doing so, I skip the java invocation but leave it in the case I need to use it when not on a CI.</p>\n<p>Now when I need to use my image, all I need to specify in my <code>.gitlab-ci.yml</code> file is this:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>download:\n  stage: download\n  image: &lt;url&gt;/my-image:&lt;tag&gt;\n  variables:\n    URL: &lt;URL&gt;\n    API_KEY: &lt;API_KEY&gt;\n    CI_DEBUG_TRACE: &quot;true&quot;\n  script:\n    - i18n download -f zip -u true test-download.zip # This calls the script that was injected in the Dockerfile\n</code></pre>\n<p>This way I essentially mimic an actual CLI, and can use it in all my projects that require this tool.</p>\n<p>I am not sure though why I need to &quot;echo&quot; the script for the CLI, and I can't simply copy it. For some reason the env variables are not passed down and I couldn't spend any more time debugging it. So for now, it will stay like this.</p>\n<p>If you have any recommendations on how to clean this up, please leave some comments and I will edit my answer!</p>\n"}],"owner":{"user_id":2287089,"display_name":"ruben1691"},"view_count":203,"up_vote_count":3,"accepted_answer_id":75163716,"answer_count":3,"score":3,"creation_date":1673269422,"question_id":75057654,"body":"<p>I have written a small CLI using Java, <a href=\"https://argparse4j.github.io/usage.html\" rel=\"nofollow noreferrer\">Argparse4j</a>, and packaged it in docker using this Dockerfile:</p>\n<pre><code>FROM openjdk:18\n\nENV JAR_NAME &quot;my-jar-with-dependencies.jar&quot;\n\nENV PROJECT_HOME /opt/app\nRUN mkdir -p $PROJECT_HOME\n\nWORKDIR $PROJECT_HOME\nCOPY run.sh $PROJECT_HOME/run.sh\nRUN chmod +x $PROJECT_HOME/run.sh\n\nCOPY target/$JAR_NAME $PROJECT_HOME/cli.jar\n\nENTRYPOINT [&quot;./run.sh&quot;]\n</code></pre>\n<p>The last line of the Dockerfile then invokes a simple bash script:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>#!/bin/bash\n\njava $JAVA_OPTS -Djava.security.egd=file:/dev/./urandom -jar ./cli.jar &quot;$@&quot;\n</code></pre>\n<p>The CLI I wrote has three main actions: upload, download and apply. Therefore argparse4j <strong>expects</strong> one of these actions to be passed as the first parameter, i.e.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>java -jar cli.jar download #... whatever other argument\n</code></pre>\n<p>This works just fine when running the docker image locally, but completely fails when running in the CI pipeline:</p>\n<pre class=\"lang-yaml prettyprint-override\"><code>download:\n  stage: download\n  image: &lt;url&gt;/my-image:&lt;tag&gt;\n  variables:\n    URL: &lt;URL&gt;\n    API_KEY: &lt;API_KEY&gt;\n    CI_DEBUG_TRACE: &quot;true&quot;\n  script:\n    - download -f zip -u true test-download.zip\n</code></pre>\n<p>This is the error that is returned:</p>\n<pre><code>Executing &quot;step_script&quot; stage of the job script 00:01\nUsing docker image sha256:&lt;sha&gt; for &lt;url&gt;/my-image:&lt;tag&gt; with digest &lt;url&gt;/my-image:&lt;tag&gt;@sha256:&lt;sha&gt; ...\nSLF4J: Failed to load class &quot;org.slf4j.impl.StaticLoggerBinder&quot;.\nSLF4J: Defaulting to no-operation (NOP) logger implementation\nSLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nusage: tool [-h] ACTION ...\ntool: error:  invalid  choice:  'sh'  (choose  from  'upload',  'download',\n'apply')\n</code></pre>\n<p>I have tried following the suggestion in <a href=\"https://stackoverflow.com/questions/70401876/gitlab-runner-doesnt-run-entrypoint-scripts-in-dockerfile\">gitlab-runner doesn&#39;t run ENTRYPOINT scripts in Dockerfile</a> but I can't seem to get the CI part to work correctly.</p>\n<p>I would like to avoid using the <code>entrypoint</code> directive as it needs to be used on multiple files, so I rather fix the issue at the root.</p>\n<p>Does anyone have an idea of what is happening or how to fix it?</p>\n"},{"tags":["java","multithreading","concurrency","java-threads"],"comments":[{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":132450131,"body":"There’s no sense in creating new threads manually, only to call <code>executor.submit(…);</code> The purpose of <code>submit</code> is to execute the task according to the executor’s policy, e.g. to run the task in another thread of a thread pool. Wrapping the <code>submit</code> call in another thread is a waste of resources. Just execute the <code>submit</code> calls directy."},{"owner":{"user_id":19114669,"display_name":"Jetski111"},"edited":false,"comment_id":132451404,"body":"@Holger new threads will be coming in randomly from clients. This was to simulate that."},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":132451475,"body":"Don’t use the word “thread” when you mean “task” or “job”. You don’t not submit threads to an executor, you submit <code>Runnable</code>s which encapsulate a task. The <code>executor</code> decides how to map the tasks to threads. The caller thread of the <code>submit</code> call is entirely irrelevant."},{"owner":{"user_id":19114669,"display_name":"Jetski111"},"edited":false,"comment_id":132451562,"body":"@Holger Is a task not on a separate thread...? I&#39;m unsure how this is even relevant towards my question?"},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":132451767,"body":"It depends on the particular executor, how each job maps to a thread. You entire question is based on the assumption that <i>not</i> every task gets a separate thread but that there are <i>less</i> threads than tasks (otherwise, there would be no problem in blocking threads). This is indeed not the most important aspect of the question, but using the right terms may be helpful for future readers."},{"owner":{"user_id":19114669,"display_name":"Jetski111"},"edited":false,"comment_id":132451984,"body":"@Holger if it seems as though I am making that assumption. It is simply because I don&#39;t know how to explain the issue myself. Did my edit explain it better?"},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":132453269,"body":"Yes, that’s better. I hope, the answer helps you. Let me know if there’s still a problem."},{"owner":{"user_id":19114669,"display_name":"Jetski111"},"edited":false,"comment_id":132453613,"body":"@Holger it helped me and I have already implemented the ideas into my project. I thank you very much"}],"answers":[{"owner":{"user_id":2711488,"display_name":"Holger"},"up_vote_count":3,"is_accepted":true,"creation_date":1673264446,"answer_id":75056757,"body":"<p>To avoid blocking a thread, you have to ensure that the action doesn’t even run before the other. For example, you can use a <code>CompletableFuture</code> to chain an action, to be scheduled when the previous has been completed:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public static void main(String[] args) {\n    ExecutorService es = Executors.newFixedThreadPool(2);\n    for(int i = 0; i &lt; 5; i++) submit(&quot;one&quot;, task(&quot;one&quot;), es);\n    for(int i = 0; i &lt; 5; i++) submit(&quot;two&quot;, task(&quot;two&quot;), es);\n    LockSupport.parkNanos(TimeUnit.SECONDS.toNanos(26));\n    es.shutdown();\n}\n\nstatic Runnable task(String x) {\n    return () -&gt; {\n        System.out.println(x);\n        LockSupport.parkNanos(TimeUnit.SECONDS.toNanos(5));\n    };\n}\n\nstatic final ConcurrentHashMap&lt;String, CompletableFuture&lt;Void&gt;&gt; MAP\n    = new ConcurrentHashMap&lt;&gt;();\n\nstatic final void submit(String key, Runnable task, Executor e) {\n    CompletableFuture&lt;Void&gt; job = MAP.compute(key,\n        (k, previous) -&gt; previous != null?\n            previous.thenRunAsync(task, e): CompletableFuture.runAsync(task, e));\n    job.whenComplete((v,t) -&gt; MAP.remove(key, job));\n}\n</code></pre>\n<p>The <code>ConcurrentHashMap</code> allows us to handle the cases as atomic updates</p>\n<ul>\n<li><p>If no previous future exists for a key, just schedule the action, creating the future</p>\n</li>\n<li><p>If a previous future exists, chain the action, to be scheduled when the previous completed; the dependent action becomes the new future</p>\n</li>\n<li><p>If a job completed, the two-arg <code>remove(key, job)</code> will remove it if and only if it is still the current job</p>\n</li>\n</ul>\n<p>The example in the <code>main</code> method demonstrates how two independent actions can run with a thread pool of two threads, never blocking at thread.</p>\n"}],"owner":{"user_id":19114669,"display_name":"Jetski111"},"view_count":85,"up_vote_count":3,"accepted_answer_id":75056757,"answer_count":1,"score":3,"creation_date":1673258395,"question_id":75055627,"body":"<p>I have a task that will run many times with different values. I'd like to prevent it from executing 2 of the same tasks (Based on the string value) at the same time. Below is an example of the strings. These values will change, but for simplicity I have included these values below in the example. I submit these tasks via an <code>ExecutorService</code> The tasks run, but the 2nd hi blocks the other tasks from running. So 4/5 tasks run concurrently. Once the lock is released from the first hi the 5th tasks continues and the other tasks continue fine. Is there a way to prevent this type of blocking of the task so that the other 3 tasks can run before it so there is no queuing until there is actually 5 tasks running concurrently.</p>\n<p>Submission of the tasks:</p>\n<pre><code>executor.submit(new Task(&quot;hi&quot;));\nexecutor.submit(new Task(&quot;h&quot;));\nexecutor.submit(new Task(&quot;u&quot;));\nexecutor.submit(new Task(&quot;y&quot;));\nexecutor.submit(new Task(&quot;hi&quot;));\nexecutor.submit(new Task(&quot;p&quot;));\nexecutor.submit(new Task(&quot;o&quot;));\nexecutor.submit(new Task(&quot;bb&quot;));\n</code></pre>\n<p>The Task is simple. It just prints out the string:</p>\n<pre><code>Lock l = getLock(x);\ntry {\nl.lock();\n\nSystem.out.println(x);\n\ntry {\nThread.sleep(5000);\n} catch (InterruptedException ex) {\nLogger.getLogger(Task.class.getName()).log(Level.SEVERE, null, ex);\n}\n\n} finally {\nl.unlock();\n\n}\n</code></pre>\n<p>I've updated the post to allow for things to be more clearly understood...</p>\n"},{"tags":["java","sorting","generics","comparable"],"answers":[{"owner":{"user_id":1553851,"display_name":"shmosel"},"up_vote_count":3,"is_accepted":true,"creation_date":1672560176,"answer_id":74973626,"body":"<p><code>Comparable.compareTo()</code> expects a <code>T</code>, not just a <code>Comparable&lt;T&gt;</code>. So the second method signature has to be</p>\n<pre><code>private static &lt;T extends Comparable&lt;T&gt;&gt; boolean less(T v, T w) {\n</code></pre>\n<p>And in order to call it, the first method also needs an array of <code>T</code>:</p>\n<pre><code>public static &lt;T extends Comparable&lt;T&gt;&gt; void sort (T[] array) {\n</code></pre>\n"}],"owner":{"user_id":17496342,"display_name":"Aman"},"view_count":40,"up_vote_count":3,"accepted_answer_id":74973626,"answer_count":1,"score":3,"creation_date":1672559033,"question_id":74973566,"body":"<p>While learning from Algorithms (4th edition) (by Robert Sedgewick; Kevin Wayne), I am trying to recreate their codes. They have raw uses of parametrized constructors (generics) which I assume might be because 2011 Java code is different from today's Java code. Here is an example:</p>\n<pre><code>private static boolean less(Comparable v, Comparable w) {\n   return (v.compareTo(w) &lt; 0);\n}\n</code></pre>\n<p>This works in Java 11/18. But the problem is my IDE highlights this as &quot;raw use of parameterized constructor&quot;. According to what I read, I should not be doing this.</p>\n<p>But there seems to be no solution where I can both: keep the method static and use generic types for Comparable.</p>\n<p>Making the class generic doesn't really help, as the methods then cannot use the generic type of the class</p>\n<p><a href=\"https://i.stack.imgur.com/DJMc0.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/DJMc0.png\" alt=\"enter image description here\" /></a>\nError message: 'SelectionSort.this' cannot be referenced from a static context</p>\n<p>But adding the generics to individual methods also doesn't work as other methods that I call dont know that their type &lt;T&gt; and the calling method's &lt;T&gt; are the same.\nHere is my attempt:</p>\n<pre><code>public class SelectionSort {\n    public static &lt;T&gt; void sort (Comparable&lt;T&gt;[] array) {\n        for (int i = 0; i &lt; array.length; i++) {\n            int min = i;\n            for (int j = i+1; j &lt; array.length; j++) {\n                if (less(array[j],array[min]))\n                    min = j;\n            }\n            exch(array, i, min);\n        }\n    }\n\n    private static &lt;T extends Comparable&lt;T&gt;&gt; boolean less(Comparable&lt;T&gt; v, Comparable&lt;T&gt; w) {\n        return (v.compareTo(w) &lt; 0);\n    }\n\n    private static &lt;T extends Comparable&lt;T&gt;&gt; void exch(Comparable&lt;T&gt;[] a, int i, int j) {\n        Comparable&lt;T&gt; swap = a[i];\n        a[i] = a[j];\n        a[j] = swap;\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/tlVAU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/tlVAU.png\" alt=\"enter image description here\" /></a>\nError message: no instance of type variable T exist so that T conforms to Comparable </p>\n<p>As you can see Java doesn't know both T's are the same. I feel there is a very simple solution here which I just am not getting.</p>\n"},{"tags":["java","log4j2"],"comments":[{"owner":{"user_id":1745544,"display_name":"OldProgrammer"},"edited":false,"comment_id":134460488,"body":"Look at using environment variables to change the configuration for test vs prod - <a href=\"https://logging.apache.org/log4j/2.x/manual/lookups.html\" rel=\"nofollow noreferrer\">logging.apache.org/log4j/2.x/manual/lookups.html</a>"},{"owner":{"user_id":1912944,"display_name":"David"},"edited":false,"comment_id":134460534,"body":"I&#39;m not really in the position to demand that people using a test library I&#39;ve written change how they run their tests."},{"owner":{"user_id":2308683,"display_name":"OneCricketeer"},"edited":false,"comment_id":134460953,"body":"Can you clarify why you&#39;re not using Slf4j to provide test appenders?"},{"owner":{"user_id":1912944,"display_name":"David"},"edited":false,"comment_id":134461591,"body":"I wasn&#39;t aware that was a thing (can you provide a link to docs?). I&#39;m surprised I can&#39;t do it without depending on a whole other logging library though. Bear in mind the API I&#39;m writing won&#39;t be limited for use by Log4J/SLF4J, so they can&#39;t be required in the public facing API."}],"answers":[{"owner":{"user_id":1912944,"display_name":"David"},"up_vote_count":2,"is_accepted":false,"creation_date":1684099883,"answer_id":76249772,"body":"<p>I discovered that using the <code>Configurator</code> (internal API) was good enough to change a logger's level without it being reverted when I add the appender.</p>\n<p>So in my tests, instead of using:</p>\n<ul>\n<li><code>logger.setLevel(Level.FOO)</code></li>\n</ul>\n<p>I now use:</p>\n<ul>\n<li><code>Configurator.setLevel(logger, Level.FOO)</code></li>\n</ul>\n<p>Then to add/remove appenders for the duration of the test, I can just use my original idea via <code>logger.addAppender()</code> / <code>removeAppender()</code> (using the &quot;core&quot; API).</p>\n<p>Basically what I've discovered from this is the Log4J has very strong opinions about programmatic configuration (which is fine, they mostly match mine), but doesn't do a good job of explaining how some logger state is transitory and will be overridden as a side-effect of any operations on the configuration.</p>\n<p>So if you are needing to do this sort of programmatic manipulation, you'll end up chasing your tail. This isn't a 100% what I wanted to achieve, but it does help me move forward.</p>\n<p>I'm also having to assume they'll never actually remove the configurator (Hyrum's Law probably means it's too well used to be removable at this point).</p>\n"},{"owner":{"user_id":11748454,"display_name":"Piotr P. Karwasz"},"up_vote_count":0,"is_accepted":false,"creation_date":1684132229,"answer_id":76251400,"body":"<p>There are a couple of problems in your code:</p>\n<ol>\n<li><p>As stated <a href=\"https://logging.apache.org/log4j/2.x/log4j-api/apidocs/org/apache/logging/log4j/LogManager.html#getContext--\" rel=\"nofollow noreferrer\">in the javadoc</a>, <code>LogManager#getContext()</code> usually does not give you the same logger context as <code>LogManager#getLogger(...)</code>:</p>\n<blockquote>\n<p><strong>WARNING</strong> - The LoggerContext returned by this method may not be the LoggerContext used to create a Logger for the calling class.</p>\n</blockquote>\n<p>Use <code>LogManager.getContext(false)</code> or <code>Logger.getContext()</code> instead.</p>\n</li>\n<li><p>Once you are done with configuration changes you need to call <a href=\"https://logging.apache.org/log4j/2.x/log4j-core/apidocs/org/apache/logging/log4j/core/LoggerContext.html#updateLoggers--\" rel=\"nofollow noreferrer\"><code>LoggerContext#updateLoggers()</code></a> to commit your configuration changes.</p>\n</li>\n</ol>\n<p>As you remarked, programmatic configuration is <strong>not</strong> recommended. Semantically a minor version change can break it. However, on the current version (2.20.0 as of writing) you can use:</p>\n<pre class=\"lang-java prettyprint-override\"><code>final org.apache.logging.log4j.spi.LoggerContext c = LogManager.getContext(false);\nif (c instanceof LoggerContext) {\n    final LoggerContext context = (LoggerContext) c;\n    final LoggerConfig oldConfig = context.getConfiguration().getLoggerConfig(loggerName);\n    final LoggerConfig newConfig;\n    // Add a new logger config or use the existent one\n    if (loggerName.equals(oldConfig.getName())) {\n        newConfig = oldConfig;\n    } else {\n        newConfig = new LoggerConfig(loggerName, level, true);\n    }\n    // Actually adds an AppenderRef\n    newConfig.addAppender(appender, null, null);\n    // Sets the level of the LoggerConfig\n    newConfig.setLevel(level);\n    context.getConfiguration().addLogger(loggerName, newConfig);\n    context.updateLoggers();\n}\n</code></pre>\n<p><strong>Remark:</strong> Your setup will probably not work for parallel tests. See <a href=\"https://lists.apache.org/thread/3n9xqc132pm49w3m67zm6wnjfw6yphkq\" rel=\"nofollow noreferrer\">this mailing list thread</a> for some alternatives.</p>\n"}],"owner":{"user_id":1912944,"display_name":"David"},"view_count":67,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1684073858,"question_id":76247937,"body":"<p>I'm writing a logger testing Framework in which I intend to support multiple logging backends and test harnesses. In each test harness there's a setup/teardown cycle that gives me a chance to inject some form of &quot;log capturing&quot; instance into the logging system.</p>\n<p>In JDK logging it's easy to install a new handler to a specific logger to capture everything it sees, but in Log4J2 I've struggled to get something with the same behaviour.</p>\n<p>I've read all the docs in <a href=\"https://logging.apache.org/log4j/log4j-2.1/manual/architecture.html\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/log4j-2.1/manual/architecture.html</a> and I fully understand why programmatic configuration of logging is a bad idea, but for tests it's really the only reasonable approach.</p>\n<p>In Log4J I'm guess that adding an Appender is the best way to go, but getting an Appender added (and then removed) to the right place in the configuration hierarchy is difficult.</p>\n<p>In particular, I need to be able to add an Appender for a package (i.e. for which no logger exists in the code-under-test), so I'd like a way to say:</p>\n<p>&quot;Get me the logger config for this name, creating it if it doesn't exist&quot;</p>\n<p>Instead, the various config getters I've found will just search up the hierarchy and find the parent config (typically root in my case).</p>\n<p>My requirements are:</p>\n<ol>\n<li>Add a capturing appender at a specific point in the config namespace.</li>\n<li>Have the appender capture logs for all loggers at or below that point in the config namespace.</li>\n<li>Have a robust way to remove the appender when I'm done.</li>\n<li>Don't affect actual log levels or any other part of the existing logger configuration.</li>\n</ol>\n<p>I've managed to get an Appender installed for an existing logger, but any &quot;child&quot; loggers seem to not use this.</p>\n<pre class=\"lang-java prettyprint-override\"><code>    // The &quot;loggerName&quot; can be a package name and no logger need exist for it before this point.\n    Logger logger = (Logger) LogManager.getLogger(loggerName);\n    Configuration configuration = ((LoggerContext) LogManager.getContext()).getConfiguration();\n    configuration.addLoggerAppender(logger, appender);\n    LoggerConfig config = configuration.getLoggerConfig(loggerName);\n    // A callback to remove the appendr after the test.\n    return () -&gt; {\n      try {\n        // I don't understand why there's no way to remove the append instance via its reference,\n        // so I hacked it to use a random name string since I don't want to get into issues\n        // with multiple tests running in parallel. I'd like a solution that avoids this.\n        config.removeAppender(probablyUniqueAppenderName);\n      } catch (RuntimeException e) {\n        // Ignored on close().\n      }\n    };\n\n</code></pre>\n<p>One unfortunate thing I've noticed is that in various places during other attempts I've seen the existing log level of a logger be modified by the seemingly simple act of adding an Appender. This is clearly unacceptable to what I'm trying to do and I've no idea why that's desireable behaviour (when a new config is created it inherits the parent config's level rather than using any log level already set on the logger).</p>\n<p>I also don't believe what I'm asking is obviously identical to any of the previous (often years old) questions I've seen here about Log4J, so please don't just assume I should use one of those (the ones I've tried didn't work).</p>\n<p>Edit: The other code snippet I tried first (which also doesn't work) is:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    Logger logger = (Logger) LogManager.getLogger(loggerName);\n    // This *changes* the logger's level because there's no existing config.\n    // For example, existing loggers set to TRACE level become set to ERROR after\n    // this call because the act of creating a new config for this logger inherits\n    // from the parent (root) instead of using the level set on the instance.\n    logger.addAppender(appender);\n    return () -&gt; {\n      try {\n        logger.removeAppender(appender);\n      } catch (RuntimeException e) {\n        // Ignored on close().\n      }\n    };\n</code></pre>\n<p>Edit 2: I've also looked at resetting the configuration by merging the existing configuration with a custom one I created programmatically, but several things didn't work when trying that (in particular, the <code>CompositeConfiguration</code> class won't let me merge instances of the <code>Configuration</code> interface, only sublcasses of the <code>AbstractConfiguration</code> class (which isn't what <code>LogManager</code> returns).</p>\n<p>Edit 3: I've now found <a href=\"https://logging.apache.org/log4j/2.x/manual/customconfig.html#programmatically-modifying-the-current-configuration-after-initi\" rel=\"nofollow noreferrer\">https://logging.apache.org/log4j/2.x/manual/customconfig.html#programmatically-modifying-the-current-configuration-after-initi</a> which looks promising (if a little complex), but the docs don't explain:</p>\n<ol>\n<li>what an <code>AppenderRef</code> does, or why it's needed</li>\n<li>how to undo any modifications to re-installl the original configuration after testing is complete (though I can probably guess that).</li>\n</ol>\n"},{"tags":["java","spring-boot","hibernate","graalvm","graalvm-native-image"],"comments":[{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":134227558,"body":"And your question is? This seems more of a rant against graalvm then an actual question."},{"owner":{"user_id":619830,"display_name":"ch4mp"},"edited":false,"comment_id":134233297,"body":"The title looks like a pretty clear and well formed question @m-deinum"},{"owner":{"user_id":3764804,"display_name":"BullyWiiPlaza"},"edited":false,"comment_id":134234593,"body":"@xerx593: I used a separate <code>JDK19</code> installation, not the one by <code>GraalVM</code>. It seems like it doesn&#39;t cause any problems"},{"owner":{"user_id":619830,"display_name":"ch4mp"},"edited":false,"comment_id":134235784,"body":"It does not cause any problem because, with <code>mvn -Pnative spring-boot:build-image</code>, the native image is built in a docker container which pulls a GraalVM image"}],"answers":[{"owner":{"user_id":619830,"display_name":"ch4mp"},"up_vote_count":2,"is_accepted":true,"creation_date":1682534157,"answer_id":76114026,"body":"<p>I faced the same regression due to missing native hints and found 3 easy workarounds in <a href=\"https://github.com/alvessteve/fizzbuzz-rest-api/issues/26\" rel=\"nofollow noreferrer\">a thread</a> linked at the bottom of the one you point to. Here are the options from the less invasive (prefered) to the most:</p>\n<ul>\n<li>downgrade the metadata repository from <code>0.2.7</code> to <code>0.2.6</code> in <code>native-maven-plugin</code> version <code>0.9.21</code> (which is the default for Boot <code>3.0.6</code>):</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;metadataRepository&gt;\n            &lt;enabled&gt;true&lt;/enabled&gt;\n            &lt;version&gt;0.2.6&lt;/version&gt;\n        &lt;/metadataRepository&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<ul>\n<li>use an earlier metadata repository for <code>hibernate-core</code> (<code>6.1.1.Final</code> instead of <code>6.1.7.Final</code> which is the default for Boot <code>3.0.6</code>):</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n    &lt;configuration&gt;\n        &lt;metadataRepository&gt;\n            &lt;dependencies&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.hibernate.orm&lt;/groupId&gt;\n                    &lt;artifactId&gt;hibernate-core&lt;/artifactId&gt;\n                    &lt;metadataVersion&gt;6.1.1.Final&lt;/metadataVersion&gt;\n                &lt;/dependency&gt;\n            &lt;/dependencies&gt;\n        &lt;/metadataRepository&gt;\n    &lt;/configuration&gt;\n&lt;/plugin&gt;\n</code></pre>\n<ul>\n<li>downgrade <code>native-maven-plugin</code> from <code>0.9.21</code> to <code>0.9.20</code>:</li>\n</ul>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.graalvm.buildtools&lt;/groupId&gt;\n    &lt;artifactId&gt;native-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;0.9.20&lt;/version&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>The issue is tracked <a href=\"https://github.com/spring-projects/spring-boot/issues/35103\" rel=\"nofollow noreferrer\">here</a> for Spring Boot and <a href=\"https://github.com/graalvm/native-build-tools/issues/430\" rel=\"nofollow noreferrer\">there</a> for <code>native-build-tools</code></p>\n<h2>P.S.</h2>\n<p>For those working with Gradle rather than maven, there is an equivalent of the first workaround in the <a href=\"https://github.com/spring-projects/spring-boot/issues/35103#issuecomment-1524957350\" rel=\"nofollow noreferrer\">Spring Boot thread</a></p>\n<pre><code>graalvmNative {\n    metadataRepository {\n        version = &quot;0.2.6&quot;\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":3764804,"display_name":"BullyWiiPlaza"},"view_count":246,"up_vote_count":3,"accepted_answer_id":76114026,"answer_count":1,"score":3,"creation_date":1682513130,"question_id":76110898,"body":"<p>I'm on <code>Windows</code>, assuming I'm downloading a default <code>demo</code> project from <a href=\"https://start.spring.io\" rel=\"nofollow noreferrer\"><code>Spring Initializr</code></a> as follows:</p>\n<p><a href=\"https://i.stack.imgur.com/1E26c.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1E26c.png\" alt=\"\" /></a></p>\n<p>Now for the project to run I'll also add default <code>H2</code> support to the <code>application.properties</code>:</p>\n<pre><code>spring.datasource.url=jdbc:h2:mem:testdb\nspring.datasource.driverClassName=org.h2.Driver\nspring.datasource.username=sa\nspring.datasource.password=password\nspring.jpa.database-platform=org.hibernate.dialect.H2Dialect\n</code></pre>\n<p>Next, I'll add a simple <code>HelloWorldController.java</code> controller as follows:</p>\n<pre><code>package com.example.demo;\n\nimport org.springframework.web.bind.annotation.GetMapping;\nimport org.springframework.web.bind.annotation.RestController;\n\n@RestController\npublic class HelloWorldController\n{\n    @GetMapping(&quot;/&quot;)\n    public String index()\n    {\n        return &quot;Greetings from Spring Boot!&quot;;\n    }\n}\n</code></pre>\n<p>I can run the REST API successfully from <code>IntelliJ IDEA</code> or compile an executable <code>JAR</code> and run that, going to <a href=\"http://localhost:8080\" rel=\"nofollow noreferrer\"><code>http://localhost:8080</code></a> in the browser works as expected.</p>\n<p>My <code>native-image</code> version is:</p>\n<pre><code>&gt;where gu\nC:\\graalvm-ee-java19-windows-amd64-22.3.1\\bin\\gu.cmd\n</code></pre>\n<p>My <code>Java</code> version is:</p>\n<pre><code>&gt;java -version\njava version &quot;19.0.1&quot; 2022-10-18\nJava(TM) SE Runtime Environment (build 19.0.1+10-21)\nJava HotSpot(TM) 64-Bit Server VM (build 19.0.1+10-21, mixed mode, sharing)\n</code></pre>\n<p>According to the <code>HELP.md</code> I can compile a native image by running <code>mvnw native:compile -Pnative</code> (via an administrator <code>x64 Native Tools Command Prompt for VS 2022</code>) so I did. The first error I ran into was related to spaces in the file path (<a href=\"https://github.com/micronaut-projects/micronaut-gradle-plugin/issues/401#issuecomment-1083249485\" rel=\"nofollow noreferrer\"><code>Exception in thread &quot;main&quot; java.nio.file.InvalidPathException: Illegal char &lt;&gt; at index 3</code></a>), I fixed it by moving the whole project into a file path without spaces. (However, that shouldn't even be a problem these days.)</p>\n<p>Now, after waiting for about 8 minutes, the native compilation was successful. Upon running the <code>demo.exe</code>, it failed to start:</p>\n<pre><code>D:\\Moved\\demo&gt;target\\demo\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.6)\n\n2023-04-26T00:04:22.787+02:00  INFO 28544 --- [           main] com.example.demo.DemoApplication         : Starting AOT-processed DemoApplication using Java 19.0.2 with PID 28544 (D:\\Moved\\demo\\target\\demo.exe started by BullyWiiPlaza in D:\\Moved\\demo)\n2023-04-26T00:04:22.787+02:00  INFO 28544 --- [           main] com.example.demo.DemoApplication         : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-04-26T00:04:23.017+02:00  INFO 28544 --- [           main] o.s.b.w.embedded.tomcat.TomcatWebServer  : Tomcat initialized with port(s): 8080 (http)\n2023-04-26T00:04:23.020+02:00  INFO 28544 --- [           main] o.apache.catalina.core.StandardService   : Starting service [Tomcat]\n2023-04-26T00:04:23.020+02:00  INFO 28544 --- [           main] o.apache.catalina.core.StandardEngine    : Starting Servlet engine: [Apache Tomcat/10.1.8]\n2023-04-26T00:04:23.052+02:00  INFO 28544 --- [           main] o.a.c.c.C.[Tomcat].[localhost].[/]       : Initializing Spring embedded WebApplicationContext\n2023-04-26T00:04:23.053+02:00  INFO 28544 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 265 ms\n2023-04-26T00:04:23.107+02:00  INFO 28544 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Starting...\n2023-04-26T00:04:23.113+02:00  INFO 28544 --- [           main] com.zaxxer.hikari.pool.HikariPool        : HikariPool-1 - Added connection conn0: url=jdbc:h2:mem:testdb user=SA\n2023-04-26T00:04:23.114+02:00  INFO 28544 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Start completed.\n2023-04-26T00:04:23.116+02:00  WARN 28544 --- [           main] w.s.c.ServletWebServerApplicationContext : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory': Instantiation of supplied bean failed\n2023-04-26T00:04:23.116+02:00  INFO 28544 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown initiated...\n2023-04-26T00:04:23.121+02:00  INFO 28544 --- [           main] com.zaxxer.hikari.HikariDataSource       : HikariPool-1 - Shutdown completed.\n2023-04-26T00:04:23.123+02:00  INFO 28544 --- [           main] o.apache.catalina.core.StandardService   : Stopping service [Tomcat]\n2023-04-26T00:04:23.127+02:00 ERROR 28544 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'entityManagerFactory': Instantiation of supplied bean failed\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1220) ~[demo.exe:6.0.8]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1158) ~[demo.exe:6.0.8]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:560) ~[demo.exe:6.0.8]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:520) ~[demo.exe:6.0.8]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326) ~[demo.exe:6.0.8]\n        at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234) ~[demo.exe:6.0.8]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324) ~[demo.exe:6.0.8]\n        at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200) ~[demo.exe:6.0.8]\n        at org.springframework.context.support.AbstractApplicationContext.getBean(AbstractApplicationContext.java:1132) ~[demo.exe:6.0.8]\n        at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:907) ~[demo.exe:6.0.8]\n        at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584) ~[demo.exe:6.0.8]\n        at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146) ~[demo.exe:3.0.6]\n        at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732) ~[demo.exe:3.0.6]\n        at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434) ~[demo.exe:3.0.6]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:310) ~[demo.exe:3.0.6]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1304) ~[demo.exe:3.0.6]\n        at org.springframework.boot.SpringApplication.run(SpringApplication.java:1293) ~[demo.exe:3.0.6]\n        at com.example.demo.DemoApplication.main(DemoApplication.java:10) ~[demo.exe:na]\nCaused by: java.lang.IllegalStateException: No available JtaPlatform candidates amongst [org.hibernate.engine.transaction.jta.platform.internal.NoJtaPlatform, org.hibernate.service.jta.platform.internal.NoJtaPlatform]\n        at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.getNoJtaPlatformManager(HibernateJpaConfiguration.java:213) ~[demo.exe:na]\n        at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.configureJtaPlatform(HibernateJpaConfiguration.java:150) ~[demo.exe:na]\n        at org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaConfiguration.customizeVendorProperties(HibernateJpaConfiguration.java:139) ~[demo.exe:na]\n        at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration.entityManagerFactory(JpaBaseConfiguration.java:132) ~[demo.exe:na]\n        at org.springframework.boot.autoconfigure.orm.jpa.JpaBaseConfiguration__BeanDefinitions.lambda$getEntityManagerFactoryInstanceSupplier$3(JpaBaseConfiguration__BeanDefinitions.java:84) ~[na:na]\n        at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:68) ~[demo.exe:6.0.8]\n        at org.springframework.util.function.ThrowingBiFunction.apply(ThrowingBiFunction.java:54) ~[demo.exe:6.0.8]\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.lambda$get$2(BeanInstanceSupplier.java:204) ~[na:na]\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[demo.exe:6.0.8]\n        at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[demo.exe:6.0.8]\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.invokeBeanSupplier(BeanInstanceSupplier.java:216) ~[na:na]\n        at org.springframework.beans.factory.aot.BeanInstanceSupplier.get(BeanInstanceSupplier.java:204) ~[na:na]\n        at org.springframework.beans.factory.support.DefaultListableBeanFactory.obtainInstanceFromSupplier(DefaultListableBeanFactory.java:947) ~[demo.exe:6.0.8]\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.obtainFromSupplier(AbstractAutowireCapableBeanFactory.java:1214) ~[demo.exe:6.0.8]\n        ... 17 common frames omitted\n</code></pre>\n<p>So, it isn't working, why?</p>\n<p>After researching more, I found <a href=\"https://github.com/spring-projects/spring-boot/issues/32659\" rel=\"nofollow noreferrer\">this</a> issue and related ones. Also, trying <code>Spring Boot</code> version <code>3.0.5</code> is working fine while <code>3.0.6</code> fails.</p>\n"},{"tags":["java","spring-boot","spring-security","postman","get-request"],"comments":[{"owner":{"user_id":592355,"display_name":"xerx593"},"edited":false,"comment_id":134167686,"body":"the key difference is: (the working) one uses &quot;lists&quot;, the other: <code>String[]</code>..."},{"owner":{"user_id":592355,"display_name":"xerx593"},"edited":false,"comment_id":134167756,"body":"(noob tips: (still) <a href=\"https://stackoverflow.com/q/978061/592355\">don&#39;t use body in get requests!</a>, <a href=\"https://stackoverflow.com/q/7996919/592355\">lower case urls/path are &quot;more convenient&quot;</a>, static access/init is strange/smelly in &quot;spring beans&quot;, (interface vs. impl variable ... <code>Map</code> vs <code>HashMap</code>): use &quot;as broad as possible&quot; (interface), &quot;as narrow (impl) as you need&quot;! ...;)"}],"answers":[{"owner":{"user_id":17170444,"display_name":"Artur Radiuk"},"up_vote_count":2,"is_accepted":true,"creation_date":1682098176,"answer_id":76075481,"body":"<p>The problem is that @RequestBody annotation to work properly requires default (no args) constructor. That's why to fix this error you just need to have no args constructor (implicit or explicit) in CheckModel class.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class CheckModel {\n    private String[] checking;\n\n    public CheckModel(){} // implicit no args constructor\n\n    public String[] getChecking() {\n        return checking;\n    }\n\n    public void setChecking(String[] checking) {\n        this.checking = checking;\n    }\n}\n</code></pre>\n<p>You can read about this problem more, <a href=\"https://stackoverflow.com/questions/32975715/why-does-requestbody-require-no-arg-constructor\">here</a></p>\n"}],"owner":{"user_id":20879521,"display_name":"Al3x21"},"view_count":49,"up_vote_count":3,"accepted_answer_id":76075481,"answer_count":1,"score":3,"creation_date":1682096104,"question_id":76075259,"body":"<p>I am complete noob in Spring Boot, but I tried to create a Back-end server. I coded all the work that must be done in the background and it is working perfectly. This is the &quot;RequestsController&quot; class:</p>\n<pre><code>@AllArgsConstructor\n@RestController\n@RequestMapping(path = {&quot;/api&quot;})\npublic class RequestsController {\n\n    private final HashMap&lt;String, HashMap&lt;String,String&gt;&gt; DatasetMaps = ProcessingApplication.DatasetMaps;\n\n    @GetMapping(path = {&quot;Check&quot;})\n    public String Check(@RequestBody CheckModel checkModel){\n        System.out.println(&quot;aici&quot;);\n        GetCheck getCheck = new GetCheck(this.DatasetMaps);\n        return getCheck.GetCheckDatasetMethod(checkModel.checking);\n    }\n\n    @GetMapping(path = {&quot;Search&quot;})\n    public HashMap&lt;String,HashMap&lt;String,HashMap&lt;String,HashMap&lt;Double,Double&gt;&gt;&gt;&gt; Search(@RequestBody SearchModel search){\n        MainSearch mainSearch = new MainSearch(search.userinfo,search.words);\n        return mainSearch.SearchInVideous();\n    }\n}\n</code></pre>\n<p>And this is the &quot;SearchModel&quot; class:</p>\n<pre><code>public class SearchModel {\n\n    protected final List&lt;String&gt; userinfo;\n    protected final ArrayList&lt;String&gt; words;\n    \n    public SearchModel(List&lt;String&gt; userinfo,\n                       ArrayList&lt;String&gt; words){\n        this.userinfo = userinfo;\n        this.words = words;\n    }\n}\n</code></pre>\n<p>This is the security class:</p>\n<pre><code>@Configuration\n@AllArgsConstructor\n@EnableWebSecurity\npublic class ServerSecurity{\n\n    @Bean\n    public SecurityFilterChain defaultSecurityFilterChain(HttpSecurity httpSecurity) throws Exception{\n        httpSecurity\n                .csrf()\n                .disable()\n                .authorizeHttpRequests()\n                .requestMatchers(&quot;/api/**&quot;,&quot;/api/Check&quot;)\n                .permitAll()\n                .anyRequest()\n                .authenticated()\n                .and()\n                .formLogin();\n        httpSecurity.httpBasic();\n\n        return httpSecurity.build();\n    }\n\n    @Bean\n    public AuthenticationManager authenticationManager(AuthenticationConfiguration authenticationConfiguration) throws Exception {\n        return authenticationConfiguration.getAuthenticationManager();\n    }\n\n}\n</code></pre>\n<p>Moreover, I did the first test and is working as you can see in the following image:\n<a href=\"https://i.stack.imgur.com/o2o4C.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/o2o4C.png\" alt=\"enter image description here\" /></a></p>\n<p>In this image I used &quot;Postman&quot; in order to send a &quot;Get&quot; requests and using the second &quot;GetMapping&quot; from the &quot;RequestsController&quot; class as you can see. This requests is working perfectly.</p>\n<p>My problem is when I try to use the First &quot;GetMapping&quot; from &quot;RequestsController&quot;, as you can see in the following image:\n<a href=\"https://i.stack.imgur.com/cmMNo.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/cmMNo.png\" alt=\"enter image description here\" /></a></p>\n<p>This is &quot;CheckModel&quot; class:</p>\n<pre><code>public class CheckModel {\n    protected final String[] checking;\n\n    public CheckModel(String[] checking){\n        this.checking = checking;\n    }\n}\n</code></pre>\n<p>Unfortunately, the error is too log, but I will put just a part of it and if you want I can put the entire error. This is the error:</p>\n<pre><code>com.fasterxml.jackson.databind.exc.InvalidDefinitionException: Cannot construct instance of `com.FinalYearProjectServer.GetAndPostHandler.CheckModel` (no Creators, like default constructor, exist): cannot deserialize from Object value (no delegate- or property-based Creator)\n at [Source: (org.springframework.util.StreamUtils$NonClosingInputStream); line: 2, column: 5]\n    at com.fasterxml.jackson.databind.exc.InvalidDefinitionException.from(InvalidDefinitionException.java:67) ~[jackson-databind-2.14.2.jar:2.14.2]\n    at com.fasterxml.jackson.databind.DeserializationContext.reportBadDefinition(DeserializationContext.java:1909) ~[jackson-databind-2.14.2.jar:2.14.2]\n    at com.fasterxml.jackson.databind.DatabindContext.reportBadDefinition(DatabindContext.java:408) ~[jackson-databind-2.14.2.jar:2.14.2]\n    at com.fasterxml.jackson.databind.DeserializationContext.handleMissingInstantiator(DeserializationContext.java:1354) ~[jackson-databind-2.14.2.jar:2.14.2]\n    at com.fasterxml.jackson.databind.deser.BeanDeserializerBase.deserializeFromObjectUsingNonDefault(BeanDeserializerBase.java:1420) ~[jackson-databind-2.14.2.jar:2.14.2]\n</code></pre>\n<p>I really do not know what to do in this situation.</p>\n"},{"tags":["java","spring","spring-security","junit","spring-security-test"],"comments":[{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":134111651,"body":"Please add your full test to the question."},{"owner":{"user_id":3426309,"display_name":"Andrey B. Panfilov"},"edited":false,"comment_id":134115708,"body":"<code>spring</code> tells you: hey! I have no idea to create instance of <code>CsrfToken</code> using data coming with http request (read: <code>spring</code> does not support mapping <code>CsrfToken</code> to controller method arguments, that is actually reasonable since <code>CsrfToken</code> does not contain useful information). So, how does your Q relate to unit testing?"},{"owner":{"user_id":2230325,"display_name":"rMonteiro"},"edited":false,"comment_id":134117236,"body":"@M.Deinum I added more code."},{"owner":{"user_id":2230325,"display_name":"rMonteiro"},"edited":false,"comment_id":134117237,"body":"@AndreyB.Panfilov because this work  in the real application, the problem is only in JUnit tests"},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":134120581,"body":"So you add a security feeature, but disable security and thus the integration for CSRF token injection into the controller. ou are also using Spring Boot, so ditch the <code>@EnableWebMvc</code> as that will disable large parts of the auto configuration."},{"owner":{"user_id":5454842,"display_name":"Marcus Hert da Coregio"},"edited":false,"comment_id":134133888,"body":"Why are you requiring a token in a <code>GET</code> method? Usually, those methods should be safe and thus not require such protection. Why are you injecting the <code>CsrfToken</code> instead of letting Spring Security check it?"}],"answers":[{"owner":{"user_id":592355,"display_name":"xerx593"},"up_vote_count":2,"is_accepted":true,"creation_date":1681814925,"answer_id":76043661,"body":"<p>Quite sure, that spring-security does <em>not</em> &quot;csrf protect&quot; GET endpoints &quot;by default&quot; (extend the later mentioned test with csrf &quot;expectations&quot; they won't hold/invalid csrf won't have effect)</p>\n<ul>\n<li><a href=\"https://security.stackexchange.com/q/90023/6131\">GET and POST request vulnerable to CSRF attack?</a></li>\n<li><a href=\"https://security.stackexchange.com/q/115794/6131\">Should I use CSRF protection for GET requests?</a></li>\n<li><em>Best, ensure: GET(+ HEAD) requests DO NOT change state!</em></li>\n<li>Documented/customizable via <a href=\"https://docs.spring.io/spring-security/site/docs/current/api/org/springframework/security/config/annotation/web/configurers/CsrfConfigurer.html#requireCsrfProtectionMatcher(org.springframework.security.web.util.matcher.RequestMatcher)\" rel=\"nofollow noreferrer\"><code>CsrfConfigurer#requireCsrfProtectionMatcher</code></a>\n<blockquote>\n<p>... The default is to ignore GET, HEAD, TRACE, OPTIONS ...</p>\n</blockquote>\n</li>\n</ul>\n<p>Nevertheless, some &quot;magic&quot; makes it possible to &quot;populate&quot; <code>CsrfToken</code> param/attribute (also in spring-web(-security!) GET requests) ...</p>\n<h3>Sorry, can only partially reproduce!</h3>\n<ul>\n<li><p>starter used: <a href=\"https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=2.7.11&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.stackoverflow&amp;artifactId=soq76011945&amp;name=soq76011945&amp;description=Reprod%20code%20for%20https%3A%2F%2Fstackoverflow.com%2Fq%2F76011945%2F592355&amp;packageName=com.stackoverflow.soq76011945&amp;dependencies=web,security,devtools\" rel=\"nofollow noreferrer\">boot:2+web+security(+devtools)</a></p>\n<p>(For &quot;best version match&quot; use:</p>\n<ul>\n<li><a href=\"https://central.sonatype.com/artifact/org.springframework.boot/spring-boot-parent/2.6.14\" rel=\"nofollow noreferrer\">parent:2.6.14</a></li>\n<li>and <code>&lt;spring-security.version&gt;5.6.10&lt;/spring-security.version&gt;</code> (property)</li>\n</ul>\n<p>)</p>\n</li>\n<li><p>Sa/imple controller (in child package of main class/root package):</p>\n<pre class=\"lang-java prettyprint-override\"><code>@RestController\npublic class MyController {\n   @GetMapping(value = &quot;/data&quot;)\n   public ResponseEntity&lt;String&gt; data(\n     @RequestParam(required = false) Double param\n   ) {\n     return ResponseEntity.ok(&quot;Hello&quot;);\n   }\n}\n</code></pre>\n</li>\n<li><p>protected by <code>spring-boot-starter-security</code> (defaults)</p>\n</li>\n<li><p>(a &quot;comparable&quot;, realistic, security-integrating, suceeding) Test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.junit.jupiter.api.Test;\nimport org.springframework.beans.factory.annotation.Autowired;\nimport org.springframework.boot.test.autoconfigure.web.servlet.WebMvcTest;\nimport org.springframework.http.MediaType;\nimport org.springframework.security.test.context.support.WithMockUser;\nimport org.springframework.test.web.servlet.MockMvc;\nimport static org.springframework.security.test.web.servlet.request.SecurityMockMvcRequestPostProcessors.user;\nimport static org.springframework.test.web.servlet.request.MockMvcRequestBuilders.*;\nimport static org.springframework.test.web.servlet.result.MockMvcResultMatchers.*;\n\n@WebMvcTest(controllers = MyController.class)\nclass MyControllerTest {\n\n   @Autowired\n   private MockMvc mockMvc;\n\n   @Test\n   void testUnatuhorized() throws Exception {\n      mockMvc.perform(\n              get(&quot;/data?param=2.0&quot;)\n                      .contentType(MediaType.APPLICATION_JSON))\n              .andExpect(\n                      status().isUnauthorized()); // 1.\n   }\n\n   @Test\n   @WithMockUser // 2.\n   void testAuthorized1() throws Exception {\n      mockMvc.perform(\n              get(&quot;/data?param=2.0&quot;)\n                      .contentType(MediaType.APPLICATION_JSON))\n              .andExpectAll(\n                      status().isOk(),\n                      content().string(&quot;Hello&quot;));\n   }\n\n   @Test\n   void testAuthorized2() throws Exception {\n      mockMvc.perform(\n              get(&quot;/data?param=2.0&quot;)\n                      .with(user(&quot;user&quot;)) // 3.\n                      .contentType(MediaType.APPLICATION_JSON))\n              .andExpectAll(\n                      status().isOk(),\n                      content().string(&quot;Hello&quot;));\n   }\n}\n</code></pre>\n</li>\n<li><p>Modifying controller to:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.security.web.csrf.CsrfToken;\n//...\n    @GetMapping(value = &quot;/data&quot;)\n    public ResponseEntity&lt;String&gt; data(\n      @RequestParam(required = false) Double param,\n      CsrfToken token /*!!*/) {\n          System.err.println(token); // !\n          return ResponseEntity.ok(&quot;Hello&quot;);\n    }\n</code></pre>\n<p><em><strong>Doesn't break the test!</strong></em></p>\n</li>\n<li><p>But <code>excludeAutoConfiguration = {SecurityAutoConfiguration.class}</code> <em><strong>Does!</strong></em> (with exact same exception cause/message!;) :</p>\n<pre class=\"lang-bash prettyprint-override\"><code>org.springframework.web.util.NestedServletException:\n   Request processing failed; nested exception is java.lang.IllegalStateException: \n     No primary or single unique constructor found for interface org.springframework.security.web.csrf.CsrfToken ...\n</code></pre>\n</li>\n</ul>\n<p>So the issue/solution must be in the missing <code>SecurityAutoConfiguration</code>:your-version/ your custom <code>TestConfiguration</code>.</p>\n<p>... (digging source code) (<code>CsrfToken, LazyCsrfTokenRepository, SecurityAutoConfiguration, EnableWebSecurity, ...</code>)</p>\n<p>You miss a &quot;csrf configuration&quot; in your (test) context, which could be eligible to populate/resolve these arguments!!</p>\n<hr />\n<h3>Possible fixes:</h3>\n<ul>\n<li>don't <code>excludeAutoConfiguration = {SecurityAutoConfiguration.class}</code> (on your <code>@WebMvc-/SpringBoot-Test</code>)</li>\n<li>alternatively: Add <code>@EnableWebSecurity</code> annotation to your <code>TestConfiguration</code>.</li>\n</ul>\n<p>Both configure a <code>CsrfTokenRepository</code> in your (test) context, which is capable of populating/resolving these &quot;request mapping arguments&quot;...</p>\n<ul>\n<li>ideally you should use a &quot;real(istic)&quot; security configuration for &quot;integration tests&quot;.</li>\n<li>...</li>\n</ul>\n"}],"owner":{"user_id":2230325,"display_name":"rMonteiro"},"view_count":152,"up_vote_count":3,"accepted_answer_id":76043661,"answer_count":1,"score":3,"creation_date":1681451414,"question_id":76011945,"body":"<p>I have the version 5.6.10 in the following dependencies</p>\n<ul>\n<li><code>spring-security-test</code></li>\n<li><code>spring-security-core</code></li>\n<li><code>spring-security-web</code></li>\n</ul>\n<p>I have a controller with CSRF</p>\n<pre><code>@GetMapping(value = &quot;/data&quot;)\npublic ResponseEntity&lt;DataResponse&gt; data(@RequestParam(required = false) Double param, CsrfToken token){\n    ...\n}\n</code></pre>\n<p>I have a JUnit test that was working before adding the <code>, CsrfToken token</code> to Repository.</p>\n<pre><code>@WebMvcTest(controllers = Controller.class, excludeAutoConfiguration = {SecurityAutoConfiguration.class})\n@ContextConfiguration(classes = {Controller.class, TestConfiguration.class})\nclass ControllerTest {\n\n    @Autowired private MockMvc mockMvc;\n\n\n    @Test\n    void test() throws Exception {\n    \n        mockMvc.perform(get(&quot;/.../data?param=2.0&quot;)\n                    .contextPath(&quot;/CONTEXT&quot;).servletPath(&quot;/.../data&quot;)\n                    .contentType(MediaType.APPLICATION_JSON)\n            )\n            .andExpectAll(\n                status().isOk(),\n                ...\n            )\n            .andReturn();\n    }\n}\n</code></pre>\n<pre><code>\n@WebAppConfiguration\n@EnableWebMvc\npublic class TestConfiguration {\n\n    @Bean\n    ReactjsControllerExceptionHandler reactjsControllerExceptionHandler() {\n        return new ControllerExceptionHandler(); // is a @ControllerAdvice that extends ResponseEntityExceptionHandler. I think it does not matter for this case.\n    }\n}\n\n</code></pre>\n<p>I am getting</p>\n<blockquote>\n<p>No primary or single unique constructor found for interface org.springframework.security.web.csrf.CsrfToken</p>\n</blockquote>\n<pre><code>org.springframework.web.util.NestedServletException: Request processing failed; nested exception is java.lang.IllegalStateException: No primary or single unique constructor found for interface org.springframework.security.web.csrf.CsrfToken\n\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1014)\n    at org.springframework.web.servlet.FrameworkServlet.doGet(FrameworkServlet.java:898)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:502)\n    at org.springframework.web.servlet.FrameworkServlet.service(FrameworkServlet.java:883)\n    at org.springframework.test.web.servlet.TestDispatcherServlet.service(TestDispatcherServlet.java:72)\n    at javax.servlet.http.HttpServlet.service(HttpServlet.java:596)\n    at org.springframework.mock.web.MockFilterChain$ServletFilterProxy.doFilter(MockFilterChain.java:167)\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\n    at org.springframework.web.filter.CharacterEncodingFilter.doFilterInternal(CharacterEncodingFilter.java:201)\n    at org.springframework.web.filter.OncePerRequestFilter.doFilter(OncePerRequestFilter.java:117)\n    at org.springframework.mock.web.MockFilterChain.doFilter(MockFilterChain.java:134)\n    at org.springframework.test.web.servlet.MockMvc.perform(MockMvc.java:201)\nCaused by: java.lang.IllegalStateException: No primary or single unique constructor found for interface org.springframework.security.web.csrf.CsrfToken\n    at org.springframework.beans.BeanUtils.getResolvableConstructor(BeanUtils.java:268)\n    at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.createAttribute(ModelAttributeMethodProcessor.java:219)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletModelAttributeMethodProcessor.createAttribute(ServletModelAttributeMethodProcessor.java:85)\n    at org.springframework.web.method.annotation.ModelAttributeMethodProcessor.resolveArgument(ModelAttributeMethodProcessor.java:147)\n    at org.springframework.web.method.support.HandlerMethodArgumentResolverComposite.resolveArgument(HandlerMethodArgumentResolverComposite.java:122)\n    at org.springframework.web.method.support.InvocableHandlerMethod.getMethodArgumentValues(InvocableHandlerMethod.java:179)\n    at org.springframework.web.method.support.InvocableHandlerMethod.invokeForRequest(InvocableHandlerMethod.java:146)\n    at org.springframework.web.servlet.mvc.method.annotation.ServletInvocableHandlerMethod.invokeAndHandle(ServletInvocableHandlerMethod.java:117)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.invokeHandlerMethod(RequestMappingHandlerAdapter.java:895)\n    at org.springframework.web.servlet.mvc.method.annotation.RequestMappingHandlerAdapter.handleInternal(RequestMappingHandlerAdapter.java:808)\n    at org.springframework.web.servlet.mvc.method.AbstractHandlerMethodAdapter.handle(AbstractHandlerMethodAdapter.java:87)\n    at org.springframework.web.servlet.DispatcherServlet.doDispatch(DispatcherServlet.java:1072)\n    at org.springframework.web.servlet.DispatcherServlet.doService(DispatcherServlet.java:965)\n    at org.springframework.web.servlet.FrameworkServlet.processRequest(FrameworkServlet.java:1006)\n    ... 87 more\n</code></pre>\n<p>I already tried these options:</p>\n<ul>\n<li><code>mockMvc.perform(get(...).with(csrf()))</code></li>\n<li>Setting csfrToken as attribute:</li>\n</ul>\n<pre><code>.with(request -&gt; {\n    request.setAttribute(CsrfToken.class.getName(), csrfToken);\n    return request;\n})\n</code></pre>\n<ul>\n<li>Mocking with Mockito</li>\n</ul>\n<pre><code>CsrfToken csrfToken = Mockito.mock(CsrfToken.class);\nMockito.when(csrfToken.getToken()).thenReturn(&quot;myToken&quot;);\n</code></pre>\n<p>I am getting always the same error, what can I do?</p>\n"},{"tags":["java","spring-data-rest","netflix-eureka","feign","openfeign"],"answers":[{"owner":{"user_id":11433749,"display_name":"Shayan Daneshvar"},"up_vote_count":2,"is_accepted":false,"creation_date":1681068349,"answer_id":75972445,"body":"<p>Spring Cloud Feign does not support inheritance of more than one level. In the feign client classes, you are inheriting from some repository that itself inherits from CrudRepository, not to mention that CrudRepostory itself inherits from the Repository interface!</p>\n<p>So basically you are using Feign the wrong way. You should create the abstract methods inside the Feign Client classes, and enable HyperMediaSupport in your application, so that it can parse HATEOAS-enabled JSON generated by Spring Data Rest.</p>\n<p>Note that the feign client classes can inherit from other classes or interfaces, only if those classes or interfaces do not have parents.</p>\n<p><a href=\"https://reflectoring.io/accessing-spring-data-rest-with-feign/\" rel=\"nofollow noreferrer\">This link</a> might be of help.</p>\n"}],"owner":{"user_id":9408379,"display_name":"Othello"},"view_count":160,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1680623678,"question_id":75931422,"body":"<p>I am working through a tutorial creating a eureka server and eureka client. Prior to adding the feign client, the eureka client is able to register with the eureka server. After I added the feign maven dependency and created the annotations in the PriceServiceApplication.java and PriceClient.java, I seem to be be getting an &quot;Caused by: java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient&quot;. This is a multimodule SpringBoot application project, containing both eureka client (price service) and eureka server. I am using Spring Data Rest with the price service microservice ensuring I could afford not to add the controller and service class. I will add the full errors and code snippet below. Thanks in advance for your help. I will appreciate any advice how to get rid of this error and get the code to work.</p>\n<pre><code>2023-04-04 15:29:04.693 ERROR 12212 --- [  restartedMain] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'pricingServiceApplication': Unsatisfied dependency expressed through field 'priceRepository'; nested exception is org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.udacity.pricing.domain.price.PriceClient': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:596) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:90) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:374) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1411) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:592) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:515) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:320) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:222) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:318) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:843) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:877) ~[spring-context-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:549) ~[spring-context-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:142) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:775) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:397) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:316) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1260) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1248) ~[spring-boot-2.1.5.RELEASE.jar:2.1.5.RELEASE]\n    at com.udacity.pricing.PricingServiceApplication.main(PricingServiceApplication.java:32) ~[classes/:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[na:na]\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77) ~[na:na]\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[na:na]\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568) ~[na:na]\n    at org.springframework.boot.devtools.restart.RestartLauncher.run(RestartLauncher.java:49) ~[spring-boot-devtools-2.1.5.RELEASE.jar:2.1.5.RELEASE]\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'com.udacity.pricing.domain.price.PriceClient': FactoryBean threw exception on object creation; nested exception is java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:178) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.getObjectFromFactoryBean(FactoryBeanRegistrySupport.java:101) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getObjectForBeanInstance(AbstractBeanFactory.java:1674) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.getObjectForBeanInstance(AbstractAutowireCapableBeanFactory.java:1249) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:257) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:199) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:277) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.addCandidateEntry(DefaultListableBeanFactory.java:1471) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.findAutowireCandidates(DefaultListableBeanFactory.java:1428) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1211) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1168) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredFieldElement.inject(AutowiredAnnotationBeanPostProcessor.java:593) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    ... 24 common frames omitted\nCaused by: java.lang.IllegalStateException: Only single-level inheritance supported: PriceClient\n    at feign.Util.checkState(Util.java:127) ~[feign-core-10.1.0.jar:na]\n    at feign.Contract$BaseContract.parseAndValidatateMetadata(Contract.java:55) ~[feign-core-10.1.0.jar:na]\n    at feign.ReflectiveFeign$ParseHandlersByName.apply(ReflectiveFeign.java:154) ~[feign-core-10.1.0.jar:na]\n    at feign.ReflectiveFeign.newInstance(ReflectiveFeign.java:52) ~[feign-core-10.1.0.jar:na]\n    at feign.Feign$Builder.target(Feign.java:251) ~[feign-core-10.1.0.jar:na]\n    at org.springframework.cloud.openfeign.HystrixTargeter.target(HystrixTargeter.java:37) ~[spring-cloud-openfeign-core-2.1.0.RELEASE.jar:2.1.0.RELEASE]\n    at org.springframework.cloud.openfeign.FeignClientFactoryBean.getTarget(FeignClientFactoryBean.java:271) ~[spring-cloud-openfeign-core-2.1.0.RELEASE.jar:2.1.0.RELEASE]\n    at org.springframework.cloud.openfeign.FeignClientFactoryBean.getObject(FeignClientFactoryBean.java:235) ~[spring-cloud-openfeign-core-2.1.0.RELEASE.jar:2.1.0.RELEASE]\n    at org.springframework.beans.factory.support.FactoryBeanRegistrySupport.doGetObjectFromFactoryBean(FactoryBeanRegistrySupport.java:171) ~[spring-beans-5.1.7.RELEASE.jar:5.1.7.RELEASE]\n    ... 35 common frames omitted\n\n\nProcess finished with exit code 1\n</code></pre>\n<p>PricingServiceApplication.java</p>\n<pre><code>@EnableDiscoveryClient\n@EnableFeignClients\npublic class PricingServiceApplication implements CommandLineRunner{\n\n    @Autowired\n    PriceRepository priceRepository;\n\n    public static void main(String[] args) {\n        SpringApplication.run(PricingServiceApplication.class, args);\n    }\n\n\n\n    /**\n     * Gets a random price to fill in for a given vehicle ID.\n     * @return random price for a vehicle\n     */\n    private static BigDecimal randomPrice() {\n        return new BigDecimal(ThreadLocalRandom.current().nextDouble(1, 5))\n                .multiply(new BigDecimal(5000d)).setScale(2, RoundingMode.HALF_UP);\n    }\n\n    @Override\n    public void run(String... args) throws Exception {\n\n        /**\n         * Holds {ID: Price} pairings (current implementation allows for 20 vehicles)\n         */\n        final Map&lt;Long, Price&gt; PRICES = LongStream\n                .range(1, 20)\n                .mapToObj(i -&gt; new Price(&quot;USD&quot;, randomPrice(), i))\n                .collect(Collectors.toMap(Price::getVehicleId, p -&gt; p));\n\n        for (Map.Entry&lt;Long, Price&gt; entry : PRICES.entrySet())\n        {\n            System.out.println(&quot;key = &quot; + entry.getKey() + &quot;, value = &quot; + entry.getValue());\n        }\n\n        priceRepository.saveAll(PRICES.values());\n    }\n}\n</code></pre>\n<p>PriceRepository.java</p>\n<pre><code>@RepositoryRestResource(collectionResourceRel = &quot;vehicle-price&quot;, path = &quot;vehicle-price&quot;)\npublic interface PriceRepository extends CrudRepository&lt;Price, Long&gt; {\n\n     @RequestMapping(method = RequestMethod.GET, value = &quot;/prices/{vehicleId}&quot;)\n     List&lt;Price&gt; findPriceByVehicleId(@Param(&quot;vehicleId&quot;) Long vehicleId);\n}\n</code></pre>\n<p>PriceClient.java</p>\n<pre><code>@FeignClient(name=&quot;pricing-service&quot;, url = &quot;pricing-service&quot;)\npublic interface PriceClient extends PriceRepository{\n\n}\n</code></pre>\n<p>pom.xml</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.1.5.RELEASE&lt;/version&gt;\n        &lt;relativePath/&gt;\n         &lt;!-- lookup parent from com.udacity.pricing.repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.udacity&lt;/groupId&gt;\n    &lt;artifactId&gt;pricing-service&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;pricing-service&lt;/name&gt;\n    &lt;description&gt;Pricing Service&lt;/description&gt;\n\n    &lt;properties&gt;\n        &lt;java.version&gt;11&lt;/java.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter&lt;/artifactId&gt;\n            &lt;exclusions&gt;\n                &lt;exclusion&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-logging&lt;/artifactId&gt;\n                &lt;/exclusion&gt;\n            &lt;/exclusions&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-rest&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.h2database&lt;/groupId&gt;\n            &lt;artifactId&gt;h2&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-client&lt;/artifactId&gt;\n            &lt;version&gt;3.1.3&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-config&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-feign&lt;/artifactId&gt;\n            &lt;version&gt;1.4.7.RELEASE&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-classic&lt;/artifactId&gt;\n            &lt;version&gt;1.1.11&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- https://mvnrepository.com/artifact/ch.qos.logback/logback-core --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;ch.qos.logback&lt;/groupId&gt;\n            &lt;artifactId&gt;logback-core&lt;/artifactId&gt;\n            &lt;version&gt;1.1.11&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-ribbon&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-bootstrap&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-openfeign&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n                &lt;version&gt;Greenwich.RELEASE&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;netflix-candidates&lt;/id&gt;\n            &lt;name&gt;Netflix Candidates&lt;/name&gt;\n            &lt;url&gt;https://artifactory-oss.prod.netflix.net/artifactory/maven-oss-candidates&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>application.properties</p>\n<pre><code>server.port=8082\n\n#configure base path for rest apis\nspring.data.rest.base-path=/api/v1/services\n\n#h2\n#spring.h2.console.enabled=true\n#spring.h2.console.path=/h2\n#spring.datasource.url=jdbc:h2:mem:pricedata\n#\n#spring.datasource.driverClassName=org.h2.Driver\n#spring.datasource.username=sa\n#spring.datasource.password=password\n#spring.jpa.database-platform=org.hibernate.dialect.H2Dialect\n\n#Eureka\nspring.application.name=pricing-service\n\neureka.client.serviceUrl.defaultZone=http://localhost:8761/eureka/\neureka.client.service-url.default-zone=http://localhost:8761/eureka/\ninstance.preferIpAddress=true\n\neureka.client.enabled=true\nspring.cloud.config.enabled=false\neureka.instance.hostname=localhost\n\nspring.cloud.loadbalancer.ribbon.enable=false\n\n</code></pre>\n"},{"tags":["java","postgresql","spring-boot","flyway"],"comments":[{"owner":{"user_id":2224047,"display_name":"Nikolai  Shevchenko"},"edited":false,"comment_id":133803070,"body":"You are probably missing certificate-related stuff within your JDBC url. Check this out <a href=\"https://stackoverflow.com/questions/56511629/how-to-connect-to-postgresql-using-ssl-and-spring-boot\" title=\"how to connect to postgresql using ssl and spring boot\">stackoverflow.com/questions/56511629/&hellip;</a>"},{"owner":{"user_id":3582663,"display_name":"amaurinorato"},"edited":false,"comment_id":133803159,"body":"That&#39;s the thing, apparently, just flyway complains about the certificate because when I disable it, the data source is able to establish a connection with the database.So, I believe I&#39;m missing some configuration on flyway"},{"owner":{"user_id":3582663,"display_name":"amaurinorato"},"edited":false,"comment_id":133820282,"body":"Well, I finally understood the problem. Basically, when I upgraded from spring 2.1.0-RELEASE to 2.7.15 the error started. So, I began jumping versions until seeing the error. And it happened to be when upgrading from 2.4.2 to 2.4.3. When I see the logs on 2.4.2 the application loads the certs before the flyway tries to apply migrations. On 2.4.3, the certs are loaded after flyway tries to apply the migrations. So, something changed in the way Spring loads configurations classes. Still looking for a solution"}],"answers":[{"owner":{"user_id":3582663,"display_name":"amaurinorato"},"up_vote_count":2,"is_accepted":false,"creation_date":1680115281,"answer_id":75880996,"body":"<p>Well, the solution was quite easy after understanding the real problem:</p>\n<p>For some reason, I still don’t know why, when upgrading from spring 2.4.2 to 2.4.3 and above, it changed the order of beans loading. So, previously, we had the class DatasourceContextConfiguration, which was responsible for loading the certificates, loaded before flyway tries to connect to the database and apply changes.\nAfter the upgrade, flyway started trying to connect to the database first, before we load the certificates.\nSo the fix was basically, finding a way to load this bean, responsible for loading the certificates before the flyway tries to apply the migrations</p>\n"}],"owner":{"user_id":3582663,"display_name":"amaurinorato"},"view_count":210,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1679682246,"question_id":75837041,"body":"<p>I have a java application that was previously running with Postgres JDBC dependency version 42.2.5 and flyway version 5.2.1. These versions were coming from <code>spring-boot-dependencies</code> project. In this case, we were using 2.1.0.RELEASE version.</p>\n<p>So, I had the task of upgrading those dependencies. And I did so. <code>spring-boot-dependencies</code> is now at 2.7.8. <code>Flyway</code> version is now at 7.15.0. I kept postgres in the old version for now, because of the error described below.</p>\n<p>The thing is that after upgrading if I keep the property <code>spring.flyway.enabled</code> set to true, the application won't start. It keeps complaining about a valid certificate:</p>\n<pre><code>Caused by: org.flywaydb.core.internal.exception.FlywaySqlException: Unable to obtain connection from database: FATAL: connection requires a valid client certificate\n------------------------------------------------------------------------------------------------\nSQL State  : 28000\nError Code : 0\nMessage    : FATAL: connection requires a valid client certificate\n\n        at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:67)\n        at org.flywaydb.core.internal.jdbc.JdbcConnectionFactory.&lt;init&gt;(JdbcConnectionFactory.java:70)\n        at org.flywaydb.core.Flyway.execute(Flyway.java:504)\n        at org.flywaydb.core.Flyway.migrate(Flyway.java:170)\n        at org.springframework.boot.autoconfigure.flyway.FlywayMigrationInitializer.afterPropertiesSet(FlywayMigrationInitializer.java:66)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1863)\n        at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1800)\n        ... 38 common frames omitted\nCaused by: org.postgresql.util.PSQLException: FATAL: connection requires a valid client certificate\n        at org.postgresql.core.v3.ConnectionFactoryImpl.doAuthentication(ConnectionFactoryImpl.java:514)\n        at org.postgresql.core.v3.ConnectionFactoryImpl.tryConnect(ConnectionFactoryImpl.java:141)\n        at org.postgresql.core.v3.ConnectionFactoryImpl.openConnectionImpl(ConnectionFactoryImpl.java:192)\n        at org.postgresql.core.ConnectionFactory.openConnection(ConnectionFactory.java:49)\n        at org.postgresql.jdbc.PgConnection.&lt;init&gt;(PgConnection.java:195)\n        at org.postgresql.Driver.makeConnection(Driver.java:454)\n        at org.postgresql.Driver.connect(Driver.java:256)\n        at org.springframework.jdbc.datasource.SimpleDriverDataSource.getConnectionFromDriver(SimpleDriverDataSource.java:144)\n        at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnectionFromDriver(AbstractDriverBasedDataSource.java:205)\n        at org.springframework.jdbc.datasource.AbstractDriverBasedDataSource.getConnection(AbstractDriverBasedDataSource.java:169)\n        at org.flywaydb.core.internal.jdbc.JdbcUtils.openConnection(JdbcUtils.java:52)\n        ... 44 common frames omitted\n</code></pre>\n<p>If I disable flyway, the application starts and can connect to the database.</p>\n<p>My properties file looks like this:</p>\n<pre><code>spring.datasource.url=jdbc:postgresql://host:5432/db?ssl=true&amp;sslmode=require&amp;sslfactory=org.postgresql.ssl.DefaultJavaSSLFactory\nspring.datasource.username=user\nspring.datasource.password=\n\nserver.ssl.key-store=classpath:certs/keystore-dev.p12\nserver.ssl.key-store-password=pass\nserver.ssl.key-store-type=PKCS12\nserver.ssl.key-alias=app-alias\nserver.ssl.protocol=TLS\n# flyway db migration support\nspring.flyway.enabled=true\n</code></pre>\n<p>The connection data is correct since the application starts and connects to the database.</p>\n"},{"tags":["java","visibility","project-panama"],"answers":[{"owner":{"user_id":845414,"display_name":"Johannes Kuhn"},"up_vote_count":2,"is_accepted":false,"creation_date":1679712950,"answer_id":75839430,"body":"<p>If you look at the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/BlockingQueue.html\" rel=\"nofollow noreferrer\">Specification for <code>BlockingQueue</code></a>, you can find the following paragraph:</p>\n<blockquote>\n<p>Memory consistency effects: As with other concurrent collections, actions in a thread prior to placing an object into a <code>BlockingQueue</code> <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/package-summary.html#MemoryVisibility\" rel=\"nofollow noreferrer\"><em>happen-before</em></a> actions subsequent to the access or removal of that element from the <code>BlockingQueue</code> in another thread.</p>\n</blockquote>\n<p>As <code>BlockingQueue</code> establishes a happen-before relationship, no additional synchronization is needed.</p>\n"}],"owner":{"user_id":21010464,"display_name":"benrush"},"view_count":90,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1679675632,"question_id":75836178,"body":"<p>I am using JDK20's FFI, and I need to pass a Object to a BlockingQueue to shared it from one thread to another. The Object contains several MemorySegment field, which belongs to <code>Arena.openShared()</code>. Before passing, I write some bytes into the MemorySegment using <code>MemorySegment.set(JAVA_BYTE, ..., ...)</code>. I don't know if the other thread would read exactly what I write, since I am not using <code>VarHandle.setVolatile()</code> to ensure its thread visibility. But as Java Objects, there should be locks in BlockingQueue to ensure it, I wonder if it's also appliable to the <code>MemorySegment</code>, that each byte would be flushed to the memory for other threads to see them.</p>\n"},{"tags":["java","javafx"],"comments":[{"owner":{"user_id":2189127,"display_name":"James_D"},"edited":false,"comment_id":133685454,"body":"This looks like a bug. I noticed a couple of things: 1. If you add any style to the text flow (I was adding a background color to see the size of it), it seems to work fine. 2. If you switch to a different container (e.g. an <code>HBox</code>), it also seems to work fine."},{"owner":{"user_id":9319895,"display_name":"parszab"},"edited":false,"comment_id":133685587,"body":"Interesting, thanks! Worth reporting as a bug? The container solution won&#39;t work for me because I want to use a custom layout manager (where the issue originally came up) but with some styling trick I actually might be work around the issue."},{"owner":{"user_id":2189127,"display_name":"James_D"},"edited":false,"comment_id":133685600,"body":"Yes, certainly. Another workaround is to call <code>textFlow.layout()</code> in the event handler."},{"owner":{"user_id":2189127,"display_name":"James_D"},"edited":false,"comment_id":133685616,"body":"You might be able to make the <code>layout()</code> call in your custom pane/region <code>layoutChildren()</code> method. That would be a more suitable place for it. I don&#39;t fully understand the bug though, so I don&#39;t know if that would work."}],"answers":[{"owner":{"user_id":2189127,"display_name":"James_D"},"up_vote_count":2,"is_accepted":true,"creation_date":1679264135,"answer_id":75785260,"body":"<p>This looks like a bug (which I'd recommend reporting).</p>\n<p>Interestingly, it only seems to manifest in a <code>BorderLayout</code>, but not in a <code>HBox</code>. It also doesn't show up if you add style to the text flow.</p>\n<p>If those workarounds aren't usable, calling <code>textFlow.autosize()</code> to recompute the size of the text flow seems to work. Since you say in the comments that you're using a custom pane to contain the text flow, you may find a convenient place to do that in the custom pane's <code>layoutChildren()</code> method, or similar. As a worst case, you can just call that in the event handler:</p>\n<pre><code>    layout.setOnMouseClicked(e -&gt; {\n        textFlow.getChildren().addAll(new Text(&quot;myAdd &quot;));\n        textFlow.autosize();\n    });\n</code></pre>\n"}],"owner":{"user_id":9319895,"display_name":"parszab"},"view_count":51,"up_vote_count":3,"accepted_answer_id":75785260,"answer_count":1,"score":3,"creation_date":1679261187,"question_id":75785017,"body":"<p>I'm trying to use a quite simple JavaFX feature, but may be missing something: adding a new <code>Text</code> object to a <code>TextFlow</code> that is already showing. I created a very minimal working example:</p>\n<pre><code>public class TextFlowTest extends Application {\n\n    @Override\n    public void start(Stage stage) {\n        TextFlow textFlow = new TextFlow(new Text(&quot;One &quot;), new Text(&quot;Two &quot;), new Text(&quot;Three &quot;), new Text(&quot;Four &quot;));\n        var layout = new BorderPane(textFlow);\n        layout.setOnMouseClicked(e -&gt; {\n            textFlow.getChildren().addAll(new Text(&quot;myAdd &quot;));\n        });\n        Scene scene = new Scene(layout, 200, 50);\n        stage.setScene(scene);\n        stage.show();\n    }\n\n    public static void main(String args[]){\n        launch(args);\n    }\n}\n</code></pre>\n<p>If you run the code above, and click on the text it should add a new word: <code>myAdd</code> - however it only renders the first few pixels of the first character.</p>\n<p><a href=\"https://i.stack.imgur.com/fCwyg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/fCwyg.png\" alt=\"enter image description here\" /></a></p>\n<p>My feeling is that it is related to the initial calculation of the width of the flow, so I tried <code>requestLayout</code> on the <code>TextFlow</code> or the containing pane but it didn't help. Shouldn't this just work out of the box? Just add a new <code>Text</code> node to the flow's children, which is an observable list, so the flow should update its layout?</p>\n"},{"tags":["java","bigdecimal"],"comments":[{"owner":{"user_id":40342,"display_name":"Joachim Sauer"},"edited":false,"comment_id":133639553,"body":"Generally speaking when you use <code>BigDecimal</code> for precise results, you should avoid having <i>any</i> <code>float</code> or <code>double</code> values of any kind in that code. You already create <code>price</code> correctly (using a String literal), I suggest you use the same approach for the interest rate and get rid of the <code>double.interestRate</code>."}],"answers":[{"owner":{"user_id":9513184,"display_name":"Unmitigated"},"up_vote_count":2,"is_accepted":true,"creation_date":1678974169,"answer_id":75757118,"body":"<p>Pass the <code>MathContext</code> as the second argument to each call to <code>divide</code>, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>bMileage.divide(new BigDecimal(12), precision)\n</code></pre>\n"}],"owner":{"user_id":8593764,"display_name":"jennifer ruurs"},"view_count":48,"up_vote_count":3,"accepted_answer_id":75757118,"answer_count":1,"score":3,"creation_date":1678973413,"question_id":75756963,"body":"<p>I am trying to calculate leaseRate which is a big decial, However I receive the following error:\n<code>Non-terminating decimal expansion; no exact representable decimal result</code>\nI see that this is round issue, however I think that I solved this with <code>MathContext precision = new MathContext(2);</code></p>\n<p>I made a small example this issue:</p>\n<pre><code>public class Test {\n  public static void main(String[] args) {\n    MathContext precision = new MathContext(2);\n    int mileage = 10;\n    int duration = 20;\n    BigDecimal price = new BigDecimal(&quot;34234.34&quot;,precision);\n    double interestRate = 4.57;\n    BigDecimal bMileage = new BigDecimal(mileage, precision);\n    BigDecimal bDuration = new BigDecimal(duration,precision);\n    BigDecimal bInterestRate = new BigDecimal(interestRate,precision);\n    BigDecimal leaseRate = ((((bMileage.divide(\n        new BigDecimal(12,precision))).multiply(bDuration)).divide(\n        price)).add(\n        ((bInterestRate.divide(new BigDecimal(100,precision))).multiply(\n            price)).divide(new BigDecimal(12,precision))));\n    System.out.println(leaseRate);\n  }\n}\n</code></pre>\n<p>What is wrong with my code?</p>\n"},{"tags":["java","gson"],"comments":[{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":133529452,"body":"Looking at <a href=\"https://stackoverflow.com/q/22310143/6395627\">this Q&amp;A</a>, it appears you need to register a &quot;type adapter&quot;. This <a href=\"https://stackoverflow.com/q/23072733/6395627\">other Q&amp;A</a> links to <a href=\"https://github.com/gkopff/gson-javatime-serialisers\" rel=\"nofollow noreferrer\">a library</a> that may already provide what you need."},{"owner":{"user_id":992484,"display_name":"MadProgrammer"},"edited":false,"comment_id":133529582,"body":"<a href=\"https://www.google.com/search?q=gson+decode+instant&amp;rlz=1C5GCEM_enAU1020AU1020&amp;oq=gson+decode+instant&amp;aqs=chrome..69i57.4523j0j7&amp;sourceid=chrome&amp;ie=UTF-8\" rel=\"nofollow noreferrer\">gson decode instant</a>"}],"answers":[{"owner":{"user_id":3035905,"display_name":"Laurent"},"up_vote_count":2,"is_accepted":true,"creation_date":1678398113,"answer_id":75690313,"body":"<p>The exception you're getting is because the &quot;expireAt&quot; field in the JSON is a string, but in the Details class it's declared as an Instant type. You need to tell Gson how to convert the string to an Instant.</p>\n<p>You can create a custom Gson deserializer for the Instant type, like this:</p>\n<pre><code>public class InstantDeserializer implements JsonDeserializer&lt;Instant&gt; {\n  @Override\n  public Instant deserialize(JsonElement json, Type typeOfT, JsonDeserializationContext context) throws JsonParseException {\n    return Instant.parse(json.getAsString());\n  }\n}\n</code></pre>\n<p>Then, you can register this deserializer with Gson before parsing the JSON string:</p>\n<pre><code>Gson gson = new GsonBuilder()\n            .registerTypeAdapter(Instant.class, new InstantDeserializer())\n            .create();\nMyResponse response = gson.fromJson(string, MyResponse.class);\n</code></pre>\n"}],"owner":{"user_id":13983643,"display_name":"newLearner"},"view_count":112,"up_vote_count":3,"accepted_answer_id":75690313,"answer_count":1,"score":3,"creation_date":1678395617,"question_id":75689994,"body":"<p>I have a a JSON string as :</p>\n<pre><code>{\n    &quot;personId&quot;: &quot;person1&quot;,\n    &quot;userId&quot;: &quot;user1&quot;\n    &quot;details&quot;: [\n        {\n            &quot;homeId&quot;: &quot;home1&quot;,\n            &quot;expireAt&quot;: &quot;2023-03-08T15:17:04.506Z&quot;\n        }\n    ]\n}\n</code></pre>\n<p>And</p>\n<pre><code>@Data\n@Builder\npublic class MyResponse {\n    private String personId;\n    private String userId;\n    private List&lt;Details&gt; details;\n}\n</code></pre>\n<pre><code>@Data\n@Builder\npublic class Details {\n    private String homeId;\n    private Instant expireAt;\n}\n</code></pre>\n<p>I am trying to deserialize the JSON <code>String</code> to <code>MyResponse</code> as :</p>\n<pre><code>Gson().fromJson(string, MyResponse.class)\n</code></pre>\n<p>but getting the below expcetion for <code>expireAt</code> field:</p>\n<p><code>Expected BEGIN_OBJECT but was STRING at line 1 column 24 path $.details[0].expireAt</code></p>\n<p>How can I resolve this ?</p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"user_id":3832970,"display_name":"Wiktor Stribiżew"},"edited":false,"comment_id":133502152,"body":"You need <code>(?&lt;![0-9a-z])([a-z]+)</code>, include the letters into the character class inside the lookbehind."},{"owner":{"user_id":1185845,"display_name":"Espinosa"},"edited":false,"comment_id":133502303,"body":"Yep, @WiktorStribiżew you are absolutely right, it works for both look-aheads and look-behinds. Thank you! Feel free to add it as proper answer and I&#39;m happy to approve."}],"answers":[{"owner":{"user_id":3832970,"display_name":"Wiktor Stribiżew"},"up_vote_count":2,"is_accepted":true,"creation_date":1678283780,"answer_id":75673995,"body":"<p>You need to include the letter pattern into the character class inside the lookbehind:</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?&lt;![0-9a-z])([a-z]+)\n</code></pre>\n<p>Note that the capturing group around <code>[a-z]+</code> is superfluous, and should be removed.</p>\n<p>See the <a href=\"https://regex101.com/r/G1PA5V/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n"}],"owner":{"user_id":1185845,"display_name":"Espinosa"},"view_count":37,"up_vote_count":3,"accepted_answer_id":75673995,"answer_count":1,"score":3,"creation_date":1678282662,"question_id":75673775,"body":"<p>Using this text as an example: <code>foo 34abcd bar 7890xyz 123</code>.\nPlease help me find a regex to find all &quot;orphan&quot; numbers, that would be <code>123</code>;\nand regex to find all &quot;orphan&quot; texts, that would be <code>foo</code> and <code>bar</code>.</p>\n<p>To find all number followed immediately by a text is simple, I use a simple regex\n<code>([0-9]+)([a-z]+)</code>. But how to find all non-conforming segments/words?</p>\n<p>To find number not followed by a text, the &quot;orphan&quot; nuber, I tried to use regex negative look-ahead <code>([0-9]+)(?![a-z]+)</code>, but that return false positive like <code>3</code> from <code>34abcd</code>, because <code>3</code> is not followed by a letter. How can I make regex consider <code>34</code> and not a <code>3</code> and <code>4</code>?</p>\n<p>To find texts not immediately predeced by a number, the &quot;orphan&quot; texts,\nI tried regex with negative look-behind, <code>(?&lt;![0-9]+)([a-z]+)</code>.\nBut it make false positive match on <code>34abcd</code> returning text <code>bcd</code>.\nThe look-behing seems to work only for exact texts, like (min|sec|year|years), but not for a any string of letters.</p>\n<p>Background:\nI'm trying to write a regex based parser for Java <code>Duration</code>, something more human friendly then the default parser in <code>Duration.parse</code>. Something what would parse &quot;1h 30min 5sec&quot; but also detect and report back any unparsable bits, like &quot;foo bar 30min&quot; shoudl complain about not recognizing &quot;foo bar&quot;.</p>\n<p>There is a question for that\n<a href=\"https://stackoverflow.com/questions/6403851/parsing-time-strings-like-1h-30min\">Parsing time strings like &quot;1h 30min&quot;</a>\nbut the suggested solutions are not satisfactory.</p>\n"},{"tags":["java"],"answers":[{"owner":{"user_id":1898563,"display_name":"Michael"},"up_vote_count":2,"is_accepted":true,"creation_date":1678146223,"answer_id":75656818,"body":"<p>It's not guaranteed. Java uses data from <a href=\"https://en.wikipedia.org/wiki/Common_Locale_Data_Repository\" rel=\"nofollow noreferrer\">Common Locale Data Repository</a> and they periodically update it.</p>\n<p>There have been cases where that update was a breaking change, e.g. this:  <a href=\"https://stackoverflow.com/questions/69267710/septembers-short-form-sep-no-longer-parses-in-java-17-in-en-gb-locale\">September&#39;s short form &quot;Sep&quot; no longer parses in Java 17 in en_GB locale</a></p>\n<p>That zone just happens to have both of those examples as valid aliases. See: <a href=\"https://github.com/openjdk/jdk/blob/master/make/data/cldr/common/bcp47/timezone.xml#L398\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/blob/master/make/data/cldr/common/bcp47/timezone.xml#L398</a> but there is no requirement that they do so.</p>\n<p>A zone name is not really something you should expect forwards compatibility for. This data models the real world, and the real world is constantly changing. If you want to rely on something that's future-proof, then use the offset, i.e. <code>+02:00</code>.</p>\n"}],"owner":{"user_id":391161,"display_name":"merlin2011"},"view_count":117,"up_vote_count":3,"accepted_answer_id":75656818,"answer_count":1,"score":3,"creation_date":1678143492,"question_id":75656590,"body":"<p>In late 2022, the timezone <code>Europe/Kiev</code> was <a href=\"https://mm.icann.org/pipermail/tz/2022-April/031376.html\" rel=\"nofollow noreferrer\">renamed</a> to <code>Europe/Kyiv</code> by IANA.</p>\n<p>Consider the following program:</p>\n<pre><code>import java.time.ZoneId;\n\npublic class TZPlay {\n  public static void main(String[] args) {\n    try {\n//      ZoneId.of(&quot;Europe/Kiev&quot;); // Works in Java 17.06 and Java 17.03\n//      ZoneId.of(&quot;Europe/Kyiv&quot;); // Works in Java 17.06 but not Java 17.03.\n    } catch (Exception e) {\n      e.printStackTrace();\n    }\n  }\n}\n</code></pre>\n<p>Observations:</p>\n<ul>\n<li>Java 17.03 throws the following exception when trying to parse <code>Europe/Kyiv</code>.</li>\n</ul>\n<pre><code>java.time.zone.ZoneRulesException: Unknown time-zone ID: Europe/Kyiv\n        at java.base/java.time.zone.ZoneRulesProvider.getProvider(ZoneRulesProvider.java:280)\n        at java.base/java.time.zone.ZoneRulesProvider.getRules(ZoneRulesProvider.java:235)\n        at java.base/java.time.ZoneRegion.ofId(ZoneRegion.java:121)\n        at java.base/java.time.ZoneId.of(ZoneId.java:410)\n        at java.base/java.time.ZoneId.of(ZoneId.java:358)\n        at TZPlay.main(TZPlay.java:7)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n        at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n        at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n        at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n        at jdk.compiler/com.sun.tools.javac.launcher.Main.execute(Main.java:419)\n        at jdk.compiler/com.sun.tools.javac.launcher.Main.run(Main.java:192)\n        at jdk.compiler/com.sun.tools.javac.launcher.Main.main(Main.java:132)\n</code></pre>\n<ul>\n<li>Java 17.06 correctly parses it without exception.</li>\n<li>Moreover, Java 17.06 also parses <code>Europe/Kiev</code> without exception.</li>\n</ul>\n<p>Empirically, based on the above example, it seems like newer versions of Java are able to parse older timezones after they were renamed.</p>\n<p><strong>Is this guaranteed to always be true, or will old timezones sometimes break on newer Java minor versions?</strong></p>\n<p>I searched the <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/time/ZoneId.html\" rel=\"nofollow noreferrer\">ZoneId javadoc</a> for the terms &quot;previous&quot;, &quot;old&quot; and &quot;rename&quot; but did not find anything obvious.</p>\n"},{"tags":["java","matrix"],"answers":[{"owner":{"user_id":3908170,"display_name":"DarkCygnus"},"up_vote_count":1,"is_accepted":false,"creation_date":1677792443,"answer_id":75620985,"body":"<p>You are not checking if the <code>scanner</code> actually has lines to read. I see you iterate from 0 to <code>numRows</code> and you use lower than (&lt;).</p>\n<p>However, you are calling <code>nextLine()</code> to get your <code>numCols</code>, and that is consuming one line (thus I suspect that you are attempting to read one line extra than the ones you actually have):</p>\n<pre><code>int numRows = getNumRows(file);\nint numCols = getNumCols(scanner.nextLine()); //here you are consuming one line\nint[][] matrix = new int[numRows][numCols];\n\nfor (int i = 0; i &lt; numRows; i++) { //...but you still iterate till numRows\n    //I suspect that a numRows-1 will solve this\n    String[] values = scanner.nextLine().split(&quot; &quot;);\n    //...\n}\n</code></pre>\n<p>I suspect that you should have <code>numRows -1</code> instead. Or better yet, <strong>call <code>hasNextLine()</code> to be sure you still have lines to read</strong>. Otherwise you will be &quot;missing&quot; that first line you read to get the number of columns.</p>\n<pre><code>if(scanner.hasNextLine()){\n    proceedToRead();\n}\n</code></pre>\n"},{"owner":{"user_id":10540300,"display_name":"mahdi nezhadasad"},"up_vote_count":1,"is_accepted":false,"creation_date":1677797409,"answer_id":75621564,"body":"<p>try this one.</p>\n<pre><code>  private static int[][] readMatrixFromFile(String filename) {\n        try {\n            File file = new File(filename);\n    \n            if (!file.exists()) {\n                System.out.println(&quot;Error: file &quot; + filename + &quot; does not exist.&quot;);\n                return null;\n            }\n    \n            if (!file.canRead()) {\n                System.out.println(&quot;Error: file &quot; + filename + &quot; cannot be read.&quot;);\n                return null;\n            }\n    \n            Scanner scanner = new Scanner(file);\n    \n            int numRows = getNumRows(file);\n            int numCols = getNumCols(scanner.nextLine());\n    \n            int[][] matrix = new int[numRows][numCols];\n    \n            for (int i = 0; i &lt; numRows; i++) {\n                String line = scanner.nextLine();\n                String[] values = line.split(&quot; &quot;);\n                if (values.length != numCols) {\n                    System.out.println(&quot;Error: line &quot; + (i+1) + &quot; in file &quot; + filename + &quot; has the wrong number of columns.&quot;);\n                    return null;\n                }\n                for (int j = 0; j &lt; numCols; j++) {\n                    matrix[i][j] = Integer.parseInt(values[j]);\n                }\n            }\n    \n            scanner.close();\n            return matrix;\n    \n        } catch (IOException e) {\n            System.out.println(&quot;Error reading matrix from file: &quot; + filename);\n            e.printStackTrace();\n            return null;\n        }\n    }\n</code></pre>\n"}],"owner":{"user_id":20880731,"display_name":"Rayman"},"view_count":52,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1677791666,"question_id":75620893,"body":"<p>I am currently trying to multiply two different matrix that are in two different files in java. The goal is to take the matrixes that are in two different txt files and multiply them together. Once the multiplication is done (if it is possible) then it should print the answer out into a different txt file. However, I am keep getting this error:</p>\n<blockquote>\n<pre><code>Exception in thread &quot;main&quot; java.util.NoSuchElementException: No line found\n  at java.base/java.util.Scanner.nextLine(Scanner.java:1651)  \n  at MM.readMatrixFromFile(MM.java:38)  \n  at MM.main(MM.java:15)  \n</code></pre>\n</blockquote>\n<p>I've double check to see if the txt files were in the correct place (which they are) and I have checked to see were there anything in my code that I have missed, but I have found nothing. Can someone please help me know what I am doing wrong (code shown below):</p>\n<pre class=\"lang-java prettyprint-override\"><code>/*\n* Here we are creating the matrix program, where we will multiply two matrixes from the two given matrix files. \n* Once we make the conversion, we will print out the result in another txt file\n* In order to do this project, we may need to \n*/\n\nimport java.io.*;\nimport java.util.*;\n\npublic class MM {\n\n    public static void main(String[] args) {\n        int[][] matrixA = readMatrixFromFile(&quot;matrixA.txt&quot;);\n        int[][] matrixB = readMatrixFromFile(&quot;matrixB.txt&quot;);\n\n        if (matrixA[0].length != matrixB.length) {\n            System.out.println(&quot;Unable to perform matrix multiplication.&quot;);\n            return;\n        }\n\n        int[][] matrixC = multiplyMatrices(matrixA, matrixB);\n        writeMatrixToFile(matrixC, &quot;matrixAnswer.txt&quot;);\n    }\n\n    private static int[][] readMatrixFromFile(String filename) {\n        try {\n            File file = new File(filename);\n            Scanner scanner = new Scanner(file);\n\n            int numRows = getNumRows(file);\n            int numCols = getNumCols(scanner.nextLine());\n\n            int[][] matrix = new int[numRows][numCols];\n\n            for (int i = 0; i &lt; numRows; i++) {\n                String[] values = scanner.nextLine().split(&quot; &quot;);\n                for (int j = 0; j &lt; numCols; j++) {\n                    matrix[i][j] = Integer.parseInt(values[j]);\n                }\n            }\n\n            scanner.close();\n            return matrix;\n\n        } catch (IOException e) {\n            System.out.println(&quot;Error reading matrix from file: &quot; + filename);\n            return null;\n        }\n    }\n\n    private static int[][] multiplyMatrices(int[][] matrixA, int[][] matrixB) {\n        int numRowsA = matrixA.length;\n        int numColsA = matrixA[0].length;\n        int numColsB = matrixB[0].length;\n\n        int[][] matrixC = new int[numRowsA][numColsB];\n\n        for (int i = 0; i &lt; numRowsA; i++) {\n            for (int j = 0; j &lt; numColsB; j++) {\n                for (int k = 0; k &lt; numColsA; k++) {\n                    matrixC[i][j] += matrixA[i][k] * matrixB[k][j];\n                }\n            }\n        }\n\n        return matrixC;\n    }\n\n    private static void writeMatrixToFile(int[][] matrix, String filename) {\n        try {\n            File file = new File(filename);\n            FileWriter writer = new FileWriter(file);\n\n            for (int i = 0; i &lt; matrix.length; i++) {\n                for (int j = 0; j &lt; matrix[0].length; j++) {\n                    writer.write(matrix[i][j] + &quot; &quot;);\n                }\n                writer.write(&quot;\\n&quot;);\n            }\n\n            writer.close();\n\n        } catch (IOException e) {\n            System.out.println(&quot;Error writing matrix to file: &quot; + filename);\n        }\n    }\n\n    private static int getNumRows(File file) throws IOException {\n        Scanner scanner = new Scanner(file);\n        int numRows = 0;\n        while (scanner.hasNextLine()) {\n            scanner.nextLine();\n            numRows++;\n        }\n        scanner.close();\n        return numRows;\n    }\n\n    private static int getNumCols(String line) {\n        return line.trim().split(&quot; +&quot;).length;\n    }\n}\n</code></pre>\n<p>and here is how I have it set up in my file:\n<a href=\"https://i.stack.imgur.com/pdJmT.png\" rel=\"nofollow noreferrer\">File setup</a></p>\n"},{"tags":["java","spring-boot","gradle"],"comments":[{"owner":{"user_id":3367392,"display_name":"aboudirawas"},"edited":false,"comment_id":133405139,"body":"Did you try closing and opening your IDE?"},{"owner":{"user_id":6540591,"display_name":"User51"},"edited":false,"comment_id":133405639,"body":"As with all gradle issues, first, the usual...  open/close IDE (as suggested).  Try from CLI.  Delete build folder.  Try with a clean....  As for your specific error, the problem surrounded <code>bootRunMainClassName</code>, correct?  Is it still throwing that even when that line is commented out?  Also, in our SB 3.0.x project, we specify the main class via:  <code>springBoot.mainClass = &quot;...&quot;</code>, not with <code>bootRunMainClassName</code>.  But, if it&#39;s commented out, it must be NOT commented out somewhere else?"},{"owner":{"user_id":21319040,"display_name":"mike ev"},"edited":false,"comment_id":133417793,"body":"aboudirawas &amp; User51, i closed and opened IntelliJ IDEA and the same problem persists."},{"owner":{"user_id":21319040,"display_name":"mike ev"},"edited":false,"comment_id":133466523,"body":"@User51, there is a block of springBoot:  <code>springBoot {     mainClass = &#39;tech.company.template.application.core.TemplateCoreApplicat&zwnj;&#8203;ion&#39;  }</code>  . Even with that, the error is &quot;Task with name &#39;bootRunMainClassName&#39; not found in project&quot;"},{"owner":{"user_id":6540591,"display_name":"User51"},"edited":false,"comment_id":133466620,"body":"Can you search your entire project.  I only see the string <code>bootRunMainClassName</code> once, but it is commented out.  Because it is referencing that as the error, it MUST be referenced SOMEWHERE other than comments.  Search all your <code>.gradle</code> and <code>.properties</code> files.  Also search all sub-projects."}],"answers":[{"owner":{"user_id":1384297,"display_name":"Andy Wilkinson"},"up_vote_count":2,"is_accepted":false,"creation_date":1678117589,"answer_id":75652927,"body":"<p>The key part of the stack trace is the following:</p>\n<pre><code>Caused by: org.gradle.api.UnknownTaskException: Task with name 'bootRunMainClassName' not found in project ':nc-application:nc-application-web-plugin:nc-application-runtime'.\n    at org.gradle.api.internal.tasks.DefaultTaskCollection.createNotFoundException(DefaultTaskCollection.java:102)\n    at org.gradle.api.internal.tasks.DefaultTaskCollection.createNotFoundException(DefaultTaskCollection.java:46)\n    at org.gradle.api.internal.DefaultNamedDomainObjectCollection.named(DefaultNamedDomainObjectCollection.java:360)\n    at org.gradle.api.internal.tasks.DefaultTaskCollection.named(DefaultTaskCollection.java:112)\n    at org.springdoc.openapi.gradle.plugin.OpenApiGradlePlugin$apply$1.execute(OpenApiGradlePlugin.kt:26)\n</code></pre>\n<p>It shows that some code in <code>org.springdoc.openapi.gradle.plugin.OpenApiGradlePlugin</code> is looking for the task named <code>bootRunMainClassName</code> and it does not exist. The task does not exist when you upgrade to Spring Boot 3.0 due to <a href=\"https://github.com/spring-projects/spring-boot/issues/30467\" rel=\"nofollow noreferrer\">these changes to Spring Boot's Gradle plugin</a>.</p>\n<p>The incompatibility with Spring Boot 3.0's Gradle plugin has been fixed in 1.6.0 of the SpringDoc OpenApi Gradle plugin. You can upgrade by changing the plugins declaration in your <code>build.gradle</code>:</p>\n<pre><code>plugins {\n    id 'org.springframework.boot' version &quot;${bootVersion}&quot;\n    id 'io.spring.dependency-management' version '1.1.0'\n    id 'org.springdoc.openapi-gradle-plugin' version '1.6.0'\n    id 'tech.company.json.schema' version '1.0.4'\n}\n</code></pre>\n"}],"owner":{"user_id":21319040,"display_name":"mike ev"},"view_count":365,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1677763259,"question_id":75616001,"body":"<p>Tried to upgrade to Spring Boot 3.0.3 from 2.7.8 and when i press &quot;Load Gradle Changes&quot; got this error :</p>\n<p>A problem occurred configuring project ':nc-application:nc-application-web-plugin:nc-application-runtime'.</p>\n<blockquote>\n<p>Task with name 'bootRunMainClassName' not found in project ':nc-application:nc-application-web-plugin:nc-application-runtime'.</p>\n</blockquote>\n<ul>\n<li>Try:</li>\n</ul>\n<blockquote>\n<p>Run with --info or --debug option to get more log output.\nRun with --scan to get full insights.</p>\n</blockquote>\n<p>Exception is:</p>\n<pre><code>org.gradle.api.ProjectConfigurationException: A problem occurred configuring project ':nc-application:nc-application-web-plugin:nc-application-runtime'.\n    at org.gradle.configuration.project.LifecycleProjectEvaluator.wrapException(LifecycleProjectEvaluator.java:84)\n    at org.gradle.configuration.project.LifecycleProjectEvaluator.addConfigurationFailure(LifecycleProjectEvaluator.java:77)\n    at org.gradle.configuration.project.LifecycleProjectEvaluator.access$400(LifecycleProjectEvaluator.java:55)\n    at org.gradle.configuration.project.LifecycleProjectEvaluator$NotifyAfterEvaluate.run(LifecycleProjectEvaluator.java:255)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n    at org.gradle.configuration.project.LifecycleProjectEvaluator$EvaluateProject.lambda$run$0(LifecycleProjectEvaluator.java:114)\n    at org.gradle.api.internal.project.DefaultProjectStateRegistry$ProjectStateImpl.lambda$applyToMutableState$0(DefaultProjectStateRegistry.java:351)\n    at org.gradle.api.internal.project.DefaultProjectStateRegistry$ProjectStateImpl.lambda$fromMutableState$1(DefaultProjectStateRegistry.java:374)\n    at org.gradle.internal.work.DefaultWorkerLeaseService.withReplacedLocks(DefaultWorkerLeaseService.java:345)\n    at org.gradle.api.internal.project.DefaultProjectStateRegistry$ProjectStateImpl.fromMutableState(DefaultProjectStateRegistry.java:374)\n    at org.gradle.api.internal.project.DefaultProjectStateRegistry$ProjectStateImpl.applyToMutableState(DefaultProjectStateRegistry.java:350)\n    at org.gradle.configuration.project.LifecycleProjectEvaluator$EvaluateProject.run(LifecycleProjectEvaluator.java:100)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n    at org.gradle.configuration.project.LifecycleProjectEvaluator.evaluate(LifecycleProjectEvaluator.java:72)\n    at org.gradle.api.internal.project.DefaultProject.evaluate(DefaultProject.java:761)\n    at org.gradle.api.internal.project.DefaultProject.evaluate(DefaultProject.java:152)\n    at org.gradle.api.internal.project.ProjectLifecycleController.lambda$ensureSelfConfigured$1(ProjectLifecycleController.java:63)\n    at org.gradle.internal.model.StateTransitionController.lambda$doTransition$12(StateTransitionController.java:236)\n    at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:247)\n    at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:235)\n    at org.gradle.internal.model.StateTransitionController.lambda$maybeTransitionIfNotCurrentlyTransitioning$9(StateTransitionController.java:196)\n    at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:34)\n    at org.gradle.internal.model.StateTransitionController.maybeTransitionIfNotCurrentlyTransitioning(StateTransitionController.java:192)\n    at org.gradle.api.internal.project.ProjectLifecycleController.ensureSelfConfigured(ProjectLifecycleController.java:63)\n    at org.gradle.api.internal.project.DefaultProjectStateRegistry$ProjectStateImpl.ensureConfigured(DefaultProjectStateRegistry.java:325)\n    at org.gradle.execution.TaskPathProjectEvaluator.configure(TaskPathProjectEvaluator.java:33)\n    at org.gradle.execution.TaskPathProjectEvaluator.configureHierarchy(TaskPathProjectEvaluator.java:49)\n    at org.gradle.configuration.DefaultProjectsPreparer.prepareProjects(DefaultProjectsPreparer.java:50)\n    at org.gradle.configuration.BuildTreePreparingProjectsPreparer.prepareProjects(BuildTreePreparingProjectsPreparer.java:64)\n    at org.gradle.configuration.BuildOperationFiringProjectsPreparer$ConfigureBuild.run(BuildOperationFiringProjectsPreparer.java:52)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.run(DefaultBuildOperationRunner.java:47)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.run(DefaultBuildOperationExecutor.java:68)\n    at org.gradle.configuration.BuildOperationFiringProjectsPreparer.prepareProjects(BuildOperationFiringProjectsPreparer.java:40)\n    at org.gradle.initialization.VintageBuildModelController.lambda$prepareProjects$3(VintageBuildModelController.java:89)\n    at org.gradle.internal.model.StateTransitionController.lambda$doTransition$12(StateTransitionController.java:236)\n    at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:247)\n    at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:235)\n    at org.gradle.internal.model.StateTransitionController.lambda$transitionIfNotPreviously$10(StateTransitionController.java:210)\n    at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:34)\n    at org.gradle.internal.model.StateTransitionController.transitionIfNotPreviously(StateTransitionController.java:206)\n    at org.gradle.initialization.VintageBuildModelController.prepareProjects(VintageBuildModelController.java:89)\n    at org.gradle.initialization.VintageBuildModelController.getConfiguredModel(VintageBuildModelController.java:64)\n    at org.gradle.internal.build.DefaultBuildLifecycleController.lambda$withProjectsConfigured$1(DefaultBuildLifecycleController.java:114)\n    at org.gradle.internal.model.StateTransitionController.lambda$notInState$3(StateTransitionController.java:143)\n    at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\n    at org.gradle.internal.model.StateTransitionController.notInState(StateTransitionController.java:139)\n    at org.gradle.internal.build.DefaultBuildLifecycleController.withProjectsConfigured(DefaultBuildLifecycleController.java:114)\n    at org.gradle.internal.build.DefaultBuildToolingModelController.locateBuilderForTarget(DefaultBuildToolingModelController.java:57)\n    at org.gradle.internal.buildtree.DefaultBuildTreeModelCreator$DefaultBuildTreeModelController.lambda$locateBuilderForTarget$0(DefaultBuildTreeModelCreator.java:73)\n    at org.gradle.internal.build.DefaultBuildLifecycleController.withToolingModels(DefaultBuildLifecycleController.java:174)\n    at org.gradle.internal.build.AbstractBuildState.withToolingModels(AbstractBuildState.java:118)\n    at org.gradle.internal.buildtree.DefaultBuildTreeModelCreator$DefaultBuildTreeModelController.locateBuilderForTarget(DefaultBuildTreeModelCreator.java:73)\n    at org.gradle.internal.buildtree.DefaultBuildTreeModelCreator$DefaultBuildTreeModelController.locateBuilderForDefaultTarget(DefaultBuildTreeModelCreator.java:68)\n    at org.gradle.tooling.internal.provider.runner.DefaultBuildController.getTarget(DefaultBuildController.java:157)\n    at org.gradle.tooling.internal.provider.runner.DefaultBuildController.getModel(DefaultBuildController.java:101)\n    at org.gradle.tooling.internal.consumer.connection.ParameterAwareBuildControllerAdapter.getModel(ParameterAwareBuildControllerAdapter.java:39)\n    at org.gradle.tooling.internal.consumer.connection.UnparameterizedBuildController.getModel(UnparameterizedBuildController.java:113)\n    at org.gradle.tooling.internal.consumer.connection.NestedActionAwareBuildControllerAdapter.getModel(NestedActionAwareBuildControllerAdapter.java:31)\n    at org.gradle.tooling.internal.consumer.connection.UnparameterizedBuildController.findModel(UnparameterizedBuildController.java:97)\n    at org.gradle.tooling.internal.consumer.connection.NestedActionAwareBuildControllerAdapter.findModel(NestedActionAwareBuildControllerAdapter.java:31)\n    at org.gradle.tooling.internal.consumer.connection.UnparameterizedBuildController.findModel(UnparameterizedBuildController.java:81)\n    at org.gradle.tooling.internal.consumer.connection.NestedActionAwareBuildControllerAdapter.findModel(NestedActionAwareBuildControllerAdapter.java:31)\n    at org.gradle.tooling.internal.consumer.connection.UnparameterizedBuildController.findModel(UnparameterizedBuildController.java:66)\n    at org.gradle.tooling.internal.consumer.connection.NestedActionAwareBuildControllerAdapter.findModel(NestedActionAwareBuildControllerAdapter.java:31)\n    at org.jetbrains.plugins.gradle.model.ProjectImportAction.execute(ProjectImportAction.java:126)\n    at org.jetbrains.plugins.gradle.model.ProjectImportAction.execute(ProjectImportAction.java:42)\n    at org.gradle.tooling.internal.consumer.connection.InternalBuildActionAdapter.execute(InternalBuildActionAdapter.java:64)\n    at org.gradle.tooling.internal.provider.runner.AbstractClientProvidedBuildActionRunner$ActionAdapter.runAction(AbstractClientProvidedBuildActionRunner.java:131)\n    at org.gradle.tooling.internal.provider.runner.AbstractClientProvidedBuildActionRunner$ActionAdapter.beforeTasks(AbstractClientProvidedBuildActionRunner.java:99)\n    at org.gradle.internal.buildtree.DefaultBuildTreeModelCreator.beforeTasks(DefaultBuildTreeModelCreator.java:52)\n    at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$fromBuildModel$1(DefaultBuildTreeLifecycleController.java:75)\n    at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.lambda$runBuild$4(DefaultBuildTreeLifecycleController.java:106)\n    at org.gradle.internal.model.StateTransitionController.lambda$transition$5(StateTransitionController.java:166)\n    at org.gradle.internal.model.StateTransitionController.doTransition(StateTransitionController.java:247)\n    at org.gradle.internal.model.StateTransitionController.lambda$transition$6(StateTransitionController.java:166)\n    at org.gradle.internal.work.DefaultSynchronizer.withLock(DefaultSynchronizer.java:44)\n    at org.gradle.internal.model.StateTransitionController.transition(StateTransitionController.java:166)\n    at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.runBuild(DefaultBuildTreeLifecycleController.java:103)\n    at org.gradle.internal.buildtree.DefaultBuildTreeLifecycleController.fromBuildModel(DefaultBuildTreeLifecycleController.java:74)\n    at org.gradle.tooling.internal.provider.runner.AbstractClientProvidedBuildActionRunner.runClientAction(AbstractClientProvidedBuildActionRunner.java:43)\n    at org.gradle.tooling.internal.provider.runner.ClientProvidedPhasedActionRunner.run(ClientProvidedPhasedActionRunner.java:53)\n    at org.gradle.launcher.exec.ChainingBuildActionRunner.run(ChainingBuildActionRunner.java:35)\n    at org.gradle.internal.buildtree.ProblemReportingBuildActionRunner.run(ProblemReportingBuildActionRunner.java:49)\n    at org.gradle.launcher.exec.BuildOutcomeReportingBuildActionRunner.run(BuildOutcomeReportingBuildActionRunner.java:65)\n    at org.gradle.tooling.internal.provider.FileSystemWatchingBuildActionRunner.run(FileSystemWatchingBuildActionRunner.java:136)\n    at org.gradle.launcher.exec.BuildCompletionNotifyingBuildActionRunner.run(BuildCompletionNotifyingBuildActionRunner.java:41)\n    at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.lambda$execute$0(RootBuildLifecycleBuildActionExecutor.java:40)\n    at org.gradle.composite.internal.DefaultRootBuildState.run(DefaultRootBuildState.java:122)\n    at org.gradle.launcher.exec.RootBuildLifecycleBuildActionExecutor.execute(RootBuildLifecycleBuildActionExecutor.java:40)\n    at org.gradle.internal.buildtree.DefaultBuildTreeContext.execute(DefaultBuildTreeContext.java:40)\n    at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.lambda$execute$0(BuildTreeLifecycleBuildActionExecutor.java:65)\n    at org.gradle.internal.buildtree.BuildTreeState.run(BuildTreeState.java:53)\n    at org.gradle.launcher.exec.BuildTreeLifecycleBuildActionExecutor.execute(BuildTreeLifecycleBuildActionExecutor.java:65)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:61)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor$3.call(RunAsBuildOperationBuildActionExecutor.java:57)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:204)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$CallableBuildOperationWorker.execute(DefaultBuildOperationRunner.java:199)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:66)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$2.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:157)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.execute(DefaultBuildOperationRunner.java:59)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner.call(DefaultBuildOperationRunner.java:53)\n    at org.gradle.internal.operations.DefaultBuildOperationExecutor.call(DefaultBuildOperationExecutor.java:73)\n    at org.gradle.launcher.exec.RunAsBuildOperationBuildActionExecutor.execute(RunAsBuildOperationBuildActionExecutor.java:57)\n    at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.lambda$execute$0(RunAsWorkerThreadBuildActionExecutor.java:36)\n    at org.gradle.internal.work.DefaultWorkerLeaseService.withLocks(DefaultWorkerLeaseService.java:249)\n    at org.gradle.internal.work.DefaultWorkerLeaseService.runAsWorkerThread(DefaultWorkerLeaseService.java:109)\n    at org.gradle.launcher.exec.RunAsWorkerThreadBuildActionExecutor.execute(RunAsWorkerThreadBuildActionExecutor.java:36)\n    at org.gradle.tooling.internal.provider.continuous.ContinuousBuildActionExecutor.execute(ContinuousBuildActionExecutor.java:110)\n    at org.gradle.tooling.internal.provider.SubscribableBuildActionExecutor.execute(SubscribableBuildActionExecutor.java:64)\n    at org.gradle.internal.session.DefaultBuildSessionContext.execute(DefaultBuildSessionContext.java:46)\n    at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:100)\n    at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter$ActionImpl.apply(BuildSessionLifecycleBuildActionExecuter.java:88)\n    at org.gradle.internal.session.BuildSessionState.run(BuildSessionState.java:69)\n    at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:62)\n    at org.gradle.tooling.internal.provider.BuildSessionLifecycleBuildActionExecuter.execute(BuildSessionLifecycleBuildActionExecuter.java:41)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:63)\n    at org.gradle.tooling.internal.provider.StartParamsValidatingActionExecuter.execute(StartParamsValidatingActionExecuter.java:31)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:52)\n    at org.gradle.tooling.internal.provider.SessionFailureReportingActionExecuter.execute(SessionFailureReportingActionExecuter.java:40)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:47)\n    at org.gradle.tooling.internal.provider.SetupLoggingActionExecuter.execute(SetupLoggingActionExecuter.java:31)\n    at org.gradle.launcher.daemon.server.exec.ExecuteBuild.doBuild(ExecuteBuild.java:65)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.WatchForDisconnection.execute(WatchForDisconnection.java:39)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.ResetDeprecationLogger.execute(ResetDeprecationLogger.java:29)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.RequestStopIfSingleUsedDaemon.execute(RequestStopIfSingleUsedDaemon.java:35)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:78)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput$2.create(ForwardClientInput.java:75)\n    at org.gradle.util.internal.Swapper.swap(Swapper.java:38)\n    at org.gradle.launcher.daemon.server.exec.ForwardClientInput.execute(ForwardClientInput.java:75)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.LogAndCheckHealth.execute(LogAndCheckHealth.java:55)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.LogToClient.doBuild(LogToClient.java:63)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.EstablishBuildEnvironment.doBuild(EstablishBuildEnvironment.java:84)\n    at org.gradle.launcher.daemon.server.exec.BuildCommandOnly.execute(BuildCommandOnly.java:37)\n    at org.gradle.launcher.daemon.server.api.DaemonCommandExecution.proceed(DaemonCommandExecution.java:104)\n    at org.gradle.launcher.daemon.server.exec.StartBuildOrRespondWithBusy$1.run(StartBuildOrRespondWithBusy.java:52)\n    at org.gradle.launcher.daemon.server.DaemonStateCoordinator$1.run(DaemonStateCoordinator.java:297)\n    at org.gradle.internal.concurrent.ExecutorPolicy$CatchAndRecordFailures.onExecute(ExecutorPolicy.java:64)\n    at org.gradle.internal.concurrent.ManagedExecutorImpl$1.run(ManagedExecutorImpl.java:48)\nCaused by: org.gradle.api.UnknownTaskException: Task with name 'bootRunMainClassName' not found in project ':nc-application:nc-application-web-plugin:nc-application-runtime'.\n    at org.gradle.api.internal.tasks.DefaultTaskCollection.createNotFoundException(DefaultTaskCollection.java:102)\n    at org.gradle.api.internal.tasks.DefaultTaskCollection.createNotFoundException(DefaultTaskCollection.java:46)\n    at org.gradle.api.internal.DefaultNamedDomainObjectCollection.named(DefaultNamedDomainObjectCollection.java:360)\n    at org.gradle.api.internal.tasks.DefaultTaskCollection.named(DefaultTaskCollection.java:112)\n    at org.springdoc.openapi.gradle.plugin.OpenApiGradlePlugin$apply$1.execute(OpenApiGradlePlugin.kt:26)\n    at org.springdoc.openapi.gradle.plugin.OpenApiGradlePlugin$apply$1.execute(OpenApiGradlePlugin.kt:11)\n    at org.gradle.configuration.internal.DefaultUserCodeApplicationContext$CurrentApplication$1.execute(DefaultUserCodeApplicationContext.java:123)\n    at org.gradle.configuration.internal.DefaultListenerBuildOperationDecorator$BuildOperationEmittingAction$1.run(DefaultListenerBuildOperationDecorator.java:171)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:29)\n    at org.gradle.internal.operations.DefaultBuildOperationRunner$1.execute(DefaultBuildOperationRunner.java:26)\n</code></pre>\n<p>Gradle is configured in the following files :</p>\n<p>build.gradle(nc-template-service)</p>\n<pre><code>plugins {\n    id 'io.spring.dependency-management' version '1.1.0'\n    id 'info.solidsoft.pitest' version '1.9.0'\n    id 'com.github.ksoichiro.console.reporter' version '0.6.3' apply true\n    id 'com.avast.gradle.docker-compose' version '0.16.9'\n}\n\ndef coloredStatus = { def resultType -&gt;\n    String ansiReset = &quot;\\u001B[0m&quot;\n    String ansiGreen = &quot;\\u001B[32m&quot;\n    String ansiRed = &quot;\\u001B[31m&quot;\n    String ansiYellow = &quot;\\u001B[33m&quot;\n    def status\n    switch (resultType) {\n        case TestResult.ResultType.SUCCESS:\n            status = &quot;$ansiGreen $resultType $ansiReset&quot;\n            break\n        case TestResult.ResultType.FAILURE:\n            status = &quot;$ansiRed $resultType $ansiRed&quot;\n            break\n        default:\n            // TestResult.ResultType.SKIPPED\n            status = &quot;$ansiYellow $resultType $ansiReset&quot;\n            break\n    }\n    return status\n}\n\nsubprojects {\n    ext {\n        bootVersion = '3.0.3'\n        spockVersion = '2.1-groovy-3.0'\n        springDepManagementVersion = '1.0.11.RELEASE'\n        group = 'tech.company'\n        gatlingVersion = '3.7.6'\n        openApiVersion = '1.6.9'\n        springCloudVersion = '2021.0.3'\n        groovyVersion = '4.0.1'\n        kafkaVersion = '2.8.8'\n    }\n    repositories {\n        mavenCentral()\n    }\n\n    apply plugin: &quot;java&quot;\n    apply plugin: &quot;groovy&quot;\n    apply plugin: &quot;io.spring.dependency-management&quot;\n\n    apply from: rootProject.file('gradle/checkstyle.gradle')\n    apply from: rootProject.file('gradle/codenarc.gradle')\n    if (project.name.endsWith(&quot;runtime&quot;)) {\n        apply from: rootDir.absolutePath + &quot;/gradle/jacoco.gradle&quot;\n        apply from: rootDir.absolutePath + &quot;/gradle/pitest.gradle&quot;\n\n        // Jacoco external task dependencies config\n        test.finalizedBy jacocoTestReport, reportCoverage\n        jacocoTestReport.finalizedBy reportCoverage\n    }\n\n    sourceCompatibility = JavaVersion.VERSION_17\n    targetCompatibility = JavaVersion.VERSION_17\n\n    compileTestGroovy {\n        groovyClasspath = configurations.testCompileClasspath\n    }\n\n    dependencies {\n        implementation &quot;org.springframework.boot:spring-boot-starter-web:${bootVersion}&quot;\n        implementation &quot;org.springframework.boot:spring-boot-starter-validation:${bootVersion}&quot;\n        //    Swagger - Documentation\n        implementation &quot;org.springdoc:springdoc-openapi-ui:${openApiVersion}&quot;\n        implementation &quot;org.springframework.kafka:spring-kafka:${kafkaVersion}&quot;\n        //Upgrade to Spring Boot 3\n//        runtimeOnly(&quot;org.springframework.boot:spring-boot-properties-migrator&quot;)\n    }\n\n    //Setup dependencies for build\n    build.dependsOn checkstyleMain, checkstyleTest\n\n    tasks.withType(Test) {\n        useJUnitPlatform()\n        // Failfast on first failure by using -PfailFast='true'\n        failFast = project.hasProperty('failFast') &amp;&amp; project.property('failFast') == 'true'\n        testLogging {\n            afterSuite { desc, result -&gt;\n                if (desc.className) {\n                    String className = desc.className.split('\\\\.')[-1]\n                    String passedTests = &quot;${result.successfulTestCount}/${result.testCount}&quot;\n                    def duration = result.endTime - result.startTime\n                    logger.quiet &quot;[${className}]: ${passedTests} passed - ${duration}ms \\t [${coloredStatus(result.resultType)}]&quot;\n                }\n            }\n        }\n    }\n\n}\n\napply from: rootProject.file('gradle/infra.gradle')\n\n\n</code></pre>\n<p>build.gradle(:nc-application:nc-application-web-plugin:nc-application-runtime)</p>\n<pre><code>buildscript {\n    repositories {\n        mavenLocal()\n    }\n    dependencies {\n        classpath group: 'tech.company.gradle', name: 'nc-json-schema-generator-gradle-plugin', version: '1.0.4'\n    }\n}\n\nplugins {\n    id 'org.springframework.boot' version &quot;${bootVersion}&quot;\n    id 'io.spring.dependency-management' version '1.1.0'\n    id 'org.springdoc.openapi-gradle-plugin' version '1.3.4'\n    id 'tech.company.json.schema' version '1.0.4'\n}\n\n\ngroup = 'tech.company'\nversion = '1.0.0'\n\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\ndependencyManagement {\n    imports {\n        mavenBom &quot;org.springframework.cloud:spring-cloud-dependencies:${springCloudVersion}&quot;\n    }\n}\ndependencies {\n    //TODO: IMPORT ALL CHILD PROJECTS/PLUGINS HERE\n    implementation project(':nc-application:nc-application-web-plugin:nc-application-api')\n    implementation project(':nc-application:nc-separate-plugin:nc-separate-plugin-runtime')\n\n    implementation 'org.springframework.boot:spring-boot-starter-actuator'\n\n    implementation 'org.springframework.boot:spring-boot-starter-mail'\n    implementation 'org.springframework.boot:spring-boot-starter-oauth2-resource-server'\n    implementation 'org.springframework.boot:spring-boot-starter-quartz'\n    implementation 'org.springframework.boot:spring-boot-starter-security'\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    implementation 'org.springframework.boot:spring-boot-starter-data-redis'\n    implementation 'org.springframework.boot:spring-boot-starter-cache'\n\n    implementation 'org.keycloak:keycloak-spring-boot-starter:16.1.0'\n    implementation 'org.keycloak:keycloak-adapter-core:16.1.0'\n    implementation 'io.lettuce:lettuce-core:6.2.0.RELEASE'\n    implementation 'redis.clients:jedis'\n    implementation 'org.springframework.cloud:spring-cloud-starter-sleuth'\n    implementation 'org.flywaydb:flyway-core'\n\n    implementation 'com.trendyol:Jdempotent-core:1.1.0'\n\n    compileOnly 'org.projectlombok:lombok'\n    developmentOnly 'org.springframework.boot:spring-boot-devtools'\n\n    // https://mvnrepository.com/artifact/io.swagger.core.v3/swagger-annotations\n    compileOnly 'io.swagger.core.v3:swagger-annotations:2.2.0'\n\n\n    //Database\n    runtimeOnly 'com.h2database:h2'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    runtimeOnly 'org.postgresql:postgresql'\n\n\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    testImplementation 'org.springframework.security:spring-security-test'\n\n    testImplementation &quot;org.spockframework:spock-core:${spockVersion}&quot;\n    testImplementation &quot;org.spockframework:spock-spring:${spockVersion}&quot;\n\n    runtimeOnly(&quot;org.springframework.boot:spring-boot-properties-migrator&quot;)\n}\n\njsonSchema {\n    compileClasspath = sourceSets.main.compileClasspath\n    println sourceSets.main.compileClasspath\n    pretty true\n\n    include &quot;tech/company/**/messages/**.class&quot;\n}\n\nspringBoot {\n    mainClass = 'tech.company.template.application.core.TemplateCoreApplication'\n}\n\n//bootRunMainClassName = 'tech.company.template.application.core.TemplateCoreApplication'\n\ntasks.named('bootJar') {\n//    mainClass = 'tech.company.template.application.core.TemplateCoreApplication'\n    archiveFileName = &quot;application.jar&quot;\n}\n\n/*tasks.named('bootRun') {\n    mainClass = 'tech.company.template.application.core.TemplateCoreApplication'\n}*/\n\n\n</code></pre>\n"},{"tags":["java","open-telemetry"],"answers":[{"owner":{"user_id":10697769,"display_name":"James Moessis"},"up_vote_count":2,"is_accepted":false,"creation_date":1676520395,"answer_id":75467750,"body":"<p>Starting and ending a span does not make the rest of your application aware of the current <code>Context</code> - i.e. what span is currently &quot;active&quot;.</p>\n<p>If you didn't open the <code>Scope</code>, any code in your <code>//logic</code> section would not be able to know the <code>Context</code>, and so it can't know what the parent span is. You would end up with a bunch of individual spans that aren't linked together by a common trace.</p>\n<p>When you open a <code>Scope</code>, OpenTelemetry sets a <code>ThreadLocal</code>, and so any new span started within that scope (the <code>try</code> block) will be able to know what its parent span is.</p>\n<p>There are cases where you may have a <code>Context</code> but not an entire <code>Span</code>, so those concepts are separated for that reason (and I assume a handful of others reasons).</p>\n"}],"owner":{"user_id":5826061,"display_name":"Johann Heinzelreiter"},"view_count":160,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1676476854,"question_id":75462381,"body":"<p>When using the OTel Java API, manually instrumented code typically looks like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Inject\nTracer tracer;\n\npublic String instrumentedMethod() {\n  // ...\n  Span span = tracer.spanBuilder(&quot;interesting operation&quot;).startSpan();\n  span.setAttribute(&quot;custom.info&quot;, &quot;some info&quot;);\n  try (Scope scope = span.makeCurrent()) {\n    // logic\n  }\n  finally {\n    span.end();\n  }\n  // ...\n}\n</code></pre>\n<p>From my point of view, the lifespan of the <code>span</code> is defined twice:</p>\n<ul>\n<li><code>tracer.spanBuilder(&quot;...&quot;).startSpan()</code> and <code>span.end()</code> demarcate the beginning and the end of the span,</li>\n<li>but also the <code>span.makeCurrent()</code> and <code>scope.end()</code> does this in some way</li>\n</ul>\n<p>What's the purpose of <code>startSpan()</code>/<code>span.end()</code> in contrast to <code>span.makeCurrent()</code>/<code>scope.end()</code>. Can <code>scope</code> be omitted? Is <code>span.end()</code> superfluous when <code>scope</code> is used?</p>\n"},{"tags":["java","java-stream","collectors"],"comments":[{"owner":{"user_id":2837741,"display_name":"daniu"},"edited":false,"comment_id":133028397,"body":"I don&#39;t understand your problem. What you&#39;re trying is totally valid, it gives you a map containing the lists that you can then check the length of. What you show as your result isn&#39;t what your collected stream gives you."},{"owner":{"user_id":4045556,"display_name":"Kumar"},"edited":false,"comment_id":133028411,"body":"I want to update the incentive for all the employee in same group if any group have more the one employee.  For example: earlier group B have 15% incentive but in the group B have more then one employee so new incentive in new list 5% only.  So i want update the incentive property in the employee based on number of employee in same group have more then one."}],"answers":[{"owner":{"user_id":9513184,"display_name":"Unmitigated"},"up_vote_count":2,"is_accepted":true,"creation_date":1675893171,"answer_id":75392111,"body":"<p>You can first use <code>Collectors.groupingBy</code> to get the counts, then create a new <code>List</code> based on that.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Map&lt;String, Long&gt; groupFreq = listEmployees.stream().collect(Collectors.groupingBy(Employee::group, Collectors.counting()));\nList&lt;Employee&gt; result = listEmployees.stream().map(e -&gt; {\n    if (groupFreq.get(e.group()) &gt; 1) \n        return new Employee(e.empId(), e.name(), e.group(), e.salary(), 5);\n    return e;\n}).collect(Collectors.toList()); // or .toList() in Java 16+\n</code></pre>\n"}],"owner":{"user_id":4045556,"display_name":"Kumar"},"view_count":71,"up_vote_count":3,"accepted_answer_id":75392111,"answer_count":1,"score":3,"creation_date":1675892388,"question_id":75392019,"body":"<p>I have class Employee which have 3 fields.</p>\n<p>And I have a list of DTO objects.</p>\n<pre><code>`public class Employee {\n   private String empId;\n   private String name;\n   private String group;\n   private String salary;\n   private String incentive;         \n}`\n\n`List&lt;Employee&gt; listEmployees = new ArrayList&lt;&gt;(List.of(\n new Employee(&quot;101&quot;.&quot;Mark&quot;, &quot;A&quot;, 20000, 10),\n new Employee(&quot;102&quot;.&quot;Tom&quot;, &quot;B&quot;, 3000, 15),\n new Employee(&quot;103&quot;.&quot;Travis&quot;, &quot;C&quot;, 5000, 12),\n new Employee(&quot;104&quot;.&quot;Diana&quot;, &quot;D&quot;, 3500, 11),\n new Employee(&quot;105&quot;.&quot;Keith&quot;, &quot;B&quot;, 4200, 15),\n new Employee(&quot;106&quot;.&quot;Liam&quot;, &quot;D&quot;, 6500, 11),\n new Employee(&quot;107&quot;.&quot;Whitney&quot;, &quot;B&quot;, 6100, 15),\n new Employee(&quot;108&quot;.&quot;Tina&quot;, &quot;B&quot;,2900, 15)\n new Employee(&quot;109&quot;.&quot;Patrick&quot;, &quot;D&quot;, 3400, 11)\n ));`\n</code></pre>\n<p>I want to modify the <strong>incentive of 5%</strong> for all the employees in the same group, if there are more than one employee in a group. For example for above example there is more than one employee in the list of employee <em><strong>group B &amp; D</strong></em> so in this case I want to modify the incentive to 5% for all the employees in the same group. But there is only one employee for <em><strong>group A &amp; C</strong></em> so I don't modify anything for this employee.</p>\n<p>For example any company decides to give incentive to employee every year, but if a department has more than a specific number (Example 100) of employees, they want to update the incentive value for all the employees in that same department. But other departments that have a specific number((Example 100)) of employees are less, so the incentive doesn't change.</p>\n<p>I tried for example like :</p>\n<p><code>employeeList.stream() .collect(Collectors.groupingBy(Employee::group));</code></p>\n<p>So my result would be like below. (only A and C no need modify because only one record in this group)</p>\n<pre><code>`Employee(&quot;101&quot;.&quot;Mark&quot;, &quot;A&quot;, 20000, 10)\n Employee(&quot;102&quot;.&quot;Tom&quot;, &quot;B&quot;, 3000, 5),\n Employee(&quot;103&quot;.&quot;Travis&quot;, &quot;C&quot;, 5000, 12),\n Employee(&quot;104&quot;.&quot;Diana&quot;, &quot;D&quot;, 3500, 5),\n Employee(&quot;105&quot;.&quot;Keith&quot;, &quot;B&quot;, 4200, 5),\n Employee(&quot;106&quot;.&quot;Liam&quot;, &quot;D&quot;, 6500, 5),\n Employee(&quot;107&quot;.&quot;Whitney&quot;, &quot;B&quot;, 6100, 5),\n Employee(&quot;108&quot;.&quot;Tina&quot;, &quot;B&quot;,2900, 5)\n Employee(&quot;109&quot;.&quot;Patrick&quot;, &quot;D&quot;, 3400, 5)`\n</code></pre>\n"},{"tags":["java","android","android-studio","kotlin"],"comments":[{"owner":{"user_id":115145,"display_name":"CommonsWare"},"edited":false,"comment_id":132869949,"body":"You might be happier switching to the Project view via the selector above the tree. Right now, it looks like you are on the Android view."}],"answers":[{"owner":{"user_id":14577209,"display_name":"Maleesha97"},"up_vote_count":1,"is_accepted":false,"creation_date":1675187274,"answer_id":75301121,"body":"<p>If you are not happy with switching the project view,</p>\n<p>You can right click on the directory that you need to hide and select,</p>\n<p><code>Mark Directory as -&gt; excluded</code></p>\n<p>if you want to include a directory back, find the path of your excluded directory and,</p>\n<p><code>right click -&gt; Mark Directory as -&gt; Cancel Exclusion</code></p>\n"},{"owner":{"user_id":18090127,"display_name":"Khubaib Khan"},"up_vote_count":1,"is_accepted":false,"creation_date":1675187617,"answer_id":75301180,"body":"<p><strong>To hide generated folders in Android Studio:</strong></p>\n<p>Go to <strong>&quot;File&quot; &gt; &quot;Settings&quot;</strong>.\nNavigate to <strong>&quot;Editor&quot; &gt; &quot;File Types&quot;</strong>.\nScroll down to <strong>&quot;Ignore files and folders&quot;</strong>.\nAdd the folders you want to hide, such as <strong>&quot;build&quot;, &quot;gen&quot;,</strong> and <strong>&quot;out&quot;</strong>.\nClick <strong>&quot;Apply&quot;</strong> and <strong>&quot;OK&quot;.</strong></p>\n"}],"owner":{"user_id":5942579,"display_name":"Emmanuel Mtali"},"view_count":416,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1675177751,"question_id":75299152,"body":"<p>I am working on an android project but I see some of the auto-generated code from my file tree as you can see in the picture</p>\n<p>How can I hide them (the ones with green color)</p>\n<p><a href=\"https://i.stack.imgur.com/QHTIP.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/QHTIP.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","swing","localization","jfilechooser","customizing"],"comments":[{"owner":{"user_id":6746785,"display_name":"gthanop"},"edited":false,"comment_id":132854550,"body":"<a href=\"https://stackoverflow.com/q/74475473/6746785\">Another similar question</a> was asked earlier, so I just link to it here. As for the question I think the <code>UIManager</code> keys depend on the selected <a href=\"https://docs.oracle.com/javase/tutorial/uiswing/lookandfeel/index.html\" rel=\"nofollow noreferrer\">L&amp;F</a>. If that&#39;s true, but you also go with the <code>UIManager</code> solution, then you will be tied to the selected L&amp;F (which in its turn should mean the default cross platfrom L&amp;F since this is the reason I am assuming you are using Java in the first place)."}],"answers":[{"owner":{"user_id":12323075,"display_name":"alcan"},"up_vote_count":1,"is_accepted":false,"creation_date":1675103975,"answer_id":75288748,"body":"<p>You can find the full list (including FileChooser keys) in the first answer of this post: <a href=\"https://stackoverflow.com/questions/1951558/list-of-java-swing-ui-properties\">List of Java Swing UI properties?</a></p>\n<p>I think it will be enough setting only the properties ending in &quot;Text&quot;.</p>\n<p>AFAIK UIManager.put is just updating <a href=\"https://docs.oracle.com/javase/8/docs/api/javax/swing/UIDefaults.html\" rel=\"nofollow noreferrer\">UIDefaults</a> (the map that contains all the default names) so, as long as there is just one language available in the application, there is no need to use a ResourceBundle.</p>\n"},{"owner":{"user_id":21112318,"display_name":"Oscar Josefsson"},"up_vote_count":1,"is_accepted":false,"creation_date":1675329779,"answer_id":75320984,"body":"<p>So correct me if I am wrong.\nBut I think the answer is something like this:\nIf you want to use one of the languages that is supported for the Swing Component just set the correct Locale and you are done.</p>\n<p>If not it seems like using UIManager.put is the best way to go.</p>\n<p>I was hoping to find a resource bundle containing all of the text strings but now I do no longer think that such a thing exists.</p>\n<p>So my understanding at the moment is this:</p>\n<p>The JComponents such as the FileChooser are generalized Components that are meant to work on many different platforms and operative systems.</p>\n<p>And they use classes called &quot;Look &amp; Feel&quot; to get their final form depending on the intended Platform.</p>\n<p>This is where the UIManager comes in.</p>\n<p>It allows you to decide what &quot;Look &amp; Feel&quot; you want to use.</p>\n<p>So in my case it will use a look and feel called:\n&quot;com.sun.java.swing.plaf.windows.WindowsLookAndFeel&quot;.</p>\n<p>You can get this information using:</p>\n<pre><code>System.out.println(UIManager.getSystemLookAndFeelClassName()); \n</code></pre>\n<p>And I believe that the UIManager will create classes called UIDefaults using some algorithm.</p>\n<p>The UIDefaults will contain the values that gives the JComponents their &quot;Look &amp; Feel&quot; i.e. their appearance &amp; behaviour.</p>\n<p>But the UIDefaults classes are not pre-existing.\nThey are created based on setup.</p>\n<p>However I believe that they will get some of their data from a resource file that is not truly a ResourceBundle but at least extends the ResourceBundle class.\nBut this still does not contain all the necessary Strings to fully customize the FileChooser.\nThis link shows an example of these resource files that are specific to the Windows version (L&amp;F) of the FileChooser:\n<a href=\"https://code.yawk.at/java/6/com/sun/java/swing/plaf/windows/resources/\" rel=\"nofollow noreferrer\">https://code.yawk.at/java/6/com/sun/java/swing/plaf/windows/resources/</a></p>\n<p>So the data is apparently split up and it does not come from a single source.\nIt is collected from different sources and put into the UIDefaults class that works like a Database for the values.</p>\n<p>To sum it all up.\nThe best way to go might be to create a class that has a method to put all the String values into the UIDefaults using the UIManager.\nAnd I suppose you could prepare for internationalization by letting this method get it's strings from a resource bundle that you have created yourself.</p>\n<p>The best list of Keys seems to be this one:\n<a href=\"https://thebadprogrammer.com/swing-uimanager-keys/\" rel=\"nofollow noreferrer\">https://thebadprogrammer.com/swing-uimanager-keys/</a></p>\n<p>But unfortunately although seemingly exhausting there is still information missing.</p>\n<p>To fully customize all the Strings in the FileChooser in addition to the Keys you will find in this list you will also need to change the value of this Key:</p>\n<p>&quot;saveInLabelText&quot;.</p>\n<p>So these are all the String I changed and I believe they will customize most of the Strings for the Windows version of the FileChooser:</p>\n<pre><code>        //Strings for Open file-dialogue:   ***************************************************************************\n    \n    //The numbers in the comments refers to the order of appearance of the Stirng values in the Frame\n    \n    UIManager.put(&quot;FileChooser.openDialogTitleText&quot;,&quot;Open&quot;);                //1.        \n    UIManager.put(&quot;FileChooser.lookInLabelText&quot;,&quot;Look in:&quot;);                //2.\n    UIManager.put(&quot;FileChooser.fileNameLabelText&quot;,&quot;File name:&quot;);                //3.\n    UIManager.put(&quot;FileChooser.filesOfTypeLabelText&quot;,&quot;Files of type:&quot;);     //4.     \n    UIManager.put(&quot;FileChooser.openButtonText&quot;,&quot;Open&quot;);                 //5.            \n    UIManager.put(&quot;FileChooser.cancelButtonText&quot;, &quot;Cancel&quot;);                //6.        \n    UIManager.put(&quot;FileChooser.acceptAllFileFilterText&quot;,&quot;All Files&quot;);       //7.\n    \n    //End of Open file-dialogue ***************************************************************************\n    \n    //Strings for Save file-dialogue    ***************************************************************************\n    \n    UIManager.put(&quot;FileChooser.saveDialogTitleText&quot;,&quot;Save as&quot;);     //1.        \n    UIManager.put(&quot;FileChooser.saveInLabelText&quot;,&quot;Save in:&quot;);        //2.  This was not in the list but works!\n    // The strings with number 3 &amp; 4 are the same as the ones for the Open file-dialogue so you do not need to set them here.\n    UIManager.put(&quot;FileChooser.saveButtonText&quot;,&quot;Save&quot;);     //5.      \n</code></pre>\n"}],"owner":{"user_id":21112318,"display_name":"Oscar Josefsson"},"view_count":98,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1675099266,"question_id":75287956,"body":"<p>I want to know how I can make a JFileChooser in the Swedish language.\nUnfortunately it turns out that if I could use a JDK version 10 or earlier i could actually do this by creating a Locale object and make it the default.\nBut we are discouraged to use this old version for any new programs.\nBut from JDK version 11 and forward choosing Swedish Locale no longer works.</p>\n<p>So I have seen that people have been able to change individual strings for the FileChooser like in this example:\n<a href=\"https://coderanch.com/t/475470/java/customizing-JFIleChooser\" rel=\"nofollow noreferrer\">https://coderanch.com/t/475470/java/customizing-JFIleChooser</a>\nBut this feels unsatisfactory to me.\nAt least for as long as I do not know how I can learn about how I can find those Strings and where they are located.\nMaybe I will run into the same problem again with some other GUI component and then I still don't know what to do.</p>\n<p>This works with JDK v. 10 or earlier:</p>\n<pre><code>\n//This is in my Main:\n\n        Locale sverje = new Locale(&quot;sv&quot;, &quot;SE&quot;); //Creates a instance of Locale for Swedish, Sweden.\n        Locale.setDefault(sverje); //Sets this to default.\n\n//Then I call a class that opens a Frame and handles the FileChooser.\n\n</code></pre>\n<p>This is an example of modifying an individual string:</p>\n<pre><code>UIManager.put(&quot;FileChooser.cancelButtonText&quot;, &quot;Cancelar&quot;); //Changing cancel button text to Portugese\n</code></pre>\n<p>If I need to use this method it would be nice to know how to find the strings like I said before.</p>\n<p>It would also be nice to know what is going on when you &quot;put&quot; in the new String value like in the example.</p>\n<p>I believe that the JFileChooser somehow inherits the Strings in several steps, and that is what allows us to write &quot;FileChooser.cancelButtonText&quot; even if there actually is no &quot;cancelButtonText&quot; in the FileChooser class, rather (I'm guessing!) it inherits it from a so called ResourceBundle and then from there to the Localeclass and from there to some other class or classes before the FileChooser uses it.</p>\n<p>So is this a correct assumption and how can you trace the Key / name / location of those strings from the FileChooser class to where the actually are?</p>\n<p>Is it the ResourceBundle or the FileChooser or some other part that was changed since it stopped working from version 11?\nCan / should I try to make changes to the ResourceBundle to fix this in the most professional way?</p>\n"},{"tags":["java","android","bottomsheetdialogfragment"],"comments":[{"owner":{"user_id":9851608,"display_name":"Zain"},"edited":false,"comment_id":132760606,"body":"What do you mean by <code>empty activity</code>? which parent do you mean?"},{"owner":{"user_id":3815660,"display_name":"Yurii"},"edited":false,"comment_id":132762207,"body":"So, you want to have full-screen opened bottom sheet?"},{"owner":{"display_name":"user18148338"},"edited":false,"comment_id":132779916,"body":"@Zain I mean  Fullscreen"}],"answers":[{"owner":{"user_id":18433021,"display_name":"Almohsen Myya"},"up_vote_count":0,"is_accepted":false,"creation_date":1674659330,"answer_id":75235937,"body":"<p>You can set the height of the BottomSheetDialog to match_parent by adding the following line of code to your BottomSheetDialog class:</p>\n<pre><code>@Override\npublic void onStart() {\n    super.onStart();\n    View view = getView();\n    if (view != null) {\n        ViewGroup.LayoutParams params = view.getLayoutParams();\n        params.height = ViewGroup.LayoutParams.MATCH_PARENT;\n        view.setLayoutParams(params);\n    }\n}\n</code></pre>\n<p>This code overrides the onStart() method, which is called when the BottomSheetDialog is shown. It gets the view of the BottomSheetDialog, sets the height of the view to</p>\n<p>Alternatively, you can use this line in your onCreateView method:</p>\n<pre><code>getDialog().getWindow().setLayout(ViewGroup.LayoutParams.MATCH_PARENT, ViewGroup.LayoutParams.MATCH_PARENT);\n</code></pre>\n<p>This line sets the width and height of the bottom sheet dialog to match_parent, making it take up the full screen.</p>\n"},{"owner":{"user_id":3815660,"display_name":"Yurii"},"up_vote_count":1,"is_accepted":false,"creation_date":1674661050,"answer_id":75236281,"body":"<p>There is a tricky way, useful for me, to modify behavior and set window height to achieve the full-screen effect.</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class BottomSheetDialog : BottomSheetDialogFragment() {\n    \n    private var mBehavior: BottomSheetBehavior&lt;View&gt;? = null\n\n\n    override fun onStart() {\n        super.onStart()\n        mBehavior?.state = BottomSheetBehavior.STATE_EXPANDED\n        mBehavior?.peekHeight = 0\n    }\n    \n    fun onCreateView(\n        inflater: LayoutInflater,\n        @Nullable container: ViewGroup?,\n        @Nullable savedInstanceState: Bundle?\n    ): View {\n        //content in buttom_sheet_layout should be match_parent\n        return inflater.inflate(\n            R.layout.buttom_sheet_layout,\n            container, false\n        )\n    }\n\n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        super.onViewCreated(view, savedInstanceState)\n        setupBottomSheetFullScreen(view)\n    }\n\n    private fun setupBottomSheetFullScreen(view: View) {\n        view.updateLayoutParams {\n            height = getWindowHeight()\n        }\n        mBehavior = BottomSheetBehavior.from(view.parent as View)\n    }\n\n    private fun getWindowHeight(): Int {\n        return Resources.getSystem().displayMetrics.heightPixels\n    }\n}\n</code></pre>\n"},{"owner":{"user_id":9851608,"display_name":"Zain"},"up_vote_count":1,"is_accepted":true,"creation_date":1674760085,"answer_id":75250618,"body":"<p>To have full screen BottomSheetDialogFragment, you'd:</p>\n<ul>\n<li>Use a full screen window using <code>android:windowFullscreen</code> applied in a custom style by overriding  <code>getTheme()</code></li>\n<li>Use <code>STATE_EXPANDED</code> state of the bottom sheet to expand to the entire dialog window</li>\n<li>Set the bottomSheet layout to <code>MATCH_PARENT</code></li>\n<li>Optionally disable the bottom sheet <code>STATE_HALF_EXPANDED</code> using <code>behavior.setSkipCollapsed()</code></li>\n</ul>\n<p>Applying that to your class:</p>\n<pre><code>public class BottomSheetDialog extends BottomSheetDialogFragment {\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, @Nullable\n    ViewGroup container, @Nullable Bundle savedInstanceState) {\n        View v = inflater.inflate(R.layout.bottom_sheet_layout,\n                container, false);\n\n        Button algo_button = v.findViewById(R.id.algo_button);\n        Button course_button = v.findViewById(R.id.course_button);\n\n        algo_button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Toast.makeText(getActivity(),\n                                &quot;Algorithm Shared&quot;, Toast.LENGTH_SHORT)\n                        .show();\n                dismiss();\n            }\n        });\n\n        course_button.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                Toast.makeText(getActivity(),\n                                &quot;Course Shared&quot;, Toast.LENGTH_SHORT)\n                        .show();\n                dismiss();\n            }\n        });\n        \n        return v;\n    }\n\n\n    @Override\n    public int getTheme() {\n        return R.style.dialog_style;\n    }\n\n    @Override\n    public void onStart() {\n        super.onStart();\n        \n        View bottomSheet =\n                ((com.google.android.material.bottomsheet.BottomSheetDialog) \n                getDialog()).findViewById(com.google.android.material.R.id.design_bottom_sheet);\n\n        if (bottomSheet != null) {\n            // set the bottom sheet state to Expanded to expand to the entire window\n            BottomSheetBehavior.from(bottomSheet).setState(BottomSheetBehavior.STATE_EXPANDED);\n            // disable the STATE_HALF_EXPANDED state\n            BottomSheetBehavior.from(bottomSheet).setSkipCollapsed(true);\n            // set the bottom sheet height to match_parent\n            ViewGroup.LayoutParams layoutParams = bottomSheet.getLayoutParams();\n            layoutParams.height = WindowManager.LayoutParams.MATCH_PARENT;\n            bottomSheet.setLayoutParams(layoutParams);\n        }\n\n        // Make the dialog cover the status bar\n        getDialog().getWindow().setFlags(\n             WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS, \n             WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);\n\n\n    }\n\n}\n</code></pre>\n<p>And this is the custom style for full screen:</p>\n<pre><code>&lt;resources&gt;\n\n    &lt;style name=&quot;dialog_style&quot; parent=&quot;Theme.MaterialComponents.BottomSheetDialog&quot;&gt;\n        &lt;item name=&quot;android:windowFullscreen&quot;&gt;true&lt;/item&gt;\n    &lt;/style&gt;\n\n&lt;/resources&gt;\n</code></pre>\n<p>If you're using Material3, then extend the style from <code>Theme.Material3.DayNight.BottomSheetDialog</code> instead.</p>\n<p><strong>Edit:</strong></p>\n<blockquote>\n<p>Great ! but the top bar does not hide</p>\n</blockquote>\n<p>You can make the bottom sheet hide the status bar by setting the below window flag; the above class is updated with that:</p>\n<pre><code>// Make the dialog cover the status bar\ngetDialog().getWindow().setFlags(\n     WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS, \n     WindowManager.LayoutParams.FLAG_LAYOUT_NO_LIMITS);\n</code></pre>\n<p>Also for devices with notch you need to set <code>android:windowLayoutInDisplayCutoutMode</code> to the style:</p>\n<pre><code>&lt;resources&gt;\n\n    &lt;style name=&quot;dialog_style&quot; parent=&quot;Theme.MaterialComponents.BottomSheetDialog&quot;&gt;\n        &lt;item name=&quot;android:windowFullscreen&quot;&gt;true&lt;/item&gt;\n        &lt;item name=&quot;android:windowLayoutInDisplayCutoutMode&quot;&gt;shortEdges&lt;/item&gt;\n    &lt;/style&gt;\n\n&lt;/resources&gt;\n</code></pre>\n"}],"owner":{"display_name":"user18148338"},"view_count":300,"up_vote_count":3,"accepted_answer_id":75250618,"answer_count":3,"score":3,"creation_date":1674313062,"question_id":75194244,"body":"<p>I want the height of the bottom dialog to expend to match_parent (as empty activity)<br />\nHere is my code.</p>\n<p><strong><code>MainActivity</code></strong></p>\n<pre><code>import androidx.appcompat.app.AppCompatActivity;\nimport android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.widget.Button;\n\nimport com.google.android.material.bottomsheet.BottomSheetBehavior;\n\npublic class MainActivity extends AppCompatActivity {\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState)\n    {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n\n        Button OpenBottomSheet = findViewById(R.id.open_bottom_sheet);\n\n        OpenBottomSheet.setOnClickListener(\n                new View.OnClickListener() {\n                    @Override\n                    public void onClick(View v)\n                    {\n                        BottomSheetDialog bottomSheet = new BottomSheetDialog();\n                        bottomSheet.show(getSupportFragmentManager(),\n                                &quot;ModalBottomSheet&quot;);\n                    }\n        });\n     }\n}\n</code></pre>\n<p><strong><code>BottomSheetDialog</code></strong></p>\n<pre><code>import android.os.Bundle;\nimport android.view.LayoutInflater;\nimport android.view.View;\nimport android.view.ViewGroup;\nimport android.widget.Button;\nimport android.widget.Toast;\n\nimport androidx.annotation.Nullable;\n\nimport com.google.android.material.bottomsheet.BottomSheetBehavior;\nimport com.google.android.material.bottomsheet.BottomSheetDialogFragment;\n\npublic class BottomSheetDialog extends BottomSheetDialogFragment {\n\n    @Override\n    public View onCreateView(LayoutInflater inflater, @Nullable\n    ViewGroup container, @Nullable Bundle savedInstanceState)\n    {\n        View v = inflater.inflate(R.layout.buttom_sheet_layout,\n                container, false);\n\n        return v;\n    }\n\n}\n</code></pre>\n<p><a href=\"https://www.geeksforgeeks.org/modal-bottom-sheet-in-android-with-examples/\" rel=\"nofollow noreferrer\">Here is full code.</a></p>\n"},{"tags":["java","spring-boot","mocking","wiremock","stubbing"],"answers":[{"owner":{"user_id":16765942,"display_name":"Gabriela83"},"up_vote_count":1,"is_accepted":false,"creation_date":1673949902,"answer_id":75144784,"body":"<p>I managed to find a solution by doing this:\nI attributed a UUID to the stub</p>\n<pre><code>stubFor(post(urlPathEqualTo(getUploadEndpoint())).willReturn(aResponse().withStatus(HttpStatus.OK.value()))).withId(java.util.UUID.fromString(UUID)));\n</code></pre>\n<p>and I gathered all serve events happening on this particular endpoint</p>\n<pre><code>List&lt;ServeEvent&gt; allServeEvents getAllServeEvents(ServeEventQuery.forStubMapping(java.util.UUID.fromString(UUID)));\n// this list should contain one stub only\nassertThat(allServeEvents).hasSize(1);\nServeEvent request = allServeEvents.get(0);\nString body = request .getRequest().getBodyAsString();\n</code></pre>\n<p>Then I used XMLUnit to assert this body. Seems to do the job, but I'm open to any other solutions if available.</p>\n"},{"owner":{"user_id":1423361,"display_name":"Robert Elliot"},"up_vote_count":0,"is_accepted":false,"creation_date":1673966588,"answer_id":75148106,"body":"<p>You can use the API to <a href=\"https://wiremock.org/docs/verifying/\" rel=\"nofollow noreferrer\">verify that a request was made with the expected body</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static com.github.tomakehurst.wiremock.client.WireMock.*\n\nverify(\n    postRequestedFor(urlEqualTo(getUploadEndpoint()))\n        .withRequestBody(matchingXPath(&quot;your xpath here&quot;))\n);\n</code></pre>\n<p>See <a href=\"https://wiremock.org/docs/request-matching/#:%7E:text=CHILD_NODELIST_LENGTH%20CHILD_LOOKUP%20ATTR_NAME_LOOKUP-,XPath,-Deems%20a%20match\" rel=\"nofollow noreferrer\">WireMock / Request Matching / XPath</a> for examples of XPath matching.</p>\n"},{"owner":{"user_id":1423361,"display_name":"Robert Elliot"},"up_vote_count":1,"is_accepted":false,"creation_date":1673970877,"answer_id":75149002,"body":"<p>Alternatively, you can use the API to find requests that match a predicate:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static com.github.tomakehurst.wiremock.client.WireMock.*;\n\nList&lt;LoggedRequest&gt; requests = findAll(\n    postRequestedFor(urlEqualTo(getUploadEndpoint()))\n        .withRequestBody(matchingXPath(&quot;your xpath here&quot;))\n);\n</code></pre>\n<p>Then you can assert whatever you want about the matched requests.</p>\n"}],"owner":{"user_id":16765942,"display_name":"Gabriela83"},"view_count":539,"up_vote_count":3,"answer_count":3,"score":3,"creation_date":1673944163,"question_id":75143658,"body":"<p>Is there a way to capture the body of a post request that was stubbed with wiremock? I'm looking for something similar to Mockito's <code>ArgumentCaptor</code>.</p>\n<p>I have the following stub:</p>\n<pre><code>stubFor(post(urlPathEqualTo(getUploadEndpoint())).willReturn(().withStatus(HttpStatus.OK.value())));\n</code></pre>\n<p>I want to be able to see how the actual request was performed, get its body and assert it.</p>\n<p>I have tried by using <code>.withRequestBody(equalToXml(...))</code> in the stub, since the body is the String representation of an XML. This does not work for me, because <code>equalToXml</code> is too strict, not allowing free text without surrounding tags for example.</p>\n"},{"tags":["java","multithreading","collections","java-threads"],"answers":[{"owner":{"user_id":9025960,"display_name":"rgnt"},"up_vote_count":1,"is_accepted":false,"creation_date":1673786604,"answer_id":75125144,"body":"<ul>\n<li><code>LinkedBlockingQueue</code> is an <strong>optionally-bounded</strong> blocking queue based on linked nodes. Its capacity is not limited.</li>\n<li><code>ArrayBlockingQueue</code> is bounded blocking queue in which a fixed-sized array holds elements.</li>\n</ul>\n<p>In your case, there's no benefit anywhere. <code>ArrayBlockingQueue</code> may prove to be more efficient, as it uses fixed-size array in a single memory span.</p>\n<p>Difference between Queue and Deque is just it's mechanism. Queue is LIFO while Deque is FIFO.</p>\n<ul>\n<li>In LIFO the last task inserted is the last to be executed</li>\n<li>In FIFO the last task inserted is the first one to be executed</li>\n</ul>\n<p>Consider the following: You want your tasks to be executed as they come in? Use LIFO. You want your tasks to be executed the other way around? use FIFO.</p>\n"},{"owner":{"user_id":801894,"display_name":"Solomon Slow"},"up_vote_count":1,"is_accepted":false,"creation_date":1673800540,"answer_id":75126625,"body":"<p>The main benefit is when you're using the thread pool to execute some kind of a pipeline. As a rule of thumb, at each stage in a pipeline, the queue either is almost always empty (producer(s) tend(s) to be slower than the consumer(s)), or else the queue almost always is full (producer(s) tend(s) to be faster.)</p>\n<p>If the producer(s) is/are faster, and if the application is meant to continue running indefinitely, then you need a fixed-size, blocking queue to put &quot;back pressure&quot; on the producers. If there was no back pressure, then the queue would continue to grow until eventually, some bad thing happened. (e.g., process runs out of memory, or system breaks down because &quot;tasks&quot; spend too much time delayed in the queues.)</p>\n"}],"owner":{"user_id":4820101,"display_name":"samshers"},"view_count":248,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1673782671,"question_id":75124764,"body":"<p>I see from the java docs -</p>\n<pre><code>ThreadPoolExecutor(int corePoolSize,\n                              int maximumPoolSize,\n                              long keepAliveTime,\n                              TimeUnit unit,\n                              BlockingQueue&lt;Runnable&gt; workQueue,\n                              RejectedExecutionHandler handler)\n</code></pre>\n<p>Where  -</p>\n<pre><code>workQueue – the queue to use for holding tasks before they are executed. This queue will hold only the Runnable tasks submitted by the execute method.\n</code></pre>\n<p>Now java provides various type of blocking queues and the <a href=\"https://docs.oracle.com/javase/8/docs/api/java/util/concurrent/ThreadPoolExecutor.html\" rel=\"nofollow noreferrer\">java doc</a> clearly say when to use what type of queue with <code>ThreadPoolExecutor</code>-</p>\n<pre><code>Queuing\n    Any BlockingQueue may be used to transfer and hold submitted tasks. The use of this queue interacts with pool sizing:\n\n        If fewer than corePoolSize threads are running, the Executor always prefers adding a new thread rather than queuing.\n        If corePoolSize or more threads are running, the Executor always prefers queuing a request rather than adding a new thread.\n        If a request cannot be queued, a new thread is created unless this would exceed maximumPoolSize, in which case, the task will be rejected.\n\n    There are three general strategies for queuing:\n\n        Direct handoffs. A good default choice for a work queue is a SynchronousQueue that hands off tasks to threads without otherwise holding them. Here, an attempt to queue a task will fail if no threads are immediately available to run it, so a new thread will be constructed. This policy avoids lockups when handling sets of requests that might have internal dependencies. Direct handoffs generally require unbounded maximumPoolSizes to avoid rejection of new submitted tasks. This in turn admits the possibility of unbounded thread growth when commands continue to arrive on average faster than they can be processed.\n        Unbounded queues. Using an unbounded queue (for example a LinkedBlockingQueue without a predefined capacity) will cause new tasks to wait in the queue when all corePoolSize threads are busy. Thus, no more than corePoolSize threads will ever be created. (And the value of the maximumPoolSize therefore doesn't have any effect.) This may be appropriate when each task is completely independent of others, so tasks cannot affect each others execution; for example, in a web page server. While this style of queuing can be useful in smoothing out transient bursts of requests, it admits the possibility of unbounded work queue growth when commands continue to arrive on average faster than they can be processed.\n        Bounded queues. A bounded queue (for example, an ArrayBlockingQueue) helps prevent resource exhaustion when used with finite maximumPoolSizes, but can be more difficult to tune and control. Queue sizes and maximum pool sizes may be traded off for each other: Using large queues and small pools minimizes CPU usage, OS resources, and context-switching overhead, but can lead to artificially low throughput. If tasks frequently block (for example if they are I/O bound), a system may be able to schedule time for more threads than you otherwise allow. Use of small queues generally requires larger pool sizes, which keeps CPUs busier but may encounter unacceptable scheduling overhead, which also decreases throughput.\n</code></pre>\n<p><strong>Below is my Question -</strong></p>\n<p>I have seen code usages as below -</p>\n<pre><code>BlockingQueue&lt;Runnable&gt; workQueue = new LinkedBlockingDeque&lt;&gt;(90);\n\nExecutorService executorService = new ThreadPoolExecutor(1, 10, 30,\n                        TimeUnit.SECONDS, workQueue,\n                        new ThreadPoolExecutor.CallerRunsPolicy());\n</code></pre>\n<p>So, as the <code>Deque</code> (in the above code) is anyway of fixed capacity. What advantage am I getting with <code>LinkedBlockingDeque&lt;&gt;(90)</code> when compared to below -</p>\n<ol>\n<li><code>LinkedBlockingQueue&lt;&gt;(90) ;</code> - just want to know about <code>deque</code> advantage over <code>queue</code> in this case not in general. <strong>How the Executor will benefit for a <code>deque</code> over a <code>queue</code>.</strong></li>\n<li><code>ArrayBlockingQueue&lt;&gt;(90) ;</code> - (i see one can also mention fairness etc but this not of my current interest) <strong>So why not just use an Array over Deque (i.e when using a deque of fixed capacity).</strong></li>\n</ol>\n"},{"tags":["java","spring","spring-boot","formatting","freemarker"],"comments":[{"owner":{"user_id":8814332,"display_name":"Risalat Zaman"},"edited":false,"comment_id":132346059,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/5725892/how-to-capitalize-the-first-letter-of-word-in-a-string-using-java\">How to capitalize the first letter of word in a string using Java?</a>"}],"answers":[{"owner":{"user_id":13502779,"display_name":"Manuel Motta"},"up_vote_count":1,"is_accepted":false,"creation_date":1672765924,"answer_id":74996517,"body":"<p>You can create a method that formats the word you want. In the example my method <code>format</code> enters a String which no matter how it is structured, it returns it with the first one in uppercase and the others in lowercase. You can see that I enter the word &quot;ANIMAL&quot; and it would return &quot;Animal&quot;. It doesn't matter if the word is &quot;aNiMaL&quot;, it always returns the same.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Main {\n\n    public static void main(String[] args) {\n        String str = &quot;ANIMAL&quot;;\n        System.out.println(format(str)); // result: Animal\n    }\n    \n    public static String format(String input) {\n        return input.substring(0, 1).toUpperCase() + input.substring(1).toLowerCase();\n    }\n}\n</code></pre>\n<p>For use in FreeMarker:\nModify the getters in the attributes where you want to format the String.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class entity {\n    private String a;\n    public String getA() {\n        return format(this.a);\n    }\n}\n</code></pre>\n"},{"owner":{"user_id":880619,"display_name":"Jasper de Vries"},"up_vote_count":1,"is_accepted":false,"creation_date":1672769848,"answer_id":74997195,"body":"<p>You could combine <a href=\"https://freemarker.apache.org/docs/ref_builtins_string.html#ref_builtin_lower_case\" rel=\"nofollow noreferrer\"><code>?lower_case</code></a> and <a href=\"https://freemarker.apache.org/docs/ref_builtins_string.html#ref_builtin_cap_first\" rel=\"nofollow noreferrer\"><code>?cap_first</code></a>:</p>\n<pre><code>${&quot;ANIMAL&quot;?lower_case?cap_first}\n</code></pre>\n<p>Results in:</p>\n<pre><code>Animal\n</code></pre>\n"}],"owner":{"user_id":20796242,"display_name":"diho472"},"view_count":307,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1672764877,"question_id":74996318,"body":"<p>How do I format text in <strong>Apache FreeMarker</strong>?</p>\n<p>I would like to add a new formatter that would format the value (taken from json). For example, the text <code>ANIMAL</code>would be formatted to <code>Animal</code>(ideally it would also work if the word <code>animal</code>was lowercase and it would format it to <code>Animal</code>).</p>\n<p>I checked the available built-in functions for strings, but I can't find this particular one. <a href=\"https://freemarker.apache.org/docs/ref_builtins_string.html\" rel=\"nofollow noreferrer\">https://freemarker.apache.org/docs/ref_builtins_string.html</a></p>\n"},{"tags":["java","regex"],"comments":[{"owner":{"user_id":10871900,"display_name":"dan1st"},"edited":false,"comment_id":132335974,"body":"What about <code>\\&quot;[^\\\\s]\\&quot;</code> instead of <code>\\&quot;.*\\&quot;</code>?"},{"owner":{"user_id":2795805,"display_name":"Rajesh2389"},"edited":false,"comment_id":132335998,"body":"one more Space can present inside the text field"},{"owner":{"user_id":2795805,"display_name":"Rajesh2389"},"edited":false,"comment_id":132336050,"body":"@Wiktor Stribizew, I&#39;m adding the PatternMatching tag as I&#39;m looking for certain patterns in the Line of String using Java Pattern class."},{"owner":{"user_id":10871900,"display_name":"dan1st"},"edited":false,"comment_id":132336075,"body":"My fault. I meant <code>\\&quot;[^\\&quot;]\\&quot;</code>."},{"owner":{"user_id":3832970,"display_name":"Wiktor Stribiżew"},"edited":false,"comment_id":132336110,"body":"Regex is what you are looking for, not pattern matching. See tag description where it is written that you should not use it if regex is what you mean."},{"owner":{"user_id":2795805,"display_name":"Rajesh2389"},"edited":false,"comment_id":132336147,"body":"dan1st but that doesn&#39;t solve the digit problem I have mentioned. If the third subfield is digit still it is flagging as invalid"}],"answers":[{"owner":{"user_id":3832970,"display_name":"Wiktor Stribiżew"},"up_vote_count":2,"is_accepted":true,"creation_date":1672750940,"answer_id":74993731,"body":"<p>You can use</p>\n<pre class=\"lang-none prettyprint-override\"><code>^(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+)(?:\\s(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+))*$\n</code></pre>\n<p>If you are using it to extract lines from a multiline document:</p>\n<pre class=\"lang-none prettyprint-override\"><code>(?m)^(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\d+)(?:\\h(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\d+))*\\r?$\n</code></pre>\n<p>See the <a href=\"https://regex101.com/r/8CtMBZ/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n<p><em>Details</em>:</p>\n<ul>\n<li><code>^</code> - start of a string (line, if you use <code>(?m)</code> or <code>Pattern.MULTILINE</code>)</li>\n<li><code>(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+)</code> - either <code>&quot;</code> + zero or more chars other than <code>&quot;</code> + <code>&quot;</code>, or one or more digits</li>\n<li><code>(?:\\s(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+))*</code> - zero or more sequences of\n<ul>\n<li><code>\\s</code> - a single whitespace</li>\n<li><code>(?:\\&quot;[^\\&quot;]*\\&quot;|\\d+)</code> - either <code>&quot;</code> + zero or more chars other than <code>&quot;</code> + <code>&quot;</code>, or one or more digits</li>\n</ul>\n</li>\n<li><code>$</code> - end of string</li>\n</ul>\n<p>The second pattern contains <code>\\h</code> instead of <code>\\s</code> to only match horizontal whitespaces, <code>[^\\&quot;\\n\\r]</code> matches any char other than <code>&quot;</code>, line feed and carriage return.</p>\n<p>In Java:</p>\n<pre class=\"lang-java prettyprint-override\"><code>String pattern = &quot;^(?:\\&quot;[^\\&quot;]*\\&quot;|\\\\d+)(?:\\\\s(?:\\&quot;[^\\&quot;]*\\&quot;|\\\\d+))*$&quot;;\nString pattern = &quot;(?m)^(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\\\d+)(?:\\\\h(?:\\&quot;[^\\&quot;\\n\\r]*\\&quot;|\\\\d+))*\\r?$&quot;;\n</code></pre>\n"}],"owner":{"user_id":2795805,"display_name":"Rajesh2389"},"view_count":112,"up_vote_count":3,"accepted_answer_id":74993731,"answer_count":1,"score":3,"creation_date":1672729558,"question_id":74990010,"body":"<p>I have to validate the lines from a text file. The line would be something like below.</p>\n<p><code>&quot;Field1&quot; &quot;Field2&quot; &quot;Field3 Field_3.1 Field3.2&quot; 23 3445 &quot;Field5&quot;.</code></p>\n<p>The delimiter here is a single Space(\\s). If more than one space present outside of text fields, then the line should be rejected. For example,</p>\n<p><strong>Note :</strong> \\s would be present as literal space and not as \\s in the line. For easy reading I mentioned space as \\s</p>\n<p><strong>Invalid:</strong>\n<code>&quot;Field1&quot;\\\\s\\\\s&quot;Field2&quot; &quot;Field3 Field_3.1 Field3.2&quot; 23\\\\s\\\\s3445 &quot;Field5&quot;.</code> //two or more spaces between &quot;Field1&quot; and &quot;Field2&quot; or numeric fields 23  3445. \\s would be present as literal space and not as \\s</p>\n<p><strong>Valid</strong>\n<code>&quot;Field1\\\\s\\\\s&quot; &quot;\\\\s\\\\sField2&quot; &quot;Field3\\\\s\\\\sField_3.1\\\\s\\\\sField3.2&quot; 23 3445 &quot;Field5&quot;.</code> //two or more spaces within third field &quot;Field3  Field_3.1  Field3.2&quot; or at the end/beginning of any field as in first two fields.</p>\n<p>I created a Pattern as below to validate the Spaces in between. But it's not working as expected when there're more than two Strings and a numeric  present inside a Field wrapped by Double quotes like <code>&quot;Field3  Field_3.1  123&quot;</code></p>\n<pre><code>public class SpaceValidation\n{\n   public static void main(String ar[])\n   {\n       String spacePattern_1 = &quot;[\\&quot;^\\\\n]\\\\s{2,}?(\\&quot;.*\\&quot;)|\\\\s\\\\s\\\\d|\\\\d\\\\s\\\\s&quot;;\nString line1 = &quot;Field3  Field_3.1  &quot;; // valid and pattern doesn't find it as invalid - Works as expected\nString line2 = &quot;Field3  Field_3.1  123&quot;;//Valid and but pattern find it as invalid - Not working as expected.\n      Pattern pattern = Pattern.compile(spacePattern_1);\n      Matcher matLine1 = pattern.matcher(line1);\n      Matcher matLine2 = pattern.matcher(line2);\n      if(matLine1.find())\n      {\n        sysout(&quot;Invalid Line1&quot;);\n      }\n\n      if(matLine2.find())\n      {\n        sysout(&quot;Invalid Line2&quot;);\n      }\n}\n</code></pre>\n<p>I have tried another pattern given below. But due to backtracking issues reported I have to avoid the below pattern, Even this one is not working when there are more than two subfields present two or more spaces in a line.</p>\n<pre><code>(\\&quot;.*\\&quot;)\\\\s{2,}?(\\&quot;.*\\&quot;)|\\\\s\\\\s\\\\d|\\\\d\\\\s\\\\s\n\n // * or . shouldn't be present more than once in the same condition to prevent backtracking, hence I have to use negation of \\\\n in the above code\n</code></pre>\n<p>Kindly let me know how I could resolve this using pattern for fields such as <code>&quot;field3  field3.1  123&quot;</code>, which is a valid field. Thanks in advance.</p>\n<p><strong>EDIT:</strong>\nAfter little bit tinkering, I narrowed down the issue to digit. The lines becomes invalid only if the third subfield is numeric (<code>&quot;Field 3  Field3.1  123&quot;</code>). For alphabets its working fine.</p>\n<p>Here in the pattern <code>\\\\s\\\\s\\\\d</code> seems to be the culprit. It's that condition that flags the third subfield as invalid(numeric subfield 123). But I need that to validate numeric fields present outside of the DoubleQuotes.</p>\n"},{"tags":["java","spring","maven","asciidoctor","maven-jar-plugin"],"answers":[{"owner":{"user_id":8923778,"display_name":"Bacem W."},"up_vote_count":0,"is_accepted":false,"creation_date":1672652768,"answer_id":74980894,"body":"<p>you are not including your generated files directory to the classpath.\ntry to add this ,</p>\n<pre><code>&lt;build&gt;\n    &lt;resources&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;${basedir}/src/main/resources&lt;/directory&gt;\n        &lt;/resource&gt;\n        &lt;resource&gt;\n            &lt;directory&gt;${project.build.directory}/classes/generated-docs/api-gateway&lt;/directory&gt;\n        &lt;/resource&gt;\n    &lt;/resources&gt;\n    ...\n&lt;/build&gt;\n</code></pre>\n<p>${basedir}/src/main/resources ==&gt; chage it with the right directory</p>\n"},{"owner":{"user_id":3426309,"display_name":"Andrey B. Panfilov"},"up_vote_count":2,"is_accepted":true,"creation_date":1672790929,"answer_id":74999812,"body":"<p><code>asciidoctor</code> internally uses <code>JRuby</code>, which in turn had related issue when running on <code>M1</code>: <a href=\"https://github.com/jruby/jruby/issues/6983\" rel=\"nofollow noreferrer\">Wrong file mode/permission when opening/creating a new file [Apple Silicon, arm64, aarch64]</a></p>\n<p>according to <a href=\"https://github.com/jruby/jruby/pull/6985\" rel=\"nofollow noreferrer\">Update JNR for Apple Silicon varargs support #6985</a> you need to move on <code>JRuby 9.2.21.0</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n    &lt;groupId&gt;org.asciidoctor&lt;/groupId&gt;\n    &lt;artifactId&gt;asciidoctor-maven-plugin&lt;/artifactId&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.jruby&lt;/groupId&gt;\n            &lt;artifactId&gt;jruby&lt;/artifactId&gt;\n            &lt;!-- &lt;artifactId&gt;jruby-complete&lt;/artifactId&gt; --&gt;\n            &lt;version&gt;9.2.21.0&lt;/version&gt;\n        &lt;/dependency&gt;\n....\n</code></pre>\n"}],"owner":{"user_id":11143225,"display_name":"Glup3"},"view_count":99,"up_vote_count":3,"accepted_answer_id":74999812,"answer_count":2,"score":3,"creation_date":1672650050,"question_id":74980525,"body":"<p>Im creating an index.htm file with the asciidoctor-maven-plugin:2.2.2 and I get a build error, because the created file has no read permissions. <code>mvn clean install</code></p>\n<p><a href=\"https://i.stack.imgur.com/BL5KZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BL5KZ.png\" alt=\"build failure stacktrace\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/ZEta4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ZEta4.png\" alt=\"file permissions\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/VfETn.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VfETn.png\" alt=\"pom.xml\" /></a></p>\n<p><code>mvn clean install</code> works on other machines. I am on a M1 Macbook Pro. I have tried to change Java version (currently using 17 Zulu) and Maven version (3.8.6), but no luck.</p>\n"},{"tags":["java","directory","filewalker"],"comments":[{"owner":{"user_id":16320675,"display_name":"user16320675"},"edited":false,"comment_id":134441989,"body":"are you sure the problem is not inside <code>distributionFolder.readingDirectory</code>? <i>Posted</i> code seems OK, but it would be easier to debug if we had a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a>..."},{"owner":{"user_id":84538,"display_name":"jon hanson"},"edited":false,"comment_id":134442339,"body":"What you have provided is not a minimal example - all of the thread pool stuff is irrelevant and should be removed."},{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"edited":false,"comment_id":134442362,"body":"@jon-hanson Ok I am editing right now"},{"owner":{"user_id":5772882,"display_name":"Ole V.V."},"edited":false,"comment_id":134442493,"body":"I have not understood why your code would read the <code>1111</code> folder twice, Have you?"},{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"edited":false,"comment_id":134442620,"body":"@OleV.V. I just edited the question and my therory is: when I pass the path of the directory to the &quot;DistributionFolder&quot; class is going to the sub folders as well, and I want to prevent that."},{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"edited":false,"comment_id":134442629,"body":"@jon-hanson ready, I edited the question"},{"owner":{"user_id":16320675,"display_name":"user16320675"},"edited":false,"comment_id":134442686,"body":"still not clear, do you eventually want to limit the maximum depth that the <code>walk</code> is going? Maybe using the 3-argument <code>walk()</code> method (2nd argument is max depth) (e.g. it does not <i>walk</i> over <code>1111</code> since it already got <code>55354....</code> with its conetent)"},{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"edited":false,"comment_id":134442714,"body":"@user16320675 Yes I want to put a limit to the depth but I did not know how to explain this, thank you. The 3-argument as the &quot;walkFileTree()&quot;?"},{"owner":{"user_id":16320675,"display_name":"user16320675"},"edited":false,"comment_id":134442734,"body":"link to documentation -&gt; <a href=\"https://docs.oracle.com/en/java/javase/20/docs/api/java.base/java/nio/file/Files.html#walk(java.nio.file.Path,int,java.nio.file.FileVisitOption...)\" rel=\"nofollow noreferrer\"><code>Files.walk(Path, int, FileVisitOption...)</code></a> || BTW <code>File</code> has a <code>toPath()</code>"},{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"edited":false,"comment_id":134442884,"body":"@user16320675 Thank you so much, I learned something you, sorry for my silly question"},{"owner":{"user_id":16320675,"display_name":"user16320675"},"edited":false,"comment_id":134443201,"body":"it would be nice if you complement the question (adding the depth limit requirement) - maybe someone can write an answer (even you)"}],"answers":[{"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"up_vote_count":1,"is_accepted":false,"creation_date":1683977950,"answer_id":76242529,"body":"<p>In order limit the maximum depth that the walk is going I used the &quot;Files.walk&quot; with all 3 parameters. I used in the &quot;DistributionFolder&quot; class for that try and catch block:</p>\n<pre><code> try (Stream&lt;Path&gt; paths = Files.walk(files.toPath(),1, FileVisitOption.FOLLOW_LINKS)){\n</code></pre>\n"}],"owner":{"user_id":15368642,"display_name":"ilie alexandru"},"view_count":47,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1683899533,"question_id":76237002,"body":"<p>I am stuck regarding reading only the directories. I want to iterate a folder and see all the subdirectories that the folder contains. If the subdirectory contains txt files, then send it to the &quot;DistributionFolder&quot; class which will read that subdirectory. Now is reading a subdirectory, for instance:</p>\n<p><a href=\"https://i.stack.imgur.com/SUYpg.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/SUYpg.png\" alt=\"enter image description here\" /></a></p>\n<p>Can read the content of &quot;check&quot;, which is a subdirectory of the &quot;Alex&quot; directory and both subdirectories of &quot;check&quot;, but unfortunately, if I will add another directory, for instance:</p>\n<p><a href=\"https://i.stack.imgur.com/bVPR6.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/bVPR6.png\" alt=\"enter image description here\" /></a></p>\n<p>The content of &quot;1111&quot; directory will be read it twice.</p>\n<p>This is the code that splits the directory and subdirectories:</p>\n<pre><code> private boolean readingDirectory(File files, WriteDatasetInfo writeDatasetInfo) throws IOException, InterruptedException {\n\n\n\n        List&lt;Future&gt; futures = new ArrayList&lt;&gt;();\n\n        // is getting the number of available processes\n        int nrThreads = Runtime.getRuntime().availableProcessors();\n\n        // Creating a ExecutorService pool with the number of available processes\n        ExecutorService pool = Executors.newFixedThreadPool(nrThreads);\n\n        //Traverse the dataset using File walker\n\n        try (Stream&lt;Path&gt; paths = Files.walk(Paths.get(String.valueOf(files)))){\n            //filter the file to be a regular file\n            paths.filter(Files ::isDirectory)\n                    .filter(mainReader::isNotTheDefault)\n            // for each file submit the work to the ExecutorService pool to be executed and add the videoNumber\n            .forEach(\n                path -&gt; {\n                    DistributionFolder distributionFolder = new DistributionFolder(this.directory,this.videoNumber);\n                    try {\n                        System.out.println(path);\n                        this.videoNumber=distributionFolder.readingDirectory(path.toFile(),writeDatasetInfo);\n                    } catch (IOException e) {\n                        throw new RuntimeException(e);\n                    } catch (InterruptedException e) {\n                        throw new RuntimeException(e);\n                    }\n                });\n\n        }catch (Exception e){\n            throw new RuntimeException(e);\n        }\n        finally {\n            pool.shutdown();\n            while (!pool.awaitTermination(24L, TimeUnit.HOURS)) {\n                System.out.println(&quot;Not yet. Still waiting for termination&quot;);\n            }\n            Regression.FullRegression(this.directory);\n            return true;\n        }\n    }\n\n    private static boolean isNotTheDefault(Path path){\n        if(!defaultFile.equals(path.toFile())){\n            return true;\n        }\n        return false;\n    }\n</code></pre>\n<p>This is the &quot;DistributionFolder&quot; class</p>\n<pre><code>protected final String directory;\nprotected int videoNumber;\n\n\npublic DistributionFolder(String directory,int videoNumber){\n    this.directory=directory;\n    this.videoNumber=videoNumber;\n}\n\n\nprotected int readingDirectory(File files, WriteDatasetInfo writeDatasetInfo) throws IOException, InterruptedException {\n\n    List&lt;Future&gt; futures = new ArrayList&lt;&gt;();\n\n    // is getting the number of available processes\n    int nrThreads = Runtime.getRuntime().availableProcessors();\n\n    // Creating a ExecutorService pool with the number of available processes\n    ExecutorService pool = Executors.newFixedThreadPool(nrThreads);\n\n    //Traverse the dataset using File walker\n    try (Stream&lt;Path&gt; paths = Files.walk(Paths.get(String.valueOf(files)))){\n        //filter the file to be a regular file\n        paths.filter(Files::isRegularFile)\n                // apply the custom filter in order to read only txt files\n                .filter(DistributionFolder::isTXT)\n                // for each file submit the work to the ExecutorService pool to be executed and add the videoNumber\n                .forEach(\n                        path -&gt; {\n\n                            String[] strPath = String.valueOf(path).split(&quot;/&quot;);\n\n                            pool.submit(new Reader(String.valueOf(path), videoNumber, this.directory, writeDatasetInfo,strPath[strPath.length-2]));\n                            this.videoNumber++;\n\n                        });\n\n    }catch (Exception e){\n        throw new RuntimeException(e);\n    }\n    finally {\n        // wait fo the execution of the pool to be done\n        pool.shutdown();\n        while (!pool.awaitTermination(24L, TimeUnit.HOURS)) {\n            System.out.println(&quot;Not yet. Still waiting for termination&quot;);\n        }\n        String[] splitFile = files.toString().split(&quot;/&quot;);\n\n        MaintainedForRegression.SendMapForRegression(splitFile[splitFile.length-1],this.directory);\n        return this.videoNumber;\n    }\n}\n\nprivate static boolean isTXT(Path path) {\n    String pathFile = String.valueOf(path);\n    String[] slittedpath = pathFile.split(&quot;/&quot;);\n    String[] splittedname = slittedpath[slittedpath.length - 1].split(&quot;\\\\.&quot;);\n    return splittedname[splittedname.length - 1].equals(&quot;txt&quot;);\n}\n</code></pre>\n<p>This is the output when a new directory is inside of the first subdirectory of the check directory:</p>\n<p><a href=\"https://i.stack.imgur.com/z37No.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/z37No.png\" alt=\"enter image description here\" /></a></p>\n<p>This is an example that works perfectly fine, when the is no other subdirectory:</p>\n<p><a href=\"https://i.stack.imgur.com/Jw5qk.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Jw5qk.png\" alt=\"enter image description here\" /></a></p>\n<p>The output:</p>\n<p><a href=\"https://i.stack.imgur.com/34IrI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/34IrI.png\" alt=\"enter image description here\" /></a></p>\n<p>I edited the question to add more context.</p>\n<p>My theory is: when I pass the path of the directory to the &quot;DistributionFolder&quot; will go to the subdirectories as well</p>\n<p>If you have any suggestion please let me know. Thanks!</p>\n"},{"tags":["java","spring","spring-security","spring-webflux"],"answers":[{"owner":{"user_id":6933090,"display_name":"Yevhenii Semenov"},"up_vote_count":1,"is_accepted":true,"creation_date":1684105451,"answer_id":76250029,"body":"<blockquote>\n<p>Is it the right way to do what I intended to do?</p>\n</blockquote>\n<p>Actually, this is not the best idea in a reactive application. Your case is a bit tricky because <code>ReactiveAuthorizationManager</code> is often used to perform authorization based on the data like user roles, claims, etc., not the request body. The tricky moment here is that reading the request body for authorization means you are consuming the <code>Flux&lt;DataBuffer&gt;</code>. Since this Flux can only be consumed once, you need to cache it and forward the cache to the controller. And this is exactly what you've already done in your example.</p>\n<p>The problem here is that such caching can negate some benefits of WebFlux. For example, in this context, it makes caching involves storing the entire request body in memory so that it can be read multiple times. However, one of the benefits of using a stream-based, non-blocking I/O model like WebFlux is the ability to handle data by processing it in chunks as they arrive (that's why you have <code>Flux&lt;DataBuffer&gt;</code> and not <code>Mono&lt;DataBuffer&gt;</code>). Caching it may affect application performance, especially with large request bodies. Also, caching isn't an option if the request body is a data stream. A stream might not be available all at once, so you can't cache it.</p>\n<p>That's why it is not recommended to do what you want to do. Better to move all needed authorization context to headers and check headers.</p>\n<blockquote>\n<p>Is there any chance that the class BodyInterceptingRequest is buggy and in case of the concurrent hit, it provides misinformation? I mean, if there are two callers, caller1 and caller2 and they invoke the API with request1 and request2 respectively, then the request2 gets processed for caller1 and the request1 gets processed for caller2.</p>\n</blockquote>\n<p>However, if you understand all cons but want to proceed with such a solution, the general implementation is correct. It is unlikely that you will encounter the situation you described because you create a new instance of <code>BodyInterceptingRequest</code> on each request, and you have your own &quot;exchange&quot; for each request. Also, <code>WebFilter</code>s executed sequentially, so there is no race condition should be in <code>BodyInterceptingRequest</code>.</p>\n<blockquote>\n<p>Is there any chance of memory leak through the implementation of BodyInterceptingRequest?</p>\n</blockquote>\n<p>Overall, I don't see possible memory leaks here. Let's take a closer look at the important places:</p>\n<ol>\n<li>readBody method</li>\n</ol>\n<p>According to the <code>DataBufferUtils.join</code> documentation:</p>\n<pre><code>the given data buffers do not have to be released. They will be released as part of the returned composite.\n</code></pre>\n<p>This is what you've done in <code>DataBufferUtils.release(dataBuffer)</code>.</p>\n<ol start=\"2\">\n<li>getBody method</li>\n</ol>\n<p>Since you are using <code>DefaultDataBufferFactory</code>, there is no need to release allocated data buffers. They will be garbage collected. But actually, I don't see a reason to allocate new memory here. I think you can replace <code>bufferFactory.allocateBuffer</code> with <code>bufferFactory.wrap(bytes)</code>.</p>\n"}],"owner":{"user_id":576758,"display_name":"Tapas Bose"},"view_count":94,"up_vote_count":3,"accepted_answer_id":76250029,"answer_count":1,"score":3,"creation_date":1683600723,"question_id":76205536,"body":"<p>I need to extract the request body from the <code>ServerHttpRequest</code> in my custom implementation of <code>ReactiveAuthorizationManager&lt;AuthorizationContext&gt;</code>. The body payload contains an <code>id</code> of an entity. I need to check the request's authorization to see if the requester can access the entity.</p>\n<p>To implement it I created a custom <code>ServerHttpRequestDecorator</code>:</p>\n<pre><code>public class BodyInterceptingRequest extends ServerHttpRequestDecorator {\n\n    private StringBuilder body = null;\n\n    public BodyInterceptingRequest(ServerHttpRequest delegate) {\n        super(delegate);\n    }\n\n    public Flux&lt;DataBuffer&gt; getBody() {\n        if (body == null) {\n            return super.getBody();\n        }\n\n        DataBufferFactory bufferFactory = new DefaultDataBufferFactory();\n        byte[] bytes = getRequestBody().getBytes(StandardCharsets.UTF_8);\n        DataBuffer buffer = bufferFactory.allocateBuffer(bytes.length);\n        return Flux.just(buffer.write(bytes));\n    }\n\n    public Mono&lt;String&gt; readBody() {\n        // @formatter:off\n        return DataBufferUtils.join(super.getBody())\n            .map((DataBuffer dataBuffer) -&gt; {\n                byte[] bytes = new byte[dataBuffer.readableByteCount()];\n                dataBuffer.read(bytes);\n                DataBufferUtils.release(dataBuffer);\n                return bytes;\n            })\n            .defaultIfEmpty(new byte[0])\n            .flatMap(bytes -&gt; {\n                body = new StringBuilder();\n                body.append(new String(bytes, StandardCharsets.UTF_8));\n                return Mono.just(body.toString());\n            });\n        // @formatter:on\n    }\n\n    public String getRequestBody() {\n        return this.body.toString();\n    }\n}\n</code></pre>\n<p>And used this decorator in a custom <code>ServerWebExchangeDecorator</code>:</p>\n<pre><code>public class RequestBodyInterceptingExchange extends ServerWebExchangeDecorator {\n\n    private final BodyInterceptingRequest request;\n\n    public RequestBodyInterceptingExchange(ServerWebExchange exchange) {\n        super(exchange);\n        this.request = new BodyInterceptingRequest(exchange.getRequest());\n    }\n\n    @Override\n    public BodyInterceptingRequest getRequest() {\n        return request;\n    }\n}\n</code></pre>\n<p>I also have created a custom <code>WebFilter</code>:</p>\n<pre><code>public class RequestBodyInterceptingFilter implements WebFilter {\n\n    @Override\n    public Mono&lt;Void&gt; filter(ServerWebExchange exchange, WebFilterChain chain) {\n        return chain.filter(new RequestBodyInterceptingExchange(exchange));\n    }\n}\n</code></pre>\n<p>And registered it in <code>ServerHttpSecurity</code> as:</p>\n<pre><code>http\n    // other stuff\n    .addFilterBefore(new RequestBodyInterceptingFilter(), SecurityWebFiltersOrder.SECURITY_CONTEXT_SERVER_WEB_EXCHANGE)\n    .build();\n</code></pre>\n<p>Now, the above-mentioned custom implementation of <code>ReactiveAuthorizationManager&lt;AuthorizationContext&gt;</code> looks like this:</p>\n<pre><code>public class MyAuthorizationManager implements ReactiveAuthorizationManager&lt;AuthorizationContext&gt; {\n\n    public Mono&lt;AuthorizationDecision&gt; check(Mono&lt;Authentication&gt; authentication, AuthorizationContext context) {\n        // @formatter:off\n        return Mono.zip(\n                authentication,\n                getId(context)\n            )\n            .flatMap((Tuple2&lt;Authentication, String&gt; tuple) -&gt; {\n                Authentication auth = tuple.getT1();\n                String id = tuple.getT2();\n                Jwt principal = (Jwt) auth.getPrincipal();\n                String userId = principal.getSubject();\n\n                return // execute some logic and return a Mono boolean\n            })\n            .filter(BooleanUtils::isTrue)\n            .map(AuthorizationDecision::new);\n        // @formatter:on\n    }\n\n    protected Mono&lt;String&gt; getId(AuthorizationContext context) {\n        SecurityContextServerWebExchange securityContextExchange = (SecurityContextServerWebExchange) context.getExchange();\n        RequestBodyInterceptingExchange exchange = (RequestBodyInterceptingExchange) securityContextExchange.getDelegate();\n\n        // @formatter:off\n        return exchange.getRequest()\n            .readBody()\n            .flatMap((String requestBody) -&gt; Mono.just(convert(requestBody).getId())); // convert is a method for deserialize JSON to an Object\n        // @formatter:on\n    }\n}\n</code></pre>\n<p>I can achieve what I need. But I have a few questions:</p>\n<ul>\n<li>Is it the right way to do what I intended to do?</li>\n<li>Is there any chance that the class <code>BodyInterceptingRequest</code> is buggy and in case of the concurrent hit, it provides misinformation? I mean, if there are two callers, caller1 and caller2 and they invoke the API with request1 and request2 respectively, then the request2 gets processed for caller1 and the request1 gets processed for caller2.</li>\n<li>Is there any chance of memory leak through the implementation of <code>BodyInterceptingRequest</code>?</li>\n</ul>\n<p>I appreciate your expert opinion about my approach.</p>\n"},{"tags":["java","byte-buddy"],"comments":[{"owner":{"user_id":1237575,"display_name":"Rafael Winterhalter"},"edited":false,"comment_id":134282980,"body":"What version did you update from?"},{"owner":{"user_id":676877,"display_name":"Brett Okken"},"edited":false,"comment_id":134287166,"body":"@RafaelWinterhalter updated from 1.10.14 - updated the question to clarify that."}],"answers":[{"owner":{"user_id":1237575,"display_name":"Rafael Winterhalter"},"up_vote_count":1,"is_accepted":true,"creation_date":1683194729,"answer_id":76171970,"body":"<p>The corresponding code looks checks if the class is already loaded:</p>\n<pre><code>synchronized (classLoader == null\n  ? BOOTSTRAP_LOADER_LOCK\n  : classLoader) {\n    for (Map.Entry&lt;? extends String, byte[]&gt; entry : types.entrySet()) {\n      try {\n        result.put(entry.getKey(), Class.forName(entry.getKey(), false, classLoader));\n      } catch (ClassNotFoundException ignored) {\n        result.put(entry.getKey(), dispatcher.defineClass(classLoader, entry.getKey(), entry.getValue(), protectionDomain));\n      }\n    }\n  }\n</code></pre>\n<p>This should prevent the error you are experiencing. Could you check why this happens? The change was made to support GraalVM which struggles with randomized names.</p>\n<p>I could not reproduce this, at least: <a href=\"https://github.com/raphw/byte-buddy/commit/fa4b2ac09db71352c248900a633a4adc0d69124b\" rel=\"nofollow noreferrer\">https://github.com/raphw/byte-buddy/commit/fa4b2ac09db71352c248900a633a4adc0d69124b</a></p>\n"}],"owner":{"user_id":676877,"display_name":"Brett Okken"},"view_count":80,"up_vote_count":3,"accepted_answer_id":76171970,"answer_count":1,"score":3,"creation_date":1682705806,"question_id":76132256,"body":"<p>When updating to bytebuddy 1.12.22 (from 1.10.14) we have started occasionally seeing exception indicating that java.lang.ClassLoader$ByteBuddyAccessor$V1 is (already) in module java.base of loader 'bootstrap'.\nWe have bytebuddy (shaded into one of our jars) included in our wars. We only occasionally see this issue when we have multiple wars running in the same tomcat instance. For tomcat instances with only 1 war or simple single classpath applications, there are never issues.</p>\n<p>We are calling DynamicType.Unloaded.load with a classloader from class in same war and ClassLoadingStrategy.Default.INJECTION strategy.</p>\n<p><a href=\"https://javadoc.io/static/net.bytebuddy/byte-buddy/1.14.4/net/bytebuddy/dynamic/DynamicType.Unloaded.html#load-S-net.bytebuddy.dynamic.loading.ClassLoadingStrategy-\" rel=\"nofollow noreferrer\">https://javadoc.io/static/net.bytebuddy/byte-buddy/1.14.4/net/bytebuddy/dynamic/DynamicType.Unloaded.html#load-S-net.bytebuddy.dynamic.loading.ClassLoadingStrategy-</a></p>\n<p>This is failing with message:</p>\n<pre><code>java.lang.UnsupportedOperationException: Cannot define class using reflection: java.lang.LinkageError: loader 'bootstrap' attempted duplicate class definition for java.lang.ClassLoader$ByteBuddyAccessor$V1. (java.lang.ClassLoader$ByteBuddyAccessor$V1 is in module java.base of loader 'bootstrap')\n</code></pre>\n<p>It looks like there was a change which moved from generating an accessor class from having a random name to always using &quot;V1&quot;.\n<a href=\"https://github.com/raphw/byte-buddy/commit/201c6b69480b5b9ee35b5cdc9e35fb1bab2005dc#diff-f2e06c83c21b2a52e4ebf4392e271c68d13cdc2e5fba055773f1ffd81ce18776\" rel=\"nofollow noreferrer\">https://github.com/raphw/byte-buddy/commit/201c6b69480b5b9ee35b5cdc9e35fb1bab2005dc#diff-f2e06c83c21b2a52e4ebf4392e271c68d13cdc2e5fba055773f1ffd81ce18776</a></p>\n<p><a href=\"https://i.stack.imgur.com/hKfFx.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hKfFx.png\" alt=\"github change\" /></a></p>\n<p>Is this the expected behavior? Is it not allowed to have byte buddy in multiple wars in the same tomcat instance, or at least not allowed if using INJECTION strategy?</p>\n"},{"tags":["java","spring-boot","gradle","intellij-idea","microservices"],"comments":[{"owner":{"user_id":40342,"display_name":"Joachim Sauer"},"edited":false,"comment_id":134225568,"body":"You can <a href=\"https://docs.gradle.org/current/userguide/composite_builds.html#defining_composite_builds\" rel=\"nofollow noreferrer\">define a composite build</a> that includes both your shared library and your application. This will use the classes built from the source over the one that can be downloaded from your repository."}],"answers":[{"owner":{"user_id":12473843,"display_name":"Sergey Tsypanov"},"up_vote_count":1,"is_accepted":false,"creation_date":1684156986,"answer_id":76254541,"body":"<blockquote>\n<p>So here my question is how can I use &quot;Common Project&quot; in all micro services without generating common.jar.</p>\n</blockquote>\n<p>You cannot avoid having common.jar, as soon as both Maven and Gradle dependency management handles each dependency as a separate jar file.</p>\n<p>What you can do is to create a parent <code>build.gradle</code> and include <code>common</code> module into it. In one of our projects we have the following structure:</p>\n<pre><code>root_dir/\n..common/\n.....src\n.....build.gradle\n..sql/\n.....src\n.....build.gradle\n..api/\n.....src\n.....build.gradle\n..build.gradle \n..settings.gradle\n</code></pre>\n<p>Here we created <code>settings.gradle</code> in root directory:</p>\n<pre><code>rootProject.name = 'parent'\ninclude(':common')\ninclude(':sql')\ninclude(':api')\n</code></pre>\n<p>Under the same directory we have parent <code>build.gradle</code> with properties and settings common for all submodules:</p>\n<pre><code>allprojects {\n  group = ''\n  version = '1.0-SNAPSHOT'\n}\n\next {\n  lombokVersion = '1.18.22'\n  springBootVersion = '2.6.3'\n}\n\nsubprojects {\n  apply plugin: 'java'\n  apply plugin: 'maven-publish'\n\n  repositories {\n    mavenLocal()\n    mavenCentral()\n  }\n  //common dependencies\n  dependencies {\n    compileOnly &quot;org.projectlombok:lombok:$lombokVersion&quot;\n    annotationProcessor &quot;org.projectlombok:lombok:$lombokVersion&quot;\n\n    implementation platform(&quot;org.springframework.boot:spring-boot-dependencies:$springBootVersion&quot;)\n  }\n\n  sourceCompatibility = 17\n\n  test {\n    useJUnitPlatform()\n  }\n}\n</code></pre>\n<p>Then we have <code>:common</code> and <code>:sql</code> modules, both are dependencies for <code>:api</code> module.</p>\n<p>In the <code>build.gradle</code> of <code>:api</code> module we juwt specify dependencies:</p>\n<pre><code>dependencies {\n  implementation project(':sql')\n  implementation project(':common')\n  //...\n}\n</code></pre>\n<p>This structure allows IDEA to import <code>common</code> project as a submodule and all changes to the code of that module will be automatically picked up and analyzed. So if you refactor or rename a property in POJO in <code>:common</code> module  IDEA finds all its usages in <code>:api</code> module and refactors/renames them as well.</p>\n"},{"owner":{"user_id":6540591,"display_name":"User51"},"up_vote_count":0,"is_accepted":false,"creation_date":1684423278,"answer_id":76282209,"body":"<p>While one way is with a <a href=\"https://docs.gradle.org/current/userguide/multi_project_builds.html\" rel=\"nofollow noreferrer\">multi-module gradle build</a>, this is not helpful when the individual microservices are split across multiple repos, each with their own repos and <code>build.gradle</code>.</p>\n<p>In this case, there are additional options, each with their own caveats.</p>\n<h2>mavenLocal</h2>\n<p>You can publish your <code>common.jar</code> to your maven local with something like <a href=\"https://stackoverflow.com/questions/42765113/how-to-publish-source-into-local-maven-repository-with-gradle\">this</a>.</p>\n<p>This works well if you only have a single development machine, otherwise, each developer will have to publish to local as well.  Also, for distribution, you would have to bundle <code>common.jar</code> into the final jar, which you are likely doing already since it is included locally.</p>\n<p>This approach would at least prevent you from having to copy/paste.</p>\n<h2>Run a maven server</h2>\n<p>Or, of course, you could run a maven on some machine all your devices have access to.  <a href=\"https://www.sonatype.com/products/sonatype-nexus-repository\" rel=\"nofollow noreferrer\">Nexus</a> works well.  There are others.</p>\n<p>This requires a dedicated &quot;server&quot; of some kind to run this.  Might not work in all envs, but might be something worth investing in.</p>\n<h2>Gradle Task</h2>\n<p>And, of course, as a 'low-tech' solution, if you have a common directory structure and always work out of a workspace where you have all your other repos, you can have a task in the <code>common</code>'s Gradle build that after building the jar simply copies the build artifact to the other repos based on known paths and a list of repos to update.</p>\n<p>While potentially brittle, you could even perform git commands on those folders and prepare commits to add the changed file. YMMV on this, though, as it has plenty of its own pitfalls.</p>\n<p>This requires all repos to be cloned, in the same relative paths, but has the advantage of simply removing the manual effort.</p>\n<h2>Scripting</h2>\n<p>And, of course, there's no reason you have to use Gradle to do the above.  If can't use a multi-module build, and you can't use any of the other tasks, consider writing a script (bash, pwsh, python, etc), and at take advantage of some automation.</p>\n<p>Yes, it has the pitfalls of the above, but it is simpler than doing a lot of manual tasks over and over, all of which have the potential of being skipped, forgotten, etc.</p>\n"}],"owner":{"user_id":232867,"display_name":"Satya"},"view_count":86,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1682501164,"question_id":76109149,"body":"<p>We have multiple micro services dependent on a common code(common.jar) which is a separate project(repo).\nCurrently common code(common.jar) is included as dependent jar in all micro services.</p>\n<pre><code>gradle.properties:\nimplementation (&quot;com.boa.dart:funding-common:23.5.1.108&quot;)  --&gt; Prod configuration\nimplementation files(&quot;libs/funding-common.23.5.1.108.jar&quot;) --&gt; Local configuration\n</code></pre>\n<p>As all micro services dependent on common project, development is taking much time when there is any change required in &quot;Common Project&quot;.\nFirst we need to do code change in &quot;Common project&quot;, then build copy that jar to other micro services, then build each individual micro service.</p>\n<p>But look like we can have lot of improvement in this process.</p>\n<p>So here my question is how can I use &quot;Common Project&quot; in all micro services without generating common.jar.</p>\n<blockquote>\n<p>Here are TechStack: We are using gradle as a build tool.\nSpring Boot for micro Services.\nIntelliJ as IDE.</p>\n</blockquote>\n"},{"tags":["java","elasticsearch","spring-data-elasticsearch"],"answers":[{"owner":{"user_id":2709542,"display_name":"Mathew"},"up_vote_count":1,"is_accepted":false,"creation_date":1681399246,"answer_id":76007192,"body":"<p>use Native Query,</p>\n<pre><code>    package com.lazyaudio;\n\n    import org.springframework.data.domain.Pageable;\n    import org.springframework.data.domain.Sort;\n    import org.springframework.data.elasticsearch.client.elc.NativeQuery;\n    import org.springframework.data.elasticsearch.client.elc.QueryBuilders;\n    import org.springframework.data.elasticsearch.core.query.FetchSourceFilterBuilder;\n\n    public class Test {\n\n        public static void main(String[] args) {\n            Pageable pageable = null;\n            NativeQuery query = NativeQuery.builder()\n                    .withSourceFilter(new FetchSourceFilterBuilder().withIncludes().build())\n                    .withQuery(QueryBuilders.termQueryAsQuery(&quot;fieldName&quot;, &quot;&quot;))\n                    .withSort(Sort.by(Sort.Direction.DESC, &quot;fieldName&quot;))\n                    .withPageable(pageable)\n                    .build();\n\n        }\n    }\n</code></pre>\n"}],"owner":{"user_id":352290,"display_name":"user352290"},"view_count":243,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1681124441,"question_id":75976503,"body":"<p>What is the equivalent of org.springframework.data.elasticsearch.core.query.NativeSearchQuery for support beyond 5.0.</p>\n<p>Migrated the following snippet from</p>\n<pre><code>    NativeSearchQuery query = new NativeSearchQueryBuilder()\n            .withSourceFilter(new FetchSourceFilterBuilder().withIncludes().build())\n            .withQuery(QueryBuilders.termQuery(Configuration.CONFIGURATION_TYPE, field))\n            .withSorts(new FieldSortBuilder(Configuration.NAME).order(SortOrder.ASC)).withPageable(pageable)\n            .build();\n</code></pre>\n<p>to the following query, but it fails</p>\n<pre><code>import org.springframework.data.elasticsearch.client.elc.NativeQuery;\nimport org.springframework.data.elasticsearch.client.elc.NativeQueryBuilder;\n\n\n    NativeQuery query = new NativeQueryBuilder()\n            .withSourceFilter(new FetchSourceFilterBuilder().withIncludes().build())\n            .withQuery(QueryBuilders.termQuery(Configuration.CONFIGURATION_TYPE, field))\n            .withSorts(new FieldSortBuilder(Configuration.NAME).order(SortOrder.ASC)).withPageable(pageable)\n            .build();\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"user_id":1786065,"display_name":"Rogue"},"edited":false,"comment_id":133990573,"body":"What necessitates these requirements? What inputs are you working on?"},{"owner":{"user_id":21363224,"display_name":"markalex"},"edited":false,"comment_id":133990578,"body":"Please add examples of valid and invalid input."},{"owner":{"user_id":5440883,"display_name":"Chris Maurer"},"edited":false,"comment_id":133990649,"body":"Notice that your regex will scan a number between 6 &amp; 31 characters, not 5 &amp; 30.  That initial digit is an extra character. Is that what you meant?"},{"owner":{"user_id":2563754,"display_name":"Seelenvirtuose"},"edited":false,"comment_id":133990715,"body":"You really should consider to <i>not</i> check each and every requirement with a regular expression. For the pattern requirement, a regular expresseion seems to be a good fit. But for the length ... why not simply check the input string and/or the number in it? No need to complicate things ..."}],"answers":[{"owner":{"user_id":1083663,"display_name":"GOTO 0"},"up_vote_count":2,"is_accepted":true,"creation_date":1681025280,"answer_id":75969276,"body":"<blockquote>\n<p>BUT how do I restrict it NOT to have 10 or 12 characters length.</p>\n</blockquote>\n<p>You could insert a negative lookahead at the start of the pattern to not expect 10 or 12 characters: <code>(?!.{10}$|.{12}$)</code>.</p>\n<p>The whole pattern would then be:</p>\n<pre><code>^(?!.{10}$|.{12}$)[0-9][a-zA-Z0-9-_.\\\\\\s+]{5,30}$\n</code></pre>\n"},{"owner":{"user_id":21507826,"display_name":"ye xue"},"up_vote_count":1,"is_accepted":false,"creation_date":1681025434,"answer_id":75969288,"body":"<pre><code>^(?!.*\\b\\d{10}\\b)(?!.*\\b\\d{12}\\b)[0-9][a-zA-Z0-9\\-_.\\\\s+]{4,29}$\n</code></pre>\n"},{"owner":{"user_id":5424988,"display_name":"The fourth bird"},"up_vote_count":0,"is_accepted":false,"creation_date":1681140415,"answer_id":75978399,"body":"<p>As the pattern should start with a digit, you might do that first and then add to negative lookaheads to prevent the lookaheads to fire when the string does not start with a digit.</p>\n<p>If you don't want to match newlines, using Java you can change <code>\\s</code> to <code>\\h</code> to match horizontal whitespace characters.</p>\n<pre><code>^[0-9](?!.{9}$|.{11}$)[a-zA-Z0-9-_.\\\\\\h+]{4,29}$\n</code></pre>\n<p>See a <a href=\"https://regex101.com/r/ZzQYrN/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n<p>A longer version without using lookaheads, but making use of a greedy quantifier and optional <a href=\"https://www.regular-expressions.info/atomic.html\" rel=\"nofollow noreferrer\">atomic groups</a>.</p>\n<p>The pattern matches either 5-9 chars, 11 chars or 13-30 chars.</p>\n<pre><code>^[0-9][a-zA-Z0-9-_.\\\\h+]{4,8}+(?&gt;[a-zA-Z0-9-_.\\\\h+]{2}(?&gt;[a-zA-Z0-9-_.\\\\h+]{2,19})?)?$\n</code></pre>\n<p>See another <a href=\"https://regex101.com/r/WdAtXg/1\" rel=\"nofollow noreferrer\">regex demo</a>.</p>\n"}],"owner":{"user_id":13103493,"display_name":"sidd"},"view_count":77,"up_vote_count":3,"accepted_answer_id":75969276,"answer_count":3,"score":3,"creation_date":1681024261,"question_id":75969211,"body":"<p>I have a requirement for regex - starting with a number and then can have letter numbers and special characters <code>-_.\\\\s+</code> for hyphen, dot, underscore and space, etc. My other important requirement is that the length of the number is to be between 5 and 30 (inclusive) BUT it should not be 10 or 12 characters in length. I have prepared a regex as below:</p>\n<pre><code>^[0-9][a-zA-Z0-9-_.\\\\\\s+]{5,30}$\n</code></pre>\n<p>I understand that the above regex regulates length between 5 and 30 characters BUT how do I restrict it NOT to have 10 or 12 characters length.</p>\n<p>Please help.</p>\n"},{"tags":["java","spring-boot","kafka-consumer-api","spring-kafka"],"answers":[{"owner":{"user_id":1240763,"display_name":"Gary Russell"},"up_vote_count":1,"is_accepted":true,"creation_date":1680611468,"answer_id":75929424,"body":"<blockquote>\n<p><code>ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(1000));</code></p>\n</blockquote>\n<p>Of course it won't work with that; you are completely bypassing the Spring code and interacting with the <code>KafkaConsumer</code> yourself.</p>\n<p>In that case you will have to implement your own error handling.</p>\n<p>However, you don't have to use <code>@KafkaListener</code> to use a container, you can use the container factory to create a container and use <code>setMessageListener</code> to add your listener to the container properties.</p>\n<p>You should remove the <code>@KafkaListener</code> in that case, so the framework doesn't automatically configure a container for it.</p>\n"}],"owner":{"user_id":9176914,"display_name":"Muddassir Rahman"},"view_count":100,"up_vote_count":3,"accepted_answer_id":75929424,"answer_count":1,"score":3,"creation_date":1680585956,"question_id":75925778,"body":"<p>I am using the spring kafka in my project and have implemented a retry functionality. A message is consumed and if it fails I need to retry. Below code is working fine if I am using  and doing retry for some exceptions.</p>\n<pre><code>@Component\npublic class Consumer implements AcknowledgingMessageListener&lt;String, String&gt; {\n\n    @Override\n    @KafkaListener(topics = { &quot;ff808081672c17c8016730733d020001.CBS_PROFILE&quot;})\n    public void onMessage(ConsumerRecord&lt;String, String&gt; consumerRecord, Acknowledgment acknowledgment) {\n\n        log.info(&quot;Computed &quot;);\n        throw new RuntimeException();\n\n    }\n\n}\n\n@Configuration\n@Slf4j\npublic class KafkaConsumerConfig {\n\n    /** handles error and recovery logic **/\n    public DefaultErrorHandler errorHandler() {\n        \n        System.out.println(&quot;Inside error handler&quot;);\n\n        // if these exceptions occur in the consumer, record will not be retried\n        List&lt;Class&lt;? extends Exception&gt;&gt; exceptionsToIgnore = List.of(JsonSchemaValidationException.class);\n\n        // if these exceptions occur in the consumer, record will be retried\n        List&lt;Class&lt;? extends Exception&gt;&gt; exceptionsToRetry = List.of(DataEngineNotAvailableException.class, ListenerExecutionFailedException.class);\n\n        // retry twice after fixed interval of one second\n        var fixedBackOff = new FixedBackOff(500L, 1);\n        var expBackoff = new ExponentialBackOffWithMaxRetries(2);\n        expBackoff.setInitialInterval(1000L);\n        var errorHandler = new DefaultErrorHandler(fixedBackOff);\n\n        errorHandler.setRetryListeners((consumerRecord, ex, deliveryAttempt) -&gt; {\n            log.info(&quot;Failed record {} in retry listeners, Exception : {}, delivery attempt : {}&quot;, consumerRecord,\n                    ex.getMessage(), deliveryAttempt);\n        });\n\n        exceptionsToIgnore.forEach(errorHandler::addNotRetryableExceptions);\n        exceptionsToRetry.forEach(errorHandler::addRetryableExceptions);\n        return errorHandler;\n    }\n\n    @Bean\n    public ConcurrentKafkaListenerContainerFactory&lt;?, ?&gt; kafkaListenerContainerFactory(\n            ConcurrentKafkaListenerContainerFactoryConfigurer configurer,\n            ConsumerFactory&lt;Object, Object&gt; kafkaConsumerFactory) {\n        ConcurrentKafkaListenerContainerFactory&lt;Object, Object&gt; factory = new ConcurrentKafkaListenerContainerFactory&lt;&gt;();\n        configurer.configure(factory, kafkaConsumerFactory);\n        factory.getContainerProperties().setAckMode(AckMode.MANUAL);\n\n        // should be equal to number of partitions\n        factory.setConcurrency(3);\n        factory.setCommonErrorHandler(errorHandler());\n        return factory;\n    }\n\n}\n</code></pre>\n<p>But I am not able to implement retry mechanism if I implement consumer like below.\nExpectation is to retry the <code>dataProcessor.readRecord(r, consumer)</code> method.</p>\n<pre><code>@PostConstruct\npublic void onLoad() {\n\n    configService.setConfigurations();\n    \n    //load consumer\n    consumerRunnerV2.loadConsumers();\n\n}\n\n\npublic void loadConsumers() {\n\n    consumerServiceV2.fillConsumerMap();\n    Map&lt;String, LRConsumer&gt; consumersMap = consumerServiceV2.getConsumersMap();\n\n    for (Map.Entry&lt;String, LRConsumer&gt; consumer : consumersMap.entrySet()) {\n        consumerTaskExecutor.execute(() -&gt; runConsumer(consumer.getValue()));\n    }\n\n}\n\n\nprivate void runConsumer(LRConsumer consumer) {\n\n    while (true) {\n    \n\n        // to check state of consumer\n        consumer = consumerServiceV2.getConsumerById(consumer.getConsumerId());\n\n        if (consumer.getState() != ConsumerState.PAUSED) {\n            \n            log.info(&quot;Waiting to receive messages.&quot;);\n            ConsumerRecords&lt;String, String&gt; records = consumer.poll(Duration.ofMillis(1000));\n            \n            for (ConsumerRecord&lt;String, String&gt; r : records)\n            \n                //expectation is to retry this method\n                dataProcessor.readRecord(r, consumer);\n        }\n\n        else {\n            Thread.sleep(1000);\n            log.info(&quot;Consumer is in paused state.&quot;);\n        }\n        \n        \n\n    }\n\n}\n</code></pre>\n"},{"tags":["java","git","bitbucket"],"answers":[{"owner":{"user_id":6279677,"display_name":"Suchandra T"},"up_vote_count":1,"is_accepted":false,"creation_date":1680382707,"answer_id":75908814,"body":"<p>I was not able to find any Bitbucket related APIs which allow such a mass replace operation to project files.</p>\n<p>Although it's a really common use case still I am surprised that not so much is available on the internet about it.</p>\n<p>Sadly we are left with doing it ourselves and assuming you are mentioning about grep command which points to the usage of Linux OS.</p>\n<p>Here's the working and tested Linux command which iterates in directories and replaces the string using sed command,</p>\n<pre><code>find dirr/ -type f -name '*' -exec sed -i 's/com.mycompany.oldlib/com.mycompany.newlib/g' {} +\n</code></pre>\n<p>The only issue with this command is, it is really slow as you are doing the heavy lifting of finding and replacing over here, the execution time will depend on your System capabilities.</p>\n<p>This above command is self-explanatory except may be the last &quot;+&quot; sign.\nMore about it: <a href=\"https://stackoverflow.com/questions/6085156/using-semicolon-vs-plus-with-exec-in-find\">Using semicolon (;) vs plus (+) with exec in find</a></p>\n<p>Hope this helps, Thanks.</p>\n"},{"owner":{"user_id":5054717,"display_name":"Jim Redmond"},"up_vote_count":1,"is_accepted":false,"creation_date":1680391940,"answer_id":75909399,"body":"<p>I'm not sure find-and-replace is feasible within any flavor of Bitbucket, given that they all rely heavily on Git to manage repository contents, and that API calls could interfere with normal commits. However, Bitbucket Cloud (bitbucket.org), Bitbucket Server, and Bitbucket Data Center all have a search function in the UI:</p>\n<ul>\n<li><a href=\"https://support.atlassian.com/bitbucket-cloud/docs/search-in-bitbucket-cloud/\" rel=\"nofollow noreferrer\">https://support.atlassian.com/bitbucket-cloud/docs/search-in-bitbucket-cloud/</a></li>\n<li><a href=\"https://confluence.atlassian.com/bitbucketserver/bitbucket-search-syntax-814204781.html\" rel=\"nofollow noreferrer\">https://confluence.atlassian.com/bitbucketserver/bitbucket-search-syntax-814204781.html</a></li>\n</ul>\n<p>If you're using Bitbucket Cloud, then there's a search API as well:</p>\n<ul>\n<li><a href=\"https://developer.atlassian.com/cloud/bitbucket/rest/api-group-other-operations/#api-teams-username-search-code-get\" rel=\"nofollow noreferrer\">https://developer.atlassian.com/cloud/bitbucket/rest/api-group-other-operations/#api-teams-username-search-code-get</a></li>\n</ul>\n<p>(There doesn't appear to be a search API in the latest versions of Bitbucket Server or Bitbucket Data Center, but some earlier versions may have it.)</p>\n<p>So while you probably can't do find-and-replace natively, you should be able to at least use code search in the UI and/or API to identify what needs to be updated.</p>\n"}],"owner":{"user_id":2786156,"display_name":"St.Antario"},"view_count":100,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1680380051,"question_id":75908615,"body":"<p>Given a Bitbucket workspace consisting of multiple repositories I'd like to search for a String occurrence in each of them. Here is how my bitbucket looks like:</p>\n<pre><code>Company / Projects / Departament\n\n  repo1\n  repo2\n  ...\n  repo 456\n</code></pre>\n<p>By String occurrence I mean a dependency declaration as a string</p>\n<pre><code>com.mycompany.oldlib\n</code></pre>\n<p>which is to be replaced with</p>\n<pre><code>com.mycompany.newlib\n</code></pre>\n<p>So basically I want to find what repos use the library and replace it with a new appropriate one.</p>\n<p>Is there an API or any other way in Bitbucket to perform such search for a string occurrence in code? Checking out all of the repositories by hand and <code>grep</code>ing the code is not really a solution since there are hundreds of repositories.</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"user_id":833647,"display_name":"Ken Wolf"},"edited":false,"comment_id":133860802,"body":"Try &quot;wipe data&quot; on the emulator and try again?"},{"owner":{"user_id":15262397,"display_name":"danPyk"},"edited":false,"comment_id":133913343,"body":"Did you import the project recently, like from github? I had similar issue after not properly import code, after file-&gt;new-&gt;import project app started working."},{"owner":{"user_id":21528692,"display_name":"Matteo Congiu"},"edited":false,"comment_id":134017175,"body":"@KenWolf Wipe data worked, thank you very much guys."}],"answers":[{"owner":{"user_id":833647,"display_name":"Ken Wolf"},"up_vote_count":1,"is_accepted":false,"creation_date":1681222729,"answer_id":75986954,"body":"<p>Sometimes the emulator can get into an improper state and rather than trying to diagnose and fix what is happening it is easier to start over from a clean state.</p>\n<p>Try &quot;Wipe Data&quot; from the emulator menu and try again.</p>\n<p><a href=\"https://i.stack.imgur.com/U1FcB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/U1FcB.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://developer.android.com/studio/run/managing-avds#emulator\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/run/managing-avds#emulator</a></p>\n"}],"owner":{"user_id":21528692,"display_name":"Matteo Congiu"},"view_count":668,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1680190162,"question_id":75890199,"body":"<p>Nothing changed in the code, it just stopped projecting the app in the emulator, Logcat says what's in the title. The app is a very simple game skeleton for now, no errors, just some warning.</p>\n<p>&quot;W/System: A resource failed to call close.&quot; is the last message in the &quot;Run&quot; window.</p>\n<p>The problem seems to be the inability to delete cache files due to their inexistence.</p>\n<p>Please hepl.</p>\n<p>I'm trying to build a very simple game, I was trying to sort out how to insert a joystick in one of the layouts and was adding a database. Again the emulator stopped working randomly, due to no code modification.</p>\n"},{"tags":["java","database","spring-boot","docker","apache-kafka"],"answers":[{"owner":{"user_id":8376709,"display_name":"Yury"},"up_vote_count":1,"is_accepted":false,"creation_date":1679697931,"answer_id":75838638,"body":"<p>I think the problem is that you dont create the 'AccountOpenedEvent' topic in kafka. Make sure that the topic exists. If you want to create topic programmatically, you may try to do something like this</p>\n<pre><code>     @Bean\n     public NewTopic topic() {\n         return new NewTopic(&quot;AccountOpenedEvent&quot;, 2, (short) 2);\n     }\n</code></pre>\n<p>s. also\n<a href=\"https://medium.com/@TimvanBaarsen/programmatically-create-kafka-topics-using-spring-kafka-8db5925ed2b1\" rel=\"nofollow noreferrer\">https://medium.com/@TimvanBaarsen/programmatically-create-kafka-topics-using-spring-kafka-8db5925ed2b1</a></p>\n<p>UPDATE:\nyou can also try this setup of kafka service</p>\n<pre><code>kafka:\nimage: 'bitnami/kafka:latest'\nports:\n  - '9092:9092'\n  - '19092:19092'\nenvironment:\n  - KAFKA_BROKER_ID=1\n  - KAFKA_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092, OUTSIDE://localhost:19092\n  - KAFKA_ZOOKEEPER_CONNECT=zookeeper:2181\n  - KAFKA_LISTENER_SECURITY_PROTOCOL_MAP=PLAINTEXT:PLAINTEXT,OUTSIDE:PLAINTEXT\n  - KAFKA_LISTENERS=PLAINTEXT://0.0.0.0:9092, OUTSIDE://0.0.0.0:19092\n  - ALLOW_PLAINTEXT_LISTENER=yes\ndepends_on:\n  - zookeeper\nnetworks:\n  - bankAccount\n</code></pre>\n"}],"owner":{"user_id":5719229,"display_name":"S.N"},"view_count":210,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1679681661,"question_id":75836970,"body":"<p>I try to implement an example of CQRS in Spring Boot. I have two main modules named as bank-account and cqrs-core. bank-account comprises 3 modules which are account-cmd, account-common and account-query.</p>\n<p>Account-cmd is based on <strong>command</strong> process with <strong>Kafka Producer</strong> while account-query is based on <strong>querying</strong> with <strong>Kafka Consumer</strong>.</p>\n<p>I created two <strong>docker-compose.yml</strong> files. One is for account-cmd and the another one is for account-query.</p>\n<p>I run the docker-compose through this command shown below.</p>\n<pre><code>docker-compose --build\n</code></pre>\n<p>After running thems for each related modules, I see that all containers are up.</p>\n<p>When I try to send any request through Postman like shown below</p>\n<pre><code>http://localhost:5000/api/v1/openBankAccount\n\n{\n    &quot;accountHolder&quot; : &quot;Account Holder 1&quot;,\n    &quot;accountType&quot; : &quot;SAVINGS&quot;,\n    &quot;openingBalance&quot; : 50.0\n}\n</code></pre>\n<p>I always see this message <code>Sending request...</code> in the Postman.</p>\n<p>Kafka Producer logs shown below (docker-compose.yml of account.cmd).\nI only see this message constantly.</p>\n<pre><code>...\n2023-03-24 21:09:12 2023-03-24T18:09:12.993Z  WARN 1 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Bootstrap broker localhost:9092 (id: -1 rack: null) disconnected\n...\n</code></pre>\n<p>Kafka Consumer logs shown below (docker-compose.yml of account.query)\nI only see this message constantly.</p>\n<pre><code>...\n2023-03-24 21:10:05 2023-03-24T18:10:05.405Z  WARN 1 --- [ntainer#1-0-C-1] org.apache.kafka.clients.NetworkClient   : [Consumer clientId=consumer-bankaccConsumer-4, groupId=bankaccConsumer] Bootstrap broker localhost:9092 (id: -1 rack: null) disconnected\n...\n</code></pre>\n<p>After waiting a certain amount of time, this message appeared on the console for account.cmd side.</p>\n<pre><code>org.springframework.kafka.kafkaexception : Send failed\nCaused by: org.apache.kafka.common.errors.TimeoutException: Topic AccountOpenedEvent not present in metadata after 60000 ms.\n</code></pre>\n<p>Here is the docker-compose.yml file shown below</p>\n<pre><code>version: '3.9'\n\nservices:\n  account-cmd:\n    image: 'account-cmd:latest'\n    build:\n      context: ./account.cmd\n    ports:\n      - &quot;5000:5000&quot;\n    depends_on:\n      - zookeeper\n      - kafka\n      - mongodb\n    environment:\n      - kafka.producer.key-serializer=org.apache.kafka.common.serialization.StringSerializer\n      - kafka.producer.value-serializer=org.springframework.kafka.support.serializer.JsonSerializer\n      - spring.data.mongodb.host=mongodb\n      - spring.data.mongodb.port=27017\n      - spring.data.mongodb.database=bankAccount\n      - server.port=5000\n      - spring.kafka.producer.bootstrap-servers=kafka:9092\n    networks:\n      - bankAccount\n\n  account-query:\n    image: 'account-query:latest'\n    build:\n      context: ./account.query\n    ports:\n      - &quot;5001:5001&quot;\n    depends_on:\n      - zookeeper\n      - kafka\n      - database\n    environment:\n      - spring.datasource.url=jdbc:mysql://database:3306/bankAccount?createDatabaseIfNotExist=true&amp;useSSL=false&amp;allowPublicKeyRetrieval=true\n      - server.port=5001\n      - spring.datasource.username=root\n      - spring.datasource.password=ippavlova_1990\n      - spring.kafka.consumer.group-id=bankaccConsumer\n      - spring.kafka.consumer.auto-offset-reset=earliest\n      - spring.kafka.consumer.key-deserializer=org.apache.kafka.common.serialization.StringDeserializer\n      - spring.kafka.consumer.value-deserializer=org.springframework.kafka.support.serializer.JsonDeserializer\n      - spring.kafka.consumer.properties.spring.json.trusted.packages=*\n      - spring.kafka.consumer.bootstrap-servers=kafka:9092\n    networks:\n      - bankAccount\n\n  database:\n    container_name: mysql-database\n    image: 'mysql:latest'\n    ports:\n      - &quot;3306:3306&quot;\n    restart: always\n    environment:\n      MYSQL_PASSWORD: ippavlova_1990\n      MYSQL_ROOT_PASSWORD: ippavlova_1990\n    volumes:\n      - db-data:/var/lib/mysql\n    networks:\n      - bankAccount\n    healthcheck:\n      test: [ &quot;CMD&quot;, &quot;mysqladmin&quot; ,&quot;ping&quot;, &quot;-h&quot;, &quot;localhost&quot; ]\n      timeout: 20s\n      retries: 10\n\n\n  mongodb:\n    image: &quot;mongo:latest&quot;\n    container_name: mongo-container\n    restart: always\n    ports:\n      - &quot;27017:27017&quot;\n    volumes:\n      - mongodb_data_container:/data/db\n    networks:\n      - bankAccount\n\n  zookeeper:\n    image: 'bitnami/zookeeper:latest'\n    restart: always\n    ports:\n      - &quot;2181:2181&quot;\n    volumes:\n      - &quot;zookeeper_data:/bitnami&quot;\n    environment:\n      - ALLOW_ANONYMOUS_LOGIN=yes\n    networks:\n      - bankAccount\n\n  kafka:\n    image: 'bitnami/kafka:latest'\n    ports:\n      - '9092:9092'\n      - '9093:9093'\n    environment:\n      - KAFKA_CFG_ZOOKEEPER_CONNECT=zookeeper:2181\n      - ALLOW_PLAINTEXT_LISTENER=yes\n      - KAFKA_CFG_LISTENER_SECURITY_PROTOCOL_MAP=CLIENT:PLAINTEXT,EXTERNAL:PLAINTEXT\n      - KAFKA_CFG_LISTENERS=CLIENT://:9092,EXTERNAL://:9093\n      - KAFKA_CFG_ADVERTISED_LISTENERS=CLIENT://kafka:9092,EXTERNAL://localhost:9093\n      - KAFKA_CFG_INTER_BROKER_LISTENER_NAME=CLIENT\n    depends_on:\n      - zookeeper\n    networks:\n      - bankAccount\n\n\nvolumes:\n  mongodb_data_container:\n  db-data:\n  zookeeper_data:\n    driver: local\n  kafka_data:\n    driver: local\n\nnetworks:\n  bankAccount:\n</code></pre>\n<p>I get this issue from account-query (Consumer)</p>\n<pre><code>2023-03-26 02:04:27 2023-03-25T23:04:27.160Z  INFO 1 --- [ntainer#0-0-C-1] o.a.k.c.c.internals.ConsumerCoordinator  : [Consumer clientId=consumer-bankaccConsumer-3, groupId=bankaccConsumer] Request joining group due to: consumer pro-actively leaving the group\n</code></pre>\n<p>I get this issue from account-cmd (Producer)</p>\n<pre><code>2023-03-26 02:04:29 2023-03-25T23:04:29.086Z  WARN 1 --- [ad | producer-1] org.apache.kafka.clients.NetworkClient   : [Producer clientId=producer-1] Bootstrap broker localhost:9092 (id: -1 rack: null) disconnected\n</code></pre>\n<p>I also added <code>KAFKA_CFG_ADVERTISED_LISTENERS=PLAINTEXT://kafka:9092</code>\nand added a <code>spring.kafka.bootstrap-servers=kafka:9092</code> to <strong>account-cmd</strong>  <strong>account-query</strong> but nothing changed.</p>\n<p>How can I fix the issue?</p>\n<p>Here is my repo : <a href=\"https://github.com/Rapter1990/cqrs-example\" rel=\"nofollow noreferrer\">Link</a></p>\n"},{"tags":["javascript","java","arrays","typescript","data-structures"],"comments":[{"owner":{"user_id":112968,"display_name":"knittl"},"edited":false,"comment_id":133654104,"body":"<a href=\"https://en.wikipedia.org/wiki/Topological_sorting\" rel=\"nofollow noreferrer\">Topological sorting</a>?"},{"owner":{"user_id":11834856,"display_name":"Neha Soni"},"edited":false,"comment_id":133654357,"body":"What do you mean by sequence? I mean how do you want to sort the items, alphabetically?"},{"owner":{"user_id":6935894,"display_name":"Nischay Jain"},"edited":false,"comment_id":133654560,"body":"@NehaSoni not alphabetically, if SR-1 depends on SR-2, SR-2 should come first in the sequencedArray and then SR-1, similarly for all"},{"owner":{"user_id":13365797,"display_name":"jjj"},"edited":false,"comment_id":133654776,"body":"@NehaSoni do you mean: always independent task first. then for all depent tasks, the one being depended most will comes first?"},{"owner":{"user_id":1552534,"display_name":"WJS"},"edited":false,"comment_id":133656587,"body":"Please pick a language.  <code>Java</code> and <code>Javascript</code> are different."}],"answers":[{"owner":{"user_id":1447675,"display_name":"Nina Scholz"},"up_vote_count":1,"is_accepted":true,"creation_date":1679046095,"answer_id":75765980,"body":"<p>You could get all parent nodes and get a new array based on the root nodes.</p>\n<p><a href=\"https://en.wikipedia.org/wiki/Tree_traversal\" rel=\"nofollow noreferrer\">Tree traversal</a>: <a href=\"https://en.wikipedia.org/wiki/Depth-first_search\" rel=\"nofollow noreferrer\">Depth-first search</a> in Pre-order, NLR (node, left, right)</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const\n    getSorted = references =&gt; {\n        const fn = (array = []) =&gt; array.flatMap(o =&gt; [o, ...fn(references[o.taskId])]);\n        return fn(references[null]);\n    },\n    data = [{ taskId: 'SR-1', dependsOn: 'SR-2'}, { taskId: 'SR-2', dependsOn: 'SR-5'}, { taskId: 'SR-3', dependsOn: null}, { taskId: 'SR-4', dependsOn: 'SR-3'}, { taskId: 'SR-5', dependsOn: null}, { taskId: 'SR-6', dependsOn: 'SR-2'}],\n    references = data.reduce((r, o) =&gt; {\n        (r[o.dependsOn] ??= []).push(o);\n        return r;\n    }, {}),\n    result = getSorted(references);\n\nconsole.log(result);</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.as-console-wrapper { max-height: 100% !important; top: 0; }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>If you like to get each level together, you need to iterate twice, one for the level and another for the children.</p>\n<p>Tree traversal: A modified <em>Depth-first search</em> with getting the nodes of a parent first and then all children.</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>const\n    getSorted = references =&gt; {\n        const fn = (array = []) =&gt; [\n            ...array,\n            ...array.flatMap(o =&gt; fn(references[o.taskId]))\n        ];\n        return fn(references[null]);\n    },\n    data = [{ taskId: 'SR-1', dependsOn: 'SR-2'}, { taskId: 'SR-2', dependsOn: 'SR-5'}, { taskId: 'SR-3', dependsOn: null}, { taskId: 'SR-4', dependsOn: 'SR-3'}, { taskId: 'SR-5', dependsOn: null}, { taskId: 'SR-6', dependsOn: 'SR-2'}],\n    references = data.reduce((r, o) =&gt; {\n        (r[o.dependsOn] ??= []).push(o);\n        return r;\n    }, {}),\n    result = getSorted(references);\n\nconsole.log(result);</code></pre>\r\n<pre class=\"snippet-code-css lang-css prettyprint-override\"><code>.as-console-wrapper { max-height: 100% !important; top: 0; }</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"owner":{"user_id":13365797,"display_name":"jjj"},"up_vote_count":0,"is_accepted":false,"creation_date":1679047356,"answer_id":75766217,"body":"<p>You can split the taskArray into two, sort (or not sort them) and put them back together like below:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>let taskArray = [\n{ taskId: 'SR-1', dependsOn: 'SR-2'}, \n{ taskId: 'SR-2', dependsOn: 'SR-5'}, \n{ taskId: 'SR-3', dependsOn: null},\n{ taskId: 'SR-4', dependsOn: 'SR-3'},\n{ taskId: 'SR-5', dependsOn: null},\n{ taskId: 'SR-6', dependsOn: 'SR-2'}]\n\n// turn taskId into number e.g. 'ST-1' -&gt; 1 so we can compare them in sort function below\nconst idToNumber = (id) =&gt; parseInt(id.replace('SR-',''), 10)\n\n// independent tasks where dependsOn field is null\nlet independentArray = taskArray\n  .filter(t =&gt; !t.dependsOn)\n  // as per your question this sorting is optional. comment out if not required\n  .sort((a,b) =&gt; idToNumber(b.taskId)-idToNumber(a.taskId) ? 1 : -1)\n  \n// dependent tasks where dependsOn field is not null\nlet dependentArray = taskArray\n  .filter(t =&gt; !!t.dependsOn)\n  // sort the task by comparing their taskId by extracting the number\n  .sort((a,b) =&gt; idToNumber(b.taskId)-idToNumber(a.taskId) ? 1 : -1)\n\n// combine them with independentArray comes first\nlet sequencedArray = [...independentArray, ...dependentArray]\n\nconsole.log(sequencedArray)</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"}],"owner":{"user_id":6935894,"display_name":"Nischay Jain"},"view_count":80,"up_vote_count":4,"accepted_answer_id":75765980,"answer_count":2,"score":3,"creation_date":1679045408,"question_id":75765847,"body":"<p>I have an array which lists certain tasks and the tasks that they are dependent upon. For example:</p>\n<pre><code>let taskArray = [\n{ taskId: 'SR-1', dependsOn: 'SR-2'}, \n{ taskId: 'SR-2', dependsOn: 'SR-5'}, \n{ taskId: 'SR-3', dependsOn: null},\n{ taskId: 'SR-4', dependsOn: 'SR-3'},\n{ taskId: 'SR-5', dependsOn: null},\n{ taskId: 'SR-6', dependsOn: 'SR-2'}]\n\n</code></pre>\n<p>After processing the array should be</p>\n<pre><code>let sequencedArray = [\n{ taskId: 'SR-3', dependsOn: null},\n{ taskId: 'SR-5', dependsOn: null},\n{ taskId: 'SR-2', dependsOn: 'SR-5'},\n{ taskId: 'SR-1', dependsOn: 'SR-2'}, \n{ taskId: 'SR-6', dependsOn: 'SR-2'}\n{ taskId: 'SR-4', dependsOn: 'SR-3'},\n]\n</code></pre>\n<p>The tasks which have dependsOn field as null can be in any order, but the task having dependsOn tasks should be sequenced.</p>\n<p>I was thinking of first ordering based on the dependsOn field, that way I will have all the independent tasks at the start, but not sure how to sequence them.</p>\n"},{"tags":["java","spring","logging","spring-cloud-stream"],"comments":[{"owner":{"user_id":837717,"display_name":"Oleg Zhurakousky"},"edited":false,"comment_id":133654504,"body":"This logs is from s-c-function. What version do you use?"},{"owner":{"user_id":837717,"display_name":"Oleg Zhurakousky"},"edited":false,"comment_id":133654537,"body":"it has recently been addressed and is now a DEBUG level log <code>logger.debug(&quot;Invoking function: &quot;...</code>"},{"owner":{"user_id":2987525,"display_name":"RichieK"},"edited":false,"comment_id":133654643,"body":"but it seems I cant even turn it off with logging.level.org.springframework.cloud=ERROR"},{"owner":{"user_id":2987525,"display_name":"RichieK"},"edited":false,"comment_id":133654666,"body":"spring-cloud-function-core 3.2.9"},{"owner":{"user_id":837717,"display_name":"Oleg Zhurakousky"},"edited":false,"comment_id":133654697,"body":"Something else must be enabling DEBUG level logging. .  outside of Spring, some competing configuration."},{"owner":{"user_id":2987525,"display_name":"RichieK"},"edited":false,"comment_id":133692284,"body":"ah so it seems here the system.out.println is it <a href=\"https://github.com/spring-cloud/spring-cloud-function/commit/438b8d2e237564ab3206358129ebecae2ea39cef\" rel=\"nofollow noreferrer\">github.com/spring-cloud/spring-cloud-function/commit/&hellip;</a>"},{"owner":{"user_id":2987525,"display_name":"RichieK"},"edited":false,"comment_id":133692409,"body":"so i bumped spring-cloud-function-context version down to 3.2.7, now this logging is not there anymore"}],"answers":[{"owner":{"user_id":2987525,"display_name":"RichieK"},"up_vote_count":1,"is_accepted":true,"creation_date":1679309345,"answer_id":75789352,"body":"<p>Has been an issue with spring-cloud-function-context 3.2.9, I went back to spring-cloud-function-context 3.2.7 for now</p>\n"}],"owner":{"user_id":2987525,"display_name":"RichieK"},"view_count":224,"up_vote_count":3,"accepted_answer_id":75789352,"answer_count":1,"score":3,"creation_date":1679043817,"question_id":75765589,"body":"<p>in my logs there shows up a message like this every time I push something into the streamBridge to kafka</p>\n<p><code>Invoking function: streamBridge&lt;org.springframework.messaging.Message&lt;java.lang.Object&gt;, org.springframework.messaging.Message&lt;java.lang.Object&gt;&gt;with input type: org.springframework.messaging.Message&lt;java.lang.Object&gt;</code></p>\n<p>I'm using Spring-Boot 2.7.5, and spring-cloud-stream 3.2.7 including the kafka bindings in the same version. I cant find where to turn this of, doesnt seem to be able to control this with logback, as its only printed to the console and not to our logstash as every other message...</p>\n<p>Thanks in advance...</p>\n"},{"tags":["java","spring","kotlin","serialization","jackson"],"answers":[{"owner":{"user_id":11713777,"display_name":"dariosicily"},"up_vote_count":1,"is_accepted":true,"creation_date":1678814436,"answer_id":75736423,"body":"<blockquote>\n<p>Is there a way of defaulting for empty string to null without writing\ncustom deserializer?</p>\n</blockquote>\n<p>Yes, you can enable the <a href=\"https://fasterxml.github.io/jackson-databind/javadoc/2.14/com/fasterxml/jackson/databind/DeserializationFeature.html#ACCEPT_EMPTY_STRING_AS_NULL_OBJECT\" rel=\"nofollow noreferrer\"><code>ACCEPT_EMPTY_STRING_AS_NULL_OBJECT</code></a> deserialization feature to allow JSON empty String value (&quot;&quot;) to be bound as <code>null</code> for POJOs and other structured values (Maps, Collections):</p>\n<pre><code>val mapper = ObjectMapper()\nmapper.enable(DeserializationFeature.ACCEPT_EMPTY_STRING_AS_NULL_OBJECT)\nval testRequest = mapper1.readValue&lt;TestRequest&gt;(request)\n</code></pre>\n<p>If the change is limited to just one endpoint like you described you can create inside the bound controller a new <code>ObjectMapper</code> mapper with the enabled feature to avoid unknown side effects in other parts of your application and convert the <code>RequestBody</code> value to a <code>string</code> value, then passing the string value to the local mapper.</p>\n"}],"owner":{"user_id":19327603,"display_name":"Lofalan"},"view_count":157,"up_vote_count":3,"accepted_answer_id":75736423,"answer_count":1,"score":3,"creation_date":1678797854,"question_id":75733304,"body":"<p>Recently I did a change to an <strong>API</strong> which at first should've been backwards compatible, but due to the client my endpoint started responding <strong>400 Bad Request</strong>, what I did is added optional RequestBody to <strong>PUT</strong> endpoint which shouldn't have cause any issues since it's optional, but client send empty string value which can't be deserialized into object and Jackson fails to deserialize.</p>\n<p>My dto object:</p>\n<pre><code>data class TestRequest(@field:Future val expiresDatetime: Instant? )\n</code></pre>\n<p>Endpoint definition:</p>\n<pre><code>@PutMapping(&quot;/{testId}/revoke&quot;)\nfun revoke(\n@PathVariable testId: String,\n@Valid\n@RequestBody(required = false)\nrequest: TestRequest? = null,\n): TestRevokeResponse =\ntestService.revoke(testId, request)\n</code></pre>\n<p>Upon debugging what is being sent to the endpoint I noticed these headers:\n<code>Content-Type: application/json content-type: application/json; charset=utf-8 content-length: 2</code></p>\n<p>And payload being: <code>&quot;&quot;</code></p>\n<p>Is there a way of defaulting for empty string to null without writing custom deserializer?</p>\n<p>I've tried writting my own deserializer but it seems as an overhead for such a case to create deserializer.</p>\n"},{"tags":["java","spring","spring-webflux","spring-webclient","reactor-netty"],"answers":[{"owner":{"user_id":14183092,"display_name":"kerbermeister"},"up_vote_count":1,"is_accepted":false,"creation_date":1678535945,"answer_id":75704760,"body":"<p>Everything that is related to DNS can be configured with <code>.resolver()</code></p>\n<p>there is method <code>cacheMaxTimeToLive()</code> in <code>NameResolverSpec</code>, from java doc:</p>\n<blockquote>\n<p>Sets the max time to live of the cached DNS resource records\n(resolution: seconds). If the time to live of the DNS resource record\nreturned by the DNS server is greater than this max time to live, this\nresolver will ignore the time to live from the DNS server and will use\nthis max time to live. Default to\nNameResolverProvider.Build.DEFAULT_CACHE_MAX_TIME_TO_LIVE.</p>\n</blockquote>\n<p>So, try this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>HttpClient.create()\n        .resolver(nameResolverSpec -&gt; nameResolverSpec.cacheMaxTimeToLive(Duration.ofSeconds(...)));\n</code></pre>\n"}],"owner":{"user_id":1400909,"display_name":"Aleksandr Filichkin"},"view_count":401,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1678531292,"question_id":75704333,"body":"<p>I'm using WebClient (from Spring-Weblux) and currently it caches DNS for 30 mins.</p>\n<p>I don't see any information how to reduce this DNS cache.\n<strong>How can I reduce it to 30sec?</strong></p>\n<pre><code>HttpClient client = HttpClient.create().responseTimeout(Duration.ofMillis(connectionTimeout))\n                           .option(ChannelOption.CONNECT_TIMEOUT_MILLIS, connectionTimeout);\n\n\nWebClient serviceWebClient = WebClient.builder().clientConnector(neweactorClientHttpConnector(client))\n                           .baseUrl(deployedServiceHost).build();\n</code></pre>\n"},{"tags":["java","jenkins","groovy","jenkins-pipeline","jenkins-groovy"],"answers":[{"owner":{"user_id":2627018,"display_name":"ycr"},"up_vote_count":1,"is_accepted":true,"creation_date":1677692446,"answer_id":75607203,"body":"<p>Check the following code.</p>\n<pre><code>def data = readJSON file: 'package.json'\nString val = &quot;${ReleaseNumber}&quot;\ndata['version'] = val\nwriteJSON file: 'package.json', json: data,  overwrite: true\n\n</code></pre>\n<p><strong>Update with prettyfy</strong></p>\n<p>You will have to import JsonOutput hence add <code>import groovy.json.JsonOutput</code> before the pipeline.</p>\n<pre><code>def data = readJSON file: 'package.json'\nString val = &quot;${ReleaseNumber}&quot;\ndata['version'] = val\ndef formtted = JsonOutput.prettyPrint(JsonOutput.toJson(data))\nwriteFile file: 'package.json', text: formtted,  overwrite: true\n</code></pre>\n"},{"owner":{"user_id":3190389,"display_name":"Wafeeq"},"up_vote_count":0,"is_accepted":false,"creation_date":1677700647,"answer_id":75608368,"body":"<p><em><strong>Jenkins</strong></em> plugin <strong>Content Replace</strong> can also be used with regular expressions like this</p>\n<pre><code>contentReplace(\n  configs: [\n    fileContentReplaceConfig(\n      configs: [\n        fileContentReplaceItemConfig(\n          search: '(Version=)([0-9]+\\\\.[0-9]+\\\\.[0-9]+)',\n          replace: '$11.0.${BUILD_ID}',\n          matchCount: 1,\n          verbose: false,\n        )\n      ],\n      fileEncoding: 'UTF-8',\n       'versions.txt'\n    )\n  ]\n)\n</code></pre>\n"}],"owner":{"user_id":19212183,"display_name":"Nageswar Reddy"},"view_count":237,"up_vote_count":3,"accepted_answer_id":75607203,"answer_count":2,"score":3,"creation_date":1677684535,"question_id":75605778,"body":"<p>I am trying to edit a file package.json and trying to replace a string(&quot;version:1&quot;) inside it using jenkins pipeline script. I have written below script but its not working.</p>\n<pre><code>def readContent = readFile './package.json'\n\nupdatedProp = readContent.replaceAll(&quot;version:.*&quot;,&quot;version:${env.ReleaseNumber}.${BUILD_NUMBER},&quot;)\n \nwriteFile file: './package.json', text: &quot;${updatedProp}&quot;\n\n</code></pre>\n<p>package.json file contains below content.</p>\n<pre><code>{\n    &quot;name&quot;: &quot;application&quot;,\n    &quot;version&quot;: &quot;1.0.0&quot;\n}\n</code></pre>\n<p>I request to correct me and help me building the code.</p>\n"},{"tags":["java","android","gradle","build","compiler-errors"],"comments":[{"owner":{"user_id":1772543,"display_name":"Jony Thrive"},"edited":false,"comment_id":133318052,"body":"I just had this exact error occur today when opening <a href=\"https://github.com/android/nowinandroid\" rel=\"nofollow noreferrer\">this android demo project</a> in the latest macos android studio. i just wanted to see how the new jetpack composables work in practice, you&#39;d think they&#39;d package demo projects to not require fiddling about with gradle. perhaps this is a recent issue that will soon be resolved?"},{"owner":{"user_id":4420271,"display_name":"philburns"},"edited":false,"comment_id":133503875,"body":"Did you check the Gradle Java settings of your IDE? For me, it was, that the &quot;Gradle JVM&quot; in IntelliJ was still set to Java 8. Once I bumped to my installed Java 11 version, everything went fine."},{"owner":{"user_id":1772543,"display_name":"Jony Thrive"},"edited":false,"comment_id":133659762,"body":"i didn&#39;t get back to this yet but i did have trouble compiling other kotlin in the same android studio until i futzed around with upgrading the project jdk, so that&#39;s probably the issue. strange that it would default to java 8 when the project requires a higher version, you&#39;d think that would be in a project config somewhere."}],"answers":[{"owner":{"user_id":2901823,"display_name":"Skello"},"up_vote_count":1,"is_accepted":false,"creation_date":1678157691,"answer_id":75657642,"body":"<p>Might not be the best answer, but I've found that if you go into the build settings, and just set the JDK back to Java 18, everything builds. Apparently, Java 19 is only compatible with gradle 7.6, which the IDE doesn't automatically find. So just set it back to one compatible with 7.5, at least, and everything compiles. If anyone has a better answer, let me know, but I couldn't find one.</p>\n"},{"owner":{"user_id":4090253,"display_name":"Fabrizio Benedetti"},"up_vote_count":0,"is_accepted":false,"creation_date":1682503551,"answer_id":76109517,"body":"<p>In AndroidStudio Flamingo 2022.2.1 I opened the File -&gt; Settings menu, then I selected</p>\n<pre><code>Build, Execution, Deployment\n  Build Tools\n    Gradle\n</code></pre>\n<p>I selected my current project and in the &quot;Gradle JDK&quot; field I selected &quot;Embedded JDK&quot; (which happens to be v17.0.6). Closed the settings with OK, then clicked on &quot;Try again&quot; in the Gradle sync failure notice.</p>\n"}],"owner":{"user_id":2901823,"display_name":"Skello"},"view_count":591,"up_vote_count":4,"answer_count":2,"score":3,"creation_date":1677204234,"question_id":75552010,"body":"<p>My main goal was to create a new app, with just an Empty Activity: no bells nor whistles. However, after trying to be a good developer, and upgrade gradle, like the IDE said, everything went wrong.</p>\n<p>Nothing would build anymore, it couldn't find my JDK, no matter <em>where</em> I put it, it couldn't edit the gradle dependency lock file: the whole nine. I managed to fix the JDK and gradle writing issue, by just moving everything, but I was then left with this last problem:</p>\n<pre><code>&gt; No matching variant of com.android.tools.build:gradle:7.4.1 was found. \n        The consumer was configured to find a runtime of a library compatible with Java 8,\n        packaged as a jar, and its dependencies declared externally, as well as\n        attribute 'org.gradle.plugin.api-version' with value '7.5' but:\n</code></pre>\n<p>Now, this isn't the full error. The <em>full</em> error, is a collapsed wall of text. However, I can reduce it a little bit, since this error is kind of recursive:</p>\n<p>It starts out by saying:</p>\n<pre><code>A problem occurred configuring root project 'app'.\n&gt; Could not resolve all files for configuration ':classpath'.\n   &gt; Could not resolve com.android.tools.build:gradle:7.4.1.\n     Required by:\n         project : &gt; com.android.application:com.android.application.gradle.plugin:7.4.1\n         project : &gt; com.android.library:com.android.library.gradle.plugin:7.4.1\n</code></pre>\n<p>After that it lists a couple of things that used gradle v.7.4.1 in a particular capacity, but then the original problem occurred.</p>\n<p>It seems like it's trying to use 7.4.1, but keeps finding 7.5, but I don't understand the rest. Then a repetitive error was logged, and centralized around some key elements (or 'variants', as they were), those elements being:</p>\n<ol>\n<li>'apiElements'</li>\n<li>'javadocElements'</li>\n<li>'runtimeElements', and</li>\n<li>'sourcesElements'</li>\n</ol>\n<p>For each one it said something like this:</p>\n<pre><code>- Variant &lt;insert variant here&gt; capability com.android.tools.build:gradle:7.4.1 declares\n            a library, packaged as a jar, and its dependencies declared externally:\n</code></pre>\n<p>Then, for each one, it listed the...&quot;reasons&quot;, why the &quot;but:&quot; had to be there, with the following being the parent reason:</p>\n<pre><code> component compatible with Java 11 and the consumer needed a runtime of a component\n compatible with Java 8\n</code></pre>\n<p>which makes no sense to me, since I <em>should</em> be using Java...<strong>19</strong>, but maybe 19 is only the build version and not the advertised version (?) anyway...</p>\n<p>The &quot;other compatible attribute:&quot; sub-reasons contained some of the following, which I will use the list numbers to simplify:</p>\n<p>All variants had this one:</p>\n<pre><code>- Doesn't say anything about org.gradle.plugin.api-version (required '7.5')\n</code></pre>\n<p>and variants 2 and 4 had both of these:</p>\n<pre><code>- Doesn't say anything about its target Java version (required compatibility with Java 8)\n\n- Doesn't say anything about its elements (required them packaged as a jar)\n</code></pre>\n<p>Now, I want to let you know that, yes, I did muck about with the settings <em>at first</em>, but when I found I wasn't making it any better, I uninstalled the entire IDE, including my user settings, and did a fresh download and installation of the newest version of the IDE. I checked the .android folder to find the .lib folder was gone, so <em>maybe</em> it worked (???), but I'm not sure, since it opened up an old project. I didn't remove any of the stuff that it wanted to see.</p>\n<p>I'd like to use this <a href=\"https://i.stack.imgur.com/pgVvS.png\" rel=\"nofollow noreferrer\">image</a> from another post here, which I also messed with in attempt to force it to use 7.5 by changing 7.4.1 to 7.5 and setting them to &quot;true&quot;. It didn't work, so I put it back. Hopefully this was enough information to satisfy the original conditions:</p>\n<ol>\n<li>I gave you what it was supposed to do (just compile: I'm not asking for much)</li>\n<li>I gave you the error (gradle broke all the way)</li>\n<li>I gave the shortest code (which there wasn't any...cuz it's a gradle issue)</li>\n</ol>\n<p>Maybe it needs to move to a different sub-SO: I don't know, but I did my best here. Also if all above was completely abhorrent, I left most of the original error, untouched, down below. However, like I said, there is a more <em>compressed</em> version of this that goes even further but...I don't think you want 150+ lines of error to look at.</p>\n<p>...</p>\n<p>However, I <em>can</em> give you the top-level error:</p>\n<p><code>org.gradle.api.ProjectConfigurationException: A problem occurred configuring root project 'app'</code></p>\n<p>...which just says the same thing.</p>\n<pre><code>          - Variant 'apiElements' capability com.android.tools.build:gradle:7.4.1 declares\n            a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares an API of a component compatible with Java 11 and the consumer needed a runtime of a component compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.5')\n          - Variant 'javadocElements' capability com.android.tools.build:gradle:7.4.1 declares a runtime of a component, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.5')\n          - Variant 'runtimeElements' capability com.android.tools.build:gradle:7.4.1 declares a runtime of a library, packaged as a jar, and its dependencies declared externally:\n              - Incompatible because this component declares a component compatible with Java 11 and the consumer needed a component compatible with Java 8\n              - Other compatible attribute:\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.5')\n          - Variant 'sourcesElements' capability com.android.tools.build:gradle:7.4.1 declares a runtime of a component, and its dependencies declared externally:\n              - Incompatible because this component declares documentation and the consumer needed a library\n              - Other compatible attributes:\n                  - Doesn't say anything about its target Java version (required compatibility with Java 8)\n                  - Doesn't say anything about its elements (required them packaged as a jar)\n                  - Doesn't say anything about org.gradle.plugin.api-version (required '7.5')\n</code></pre>\n"},{"tags":["java","spring","spring-boot","unit-testing","spring-mvc"],"answers":[{"owner":{"user_id":531232,"display_name":"chris"},"up_vote_count":1,"is_accepted":true,"creation_date":1676065462,"answer_id":75416388,"body":"<p>Try using:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static org.hamcrest.Matchers.containsString;\n\n// ...\nmockMvc.perform(get(OIDC_INIT_FLOW_ENDPOINT)\n                 .contentType(MediaType.APPLICATION_FORM_URLENCODED)\n                 .params(initFlowRequestParams))\n        .andExpect(status().isFound())\n        .andExpect(header().exists(LOCATION))\n        .andExpect(header().string(LOCATION, containsString(&quot;openId&quot;)));\n</code></pre>\n<p>My hunch is that the <code>contains</code> method you are using is a Mockito argument matcher which leads you to the wrong overload of the <code>string()</code> match method. The overload you want to use expects a Hamcrest matcher.</p>\n"}],"owner":{"user_id":8600439,"display_name":"Edgar Hernandez "},"view_count":68,"up_vote_count":3,"accepted_answer_id":75416388,"answer_count":1,"score":3,"creation_date":1676055208,"question_id":75415074,"body":"<p>I'm testing an endpoint with MockMvc. This endpoints does a redirect at the end, so it's setting the redirect URL in the location header. This url has several params, so the resulting redirect url it's like this:</p>\n<pre><code>https://platform:8080/auth?scope=openid&amp;response_type=id_token&amp;response_mode=form_post&amp;prompt=none&amp;client_id=toolid&amp;redirect_uri=https://localhost:8080/tool/token/receiver&amp;login_hint=loginHint&amp;state=1d73c90f-fe03-47dc-9e28-ed416fad7773&amp;nonce=7b5e7240-161e-4d78-8e32-54923c9ce04a\n</code></pre>\n<p>I want to check that the 9 params are present at least. I'm thinking in something like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>mockMvc.perform(get(OIDC_INIT_FLOW_ENDPOINT)\n                .contentType(MediaType.APPLICATION_FORM_URLENCODED)\n                .params(initFlowRequestParams))\n        .andExpect(status().isFound())\n        .andExpect(header().exists(LOCATION))\n        .andExpect(header().string(LOCATION, contains(&quot;openId&quot;)));\n</code></pre>\n<p>This piece of code doesn't work cause the last &quot;andExpect&quot; but it shows my intent. How can I do achieve my goal?</p>\n<p>EDIT:</p>\n<p>With the help of Chris I was able to find a solution for my enquiry:</p>\n<pre><code>mockMvc.perform(get(OIDC_INIT_FLOW_ENDPOINT).contentType(MediaType.APPLICATION_FORM_URLENCODED).params(initFlowRequestParams))\n                .andExpect(status().isFound()).andExpect(header().exists(LOCATION)).andExpect(header().string(LOCATION,\n                        Matchers.allOf(containsString(&quot;scope&quot;), containsString(&quot;response_type&quot;), containsString(&quot;response_type&quot;),\n                                containsString(&quot;prompt&quot;), containsString(&quot;client_id&quot;), containsString(&quot;redirect_uri&quot;), containsString(&quot;login_hint&quot;),\n                                containsString(&quot;state&quot;), containsString(&quot;nonce&quot;))));\n</code></pre>\n"},{"tags":["java","maven","maven-plugin"],"comments":[{"owner":{"user_id":40342,"display_name":"Joachim Sauer"},"edited":false,"comment_id":133039821,"body":"AFAIK Maven runs all of its plugins in the same JVM, so you can&#39;t do that. The few cases where you can specify a JVM to run (such as for tests) are when the plugin itself launches a new JVM."},{"owner":{"user_id":296328,"display_name":"khmarbaise"},"edited":false,"comment_id":133040495,"body":"Which plugin has such issues? Can you name it?"}],"answers":[{"owner":{"user_id":927493,"display_name":"J Fabian Meier"},"up_vote_count":1,"is_accepted":false,"creation_date":1676025884,"answer_id":75410007,"body":"<p>Depending on the plugins and the context, you may solve the problem by using separate Maven runs, i.e. run</p>\n<p><code>mvn clean install</code></p>\n<p>with JDK17 and then run <code>mvn some:plugin</code> with a different JDK.</p>\n"}],"owner":{"user_id":652378,"display_name":"Chirlo"},"view_count":99,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1675947182,"question_id":75398885,"body":"<p>I have a pom including some plugins. The project's sources are java 17 and as such, the maven build is run with a jdk17+. Now, one of the plugins bound to the <code>site</code> lifecycle, let's say plugin <code>P1</code>,  is older and it doesn't work with java versions newer than 9 ( because of some deprecated API that is no longer present in the jdk)</p>\n<p>My question is: is it possible to somehow configure in the pom that <strong>some plugins</strong> should be run with a different java version?</p>\n<p>My intention is to run the plugin as it is, not wanting to re-write it or modify it in any way.\nI know about maven <code>toolchains</code>, but I don't see how this applies, as that configures the jdk version for all plugins.</p>\n"},{"tags":["java","intellij-idea","junit","cucumber","maven-3"],"comments":[{"owner":{"user_id":2331527,"display_name":"floating cat"},"edited":false,"comment_id":132989999,"body":"&quot;could not find or load main class fully.qualified.MainClass&quot;: the bundled jar may doesn&#39;t include this class for some reason, unzip the jar can see if it contain that class; &quot;java.lang.ClassNotFoundException: io.cucumber.core.cli.Main&quot;: it seems that jar is not a flat jar which doesn&#39;t include all libraries like cucumber; &quot;I&#39;ve run mvn clean compile assembly:single, it&#39;s output a CucumberSelenium-1.0-SNAPSHOT-jar-with-dependencies.jar file, but it won&#39;t runs.&quot;: what&#39;s the error in this case?"},{"owner":{"user_id":11002,"display_name":"tgdavies"},"edited":false,"comment_id":132990534,"body":"If the missing class is in cucumber-java try making that compile scope instead of test scope."},{"owner":{"user_id":21162261,"display_name":"L&#226;m Nghĩa"},"edited":false,"comment_id":132990955,"body":"thanks @tgdavies now the main class problem solved but the new problem is no features found at classpath"}],"answers":[{"owner":{"user_id":3945473,"display_name":"M.P. Korstanje"},"up_vote_count":0,"is_accepted":false,"creation_date":1675760130,"answer_id":75370945,"body":"<p>You have a a few problems going on.</p>\n<ol>\n<li><p>The <code>maven-assembly-plugin</code> should not be a in the <code>dependencies</code> section. It is not a dependency used by the runtime code of your project.</p>\n</li>\n<li><p>Your step definitions, feature files and glue code located in <code>src/test</code> are not included in the jar file build by the assembly plugin.</p>\n</li>\n<li><p>Your <code>test</code> scoped dependencies will also not be included by the assembly plugin either.</p>\n</li>\n<li><p>You must configure the <code>containerDescriptorHandler</code> of the assembly plugin with <code>metaInf-services</code> or the plugin will not merge files in <code>META-INF/services</code> correctly.</p>\n</li>\n</ol>\n<p>You can verify most of these by opening the generated jar file (it's a <code>.zip</code> file in disguise).</p>\n<blockquote>\n<p>My project run from Intellij with no problem.</p>\n</blockquote>\n<p>When running tests in Intelij you are using the <code>test</code> scope, the jar file only includes <code>runtime</code> scoped code.</p>\n<p>For a more comparable test you must create a new run configuration that invokes the main method.</p>\n<blockquote>\n<p>I found several tutorial but none of them a work.</p>\n</blockquote>\n<p>It appears that you are relatively new to Java and Maven. It would be prudent to follow a proper course first rather than tutorials. You are missing fundamental knowledge that is generally not taught in tutorials.</p>\n<blockquote>\n<p>I want to create a executable jar file so anyone can run it from their computer with least install require components.</p>\n</blockquote>\n<p>It's also prudent to consider why you are doing this.</p>\n<p>Tests will typically change as quickly as the source code they are testing does. Manually distribution of jar files won't keep up with this.</p>\n<p>This means it's generally better to integrate the tests and the test source code into the automated build pipeline of the project they test.</p>\n<p>This also means that you don't need to distribute your tests as a jar. Rather you should expect (and possibly train) people to use Maven, GIT and Java.</p>\n"},{"owner":{"user_id":2597758,"display_name":"WebViewer"},"up_vote_count":1,"is_accepted":false,"creation_date":1676798841,"answer_id":75499141,"body":"<p>I just came across a similar issue and, despite trying the ubiquitous</p>\n<pre><code>java -cp . org.example.Main\n</code></pre>\n<p>(while on current directory being where the Main.class is), I kept getting this dreaded</p>\n<blockquote>\n<p>&quot;Error: Could not find or load main class&quot;</p>\n</blockquote>\n<p>I eventually resorted to <strong>comparing</strong> the actual command with parameters invoked by IntelliJ (on IntelliJ IDEA's debug log) with mine, and discovered that the following solves the issue:</p>\n<pre><code>java -cp C:\\Users\\WebViwer\\IdeaProjects\\MyProj\\target\\classes org.example.Main\n</code></pre>\n<p>I am guessing that once the fully qualified class name is specified, the current directory (where the class resides) is no longer valid as a classpath: Only the top level <code>classes</code> directory should be specified (in this <code>org.example</code>, 2 levels up).</p>\n"}],"owner":{"user_id":21162261,"display_name":"L&#226;m Nghĩa"},"view_count":99,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1675743737,"question_id":75368933,"body":"<p>I want to create a executable jar file so anyone can run it from their computer with least install require components.</p>\n<p>I found several tutorial but none of them a work.</p>\n<p>When I execute jar file I've built they are return error like:\nError: Could not find or load main class fully.qualified.MainClass\nCaused by: java.lang.ClassNotFoundException: fully.qualified.MainClass</p>\n<p>OR like this:\nError: Could not find or load main class io.cucumber.core.cli.Main\nCaused by: java.lang.ClassNotFoundException: io.cucumber.core.cli.Main</p>\n<p>My project run from Intellij with no problem.</p>\n<p>Here my project structure\n<a href=\"https://i.stack.imgur.com/NcQzf.png\" rel=\"nofollow noreferrer\">https://i.stack.imgur.com/NcQzf.png</a></p>\n<p>And my pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;CucumberSelenium&lt;/artifactId&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;cucumber.version&gt;7.6.0&lt;/cucumber.version&gt;\n        &lt;selenium.version&gt;4.8.0&lt;/selenium.version&gt;\n        &lt;webdrivermanager.version&gt;5.2.1&lt;/webdrivermanager.version&gt;\n        &lt;junit.jupiter.version&gt;5.9.0&lt;/junit.jupiter.version&gt;\n        &lt;apache.common.version&gt;2.4&lt;/apache.common.version&gt;\n        &lt;projectlombok.version&gt;1.18.24&lt;/projectlombok.version&gt;\n        &lt;maven.compiler.plugin.version&gt;3.10.1&lt;/maven.compiler.plugin.version&gt;\n        &lt;maven.surefire.plugin.version&gt;3.0.0-M7&lt;/maven.surefire.plugin.version&gt;\n        &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n    &lt;/properties&gt;\n\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n                &lt;artifactId&gt;cucumber-bom&lt;/artifactId&gt;\n                &lt;version&gt;${cucumber.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.junit&lt;/groupId&gt;\n                &lt;artifactId&gt;junit-bom&lt;/artifactId&gt;\n                &lt;version&gt;${junit.jupiter.version}&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-java&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.cucumber&lt;/groupId&gt;\n            &lt;artifactId&gt;cucumber-junit-platform-engine&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- JUnit Platform --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.platform&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-platform-suite&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter-engine&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.junit.jupiter&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Selenium --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.seleniumhq.selenium&lt;/groupId&gt;\n            &lt;artifactId&gt;selenium-java&lt;/artifactId&gt;\n            &lt;version&gt;${selenium.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Web Driver Manager --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.github.bonigarcia&lt;/groupId&gt;\n            &lt;artifactId&gt;webdrivermanager&lt;/artifactId&gt;\n            &lt;version&gt;${webdrivermanager.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;!-- Apache Common --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.directory.studio&lt;/groupId&gt;\n            &lt;artifactId&gt;org.apache.commons.io&lt;/artifactId&gt;\n            &lt;version&gt;${apache.common.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;${projectlombok.version}&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n            &lt;version&gt;3.4.2&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;sourceDirectory&gt;src/main/java&lt;/sourceDirectory&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.compiler.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;19&lt;/source&gt;\n                    &lt;target&gt;19&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven.surefire.plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;properties&gt;\n                        &lt;configurationParameters&gt;\n                            cucumber.junit-platform.naming-strategy=long\n                        &lt;/configurationParameters&gt;\n                    &lt;/properties&gt;\n                    &lt;debugForkedProcess&gt;true&lt;/debugForkedProcess&gt;\n                    &lt;forkCount&gt;0&lt;/forkCount&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-assembly-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.4.2&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;archive&gt;\n                        &lt;manifest&gt;\n                            &lt;mainClass&gt;io.cucumber.core.cli.Main&lt;/mainClass&gt;\n                        &lt;/manifest&gt;\n                    &lt;/archive&gt;\n                    &lt;descriptorRefs&gt;\n                        &lt;descriptorRef&gt;jar-with-dependencies&lt;/descriptorRef&gt;\n                    &lt;/descriptorRefs&gt;\n                &lt;/configuration&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;id&gt;assemble-all&lt;/id&gt;\n                        &lt;phase&gt;package&lt;/phase&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;single&lt;/goal&gt;\n                        &lt;/goals&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>I've run mvn clean compile assembly:single, it's output a CucumberSelenium-1.0-SNAPSHOT-jar-with-dependencies.jar file, but it wont runs.</p>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":132907328,"body":"The lombok <code>Nonnull</code> has a totally different approach/meaning then the validation <code>NotNull</code>. Also you are using <code>@MessageMapping</code> so this implies a websocket connection (if it is a controller). You would need <code>@Payload</code> and <code>@Validated</code> for validation with JSR303 annotations to work. You seem to be lacking the first one. And I would strongly suggest to use the validation one and not the lombok one."},{"owner":{"user_id":6625422,"display_name":"Henry Fung"},"edited":false,"comment_id":132907701,"body":"@M.Deinum I just took away the lombok <code>@Nonnull</code> and replaced with validation <code>@NotNull</code>. There used to be the <code>@Payload</code> but with or without it, the validation is still not performed..."},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":132908415,"body":"Which annotations are you using, do you have <code>spring-boot-starter-validation</code> on your dependencies? Or just <code>validation-api</code> (if so replace with the starter). Also which annotation you are using and which version of Spring Boot are you using? Please add your pom.xml or build.gradle."},{"owner":{"user_id":6625422,"display_name":"Henry Fung"},"edited":false,"comment_id":132923387,"body":"@M.Deinum Just added <code>pom.xml</code> to the question. I have <code>spring-boot-starter-validation</code>."},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":132927093,"body":"Remove the <code>hibernate-validator</code> dependency and the version of the <code>spring-boot-starter-validation</code>. You are now mixing SPring Boot 2.7.7 and Spring Boot 3.0.2 modules which aren&#39;t compatible (never mix modules from different versions of a framework). The <code>spring-boot-starter-validation</code> will include the <code>hibernate-validator</code> which is compatible with your version of Spring (Boot). hibernate validator 8 isn&#39;t compatible. Spring Boot 2.7 is for JavaEE and Spring Boot 3.0 is JakartaEE (different namespaces). Hibernate validator 8 is JakartaEE."}],"answers":[{"owner":{"user_id":5462346,"display_name":"Anurag Ambuj"},"up_vote_count":0,"is_accepted":false,"creation_date":1675340240,"answer_id":75323057,"body":"<p>I guess you are looking for <code>@NotEmpty</code> or <code>@NotNull</code> in jakarta-validation api. Kindly consider the sample below.</p>\n<pre><code>import lombok.Data;\nimport javax.validation.constraints.NotEmpty;\n\n@Data\npublic class Data {\n    \n    @NotEmpty(message=&quot;Name cannot be null or blank&quot;)\n    private String name;\n}\n</code></pre>\n<p>Validations are present in</p>\n<pre><code>&lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n      &lt;version&gt;Your spring boot version&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n"},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"up_vote_count":1,"is_accepted":true,"creation_date":1675411479,"answer_id":75332972,"body":"<p>The problem is your <code>pom.xml</code>, you are mixing modules from different versions of Spring Boot, which is not going to work.</p>\n<p>Spring Boot 3.0 and higher are for JakartaEE while Spring Boot 2.7 and lower are for JavaEE. The Hibernate Validator version you are including is for JakartaEE which isn't compatible with Spring Framework 5 (used by Spring Boot 2.7). Hence no validation will take place simply because it doesn't understand the annotations.</p>\n<p>To fix remove the <code>version</code> from the <code>spring-boot-starter-validation</code> and remove the <code>hibernate-validator</code> dependency. Everything with compatible versions will be pulled in by <code>spring-boot-starter-validation</code>.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.7&lt;/version&gt;\n        &lt;relativePath /&gt;\n        &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo2&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo2&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;18&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-amqp&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-reactor-netty&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p><strong>TIP:</strong> Instead of using <code>spring-rabbit</code> as a single dependency use <code>spring-boot-starter-amqp</code> which will pull in all you need.</p>\n<p>When changing the dependencies you probably get compilation errors on the validation annotations. Change the package from <code>jakarta.validation</code> to <code>javax.validation</code> to import the proper validation annotations.</p>\n"}],"owner":{"user_id":6625422,"display_name":"Henry Fung"},"view_count":305,"up_vote_count":3,"accepted_answer_id":75332972,"answer_count":2,"score":3,"creation_date":1675328986,"question_id":75320853,"body":"<h1>Background</h1>\n<p>I have a data class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\npublic class Data {\n    @lombok.NonNull\n    private String name;\n}\n</code></pre>\n<p>a controller</p>\n<pre class=\"lang-java prettyprint-override\"><code>@MessageMapping(&quot;/data&quot;)\npublic void handleData(@Validated Data data) throws Exception {\n    if (data.getName().compareTo(&quot;Alice&quot;) == 0) {\n        logger.info(&quot;Alice is here!&quot;);\n    }\n}\n</code></pre>\n<p>and a bean to config jackson to convert booleans to integers (True -&gt; 1, False -&gt; 0)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Bean\nObjectMapper registerObjectMapper() {\n    ObjectMapper mapper = new ObjectMapper();\n\n    SimpleModule module = new SimpleModule(&quot;MyBoolSerializer&quot;);\n    module.addSerializer(Boolean.class, new MyBoolSerializer());\n    module.addDeserializer(Boolean.class, new MyBoolDeserializer());\n    module.addSerializer(boolean.class, new MyBoolSerializer());\n    module.addDeserializer(boolean.class, new MyBoolDeserializer());\n    \n    mapper.configure(SerializationFeature.FAIL_ON_EMPTY_BEANS, false);\n\n    return mapper;\n}\n</code></pre>\n<p>When I make a request to <code>/data</code> without setting the <code>name</code> parameter, Jackson will set it to <code>null</code>. However, I get the following exception (unwrapped)</p>\n<pre><code>org.springframework.messaging.converter.MessageConversionException: \nCould not read JSON: Cannot construct instance of `com.example.myapp.entity.Data`\n(no Creators, like default constructor, exist): \ncannot deserialize from Object value (no delegate- or property-based Creator)\n</code></pre>\n<h1>Attempted fix</h1>\n<p>So then I added <code>@NoArgsConstructor</code> to <code>Data</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@NoArgsConstructor   // &lt;&lt;&lt;&lt;\npublic class Data {\n    @lombok.NonNull\n    private String name;\n}\n</code></pre>\n<p>Now request to <code>/data</code> will result in <code>NullPointerException</code>. The parameters are NOT null-checked and the <code>if-statement</code> is run.</p>\n<p>I tried to use <code>hibernate-validator</code>'s <code>@NotNull</code> annotation to the <code>name</code> attribute in Data, but the result is the same: <code>NPE</code>.</p>\n<h1>Question</h1>\n<p>What I thought about the <code>@NonNull</code> and <code>@NotNull</code> annotations is that they help validating the data so that I don't need to manually validate them in controllers(check null, check within range, etc.). However it seems to be only valid if the default constructor does not exist. It makes sense because null-checks are not performed in default constructor (no data to validate...).</p>\n<p><strong>But then it contradicts with the exception I encountered.</strong></p>\n<h3>Info that might help</h3>\n<p>I have <code>amqp</code> enabled and it has its own <code>MessageConverter</code> bean that returns a new <code>Jackson2JsonMessageConverter</code> instance.</p>\n<pre class=\"lang-java prettyprint-override\"><code>import org.springframework.amqp.support.converter.MessageConverter;\n@Bean\nMessageConverter jsonMessageConverter() {\n    return new Jackson2JsonMessageConverter();\n}\n</code></pre>\n<p>Any thoughts?</p>\n<p>BTW, the title might be a bit ambiguous or misleading, but I genuinely have no idea what the problem is.</p>\n<p>--- Edit 1:\npom.xml</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.7&lt;/version&gt;\n        &lt;relativePath /&gt;\n        &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;demo2&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;demo2&lt;/name&gt;\n    &lt;description&gt;Demo project for Spring Boot&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;18&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n            &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n            &lt;version&gt;8.0.0.Final&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.amqp&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-rabbit&lt;/artifactId&gt;\n            &lt;version&gt;2.4.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-reactor-netty&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-security&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-websocket&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","android","android-permissions","android-windowmanager","system-alert-window"],"answers":[{"owner":{"user_id":21083805,"display_name":"John"},"up_vote_count":0,"is_accepted":false,"creation_date":1678418684,"answer_id":75692021,"body":"<p>Oh stupid mistake, the target sdk version in my AndroidManifest.xml should've been greater or equal than the android version of my deployable device or emulator...</p>\n<p>It's ok now. The application can be seen properly now.</p>\n"},{"owner":{"user_id":1342672,"display_name":"Xlythe"},"up_vote_count":1,"is_accepted":false,"creation_date":1682236909,"answer_id":76083732,"body":"<p>I had the same issue. It turned out one of the dependencies I was using has</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; android:maxSdkVersion=&quot;29&quot; /&gt;\n</code></pre>\n<p>and the maxSdkVersion was overwriting the permission in my app.</p>\n<p>I had to manually specify to ignore that attribute with tools:remove.</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; tools:remove=&quot;android:maxSdkVersion&quot; /&gt;\n</code></pre>\n"}],"owner":{"user_id":21083805,"display_name":"John"},"view_count":106,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1674699808,"question_id":75241783,"body":"<p>I am creating an android application that uses WindowManager type: <code>TYPE_APLICATION_OVERLAY</code> so it requires this permission in the manifest file:</p>\n<p><code>&lt;uses-permission android:name=&quot;android.permission.SYSTEM_ALERT_WINDOW&quot; /&gt;</code></p>\n<p>Which already exists in the AndroidManifest.xml.</p>\n<p>The problem is that once I launched my app, then go manually to my device's <em>Draw Over Other Apps</em> settings to grant the said permission, my app <strong>is not there</strong>.</p>\n<p>Is there something missing? Or is <em>Draw Over Other Apps</em> settings the correct place to go to grant <code>SYSTEM_ALERT_WINDOW</code>?</p>\n<p>My target device is android 11, api level 30.</p>\n<p>I've followed exactly this <a href=\"https://medium.com/@kevalpatel2106/create-chat-heads-like-facebook-messenger-32f7f1a62064\" rel=\"nofollow noreferrer\">instruction</a> here.</p>\n<p>I've tried launching an <code>Intent</code> action <code>Settings.ACTION_MANAGE_OVERLAY_PERMISSION</code> to automatically go the same setting to grant permission but it just go to my device's <em>Draw Over Other Apps</em> settings to which my app is excluded.</p>\n<p><a href=\"https://i.stack.imgur.com/AVbGh.jpg\" rel=\"nofollow noreferrer\">Screenshot to Draw Over Other Apps Settings</a></p>\n"},{"tags":["java","android","mongodb"],"answers":[{"owner":{"user_id":6700630,"display_name":"Harri Kulmala"},"up_vote_count":1,"is_accepted":false,"creation_date":1681827275,"answer_id":76045693,"body":"<p>Had the same problem, downgraded mongodb driver version to 4.5.1 and the problem went away.</p>\n<p><code>implementation 'org.mongodb:mongodb-driver-sync:4.5.1' </code></p>\n<p>Might be related to Java versions and mongodb driver using newer Java features (e.g. the record functionality in Java 16-&gt;). I did not investigate though, since the downgrading works fine in my case.</p>\n"}],"owner":{"user_id":21072330,"display_name":"aonat"},"view_count":107,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1674560956,"question_id":75221050,"body":"<p>When I try add mongodb-driver implementation to dependencies block at build.gradle I get this build error. I try downgrade and enable to enableDexEnable for solve this problem but problem is continue. I search almost internet but can not have a solution</p>\n<pre><code>&gt; Task :app:mergeExtDexDebug\nAGPBI: {&quot;kind&quot;:&quot;error&quot;,&quot;text&quot;:&quot;Invalid build configuration. Attempt to create a global synthetic for 'Record desugaring' without a global-synthetics consumer.&quot;,&quot;sources&quot;:[{}],&quot;tool&quot;:&quot;D8&quot;}\nInvalid build configuration. Attempt to create a global synthetic for 'Record desugaring' without a global-synthetics consumer.\n\n\n&gt; Task :app:mergeExtDexDebug FAILED\nExecution failed for task ':app:mergeExtDexDebug'.\n&gt; Could not resolve all files for configuration ':app:debugRuntimeClasspath'.\n   &gt; Failed to transform bson-record-codec-4.8.1.jar (org.mongodb:bson-record-codec:4.8.1) to match attributes {artifactType=android-dex, asm-transformed-variant=NONE, dexing-enable-desugaring=true, dexing-enable-jacoco-instrumentation=false, dexing-is-debuggable=true, dexing-min-sdk=24, org.gradle.category=library, org.gradle.libraryelements=jar, org.gradle.status=release, org.gradle.usage=java-runtime}.\n      &gt; Execution failed for DexingNoClasspathTransform: C:\\Users\\user\\.gradle\\caches\\modules-2\\files-2.1\\org.mongodb\\bson-record-codec\\4.8.1\\339c92291f24acf896334ba9a2a5bf52fd462115\\bson-record-codec-4.8.1.jar.\n         &gt; Error while dexing.\n\n* Try:\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n</code></pre>\n<p>build.gradle page;</p>\n<pre><code>plugins {\n    id 'com.android.application'\n}\n\nandroid {\n    namespace 'com.example.appname'\n    compileSdk 33\n\n    defaultConfig {\n        applicationId &quot;com.example.appname&quot;\n        minSdk 21\n        multiDexEnabled true\n        targetSdk 33\n        versionCode 1\n        versionName &quot;1.0&quot;\n\n        testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n\n\n    }\n    buildTypes {\n        release {\n\n            minifyEnabled false\n            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n        }\n    }\n    compileOptions {\n        sourceCompatibility JavaVersion.VERSION_11\n        targetCompatibility JavaVersion.VERSION_11\n    }\n    buildToolsVersion '33.0.1'\n}\n\ndependencies {\n\n    implementation 'androidx.appcompat:appcompat:1.6.0'\n    implementation 'com.google.android.material:material:1.7.0'\n    implementation 'androidx.constraintlayout:constraintlayout:2.1.4'\n    implementation 'org.mongodb:mongodb-driver-sync:4.8.2' //&lt;-mongodb here\n    testImplementation 'junit:junit:4.13.2'\n    androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n    androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n}\n</code></pre>\n"},{"tags":["java","math","matrix","covariance","coordinate-transformation"],"comments":[{"owner":{"user_id":20460267,"display_name":"Simon Goater"},"edited":false,"comment_id":132727187,"body":"I&#39;m not sure I&#39;m understanding what you are trying to do here. Do you have the 6 ENU values EP, NP, UP, EV, NV, UV? In your covariance matrix, is each element a product of two of these? Are you trying to create a similar covariance matrix but in ECEF coordinates?"},{"owner":{"user_id":6258585,"display_name":"Travis Whitten"},"edited":false,"comment_id":132728173,"body":"I am getting the 6x6 variance-covariance ENU matrix from the RADAR and I am trying to transform it into a 6x6 variance-covariance in ECEF. With that said, I have all of the variances and covariances for all elements of the ENU matrix. I am just not sure what the Rotational Matrix should look like. Does that make sense?"},{"owner":{"user_id":6258585,"display_name":"Travis Whitten"},"edited":false,"comment_id":132735077,"body":"@SimonGoater Also, each element is not the product of the two. The diagonals are the variances and all other elements are the covariances. [EP][EP]=Cov(EP,EP)=Variance(EP)=&lt;some floating point value&gt;m^2, [EP][NP]=Cov(EP,NP)=&lt;some floating point value&gt;m^2, and so on. I am actually receiving floating point values for each element in the ENU matrix where the matrix is symmetric(i.e (col,row)=(row,col))."},{"owner":{"user_id":15161640,"display_name":"Mark H"},"edited":false,"comment_id":132793628,"body":"Try to zero out the upper right and lower left blocks (the off-diagonal blocks) in your rotation matrix."}],"answers":[{"owner":{"user_id":15161640,"display_name":"Mark H"},"up_vote_count":2,"is_accepted":true,"creation_date":1674939471,"answer_id":75270855,"body":"<p>There are two fixes to make:</p>\n<ol>\n<li>Update your rotation matrix to have zeros in the off-diagonal blocks.</li>\n<li>Calculate C' = RCR<sup>T</sup>, where C' is the ECEF covariance matrix and C is ENU covariance matrix, and R is the rotation matrix from ENU to ECEF for your position-velocity combination.</li>\n</ol>\n<p><strong>Reasoning for Fix #1</strong></p>\n<p>The position and velocity are like two different data points to be rotated and the rotation matrix should reflect their independence.  To do that, take your original 3x3 rotation matrix for ENU -&gt; ECEF:</p>\n<pre>\nR = | -sin(λ), -cos(λ)*sin(φ), cos(λ)*cos(φ) | \n    |  cos(λ), -sin(λ)*sin(φ), sin(λ)*cos(φ) |\n    |       0,         cos(φ),        sin(φ) |\n</pre>\n<p>And use it to build a 6x6 rotation matrix (let '0' = 3x3 matrix of 0s)</p>\n<pre>\nR = |R 0|\n    |0 R|\n</pre>\n<p>Symbolic calculation of a rotation:</p>\n<pre>\nR = | R11 R12 R13   0   0   0 |\n    | R21 R22 R23   0   0   0 |\n    | R31 R32 R33   0   0   0 | \n    |   0   0   0 R11 R12 R13 |\n    |   0   0   0 R21 R22 R23 |\n    |   0   0   0 R31 R32 R33 |\n\nx = | e1 |\n    | n1 |\n    | u1 |\n    | e2 |\n    | n2 |\n    | u2 |\n\nx' = Rx = | R11*e1 + R12*n1 + R13*u1 +   0*e2 +   0*n2 +   0*u2 |\n          | R21*e1 + R22*n1 + R23*u1 +   0*e2 +   0*n2 +   0*u2 |\n          | R31*e1 + R32*n1 + R33*u1 +   0*e2 +   0*n2 +   0*u2 |\n          |   0*e1 +   0*n1 +   0*u1 + R11*e2 + R12*n2 + R13*u2 |\n          |   0*e1 +   0*n1 +   0*u1 + R21*e2 + R22*n2 + R23*u2 |\n          |   0*e1 +   0*n1 +   0*u1 + R31*e2 + R32*n2 + R33*u2 |\n</pre>\n<p>The result is a 6x1 vector that is basically the stacking of one independently rotated (e,n,u) on top of another.</p>\n<p><strong>Reasoning for Fix #2</strong></p>\n<pre>\nlet X = | EP_1  EP_2 .. EP_n|  (i.e. a set of measurements)\n        | NP_1  NP_2 .. NP_n|\n        | UP_1  UP_2 .. UP_n|\n        | EV_1  EV_2 .. EV_n|\n        | NV_1  NV_2 .. NV_n|\n        | UV_1  UV_2 .. UV_n|\n\nlet Xt = tranpose(X)\nlet C = variance-covariance matrix\n\nC = E(XXt) - E(X)E(Xt)\n\nlet X' = RX = rotated measurements\nlet C' = variance-covariance matrix of rotated measurements\n\nC' = E(X'X't) - E(X')E(X't)\n   = E(RXXtRt) - E(RX)E(XtRt)     remember (AB)t = BtAt\n   = RE(XXt)Rt - RE(X)E(Xt)Rt\n   = R(E(XXt) - E(X)E(Xt))Rt\nC' = RCRt\n</pre>\n<p>That shows that when a set of measurements is rotated, its original variance-covariance matrix can be transformed into the new coordinate system as a function of the rotation matrix.</p>\n"},{"owner":{"user_id":9284870,"display_name":"Austin Leath"},"up_vote_count":0,"is_accepted":false,"creation_date":1674943339,"answer_id":75271216,"body":"<p>I <em>think</em> I have done what you are looking for.. So basically it seems that there may be an issue with the implementation of the <code>createRotationMatrixV3</code> function or with the input ENU covariance matrix. I took a little bit of time to mess around with the sin and cos Math functions to try and do it manually.</p>\n<p>Here is the code that I ended up with: <a href=\"https://codecatch.net/post/008da886-fa1a-4995-a024-f58d883e0504\" rel=\"nofollow noreferrer\">https://codecatch.net/post/008da886-fa1a-4995-a024-f58d883e0504</a></p>\n"}],"owner":{"user_id":6258585,"display_name":"Travis Whitten"},"view_count":386,"up_vote_count":4,"accepted_answer_id":75270855,"answer_count":2,"score":3,"creation_date":1674144129,"question_id":75175039,"body":"<p>I am currently working with a RADAR that outputs a 6x6 covariance matrix with every track in the following format:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: center;\">Col1</th>\n<th style=\"text-align: center;\">Col2</th>\n<th style=\"text-align: center;\">Col3</th>\n<th style=\"text-align: center;\">Col4</th>\n<th style=\"text-align: center;\">Col5</th>\n<th style=\"text-align: center;\">Col6</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: center;\">(EP)(EP)</td>\n<td style=\"text-align: center;\">(EP)(NP)</td>\n<td style=\"text-align: center;\">(EP)(UP)</td>\n<td style=\"text-align: center;\">(EP)(EV)</td>\n<td style=\"text-align: center;\">(EP)(NV)</td>\n<td style=\"text-align: center;\">(EP)(UV)</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">(NP)(EP)</td>\n<td style=\"text-align: center;\">(NP)(NP)</td>\n<td style=\"text-align: center;\">(NP)(UP)</td>\n<td style=\"text-align: center;\">(NP)(EV)</td>\n<td style=\"text-align: center;\">(NP)(NV)</td>\n<td style=\"text-align: center;\">(NP)(UV)</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">(UP)(EP)</td>\n<td style=\"text-align: center;\">(UP)(NP)</td>\n<td style=\"text-align: center;\">(UP)(UP)</td>\n<td style=\"text-align: center;\">(UP)(EV)</td>\n<td style=\"text-align: center;\">(UP)(NV)</td>\n<td style=\"text-align: center;\">(UP)(UV)</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">(EV)(EP)</td>\n<td style=\"text-align: center;\">(EV)(NP)</td>\n<td style=\"text-align: center;\">(EV)(UP)</td>\n<td style=\"text-align: center;\">(EV)(EV)</td>\n<td style=\"text-align: center;\">(EV)(NV)</td>\n<td style=\"text-align: center;\">(EV)(UV)</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">(NV)(EP)</td>\n<td style=\"text-align: center;\">(NV)(NP)</td>\n<td style=\"text-align: center;\">(NV)(UP)</td>\n<td style=\"text-align: center;\">(NV)(EV)</td>\n<td style=\"text-align: center;\">(NV)(NV)</td>\n<td style=\"text-align: center;\">(NV)(UV)</td>\n</tr>\n<tr>\n<td style=\"text-align: center;\">(UV)(EP)</td>\n<td style=\"text-align: center;\">(UV)(NP)</td>\n<td style=\"text-align: center;\">(UV)(UP)</td>\n<td style=\"text-align: center;\">(UV)(EV)</td>\n<td style=\"text-align: center;\">(UV)(NV)</td>\n<td style=\"text-align: center;\">(UV)(UV)</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Where, <strong>EP = East Postion, NP = North Postion,UP = Up Position, EV = East Velocity, NV = North Velocity, and UV = UP Velocity. Let [EP][EP]=Cov(EP,EP)=Var(EP) and so on</strong></p>\n<p>In my research I have found this: <a href=\"https://gssc.esa.int/navipedia/index.php/Transformations_between_ECEF_and_ENU_coordinates\" rel=\"nofollow noreferrer\">https://gssc.esa.int/navipedia/index.php/Transformations_between_ECEF_and_ENU_coordinates</a></p>\n<p>This gives exactly what I need for a 3x3 ENU to ECEF <strong>position only</strong> covariance transformation. My first assumption is that I would simply duplicate the Rotational Matrix <strong>(R)</strong> like so:\n<a href=\"https://i.stack.imgur.com/J6yHy.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J6yHy.png\" alt=\"6x6 Rotational Matrix\" /></a></p>\n<p>Where <strong>lambda = longitude of the radar and phi = latitude of radar</strong>.</p>\n<p>Then from this paper: <a href=\"https://www.ngs.noaa.gov/CORS/Articles/SolerChin1985.pdf\" rel=\"nofollow noreferrer\">https://www.ngs.noaa.gov/CORS/Articles/SolerChin1985.pdf</a>\n<a href=\"https://i.stack.imgur.com/Uu1LQ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/Uu1LQ.png\" alt=\"enter image description here\" /></a></p>\n<p>Where Summation WGS72 is actually just the ENU 6x6 covariance matrix I am receiving.</p>\n<p>Implementing in Java I am getting the following:</p>\n<pre><code>    public static void enu2ecefCov(GMatrix ecefCov, GMatrix enuCov, LLA refLLA) {\n        GMatrix R = new GMatrix(6, 6);\n        GMatrix Rt = new GMatrix(6, 6);\n        GMatrix tmp = new GMatrix(6, 6);\n\n        createRotationMatrixV3(R, refLLA);\n\n        Rt.transpose(R);\n        tmp.mul(enuCov, R);\n        ecefCov.mul(Rt, tmp);\n\n    }\n</code></pre>\n<p>However, the matrix I am outputting doesn't look correct as I am seeing the same values multiple times whereas the original doesn't have the same values at all besides symmetric corresponding blocks. Am I doing this correctly?</p>\n"},{"tags":["java","dependency-management"],"comments":[{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"edited":false,"comment_id":132500482,"body":"Does the JDK actually include mime4j?"}],"answers":[{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"up_vote_count":1,"is_accepted":false,"creation_date":1673445369,"answer_id":75084166,"body":"<p>Currently, you're looking at the dependencies of the <code>java.desktop</code> module. The <em>jline</em> dependency is listed in the <code>jdk.internal.le</code> module: <a href=\"https://github.com/openjdk/jdk/tree/master/src/jdk.internal.le/share/legal\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/tree/master/src/jdk.internal.le/share/legal</a>, in other words you need to find <strong>all</strong> <code>share/legal</code> directories (i.e. for each module).</p>\n<p>For example, by going to the <a href=\"https://github.com/openjdk/jdk/find/master\" rel=\"nofollow noreferrer\">GitHub file finder of the (master) branch</a> and searching for <code>share/legal</code> (note it does a fuzzy search, so it also lists unrelated files).</p>\n<p>As far as I'm aware, the JDK doesn't depend on <em>mime4j</em>, which would explain why you can't find a declaration in any <code>share/legal</code> directory.</p>\n"}],"owner":{"user_id":4741946,"display_name":"Gong Yu"},"view_count":54,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1673405986,"question_id":75077939,"body":"<p>I want to get the version of indirect dependencies of jdk (requirement from my company), and after I did some research I find some of them on the openJDK github page:\n<a href=\"https://github.com/openjdk/jdk/tree/master/src/java.desktop/share/legal\" rel=\"nofollow noreferrer\">https://github.com/openjdk/jdk/tree/master/src/java.desktop/share/legal</a></p>\n<p>Unfortunately, not all the dependencies are listed on this page, for example jline, mime4j etc. Is there a place that list all the JDK's own dependencies? Thanks.</p>\n"},{"tags":["java","ldap","jetty","jaas","confluent-control-center"],"comments":[{"owner":{"user_id":452199,"display_name":"Harvey Kwok"},"edited":false,"comment_id":132554041,"body":"If you set <code>forceBindingLogin</code> to false, and provide a valid <code>userBaseDn</code> and <code>userRdnAttribute</code> in your configuration, this should allow the LdapLoginModule to bind to the LDAP server using the user credentials provided during authentication, rather than requiring a separate <code>bindDN</code> and <code>bindPassword</code>."},{"owner":{"user_id":8381727,"display_name":"Alex"},"edited":false,"comment_id":132613209,"body":"As soon as I set forceBindingLogin to false the login fails even though the log says the user is found. [2023-01-17 11:09:00,730] DEBUG [qtp424848797-107] Searching for user xxxxxxxxx with filter: &#39;(&amp;(objectClass={0})({1}={2}))&#39; from base dn: DC=xxxx,DC=xxxx,DC=xxx,DC=xx (org.eclipse.jetty.jaas.spi.LdapLoginModule) [2023-01-17 11:09:01,397] DEBUG [qtp424848797-107] Found user?: true (org.eclipse.jetty.jaas.spi.LdapLoginModule) [2023-01-17 11:09:01,398] DEBUG [qtp424848797-107] user cred is: null (org.eclipse.jetty.jaas.spi.LdapLoginModule)"},{"owner":{"user_id":8381727,"display_name":"Alex"},"edited":false,"comment_id":132618797,"body":"Basically my ldap server forces me to do a successful bind before making a search, but I just want to be able to use the web credentials passed through the prompt as bindDn and bindPassword. This seems pretty simple, it is possible when configuring a virtual host in httpd by setting AuthLDAPInitialBindAsUser on. I guess the jetty ldap module does not support that."}],"answers":[{"owner":{"user_id":393805,"display_name":"tftd"},"up_vote_count":1,"is_accepted":false,"creation_date":1674216132,"answer_id":75183753,"body":"<p>I don't have experience with Confluent Control Center, but have been dealing with a lot of Java applications and OAuth that uses LDAP authentication during the years. As a DevOps I had to also manage a few LDAP instances myself so I will be rather speaking from that background.</p>\n<p>The authentication process with OpenLDAP requires one of the following to be true:</p>\n<ol>\n<li><p>Allows anonymous (connection) binding\nThis configuration allows you to connect to the LDAP server as an anonymous user and lookup any object in the tree and therefore find any groups, users, etc.</p>\n</li>\n<li><p>Manager/User dn (connection) binding\nThis configuration mandates you to connect to the LDAP server as a pre-configured user that has access to lookup objects in the tree and find the requested groups,users,etc. You can have many Manager DNs configured to access different parts of the LDAP tree.</p>\n</li>\n</ol>\n<p>Notice I mentioned <code>CONNECTION</code> binding - think of this as how you would connect to Postgres or MySQL. You need to have some credentials in order to lookup tables or if anonymous is enabled you can do pretty much anything.</p>\n<p>The same thing applies to LDAP servers -- <code>anonymous binding</code> will allow you to establish a connection and lookup anything and <code>manager / user dn</code> requires authentication before the connection can be established.</p>\n<p>People are not always deeply aware of LDAP's architecture and the documentation doesn't really help there. As such, the terminology makes you jump to the rational conclusion you jumped to:</p>\n<blockquote>\n<p>@alex: I would like to avoid passing a bindDn and bindPassword and use the authenticating user credentials to bind instead</p>\n</blockquote>\n<p>This would work only when the LDAP server is configured to allow Anonymous connections. If it is configured to require <code>Manager/User DN</code> connection:</p>\n<ol>\n<li>When you <code>bind</code> as the <code>user</code> the authentication will likely pass (unless LDAP is configured not to allow that at all).</li>\n<li>Once it succeeds it you would attempt to lookup the <code>authorization</code> objects (roles / groups / etc). At this point it will fail due to the inability to do the needed lookups and finally the result will be failed login.</li>\n</ol>\n<p>To validate if this is the case you are ending in you should:</p>\n<ol>\n<li>Use some tool to the LDAP server (you can try <a href=\"https://directory.apache.org/studio/\" rel=\"nofollow noreferrer\">Apache Directory Studio</a></li>\n<li>Setup a connection with binds as the bespoken user (i.e. <code>my-username</code>; not the <code>manager dn</code>, not a <code>read-only dn</code>)</li>\n<li>Once you are connected try to lookup the <code>userBaseDn</code> and <code>roleBaseDn</code> DN's -- you are most likely not going to see any of the roles.</li>\n</ol>\n<p>If the above is true then what you want is not possible with the current LDAP server setup.</p>\n<p>If not -- then the LDAP server truly allows you to bind as the <code>user</code> and to lookup the directory tree. In this case you should open up a bug report with Confluent.</p>\n"}],"owner":{"user_id":8381727,"display_name":"Alex"},"view_count":226,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1673375383,"question_id":75074349,"body":"<p>I am trying to secure Confluent Control Center 7.2.2 with the jetty LdapLoginModule. I have the following jaas configuration working.</p>\n<pre><code>c3 {\n  org.eclipse.jetty.jaas.spi.LdapLoginModule required\n  useLdaps=&quot;true&quot;\n  contextFactory=&quot;com.sun.jndi.ldap.LdapCtxFactory&quot;\n  hostname=&quot;ldaps.xxxx.xxxxx&quot;\n  port=&quot;xxx&quot;\n  bindDn=&lt;user principal name&gt;\n  bindPassword=&lt;user password&gt;\n  authenticationMethod=&quot;simple&quot;\n  forceBindingLogin=&quot;true&quot;\n  userBaseDn=&quot;DC=xxxx,DC=xxxx,DC=xxx,DC=xx&quot;\n  userRdnAttribute=&quot;userPrincipalName&quot;\n  userIdAttribute=&quot;userPrincipalName&quot;\n  userObjectClass=&quot;user&quot;\n  roleBaseDn=&quot;OU=xxxxxx,OU=xxx,OU=xxxxx,DC=xxxx,DC=xxxx,DC=xxx,DC=xx&quot;\n  roleNameAttribute=&quot;cn&quot;\n  roleMemberAttribute=&quot;member&quot;\n  roleObjectClass=&quot;group&quot;;\n};\n</code></pre>\n<p>I would like to avoid passing a bindDn and bindPassword and use the authenticating user credentials to bind instead. My understanding is that forceBindingLogin set to true should make that possible.</p>\n<p><strong>forceBindingLogin</strong>\n<em>Indicate whether to bind as the user that is authenticating (true), otherwise bind as the manager and perform a search to verify user password (false).</em></p>\n<p>Although when I remove bindDn and bindPassword from my config I get the following error:</p>\n<p>DAP: error code 1 - 000004DC: LdapErr: DSID-0C090A71, comment: In order to perform this operation a successful bind must be completed on the connection., data 0, v3839</p>\n<p>It looks like bindDn is still used when forceBindingLogin is set to true.</p>\n<p>I noticed that in the Confluence documentation, the bindDn config went from optional to required between 6.1.9 and 6.2.0. Jetty was upgraded to 9.4.39, but there is no mention as to why bindDn would now be required.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","hibernate-6.x"],"comments":[{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":132474988,"body":"En empty collection isn&#39;t null, and thus will lead to an illegal query with an empty <code>in</code>, I would argue that it succeeded falsely in previous versions of Hibernate. The expression won&#39;t work as it will be called for <code>null</code> so you would need to cather for that case as well. Why not simply write 2 methods and dispatch to one or the other, or just use the <code>Criteria</code> API to dynamically generate the query."}],"answers":[{"owner":{"user_id":19199234,"display_name":"Rayyan Karimi"},"up_vote_count":0,"is_accepted":false,"creation_date":1673373893,"answer_id":75074092,"body":"<p>An empty collection can't be null, and thus will lead to an illegal query with an empty <code>in</code> in your query.</p>\n<p>We would argue that it succeeds falsely in previous versions of Hibernate.</p>\n<p>The expression cannot work as it will be called for <code>null</code> so you would need to check for that case as well.</p>\n<p>Try writing two methods and dispatch to one or the other, depending on whether it returns <code>null</code> or not; or better use the <code>Criteria</code> API to dynamically generate query.</p>\n"},{"owner":{"user_id":1270914,"display_name":"Fred"},"up_vote_count":1,"is_accepted":false,"creation_date":1673420014,"answer_id":75079266,"body":"<p>Thank you for your answers. Using the Criteria API would imply a lot of refactoring some involving complex recursive queries.</p>\n<p>After posting my message here, I found the following explanation <a href=\"https://hibernate.atlassian.net/browse/HHH-15743\" rel=\"nofollow noreferrer\">https://hibernate.atlassian.net/browse/HHH-15743</a></p>\n<p>The proposed solution involves using Spring Data Specification which would in my case also implies some refactoring. Too bad empty lists are not supported anymore.</p>\n<p>I ended renaming the existing method as follow :</p>\n<pre><code>@Query(&quot;&quot;&quot;\n        SELECT DISTINCT new com.dto.NameIdDto(ws.id, ws.name)\n        FROM UserRole ur\n        JOIN ur.workspace ws\n        WHERE (COALESCE(:workspaceIds) IS NULL OR ws.id IN (:workspaceIds))\n        &quot;&quot;&quot;)\nList&lt;NameIdDto&gt; findWorkspacesWithUsersInternal(Collection&lt;Long&gt; workspaceIds);\n</code></pre>\n<p>And adding the following method :</p>\n<pre><code>default List&lt;NameIdDto&gt; findWorkspacesWithUsersInternal(Collection&lt;Long&gt; workspaceIds) {\n    return findWorkspacesWithUsersInternal(CollectionUtils.isEmpty(workspaceIds) ? null : workspaceIds);\n}\n</code></pre>\n"}],"owner":{"user_id":1270914,"display_name":"Fred"},"view_count":505,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1673353056,"question_id":75069854,"body":"<p>The Springboot migration from 2.7.x to 3.0.1 is not going smoothly on my project.</p>\n<p>I'm currently facing multiple issues regarding the interpretation of the custom queries used in our repositories. Those queries were working fine before the migration.</p>\n<p>I can't get my head around the migration of this kind of query :</p>\n<pre><code>@Query(&quot;&quot;&quot;\n        SELECT DISTINCT new com.dto.NameIdDto(ws.id, ws.name)\n        FROM UserRole ur\n        JOIN ur.workspace ws\n        WHERE (COALESCE(:workspaceIds) IS NULL OR ws.id IN (:workspaceIds))\n        &quot;&quot;&quot;)\nList&lt;NameIdDto&gt; findWorkspacesWithUsers(Collection&lt;Long&gt; workspaceIds);\n</code></pre>\n<pre><code>@Entity\npublic class UserRole {\n\n    @Id\n    @GeneratedValue(generator = MY_SEQUENCE)\n    private Long id;\n\n    @ManyToOne(optional = false)\n    @JoinColumn(name = &quot;workspace_id&quot;)\n    private Workspace workspace;\n\n}\n\n@Entity\npublic class Workspace  {\n\n    @Id\n    @GeneratedValue(generator = MY_SEQUENCE)\n    private Long id;\n\n    @OneToMany(fetch = LAZY, mappedBy = &quot;workspace&quot;, cascade = ALL, orphanRemoval = true)\n    private Set&lt;UserRole&gt; userRoles = new HashSet&lt;&gt;();\n\n}\n</code></pre>\n<p>When running the following tests</p>\n<pre><code>\n@Test\npublic void shouldReturnEmptyForNullParameter() {\n    assertThat(workspaceRepository.findWorkspacesWithUsers(null)).isEmpty();\n}\n\n@Test\npublic void shouldReturnEmptyForEmptyParameter() {\nassertThat(workspaceRepository.findWorkspacesWithUsers(Collections.emptyList())).isEmpty();\n}\n</code></pre>\n<p>shouldReturnEmptyForEmptyParameter fails with the exceptions :</p>\n<pre><code>org.springframework.dao.InvalidDataAccessApiUsageException: Parameter value [[]] did not match expected type [BasicSqmPathSource(id : Long) ]\n\n    at org.springframework.orm.jpa.EntityManagerFactoryUtils.convertJpaAccessExceptionIfPossible(EntityManagerFactoryUtils.java:371)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:235)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:134)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\n    at jdk.proxy2/jdk.proxy2.$Proxy121.findWorkspacesWithUsers(Unknown Source)\n    at com.example.TestApplicationTests.shouldReturnEmptyForNullOrEmptyParameter(TestApplicationTests.java:26)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\nCaused by: java.lang.IllegalArgumentException: Parameter value [[]] did not match expected type [BasicSqmPathSource(id : Long) ]\n    at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:119)\n    at org.hibernate.query.spi.AbstractCommonQueryContract.setParameter(AbstractCommonQueryContract.java:860)\n    at org.hibernate.query.spi.AbstractSelectionQuery.setParameter(AbstractSelectionQuery.java:708)\n    at org.hibernate.query.sqm.internal.QuerySqmImpl.setParameter(QuerySqmImpl.java:1222)\n    at org.hibernate.query.sqm.internal.QuerySqmImpl.setParameter(QuerySqmImpl.java:129)\n    at org.springframework.data.jpa.repository.query.QueryParameterSetter$BindableQuery.setParameter(QueryParameterSetter.java:322)\n    at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.lambda$setParameter$4(QueryParameterSetter.java:113)\n    at org.springframework.data.jpa.repository.query.QueryParameterSetter$ErrorHandling$1.execute(QueryParameterSetter.java:136)\n    at org.springframework.data.jpa.repository.query.QueryParameterSetter$NamedOrIndexedQueryParameterSetter.setParameter(QueryParameterSetter.java:113)\n    at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:83)\n    at org.springframework.data.jpa.repository.query.ParameterBinder.bind(ParameterBinder.java:75)\n    at org.springframework.data.jpa.repository.query.ParameterBinder.bindAndPrepare(ParameterBinder.java:97)\n    at org.springframework.data.jpa.repository.query.AbstractStringBasedJpaQuery.doCreateQuery(AbstractStringBasedJpaQuery.java:107)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.createQuery(AbstractJpaQuery.java:234)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution$CollectionExecution.doExecute(JpaQueryExecution.java:127)\n    at org.springframework.data.jpa.repository.query.JpaQueryExecution.execute(JpaQueryExecution.java:90)\n    at org.springframework.data.jpa.repository.query.AbstractJpaQuery.doExecute(AbstractJpaQuery.java:148)\n    at  org.springframework.data.jpa.repository.query.AbstractJpaQuery.execute(AbstractJpaQuery.java:136)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:164)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:388)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    ... 78 more\nCaused by: org.hibernate.type.descriptor.java.CoercionException: Cannot coerce value `[]` [java.util.Collections$EmptyList] as Long\n    at org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:155)\n    at org.hibernate.type.descriptor.java.LongJavaType.coerce(LongJavaType.java:24)\n    at org.hibernate.query.internal.QueryParameterBindingImpl.coerce(QueryParameterBindingImpl.java:144)\n    at org.hibernate.query.internal.QueryParameterBindingImpl.setBindValue(QueryParameterBindingImpl.java:111)\n    ... 107 more\n</code></pre>\n<p>OR (yes OR, I've not identified the reason why when executing the same test multiple times, I get one or the other exception)</p>\n<pre><code>java.lang.ArrayIndexOutOfBoundsException: Index 1 out of bounds for length 1\n\n    at org.hibernate.persister.entity.AbstractEntityPersister.isSelectable(AbstractEntityPersister.java:2039)\n    at org.hibernate.persister.entity.AbstractEntityPersister.fetchProcessor(AbstractEntityPersister.java:2012)\n    at org.hibernate.loader.ast.internal.LoaderSqlAstCreationState.visitFetches(LoaderSqlAstCreationState.java:118)\n    at org.hibernate.sql.results.graph.AbstractFetchParent.afterInitialize(AbstractFetchParent.java:32)\n    at org.hibernate.sql.results.graph.entity.AbstractEntityResultGraphNode.afterInitialize(AbstractEntityResultGraphNode.java:100)\n    at org.hibernate.persister.entity.AbstractEntityPersister.createDomainResult(AbstractEntityPersister.java:1300)\n    at org.hibernate.persister.entity.AbstractEntityPersister.selectFragment(AbstractEntityPersister.java:1892)\n    at org.hibernate.query.sql.internal.SQLQueryParser.resolveProperties(SQLQueryParser.java:236)\n    at org.hibernate.query.sql.internal.SQLQueryParser.substituteBrackets(SQLQueryParser.java:159)\n    at org.hibernate.query.sql.internal.SQLQueryParser.process(SQLQueryParser.java:63)\n    at org.hibernate.query.sql.internal.NativeSelectQueryPlanImpl.&lt;init&gt;(NativeSelectQueryPlanImpl.java:54)\n    at org.hibernate.engine.query.internal.NativeQueryInterpreterStandardImpl.createQueryPlan(NativeQueryInterpreterStandardImpl.java:39)\n    at org.hibernate.query.sql.internal.NativeQueryImpl.createQueryPlan(NativeQueryImpl.java:649)\n    at org.hibernate.query.sql.internal.NativeQueryImpl.lambda$resolveSelectQueryPlan$7(NativeQueryImpl.java:610)\n    at org.hibernate.query.internal.QueryInterpretationCacheStandardImpl.resolveSelectQueryPlan(QueryInterpretationCacheStandardImpl.java:83)\n    at org.hibernate.query.sql.internal.NativeQueryImpl.resolveSelectQueryPlan(NativeQueryImpl.java:608)\n    at org.hibernate.query.sql.internal.NativeQueryImpl.doList(NativeQueryImpl.java:602)\n    at org.hibernate.query.spi.AbstractSelectionQuery.list(AbstractSelectionQuery.java:363)\n    at org.hibernate.query.Query.getResultList(Query.java:94)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$DeferredQueryInvocationHandler.invoke(SharedEntityManagerCreator.java:401)\n    at jdk.proxy2/jdk.proxy2.$Proxy136.getResultList(Unknown Source)\n    at com.example.repository.CatalogItemRepository.findModelingAndHarmDefinitions(CatalogItemRepository.java:26)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.aop.support.AopUtils.invokeJoinpointUsingReflection(AopUtils.java:343)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.invokeJoinpoint(ReflectiveMethodInvocation.java:196)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:163)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:752)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:703)\n    at com.example.repository.CatalogItemRepository$$SpringCGLIB$$0.findModelingAndHarmDefinitions(&lt;generated&gt;)\n    at com.example.TestApplicationTests.shouldBuildNamedQuery(TestApplicationTests.java:31)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\n</code></pre>\n<p>There's nothing fancy in my pom.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;MyExample&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;packaging&gt;jar&lt;/packaging&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.1&lt;/version&gt;\n        &lt;relativePath/&gt;\n    &lt;/parent&gt;\n\n    &lt;properties&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n        &lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n        &lt;testcontainers.version&gt;1.17.6&lt;/testcontainers.version&gt;\n    &lt;/properties&gt;\n\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;${testcontainers.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n            &lt;artifactId&gt;testcontainers&lt;/artifactId&gt;\n            &lt;version&gt;${testcontainers.version}&lt;/version&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;version&gt;${postgresql.version}&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${maven-compiler-plugin.version}&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.version}&lt;/source&gt;\n                    &lt;target&gt;${java.version}&lt;/target&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Nor in my application.properties</p>\n<pre><code>spring.datasource.password=postgres\nspring.datasource.username=postgres\nspring.datasource.driver-class-name=org.testcontainers.jdbc.ContainerDatabaseDriver\nspring.datasource.url=jdbc:tc:postgresql:12:///\n\nspring.jpa.hibernate.ddl-auto = update\n\nspring.jpa.show-sql=true\nlogging.level.org.hibernate.SQL=DEBUG\nlogging.level.org.hibernate.type=TRACE\n</code></pre>\n<p>The issue clearly comes from the fact that the collection is empty.\nI've therefore tried to update the query to :\n<code>WHERE (COALESCE(:workspaceIds,NULL) IS NULL OR :#{#workspaceIds.size()} = 0 OR ws.id IN (:workspaceIds) ) </code></p>\n<p>The test shouldReturnEmptyForNullParameter then fails with the following exception :</p>\n<pre><code>org.springframework.expression.spel.SpelEvaluationException: EL1011E: Method call: Attempted to call method size() on null context object\n\n    at org.springframework.expression.spel.ast.MethodReference.throwIfNotNullSafe(MethodReference.java:154)\n    at org.springframework.expression.spel.ast.MethodReference.getValueRef(MethodReference.java:83)\n    at org.springframework.expression.spel.ast.CompoundExpression.getValueRef(CompoundExpression.java:70)\n    at org.springframework.expression.spel.ast.CompoundExpression.getValueInternal(CompoundExpression.java:91)\n    at org.springframework.expression.spel.ast.SpelNodeImpl.getTypedValue(SpelNodeImpl.java:117)\n</code></pre>\n<p>Am I missing something?</p>\n<p>Thank you for you help.</p>\n"},{"tags":["java","utf-8"],"comments":[{"owner":{"user_id":1831987,"display_name":"VGR"},"edited":false,"comment_id":132477933,"body":"Before you do anything else:  Specify a charset in your conversions between bytes and String!  Unless you are using a fairly recent version of Java, <code>new String(bytes)</code> and <code>s.getBytes()</code> will use the system’s default charset, which may or may not be UTF-8.  Don’t take chances—be certain by using <code>new String(bytes, StandardCharsetes.UTF_8)</code> and <code>s.getBytes(StandardCharsets.UTF_8)</code> respectively.  To answer your question:  You can write <code>&quot;\\ufffe\\uffff&quot;</code> in your code.  They’re not valid Unicode codepoints, but they are valid 16-bit char values."}],"answers":[{"owner":{"user_id":12567365,"display_name":"andrewJames"},"up_vote_count":1,"is_accepted":true,"creation_date":1673363811,"answer_id":75072043,"body":"<p>In your question, you noted:</p>\n<blockquote>\n<p>It seems as if the String class is robustly creating valid UTF-8 strings despite my efforts to supply invalid byte arrays.</p>\n</blockquote>\n<p>If you want to test a byte array to see if it is valid for a specific encoding, then you can use <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/charset/CharsetDecoder.html\" rel=\"nofollow noreferrer\"><code>CharsetDecoder</code></a> (not <code>CharsetEncoder</code>).</p>\n<p>The <code>CharsetDecoder</code> can:</p>\n<blockquote>\n<p>transform a sequence of bytes in a specific charset into a sequence of sixteen-bit Unicode characters.</p>\n</blockquote>\n<p>If you pass the <code>decode()</code> method a <code>ByteBuffer</code>, you can use use it as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>private static boolean testBytes(byte[] bytes) {\n    boolean isValid = true;\n    try {\n        StandardCharsets.UTF_8.newDecoder().decode(ByteBuffer.wrap(bytes));\n    } catch (CharacterCodingException ex) {\n        //Logger.getLogger(MyTester.class.getName()).log(Level.SEVERE, null, ex);\n        isValid = false;\n    }\n    return isValid;\n}\n</code></pre>\n<p>So, for example, the following will print <code>false</code> because <code>0xFF</code> is not a valid <a href=\"https://en.wikipedia.org/wiki/UTF-8#Encoding\" rel=\"nofollow noreferrer\">UTF-8 byte sequence</a>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>byte[] b = HexFormat.of().parseHex(&quot;ff&quot;);\nSystem.out.println(testBytes(b));\n</code></pre>\n<p>Your example <code>{(byte)0xfe, (byte)0xfe, (byte)0xff, (byte)0xff}</code> will also return <code>false</code>.</p>\n<hr />\n<p>In your question, you asked:</p>\n<blockquote>\n<p>Is it possible to create a Java String object that contains a string that can't be encoded as UTF-8?</p>\n</blockquote>\n<p>By the time you have created a Java String, it's &quot;too late&quot; to check because, as you have seen, any unsupported byte sequences have already been replaced by the Unicode <a href=\"https://www.fileformat.info/info/unicode/char/fffd/index.htm\" rel=\"nofollow noreferrer\">replacement character</a> - which is itself a valid character in a Java string (the Java <code>String</code> object itself &quot;represents a string in the UTF-16 format&quot; - and both UTF-8 and UTF-16 cover all valid Unicode code points).</p>\n"}],"owner":{"user_id":6405803,"display_name":"Ris Misner"},"view_count":189,"up_vote_count":3,"accepted_answer_id":75072043,"answer_count":1,"score":3,"creation_date":1673314843,"question_id":75064615,"body":"<p>I'm maintaining a back-end service in Java and I have the following method of Java 8 code that's used to validate the input to my service API:</p>\n<pre><code>private static boolean containsDisallowedChars(String toValidate) {\n    return !StandardCharsets.US_ASCII.newEncoder().canEncode(toValidate);\n}\n</code></pre>\n<p>I'm expanding it to support Hindi and other non-English characters, so I've changed it from ASCII to UTF-8, as follows:</p>\n<pre><code>private static boolean containsDisallowedChars(String toValidate) {\n    return !StandardCharsets.UTF_8.newEncoder().canEncode(toValidate);\n}\n</code></pre>\n<p>Now I'm trying to update the corresponding unit test to pass in a String toValidate that will cause this method to return false.</p>\n<p>How can I make a Java String that contains contents that can't be encoded to UTF-8?</p>\n<p>I tried this test setup</p>\n<pre><code>// ref https://stackoverflow.com/questions/1301402/example-invalid-utf8-string\n// test data byte values https://www.cl.cam.ac.uk/~mgk25/ucs/examples/UTF-8-test.txt\n// 3.5  Impossible bytes\n// The following two bytes cannot appear in a correct UTF-8 string\n// 3.5.1  fe = &quot;�&quot;\n// 3.5.2  ff = &quot;�&quot;\n// 3.5.3  fe fe ff ff = &quot;����&quot;\nfinal byte[] bytes = {(byte)0xfe, (byte)0xfe, (byte)0xff, (byte)0xff};\nlog.info(&quot;bytes={}&quot;, bytes);\nfinal String s = new String(bytes);\nlog.info(&quot;s={}&quot;, s);\nlog.info(&quot;s.length={}&quot;, s.length());\nlog.info(&quot;s.bytes={}&quot;, s.getBytes());\n</code></pre>\n<p>StandardCharsets.UTF_8.newEncoder().canEncode(s) returns true and the log output shows that the String class constructor is changing the byte array as follows:</p>\n<pre><code>bytes=[-2, -2, -1, -1]\ns=����\ns.length=4\ns.bytes=[-17, -65, -67, -17, -65, -67, -17, -65, -67, -17, -65, -67]\n</code></pre>\n<p>I tried several variations on this with similar results using other invalid UTF-8 byte arrays described in <a href=\"https://www.cl.cam.ac.uk/%7Emgk25/ucs/examples/UTF-8-test.txt\" rel=\"nofollow noreferrer\">https://www.cl.cam.ac.uk/~mgk25/ucs/examples/UTF-8-test.txt</a></p>\n<p>It seems as if the String class is robustly creating valid UTF-8 strings despite my efforts to supply invalid byte arrays.</p>\n<p>I tried Base64 as suggested here <a href=\"https://stackoverflow.com/questions/51856137/how-can-i-generate-non-utf-8-string-char-in-java-for-testing-purposes\">How can I generate non-UTF-8 string / char in Java for testing purposes?</a></p>\n<pre><code>final byte[] bytes = {(byte)0xfe, (byte)0xfe, (byte)0xff, (byte)0xff};\nlog.info(&quot;bytes={}&quot;, bytes);\nfinal String s = new String(Base64.getEncoder().encode(bytes));\nlog.info(&quot;s={}&quot;, s);\nlog.info(&quot;s.length={}&quot;, s.length());\nlog.info(&quot;s.bytes={}&quot;, s.getBytes());\n</code></pre>\n<p>Base64.getEncoder().encode doesn't return string. It returns byte[]. Therefore I must still call new String(byte[]) which changes the byte array to a valid UTF-8 byte array. StandardCharsets.UTF_8.newEncoder().canEncode still returns true and I get this log output:</p>\n<pre><code>bytes=[-2, -2, -1, -1]\ns=/v7//w==\ns.length=8\ns.bytes=[47, 118, 55, 47, 47, 119, 61, 61]\n</code></pre>\n<p>Is it possible to create a Java String object that contains a string that can't be encoded as UTF-8? If not, does it mean my <code>containsDisallowedChars</code> method is unnecessary since it can never return true? Or is there a different validation approach I should consider instead of StandardCharsets.UTF_8.newEncoder().canEncode?</p>\n"},{"tags":["java","intellij-idea"],"comments":[{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":132443189,"body":"<a href=\"https://en.wikipedia.org/wiki/Jakarta_EE\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Jakarta_EE</a>"}],"answers":[{"owner":{"user_id":2037608,"display_name":"gemorra"},"up_vote_count":2,"is_accepted":false,"creation_date":1673211001,"answer_id":75051184,"body":"<p>The Java EE is now called Jakarta EE.</p>\n<p>See post, <a href=\"https://www.baeldung.com/java-enterprise-evolution#in-transition\" rel=\"nofollow noreferrer\"><em>Java EE vs J2EE vs Jakarta EE</em></a>.</p>\n"}],"owner":{"user_id":20960092,"display_name":"geirav&#246;r sk&#250;ld"},"view_count":57,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1673208525,"question_id":75050920,"body":"<p>I needed to create a java document, and I have inteliji ultimate, but when I create it, it does not appear, I found this link that says that it is necessary to add Java EE: EJB, JPA, Servlets plugin, but it still does not appear.\nis what I am looking for\n<a href=\"https://i.stack.imgur.com/A2QDU.png\" rel=\"nofollow noreferrer\">enter image description here</a>\nthis way it appears to me\n<a href=\"https://i.stack.imgur.com/KAAWe.png\" rel=\"nofollow noreferrer\">enter image description here</a></p>\n<p>thanks :)</p>\n<p>I tried the solution on this website, and it didn't work.\n<a href=\"https://stackoverflow.com/questions/35812906/java-enterprise-doesnt-appear-in-intellij\">Java Enterprise doesn&#39;t appear in IntelliJ</a>\nI also tried to deactivate and reactivate the plugins</p>\n"},{"tags":["java","jgit"],"comments":[{"owner":{"user_id":1059372,"display_name":"Eugene"},"edited":false,"comment_id":132421589,"body":"interesting question, 1+; but what did you try? It might be easier to think in reverse, like how would you solve that with plain command line and then reverse engineer to jgit"},{"owner":{"user_id":927493,"display_name":"J Fabian Meier"},"edited":false,"comment_id":132421688,"body":"jgit is still a bit of a mystery to me. I tried to find information about changed files in RevCommit, and I also tried to google this, but had the impression that trying to list all changed files etc. is overkill."}],"answers":[{"owner":{"user_id":411846,"display_name":"centic"},"up_vote_count":1,"is_accepted":false,"creation_date":1673251164,"answer_id":75054468,"body":"<p>In the high-level API of JGit you can use <a href=\"https://download.eclipse.org/jgit/site/6.3.0.202209071007-r/apidocs/org/eclipse/jgit/api/Git.html#log()\" rel=\"nofollow noreferrer\">Git.log()</a> with &quot;addPath&quot; to get a simple list of related commits.</p>\n<pre><code>   logs = git.log()\n            .addPath(&quot;pom.xml&quot;)\n            .call();\n</code></pre>\n<p>See this <a href=\"https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/ShowLog.java#L99\" rel=\"nofollow noreferrer\">snippet</a> in the <a href=\"https://github.com/centic9/jgit-cookbook\" rel=\"nofollow noreferrer\">jgit-cookbook</a> for a ready-to-run example.</p>\n<p>In general the methods on the entry-class <a href=\"https://download.eclipse.org/jgit/site/6.3.0.202209071007-r/apidocs/org/eclipse/jgit/api/Git.html\" rel=\"nofollow noreferrer\">Git</a> provide similar functionality to the regular git commands.</p>\n<hr />\n<p>For the low-level API which provides much more fine-grained control/results, you can use <a href=\"https://download.eclipse.org/jgit/site/6.3.0.202209071007-r/apidocs/org/eclipse/jgit/api/Git.html#diff()\" rel=\"nofollow noreferrer\">Git.diff()</a> with &quot;newTree&quot; and &quot;oldTree&quot; and a &quot;pathFilter&quot;. The trees are constructed via <a href=\"https://download.eclipse.org/jgit/site/6.3.0.202209071007-r/apidocs/org/eclipse/jgit/revwalk/RevWalk.html\" rel=\"nofollow noreferrer\">RevWalk</a> and <a href=\"https://download.eclipse.org/jgit/site/6.3.0.202209071007-r/apidocs/org/eclipse/jgit/treewalk/CanonicalTreeParser.html\" rel=\"nofollow noreferrer\">CanonicalTreeParser</a></p>\n<p>There is a related snippet for this approach in the <a href=\"https://github.com/centic9/jgit-cookbook\" rel=\"nofollow noreferrer\">jgit-cookbook</a> at <a href=\"https://github.com/centic9/jgit-cookbook/blob/master/src/main/java/org/dstadler/jgit/porcelain/ShowFileDiff.java\" rel=\"nofollow noreferrer\">ShowFileDiff.java</a></p>\n"}],"owner":{"user_id":927493,"display_name":"J Fabian Meier"},"view_count":69,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1673080816,"question_id":75039051,"body":"<p>I write a Java program, and I use jgit. In this Java program, I want to list all commits of some git repository <code>g</code> that changed at least one file in a directory <code>x</code>.</p>\n<p>I do not want to solve the problem &quot;on command line&quot;, but within Java.</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"user_id":4216641,"display_name":"Turing85"},"edited":false,"comment_id":132417980,"body":"Please read: <a href=\"https://meta.stackoverflow.com/questions/284236/why-is-can-someone-help-me-not-an-actual-question\">Why is “Can someone help me?” not an actual question?</a> --- &quot;<i><code>... Not a managed type: class com.example.springstranica.entity.Student</code></i>&quot; - This class is missing an <code>@Entity</code> annotation."},{"owner":{"user_id":16011998,"display_name":"Faik Faik"},"edited":false,"comment_id":132418018,"body":"@Turing85 no its not, but still thank you for trying"},{"owner":{"user_id":4216641,"display_name":"Turing85"},"edited":false,"comment_id":132418074,"body":"Does the code have an <code>@EntityScan(...)</code> annotation somehwere? if so: what is the value of this annotation?"},{"owner":{"user_id":16011998,"display_name":"Faik Faik"},"edited":false,"comment_id":132418139,"body":"It does, under @SpringBootApplication in main class, but it doesnt change anything, @EntityScan(&quot;com.example.springstranica&quot;), it should have detected entity class already since its in package entity and has annotation."},{"owner":{"user_id":16011998,"display_name":"Faik Faik"},"edited":false,"comment_id":132418273,"body":"You can take a look here <a href=\"https://github.com/kraljevinaB/springstranica\" rel=\"nofollow noreferrer\">github.com/kraljevinaB/springstranica</a>"},{"owner":{"user_id":4216641,"display_name":"Turing85"},"edited":false,"comment_id":132418531,"body":"So I was correct after all. The <code>@Entity</code> annotation is missing ;)"}],"answers":[{"owner":{"user_id":4216641,"display_name":"Turing85"},"up_vote_count":1,"is_accepted":true,"creation_date":1673053590,"answer_id":75037440,"body":"<p><a href=\"https://github.com/spring-projects/spring-boot/wiki/Spring-Boot-3.0-Release-Notes\" rel=\"nofollow noreferrer\">Spring-boot switched from JavaEE Persistence to JakartaEE Persistence from Release 3.0 onwards (<code>github.com</code>)</a>.</p>\n<p>When we look at the <code>pom.xml</code>, we see:</p>\n<pre><code>        ...\n        &lt;dependency&gt;\n            &lt;groupId&gt;javax.persistence&lt;/groupId&gt;\n            &lt;artifactId&gt;javax.persistence-api&lt;/artifactId&gt;\n            &lt;version&gt;2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        ...\n</code></pre>\n<p>This imports the &quot;old&quot; JavaEE API, which is - as stated above - no longer supported by spring-boot and thus useless for us (but this is not directly the source of the exception).</p>\n<p>Looking at <code>Student</code>'s imports, we see:</p>\n<pre><code>import javax.persistence.Entity;\nimport javax.persistence.GeneratedValue;\nimport javax.persistence.GenerationType;\nimport javax.persistence.Id;\n</code></pre>\n<p>So we use the &quot;old&quot; API in class <code>Student</code>, which is why spring reports that this entity is not managed (since the correct <code>@Entity</code> annotation is missing).</p>\n<p>The solution is straightforward. We:</p>\n<ul>\n<li>remove <code>javax.persistence-api</code> from <code>pom.xml</code> (to prevent importing the wrong persistence api in the future), and</li>\n<li>replace <code>javax.persistence</code> with <code>jakarta.persistence</code> in <code>Student</code>.</li>\n</ul>\n<p>This also makes the <code>@EntityScan</code> in class <code>SpringstranicaApplication</code> superfluous.</p>\n"}],"owner":{"user_id":16011998,"display_name":"Faik Faik"},"view_count":489,"up_vote_count":3,"accepted_answer_id":75037440,"answer_count":1,"score":3,"creation_date":1673048413,"question_id":75037071,"body":"<p>I cant figure it out whats the problem, to me it seems that i have already taken all the necessary steps, simple testing program and it wont work, to me without any reason.</p>\n<hr />\n<pre><code>@RestController\npublic class StudentController {\n\n    @Autowired\n    StudentServiceInterface studentService;\n\n    @PostMapping(&quot;/student&quot;)\n    public Student save(@RequestBody Student student){\n        return studentService.saveStudent(student);\n    }\n}\n</code></pre>\n<hr />\n<pre><code>public interface StudentServiceInterface {\n    Student saveStudent(Student student);\n}\n</code></pre>\n<hr />\n<pre><code>@Service\npublic class StudentServiceImpl implements StudentServiceInterface{\n\n    @Autowired\n    StudentRepositoryInterface studentRepository;\n\n    @Override\n    public Student saveStudent(Student student) {\n        return studentRepository.save(student);\n    }\n}\n</code></pre>\n<hr />\n<pre><code>@Entity\npublic class Student {\n\n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long Id;\n    private String name;\n    private String surname;\n    private Integer age;\n    ...\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/9eHFY.png\" rel=\"nofollow noreferrer\">folder structure</a></p>\n<pre><code>org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'studentController': Unsatisfied dependency expressed through field 'studentService': Error creating bean with name 'studentServiceImpl': Unsatisfied dependency expressed through field 'studentRepository': Error creating bean with name 'studentRepositoryInterface' defined in com.example.springstranica.repository.StudentRepositoryInterface defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Not a managed type: class com.example.springstranica.entity.Student\n</code></pre>\n<p>I have looked some of the answers on stack and no solution for me. Pardon me if i skiped something. Can someone help and find where i did wrong and how can i prevent this from happening again.</p>\n<p>The full code is available at <a href=\"https://github.com/kraljevinaB/springstranica\" rel=\"nofollow noreferrer\"><code>github.com</code></a>.</p>\n"},{"tags":["java","spring","hibernate","lucene","hibernate-search"],"answers":[{"owner":{"user_id":6692043,"display_name":"yrodiere"},"up_vote_count":1,"is_accepted":false,"creation_date":1673016068,"answer_id":75032375,"body":"<blockquote>\n<p>you'll find hundreds of pages, each of them having the same code copied from another page without any decent explanation or further examples of usage.</p>\n</blockquote>\n<p>Hibernate Search 5 had its problems, one of which was lack of documentation in some areas. Now that it's in maintenance mode, those problems are unlikely to get addressed.</p>\n<p>There is <em>some</em> documentation for that feature in the Hibernate Search 5 documentation: <a href=\"https://docs.jboss.org/hibernate/search/5.11/reference/en-US/html_single/#section-programmatic-analyzer-definition\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/search/5.11/reference/en-US/html_single/#section-programmatic-analyzer-definition</a></p>\n<p>You'll get <a href=\"https://docs.jboss.org/hibernate/stable/search/reference/en-US/html_single/#backend-lucene-analysis\" rel=\"nofollow noreferrer\">better documentation of that feature</a> by migrating to Hibernate Search 6+.</p>\n<p>That being said, most of your questions related to Lucene features, so you probably won't find answers in Hibernate Search's documentation. You could find them in Lucene's documentation. How to find such documentation is explained in the Hibernate Search 6 documentation:</p>\n<blockquote>\n<p>To know more about the behavior of these character filters, tokenizers and token filters, either browse the <a href=\"https://lucene.apache.org/core/8_11_1/core/\" rel=\"nofollow noreferrer\">Lucene Javadoc</a> or read the corresponding section on the <a href=\"http://wiki.apache.org/solr/AnalyzersTokenizersTokenFilters\" rel=\"nofollow noreferrer\">Solr Wiki</a> (you don’t need Solr to use these analyzers, it’s just that there is no documentation page for Lucene proper).</p>\n</blockquote>\n<hr />\n<blockquote>\n<p>Where to put and how to address mapping-chars.properties when adding it as a parameter to MappingCharFilterFactory?</p>\n</blockquote>\n<p>In your classpath.</p>\n<blockquote>\n<p>What is the contents of mapping-chars.properties and how to create mine of modify existing?</p>\n</blockquote>\n<p>That's the kind of things that Lucene doesn't document, at least not clearly. Solr's documentation is better: <a href=\"https://solr.apache.org/guide/6_6/charfilterfactories.html#CharFilterFactories-solr.MappingCharFilterFactory\" rel=\"nofollow noreferrer\">https://solr.apache.org/guide/6_6/charfilterfactories.html#CharFilterFactories-solr.MappingCharFilterFactory</a></p>\n<blockquote>\n<p>Where to put stoplist.properties and how to address it when adding as mapping parameter to StopFilterFactory?</p>\n</blockquote>\n<p>Put it in the classpath, and pass the path to that file from the root of your classpath.</p>\n<blockquote>\n<p>How to add previously defined customAnalyzer to single @Field mentioned below?</p>\n</blockquote>\n<p>Well <em>that</em> is documented, at least: <a href=\"https://docs.jboss.org/hibernate/search/5.11/reference/en-US/html_single/#_referencing_named_analyzers\" rel=\"nofollow noreferrer\">https://docs.jboss.org/hibernate/search/5.11/reference/en-US/html_single/#_referencing_named_analyzers</a></p>\n<pre><code>@Field(analyzer = @Analyzer(definition = &quot;customAnalyzer&quot;))\n</code></pre>\n<blockquote>\n<p>On some pages I found option to put this definition into application.properties:</p>\n<pre><code>hibernate.search.lucene.analysis_definition_provider = com.thevegcat.app.search.CustomAnalysisDefinitionProvider\n</code></pre>\n<p>But I don't want to replace original analyzer, I just want to use custom analyzer for few specific properties.</p>\n</blockquote>\n<p>You won't replace an &quot;analyzer&quot;, you will register an analysis definition provider. Which will add analyzer definitions to Hibernate Search, which can then be referenced from <code>@Field</code>. Setting an analysis definition provider does not, in itself, change your mapping in any way.</p>\n"}],"owner":{"user_id":1034461,"display_name":"horvoje"},"view_count":103,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1673014136,"question_id":75031997,"body":"<p>When you search Stackoverflow or the Internet for <code>LuceneAnalysisDefinitionProvider</code>, you'll find hundreds of pages, each of them having the same code copied from another page without any decent explanation or further examples of usage.</p>\n<p>So I tried to do it by myself and failed. Here is my code:</p>\n<pre><code>public class CustomLuceneAnalysisDefinitionProvider\n        implements LuceneAnalysisDefinitionProvider {\n\n  @Override\n  public void register(final LuceneAnalysisDefinitionRegistryBuilder builder) {\n    builder\n      .analyzer(&quot;customAnalyzer&quot;)\n        .tokenizer(StandardTokenizerFactory.class)\n        .charFilter(MappingCharFilterFactory.class)\n          .param(&quot;mapping&quot;,\n            &quot;org/hibernate/search/test/analyzer/mapping-chars.properties&quot;)\n        .tokenFilter(ASCIIFoldingFilterFactory.class)\n        .tokenFilter(LowerCaseFilterFactory.class)\n        .tokenFilter(StopFilterFactory.class)\n          // WRONG! It's not &quot;mapping&quot;!\n//        .param(&quot;mapping&quot;,\n//          &quot;org/hibernate/search/test/analyzer/stoplist.properties&quot;)\n          .param(&quot;words&quot;,\n            &quot;classpath:/stoplist.properties&quot;)\n          .param(&quot;ignoreCase&quot;, &quot;true&quot;);\n  }\n\n}\n</code></pre>\n<p>Now we have <code>CustomLuceneAnalysisDefinitionProvider</code> and what's next?</p>\n<ol>\n<li>Where to put and how to address <code>mapping-chars.properties</code> when adding it as a <code>parameter</code> to <code>MappingCharFilterFactory</code>?</li>\n<li>What is the contents of <code>mapping-chars.properties</code> and how to create mine of modify existing?</li>\n<li>Where to put <code>stoplist.properties</code> and how to address it when adding as <code>mapping</code> parameter to <code>StopFilterFactory</code>?</li>\n<li>How to add previously defined <code>customAnalyzer</code> to single <code>@Field</code> mentioned below?</li>\n</ol>\n<pre><code>@Field(\n    index = Index.YES,\n    analyze = Analyze.YES,\n    store = Store.NO,\n    bridge = @FieldBridge(impl = LocalizedFieldBridge.class)\n)\nprivate LocalizedField description;\n</code></pre>\n<p>On some pages I found option to put this definition into application.properties:</p>\n<pre><code>hibernate.search.lucene.analysis_definition_provider = com.thevegcat.app.search.CustomAnalysisDefinitionProvider\n</code></pre>\n<p>But I don't want to replace original analyzer, I just want to use custom analyzer for few specific properties.</p>\n<hr />\n<p><strong>EDIT#1</strong></p>\n<p>Looking into <code>org.apache.lucene.analysis.core.StopFilterFactory</code> line 86, one can notice it takes <code>words</code> as a key, not <code>mapping</code>.</p>\n<hr />\n<p><strong>EDIT#2</strong></p>\n<p>If you put your stop words file in src/main/resources, then you have to address it:</p>\n<pre><code>.param(&quot;words&quot;, &quot;classpath:/stoplist.properties&quot;)\n</code></pre>\n"},{"tags":["java","spring","hibernate","kotlin","jpa"],"answers":[{"owner":{"user_id":412446,"display_name":"Christian Beikov"},"up_vote_count":0,"is_accepted":false,"creation_date":1673008992,"answer_id":75031089,"body":"<p>I guess it would be nice to try injecting an object mapper as bean. Can you please create a JIRA for that? In the meantime, you can register a custom format mapper with a custom Jackson <code>ObjectMapper</code> by registering a property <code>org.hibernate.cfg.AvailableSettings#JSON_FORMAT_MAPPER</code>/<code>hibernate.type.json_format_mapper</code> to <code>new org.hibernate.type.format.jackson.JacksonJsonFormatMapper(yourObjectMapper)</code>.</p>\n"},{"owner":{"user_id":4520750,"display_name":"Avinash Jeeva"},"up_vote_count":1,"is_accepted":false,"creation_date":1674565106,"answer_id":75221838,"body":"<p>You have to create <code>HibernatePropertiesCustomizer</code> bean as mentioned <a href=\"https://github.com/spring-projects/spring-boot/issues/33870\" rel=\"nofollow noreferrer\">here</a></p>\n<p>Below is the sample Kotlin code snippet:</p>\n<pre><code>@Bean\n    fun jsonFormatMapperCustomizer(objectMapper: ObjectMapper): HibernatePropertiesCustomizer {\n        return HibernatePropertiesCustomizer { properties: MutableMap&lt;String, Any&gt; -&gt;\n            properties[AvailableSettings.JSON_FORMAT_MAPPER] = JacksonJsonFormatMapper(objectMapper)\n        }\n    }\n</code></pre>\n"}],"owner":{"user_id":3789298,"display_name":"Thomas"},"view_count":818,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1672997826,"question_id":75029192,"body":"<p>I recently switched to spring 3.0 and hibernate now supports json type definition like this:</p>\n<pre><code>        @JdbcTypeCode(SqlTypes.JSON)\n        var request: ReportRequestDto,\n</code></pre>\n<p>but the problem is that <code>ReportRequestDto</code> has <code>val from: LocalDate</code>, this causes an exception when saving entity:</p>\n<pre><code>Java 8 date/time type `java.time.LocalDate` not supported by default\n</code></pre>\n<p>I have the <code>jackson-datatype-jsr310</code> dependency in my pom, also I have a configuration for object mapper:</p>\n<pre><code>    @Bean\n    @Primary\n    fun objectMapper(): ObjectMapper {\n        val objectMapper = ObjectMapper()\n        objectMapper.configure(DeserializationFeature.FAIL_ON_UNKNOWN_PROPERTIES, false)\n        objectMapper.registerModule(JavaTimeModule())\n        objectMapper.registerKotlinModule()\n        objectMapper.disable(SerializationFeature.WRITE_DATES_AS_TIMESTAMPS)\n        return objectMapper\n    }\n</code></pre>\n<p>It looks like hibernate is not &quot;autowiring&quot; the object mapper, thus it doesn't have the java time module registered.</p>\n"},{"tags":["java","ssl"],"comments":[{"owner":{"user_id":2442804,"display_name":"luk2302"},"edited":false,"comment_id":132362617,"body":"You basically need to use the correct keystore based on the <code>Host</code> header. If someone requests site1.com you need to use site1.keystore and site2.keystore for site2.com. How are you currently communicating with your server? What domains are the SSL certificates for?"},{"owner":{"user_id":3665736,"display_name":"user3665736"},"edited":false,"comment_id":132362749,"body":"I can only read the host header AFTER connection has occurred."},{"owner":{"user_id":2442804,"display_name":"luk2302"},"edited":false,"comment_id":132362806,"body":"Ah, absolutely correct, my bad. Then <a href=\"https://en.wikipedia.org/wiki/Server_Name_Indication\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/Server_Name_Indication</a> is what you need. (or different ports or different IPs)"}],"answers":[{"owner":{"user_id":3665736,"display_name":"user3665736"},"up_vote_count":1,"is_accepted":false,"creation_date":1672905026,"answer_id":75015273,"body":"<p>After digging the &quot;Server Name Indication&quot; (thanks luk2302) I have found 2 possible solutions to my problem.\nThe easiest one is to have a single certificate for my 2 sites; this can be achieved with:</p>\n<pre><code>sudo certbot certonly --force-renewal --standalone -d site1.com -d site2.com ...\n</code></pre>\n<p>And then build my keystore as usual.</p>\n<p>If I still want to have a single certificate per site, the solution is more complex: accept any socket connection, read and analyse the TLS header , grab the server name destination and then we know which is the needed certificate.</p>\n<p>There is a good technote on the subject:\n<a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#SNIExamples\" rel=\"nofollow noreferrer\">https://docs.oracle.com/javase/8/docs/technotes/guides/security/jsse/JSSERefGuide.html#SNIExamples</a></p>\n"}],"owner":{"user_id":3665736,"display_name":"user3665736"},"view_count":35,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1672838612,"question_id":75006116,"body":"<p>Using &quot;let's encrypt&quot;, I have created certificates for my 2 web sites.\nI have used certbot / openssl / keytool to finally end up with: site1.keystore and site2.keystore</p>\n<p>Here is my simplified java code:</p>\n<pre><code>public class TestServer\n{\n  public static void main(String[] args) throws Exception\n  {\n    int port = 1443;\n    char[] passphrase = &quot;changeit&quot;.toCharArray();\n    \n    KeyStore ks = KeyStore.getInstance(KeyStore.getDefaultType());\n    ks.load(new FileInputStream (&quot;/path/to/site1.keystore&quot;), passphrase);\n\n    KeyManagerFactory kmf = KeyManagerFactory.getInstance(&quot;SunX509&quot;);\n    kmf.init(ks, passphrase);\n\n    SSLContext ctx = SSLContext.getInstance(&quot;TLS&quot;);\n    ctx.init(kmf.getKeyManagers(), null, null);\n\n    SSLServerSocketFactory ssf = null;\n    ssf = ctx.getServerSocketFactory();\n\n    ServerSocket ss = ssf.createServerSocket(port);\n    while (true)\n    {\n      Socket socket = ss.accept();\n      OutputStream out = socket.getOutputStream();\n      String response = &quot;Hello from secure server&quot;;\n      out.write((&quot;HTTP/1.1 200 OK\\r\\nContent-Type: text/html\\r\\nContent-Length: &quot; + response.length() + &quot;\\r\\n\\r\\n&quot; + response).getBytes());\n      out.flush();\n      socket.close();\n    }\n  }\n}\n</code></pre>\n<p>If I use site1.keystore , I can connect to site1\nIf I use site2.keystore , I can connect to site2\nSo far so good...</p>\n<p>To be able to connect to both sites, I have merged both keystore in a single all.keystore</p>\n<p>Unfortunately it does not work as expected ... maybe somebody has an idea of what is missing?</p>\n"},{"tags":["java","mysql","spring-boot","spring-data-jpa"],"comments":[{"owner":{"user_id":14294053,"display_name":"Mar-Z"},"edited":false,"comment_id":134438871,"body":"Are you sure that the repository is properly auto-configured as JPA repository by Spring Boot? Did the same code actually work in Spring Boot 2? Can you see in the logs: &quot;Bootstrapping Spring Data JPA repositories&quot; and &quot;Found NNN JPA repository interfaces&quot;"},{"owner":{"user_id":13963086,"display_name":"k314159"},"edited":false,"comment_id":134438966,"body":"If &quot;SELECT c FROM MyClass c WHERE c.delivered = <i>true</i>&quot; works, doesn&#39;t that mean that DELIVERED is actually a BOOLEAN and not a VARCHAR?"},{"owner":{"user_id":3921725,"display_name":"Alex Roig"},"edited":false,"comment_id":134450030,"body":"The same code works in SB 2. The JPA is properly configured and I see the mentioned log. Also, rewriting the query as <code>findAllByDelivered(Boolean delivered);</code> would work. As mentioned, at database layer the underlying type is VARCHAR and a converter is used"},{"owner":{"user_id":3426309,"display_name":"Andrey B. Panfilov"},"edited":false,"comment_id":134467892,"body":"@AlexRoig have you tried <b>to not</b> use <code>is</code> verb? i.e. <code>findAllByDeliveredTrue</code> instead of <code>findAllByDeliveredIsTrue</code>?"},{"owner":{"user_id":207421,"display_name":"user207421"},"edited":false,"comment_id":134468504,"body":"@AndreyB.Panfilov Please state exactly how changing the method name as you suggest could possibly fix this problem. It can&#39;t."},{"owner":{"user_id":207421,"display_name":"user207421"},"edited":false,"comment_id":134468530,"body":"@OP There is no such thing as an <code>isTrue</code> keyword anywhere in your post. Please clarify."},{"owner":{"user_id":3426309,"display_name":"Andrey B. Panfilov"},"edited":false,"comment_id":134468584,"body":"@user207421 I would suggest to read <a href=\"https://docs.spring.io/spring-data/jpa/docs/current/reference/html/#jpa.query-methods.query-creation\" rel=\"nofollow noreferrer\">official documentation</a> first: &quot;True findByActiveTrue() … where x.active = true&quot;"},{"owner":{"user_id":1766831,"display_name":"Rick James"},"edited":false,"comment_id":134474642,"body":"You are carefully handling &quot;null&quot; as a third possible value.  Perhaps the problem is there?"}],"answers":[{"owner":{"user_id":1766831,"display_name":"Rick James"},"up_vote_count":0,"is_accepted":false,"creation_date":1684169864,"answer_id":76256341,"body":"<p>The code you showed does not work with a boolean, but rather a tri-state value.  Decide what you will do with NULLs.  Then be sure to have 3 cases throughout your code.</p>\n<p>I would not bother trying to fix the yes/no being in a VARCHAR unless you can actually fix the schema and the data.  Instead, test for <code>== 'N'</code> as needed.  (I picked the &quot;no&quot; side because that works with most European languages.</p>\n<p>Note, however, that <code>== 'Y'</code> is not the same as <code>!= 'N'</code> -- because of the NULL option.</p>\n<p>Also, check that the <code>COLLATION</code> of that <code>VARCHAR</code> is case-folding so that 'n' == 'N'.  The collation name should end in `_ci``.</p>\n"}],"owner":{"user_id":3921725,"display_name":"Alex Roig"},"view_count":106,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1683887368,"question_id":76235394,"body":"<p>I'm seeing something strange after upgrading my app to SpringBoot 3 from SpringBoot 2.</p>\n<p>The application relies on an existing database (MySQL) which doesn't use good practices. One of them is using <code>Y</code> <code>N</code> for booleans stored in a VARCHAR.</p>\n<p>To make things easier on the Java side, I created a converter that looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Converter\npublic class BooleanToStringConverter implements AttributeConverter&lt;Boolean, String&gt; {\n\n    @Override\n    public String convertToDatabaseColumn(Boolean attribute) {\n        if (attribute == null) {\n            return null;\n        }\n        return attribute ? &quot;Y&quot; : &quot;N&quot;;\n    }\n\n    @Override\n    public Boolean convertToEntityAttribute(String dbData) {\n        if (dbData == null) {\n            return null;\n        }\n        return dbData.equals(&quot;Y&quot;);\n    }\n}\n</code></pre>\n<p>And on my beans I use it as:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Column(name = &quot;DELIVERED&quot;)\n@Convert(converter = BooleanToStringConverter.class)\nprivate Boolean delivered;\n</code></pre>\n<p>So far so good.</p>\n<p>If I create a repository to query all delivered entities I'd write something like this in SpringBoot 2:</p>\n<pre><code>List&lt;MyClass&gt; findAllByDeliveredIsTrue();\n</code></pre>\n<p>But if I run this in SpringBoot 3 it returns an empty list.</p>\n<p>I need to write the query manually to make it work.</p>\n<pre><code>@Query(&quot;SELECT c FROM MyClass c WHERE c.delivered = true&quot;)\nList&lt;MyClass&gt; findAllByDeliveredIsTrue();\n</code></pre>\n<p>Any idea why it's happening?</p>\n<hr />\n<p>Edit:</p>\n<p>I've enabled SQL Logs and definitely queries are created differently. For sake of simplicity I translated some things on the post because on real scenario the database is in Spanish and it uses <code>S</code>/<code>N</code> instead of <code>Y</code>/<code>N</code>.</p>\n<pre class=\"lang-java prettyprint-override\"><code>Java service\n    @PostConstruct\n    public void init() {\n        log.error(&quot;DEBUG INIT&quot;);\n        repo.findFirstByActiuIsTrueOrderByDataDesc();\n        repo.findFirstByActiuIsTrueOrderByDataDesc1(); ///Working case\n        log.error(&quot;DEBUG END&quot;);\n    }\n\n</code></pre>\n<pre class=\"lang-java prettyprint-override\"><code>Repository\n\n//Failing case\nOptional&lt;Condicio&gt; findFirstByActiuIsTrueOrderByDataDesc();\n\n\n@Query(&quot;SELECT c FROM Condicio c WHERE c.actiu = true ORDER BY c.data ASC&quot;)\nOptional&lt;Condicio&gt; findFirstByActiuIsTrueOrderByDataDesc1(); //Working case\n\n</code></pre>\n<pre><code>2023-05-13T10:23:19.336+02:00 ERROR 42936 --- [  restartedMain] c.n.a.backend.service.CondicioService    : DEBUG INIT\nHibernate: select c1_0.COND_CONDICIO,c1_0.COND_ACTIU,c1_0.COND_DATA,c1_0.COND_DESCRIPCIO from CONDICIONS c1_0 where c1_0.COND_ACTIU order by c1_0.COND_DATA desc limit ?\nHibernate: select c1_0.COND_CONDICIO,c1_0.COND_ACTIU,c1_0.COND_DATA,c1_0.COND_DESCRIPCIO from CONDICIONS c1_0 where c1_0.COND_ACTIU='S' order by c1_0.COND_DATA asc\n2023-05-13T10:23:19.451+02:00 ERROR 42936 --- [  restartedMain] c.n.a.backend.service.CondicioService    : DEBUG END\n</code></pre>\n"},{"tags":["java","static","initialization-block"],"comments":[{"owner":{"user_id":1774084,"display_name":"M. Yousfi"},"edited":false,"comment_id":134389982,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/2420389/static-initialization-blocks\">Static Initialization Blocks</a>"},{"owner":{"user_id":5133585,"display_name":"Sweeper"},"edited":false,"comment_id":134390065,"body":"See the duplicate. Note the wording &quot;A static field <b><i>declared</i></b> by <code>T</code>&quot;. What class your code uses doesn&#39;t matter. It is the class in which the field is <i>declared</i> that determines whether that class is initialised."},{"owner":{"user_id":16320675,"display_name":"user16320675"},"edited":false,"comment_id":134390131,"body":"Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.7\" rel=\"nofollow noreferrer\">8.7. Static Initializers</a>: &quot;A static initializer declared in a class is executed when the class is initialized&quot; and <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-12.html#jls-12.4.1\" rel=\"nofollow noreferrer\">12.4.1. When Initialization Occurs</a> &quot;...instance of T is created ... static method declared by T is invoked ... static field declared by T is assigned ... static field declared by T is used...&quot; (check the link for details) <code>Child</code> is not initialized since none of these four cases applies when running <code>Test</code>"},{"owner":{"user_id":139985,"display_name":"Stephen C"},"edited":false,"comment_id":134390237,"body":"Having said that, it is generally a bad idea to rely on static initialization order as it can hard to understand."},{"owner":{"user_id":2743585,"display_name":"GabiM"},"edited":false,"comment_id":134390836,"body":"What happens in that static block in Child? The <code>y</code> there is actually the field of the class Parent, that is not a declaration of a new field of class Child... right? Yet we are allowed to reference Child.y field? I glanced over the Oracle docs now but didn&#39;t find something relevant"},{"owner":{"user_id":16320675,"display_name":"user16320675"},"edited":false,"comment_id":134391194,"body":"@GabiM check Java Language Specification <a href=\"https://docs.oracle.com/javase/specs/jls/se20/html/jls-8.html#jls-8.2\" rel=\"nofollow noreferrer\">8.2. Class Members</a>"}],"owner":{"user_id":14466590,"display_name":"Tohidur Islam Mondal"},"view_count":37,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1683617978,"question_id":76206919,"body":"<pre><code>public class Parent {\n    public static int y=10 ;\n}\n\npublic class Child extends Parent {\n    static {\n        y=20 ;\n    }\n\n    public static void main(String[] args) {\n        System.out.println(Child.y);  // output = 20\n    }\n}\n\npublic class Test {\n    public static void main(String[] args) {\n        System.out.println(Child.y); // output = 10\n    }\n}\n</code></pre>\n<p>Note: in the first scenario, static block is getting executed. But this is not the same case in the second scenario. Why? Why does the output value differ?\nI am using jdk-17</p>\n"},{"tags":["java","file","remote-access"],"comments":[{"owner":{"user_id":12199915,"display_name":"Alex"},"edited":false,"comment_id":134375298,"body":"Just use it as you need. For example <code>readFile(&quot;https:&#47;&#47;raw.githubusercontent.com&#47;razorpay&#47;ifsc-ap&zwnj;&#8203;i&#47;master&#47;data&#47;ABNA.j&zwnj;&#8203;son&quot;)</code>. It will return you a stream of file content. Because spring uses <code>DefaultResourceLoader</code> which in implementation uses <code>UrlResource</code> if it is not a filesystem or classpath resource"}],"answers":[{"owner":{"user_id":2695990,"display_name":"fascynacja"},"up_vote_count":0,"is_accepted":false,"creation_date":1683620309,"answer_id":76207222,"body":"<p>If I understood correctly. You would like to automatically retrieve list of json files from given path of repository and then read all those files.</p>\n<p>This code is a simplified example how to achieve it:</p>\n<pre><code>@Autowired\nprivate ResourceLoader resourceLoader;\n\n@Bean\nCommandLineRunner run(ObjectMapper objectMapper) {\n    return a -&gt;\n    {\n        // (1)\n        List&lt;UrlObject&gt; urlObjects = objectMapper.readValue(\n                new URL(&quot;https://api.github.com/repos/razorpay/ifsc-api/contents/data&quot;),\n                new TypeReference&lt;&gt;() {}); \n        \n        List&lt;String&gt; urls = urlObjects.stream()\n                .map(obj -&gt; obj.name)\n                .filter(name -&gt; name.endsWith(&quot;json&quot;)) // (2)\n                .map(name -&gt; &quot;https://raw.githubusercontent.com/razorpay/ifsc-api/master/data/&quot; + name)\n                .peek(System.out::println) // (3)\n                .collect(Collectors.toList());\n\n        // do whatever you need with given urls\n        for (String url : urls) {\n            InputStream is = readFile(url);\n        }\n    };\n}\n\nprivate InputStream readFile(String fileName) throws Exception {\n    Resource resource = resourceLoader.getResource(fileName);\n    return resource.getInputStream();\n}\nstatic class UrlObject {\n    @JsonProperty(&quot;name&quot;)\n    String name;\n}\n</code></pre>\n<p>(1) First we are using github API: <a href=\"https://docs.github.com/en/rest/repos/contents?apiVersion=2022-11-28#get-repository-content\" rel=\"nofollow noreferrer\">https://docs.github.com/en/rest/repos/contents?apiVersion=2022-11-28#get-repository-content</a> in order to retrieve contents of given path in repository.</p>\n<p>(2) Additional filter for json files is applied.</p>\n<p>(3) just for debug, can be removed later</p>\n"}],"owner":{"user_id":352290,"display_name":"user352290"},"view_count":88,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1683263925,"question_id":76179027,"body":"<p>The following is a snippet to load bank location specific information a JSON file.</p>\n<pre><code>@Autowired\nprivate ResourceLoader resourceLoader;\n\nreadFile(&quot;classpath:/HCBL.json&quot;);\n\nprivate InputStream readFile(String fileName) throws Exception {\n    Resource resource = resourceLoader.getResource(fileName);\n    return resource.getInputStream();\n}\n</code></pre>\n<p>Instead of reading from a local file, I would like to point to a remote GitHub repository (say <a href=\"https://github.com/razorpay/ifsc-api/tree/master/data\" rel=\"nofollow noreferrer\">https://github.com/razorpay/ifsc-api/tree/master/data</a>) instead of copying files into the classpath (say src/main/resources) and load them directly</p>\n"},{"tags":["java","java-nio"],"comments":[{"owner":{"user_id":300257,"display_name":"Gilbert Le Blanc"},"edited":false,"comment_id":134261278,"body":"No, there&#39;s no way to check if a different program is writing to a file.  You can skip processing the file with the latest creation date."},{"owner":{"user_id":4712734,"display_name":"DuncG"},"edited":false,"comment_id":134261348,"body":"You can avoid much of the conflict by having the producer of files write to &quot;xyz.abc.tmp&quot; and rename after completion to &quot;xyz.abc&quot;, then make your Java app scan only for &quot;.abc&quot; and ignore &quot;.tmp&quot; files."},{"owner":{"user_id":1968,"display_name":"Konrad Rudolph"},"edited":false,"comment_id":134261381,"body":"You <i>can</i> check whether a file is still opened by another process. However, as you say yourself there is no platform agnostic way of doing this, and you probably have to drop into JNI to accomplish this (at least on some platforms; on Linux you might get away with procfs, ignoring potential race conditions resulting from this)."},{"owner":{"user_id":2288659,"display_name":"Silvio Mayolo"},"edited":false,"comment_id":134261392,"body":"The easiest way would be to use a tool like <a href=\"https://www.man7.org/linux/man-pages/man2/flock.2.html\" rel=\"nofollow noreferrer\"><code>flock</code></a> to communicate between the two processes, but that requires the writing process to collaborate with you and agree to hold the lock. Do you have any control over that process?"},{"owner":{"user_id":19297684,"display_name":"MKRabbit"},"edited":false,"comment_id":134298994,"body":"@SilvioMayolo Unfortunately, I do not have any control over the producer."}],"answers":[{"owner":{"user_id":2846138,"display_name":"cyberbrain"},"up_vote_count":0,"is_accepted":false,"creation_date":1682715339,"answer_id":76133229,"body":"<p>There is no reliable and OS independent way for Java to get this solved.</p>\n<p>Other platforms that need to solve this problem (e.g. Apache Camel) use various strategies (some of them already mentioned in the comments to your question):</p>\n<ul>\n<li>rename the file after it was completely written</li>\n<li>create the file in a different folder and move it to the folder that Java is watching</li>\n<li>create an additional trigger file that Java can watch when the original file to process is ready</li>\n<li>create a time based schedule, e.g. your file is always created at 0:00 and 12:00 of a day, the creation takes maximum one hour, then you can instruct Java to do the processing at 2:00 and 14:00</li>\n<li>set up other means of process synchronization</li>\n</ul>\n<p>There is no general solution that fits all individual problems.</p>\n"},{"owner":{"user_id":19297684,"display_name":"MKRabbit"},"up_vote_count":0,"is_accepted":false,"creation_date":1683024769,"answer_id":76154110,"body":"<p>After looking around for a bit, I believe I found a workaround for my situation. I tested out <em>copyFile</em> method from  <code>org.apache.commons.io.FileUtils</code>. This method throws an IOException if the length of copied file is not the same as the original file. Source: <a href=\"https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html#copyFile(java.io.File,%20java.io.File)\" rel=\"nofollow noreferrer\">https://commons.apache.org/proper/commons-io/javadocs/api-2.5/org/apache/commons/io/FileUtils.html#copyFile(java.io.File,%20java.io.File)</a></p>\n<p>So something like this:</p>\n<pre><code>try {\n  org.apache.commons.io.FileUtils.copyFile(&quot;srcFile.txt&quot;, &quot;destFile.txt&quot;);\n} catch (IOException e) {\n  LOGGER.error(&quot;IOException: &quot;, e);\n\n  retryThisMethod();\n}\n</code></pre>\n<p>If an IOException is thrown, I initiate a retry for the copy.</p>\n"}],"owner":{"user_id":19297684,"display_name":"MKRabbit"},"view_count":43,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1682695882,"question_id":76131108,"body":"<p>I have a non-Java program writing files to a directory. My Java program then copies these files to a different directory. Is there a way for Java to check if the last file is fully written to before being copied? This is because when I copy the files, the last file is still being written/processed to by the other program and the Java copy results in only a partial copy of it.</p>\n<p>I have looked at doing something like this (Taken from answer here: <a href=\"https://stackoverflow.com/a/17603619/19297684\">https://stackoverflow.com/a/17603619/19297684</a>):</p>\n<pre><code>boolean success = potentiallyIncompleteFile.renameTo(stagingAreaFile);\n</code></pre>\n<p>where the program attempts to rename the last file. However, this is not platform agnostic.</p>\n"},{"tags":["java","jmx-exporter"],"comments":[{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"edited":false,"comment_id":134257286,"body":"I guess one reports the total number of threads used by the process (including JVM internal native threads that have no Java <code>java.lang.Thread</code> instance), and the other reports the number of <code>java.lang.Thread</code> instances."}],"owner":{"user_id":8722374,"display_name":"J Jena"},"view_count":47,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1682616890,"question_id":76123202,"body":"<p>I have a simple java program running to display mxbean threads in Centos.<br />\nWhen I do</p>\n<pre><code>cat /proc/&lt;pid&gt;/status|grep Threads\n</code></pre>\n<p>I get 17 threads but the program outputs very less threads.</p>\n<p>Could you help me understand why mxbean returns lesser count?</p>\n<p>Note: Use case is: prometheus jmx exporter uses threadmxbean interface to show thread count (which is lesser) whereas graphite returns the same value from linux command (which is higher).</p>\n<pre><code>import java.lang.management.*;\npublic class threadmxbean {\n\npublic static void main(String[] args) {\n    // Get the ThreadMXBean instance\n    ThreadMXBean threadMXBean = ManagementFactory.getThreadMXBean();\n   // Print the number of threads currently running\n   System.out.println(&quot;Number of threads-getThreadCount(): &quot; + threadMXBean.getThreadCount());\n   System.out.println(&quot;Number of threads-getDaemonThreadCount(): &quot; + threadMXBean.getDaemonThreadCount());\n   System.out.println(&quot;Number of threads-getTotalStartedThreadCount(): &quot; + threadMXBean.getTotalStartedThreadCount());\ntry{Thread.sleep(500000);}catch(InterruptedException e){System.out.println(e);}\n}\n}\n\nOutput:\n\nNumber of threads-getThreadCount(): 5\nNumber of threads-getDaemonThreadCount(): 4\nNumber of threads-getTotalStartedThreadCount(): 5\n</code></pre>\n"},{"tags":["java","android","rx-java"],"owner":{"user_id":9773423,"display_name":"Taki"},"view_count":149,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1682098177,"question_id":76075482,"body":"<p>My project is in Java , but when i tried to compile the project , it throws kotlin-related error that there are duplicate classes whereas i'm not really using any kotlin dependency or kotlin , any reason why this is happening Thank you .</p>\n<ul>\n<li>This is my build gradle ( for project )</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/4ANLH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/4ANLH.png\" alt=\"enter image description here\" /></a></p>\n<ul>\n<li>This is my build gradle ( for module )</li>\n</ul>\n<p><a href=\"https://i.stack.imgur.com/nWjJC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nWjJC.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","android","android-studio","kotlin","android-jetpack-compose"],"comments":[{"owner":{"user_id":3937935,"display_name":"Ali.M"},"edited":false,"comment_id":134102786,"body":"I also faced with such problems after update of Android Studio. The error is from your plugin version, which is 8.0.0. Maybe just a bug. Not sure. But what you can try is going to the <code>build.gradle</code> file for your project. In the dependencies find the line that specifies the version of the <code>com.android.tools.build:gradle</code> plugin. You may change it to another version like <code>classpath &#39;com.android.tools.build:gradle:7.0.4&#39;</code>. See if it works. If didn&#39;t work try to change the version of other dependencies."},{"owner":{"user_id":9708904,"display_name":"Danial clarc"},"edited":false,"comment_id":134109941,"body":"No its still not working"}],"answers":[{"owner":{"user_id":1380933,"display_name":"Vadik Sirekanyan"},"up_vote_count":0,"is_accepted":true,"creation_date":1681747404,"answer_id":76037103,"body":"<p>Since you are using Android API level 33, <a href=\"https://developer.android.com/studio/write/java11-minimal-support-table\" rel=\"nofollow noreferrer\">Java 11 is available through desugaring</a>.</p>\n<p>You can now change the source and target compatibility to Java 11:</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_11\n    targetCompatibility JavaVersion.VERSION_11\n}\n\nkotlin {\n    jvmToolchain(11)\n}\n</code></pre>\n"},{"owner":{"user_id":21665513,"display_name":"Nino Antonio Bozzi &#193;lvarez"},"up_vote_count":0,"is_accepted":false,"creation_date":1681750476,"answer_id":76037514,"body":"<p>If you don't want to change compatibility with version 11 and stay in 1.8, you could desugar it:</p>\n<p>first update Gradle to 8.0.0 (at least 4.0.0) modifying build.gradle.kts:</p>\n<pre><code>plugins {\n    id(&quot;com.android.application&quot;) version &quot;8.0.0&quot; apply false\n    id(&quot;com.android.library&quot;) version &quot;8.0.0&quot; apply false\n    id(&quot;org.jetbrains.kotlin.android&quot;) version &quot;1.5.31&quot; apply false\n}\n</code></pre>\n<p>or modifying build.gradle:</p>\n<pre><code>plugins {\n    id 'com.android.application' version '8.0.0' apply false\n    id 'com.android.library' version '8.0.0' apply false\n    id 'org.jetbrains.kotlin.android' version '1.5.31' apply false\n}\n</code></pre>\n<p>as shown in <a href=\"https://developer.android.com/build/releases/gradle-plugin#updating-plugin\" rel=\"nofollow noreferrer\">https://developer.android.com/build/releases/gradle-plugin#updating-plugin</a></p>\n<p>Then, desugar it modifying your app's module build.gradle.kts file:</p>\n<pre><code>android {\n    defaultConfig {\n        // Required when setting minSdkVersion to 20 or lower\n        multiDexEnabled = true\n    }\n\n    compileOptions {\n        // Flag to enable support for the new language APIs\n\n        // For AGP 4.1+\n        isCoreLibraryDesugaringEnabled = true\n        // For AGP 4.0\n        // coreLibraryDesugaringEnabled = true\n\n        // Sets Java compatibility to Java 8\n        sourceCompatibility = JavaVersion.VERSION_1_8\n        targetCompatibility = JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    coreLibraryDesugaring(&quot;com.android.tools:desugar_jdk_libs:1.2.2&quot;)\n}\n</code></pre>\n<p>or your build.gradle Groovy file:</p>\n<pre><code>android {\n    defaultConfig {\n        // Required when setting minSdkVersion to 20 or lower\n        multiDexEnabled true\n    }\n\n    compileOptions {\n        // Flag to enable support for the new language APIs\n        coreLibraryDesugaringEnabled true\n        // Sets Java compatibility to Java 8\n        sourceCompatibility JavaVersion.VERSION_1_8\n        targetCompatibility JavaVersion.VERSION_1_8\n    }\n}\n\ndependencies {\n    coreLibraryDesugaring 'com.android.tools:desugar_jdk_libs:1.2.2'\n}\n</code></pre>\n<p>as shown in <a href=\"https://developer.android.com/studio/write/java8-support#library-desugaring\" rel=\"nofollow noreferrer\">https://developer.android.com/studio/write/java8-support#library-desugaring</a>.</p>\n<p>Remember that you need to remove the <em>-XX:MaxPermSize=1024m</em> argument of jvmargs in gradle.properties file, to avoid an error.</p>\n"},{"owner":{"user_id":10351091,"display_name":"Dmytro H."},"up_vote_count":0,"is_accepted":false,"creation_date":1682087882,"answer_id":76074206,"body":"<p>I've faced the similar problem</p>\n<p>I changed build.gradle(Project: MyProject) to</p>\n<pre><code>plugins {\n    id 'com.android.application' version '7.3.1' apply false\n    id 'com.android.library' version '7.3.1' apply false\n    id 'org.jetbrains.kotlin.android' version '1.8.10' apply false\n    id 'org.jetbrains.kotlin.jvm' version '1.8.10' apply false\n}\n</code></pre>\n<p>Change kotlinCompilerExtensionVersion in build.gradle(Module: app) to</p>\n<pre><code>composeOptions {\n                kotlinCompilerExtensionVersion '1.4.3'\n            }\n</code></pre>\n<p>And update Gradle JDK to openJDK-19(any ver 11 and above)\n<a href=\"https://i.stack.imgur.com/u3NDe.png\" rel=\"nofollow noreferrer\">Settings screenshot</a></p>\n"},{"owner":{"user_id":9351811,"display_name":"Kuvonchbek Yakubov"},"up_vote_count":0,"is_accepted":false,"creation_date":1682424656,"answer_id":76101018,"body":"<p>For me changing only the java version in <code>build.gradle</code> file didn't work. So I changed it in Gradle Settings.</p>\n<p>Go to <code>File -&gt; Project Structure -&gt; SDK Location -&gt; Gradle Settings</code> change Gradle JDK to 17.</p>\n<p><a href=\"https://i.stack.imgur.com/AxS49.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/AxS49.png\" alt=\"enter image description here\" /></a></p>\n<p>Click OK and change <code>compileOptions</code> and <code>kotlinOptions</code> to the same version in <code>build.gradle(Module:app)</code>:</p>\n<pre><code>compileOptions {\n    sourceCompatibility JavaVersion.VERSION_17\n    targetCompatibility JavaVersion.VERSION_17\n}\n\nkotlinOptions {\n    jvmTarget = '17'\n}\n</code></pre>\n"}],"owner":{"user_id":9708904,"display_name":"Danial clarc"},"view_count":734,"up_vote_count":3,"accepted_answer_id":76037103,"answer_count":4,"score":3,"creation_date":1681745353,"question_id":76036800,"body":"<p>I updated my android studio to latest version flamingo this morning after since I am not able to create a new compose project, getting this below error</p>\n<pre><code>No matching variant of com.android.tools.build:gradle:8.0.0 was found. The consumer was configured to find a library for use during runtime, compatible with Java 8, packaged as a jar, and its dependencies declared externally, as well as attribute 'org.gradle.plugin.api-version' with value '8.0'\n</code></pre>\n<blockquote>\n<p>but:\n- Variant 'apiElements' capability com.android.tools.build:gradle:8.0.0 declares a library, packaged as a jar, and its dependencies declared externally:\n- Incompatible because this component declares a component for use during compile-time, compatible with Java 11 and the consumer needed a component for use during runtime, compatible with Java 8</p>\n</blockquote>\n<p>**My App level gradle **</p>\n<pre><code>        plugins {\n        id 'com.android.application'\n        id 'org.jetbrains.kotlin.android'\n    }\n    \n    android {\n        namespace 'com.abc.myflamingotestapp'\n        \n    compileSdk 33\n    \n        defaultConfig {\n            applicationId &quot;com.abc.myflamingotestapp&quot;\n            minSdk 24\n            targetSdk 33\n            versionCode 1\n            versionName &quot;1.0&quot;\n    \n            testInstrumentationRunner &quot;androidx.test.runner.AndroidJUnitRunner&quot;\n            vectorDrawables {\n                useSupportLibrary true\n            }\n        }\n    \n        buildTypes {\n            release {\n                minifyEnabled false\n                proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'\n            }\n        }\n        compileOptions {\n            sourceCompatibility JavaVersion.VERSION_1_8\n            targetCompatibility JavaVersion.VERSION_1_8\n        }\n        kotlinOptions {\n            jvmTarget = '1.8'\n        }\n        buildFeatures {\n            compose true\n        }\n        composeOptions {\n            kotlinCompilerExtensionVersion '1.3.2'\n        }\n        packagingOptions {\n            resources {\n                excludes += '/META-INF/{AL2.0,LGPL2.1}'\n            }\n        }\n    }\n    \n    dependencies {\n    \n        implementation 'androidx.core:core-ktx:1.8.0'\n        implementation 'androidx.lifecycle:lifecycle-runtime-ktx:2.3.1'\n        implementation 'androidx.activity:activity-compose:1.5.1'\n        implementation platform('androidx.compose:compose-bom:2022.10.00')\n        implementation 'androidx.compose.ui:ui'\n        implementation 'androidx.compose.ui:ui-graphics'\n        implementation 'androidx.compose.ui:ui-tooling-preview'\n        implementation 'androidx.compose.material3:material3'\n        testImplementation 'junit:junit:4.13.2'\n        androidTestImplementation 'androidx.test.ext:junit:1.1.5'\n        androidTestImplementation 'androidx.test.espresso:espresso-core:3.5.1'\n        androidTestImplementation platform('androidx.compose:compose-bom:2022.10.00')\n        androidTestImplementation 'androidx.compose.ui:ui-test-junit4'\n        debugImplementation 'androidx.compose.ui:ui-tooling'\n        debugImplementation 'androidx.compose.ui:ui-test-manifest'\n}\n</code></pre>\n<p>** Gradle wrapper **</p>\n<pre><code>#Mon Apr 17 20:26:41 IST 2023\ndistributionBase=GRADLE_USER_HOME\ndistributionPath=wrapper/dists\ndistributionUrl=https\\://services.gradle.org/distributions/gradle-8.0-bin.zip\nzipStoreBase=GRADLE_USER_HOME\nzipStorePath=wrapper/dists\n</code></pre>\n<p>** Top level Gradle **</p>\n<pre><code>// Top-level build file where you can add configuration options common to all sub-projects/modules.\nplugins {\n    id 'com.android.application' version '8.0.0' apply false\n    id 'com.android.library' version '8.0.0' apply false\n    id 'org.jetbrains.kotlin.android' version '1.5.31' apply false\n}\n</code></pre>\n<p>getting this issue while trying to build, if anyone else have faced the same issue please help or suggest something.</p>\n"},{"tags":["java","spring","spring-boot","hibernate","spring-mvc"],"answers":[{"owner":{"user_id":3420116,"display_name":"asyncmind"},"up_vote_count":0,"is_accepted":false,"creation_date":1682076233,"answer_id":76072689,"body":"<p><strong>I finally fixed it</strong> by replacing all @ManyToOne fetchtype with LAZY and changing some configuration.</p>\n<p>so, this:</p>\n<pre><code>@ManyToOne\nprivate MyObject myObjectReference\n</code></pre>\n<p>became:</p>\n<pre><code>@ManyToOne(fetch = FetchType.LAZY)\nprivate MyObject myObjectReference\n</code></pre>\n<p>(I have 1641 <code>@ManyToOne</code> replaced by <code>@ManyToOne(fetch = FetchType.LAZY)</code>)</p>\n<p>I Also changed my ApplicationConfiguration class: instead of using <code>LocalSessionFactoryBean</code> and <code>HibernateTransactionManager</code>, I use <code>LocalContainerEntityManagerFactoryBean</code> and <code>JpaTransactionManager</code>:</p>\n<pre><code>@SpringBootApplication\n@EnableAutoConfiguration(\n    excludeName = { \n        &quot;org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration&quot;\n    }\n)\n@ComponentScan( ... )\n@PropertySource\n@EnableCaching\n@EnableTransactionManagement\n@Configuration\npublic class ApplicationConfiguration {\n\n    @Primary\n    @Autowired\n    @Bean\n    public LocalContainerEntityManagerFactoryBean entityManagerFactory(@Qualifier(&quot;dataSource&quot;) DataSource dataSource,\n                                                         MultiTenantConnectionProvider multiTenantConnectionProviderImpl,\n                                                         CurrentTenantIdentifierResolver currentTenantIdentifierResolverImpl) {\n        \n        LocalContainerEntityManagerFactoryBean entityManagerFactoryBean = new LocalContainerEntityManagerFactoryBean();\n        entityManagerFactoryBean.setJpaVendorAdapter(new HibernateJpaVendorAdapter());\n        entityManagerFactoryBean.setDataSource(dataSource);     \n        entityManagerFactoryBean.setPersistenceProviderClass(HibernatePersistenceProvider.class);\n        entityManagerFactoryBean.setPackagesToScan(packagesToScan); \n\n        Properties hibernateProperties = hibernateProperties();\n        hibernateProperties.put(AvailableSettings.MULTI_TENANT_CONNECTION_PROVIDER, multiTenantConnectionProviderImpl);\n        hibernateProperties.put(AvailableSettings.MULTI_TENANT_IDENTIFIER_RESOLVER, currentTenantIdentifierResolverImpl);\n\n        entityManagerFactoryBean.setJpaProperties(hibernateProperties);\n\n        return entityManagerFactoryBean;\n    }\n\n    @Bean\n    @Autowired\n    @Primary\n    public TransactionManager transactionManager(EntityManagerFactory entityManagerFactory) {\n        JpaTransactionManager jpaTransactionManager = new JpaTransactionManager();\n        jpaTransactionManager.setDataSource(dataSource());\n        jpaTransactionManager.setEntityManagerFactory(entityManagerFactory);\n        return jpaTransactionManager;\n    }\n}\n</code></pre>\n<p>I also changed MyCustomDAO to use EntityManager instead of HibernateTransactionManager:</p>\n<pre><code>public class MyCustomDAO {\n\n    @PersistenceContext \n    protected EntityManager entityManager;\n\n    @Transactional\n    public void myCustomMethod() {\n    \n        // Some transactional code\n\n    }\n}\n</code></pre>\n<p>It works now.\nI think when hibernate trying to create requests at runtime for CRUD operations, OneToOne and ManyToOne not Lazy fetched is included into requests so when there is many foreign key deeply/circular linked (Ex: TableA -&gt; TableB -&gt; TableC -&gt; TableA), requests generated became so big or maybe with an infinite recursion (caused by circular Join) that an OutOfMemoryEdxception is raised</p>\n"}],"owner":{"user_id":3420116,"display_name":"asyncmind"},"view_count":96,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1681302541,"question_id":75995461,"body":"<p>can someone help me please: I trying to migrate huge java project from hibernate 5, spring 5 &amp; spring boot 2 to hibernate 6, spring 6 &amp; spring boot 3 but I'm stuck with an OutOfMemory exception that seems to be a circular dependency problem, caused by @PostConstruct annotation.</p>\n<p>Here is my <strong>ApplicationConfiguration</strong> class (Class and methods names was changed and useless code for this topic was removed):</p>\n<pre>\n\n    @SpringBootApplication\n    @EnableAutoConfiguration(\n        excludeName = { \n            \"org.springframework.boot.autoconfigure.orm.jpa.HibernateJpaAutoConfiguration\"\n        }\n    )\n    @ComponentScan( ... )\n    @PropertySource\n    @EnableCaching\n    @EnableTransactionManagement\n    @Configuration\n    public class ApplicationConfiguration {\n    \n        @Primary\n        @Autowired\n        @Bean\n        public LocalSessionFactoryBean sessionFactory(@Qualifier(\"dataSource\") DataSource dataSource,\n                                                             MultiTenantConnectionProvider multiTenantConnectionProviderImpl,\n                                                             CurrentTenantIdentifierResolver currentTenantIdentifierResolverImpl) {\n            \n            // Some code: Creation of LocalSessionFactoryBean for primary datasource\n        }\n    \n        @Bean\n        @Autowired\n        @Primary\n        public HibernateTransactionManager transactionManager(@Qualifier(\"sessionFactory\") SessionFactory sessionFactory) {\n                    \n            // Some code: Creation of primary transaction manager\n        }\n    }\n\n</pre>\n<p>Here is <strong>MyCustomDAO</strong> class</p>\n<pre>\n\n    public class MyCustomDAO {\n    \n        @Autowired(required = false)\n        @Qualifier(\"transactionManager\")\n        @Lazy\n        protected HibernateTransactionManager transactionManager;\n    \n        @Transactional\n        public void myCustomMethod() {\n        \n            // Some transactional code\n    \n        }\n    }\n\n</pre>\n<p>Last, but not least, <strong>MyCustomService</strong> class with a <code>@PostConstruct</code> method that throw Exception:</p>\n<pre>\n\n    @Service\n    public class MyCustomService {\n       \n        @Autowired\n        private MyCustomDAO myCustomDAO;\n    \n        @PostConstruct\n        public void updateStatus() {\n            \n            // since 'myCustomMethod' is transactional, it need a transaction\n            // then throw an OutOfMemoryException\n            myCustomDAO.myCustomMethod();\n    \n        }\n    \n    }\n\n</pre>\n<p>I faced the following error:</p>\n<blockquote>\n<p><code>Error creating bean with name 'myCustomService': Invocation of init method failed</code> (begin of the message)\nand <code>java.lang.OutOfMemoryError: Java heap space</code> (end of the message)</p>\n</blockquote>\n<pre>\n12/04/23 13:28:01 demolocal-i10_demo   [main] ERROR t.i.SpringBootApplicationLauncher - Error creating bean with name 'myCustomService': Invocation of init method failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myCustomService ': Invocation of init method failed\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:420)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1754)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:310)\n    at stackoverflow.example.SpringBootApplicationLauncher.initialize(SpringBootApplicationLauncher.java:335)\n    at stackoverflow.example.SpringBootApplicationLauncher.main(SpringBootApplicationLauncher.java:152)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'transactionManager' defined in stackoverflow.example.config.ApplicationConfiguration: Unsatisfied dependency expressed through method 'transactionManager' parameter 0: Error creating bean with name 'sessionFactory' defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:548)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:225)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1298)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1282)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:483)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:338)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:331)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.determineTransactionManager(TransactionAspectSupport.java:505)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:344)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702)\n    at stackoverflow.example.society.MyCustomDAO$$SpringCGLIB$$1.myCustomMethod()\n    at stackoverflow.example.accountinggeneral.MyCustomService.lambda$0(MyCustomService.java:153)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at java.base/java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1092)\n    at stackoverflow.example.accountinggeneral.MyCustomService.updateStatus(MyCustomService.java:150)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:424)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:368)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:192)\n    ... 17 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)\n    ... 49 more\nCaused by: java.lang.OutOfMemoryError: Java heap space\n    at java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray0(Unsafe.java:1382)\n    at java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray(Unsafe.java:1375)\n    at java.base/java.lang.StringConcatHelper.newArray(StringConcatHelper.java:494)\n    at java.base/java.lang.StringConcatHelper.simpleConcat(StringConcatHelper.java:421)\n    at java.base/java.lang.invoke.DirectMethodHandle$Holder.invokeStatic(DirectMethodHandle$Holder)\n    at java.base/java.lang.invoke.LambdaForm$MH/0x0000000800c04400.invoke(LambdaForm$MH)\n    at java.base/java.lang.invoke.Invokers$Holder.linkToTargetMethod(Invokers$Holder)\n    at org.hibernate.sql.ast.SqlTreePrinter.logSqlAst(SqlTreePrinter.java:46)\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translateSelect(AbstractSqlAstTranslator.java:828)\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translate(AbstractSqlAstTranslator.java:780)\n    at org.hibernate.loader.ast.internal.SingleIdLoadPlan.(SingleIdLoadPlan.java:65)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.createLoadPlan(SingleIdEntityLoaderStandardImpl.java:195)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.prepare(SingleIdEntityLoaderStandardImpl.java:54)\n    at org.hibernate.persister.entity.AbstractEntityPersister.prepareLoader(AbstractEntityPersister.java:3332)\n    at org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3326)\n    at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.finishInitialization(MappingMetamodelImpl.java:204)\n    at org.hibernate.internal.SessionFactoryImpl.initializeMappingModel(SessionFactoryImpl.java:319)\n    at org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:269)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:894)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:913)\n    at org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:612)\n    at org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:596)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1808)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1758)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$461/0x0000000800f44b08.getObject(Unknown Source)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n\n12/04/23 13:28:01 demolocal-i10_demo   [main] ERROR t.i.SpringBootApplicationLauncher - Error creating bean with name 'myCustomService': Invocation of init method failed\norg.springframework.beans.factory.BeanCreationException: Error creating bean with name 'myCustomService ': Invocation of init method failed\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:195)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.applyBeanPostProcessorsBeforeInitialization(AbstractAutowireCapableBeanFactory.java:420)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1754)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:961)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:917)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:584)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:146)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:732)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:434)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:310)\n    at stackoverflow.example.SpringBootApplicationLauncher.initialize(SpringBootApplicationLauncher.java:335)\n    at stackoverflow.example.SpringBootApplicationLauncher.main(SpringBootApplicationLauncher.java:152)\nCaused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'transactionManager' defined in stackoverflow.example.config.ApplicationConfiguration: Unsatisfied dependency expressed through method 'transactionManager' parameter 0: Error creating bean with name 'sessionFactory' defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:548)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1324)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1161)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:561)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:225)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1298)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveNamedBean(DefaultListableBeanFactory.java:1282)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveBean(DefaultListableBeanFactory.java:483)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:338)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.getBean(DefaultListableBeanFactory.java:331)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.determineTransactionManager(TransactionAspectSupport.java:505)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:344)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:750)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:702)\n    at stackoverflow.example.society.MyCustomDAO$$SpringCGLIB$$1.myCustomMethod()\n    at stackoverflow.example.accountinggeneral.MyCustomService.lambda$0(MyCustomService.java:153)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at java.base/java.util.Collections$UnmodifiableCollection.forEach(Collections.java:1092)\n    at stackoverflow.example.accountinggeneral.MyCustomService.updateStatus(MyCustomService.java:150)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleElement.invoke(InitDestroyAnnotationBeanPostProcessor.java:424)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor$LifecycleMetadata.invokeInitMethods(InitDestroyAnnotationBeanPostProcessor.java:368)\n    at org.springframework.beans.factory.annotation.InitDestroyAnnotationBeanPostProcessor.postProcessBeforeInitialization(InitDestroyAnnotationBeanPostProcessor.java:192)\n    ... 17 more\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'sessionFactory' defined in stackoverflow.example.config.ApplicationConfiguration: Java heap space\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1762)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)\n    ... 49 more\nCaused by: java.lang.OutOfMemoryError: Java heap space\n    at java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray0(Unsafe.java:1382)\n    at java.base/jdk.internal.misc.Unsafe.allocateUninitializedArray(Unsafe.java:1375)\n    at java.base/java.lang.StringConcatHelper.newArray(StringConcatHelper.java:494)\n    at java.base/java.lang.StringConcatHelper.simpleConcat(StringConcatHelper.java:421)\n    at java.base/java.lang.invoke.DirectMethodHandle$Holder.invokeStatic(DirectMethodHandle$Holder)\n    at java.base/java.lang.invoke.LambdaForm$MH/0x0000000800c04400.invoke(LambdaForm$MH)\n    at java.base/java.lang.invoke.Invokers$Holder.linkToTargetMethod(Invokers$Holder)\n    at org.hibernate.sql.ast.SqlTreePrinter.logSqlAst(SqlTreePrinter.java:46)\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translateSelect(AbstractSqlAstTranslator.java:828)\n    at org.hibernate.sql.ast.spi.AbstractSqlAstTranslator.translate(AbstractSqlAstTranslator.java:780)\n    at org.hibernate.loader.ast.internal.SingleIdLoadPlan.(SingleIdLoadPlan.java:65)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.createLoadPlan(SingleIdEntityLoaderStandardImpl.java:195)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.prepare(SingleIdEntityLoaderStandardImpl.java:54)\n    at org.hibernate.persister.entity.AbstractEntityPersister.prepareLoader(AbstractEntityPersister.java:3332)\n    at org.hibernate.persister.entity.AbstractEntityPersister.postInstantiate(AbstractEntityPersister.java:3326)\n    at org.hibernate.metamodel.model.domain.internal.MappingMetamodelImpl.finishInitialization(MappingMetamodelImpl.java:204)\n    at org.hibernate.internal.SessionFactoryImpl.initializeMappingModel(SessionFactoryImpl.java:319)\n    at org.hibernate.internal.SessionFactoryImpl.(SessionFactoryImpl.java:269)\n    at org.hibernate.boot.internal.SessionFactoryBuilderImpl.build(SessionFactoryBuilderImpl.java:431)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:894)\n    at org.hibernate.cfg.Configuration.buildSessionFactory(Configuration.java:913)\n    at org.springframework.orm.hibernate5.LocalSessionFactoryBean.buildSessionFactory(LocalSessionFactoryBean.java:612)\n    at org.springframework.orm.hibernate5.LocalSessionFactoryBean.afterPropertiesSet(LocalSessionFactoryBean.java:596)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.invokeInitMethods(AbstractAutowireCapableBeanFactory.java:1808)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1758)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:599)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:521)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.AbstractBeanFactory$$Lambda$461/0x0000000800f44b08.getObject(Unknown Source)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n</pre>\n<p>Notice that if I put <code>SpringApplication.setLazyInitialization(true)</code>, it works, also none of my webservice is available. But @PostConstruct method is not called until bean is created so I guess it is a circular dependency problem.</p>\n"},{"tags":["java","integer","char","ascii","multiplication"],"comments":[{"owner":{"user_id":1744230,"display_name":"QBrute"},"edited":false,"comment_id":134017874,"body":"There&#39;s a method <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/lang/Character.html#getNumericValue(char)\" rel=\"nofollow noreferrer\"><code>Character.getNumericValue(char)</code></a> that should do the trick."},{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":134018399,"body":"Bear in mind that <code>getNumericValue(char)</code> may <a href=\"https://stackoverflow.com/q/31888001/12567365\">surprise you</a> - depending on the inputs."},{"owner":{"user_id":10816178,"display_name":"N Sarj"},"edited":false,"comment_id":134018724,"body":"Also consider Integer.parseInt in case you want to convert the result of combining multiple characters into a number."},{"owner":{"user_id":13330292,"display_name":"fer.trecool"},"edited":false,"comment_id":134019528,"body":"You could cast the char variable: int var = (int) NUMBER; and then do the multiplication."},{"owner":{"user_id":13330292,"display_name":"fer.trecool"},"edited":false,"comment_id":134019628,"body":"But remember that the char variable will take the ASCII value, for example, if the char value is 1 and you multiply it by 5, the result will be 245, because 1 in ASCII is 49(decimal) ."},{"owner":{"user_id":965593,"display_name":"pamphlet"},"edited":false,"comment_id":134022889,"body":"I believe the generic term for what you&#39;re looking to do is &quot;parse&quot;. E.g. try searching for &quot;parse number java&quot;."}],"answers":[{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"up_vote_count":0,"is_accepted":false,"creation_date":1681232101,"answer_id":75988384,"body":"<h1>Code points</h1>\n<p>While <code>char</code> can be made to work for you, that is a legacy data type. As a 16-bit value, <code>char</code> is physically incapable of representing most characters.</p>\n<p>So I suggest you make a habit of using <a href=\"https://en.wikipedia.org/wiki/Code_point\" rel=\"nofollow noreferrer\">code point</a> integer numbers when working with individual characters.</p>\n<pre><code>int[] codePoints = &quot;1234&quot;.codePoints().toArray() ;\n</code></pre>\n<p>Loop each code point. Test if that code point represents a character that is a digit. Change each code point back to text. Parse that text as an integer. Multiply using <code>Math.multiplyExact</code> to alert us to <a href=\"https://en.wikipedia.org/wiki/Integer_overflow\" rel=\"nofollow noreferrer\">integer overflow</a>. Finally, report result.</p>\n<pre><code>int multiplicand = 2 ;\nfor( int codePoint : codePoints ) \n{\n    if( Character.isDigit( codePoint ) )\n    {\n        String digitAsText = Character.toString( codePoint ) ;\n        int x = Integer.parseInt( digitAsText ) ;\n        int y = Math.multiplyExact( x , multiplicand ) ;\n        System.out.println( x + &quot; * &quot; + multiplicand + &quot; = &quot; + y) ;\n    }\n}\n</code></pre>\n<p>See this code <a href=\"https://ideone.com/ALw7LG\" rel=\"nofollow noreferrer\">run at Ideone.com</a>.</p>\n<pre class=\"lang-none prettyprint-override\"><code>1 * 2 = 2\n2 * 2 = 4\n3 * 2 = 6\n4 * 2 = 8\n</code></pre>\n<h2>Shorter code</h2>\n<blockquote>\n<p>I am a beginner and I will try to write my problem as short as possible;</p>\n</blockquote>\n<p>Short code is rarely a wise goal.</p>\n<p>Longer code, written with short simple statements, is easier to read, easier to debug, and easier for the compiler to optimize.</p>\n<p>But if you insist, here is a single statement that leverages advanced features of Java including streams, lambdas, and method references.</p>\n<pre class=\"lang-java prettyprint-override\"><code>&quot;1234&quot;\n        .codePoints()\n        .filter( Character :: isDigit )\n        .mapToObj( Character :: toString )\n        .map( Integer :: valueOf )\n        .map( ( Integer integer ) -&gt; Math.multiplyExact( integer , 2 ) )\n        .forEach( System.out :: println );\n</code></pre>\n<p>This single-statement code involves <a href=\"https://en.wikipedia.org/wiki/Boxing_(computer_science)\" rel=\"nofollow noreferrer\">auto-boxing</a>. So this code may run a tiny bit slower than the longer code above.</p>\n<p>When run:</p>\n<pre class=\"lang-none prettyprint-override\"><code>2\n4\n6\n8\n</code></pre>\n"}],"owner":{"user_id":21617859,"display_name":"Krister Karlson"},"view_count":71,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1681217175,"question_id":75986065,"body":"<p>It is my first time using stackoverflow!\nI am a beginner and I will try to write my problem as short as possible;</p>\n<p>User puts a number e.g <code>1234</code></p>\n<pre><code>char NUMBER = In.read();\nwhile (NUMBER != '\\n') {\n    Out.println(NUMBER);    \n    NUMBER = In.read();\n}\n</code></pre>\n<p>The Program will put out the numbers as &quot;1&quot; &quot;2&quot; &quot;3&quot; &quot;4&quot;, so far so good.</p>\n<p>Now I'd like to multiply these numbers with a number I choose.</p>\n<p>When trying this, the program says that it's impossible, because you cannot multiply &quot;char&quot; with &quot;int&quot;.</p>\n<p>How can I solve this problem? How do I multiply these numbers?</p>\n<p>Thank you in advance!</p>\n<p>I tried using the ASCII, but that also does not work when trying to multiply.</p>\n"},{"tags":["java","android","obfuscation","signed-apk","release-apk"],"answers":[{"owner":{"user_id":7940360,"display_name":"Kishan Viramgama"},"up_vote_count":0,"is_accepted":false,"creation_date":1680774491,"answer_id":75948102,"body":"<p><strong>Add this option in app level <code>build.gradle</code> file</strong></p>\n<pre><code>android {\n    lintOptions {\n      checkReleaseBuilds false\n      abortOnError false\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":13657156,"display_name":"lisa"},"view_count":111,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1680772080,"question_id":75947742,"body":"<p>When I use the obfuscation method Generate Signed APK (<code>minifyEnabled true shrinkResources true</code>), an error will be reported. The error message is as follows. But when it is not confused (<code>minifyEnabled false shrinkResources false</code>), it is successful.</p>\n<pre class=\"lang-none prettyprint-override\"><code>Missing classes detected while running R8. Please add the missing classes or apply additional keep rules that are generated in ...\\missing_rules.txt.\n\nMissing class java.lang.management.ManagementFactory (referenced from: long org.junit.internal.runners.statements.FailOnTimeout.cpuTime(java.lang.Thread) and 1 other context)\nMissing class java.lang.management.RuntimeMXBean (referenced from: void org.junit.rules.DisableOnDebug.&lt;init&gt;(org.junit.rules.TestRule))\nMissing class java.lang.management.ThreadMXBean (referenced from: long org.junit.internal.runners.statements.FailOnTimeout.cpuTime(java.lang.Thread))\n</code></pre>\n<p>I need to successfully Generate Signed APK using obfuscation. What can I do?</p>\n"},{"tags":["java","linux","docker","yocto"],"comments":[{"owner":{"user_id":7786294,"display_name":"Anton Schill&#233;n"},"edited":false,"comment_id":134255591,"body":"What errors do you get in the do_configure()?"},{"owner":{"user_id":17834402,"display_name":"Paul Smith"},"edited":false,"comment_id":134339735,"body":"Maybe building an SDK for cross compiling helps at debugging. Cross compiling openjdk using the sdk is probably not worth it, because lots of dependencies. See: <a href=\"https://docs.yoctoproject.org/sdk-manual/using.html\" rel=\"nofollow noreferrer\">docs.yoctoproject.org/sdk-manual/using.html</a>"}],"owner":{"user_id":21454599,"display_name":"bc_tom"},"view_count":151,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1679578218,"question_id":75823654,"body":"<p>My colleagues and I are trying to build a Yocto OS Image.\nOur application consists of several Micro-Services written with Java 17 and they require to run on an embedded device (<a href=\"https://www.phytec.de/cdocuments/?doc=LAC7Ig\" rel=\"nofollow noreferrer\">phyCORE i.MX 8M Plus Setup Guide</a>). On another System we would run them within Docker containers and deploy them this way but since none of us have ever worked on a Yocto build before, we are kinda stuck getting things to work and finding the layers we have to add to the Yocto build.</p>\n<p>We did get the <a href=\"https://community.nxp.com/t5/i-MX-Processors-Knowledge-Base/How-to-add-openjdk-to-Yocto-Layers/ta-p/1128283\" rel=\"nofollow noreferrer\">meta-java layer</a> to install but that is only based on openjdk-8.</p>\n<p>The following files are the current build configuration</p>\n<p><strong>local.conf</strong></p>\n<pre><code>MACHINE ?= &quot;phyboard-pollux-imx8mp-3&quot;\n\nDISTRO ?= &quot;ampliphy-vendor&quot;\n\n########################\n# global configuration #\n########################\n\n# That are the default values of bitbake.  Adapt these to your workspace and\n# host preferences.\n#DL_DIR = &quot;${TOPDIR}/downloads&quot;\n#SSTATE_DIR = &quot;${TOPDIR}/sstate-cache&quot;\n\n# License Handling\n#  - Uncomment for i.MX6 proprietary GPU libraries\n#LICENSE_FLAGS_WHITELIST += &quot;license-nxp_v14-june-2016_imx-gpu-viv&quot;\n#  - Uncomment for Freescale i.MX6 VPU firmware blobs\n#LICENSE_FLAGS_WHITELIST += &quot;license-freescale_v12-march-2016_firmware-imx&quot;\n\n# build artifacts are deployed here\nDEPLOY_DIR = &quot;${TOPDIR}/deploy&quot;\n\n# enable bitbakes git shallow functionality: this reduces download volume\n# from 7.3G to 1.6 G as of sumo. If you need the git history of a project,\n# you can run a &quot;git remote update&quot; in the tmp dir, as the remotes are\n# correctly specified\nBB_GIT_SHALLOW = &quot;1&quot;\n\n# Select configuration UI for linux and barebox recipe. The openembedded\n# default is 'menuconfig', 'nconfig' has more features.\n# busybox only supports menuconfig\n#KCONFIG_CONFIG_COMMAND = &quot;menuconfig&quot;\nKCONFIG_CONFIG_COMMAND = &quot;nconfig&quot;\nKCONFIG_CONFIG_COMMAND_pn-busybox = &quot;menuconfig&quot;\n\n# SDK will be build for that cpu\n#SDKMACHINE ?= &quot;x86_64&quot;\n\n# bitbake disk monitor setup\nBB_DISKMON_DIRS ??= &quot;\\\n    STOPTASKS,${TMPDIR},1G,100K \\\n    STOPTASKS,${DL_DIR},1G,100K \\\n    STOPTASKS,${SSTATE_DIR},1G,100K \\\n    STOPTASKS,/tmp,100M,100K \\\n    ABORT,${TMPDIR},100M,1K \\\n    ABORT,${DL_DIR},100M,1K \\\n    ABORT,${SSTATE_DIR},100M,1K \\\n    ABORT,/tmp,10M,1K&quot;\n\n#######################\n# Image configuration #\n#######################\n\n# The following line disables the autostart of the phytec-qtdemo by\n# default, but you can start the demo anytime using\n#  $ systemctl start phytec-qtdemo.service\n#SYSTEMD_AUTO_ENABLE_pn-phytec-qtdemo = &quot;disable&quot;\n\n# You can disable and enable FSTYPES as you wish. e.g. 'ext4'.\n# This variable is ordering dependend.\n#IMAGE_FSTYPES = &quot;tar.gz wic ubifs emmc&quot;\n\n# To change the variable for any imx8 machine:\n#IMAGE_FSTYPES_mx8 = &quot;tar.gz wic ubifs emmc&quot;\n\n# Turn on debugging options of the kernel\n#DEBUG_BUILD_pn-linux-mainline = &quot;1&quot;\n# Turn on debugging options of the imx kernel\n#DEBUG_BUILD_pn-linux-imx = &quot;1&quot;\n# Turn on debugging options of the barebox\n#DEBUG_BUILD_pn-barebox = &quot;1&quot;\n\n# Include kernel sources in SDK\nTOOLCHAIN_TARGET_TASK_append = &quot; kernel-devsrc&quot;\n\n# The default package class of the distro ampliphy is 'package_ipk'. The first\n# value is used as the package manager to build the image and sdk. To build\n# also tar packages use\n#PACKAGE_CLASSES = &quot;package_ipk package_tar&quot;\n\n# Variable IMAGE_ROOTFS_EXTRA_SPACE from poky/meta/conf/documentation.conf:\n#   Defines additional free disk space created in the image in Kbytes. By\n#   default, this variable is set to '0'.\n# This example line adds an additional 512 MiB of free space to the root\n# filesystem:\n#IMAGE_ROOTFS_EXTRA_SPACE = &quot;524288&quot;\n\n# See http://www.yoctoproject.org/docs/1.8/ref-manual/ref-manual.html#ref-features-image\n#    Through these variables, you can add several different predefined\n#    packages such as development utilities or packages with debug information\n#    needed to investigate application problems or profile applications\nEXTRA_IMAGE_FEATURES = &quot;&quot;\n# - &quot;Makes an image suitable for development (e.g. allows root logins without\n#    passwords and enables post-installation logging)&quot;\nEXTRA_IMAGE_FEATURES += &quot;debug-tweaks&quot;\n# - &quot;Installs debug symbol packages for all packages installed in a given\n#    image.&quot;\n#EXTRA_IMAGE_FEATURES += &quot;dbg-pkgs&quot;\n# - &quot;Installs debugging tools such as strace and gdb.&quot;\n#EXTRA_IMAGE_FEATURES += &quot;tools-debug&quot;\n\n######################\n# rauc configuration #\n######################\n\n# certificate location for signing bundles\n#CERT_PATH = &quot;${TOPDIR}/../sources/meta-ampliphy/openssl-ca&quot;\n\n####################\n# QT configuration #\n####################\n\n# We disable qt widgets per default to save about 10 MB of storage. If\n# you need qt widget support, you can enable it with this line\n#DISTRO_FEATURES_append = &quot; qtwidgets&quot;\n\nCONF_VERSION = &quot;1&quot;\n\n# Uncomment to accept NXP EULA (needed, if any NXP / freescale layer is used)\n# EULA can then be found under ../sources/meta-freescale/EULA\nACCEPT_FSL_EULA = &quot;1&quot;\n\n# A TISDK BSP requires per default an external toolchain\n# Provide a default path that is compatible to our TISDK docker image\nTOOLCHAIN_BASE ?= &quot;/opt/PHYTEC_BSPs&quot;\n\n############################################\n# Addition of openjdk-8 and minicom to the default build\nPREFERRED_PROVIDER_virtual/java-initial-native = &quot;cacao-initial-native&quot;\nPREFERRED_PROVIDER_virtual/java-native = &quot;jamvm-native&quot;\nPREFERRED_PROVIDER_virtual/javac-native = &quot;ecj-bootstrap-native&quot;\n\nIMAGE_INSTALL_append = &quot; minicom openjdk-8&quot;\n############################################\n</code></pre>\n<p><strong>bblayers.conf</strong></p>\n<pre><code># POKY_BBLAYERS_CONF_VERSION is increased each time build/conf/bblayers.conf\n# changes incompatibly\nPOKY_BBLAYERS_CONF_VERSION = &quot;2&quot;\n\nBBPATH = &quot;${TOPDIR}&quot;\nBBFILES ?= &quot;&quot;\n\nOEROOT := &quot;/home/ubuntu/yocto/sources/poky&quot;\n# add BSPDIR variable, as it is needed by recipes of NXP\nBSPDIR := &quot;${OEROOT}/../..&quot;\n\n#######################################\n# IMPORTANT NOTE: change to correct location and username on your build!\nMYBSPDIR := &quot;/home/ubuntu/yocto/sources&quot;\n########################################\n\n# In our BSPs active layers are defined by the manifest.xml for all BSPs. The\n# bblayers.conf gets created by the init_bblayers.py script.\nBBLAYERS ?= &quot;&quot;\nBBLAYERS += &quot;\\\n  ${OEROOT}/../poky/meta \\\n  ${OEROOT}/../poky/meta-poky \\\n  ${OEROOT}/../meta-openembedded/meta-oe \\\n  ${OEROOT}/../meta-openembedded/meta-networking \\\n  ${OEROOT}/../meta-openembedded/meta-python \\\n  ${OEROOT}/../meta-openembedded/meta-multimedia \\\n  ${OEROOT}/../meta-openembedded/meta-filesystems \\\n  ${OEROOT}/../meta-openembedded/meta-perl \\\n  ${OEROOT}/../meta-openembedded/meta-gnome \\\n  ${OEROOT}/../meta-imx/meta-bsp \\\n  ${OEROOT}/../meta-imx/meta-sdk \\\n  ${OEROOT}/../meta-imx/meta-ml \\\n  ${OEROOT}/../meta-browser/meta-chromium \\\n  ${OEROOT}/../meta-clang \\\n  ${OEROOT}/../meta-freescale \\\n  ${OEROOT}/../meta-freescale-3rdparty \\\n  ${OEROOT}/../meta-freescale-distro \\\n  ${OEROOT}/../meta-nxp-demo-experience \\\n  ${OEROOT}/../meta-python2 \\\n  ${OEROOT}/../meta-qt5 \\\n  ${OEROOT}/../meta-virtualization \\\n  ${OEROOT}/../meta-rauc \\\n  ${OEROOT}/../meta-phytec \\\n  ${OEROOT}/../meta-ampliphy \\\n  ${OEROOT}/../meta-security \\\n  ${OEROOT}/../meta-security/meta-tpm \\\n  &quot;\n###################################\n# Addition of the meta-java layer\nBBLAYERS += &quot;${MYBSPDIR}/meta-java&quot;\n###################################\n</code></pre>\n<p>We also tried creating and adding a Custom Layer containing openjdk-17 but that failed in the cross-compiling process started via <code>bitbake &lt;recipe-name&gt;</code> within the <code>do_configure()</code> part.</p>\n<p>Is there any existing layer that we can add using a newer Java version than version 8 or are there any tips on how to get a Custom Layer running?</p>\n"},{"tags":["java","spring","spring-boot","spring-boot-test"],"comments":[{"owner":{"user_id":6860078,"display_name":"tbatch"},"edited":false,"comment_id":133732219,"body":"You&#39;ve annotated the class with <code>@SpringBootTest</code>.  The class can&#39;t load until Spring Boot has loaded.  If you want to run code before Spring Boot, you can&#39;t have it as part of the Spring configuration."},{"owner":{"user_id":837508,"display_name":"szakal"},"edited":false,"comment_id":133735762,"body":"ok, thx. but has it changed? I don&#39;t see any info in spring boot&#39;s migration guides. so far it worked without any issues. The problem is I have to start a wiremock before the context is loaded. and so far I was doing it using @BeforeAll annotation, but after bumping the version it stopped working"},{"owner":{"user_id":3368818,"display_name":"Woodchuck"},"edited":false,"comment_id":133737371,"body":"Which JUnit version are you using? Maybe whichever version you’re using (to get @BeforeAll) is not a compatible dependency of Spring Boot 3, which I believe requires Java 17."},{"owner":{"user_id":837508,"display_name":"szakal"},"edited":false,"comment_id":133761397,"body":"I&#39;m not specifing junit version so I guess it&#39;s compatible with spring-boot3. And it&#39;s: 5.9.2.  I think, what happens is: spring test runner reads the main class with the context, it starts context initialization and then loads the test class. However, as I mentioned it used to work differently. I managed to hack it and move my initialization to static{} block in the main class which obviously has lots of drawbacks, but I managed to spin wiremock before the context. However, there must be a more elegant solution.."}],"owner":{"user_id":837508,"display_name":"szakal"},"view_count":102,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1679492851,"question_id":75813095,"body":"<p>Let's consider the following test:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SpringBootTest(webEnvironment = SpringBootTest.WebEnvironment.RANDOM_PORT)\npublic class ExampleTest {\n\n    static {\n        System.out.println(&quot;hello from static&quot;);\n    }\n\n    @BeforeAll\n    static void beforeAll() {\n        System.out.println(&quot;before all!&quot;);\n    }\n\n    @Test\n    void contextLoads() {\n        System.out.println(&quot;hello!&quot;);\n    }\n}\n</code></pre>\n<p>I would expect that first, the class loader loads the class and static functions are called. Then the object is instantiated and spring-boot context loads.</p>\n<p>Instated, I see in logs:</p>\n<pre><code>...\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::                (v3.0.4)\n\n(...)\n\nhello from static\nbefore all!\n</code></pre>\n<p>I think in Spring Boot 2.7.x it used to work as I expect but after migrating to Spring Boot 3 the outcome is as presented above.</p>\n<p>It comes down to the question: how to run any code before Spring Boot starts loading the context?</p>\n"},{"tags":["java","android","google-mlkit"],"comments":[{"owner":{"user_id":6773266,"display_name":"mohammed ahmed"},"edited":false,"comment_id":133730092,"body":"you can simply check the size of the face list returned in onSuccess() of detectInImage()."}],"owner":{"user_id":5241603,"display_name":"K.Sopheak"},"view_count":117,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1679467028,"question_id":75809047,"body":"<p>I could not find any function to count different people faces in 1 video real time. I want to detect head rotation but if there are 2 people, the <code>getHeadEulerAngleY</code> will detect the person in the background whose head is moving.</p>\n<p>This is my detector option code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>FaceDetectorOptions detectorOptions = new FaceDetectorOptions\n    .Builder()\n    .setPerformanceMode(FaceDetectorOptions.PERFORMANCE_MODE_FAST)\n    .setLandmarkMode(FaceDetectorOptions.LANDMARK_MODE_ALL)\n    .build();\n</code></pre>\n<p>Also, Is it possible to count how many people in live detection?</p>\n"},{"tags":["java","apache-spark","kubernetes","apache-iceberg"],"owner":{"user_id":408410,"display_name":"Shivaprasad"},"view_count":73,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1679395223,"question_id":75800127,"body":"<p>I am trying to run a Spark job on a Kubernetes cluster and I need to add additional JARs required by my application (specifically JARs for Apache Iceberg and AWS SDK). Initially, I tried running my Spark job through spark-submit in cluster deploy mode and pointed the packages to be downloaded onto an NFS share so that both the driver and executors have access to it. Specifying the JARs in the network share as part of the extraClassPath option worked fine. You can find the configuration for spark-submit below.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>spark-submit \\\n     --deploy-mode cluster --master k8s://https://10.164.64.27:6443 \\\n     --conf spark.kubernetes.namespace=spark-cluster \\\n     --conf spark.kubernetes.authenticate.driver.serviceAccountName=spark-sa \\\n     --name $1 --conf spark.executor.instances=$2 \\\n     --packages org.apache.spark:spark-sql-kafka-0-10_2.12:3.3.2,org.apache.iceberg:iceberg-spark-runtime-3.3_2.12:1.0.0,org.projectnessie:nessie-spark-extensions-3.3_2.12:0.44.0,software.amazon.awssdk:bundle:2.19.21,software.amazon.awssdk:url-connection-client:2.19.21 \\\n     --conf spark.driver.extraJavaOptions=-Divy.cache.dir=/tmp/spark-data/ \\\n     --conf spark.driver.extraJavaOptions=-Divy.home=/tmp/spark-data/ \\\n     --conf spark.executor.extraJavaOptions=-Divy.cache.dir=/tmp/spark-data/ \\\n     --conf spark.executor.extraJavaOptions=-Divy.home=/tmp/spark-data/ \\\n     --conf spark.executor.extraClassPath=local:///tmp/spark-data/jars/* \\\n     --conf spark.kubernetes.driver.container.image=apache/spark-py:v3.3.2 \\\n     --conf spark.kubernetes.executor.container.image=apache/spark-py:v3.3.2 ${@:3}\n</code></pre>\n<p>Here the network share was loaded at /tmp/spark-data</p>\n<p>Now, I am trying to deploy the same application in client mode (so that I can run the application in a Jupyter notebook). I was seeing that this worked fine, but was taking much longer to run in client mode. For example, the Spark job which was taking 4 seconds in cluster mode was now taking over 2 minutes. Digging a little deeper, we figured out the slow down was because the executors were now copying each JAR from the driver to the executor instead of using it directly from my network share as in cluster mode. I tried to build a Docker image as well with all the required JARs so that the drivers doesn't need to copy the JARs, but that didn't work either and the driver was still copying the JARs to the executors. Is there way to tell Spark to not copy the JARs in client mode and directly use the JARs on my network share or present locally on the Docker image?</p>\n"},{"tags":["java","unit-testing","mockito"],"comments":[{"owner":{"user_id":5096142,"display_name":"Carlos"},"edited":false,"comment_id":133681154,"body":"have you tried removing the any() argument and put a concrete object in your 2nd argument?"}],"answers":[{"owner":{"user_id":12706564,"display_name":"Emanuel Trandafir"},"up_vote_count":0,"is_accepted":false,"creation_date":1679241299,"answer_id":75783209,"body":"<p>you can use <code>thenAnswer</code> for more flexibility. This will give you the <code>invocations</code> object, containing the parameters of the call. This is a simplified example:</p>\n<pre><code>class MyMapper {\n    public &lt;T&gt; T getConfiguration(String configName, TypeReference&lt;T&gt; typeReference) {\n        return null;\n    }\n}\n\n@Test\nvoid test() {\n    MyMapper mocked = mock(MyMapper.class);\n    when(mocked.getConfiguration(any(), any()))\n            .thenAnswer(invocation -&gt; {\n                TypeReference&lt;?&gt; typeReference = invocation.getArgument(1);\n                // maybe you'll find a more elegant way to do this check\n                if (typeReference.getType().getTypeName().equals(&quot;java.util.List&lt;java.lang.String&gt;&quot;)) {\n                    return List.of(&quot;a&quot;);\n                }\n                return Map.of(&quot;aa&quot;, &quot;bb&quot;);\n            });\n\n\n    TypeReference&lt;List&lt;String&gt;&gt; listTr = new TypeReference&lt;List&lt;String&gt;&gt;() {};\n    List&lt;String&gt; result = mocked.getConfiguration(&quot;lala&quot;, listTr);\n    System.out.println(result); //prints ['a']\n\n    TypeReference&lt;Map&lt;String, String&gt;&gt; mapTr = new TypeReference&lt;Map&lt;String, String&gt;&gt;() {};\n    Map&lt;String, String&gt; result2 = mocked.getConfiguration(&quot;lala&quot;, mapTr);\n    System.out.println(result2); //prints {'aa':'bb'}\n}\n</code></pre>\n<p>On the other hand - when it gets to such complicated Mokito setup, you might consider writing your own fake object or use the actual object if possible. Hope this helps.</p>\n"}],"owner":{"user_id":3867445,"display_name":"Surbhi Jain"},"view_count":51,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1679231776,"question_id":75782245,"body":"<p>I have a function which takes 2 arguments, a string and a TypeReference:</p>\n<pre><code>    public &lt;T&gt; T getConfiguration(@NonNull final String configName,\n                                         @NonNull final TypeReference&lt;T&gt; typeReference) {\n            return mapper.readValue(configString, typeReference);\n    }\n</code></pre>\n<p>I want to make a test class for the above method and when I pass TypeReference&lt;Map&lt;String, List&gt;&gt; type, I want to return let say 'a' and if I pass TypeReference&lt;Map&lt;String, FeatureLaunchStatus&gt;&gt; I want 'b' to be returned:</p>\n<pre><code>        Mockito.when(mapper.readValue(Mockito.eq(SDK_BYTES), Mockito.&lt;TypeReference&lt;Map&lt;String, List&lt;String&gt;&gt;&gt;&gt;any()))\n                .thenReturn(a);\n        Mockito.when(mapper.readValue(Mockito.eq(SDK_BYTES), Mockito.&lt;TypeReference&lt;Map&lt;String, FeatureLaunchStatus&gt;&gt;&gt;any()))\n                .thenReturn(b);\n</code></pre>\n<p>But, I am getting 'b' in both cases. How to get 'a' for TypeReference&lt;Map&lt;String, List&gt;&gt; type and 'b' for TypeReference&lt;Map&lt;String, FeatureLaunchStatus&gt;&gt; type?</p>\n<p>I also tried ArgumentMatchers instead of Mockito, but it also is giving 'b' in both case.</p>\n<p>Or please tell any other way how to mock, I have to call once of type         TypeReference&lt;Map&lt;String, List&gt;&gt; and once of              TypeReference&lt;Map&lt;String, FeatureLaunchStatus&gt;&gt; and need different values to be returned.</p>\n"},{"tags":["java","sql","oracle","hibernate","jdbc"],"comments":[{"owner":{"user_id":1509264,"display_name":"MT0"},"edited":false,"comment_id":133627340,"body":"Please <a href=\"https://stackoverflow.com/posts/75749829/edit\">edit</a> the question to include a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> with: the SQL statement generated by hibernate; the SQL run in the SQL client; the explain plans for both queries. We cannot debug code we cannot see."},{"owner":{"user_id":4490615,"display_name":"JSNoob"},"edited":false,"comment_id":133628387,"body":"@MT0 thanks for replying. The thing is, I can&#39;t even reproduce it myself. In the same code base, all other entities are working fine. With one entity, the query executed by hibernate is exceptionally slow. The generated query is like this <code>select dnbgpcusto0_.custno from apps.some_oracle_view fetch ? rows only</code>. If I take this generated sql and run it, it only take 1.5 second. That is the reason I want to ask. Because executing the JDBC statement(the sql) is DB&#39;s job, how can there be a difference when executing the same sql? Just looking for an idea of where to look for the root cause."},{"owner":{"user_id":4490615,"display_name":"JSNoob"},"edited":false,"comment_id":133628406,"body":"It almost look like DB is treating hibernate differently by deliberately slowing the same query"},{"owner":{"user_id":1509264,"display_name":"MT0"},"edited":false,"comment_id":133628439,"body":"What is the SQL client you are using to test it (and what is the <code>?</code> for the fetch size). If you test it in SQL developer then it will default to fetching only the first 500 rows and then when you scroll down it will fetch the next 500 rows (etc.) so if you are fetching 20k rows then 1.5 seconds for 500 rows and 60 seconds for 20k rows sounds about right."},{"owner":{"user_id":4490615,"display_name":"JSNoob"},"edited":false,"comment_id":133628494,"body":"I&#39;m setting the ? to 1, 10, 100 for comparison. just using the intellij database to connect to oracle. using the database tool run the query, even for 100 record, it takes less than 1.5 seconds. Setting the same size in the java service, it takes 1+ minute"},{"owner":{"user_id":4490615,"display_name":"JSNoob"},"edited":false,"comment_id":133628590,"body":"@MT0 I just ran the same sql in multiple places, oracle sql developer, vscode oracle extension, intellij db view. The result is consistent, no matter the size(number of rows), query return within 2 seconds. However, same query run by hibernate takes 1 - 3 minutes. Is it possible that oracle can discriminate certain jdbc connection?"},{"owner":{"user_id":10397,"display_name":"Justin Cave"},"edited":false,"comment_id":133630764,"body":"@JSNoob - In theory, sure, Oracle could probably get enough information to figure that you&#39;re using Hibernate to connect.  But it would be silly for them to use that information to intentionally slow your query down.  As others have asked, get the actual query plan from the session that Hibernate is using (and the actual query Hibernate is using).  It is conceivable that your Hibernate session has changed some session-level settings that have caused Oracle to pick a less efficient plan for this query but that is just speculation without a reproducible test case."},{"owner":{"user_id":2564847,"display_name":"Robin Dijkhof"},"edited":false,"comment_id":134211280,"body":"@JSNoob did you find anything yet?"}],"owner":{"user_id":4490615,"display_name":"JSNoob"},"view_count":81,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1678912543,"question_id":75749829,"body":"<p>TL;DR Same SQL query, when execute in hibernate, takes 70+ seconds, when execute using sql developer, takes only 1.5 second</p>\n<p>I discovered that when a particular query is executed by hibernate, it takes much longer than if I take the generated sql and run it in a sql client.\nfor example, after enabled hibernate statics, I can see in the log</p>\n<p><em><strong>67839913762 nanoseconds spent executing 2 JDBC statements</strong></em>; which equals <em><strong>1.13 minutes</strong></em></p>\n<p>However, if I take the generated sql and run it, it only takes max of <strong>1.5 seconds</strong>.</p>\n<p>Can anybody points me to what are the possible cause of this difference?\nMy understanding is, the time for executing the JDBC statement is entirely up to the DB right?\nIf the SQL is the same, how come it’s so slow when it’s executed by hibernate?</p>\n<p>samle entity class</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Entity\n@Data\n@AllArgsConstructor\n@Builder\npublic class GpCustomer {\n  @Id\n  @Column(name = &quot;CUSTNO&quot;)\n  private String custno;\n\n  @Column(name = &quot;COMPANY&quot;)\n  private String company;\n}\n</code></pre>\n<p>sample repository</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Repository\npublic interface GpCustomerRepository extends JpaRepository&lt;GpCustomer, String&gt; {}\n</code></pre>\n<p>sample service</p>\n<pre class=\"lang-java prettyprint-override\"><code> public Page&lt;GpCustomer&gt; findAllCustomers() {\n    Pageable limit = PageRequest.of(0,10);\n    return GpCustomerRepository.findAll(limit);\n  }\n\n</code></pre>\n<p>Update:\nhibernate statistics</p>\n<pre><code>Session Metrics {\n    137214920 nanoseconds spent acquiring 1 JDBC connections;\n    0 nanoseconds spent releasing 0 JDBC connections;\n    18734658 nanoseconds spent preparing 2 JDBC statements;\n    67839913762 nanoseconds spent executing 2 JDBC statements;\n    0 nanoseconds spent executing 0 JDBC batches;\n    0 nanoseconds spent performing 0 L2C puts;\n    0 nanoseconds spent performing 0 L2C hits;\n    0 nanoseconds spent performing 0 L2C misses;\n    0 nanoseconds spent executing 0 flushes (flushing a total of 0 entities and 0 collections);\n    16386 nanoseconds spent executing 2 partial-flushes (flushing a total of 0 entities and 0 collections)\n}\n</code></pre>\n"},{"tags":["java","reactive-programming","couchbase","couchbase-java-api"],"comments":[{"owner":{"user_id":611819,"display_name":"dnault"},"edited":false,"comment_id":133624443,"body":"For anyone else who comes along, it looks like this was cross-posted to Couchbase Forum and answered there <a href=\"https://forums.couchbase.com/t/java-sdk-reactive-transactions-responses/35740\" rel=\"nofollow noreferrer\">forums.couchbase.com/t/java-sdk-reactive-transactions-respon&zwnj;&#8203;ses/&hellip;</a>"}],"owner":{"user_id":3934499,"display_name":"uzumas"},"view_count":34,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1678895696,"question_id":75747122,"body":"<p>I am trying to use java sdk (java-client v3.4.3).\nSince I need transactions, I am using transactional flavor of cluster object</p>\n<pre><code>cluster.reactive().transactions().run((ctx) -&gt; {});\n</code></pre>\n<p>Both sync/ async versions expect lambda and return</p>\n<blockquote>\n<p>TransactionResult /\nMono &lt; TransactionResult &gt;</p>\n</blockquote>\n<p>Since java requires that in a lambda,  local variables be final or effectively final, how am I supposed to share the response of say ctx.insert() or ctx.replace() outside this transaction? I want to access the cas value for ctx.insert but I am not able to send data out of this transactions().run() function.</p>\n<p>Using global variables does not appear the right choice to me.</p>\n"},{"tags":["java","spring-boot","design-patterns","java-8","retry-logic"],"answers":[{"owner":{"user_id":9959152,"display_name":"Ryuzaki L"},"up_vote_count":0,"is_accepted":false,"creation_date":1678894129,"answer_id":75746828,"body":"<p>One way you can use <code>while</code> loop inside <code>try</code> block with <code>10</code> minutes sleep time when <code>externalService.getRecord()</code> return empty list. And make <code>computeValue</code> method to return <code>null</code> if empty list is returned by <code>externalService.getRecord()</code></p>\n<p>In this case you can keep the scheduler to run between 7AM to 9AM</p>\n<pre><code> double value = null;\n\n try {\n\n     while(value == null) {\n\n        value = computeValue(String product);\n\n        if(value == null){\n           Thread.sleep(10) //minutes\n        }\n     }\n  } \n    catch {\n      log.warn(&quot;Record not available yet&quot;, ex.getMessage();)\n  }\n</code></pre>\n<p>You can also check <a href=\"https://www.baeldung.com/spring-retry\" rel=\"nofollow noreferrer\">Spring Retry</a> but you have to specify the max number of retries and you can keep it <code>Integer.MAX</code>.</p>\n"},{"owner":{"user_id":19598245,"display_name":"Phil Ku"},"up_vote_count":0,"is_accepted":false,"creation_date":1678942237,"answer_id":75752279,"body":"<p>I tried to replicate your question, here is one possible solution.</p>\n<pre><code>private double value = null;\nprivate long lastSuccess;\n\n@Scheduled(cron = &quot;${scheduler: */10 7-8 * * MON-FRI}&quot;)\npublic void dailyComputeValue() {\n\n  if(value != null &amp;&amp; \n     lastSuccess != null &amp;&amp; \n     !sameDate(lastSuccess, System.currentTimeMillis()){\n     // resetting value in new day\n     value = null;\n  }\n  \n  if(value != null) return; // skipping scheduled job if value is present\n\n  try {\n     value = computeValue(String product);\n  } catch (Exception ex) {\n     log.warn(&quot;Record not available yet&quot;, ex.getMessage();)\n     return;\n  }\n\n  lastSuccess = System.currentTimeMillis();\n  valueRepository.save(value);\n}\n</code></pre>\n<p>Checking same date:</p>\n<pre><code>private Boolean sameDate(long d1, long d2){\n  Calendar cal1 = Calendar.getInstance();\n  Calendar cal2 = Calendar.getInstance();\n  cal1.setTimeInMillis(d1);\n  cal2.setTimeInMillis(d2);\n  return cal1.get(Calendar.DAY_OF_YEAR) == cal2.get(Calendar.DAY_OF_YEAR) &amp;&amp;\n                        cal1.get(Calendar.YEAR) == cal2.get(Calendar.YEAR);\n}\n</code></pre>\n<p>Hope it is of some help.</p>\n"}],"owner":{"user_id":21012804,"display_name":"exponents"},"view_count":114,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1678890270,"question_id":75746053,"body":"<h2>What I want to do:</h2>\n<p>I want to implement a retry mechanism for function <code>dailyComputeValue</code>. <code>dailyComputeValue</code> will call <code>computeValue</code>. There is one part within function <code>ComputeValue</code> where we will call <code>externalService.getRecord</code>, which could return an empty list.</p>\n<p>If this is the case, I want to rerun the function every 10 min until it does not return an empty list (Once externalService.getRecord does not return an empty list when we run <code>checkExpiryForADate</code>, we would not run it anymore within the scheduled timeframe (from 7AM to 9AM)</p>\n<p>The complication is that I cannot use a boolean flag in this case because <code>computeValue</code> needs to return a <code>double</code>. So I am thinking of throwing an exception if <code>externalService.getRecord</code> returns an empty list.\nI have changed <code>dailyComputeValue</code> to be like the code below to implement the retry mechanism</p>\n<h2>What I have tried:</h2>\n<pre><code>@Scheduled(cron = &quot;${scheduler: */10 7-8 * * MON-FRI}&quot;)\npublic void dailyComputeValue() {\n  double value = 0;\n  try {\n      value = computeValue(String product);\n  } \n  catch {\n     log.warn(&quot;Record not available yet&quot;, ex.getMessage();)\n  }\n  //to only save to database if there is good value (not from the empty list)\n  valueRepository.save(value);\n}\n\npublic Double computeValue(String product)\n{\n    List&lt;Pair&lt;ZonedDateTime, Double&gt;&gt; valueRecords = new ArrayList&lt;&gt;(externalService.getRecord());\n    if (valueRecords.isEmpty()){\n    throw new Exception(&quot;Record not available yet&quot;);\n    }\n    //perform some operation to return a double\n}\n</code></pre>\n<h2>The problem with my code:</h2>\n<p>The current code will retry <code>computeValue</code> every 10 minutes, but will not stop once computeValue returns a double. I am not sure how to implement the code to &quot;rerun the function every 10 min until it does not return an empty list (Once externalService.getRecord does not return an empty list when we run <code>dailyComputeValue</code>, we would not run it anymore within the scheduled timeframe (from 7AM to 9AM)&quot;.</p>\n<p>Any help would be greatly appreciated, thanks in advance.</p>\n"},{"tags":["java","spring","spring-boot","maven","environment-variables"],"comments":[{"owner":{"user_id":584192,"display_name":"Samuel Liew"},"edited":false,"comment_id":133668640,"body":"<b>Comments have been <a href=\"https://chat.stackoverflow.com/rooms/252589/discussion-on-question-by-cecilia-reading-env-and-properties-yml-files-based-on\">moved to chat</a>; please do not continue the discussion here.</b> Before posting a comment below this one, please review the <a href=\"/help/privileges/comment\">purposes of comments</a>. Comments that do not request clarification or suggest improvements usually belong as an <a href=\"/help/how-to-answer\">answer</a>, on <a href=\"https://meta.stackoverflow.com\">Meta Stack Overflow</a>, or in <a href=\"https://chat.stackoverflow.com/\">Stack Overflow Chat</a>. Comments continuing discussion may be removed."}],"answers":[{"owner":{"user_id":592355,"display_name":"xerx593"},"up_vote_count":0,"is_accepted":true,"creation_date":1678885840,"answer_id":75745196,"body":"<p>Don't panic! It is/<em>must be</em> working...</p>\n<p>Start simple:</p>\n<ol>\n<li><p><a href=\"https://start.spring.io/#!type=maven-project&amp;language=java&amp;platformVersion=3.0.4&amp;packaging=jar&amp;jvmVersion=17&amp;groupId=com.example&amp;artifactId=demo&amp;name=demo&amp;description=Demo%20project%20for%20Spring%20Boot&amp;packageName=com.example.demo&amp;dependencies=web\" rel=\"nofollow noreferrer\">quickstart-maven, dependencies: web (only)</a></p>\n</li>\n<li><p>Just a demo (no/empty <code>application.properties</code>, <em>according to <code>foo.bar, foo.baz</code> we can refer to any <a href=\"https://docs.spring.io/spring-boot/docs/current/reference/html/application-properties.html\" rel=\"nofollow noreferrer\">common</a>/custom &quot;property&quot;</em> ;):</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.example.demo;\n\nimport org.springframework.beans.factory.InitializingBean;\nimport org.springframework.beans.factory.annotation.Value;\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.context.annotation.Bean;\n\n@SpringBootApplication\npublic class DemoConfigApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(DemoConfigApplication.class, args);\n  }\n\n  @Bean\n  InitializingBean test(\n      @Value(&quot;${foo.bar:undefined}&quot;) String fooBar,\n      @Value(&quot;${foo.baz:undefined}&quot;) String fooBaz\n  ) {\n    return () -&gt; {\n      System.err.format(&quot;foo.bar: %s%n&quot;, fooBar);\n      System.err.format(&quot;foo.baz: %s%n&quot;, fooBaz);\n    };\n  }\n\n}\n</code></pre>\n</li>\n<li><p>Build</p>\n<pre class=\"lang-bash prettyprint-override\"><code>./mvnw clean test\n</code></pre>\n<p>prints:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>...\nfoo.bar: undefined\nfoo.baz: undefined\n...\n</code></pre>\n</li>\n</ol>\n<hr />\n<p>To set these via (springboot-)maven-plugin, we can:</p>\n<h3>((Git)Ba)sh</h3>\n<ol>\n<li><p>Via &quot;Command Line Arguments&quot;\n(with blanks, with my win+gitbash:</p>\n<pre><code>GNU bash, version 5.2.12(1)-release (x86_64-pc-msys)\n</code></pre>\n<p>)</p>\n<p><strong>Syntax</strong>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>./mvnw spring-boot:run -Dspring-boot.run.arguments=&quot;--foo.bar='Foo Bar' --foo.baz='Foo Baz'&quot;\n</code></pre>\n<p>(prints):</p>\n<pre class=\"lang-bash prettyprint-override\"><code>...\n2023-03-15T13:45:52.849+01:00  INFO 4196 --- [           main] w.s.c.ServletWebServerApplicationContext : Root WebApplicationContext: initialization completed in 1106 ms\nfoo.bar: Foo Bar\nfoo.baz: Foo Baz\n...\n</code></pre>\n</li>\n<li><p>Via &quot;System Properties&quot; (same git bash):</p>\n<p><strong>Syntax</strong>:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>./mvnw spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-Dfoo.bar='Foo Bar' -Dfoo.baz='Foo Baz'&quot;\n</code></pre>\n</li>\n</ol>\n<hr />\n<p>To make (e.g.) 1. work in</p>\n<h3>cmd.exe</h3>\n<p>(Version 10.0.19045.2673), same quoting as gitbash:</p>\n<pre class=\"lang-dos prettyprint-override\"><code>.\\mvnw.cmd spring-boot:run -Dspring-boot.run.arguments=&quot;--foo.bar='Foo Bar' --foo.baz='Foo Baz'&quot;\n</code></pre>\n<h3>PowerShell</h3>\n<p>(v7.3.3)\nMore complicated, due to/with <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_quoting_rules?view=powershell-7.3\" rel=\"nofollow noreferrer\">ref</a>:</p>\n<pre class=\"lang-powershell prettyprint-override\"><code>.\\mvnw.cmd spring-boot:run '-Dspring-boot.run.arguments=&quot;--foo.bar=&quot;&quot;Foo Bar&quot;&quot; --foo.baz=&quot;&quot;Foo Baz&quot;&quot;&quot;'\n</code></pre>\n<p>...</p>\n"}],"owner":{"display_name":"user21393940"},"view_count":91,"up_vote_count":3,"accepted_answer_id":75745196,"answer_count":1,"score":3,"creation_date":1678872863,"question_id":75742838,"body":"<p>I am using <code>.env</code> and <code>properties.yml</code> files in my Spring Boot apps and need to be clarified for using them properly. After that, I will also use the other profiles of these files e.g.  <code>.env-dev</code> and <code>properties-dev.yml</code>.</p>\n<p>Could you please explain these issues?</p>\n<p><strong>1.</strong> As far as I know, these files are automatically read based on the Run/Debug profile of Intellij or maven. If the active profile is dev, only <code>.env-dev</code> and <code>properties-dev.yml</code> files are read, if the profile is prod, only <code>.env-prod</code> and <code>properties-prod.yml</code> files are read. If the profile &quot;dev,prod&quot;, then both of these files are read. Is that true?</p>\n<p><strong>2.</strong> What if there are only <code>.env</code> and <code>properties.yml</code> files in the project. Then, are these files always read when profile is selected or not?</p>\n<p><strong>3.</strong> Can I read environment variables from <code>.env</code> file when running/debugging app via Maven by giving file name to the following command?</p>\n<pre><code>mvn spring-boot:run -Dspring-boot.run.jvmArguments=&quot;-Xdebug&quot; \n-Dspring-boot.run.profiles=dev -Dspring-boot.run.arguments=&quot;DB_NAME=employee_db \nDB_USERNAME=postgres DB_PASSWORD=******&quot;\n</code></pre>\n"},{"tags":["java","processing"],"comments":[{"owner":{"user_id":17382180,"display_name":"BuggerMeNot"},"edited":false,"comment_id":133614793,"body":"Isn&#39;t Processing built on java? I just thought that maybe there is a similar problem in Java too and so added the tag."},{"owner":{"user_id":16320675,"display_name":"user16320675"},"edited":false,"comment_id":133614843,"body":"I do not know what it is implemented in. It uses the Java Virtual Machine, but the question is not about the Java Programing Language (unless you want to change the implementation of Processing itself [assuming it is implemented in Java])"},{"owner":{"user_id":9808792,"display_name":"micycle"},"edited":false,"comment_id":133618190,"body":"Processing IDE is Processing java library + just a little syntactic sugar on top."},{"owner":{"user_id":5844572,"display_name":"laancelot"},"edited":false,"comment_id":133624787,"body":"I would like to try to reproduce the issue, can I get the code?"},{"owner":{"user_id":740553,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"edited":false,"comment_id":133624922,"body":"@user16320675 anyone proficient in Processing knows it uses Java and runs on the JVM. Questions that might be related to the underlying Java or JVM behaviour are perfectly fine to tag with both Processing and Java."},{"owner":{"user_id":5844572,"display_name":"laancelot"},"edited":false,"comment_id":133631034,"body":"@user16320675 some Processing questions have their real issue in their java heritage. A java programmer may help a Processing programmer without being a Processing specialist. Tagging java makes sense especially when the issue is weird like this one."},{"owner":{"user_id":17382180,"display_name":"BuggerMeNot"},"edited":false,"comment_id":133691101,"body":"@laancelot I have updated the question to have the github link for the code. Do let me know if you find anything."},{"owner":{"user_id":5844572,"display_name":"laancelot"},"edited":false,"comment_id":133719650,"body":"I&#39;m having trouble reproducing the issue. What speeds are you using (I&#39;m guessing that you are modifying this line: <code>if (frameCount % 5 == 0) {</code>, but with which values?)?"},{"owner":{"user_id":17382180,"display_name":"BuggerMeNot"},"edited":false,"comment_id":133761574,"body":"@laancelot please refer to the README file in the repo. Scroll to the end, I have documented how I was able to recreate the error. I&#39;ll write the gist here regardless, the value &#39;5&#39; is the factor by which framerate is reduced. Error occurs when you write ``` frameCount % 1 == 0 ``` which means the program is running at an uncapped fps. You can compare this setup with the original by setting value to 5 and you&#39;ll see the difference. Again refer to the README file in the <a href=\"https://github.com/Buggermenot/Minesweeper-Bot\" rel=\"nofollow noreferrer\">repo</a>"}],"owner":{"user_id":17382180,"display_name":"BuggerMeNot"},"view_count":71,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1678864980,"question_id":75741577,"body":"<p>I am writing a processing code for a minesweeper solver bot. When running the solver at lower framerates, the code runs perfectly fine, however, at higher framerates, it fails. I have been running the same test with the exact same settings and seed values but this error still stays. How do I fix this?</p>\n<p><strong>How it works</strong>:\nHere is the gist of how the program works (Refer to the control diagram):</p>\n<pre><code>- Minesweeper gameBoard created with 'n' bombs placed randomly on a square grid.\n- All cells are initially hidden.\n- The solver bot has a private grid of the same size called knowledge.\n- Bot uses the following values to describe a cell: UNKNOWN: -2, BOMB: -1, SAFE: 0\n- If the bot does not find any suitable cell to play, it left clicks a random hidden cell.\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/J95FK.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/J95FK.png\" alt=\"Control Flow for the solver\" /></a></p>\n<p><strong>Problem</strong>:\nThe two attached gifs show the program working for the same grid positions but at two different speeds. The one that fails is at an uncapped fps while the other is capped. (The view in both is the knowledge view; What the bot &quot;sees&quot; / infers)</p>\n<p>Slow Run, Fast Run (failed):</p>\n<p><a href=\"https://i.stack.imgur.com/x81qu.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/x81qu.gif\" alt=\"Slow Run\" /></a>\n<a href=\"https://i.stack.imgur.com/sE3CI.gif\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sE3CI.gif\" alt=\"Fast Run\" /></a></p>\n<p>I do not understand why there is such a difference because of the speed of the program. As far as I know, this should be a problem for lack of synchronization but I am not doing any multi-threading in this so I don't understand why this is happening.</p>\n<p>Thanks for you time.</p>\n<p>Edit: GitHub link: <a href=\"https://github.com/Buggermenot/Minesweeper-Bot\" rel=\"nofollow noreferrer\">https://github.com/Buggermenot/Minesweeper-Bot</a></p>\n"},{"tags":["java","spring-boot","azure-application-insights","javaagents","graalvm-native-image"],"comments":[{"owner":{"user_id":1082681,"display_name":"kriegaex"},"edited":false,"comment_id":133582171,"body":"Maybe <a href=\"https://github.com/oracle/graal/issues/5912\" rel=\"nofollow noreferrer\">github.com/oracle/graal/issues/5912</a> helps to shed a bit of light on the situation. <i>Disclaimer: I am not a GraalVM user and found this question due to the &#39;javaagents&#39; tag only.</i>"}],"answers":[{"owner":{"user_id":139985,"display_name":"Stephen C"},"up_vote_count":0,"is_accepted":false,"creation_date":1678711897,"answer_id":75722092,"body":"<p>I couldn't find anything in the GraalVM documentation for native images that talks about attaching runtime agents to native apps.  This suggests that it is not supported.</p>\n<p>I the searched for &quot;application insights graalvm native image&quot; and found this on the Application Insights issue tracker:</p>\n<p><a href=\"https://github.com/microsoft/ApplicationInsights-Java/issues/1266\" rel=\"nofollow noreferrer\">https://github.com/microsoft/ApplicationInsights-Java/issues/1266</a></p>\n<blockquote>\n<p>We are currently using a custom implementation of the OpenTracing SPI to send our tracing data to Application Insights (the implementation is based on the Application Insights SDK 2.6.1) from a Quarkus application. Our plan is to move to OpenTelemetry as soon as it is supported by Quarkus.</p>\n</blockquote>\n<blockquote>\n<p>Since Quarkus also supports native image generation (using GraalVM) <strong>auto-instrumentation using a Java agent won't be possible</strong> and a &quot;deep integration&quot; with Quarkus will be required. I would like to know if use cases like this one are on the radar and if builds (i.e. Maven artifacts) will be provided, which cater for this use case. I imagine there would be a build which provides an exporter only.</p>\n</blockquote>\n<p>The highlighted phrase aligns with what I deduced from the (lack of) documentation.   And it is further confirmed by the response to this GraalVM issue: <a href=\"https://github.com/oracle/graal/issues/5912\" rel=\"nofollow noreferrer\">https://github.com/oracle/graal/issues/5912</a></p>\n<p>You said:</p>\n<blockquote>\n<p>Use the OpenTelemetry library [...]. For me it still seems to use a kind of a javaagent jar to work properly.</p>\n</blockquote>\n<p>The alternative would be to include the OpenTelemetry JAR in your SpringBoot application and <a href=\"https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-spring-boot#enabling-programmatically\" rel=\"nofollow noreferrer\">enable it programatically</a> rather than via a javaagent.  It would be converted to native code by the GraalVM native image builder.</p>\n"}],"owner":{"user_id":7961298,"display_name":"Rolf Nyffenegger"},"view_count":257,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1678709140,"question_id":75721649,"body":"<p>Together with our SpringBoot (3.0.3) application we are using Application Insights (Azure) for monitoring.</p>\n<p>Currently we are trying to compile the application natively with the GraalVM. That works quite well and gives us a lot of benefits (startup time and memory consumption). The only thing that does not yet work is Application Insights which is started as a Java agent. I found almost no useful information about the whole topic and asked myself if we are trying to do something that is currently not supported at all.</p>\n<p>Here's what we've tried so far:</p>\n<ul>\n<li>Use parameters of the <code>nativeCompile</code> Gradle task to specify an additional jvmArgs (as mentioned here: <a href=\"https://github.com/oracle/graal/issues/1065\" rel=\"nofollow noreferrer\">https://github.com/oracle/graal/issues/1065</a>). Although the build works fine, it just don't includes (or starts?) the agent with application startup.\n<a href=\"https://i.stack.imgur.com/L04TU.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/L04TU.png\" alt=\"gradle task configuration\" /></a></li>\n<li>Start the Application Insights agent from within the code as described here: <a href=\"https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-spring-boot#enabling-programmatically\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/azure-monitor/app/java-spring-boot#enabling-programmatically</a>\nUnfortunately that did not work either, because it tries to load a JAR file during startup, which is (I think) not possible for a native compiled application (no JVM).</li>\n<li>Use OpenTelemetry library as described here: <a href=\"https://learn.microsoft.com/en-us/azure/azure-monitor/app/opentelemetry-enable?tabs=java\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/azure-monitor/app/opentelemetry-enable?tabs=java</a>\nFor me it still seems to use a kind of a javaagent jar to work properly.</li>\n</ul>\n<p>Is there a solution to add javaagents also in native compiled builds, or are there any alternatives to send monitoring data from a SpringBoot application to ApplicationInsights?</p>\n"},{"tags":["java","android","barcode-scanner","capacitor","google-mlkit"],"comments":[{"owner":{"user_id":436810,"display_name":"Vinoth K"},"edited":false,"comment_id":134018933,"body":"this is happening in Samsung S22 Ultra as well. It used to work. Suddenly it stopped working. Looks like Google ML Kit is not reliable."},{"owner":{"user_id":21348267,"display_name":"fruityloops"},"edited":false,"comment_id":134039373,"body":"@VinothK It does also not work on the Samsung Galaxy A51 anymore. We had decided to refactor our custom barcode scanning Capacitor plugin to use <code>com.google.mlkit:barcode-scanning:17.1.0</code> instead. More info <a href=\"https://developers.google.com/ml-kit/vision/barcode-scanning/android\" rel=\"nofollow noreferrer\">here</a>. This requires a bit more effort, because you have to implement the UI yourself and the fancy scan animation is gone, but it works perfectly fine and is faster than the one mentioned in my post."},{"owner":{"user_id":3147640,"display_name":"Sweety Bertilla"},"edited":false,"comment_id":134478717,"body":"did we find any solution I am seeing the issue in Samsung S22"},{"owner":{"user_id":21348267,"display_name":"fruityloops"},"edited":false,"comment_id":134497608,"body":"@SweetyBertilla The solution for us was to refactor into using <code>com.google.mlkit:barcode-scanning:17.1.0</code>"}],"answers":[{"owner":{"user_id":2569283,"display_name":"RogerBCA"},"up_vote_count":0,"is_accepted":false,"creation_date":1683880486,"answer_id":76234524,"body":"<p>The solution that worked for me was to remove the updates from &quot;Google play services&quot;</p>\n<blockquote>\n<p>Story of how I got to this: Yesterday I was testing the library with a\nproject that exists on github and everything worked ok</p>\n<p>Today I tried to do it directly from a new project (thanks to the\nrepository that I used yesterday, I just met\n&quot;com.google.android.gms:play-services-code-scanner&quot;) and I got the\nerror that you posted and I couldn't find a solution (Samsung S20\nUltra), then a similar error came to mind with the &quot;android webview&quot;\nthat made many apps unusable and the solution was to remove all\nupdates and everything worked normally, so I tried the same to &quot;Google\nplay services &quot;and it turns out that now if I open the camera.</p>\n</blockquote>\n<p>I hope my solution will help you, which I think is not the cleanest\nfor the end user.</p>\n"},{"owner":{"user_id":2730054,"display_name":"suc"},"up_vote_count":0,"is_accepted":false,"creation_date":1684456391,"answer_id":76285310,"body":"<p>I met similar problem because of reuse <code>GmsBarcodeScanner</code>.\nMost of time it works. But once it stops working, the phone has to be reset to factory.</p>\n<p>The old code reuse <code>GmsBarcodeScanner</code>:</p>\n<pre><code>class HomeFragment : Fragment() {\n    private var mQRScanner : GmsBarcodeScanner?           = null\n    private var mQrCode    : String?                      = null\n    \n    override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        val options = GmsBarcodeScannerOptions.Builder()\n            .setBarcodeFormats( Barcode.FORMAT_QR_CODE )\n            .build()\n        mQRScanner = GmsBarcodeScanning.getClient(requireContext(), options)\n        \n        binding.bnQrCode.setOnClickListener{\n            mQRScanner?.startScan()\n                ?.addOnSuccessListener { barcode -&gt;\n                    mQrCode = barcode.rawValue                    \n                }\n        }\n    }\n}\n</code></pre>\n<p>the new code:</p>\n<pre><code>class HomeFragment : Fragment() {\n    private var mQrCode    : String?                      = null\n    \n     override fun onViewCreated(view: View, savedInstanceState: Bundle?) {\n        binding.bnQrCode.setOnClickListener{\n            val options = GmsBarcodeScannerOptions.Builder()\n                .setBarcodeFormats( Barcode.FORMAT_QR_CODE )\n                .build()\n            val QRScanner = GmsBarcodeScanning.getClient( requireContext(), options )\n\n            QRScanner.startScan()\n                .addOnSuccessListener { barcode -&gt;\n                    mQrCode = barcode.rawValue\n                }                \n        }\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":21348267,"display_name":"fruityloops"},"view_count":417,"up_vote_count":3,"answer_count":2,"score":3,"creation_date":1678188240,"question_id":75661357,"body":"<h2>UPDATE:</h2>\n<p><strong>Maybe it works now since the <a href=\"https://developers.google.com/ml-kit/release-notes#march_21_2023\" rel=\"nofollow noreferrer\">March 21, 2023 update</a>, maybe not.</strong> You can read more about it in the <a href=\"https://developers.google.com/ml-kit/vision/barcode-scanning/code-scanner\" rel=\"nofollow noreferrer\">docs</a> if you want to use it.</p>\n<p><strong>Note again that we haven't tested if it works now. We had to quickly decide on how to get barcode scanning working again. So we refactored our custom barcode scanning Capacitor plugin to use <code>com.google.mlkit:barcode-scanning:17.1.0</code> instead. More info about it <a href=\"https://developers.google.com/ml-kit/vision/barcode-scanning/android\" rel=\"nofollow noreferrer\">here</a>. This requires a bit more effort, because you have to implement the UI yourself and the fancy scan animation is gone, but it just works and it seems to be faster.</strong></p>\n<hr />\n<p>We are using <code>com.google.android.gms:play-services-code-scanner:16.0.0-beta3</code> in combination with a custom Capacitor plugin for scanning barcodes like EAN-13 and EAN-8, but on certain devices, the activity seems to crash whenever the user tries to open the Google's barcode scanner UI.</p>\n<p>Here is the <strong>error log</strong> from logcat:</p>\n<pre><code>win=Window{f8c052d u0 com.[redacted]/com.google.mlkit.vision.codescanner.internal.GmsBarcodeScanningDelegateActivity} destroySurfaces: appStopped=true cleanupOnResume=false win.mWindowRemovalAllowed=false win.mRemoveOnExit=false win.mViewVisibility=4 caller=com.android.server.wm.ActivityRecord.destroySurfaces:6529 com.android.server.wm.ActivityRecord.destroySurfaces:6510 com.android.server.wm.ActivityRecord.notifyAppStopped:6574 com.android.server.wm.ActivityRecord.activityStopped:7162 com.android.server.wm.ActivityClientController.activityStopped:258 android.app.IActivityClientController$Stub.onTransact:613 com.android.server.wm.ActivityClientController.onTransact:136\n</code></pre>\n<p>The code that handles the scanning UI:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.[redacted];\n\nimport com.getcapacitor.JSObject;\nimport com.getcapacitor.Plugin;\nimport com.getcapacitor.PluginCall;\nimport com.getcapacitor.PluginMethod;\nimport com.getcapacitor.annotation.CapacitorPlugin;\nimport com.google.mlkit.vision.barcode.common.Barcode;\nimport com.google.mlkit.vision.codescanner.GmsBarcodeScannerOptions;\nimport com.google.mlkit.vision.codescanner.GmsBarcodeScanning;\n\n@CapacitorPlugin()\npublic class BarcodeScanner extends Plugin  {\n    private void scan() {\n        GmsBarcodeScannerOptions options = new GmsBarcodeScannerOptions.Builder()\n                .setBarcodeFormats(Barcode.FORMAT_EAN_13, Barcode.FORMAT_EAN_8, Barcode.FORMAT_CODE_128, Barcode.FORMAT_ITF)\n                .allowManualInput()\n                .build();\n\n        GmsBarcodeScanning\n                .getClient(getContext(), options)\n                .startScan()\n                .addOnSuccessListener(this::onSuccess);\n    }\n\n    private void onSuccess(Barcode result) {\n        JSObject jsObject = new JSObject();\n        jsObject.put(&quot;content&quot;, result.getDisplayValue());\n        jsObject.put(&quot;format&quot;, result.getFormat());\n\n        this.getSavedCall().success(jsObject);\n    }\n\n    @PluginMethod\n    public void startScan(PluginCall call) {\n        this.saveCall(call);\n        this.scan();\n    }\n}\n</code></pre>\n<p>The versions</p>\n<pre><code>    minSdkVersion = 23\n    compileSdkVersion = 33\n    targetSdkVersion = 33\n    androidxActivityVersion = '1.6.1'\n    androidxAppCompatVersion = '1.6.1'\n    androidxCoordinatorLayoutVersion = '1.2.0'\n    androidxCoreVersion = '1.9.0'\n    androidxFragmentVersion = '1.5.5'\n    coreSplashScreenVersion = '1.0.0-rc01'\n    androidxWebkitVersion = '1.6.0'\n    junitVersion = '4.13.2'\n    androidxJunitVersion = '1.1.5'\n    androidxEspressoCoreVersion = '3.5.1'\n    cordovaAndroidVersion = '10.1.1'\n</code></pre>\n<p>We have updated the Android Webview to the latest version, as well as any implementation package inside the app and Capacitor plugin's <code>build.gradle</code> files. We have no clue what causes the error, because the error description is very vague. We cannot find a solution anywhere. The error happens on a Galaxy Tab S7, <strong>where it has worked before</strong>. It suddenly stopped working, probably because of an internal update we don't know anything of. We have also tested with a Samsung Galaxy A51, but it just works on that device.</p>\n"},{"tags":["java","android","web-services","soap","android-ksoap2"],"comments":[{"owner":{"user_id":12763954,"display_name":"Olivier"},"edited":false,"comment_id":133552636,"body":"There is an extra space in <code>oasis- 200401</code>."}],"answers":[{"owner":{"user_id":13942448,"display_name":"jccampanero"},"up_vote_count":0,"is_accepted":false,"creation_date":1678633988,"answer_id":75714109,"body":"<p>You can authenticate a Web Service call in two ways:</p>\n<ul>\n<li>On one hand, you can authenticate your Web Service call at the message level, as in your code, including the necessary WS-Security related headers.</li>\n<li>On the other, a Web Service call can be authenticated at the transport level, normally using the HTTP/S transport protocol and <code>Authorization</code> headers.</li>\n</ul>\n<p>Both authentication mechanisms are in fact complementary, and the use of one of another depends on the Web Service provider.</p>\n<p>In my opinion, the provider of your Web Service expects authentication at the transport level at least and, when you send the SOAP request without the necessary headers, it is returning a <code>401</code> HTML page, which is causing the error you are describing:</p>\n<pre><code>expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG &lt;html&gt;@2:44 in java.io.InputStreamReader@54570a0)\n</code></pre>\n<p>According to <a href=\"https://stackoverflow.com/questions/5177939/basic-http-authentication-using-ksoap-for-android\">this related SO question</a>, you can provide the necessary headers with something like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n\n// add header to envelope: probably you can get rid of it\n// when using HTTP transport authentication\n// envelope.headerOut = getHeaderElement();\n\nSystem.out.println(&quot;HeaderValue &quot; + Arrays.toString(envelope.headerOut));\n\nenvelope.dotNet = false;\nenvelope.bodyOut = request;\nenvelope.setOutputSoapObject(request);\nHttpTransportSE androidHttpTransport = new HttpTransportSE(URL);\nSystem.out.println(&quot;BodyOut &quot; + envelope.bodyOut.toString());\n\nandroidHttpTransport.debug = true;\n\n// Note the inclusion of the required headers\nList&lt;HeaderProperty&gt; headerList = new ArrayList&lt;HeaderProperty&gt;();\nheaderList.add(new HeaderProperty(\n        &quot;Authorization&quot;,\n        &quot;Basic &quot; + org.kobjects.base64.Base64.encode((USER_NAME + &quot;:&quot; + PASSWORD).getBytes())\n        // Or, using android.util.Base64\n        // &quot;Basic &quot; + Base64.encodeToString((USER_NAME + &quot;:&quot; + PASSWORD).getBytes(), Base64.DEFAULT)\n));\n\nandroidHttpTransport.call(SOAP_ACTION, envelope, headerList);\n\nSoapPrimitive response = (SoapPrimitive)envelope.getResponse();\nSystem.out.println(&quot;ResponseMessage&quot; +  response.toString());\nresponseMsg = String.valueOf(response);\nSystem.out.println(&quot;ResponseMessage&quot; +  response.toString());\n</code></pre>\n"}],"owner":{"user_id":15704156,"display_name":"M.Jamous"},"view_count":160,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1678108182,"question_id":75651265,"body":"<p>I'm trying to call a SOAP webservice with credentials username and password, but it's giving an error, I tried in different ways but it's the same output, it's giving this error:</p>\n<p>//error</p>\n<pre><code>expected: START_TAG {http://schemas.xmlsoap.org/soap/envelope/}Envelope (position:START_TAG &lt;html&gt;@2:44 in java.io.InputStreamReader@54570a0)\n</code></pre>\n<p>No response is returned.</p>\n<p>//variables</p>\n<pre><code>private static final String NAMESPACE = &quot;http://tempuri.org/&quot;;\nprivate static final String METHOD_NAME = &quot;method&quot;;\nprivate static final String SOAP_ACTION = NAMESPACE + METHOD_NAME;\nprivate static final String URL = &quot;https://example.com/and/service.asmx&quot;;\nprivate static final String USER_NAME = &quot;username&quot;;\nprivate static final String PASSWORD = &quot;password&quot;;\n</code></pre>\n<pre><code>//calling web service\n</code></pre>\n<pre><code> SoapObject request = new SoapObject(NAMESPACE, METHOD_NAME);\n PropertyInfo deviceIdPI = new PropertyInfo();\n        deviceIdPI.setName(&quot;device_id&quot;);\n        deviceIdPI.setValue(deviceId);\n        deviceIdPI.setType(String.class);\n        request.addProperty(deviceIdPI);\n</code></pre>\n<pre><code>  SoapSerializationEnvelope envelope = new SoapSerializationEnvelope(SoapEnvelope.VER11);\n\n        // add header to envelope\n        envelope.headerOut = getHeaderElement();\n\n        System.out.println(&quot;HeaderValue &quot; + Arrays.toString(envelope.headerOut));\n\n        envelope.dotNet = false;\n        envelope.bodyOut = request;\n        envelope.setOutputSoapObject(request);\n        HttpTransportSE androidHttpTransport = new HttpTransportSE(URL);\n        System.out.println(&quot;BodyOut &quot; + envelope.bodyOut.toString());\n\n        androidHttpTransport.debug = true;\n        androidHttpTransport.call(SOAP_ACTION, envelope);\n\n        SoapPrimitive response = (SoapPrimitive)envelope.getResponse();\n        System.out.println(&quot;ResponseMessage&quot; +  response.toString());\n        responseMsg = String.valueOf(response);\n        System.out.println(&quot;ResponseMessage&quot; +  response.toString());\n</code></pre>\n<pre><code> public static Element[] getHeaderElement() {\n        // create header\n        Element[] header = new Element[1];\n        header[0] = new Element().createElement(&quot;http://docs.oasis-open.org/wss/2004/01/oasis- 200401-wss-wssecurity-secext-1.0.xsd&quot;,&quot;Security&quot;);\n        header[0].setAttribute(null, &quot;mustUnderstand&quot;,&quot;1&quot;);\n\n        //username\n        Element username = new Element().createElement(null, USER_NAME);\n        username.addChild(Node.IGNORABLE_WHITESPACE,&quot;CBROWN&quot;);\n        header[0].addChild(Node.ELEMENT, username);\n\n        //password\n        Element pass = new Element().createElement(null,PASSWORD);\n        pass.setAttribute(null, &quot;Type&quot;, &quot;http://docs.oasis-open.org/wss/2004/01/oasis-200401-wss-username-token-profile-1.0#PasswordText&quot;);\n//        pass.addChild(Node.TEXT, PASSWORD);\n        username.addChild(Node.ELEMENT, pass);\n\n        return header;\n    }\n}\n</code></pre>\n"},{"tags":["java","opengl","raspberry-pi","processing","raspberry-pi4"],"comments":[{"owner":{"user_id":14956120,"display_name":"Carl HR"},"edited":false,"comment_id":133449307,"body":"Isn&#39;t a problem that a raspberry pi doesn&#39;t come with a GPU to run the game&#39;s graphics? I remember a few years ago when I tried to use pygame (v1.0, which used the SDL 1.0), the graphics calculations were done directly on the CPU. This is an explicit performance problem, as the CPU needs to compute all the graphics at each frame. The problem grows, the larger your screen size is (1920x1080 is big). So, depending on how fast the CPU is, you&#39;re bound to have low FPS no matter what you do (as this is more of a hardware problem). Or, you could try decreasing the screen size."},{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"edited":false,"comment_id":133450024,"body":"Carl HR, I have made a new test and added this info to the post. The clear test without any graphic output - not updateable window 1920x1080 with one console output per frame. And I get 13 FPS. Standart test glxgears shows 75 fps. Maybe trouble is not in the RPI? I can not change the resolution: this is a point in the specification of the customer."},{"owner":{"user_id":14956120,"display_name":"Carl HR"},"edited":false,"comment_id":133450293,"body":"<i>&quot;I don’t understand why the simplest processing sketch with only console output and the not updateable screen content runs so slow&quot;</i> When you try to print anything into a console, it&#39;s expected that the print function call slows down the application. That&#39;s why that you can never know the true FPS you&#39;re getting within your application, as any technique that you may try will slow it down. Now, to get such a low frame rate, how are you testing the application? The raspberry is taking care of an entire OS and multiple applications at the same time? Or just the game (no OS)?"},{"owner":{"user_id":14956120,"display_name":"Carl HR"},"edited":false,"comment_id":133450985,"body":"Given the possiblity that the raspberry pi is being slowed down, due to have to process the entire screen, and other applications at the same time (ie: game + console + os interface), try to redirect the standard output to a file inside your project. This way, the console won&#39;t output anything when a print occurs, which won&#39;t force any screen updates. Later on, when the application is closed, you can open the file and check the output (frame rate). It should be bigger. If it&#39;s not, then I don&#39;t know what it is causing it to be low."},{"owner":{"user_id":89766,"display_name":"George Profenza"},"edited":false,"comment_id":133450987,"body":"@AlexanderGorodilov Unfortunately I don&#39;t have access to a RPI 4 to test, but I think you&#39;re on the right track with the P2D blank sketch you did. In my experience Processing/Java runs fairly slow on RPI and in the past (using RPI 1, 2) resources were very limited. IIRC, by default, only a fraction of the system RAM is shared for video. Try running <code>sudo raspi-config</code> and enable a lot more video memory, reboot and run your test again. Try running a few tests from <code>Processing &gt; Examples &gt; Demos &gt; Graphics</code> and also <code>Performance</code>."},{"owner":{"user_id":89766,"display_name":"George Profenza"},"edited":false,"comment_id":133451010,"body":"Additionally, try your blank test with smaller resolutions (e.g. 720p, 360p) and hopefully there&#39;s a lower resolution that behaves well. If that&#39;s the case you can try using a <code>PGraphics</code> buffer at half res (720p) for example to do most of the work, then render it at the end of <code>draw()</code> as <code>1080p</code>. Sure, it won&#39;t be as crisp, but hopefully still looking ok/acceptable but moving faster. If you&#39;re not constrained to Processing Java you can look at pygame (if that applies) or even openFrameworks (c++). OpenFrameworks is inspired Processing and has many similarities. setup/compilation will be slow"},{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"edited":false,"comment_id":133453450,"body":"Carl HR,  the output source is not the main reason. I made an another experiment: I created on my Khadas Vim3 pro a clear LibGDX project, that draws a single picture on the screen in the main game loop and print the frame rate in the console. And I got stable 60 FPS. I think, that the trouble is in the Processing for the single boards computers. The internal libraries are not adjusted for using OpenGl on the ARM architecture."},{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"edited":false,"comment_id":133453551,"body":"George Profenza, I can not even launch any P2D examples from the Processing IDE. It doesn&#39;t want to create the OpenGl window. I have install Raspbian 32 bit but the situation is the same. Maybe the customer accepts the low resolution, but I don&#39;t know. I know only Java, but wanted to learn C++. But right now I can not even understand how to assembly libraries and append they to a clear C++ project. I wanted try to use processing for C++ (an open source unofficial port to Cpp), but couldn&#39;t assembly."},{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"edited":false,"comment_id":133453720,"body":"@George Profenza, If I can not find a solution how to use all OpenGl power from Processing, I think I will use LibGDX. I have tested it today and didn&#39;t get any performance troubles. It uses the same programming language and I have three books about this framework. The game is not very difficult and I think I can port my game in LibGDX in 4-6 hours. I also found a Java  library (I think It is Pi4J) , that can be used for controlling of the GPIO. I don&#39;t want but I think it is the shortest way to complete the project."},{"owner":{"user_id":278949,"display_name":"Frank"},"edited":false,"comment_id":133458063,"body":"@AlexanderGorodilov Pi4J can indeed help you to control the game with a joystick (see article on <a href=\"https://blogs.oracle.com/javamagazine/post/look-out-duke-part-2-control-a-java-game-with-a-raspberry-pi-and-a-joystick\" rel=\"nofollow noreferrer\">blogs.oracle.com/javamagazine/post/&hellip;</a>), but also contains documentation on how to run your application in desktop only mode. This is for JavaFX application, but may also be helpful for our use case: <a href=\"https://pi4j.com/getting-started/fxgl/kiosk-mode/\" rel=\"nofollow noreferrer\">pi4j.com/getting-started/fxgl/kiosk-mode</a>"},{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"edited":false,"comment_id":133461523,"body":"@Frank, I have wrote at the begin of the topic that &quot;I have already organized the communication between the RPI 4B 8Gb and the joystick&quot;. I have used a Java-port of evdev library. But you have presented me a good idea. Processing has a JavaFX library. I will try to create not the OpenGL or Java window, but JavaFX window using FX2D as the third parameter in the size() function. I&#39;ll try it on my single board computers. I hope it is more powerfull mode for RPI"},{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"edited":false,"comment_id":133499596,"body":"@Frank, JavaFX (FX2D as the third parameter in the size() function), increases the game performance. It is better than the default renderer. Thank Frank! But not enough. It will be better if the P2D works correct."},{"owner":{"user_id":740553,"display_name":"Mike &#39;Pomax&#39; Kamermans"},"edited":false,"comment_id":133545243,"body":"If your post needs <i>this</i> many comments in order for someone to sus out the particulars, it&#39;s well past time to <a href=\"https://stackoverflow.com/posts/75640628/edit\">edit</a> your post and move all the information you added in comments <a href=\"/help/how-to-ask\">into your post instead</a>. Also, Processing has a <a href=\"https://discourse.processing.org/\" rel=\"nofollow noreferrer\">user forum</a> exactly for questions like this, so while posting here is of course fine, did you <i>also</i> post there? Because SO is your last resort, not your first: first ask the people who are best suited to answer your question. And only if that yields no result does posting to SO make sense =)"}],"answers":[{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"up_vote_count":0,"is_accepted":false,"creation_date":1679211814,"answer_id":75780666,"body":"<p>Well, I have transfered my game into LibGDX. It uses also Java as the programming language and Open GL ES for the rendering. I have got 50-60 FPS.\nThe answer is pretty simple: Don't use Processing for creation of applications with the Open GL context running on ARM Single board computers with Linux as the operating system.</p>\n"}],"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"view_count":106,"up_vote_count":4,"answer_count":1,"score":3,"creation_date":1677999163,"question_id":75640628,"body":"<p>Good day!</p>\n<p>I got a project from a firm and now I need to develop an arcade cabinet with Raspberry Pi 3. It has a joystick and some external devices, which are controlled via GPIO. I have already organized the communication between the RPI 4B 8Gb and the joystick and I can already receive signals from the coin acceptor. The next trouble is performance. I create the videogame using Java and append the internal processing libraries (<a href=\"http://www.processing.org\" rel=\"nofollow noreferrer\">www.processing.org</a>) to the project for the graphic output and GPIO interaction.</p>\n<p>The processing-core library has two abilities to render graphics: software rendering (using parameter JAVA2D in the size() function) and hardware accelerated (using parameter P2D or P3D in the same function). The parameters P2D and P3D enable the OpenGL support and the performance of all my games on the normal desktop PC or android device is higher as the performance in the JAVA2D mode. But not on my single board computers.</p>\n<p>On the Raspberry PI 4B 8Gb (Raspberry Pi OS 64 bit desktop) I got: 11 FPS in JAVA2D mode and 6 FPS in P2D mode.\nOn my Khadas Vim3 pro (Ubuntu 20.04 64 bit) I got 14 FPS in JAVA2D mode and 8 FPS in P2D mode.</p>\n<p>I don’t understand what is the trouble with the performance on the SBC? My game is pretty simple: The screen size is: 1920x1080. All the game graphic is packed in a single PNG file. I draw a images for background, than for 3 airplaines, than for bullets and than a full screen explosion. All the graphic is drawn without scaling using function:</p>\n<pre><code>image(source, posX, poxY, width, height, leftPixelInSource, upperPixelInSource, rightPixelInSource, lowerPixelInSource);\n</code></pre>\n<p>I need to get at least 20 FPS to complete the project.</p>\n<p>I use Intellij IDEA (with sudo parameter) and I see in the logcat the next 3 lines when I use OpenGL (P2D parameter in the size()-function):</p>\n<pre><code>error: XDG_RUNTIME_DIR not set in the environment.\nerror: XDG_RUNTIME_DIR not set in the environment.\nerror: XDG_RUNTIME_DIR not set in the environment.\n</code></pre>\n<p>, but the game runs. When I close the game I receive the next messages in the logcat.</p>\n<pre><code>X11Util.Display: Shutdown (JVM shutdown: true, open (no close attempt): 2/2, reusable (open, marked uncloseable): 0, pending (open in creation order): 2)\nX11Util: Open X11 Display Connections: 2\nX11Util: Open[0]: NamedX11Display[:0, 0x7f1c07cc90, refCount 1, unCloseable false]\nX11Util: Open[1]: NamedX11Display[:0, 0x7f1c0a2150, refCount 1, unCloseable false]\n</code></pre>\n<p>In Java mode I haven’t any errors.\nI tried to launch without the sudo parameter and with the enabled P2D parameter. I have a new error and can not launch the game. The log cat shows:</p>\n<pre><code>Resource compiler: Error: Couldn't copy [/home/mgdsstudio/GD/Workspace/Airfight/Libs/META-INF/MANIFEST.MF] to [/home/mgdsstudio/GD/Workspace/Airfight/out/production/desktop/META-INF/MANIFEST.MF]\njava.io.IOException: Couldn't copy [/home/mgdsstudio/GD/Workspace/Airfight/Libs/META-INF/MANIFEST.MF] to [/home/mgdsstudio/GD/Workspace/Airfight/out/production/desktop/META-INF/MANIFEST.MF]\n    at com.intellij.openapi.util.io.FileUtil.performCopy(FileUtil.java:419)\n    at com.intellij.openapi.util.io.FileUtil.copyContent(FileUtil.java:408)\n    at org.jetbrains.jps.incremental.FSOperations.copy(FSOperations.java:472)\n    at org.jetbrains.jps.incremental.resources.ResourcesBuilder.copyResource(ResourcesBuilder.java:123)\n    at org.jetbrains.jps.incremental.resources.ResourcesBuilder.lambda$build$0(ResourcesBuilder.java:67)\n    at org.jetbrains.jps.incremental.fs.BuildFSState.processFilesToRecompile(BuildFSState.java:374)\n    at org.jetbrains.jps.incremental.IncProjectBuilder$6.processDirtyFiles(IncProjectBuilder.java:1261)\n    at org.jetbrains.jps.incremental.resources.ResourcesBuilder.build(ResourcesBuilder.java:56)\n    at org.jetbrains.jps.incremental.resources.ResourcesBuilder.build(ResourcesBuilder.java:27)\n    at org.jetbrains.jps.incremental.IncProjectBuilder.buildTarget(IncProjectBuilder.java:1266)\n    at org.jetbrains.jps.incremental.IncProjectBuilder.runBuildersForChunk(IncProjectBuilder.java:1166)\n    at org.jetbrains.jps.incremental.IncProjectBuilder.buildTargetsChunk(IncProjectBuilder.java:1303)\n    at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunkIfAffected(IncProjectBuilder.java:1118)\n    at org.jetbrains.jps.incremental.IncProjectBuilder.buildChunks(IncProjectBuilder.java:889)\n    at org.jetbrains.jps.incremental.IncProjectBuilder.runBuild(IncProjectBuilder.java:471)\n    at org.jetbrains.jps.incremental.IncProjectBuilder.build(IncProjectBuilder.java:197)\n    at org.jetbrains.jps.cmdline.BuildRunner.runBuild(BuildRunner.java:150)\n    at org.jetbrains.jps.cmdline.BuildSession.runBuild(BuildSession.java:371)\n    at org.jetbrains.jps.cmdline.BuildSession.run(BuildSession.java:193)\n    at org.jetbrains.jps.cmdline.BuildMain$MyMessageHandler.lambda$channelRead0$0(BuildMain.java:211)\n    at java.base/java.util.concurrent.ThreadPoolExecutor.runWorker(ThreadPoolExecutor.java:1128)\n    at java.base/java.util.concurrent.ThreadPoolExecutor$Worker.run(ThreadPoolExecutor.java:628)\n    at java.base/java.lang.Thread.run(Thread.java:829)\nCaused by: java.nio.file.AccessDeniedException: /home/mgdsstudio/GD/Workspace/Airfight/out/production/desktop/META-INF/MANIFEST.MF\n    at java.base/sun.nio.fs.UnixException.translateToIOException(UnixException.java:90)\n    at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:111)\n    at java.base/sun.nio.fs.UnixException.rethrowAsIOException(UnixException.java:116)\n    at java.base/sun.nio.fs.UnixFileSystemProvider.newByteChannel(UnixFileSystemProvider.java:219)\n    at java.base/java.nio.file.spi.FileSystemProvider.newOutputStream(FileSystemProvider.java:478)\n    at java.base/java.nio.file.Files.newOutputStream(Files.java:220)\n    at com.intellij.openapi.util.io.FileUtil.openOutputStream(FileUtil.java:452)\n    at com.intellij.openapi.util.io.FileUtil.performCopy(FileUtil.java:415)\n    ... 22 more\n</code></pre>\n<p>I read some info about default OpenGL driver troubles on RPI. But I don’t understand what I must do to increase the FPS or maybe repair the OpenGL? Are there differences in the Raspberry Pi OS 32 bit between desktop and no desktop distribution? Maybe I need to try  another OS distribution to get better performance?</p>\n<p>I have made my sketch simpler. It has now only one function in the game loop:</p>\n<pre><code>@\nOverride\n    public void settings(){\n        size(1920, 1080, P2D);        \n    }\n\n    @Override\n    public void setup(){}\n\n\n\n    @Override\n    public void draw(){\n        System.out.println(&quot;FPS: &quot; + frameRate);        \n    }\n</code></pre>\n<p>And I got the FPS not more than 13 frames per second. The game loop does nothing - only console output. When I launch glxgears programm after I have installed mesa-utils with the command:</p>\n<pre><code>sudo apt-get install mesa-utils\n</code></pre>\n<p>I get 75 FPS. I don’t understand why the simplest processing sketch with only console output and the not updateable screen content runs so slow</p>\n"},{"tags":["java","spring","oauth","spring-cloud-config"],"comments":[{"owner":{"user_id":711659,"display_name":"chrislhardin"},"edited":false,"comment_id":133680569,"body":"I have this same need. I need to override the class that does the magic and call a config server protected by oauth.  The import mechanism support a type of authentication but it is not oauth."},{"owner":{"user_id":711659,"display_name":"chrislhardin"},"edited":false,"comment_id":133680611,"body":"Maybe in boot  2.7 or 3.0, there is some ingenious answer for this. I am running simultaneous branches of those right now. I hacked a way around this issue but it doesn&#39;t load first like spring.config.import does. A custom implementation class would be just ideal."},{"owner":{"user_id":8340997,"display_name":"Anish B."},"edited":false,"comment_id":133742651,"body":"@chrislhardin Plz share a minimal reproduceable codebase."}],"answers":[{"owner":{"user_id":2165146,"display_name":"muhammed ozbilici"},"up_vote_count":0,"is_accepted":false,"creation_date":1679780271,"answer_id":75844669,"body":"<p>Actually, you can do this by creating a custom <code>ConfigDataLoader</code> that sets the RestTemplate on the <code>ConfigServicePropertySourceLocator</code>. To do that, first create <code>ConfigDataLoader</code>;</p>\n<pre><code>public class OAuth2ConfigDataLoader implements ConfigDataLoader&lt;ConfigServerConfigData&gt; {\n\n    private final ConfigClientProperties clientProperties;\n    private final OAuth2RestTemplate oauth2RestTemplate;\n\n    public OAuth2ConfigDataLoader(ConfigClientProperties clientProperties,\n                                  OAuth2RestTemplate oauth2RestTemplate) {\n        this.clientProperties = clientProperties;\n        this.oauth2RestTemplate = oauth2RestTemplate;\n    }\n\n    @Override\n    public ConfigServerConfigData load(ConfigDataLoaderContext context,\n                                       ConfigServerConfigDataResource resource)\n            throws ConfigDataNotFoundException, IOException {\n        ConfigServicePropertySourceLocator locator =\n                new ConfigServicePropertySourceLocator(clientProperties);\n        locator.setRestTemplate(oauth2RestTemplate);\n        return new ConfigServerConfigData(locator);\n    }\n\n    @Override\n    public ConfigDataLoader&lt;ConfigServerConfigData&gt; withFallback(ConfigDataLoader&lt;?&gt; fallback) {\n        return this;\n    }\n}\n</code></pre>\n<p>Then create a configuration class to configure the <code>OAuth2RestTemplate</code>:</p>\n<pre><code>@Configuration\npublic class OAuth2RestTemplateConfig {\n\n    @Bean\n    public OAuth2RestTemplate oauth2RestTemplate() {\n        // configure and return the OAuth2RestTemplate\n    }\n}\n</code></pre>\n<p>And last step, set these in your <code>application.properties</code> file:</p>\n<pre><code>spring.config.import=optional:configserver:http://localhost:8888/\nspring.config.imports[0].name=oauth2\nspring.config.imports[0].optional=true\nspring.config.imports[0].loader=com.example.config.OAuth2ConfigDataLoader\n</code></pre>\n"}],"owner":{"user_id":5802110,"display_name":"dflachbart"},"view_count":128,"up_vote_count":3,"answer_count":1,"score":3,"creation_date":1677433578,"question_id":75573893,"body":"<p>I have a Spring Cloud configuration server that is secured with OAuth2 and use the old-style (pre-Spring 2.4) bootstrap approach to bind to the config server. In order to make it use an OAuth2RestTemplate I implemented a custom <code>ConfigServicePropertySourceLocator</code> that sets the rest template, configured via <code>spring.factories</code> (I found a few examples out there that showed how to do this):</p>\n<pre><code>@Configuration\npublic class ConfigClientOAuth2BootstrapConfiguration {\n\n    @Bean\n    @Primary\n    public ConfigServicePropertySourceLocator configServicePropertySourceLocator() {\n        ConfigClientProperties clientProperties = configClientProperties();\n        ConfigServicePropertySourceLocator locator = new ConfigServicePropertySourceLocator(clientProperties);\n        locator.setRestTemplate(oauth2RestTemplate());\n        \n        return locator;\n    }\n\n    [...]\n}\n</code></pre>\n<p>META-INF/spring.factories:</p>\n<pre><code>org.springframework.cloud.bootstrap.BootstrapConfiguration=\\\ncom.example.config.ConfigClientOAuth2BootstrapConfiguration\n\n</code></pre>\n<p>Everything works fine that way.</p>\n<p>But I would like to use the new Spring Boot Config Data method of import via <code>spring.config.import=optional:configserver:</code> instead which got introduced in 2.4 (doing away with bootstrap.properties, and the need for <code>spring-cloud-starter-bootstrap</code>), but cannot find any documentation or examples on how to set a custom Rest Template in this case.</p>\n<p>Does anyone have an example (or link to documentation) on how this could be done? Or maybe it's not possible?</p>\n"},{"tags":["java","logging","objectmapper"],"comments":[{"owner":{"user_id":318493,"display_name":"RoToRa"},"edited":false,"comment_id":133261546,"body":"Jackson&#39;s &quot;Pretty print&quot; is for writing JSON. The format you want isn&#39;t valid JSON so it can&#39;t be done with Jackson. You already are printing <code>field2</code> how you want it, so you&#39;ll have to print the rest yourself, too."},{"owner":{"user_id":2727610,"display_name":"Vivek Adhikari"},"edited":false,"comment_id":133276917,"body":"Its a valid JSON but printed differently. It just that, its not linear.  My question is not on values rather on printing. I know jackson doesn&#39;t support this now, is there any lib or anything - that we can achieve this.  I could be achieving this after customizing Pretty Writer to be human readable   if prettyPrint() to be void - just to make sure it would not modify state of data.    ``` objectMapper.writeValueAsString(new TestClass()).prettyPrint();"},{"owner":{"user_id":318493,"display_name":"RoToRa"},"edited":false,"comment_id":133364920,"body":"No, it&#39;s not valid JSON. In JSON it&#39;s illegal to have a literal line break character in strings."},{"owner":{"user_id":2727610,"display_name":"Vivek Adhikari"},"edited":false,"comment_id":133377226,"body":"Its a data that represent, so its valid. I know there is limitation on computation now for this. That&#39;s why I was more interested to have void method on objectmapper to print data that is human readable. As long as, if that doesn&#39;t updates the state of data - its a pretty print anyway. So i am asking if there is lib or existing code that someone is already done. Thanks"}],"owner":{"user_id":2727610,"display_name":"Vivek Adhikari"},"view_count":68,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1677043241,"question_id":75528550,"body":"<p>This is the sample code what I am doing to log the JSON object to the console and including error stack trace as part of field2. While I log to the console, that is not readable.</p>\n<p>Sample Code to understand issue.</p>\n<pre><code>package goal.test;\n\nimport com.fasterxml.jackson.core.JsonProcessingException;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\npublic class TestClass {\n\n    String field1 = &quot;hello&quot;;\n    String field2 = &quot;hi\\r\\ntest&quot;;\n\n    public String getField1() {\n        return field1;\n    }\n\n    public void setField1(String field1) {\n        this.field1 = field1;\n    }\n\n    public String getField2() {\n        return field2;\n    }\n\n    public void setField2(String field2) {\n        this.field2 = field2;\n    }\n\n    public static void main(String[] args) throws JsonProcessingException {\n        whatIsPossibleNow();\n        whatINeed();\n    }\n\n    static void whatIsPossibleNow() throws JsonProcessingException {\n        ObjectMapper objectMapper = new ObjectMapper();\n        String result = objectMapper.writerWithDefaultPrettyPrinter().writeValueAsString(new TestClass());\n        System.out.println(result);\n        /**\n         * output\n         * {\n         *   &quot;field1&quot; : &quot;hello&quot;,\n         *   &quot;field2&quot; : &quot;hi\\r\\ntest&quot;\n         * }\n         */\n    }\n\n    static void whatINeed() throws JsonProcessingException {\n        TestClass obj = new TestClass();\n        /**\n         *\n         *  field2 also need to formatted while printing\n         *         expected output\n         *         {\n         *             &quot;field1&quot; : &quot;hello&quot;,\n         *             &quot;field2&quot; : &quot;hi\n         *                         test&quot;\n         *         }\n         *  output of the field2 should be something this what this prints\n         */\n        System.out.println(obj.getField2());\n    }\n\n    static void howCouldBe() throws JsonProcessingException {\n        /**\n         *  how to achieve this now ??\n         */\n        ObjectMapper objectMapper = new ObjectMapper();\n        objectMapper.writeValueAsString(new TestClass()).prettyPrint();\n    }\n}\n</code></pre>\n<p>I am confused if there is any other way achieving as I need to pretty print object while deserializing.</p>\n"},{"tags":["java","android","gradle","java-11","gradle-task"],"comments":[{"owner":{"user_id":14577209,"display_name":"Maleesha97"},"edited":false,"comment_id":133598900,"body":"See if answers from <a href=\"https://stackoverflow.com/q/25844546/14577209\">this</a> will help you.  And the updated answer of <a href=\"https://stackoverflow.com/a/49112492/14577209\">this</a> as well."},{"owner":{"user_id":16482938,"display_name":"j_b"},"edited":false,"comment_id":133646287,"body":"The code snippet you included in your question has two open curly braces &#39;{&#39; that do not have corresponding closing braces &#39;}&#39;.  Does the full code have these closing braces?"},{"owner":{"user_id":15103978,"display_name":"M.Mevlevi"},"edited":false,"comment_id":133648740,"body":"The line of code you provided looks like a hook for executing code when the Gradle task graph is ready. This feature is available in Gradle 4.3 and later versions. So, if you are using Gradle 7, this line should work without any issues."}],"owner":{"user_id":1798649,"display_name":"Faisal"},"view_count":355,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1677040583,"question_id":75528317,"body":"<p>I'm trying to upgrade an old project. Actually, I had to upgrade targetAPILevel to 33 from 30 which eventually requires JDK upgrade from 1.8 to 11.I could be wrong but JDK 11 requires Gradle version upgrade from 4.2 to 7. So I did upgrade Gradle to 7. Now gradle build was working fine on 4.2 but on version 7 it doesn't build gradle.build and throws following error.</p>\n<pre><code>\nCould not compile build file '/Users/builder/Documents/payment/Clients/iOS/build.gradle'.\n&gt; startup failed:\n  build file '/Users/builder/Documents/payment/Clients/iOS/build.gradle': 117: Unexpected input: '{' @ line 117, column 28.\n     gradle.taskGraph.whenReady { taskGraph -&gt;  \n</code></pre>\n<p>It complains about &quot;{&quot;. I have basic knowledge of gradle tasks and I'm learning as doing all of this.</p>\n<p>following is the Gradle code where this line came from :</p>\n<pre><code>gradle.taskGraph.whenReady { taskGraph -&gt;\n\n    if (taskGraph.hasTask(package) ) {\n        if (project.hasProperty('buildtype')) {\n            buildType = buildtype\n            println &quot;### Project has buildType = $buildType&quot;\n        }\n\n</code></pre>\n<p>Can someone please guide me how to handle this?</p>\n"},{"tags":["java","android","android-textinputedittext","input-filtering","android-input-filter"],"comments":[{"owner":{"user_id":1865860,"display_name":"dentex"},"edited":false,"comment_id":133499400,"body":"@Zain why did you delete your answer?"},{"owner":{"user_id":9851608,"display_name":"Zain"},"edited":false,"comment_id":133499927,"body":"Hey dentex; I just thought I couldn&#39;t enhance it anymore; and I wasn&#39;t able to reproduce the new behavior you encountered; hopefully you&#39;d find the solution."}],"answers":[{"owner":{"user_id":17870055,"display_name":"xenon134"},"up_vote_count":0,"is_accepted":false,"creation_date":1677633892,"answer_id":75598804,"body":"<p>Why are you using regex for this? This is a simple validation logic.</p>\n<pre><code>public static InputFilter getClientIdInputFilter() {\n    return (source, start, end, dest, dstart, dend) -&gt; {\n        Log.v(DEBUG_TAG, &quot;----\\nsource: &quot; + source + &quot;, start: &quot; + start + &quot;, end: &quot; + end + &quot;, dest: &quot; + dest + &quot;, dstart: &quot; + dstart + &quot;, dend: &quot; + dend);\n        String destTxt = dest.toString();\n        String input = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);\n        Log.v(DEBUG_TAG, input);\n        \n        // changes start from here\n        if (input.length() != 3 &amp;&amp; input.length() != 4)\n            return &quot;&quot;;\n        int numberOfCapitalLetters = 0, nuberOfDigits = 0;\n        for (char i: input.toCharArray()) { // loop over all the letters\n            if (i &gt;= 'A' &amp;&amp; i &lt;= 'Z') // capital letter\n                numberOfCapitalLetters += 1;\n            else if (i &gt;= '0' &amp;&amp; i &lt;= '9')\n                nuberOfDigits += 1;\n            else \n                return &quot;&quot;; // only capital letters and numbers allowed\n        }\n        if ((numberOfCapitalLetters == 2) &amp;&amp; ((nuberOfDigits == 1) || (nuberOfDigits == 2)))\n            return null; // valid\n        else\n            return &quot;&quot;;\n    };\n}\n</code></pre>\n"},{"owner":{"user_id":9410164,"display_name":"ndriqa"},"up_vote_count":0,"is_accepted":false,"creation_date":1677635285,"answer_id":75598888,"body":"<p>As I can understand @xenon134's answer, it doesn't actually check if the first and the second characters are letters, so, since the the input should be limited to 3 or 4 characters, I would go to a more hardcoded solution and not overengineer it, so:</p>\n<pre><code>public static InputFilter getClientIdInputFilter() {\n    return (source, start, end, dest, dstart, dend) -&gt; {\n        Log.v(DEBUG_TAG, &quot;----\\nsource: &quot; + source + &quot;, start: &quot; + start + &quot;, end: &quot; + end + &quot;, dest: &quot; + dest + &quot;, dstart: &quot; + dstart + &quot;, dend: &quot; + dend);\n        String destTxt = dest.toString();\n        String input = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);\n        Log.v(DEBUG_TAG, input);\n        \n        // changes start from here\n        if (input.length() == 1 &amp;&amp; (input.charAt(0) &lt; 'A' || input.charAt(0) &gt; 'Z'))\n            return &quot;&quot;\n        if (input.length() == 2 &amp;&amp; (input.charAt(1) &lt; 'A' || input.charAt(1) &gt; 'Z'))\n            return &quot;&quot;\n        if(input.length() == 3 &amp;&amp; (input.charAt(2) &lt; '0' || input.charAt(2) &gt; '9')) \n            return &quot;&quot;;\n        if(input.length() == 4) {\n            char ch4 = input.charAt(3);\n            if(ch4 &lt; '0' || ch4 &gt; '9') \n                return &quot;&quot;;\n        }\n        if (input.length() &gt; 4)\n            return &quot;&quot;;\n        \n        return null; //valid\n    };\n}\n</code></pre>\n<p>*pardon me if I have forgotten any semicolon as I'm working with Kotlin for a while now, also not sure if I can get the char by index like that in Java, you might need to use <code>input.charAt(index)</code></p>\n<p><em>Additionally, you can extract some code to check whether a char is a letter or a number on separate functions so the code looks more readable</em>:</p>\n<ul>\n<li><code>public static boolean isLetter(char c) { ... }</code></li>\n<li><code>public static boolean isNumber(char c) { ... }</code></li>\n</ul>\n"},{"owner":{"user_id":10759818,"display_name":"Sudhakar kr"},"up_vote_count":0,"is_accepted":false,"creation_date":1677675029,"answer_id":75603974,"body":"<p>If you want use regex method use below.</p>\n<pre><code>Pattern pattern = Pattern.compile(&quot;[A-Z]{2}\\\\d{1,2}&quot;);\n    \nString input = dest.subSequence(0, dstart)\n             + source.toString()\n             + dest.subSequence(dend, dest.length());\n\nMatcher matcher = pattern.matcher(input);\nif (!matcher.matches()) {\n    return &quot;&quot;;\n}\n\nreturn null;\n</code></pre>\n"}],"owner":{"user_id":1865860,"display_name":"dentex"},"view_count":172,"up_vote_count":3,"answer_count":3,"score":3,"creation_date":1676918666,"question_id":75513081,"body":"<p>I need to restrict the input that can be entered into a <code>TextInputEditText</code> to two capital letters and one or two digits, as in AB01, CS8, XY99 or ND5.</p>\n<p>So I wrote this method:</p>\n<pre><code>/**\n * @return an InputFilter that restricts input to the format of two capital letters and one or two digits\n */\npublic static InputFilter getClientIdInputFilter() {\n    return (source, start, end, dest, dstart, dend) -&gt; {\n        Log.v(DEBUG_TAG, &quot;----\\nsource: &quot; + source + &quot;, start: &quot; + start + &quot;, end: &quot; + end + &quot;, dest: &quot; + dest + &quot;, dstart: &quot; + dstart + &quot;, dend: &quot; + dend);\n        String destTxt = dest.toString();\n        String input = destTxt.substring(0, dstart) + source.subSequence(start, end) + destTxt.substring(dend);\n        Log.v(DEBUG_TAG, input);\n        if (input.matches(&quot;^[A-Z]{0,2}[0-9]{0,2}$&quot;)) {\n            if (input.length() == 1 &amp;&amp; input.matches(&quot;^[0-9]$&quot;)) {\n                Log.v(DEBUG_TAG, &quot;Invalid input A&quot;);\n                return &quot;&quot;;\n            }\n            if (input.length() == 2 &amp;&amp; !input.matches(&quot;^[A-Z]{2}$&quot;)) {\n                Log.v(DEBUG_TAG, &quot;Invalid input B&quot;);\n                return &quot;&quot;;\n            }\n            Log.v(DEBUG_TAG, &quot;Valid input&quot;);\n            return null;\n        }\n        Log.v(DEBUG_TAG, &quot;Invalid input C&quot;);\n        return &quot;&quot;;\n    };\n}\n</code></pre>\n<p>That I use like this:</p>\n<pre><code>TextInputEditText clientId = dialogView.findViewById(R.id.edit_text_client_id);\nInputFilter[] clientIdFilters = new InputFilter[1];\nclientIdFilters[0] = InputFilterUtils.getClientIdInputFilter();\nclientId.setFilters(clientIdFilters);\n</code></pre>\n<p>It <em>almost</em> works perfectly...</p>\n<p>The problem is that <strong>only</strong> when starting typing from an empty <code>textfield</code>, after the first two capital letters (so at the 3rd one) the field gets deleted completely. If, instead, a number is entered first (and gets correctly ignored), if you continue to type letters, when reaching the 3rd letter, this time the first two remains and the user can continue entering the digits...</p>\n<p>I don't have a clue for this behavior (I added some logging entries, but it's not clear anyway)</p>\n"},{"tags":["java","selenium-webdriver","selenium-chromedriver"],"comments":[{"owner":{"user_id":23354,"display_name":"Marc Gravell"},"edited":false,"comment_id":133268913,"body":"possibly related to: <a href=\"https://bugs.chromium.org/p/chromedriver/issues/detail?id=4330\" rel=\"nofollow noreferrer\">bugs.chromium.org/p/chromedriver/issues/detail?id=4330</a>"},{"owner":{"user_id":18650187,"display_name":"Jeetendra Navgikar"},"edited":false,"comment_id":133271714,"body":"@MarcGravell Thank you very much that was very informative"}],"owner":{"user_id":18650187,"display_name":"Jeetendra Navgikar"},"view_count":161,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1676903011,"question_id":75510453,"body":"<pre><code>[1676877376.906][WARNING]: virtual void DevToolsClientImpl::AddListener(DevToolsEventListener *) subscribing a listener to the already connected DevToolsClient. Connection notification will not arrive.\n</code></pre>\n<p>I Have this Warning Error in my console while running Selenium Scripts, Does Anyone came across this and knows how to fix it, Thank you</p>\n"},{"tags":["java","maven","build","jpackage"],"comments":[{"owner":{"user_id":12705184,"display_name":"Sepi"},"edited":false,"comment_id":133285239,"body":"you can try <a href=\"https://github.panteleyev.org/jpackage-maven-plugin/examples/executions.html\" rel=\"nofollow noreferrer\">link</a>"},{"owner":{"user_id":10524503,"display_name":"Wortig"},"edited":false,"comment_id":133287169,"body":"@Sepi Works, but only for platform I am curretly on."},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":133318366,"body":"It doesn’t matter whether you run <code>jpackage</code> with Maven or standalone. It (currently) does not support building for a different platform: <a href=\"https://docs.oracle.com/en/java/javase/19/jpackage/packaging-overview.html#GUID-786E15C0-2CE7-4BDF-9B2F-AC1C57249134:~:text=Application%20packages%20must%20be%20built%20on%20the%20target%20platform.\" rel=\"nofollow noreferrer\">Application packages must be built on the target platform.</a>"}],"owner":{"user_id":10524503,"display_name":"Wortig"},"view_count":238,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1676891145,"question_id":75508455,"body":"<p><em>Jpackage using maven failed with Akman/jpackage-maven-plugin: Unable to resolve project dependencies: Cannot run program &quot;/usr/bin/bin/java&quot;</em></p>\n<p>I am trying to use jpackage command to generate native installers in maven for Windows, Linux and Mac using Akman/jpackage-maven-plugin.</p>\n<p>Link to jpackage maven plugin: <a href=\"https://github.com/Akman/jpackage-maven-plugin\" rel=\"nofollow noreferrer\">https://github.com/Akman/jpackage-maven-plugin</a> (it requires min. version of Maven 3.8.6)</p>\n<p>JDK/JRE I am using is Bellsoft LIberica JDK 17.0.6+10 and JRE 17.0.6+10 <a href=\"https://bell-sw.com/pages/downloads/\" rel=\"nofollow noreferrer\">https://bell-sw.com/pages/downloads/</a>.</p>\n<p>IDE: IntelliJ IDEA 2022.3 (Community Edition)</p>\n<p>Maven version: 3.9.0</p>\n<p>The operating system I am on is Kubuntu 22.10</p>\n<p>jpackage-maven-plugin configuration:</p>\n<pre><code>&lt;plugin&gt;\n    &lt;groupId&gt;com.github.akman&lt;/groupId&gt;\n    &lt;artifactId&gt;jpackage-maven-plugin&lt;/artifactId&gt;\n    &lt;version&gt;0.1.5&lt;/version&gt;\n    &lt;configuration&gt;\n        &lt;appversion&gt;${project.version}&lt;/appversion&gt;\n        &lt;input&gt;${jpackageInputDir}&lt;/input&gt;\n        &lt;mainjar&gt;${buildDirectory}/mainjar.jar&lt;/mainjar&gt;\n        &lt;mainclass&gt;${mainClass}&lt;/mainclass&gt;\n        &lt;icon&gt;${project.basedir}/books256.ico&lt;/icon&gt;\n        &lt;name&gt;${fn}&lt;/name&gt;\n        &lt;dest&gt;${jpackageOutputDir}&lt;/dest&gt;\n    &lt;/configuration&gt;\n    &lt;executions&gt;\n        &lt;execution&gt;\n            &lt;id&gt;jpackagedeblinux&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;jpackage&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;linuxshortcut&gt;true&lt;/linuxshortcut&gt;\n                &lt;type&gt;DEB&lt;/type&gt;\n                &lt;toolhome&gt;${jpackageJdkDirLinux}&lt;/toolhome&gt;\n                &lt;runtimeimage&gt;${jpackageJreDirLinux}&lt;/runtimeimage&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;jpackagewinmsi&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;jpackage&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;type&gt;MSI&lt;/type&gt;\n                &lt;toolhome&gt;${jpackageJdkDirWin}&lt;/toolhome&gt;\n                &lt;runtimeimage&gt;${jpackageJreDirWin}&lt;/runtimeimage&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n        &lt;execution&gt;\n            &lt;id&gt;jpackagepkgmac&lt;/id&gt;\n            &lt;phase&gt;package&lt;/phase&gt;\n            &lt;goals&gt;\n                &lt;goal&gt;jpackage&lt;/goal&gt;\n            &lt;/goals&gt;\n            &lt;configuration&gt;\n                &lt;type&gt;PKG&lt;/type&gt;\n                &lt;toolhome&gt;${jpackageJdkDirMac}&lt;/toolhome&gt;\n                &lt;runtimeimage&gt;${jpackageJreDirMac}&lt;/runtimeimage&gt;\n            &lt;/configuration&gt;\n        &lt;/execution&gt;\n    &lt;/executions&gt;\n&lt;/plugin&gt;\n</code></pre>\n<p>Note: removing <code>&lt;toolHome&gt;</code> (Path to jdk - actual jdk tools used. If not present, default is used.) and/or <code>&lt;runtimeImage&gt;</code> (jre to be copied to resulting installer) parameters does not make a change.</p>\n<p>Properties:</p>\n<pre><code>&lt;properties&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;project.reporting.sourceEncoding&gt;UTF-8\n        &lt;/project.reporting.sourceEncoding&gt;\n    &lt;fn&gt;mainjar&lt;/fn&gt;\n    &lt;mainClass&gt;core.Main&lt;/mainClass&gt;\n    &lt;buildDirectory&gt;${project.basedir}/target&lt;/buildDirectory&gt;\n    &lt;jpackageInputDir&gt;${buildDirectory}/jpackage_inputdir&lt;/jpackageInputDir&gt;\n    &lt;jpackageOutputDir&gt;${buildDirectory}/jpackage_outputdir&lt;/jpackageOutputDir&gt;\n    &lt;jpackageJreDir&gt;${buildDirectory}/jpackage&lt;/jpackageJreDir&gt;\n    &lt;jpackageJreDirMac&gt;${jpackageJreDir}/mac&lt;/jpackageJreDirMac&gt;\n    &lt;jpackageJreDirWin&gt;${jpackageJreDir}/win&lt;/jpackageJreDirWin&gt;\n    &lt;jpackageJreDirLinux&gt;${jpackageJreDir}/linux&lt;/jpackageJreDirLinux&gt;\n    &lt;jpackageJdkDirMac&gt;${jpackageJreDir}/jdk-mac&lt;/jpackageJdkDirMac&gt;\n    &lt;jpackageJdkDirWin&gt;${jpackageJreDir}/jdk-win&lt;/jpackageJdkDirWin&gt;\n    &lt;jpackageJdkDirLinux&gt;${jpackageJreDir}/jdk-linux&lt;/jpackageJdkDirLinux&gt;\n&lt;/properties&gt;\n</code></pre>\n<p>Note: all jres/jdks are present in their respective folders.</p>\n<p>The error I get during jpackage goal (full stack trace):</p>\n<pre><code>    [ERROR] Failed to execute goal com.github.akman:jpackage-maven-plugin:0.1.5:jpackage (jpackage deb linux) on project desktop.mainapp: Error: Unable to resolve project dependencies: Cannot run program &quot;/usr/bin/bin/java&quot; (in directory &quot;/tmp/plexus-java_jpms-17951190539128822429&quot;): error=2, No such file or directory -&gt; [Help 1]\norg.apache.maven.lifecycle.LifecycleExecutionException: Failed to execute goal com.github.akman:jpackage-maven-plugin:0.1.5:jpackage (jpackage deb linux) on project desktop.mainapp: Error: Unable to resolve project dependencies\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:347)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:330)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:175)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:76)\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:163)\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:160)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:260)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:172)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:100)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:821)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:270)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\nCaused by: org.apache.maven.plugin.MojoExecutionException: Error: Unable to resolve project dependencies\n    at ru.akman.maven.plugins.jpackage.JPackageMojo.resolveDependencies (JPackageMojo.java:1330)\n    at ru.akman.maven.plugins.jpackage.JPackageMojo.execute (JPackageMojo.java:1875)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:342)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:330)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:175)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:76)\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:163)\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:160)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:260)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:172)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:100)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:821)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:270)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\nCaused by: java.io.IOException: Cannot run program &quot;/usr/bin/bin/java&quot; (in directory &quot;/tmp/plexus-java_jpms-17951190539128822429&quot;): error=2, No such file or directory\n    at java.lang.ProcessBuilder.start (ProcessBuilder.java:1143)\n    at java.lang.ProcessBuilder.start (ProcessBuilder.java:1073)\n    at org.codehaus.plexus.languages.java.jpms.MainClassModuleNameExtractor.extract (MainClassModuleNameExtractor.java:97)\n    at org.codehaus.plexus.languages.java.jpms.LocationManager.resolvePaths (LocationManager.java:235)\n    at ru.akman.maven.plugins.jpackage.JPackageMojo.resolveDependencies (JPackageMojo.java:1328)\n    at ru.akman.maven.plugins.jpackage.JPackageMojo.execute (JPackageMojo.java:1875)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:342)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:330)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:175)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:76)\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:163)\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:160)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:260)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:172)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:100)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:821)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:270)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\nCaused by: java.io.IOException: error=2, No such file or directory\n    at java.lang.ProcessImpl.forkAndExec (Native Method)\n    at java.lang.ProcessImpl.&lt;init&gt; (ProcessImpl.java:314)\n    at java.lang.ProcessImpl.start (ProcessImpl.java:244)\n    at java.lang.ProcessBuilder.start (ProcessBuilder.java:1110)\n    at java.lang.ProcessBuilder.start (ProcessBuilder.java:1073)\n    at org.codehaus.plexus.languages.java.jpms.MainClassModuleNameExtractor.extract (MainClassModuleNameExtractor.java:97)\n    at org.codehaus.plexus.languages.java.jpms.LocationManager.resolvePaths (LocationManager.java:235)\n    at ru.akman.maven.plugins.jpackage.JPackageMojo.resolveDependencies (JPackageMojo.java:1328)\n    at ru.akman.maven.plugins.jpackage.JPackageMojo.execute (JPackageMojo.java:1875)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:342)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:330)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:175)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:76)\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:163)\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:160)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:260)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:172)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:100)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:821)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:270)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke0 (Native Method)\n    at jdk.internal.reflect.NativeMethodAccessorImpl.invoke (NativeMethodAccessorImpl.java:77)\n    at jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke (DelegatingMethodAccessorImpl.java:43)\n    at java.lang.reflect.Method.invoke (Method.java:568)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n    at org.codehaus.classworlds.Launcher.main (Launcher.java:47)\n</code></pre>\n<p>Can someone find out the cause of this error and how to fix it? How to make it work maybe with another plugin or setting? Akman/jpackage-maven-plugin is the only one I find, in which I can define home for java tools, which should allow me to make native runtime images for another operating systems, but as you can see it does not work for some reason.</p>\n"},{"tags":["java","jar","classloader","classnotfoundexception"],"comments":[{"owner":{"user_id":5043481,"display_name":"zforgo"},"edited":false,"comment_id":133139383,"body":"Could you provide particular stacktrace containing missing class name? System classloader has to set parents e.g. bootstrap and extension classloaders."},{"owner":{"user_id":433618,"display_name":"Erhard Dinhobl"},"edited":false,"comment_id":133139458,"body":"i would assume that CCLoader is yours? are you providing the CCLoader class in your jar file?"},{"owner":{"user_id":19208792,"display_name":"Gourav Kumar"},"edited":false,"comment_id":133139820,"body":"I have edited my post please have a look. Just now i found out that using <code>javac -J-Djava.class.path=&lt;path to app jar&gt;.jar -J-Djava.system.class.loader=org.example.CCL.CCLoader  </code> the CCLoader is getting triggered. but i don&#39;t know whether this is right or not."},{"owner":{"user_id":5043481,"display_name":"zforgo"},"edited":false,"comment_id":133142479,"body":"At first, fully qualified classname is different in the example <code>-Djava.system.class.loader=org.example.loader.CCLoade</code> and the stacktrace <code>&#47;org&#47;example&#47;CCL&#47;CC_Loader</code>. Finally Java is case sensitive, so capital package names are not the good choice."},{"owner":{"user_id":19208792,"display_name":"Gourav Kumar"},"edited":false,"comment_id":133150015,"body":"my bad, i wrote the package name, it has been corrected now. Please suggest some solution. Thanks!"},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":133185094,"body":"It doesn’t help to change the command line options in the question on Stackoverflow. To the JVM only what you actually specified to the command matters. According to the exception, it was <code>&#47;Users&#47;gouravkumar&#47;Desktop&#47;KPOCs&#47;Class_Isolation_Loading&#47;set&zwnj;&#8203;CustomCL&#47;target&#47;clas&zwnj;&#8203;ses&#47;org&#47;example&#47;CCL&#47;&zwnj;&#8203;CC_Loader.class</code> instead of <code>org.example.loader.CCL.CCLoader</code>."}],"owner":{"user_id":19208792,"display_name":"Gourav Kumar"},"view_count":57,"up_vote_count":3,"answer_count":0,"score":3,"creation_date":1676458280,"question_id":75458697,"body":"<p>I am working on some usecase where i want that my custom classloader should be used instead of the default system classloader. For this i tried many ways</p>\n<ol>\n<li><p><code>java -Djava.system.class.loader=org.example.loader.CCLoader -jar &lt;path to app jar&gt;.jar</code></p>\n</li>\n<li><p><code>java -Djava.system.class.loader=&lt;complete path to compiled CCLoader&gt;.class -jar &lt;path to app jar&gt;.jar</code></p>\n</li>\n<li><p><code>java -Djava.system.class.loader=&lt;complete path to CCLoader&gt;.java -jar &lt;path to app jar&gt;.jar</code></p>\n</li>\n<li><p><code>java -Djava.system.class.loader=org.example.loader.CCL.CCLoader -cp &lt;path to app jar&gt;.jar org.example.App</code></p>\n</li>\n</ol>\n<p>Again and again i am getting <code>Caused by: java.lang.ClassNotFoundException:</code> on <strong>CCLoader</strong>.</p>\n<p>Even after unzipping the app.jar, i could find the CCLoader.</p>\n<p>I don't know where i am getting this wrong.</p>\n<p><strong>Edit</strong>: Added stacktrace for reference, And yes the CCLoader is in the same jar as of now just to check but later i will move the CCLoader in some other jar and use it from there.</p>\n<p><strong>Edit2</strong>: corrected path of the CCLoader.</p>\n<pre><code>Error occurred during initialization of VM\njava.lang.Error: java.lang.ClassNotFoundException: /Users/gouravkumar/Desktop/KPOCs/Class_Isolation_Loading/setCustomCL/target/classes/org/example/CCL/CC_Loader.class\n        at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1462)\n        at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1429)\nCaused by: java.lang.ClassNotFoundException: /Users/gouravkumar/Desktop/KPOCs/Class_Isolation_Loading/setCustomCL/target/classes/org/example/CCL/CC_Loader.class\n        at java.lang.Class.forName0(Native Method)\n        at java.lang.Class.forName(Class.java:348)\n        at java.lang.SystemClassLoaderAction.run(ClassLoader.java:2202)\n        at java.lang.SystemClassLoaderAction.run(ClassLoader.java:2188)\n        at java.security.AccessController.doPrivileged(Native Method)\n        at java.lang.ClassLoader.initSystemClassLoader(ClassLoader.java:1449)\n        at java.lang.ClassLoader.getSystemClassLoader(ClassLoader.java:1429)\n</code></pre>\n"}],"has_more":true,"quota_max":300,"quota_remaining":185}