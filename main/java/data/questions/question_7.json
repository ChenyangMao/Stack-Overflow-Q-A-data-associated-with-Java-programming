{"items":[{"tags":["java","mockito"],"comments":[{"owner":{"user_id":4758401,"display_name":"pgeadas"},"edited":false,"comment_id":132398417,"body":"I see two problems in your code: 1)  you are mocking the UserRepo in your test, but in your code it&#39;s that same class that is performing the &quot;authenticate&quot;. What is your AuthenService doing then? 2) Your test is not well written, as mentioned by other replies here. If you want to test an exception throwing, you should use a Spy (which uses a real object) instead of a Mock. Otherwise, you are not testing what you want, since you need to stub your method to return (or throw) exactly what you want to test."}],"answers":[{"owner":{"user_id":5227721,"display_name":"Berk Kurkcuoglu"},"up_vote_count":1,"is_accepted":false,"creation_date":1672967856,"answer_id":75026018,"body":"<p>You are stubbing instead of asserting in your test, so basically you are not testing anything. A test should include at least one assertion, so it should look something similar to this:</p>\n<pre><code>assertThrows(UserNotFoundException.class, () -&gt; as.authenticate(&quot;abc&quot;, &quot;123&quot;));\n</code></pre>\n"},{"owner":{"user_id":12704,"display_name":"Michael Easter"},"up_vote_count":1,"is_accepted":false,"creation_date":1672967971,"answer_id":75026026,"body":"<p>One unit test would be to expect an exception if the validation fails. To that, consider (working example <a href=\"https://github.com/codetojoy/easter_eggs_for_gradle/tree/main/egg_StackOverflow_75025957\" rel=\"nofollow noreferrer\">here</a>:</p>\n<pre><code>   @Test\n    public void authenticate() throws UserNotFoundException {\n        when(ur.validate(&quot;abc&quot;, &quot;123&quot;)).thenReturn(false);\n\n        // test\n        assertThrows(UserNotFoundException.class, () -&gt;as.authenticate(&quot;abc&quot;, &quot;123&quot;));\n    }\n</code></pre>\n<p><em><strong>Note:</strong></em> updated in accordance with comment, re: JUnit 5.</p>\n"}],"owner":{"user_id":12191587,"display_name":"Alex "},"view_count":87,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1672967001,"question_id":75025957,"body":"<p>I am trying to learn unit testing with Mockito. This is a method I wrote to authenticate the users that tries to log in:</p>\n<pre><code>public class AuthenService {\n    \n    private UserRepo userRepo;  \n\n    public User authenticate(String username, String password) throws UserNotFoundException {\n        User user = null;\n        if (userRepo.validate(username, password)) {\n            user = userRepo.findUsername(username);\n            return user;\n        } else {\n            throw new UserNotFoundException(&quot;User not found!&quot;);\n        }\n    }\n}\n</code></pre>\n<p>userRepo is an interface with these two abstract methods:</p>\n<pre><code>public interface UserRepo{\n    \n    boolean validate(String username, String password);\n    \n    User findUsername(String username);\n    \n}\n</code></pre>\n<p>This is my testing code:</p>\n<pre><code>public class Test {\n\n    AuthenService as;\n    UserRepo ur;\n    \n    @BeforeEach\n    public void init() {\n        ur = mock(UserRepo.class);\n        as = new AuthenService(ur);\n    }\n    \n    @Test\n    public void authenticate() throws UserNotFoundException {\n        when(as.authenticate(&quot;abc&quot;, &quot;123&quot;)).thenThrow(new UserNotFoundException(&quot;User not found!&quot;));\n    }\n}\n</code></pre>\n<p>I suppose as.authenticate(&quot;abc&quot;, &quot;123&quot;) should throw an exception because the DB is empty right now. But I think I am wrong, and I have no idea how to fix it. Can anyone please explain to me? Thank you.</p>\n"},{"tags":["java","spring","spring-boot","package","naming-conventions"],"answers":[{"owner":{"user_id":9025960,"display_name":"rgnt"},"up_vote_count":2,"is_accepted":true,"creation_date":1672950210,"answer_id":75023958,"body":"<ol>\n<li>API (application programming interface) is a name which refers that the program you are writing provides some kind of functionality others can use, such as a library.</li>\n<li>You should always include the program name, as to minimize clashes of class names in the class-path.</li>\n</ol>\n<p>You should use the <code>book-app</code> name as it describes an application, but it's not something mandated.</p>\n"}],"owner":{"user_id":836018,"display_name":"Jack"},"view_count":709,"up_vote_count":2,"accepted_answer_id":75023958,"answer_count":1,"score":2,"creation_date":1672949533,"question_id":75023857,"body":"<p>While creating a Spring Boot app, I thought some points regarding project name and package name in Spring Initializr. The issues:</p>\n<ol>\n<li><p>When creating an app that is used to save and manipulate data, should I use <code>api</code> or <code>app</code> in the name. For example, while creating an app for saving Book data with CRUD operations, should I use <code>book-api</code> or <code>book-app</code> for a better naming convention. As the app does not serve data to public, and will be used individually, I think it seems to be better using <code>book-app</code>. But not sure (also it has endpoints and it may also be considered as API).</p>\n</li>\n<li><p>In Spring Initializr, when I use <code>book-app</code> in the name field, the package name field would be <code>com.example.book-app</code>. But if there is not multiple modules, I think there is no need to use <code>book-app</code> again in this field. For this reason I use just <code>com.example</code> (of course I update the domain properly, it is just for example) in the <code>Package name</code> field without name. Is that ok? Or should I always use Group + Name (<code>com.example.book-app</code>) as in default format?</p>\n</li>\n</ol>\n"},{"tags":["java"],"answers":[{"owner":{"user_id":9025960,"display_name":"rgnt"},"up_vote_count":2,"is_accepted":true,"creation_date":1672944930,"answer_id":75023163,"body":"<p>It's not undefined behavior, but it can slow down your program. Writing and/or reading different fields at the same time (knowing they don't depend on each other) is quite safe to do so. Although this is a textbook example of a <strong>false sharing</strong> and shouldn't be done.</p>\n<p>When accessing a memory location (class and it's members), that location gets copied into CPU cache-lines for faster access. If more threads try to access that memory location at the same time, it can invalidate these cache-lines to maintain memory coherency and thus slow down the execution.</p>\n<p><a href=\"https://docs.oracle.com/cd/E19205-01/819-5270/aewcy/index.html\" rel=\"nofollow noreferrer\">From oracle docs</a>:</p>\n<blockquote>\n<p>However, simultaneous updates of individual elements in the same cache line coming from different processors invalidates entire cache lines, even though these updates are logically independent of each other. Each update of an individual element of a cache line marks the line as invalid. Other processors accessing a different element in the same line see the line marked as invalid. They are forced to fetch a more recent copy of the line from memory or elsewhere, even though the element accessed has not been modified. This is because cache coherency is maintained on a cache-line basis, and not for individual elements. As a result there will be an increase in interconnect traffic and overhead. Also, while the cache-line update is in progress, access to the elements in the line is inhibited.</p>\n</blockquote>\n<p><a href=\"https://jenkov.com/tutorials/java-concurrency/false-sharing.html\" rel=\"nofollow noreferrer\">Jenkov has great resource on this</a>(They talk about multi-cpu systems, but it's still applicable as platform threads share the cache-lines).</p>\n"}],"owner":{"user_id":503510,"display_name":"Tintin"},"view_count":57,"up_vote_count":2,"accepted_answer_id":75023163,"answer_count":1,"score":2,"creation_date":1672941986,"question_id":75022618,"body":"<p>Is Updating (or/and reading) different fields of a shared object in different threads concurrently thread safe? And if it is, is it a good practice?</p>\n<p>NOTE: <em><strong>Assuming we know that at any time no two (or more) threads will act (read or write) on the same field/property of this shared mutable object.</strong></em></p>\n<p>E.G consider this code - is updating and reading the different fields of the shared mutable object <code>emp</code> in threads <code>t1</code>, <code>t2</code> and <code>t3</code> concurrently thread safe and an accepted practice?</p>\n<pre><code>package concurrency;\n\nimport lombok.AllArgsConstructor;\nimport lombok.Getter;\nimport lombok.NoArgsConstructor;\nimport lombok.Setter;\n\npublic class SharedObjectApp {\n\n  Employee emp = new Employee(001, 100000, 32);\n\n  public static void main(String args[]){\n      new App().doSomething();\n  }\n\n  public static class App{\n\n      Employee emp = new Employee(001, 100000, 32);\n\n      public void doSomething(){\n\n          Thread t1 = new Thread(new Runnable(){\n              @Override\n              public void run(){\n                  emp.setSalary(emp.getSalary() + 1000);\n              }\n          });\n\n          Thread t2 = new Thread(new Runnable() {\n              @Override\n              public void run() {\n                  emp.setExp(emp.getExp() + 1);\n              }\n          });\n\n          Thread t3 = new Thread(new Runnable() {\n              @Override\n              public void run() {\n                  for(int i = 0; i &lt; 10; i ++){\n                      System.out.println(emp.getId());\n                  }\n              }\n          });\n\n          // is this thread safe?\n\n          t1.start(); //updating salary\n          t2.start(); //updating experience\n          t3.start(); //getting id\n      }\n  }\n\n  @NoArgsConstructor\n  @AllArgsConstructor\n  @Getter\n  @Setter\n  public static class Employee {\n    int id;\n    double salary;\n    double exp;\n  }\n\n}\n</code></pre>\n"},{"tags":["java","spring","spring-boot"],"comments":[{"owner":{"user_id":10342150,"display_name":"robertobatts"},"edited":false,"comment_id":132388026,"body":"Is it working correctly on &quot;/hello&quot;?"},{"owner":{"user_id":20937437,"display_name":"Seungje Mun"},"edited":false,"comment_id":132388386,"body":"yes it&#39;s working on /hello url.."}],"answers":[{"owner":{"user_id":20937437,"display_name":"Seungje Mun"},"up_vote_count":2,"is_accepted":false,"creation_date":1672932391,"answer_id":75020751,"body":"<p>I found a answer.\nThere was no mapped paged with &quot;/&quot;.\nAfter I map the &quot;/&quot; page, it work.\nI thought that it should be shown White page, but it seems like if start page is white page, then it print log in page even though there is permitted by permitAll.</p>\n<pre><code>@RestController\npublic class HelloController {\n    @GetMapping(&quot;/hello&quot;)\n    public String hello(){\n        return &quot;hello&quot;;\n    }\n\n    @GetMapping(&quot;/hello2&quot;)\n    public String hello2(){\n        return &quot;hello2&quot;;\n    }\n//\n//    @GetMapping(&quot;/&quot;)\n//    public String start(){\n//        return &quot;startpage&quot;;\n//    }\n}\n</code></pre>\n"}],"owner":{"user_id":20937437,"display_name":"Seungje Mun"},"view_count":486,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1672929086,"question_id":75020008,"body":"<p>I'm making website and I have to use SecurityFilterChain.\nBTW, the start page - localhost:8080/ is always secured.\nWhen I enter localhost:8080/, browser always want me to sign in.\nHow can I adjust permitAll on &quot;/&quot; pattern?</p>\n<pre><code>public class SecurityConfig {\n\n    @Bean\n    public SecurityFilterChain web(HttpSecurity http) throws Exception {\n        return http\n                .authorizeHttpRequests(auth -&gt; {\n                    auth.requestMatchers(&quot;/&quot;, &quot;/hello&quot;).permitAll();\n                    auth.anyRequest().authenticated();\n                })\n                .formLogin(Customizer.withDefaults())\n                .build();\n    }\n}\n</code></pre>\n<p>When I entered localhost:8080/, I expect to see the page, not sign in page.</p>\n"},{"tags":["java","minecraft","bukkit","minecraft-commands"],"answers":[{"owner":{"user_id":10952503,"display_name":"Elikill58"},"up_vote_count":1,"is_accepted":false,"creation_date":1672922457,"answer_id":75018539,"body":"<p>You should follow <a href=\"https://www.spigotmc.org/wiki/create-a-simple-command/\" rel=\"nofollow noreferrer\">wiki</a> to create a command.</p>\n<ol>\n<li>Use the class which is <code>extends JavaPlugin</code> as main class that register command and multiple others. This class should contains a <code>onEnable()</code> method which register commands.</li>\n<li>Register command with <code>getCommand(&quot;daytime&quot;).setExecutor(new DayTimeCommand());</code></li>\n<li>Add it in the <code>plugin.yml</code> file like:</li>\n</ol>\n<pre class=\"lang-yaml prettyprint-override\"><code>commands:\n   daytime:\n</code></pre>\n<ol start=\"4\">\n<li>Create the class <code>DayTimeCommand</code> that will be like:</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>public class DayTimeCommand implements CommandExecutor {\n\n    // This method is called, when somebody uses our command\n    @Override\n    public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n        getServer().getWorlds().get(0).setTime(1000); // set time to morning (1000 ticks)\n        sender.sendMessage(&quot;The time has been set to morning.&quot;);\n        return false;\n    }\n}\n</code></pre>\n<p>PS: I suggest you to change the name of package/class, and use <code>domenico.bello</code> as package, and <code>Bello</code> or <code>Main</code> as class name.</p>\n"},{"owner":{"user_id":14375462,"display_name":"console"},"up_vote_count":1,"is_accepted":false,"creation_date":1674398042,"answer_id":75201266,"body":"<p>Use <code>plugin.yml</code> instead of <code>plugin.xml</code></p>\n"}],"owner":{"user_id":20936319,"display_name":"Domenico Pezzullo"},"view_count":82,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1672920714,"question_id":75018187,"body":"<p>I'm trying to make a Minecraft plugin that does <code>/daytime</code>. The plugin gets recognized by <code>/pl</code>, but if I execute the command it does not work.</p>\n<p>I tried modifying and moving the <code>plugin.xml</code> thinking Bukkit did not know where the main class was.</p>\n<pre><code>package domenicoplugin.domenicopluginbello;\n\nimport org.bukkit.plugin.java.JavaPlugin;\nimport org.bukkit.command.Command;\nimport org.bukkit.command.CommandSender;\nimport org.bukkit.plugin.java.JavaPlugin;\n\npublic final class Domenicopluginbello extends JavaPlugin {\n\n        @Override\n        public boolean onCommand(CommandSender sender, Command command, String label, String[] args) {\n            if (command.getName().equalsIgnoreCase(&quot;daytime&quot;)) {\n                getServer().getWorlds().get(0).setTime(1000); // set time to morning (1000 ticks)\n                sender.sendMessage(&quot;The time has been set to morning.&quot;);\n                return true;\n            }\n            return false;\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","string","addition","integer-arithmetic","string-conversion"],"answers":[{"owner":{"user_id":2422776,"display_name":"Mureinik"},"up_vote_count":0,"is_accepted":false,"creation_date":1672913008,"answer_id":75016720,"body":"<p>The loop iterates over <code>--T</code>, and then you use <code>T</code> as the array index for the result, meaning you're getting the results in <strong>reverse</strong> order. One way to solve this is to use a straight-up ascending for loop and use its index as the array index:</p>\n<pre><code>for (int i = 0; i &lt; T; ++i) {\n    // The logic remains unchanged\n    String arr[] = sc.nextLine().split(&quot; &quot;);\n\n    System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\n    System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\n    System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\n\n    // i is used for the array index, not T\n    if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\n        output[i] = &quot;YES&quot;;\n    } else {\n        output[i] = &quot;NO&quot;;\n    }\n}\n</code></pre>\n"},{"owner":{"user_id":4216641,"display_name":"Turing85"},"up_vote_count":2,"is_accepted":true,"creation_date":1672913203,"answer_id":75016762,"body":"<p>The variable <code>T</code> runs &quot;backwards&quot;; it starts at - in the example - <code>2</code> and ends at <code>0</code>. Variable <code>T</code> is also used to index the <code>output</code> array. This means that:</p>\n<ul>\n<li><code>output[2]</code> correlates with the 1st iteration (i.e. the input <code>40 40 100</code>),</li>\n<li><code>output[1]</code> correlates with the 2nd iteration (i.e. the input <code>45 45 90</code>), and</li>\n<li><code>output[0]</code> correlates with the 3rd iteration (i.e. the input <code>180 1 1</code>).</li>\n</ul>\n<p>Now we see that - in fact - the value of <code>output[0]</code> (being <code>&quot;NO&quot;</code>) is correct since <code>180 + 1 + 1 = 182 != 180</code>.</p>\n<p>I rewrote the program such that the <code>output</code> is stored in the order the values are calculates:</p>\n<pre><code>class Ideone {\n  public static void main(String[] args) {\n    Scanner sc = new Scanner(System.in);\n    int num = Integer.parseInt(sc.nextLine().split(&quot; &quot;)[0]);\n    String[] output = new String[num];\n    for (int index = 0; index &lt; num; ++index) {\n      String arr[] = sc.nextLine().split(&quot; &quot;);\n\n      System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\n      System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\n      System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\n      if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\n        output[index] = &quot;YES&quot;;\n      } else {\n        output[index] = &quot;NO&quot;;\n      }\n    }\n    System.out.println(Arrays.toString(output));\n  }\n}\n</code></pre>\n<p>This then gives the output:</p>\n<pre><code>...\n[YES, YES, NO]\n</code></pre>\n<p><a href=\"https://ideone.com/rsO8t4\" rel=\"nofollow noreferrer\"><kbd><code>Ideone.com</code> demo</kbd></a></p>\n<hr />\n<p>Some remarks:</p>\n<ul>\n<li><p>We should use descriptive names for variables (e.g. <code>String[] arr</code> could be <code>String[] userInputs</code>)</p>\n</li>\n<li><p>variable names should be writte in <code>lowerCamelCase</code> (<code>int T = ...</code> -&gt; <code>int t = ...</code>)</p>\n</li>\n<li><p>Instead of parsing the <code>String</code>s over and over again, I would suggest to parse them once, and then - for example - store them in a <code>List&lt;Integer&gt;</code> and work with them, e.g.:</p>\n<pre><code>List&lt;Integer&gt; values = Arrays.stream(arr)\n    .mapToInt(Integer::parseInt)\n    .boxed()\n    .toList();\n</code></pre>\n</li>\n<li><p>While possible, it is uncommon to write the array-brackets (<code>[]</code>) after the variable name. We normally write them after the type since they influence the type (<code>String arr[]</code> -&gt; <code>String[] arr</code>).</p>\n</li>\n</ul>\n"},{"owner":{"user_id":13302222,"display_name":"Marzen"},"up_vote_count":0,"is_accepted":false,"creation_date":1672913234,"answer_id":75016773,"body":"<p>you've assigned YES/NO into the array <code>output</code> with a reserved sort.when you are using <code>--T</code> the index of <code>output</code> in loop was 2,1,0 so the values in output are [&quot;NO&quot;,&quot;YES&quot;,&quot;YES]. that's why you get a wrong result.</p>\n<p>You can change the while loop to a simple for loop.\n<code>for(int i=0;i&lt;output.size;i++</code>)` and assign YES/NO to output[i]</p>\n"}],"owner":{"user_id":20746216,"display_name":"JavaBoi"},"view_count":67,"up_vote_count":2,"accepted_answer_id":75016762,"answer_count":3,"score":2,"creation_date":1672912397,"question_id":75016577,"body":"<p>I was solving a question on Codechef and I encountered this problem.</p>\n<p>Here is the link to the question. <a href=\"https://www.codechef.com/LP0TO101/problems/FLOW013\" rel=\"nofollow noreferrer\">https://www.codechef.com/LP0TO101/problems/FLOW013</a></p>\n<p>Basically we are given three angles and we need to check if their sum is 180 and therefore it is a triangle, and if it is we need to print YES or else we need to print NO.</p>\n<p>We are given input in the following format.</p>\n<pre><code>3 \n40 40 100\n45 45 90\n180 1 1\n</code></pre>\n<p>[Note: There is a blank string(&quot; &quot;) right after 3.]</p>\n<p>This is my source code.</p>\n<pre><code>import java.util.Scanner;\nimport java.util.stream.IntStream;\n\nclass Codechef {\n    public static void main(String[] args) throws java.lang.Exception {\n\n        Scanner sc = new Scanner(System.in);\n        int T = Integer.parseInt(sc.nextLine().split(&quot; &quot;)[0]);\n        String[] output = new String[T];\n        while (--T &gt;= 0) {\n            String arr[] = sc.nextLine().split(&quot; &quot;);\n\n            System.out.println(&quot;arr[0]: &quot; + Integer.parseInt(arr[0]));\n            System.out.println(&quot;arr[1]: &quot; + Integer.parseInt(arr[1]));\n            System.out.println(&quot;arr[2]: &quot; + Integer.parseInt(arr[2]));\n            if ((Integer.parseInt(arr[0]) + Integer.parseInt(arr[1]) + Integer.parseInt(arr[2])) == 180) {\n                output[T] = &quot;YES&quot;;\n            } else {\n                output[T] = &quot;NO&quot;;\n            }\n        }\n\n        IntStream.range(0, output.length).forEach(h -&gt; System.out.println(output[h]));\n\n    }\n}\n\n\n</code></pre>\n<p>The output it is returning on Codechef is:</p>\n<pre><code>arr[0]: 40\narr[1]: 40\narr[2]: 100\narr[0]: 45\narr[1]: 45\narr[2]: 90\narr[0]: 180\narr[1]: 1\narr[2]: 1\nNO\nYES\nYES\n</code></pre>\n<p>What is wrong here, please help.</p>\n<blockquote>\n<p>My question is how come arr[0]: 40 + arr[1]: 40 + arr[2]: 100 is not equal to 180, I mean 40 + 40 + 100 should be equal to 180, so what is wrong.</p>\n</blockquote>\n<p>When in the Eclipse IDE I gave the input of:</p>\n<pre><code>1\n40 40 100\n</code></pre>\n<p>It showed me output of:</p>\n<pre><code>arr[0]: 40\narr[1]: 40\narr[2]: 100\nYES\n</code></pre>\n<p>But when I give the same output there, it doesn't executes fully and keeps processing while it is incomplete and shows me output of(I am inserting the image):</p>\n<p><img src=\"https://i.stack.imgur.com/SrWzk.png\" alt=\"enter image description here\" /></p>\n<p>Note: The red square in the right corner of the image shows that it is still executing.</p>\n<p>However when I have removed the printing statements and gave the same input in eclipse, it showed me an output of: (Inserting an image again)</p>\n<p><img src=\"https://i.stack.imgur.com/fBZoC.png\" alt=\"enter image description here\" /></p>\n<p>I hope you have understood my problem.</p>\n<blockquote>\n<p>My question again is how come arr[0]: 40 + arr[1]: 40 + arr[2]: 100 is not equal to 180, I mean 40 + 40 + 100 should be equal to 180, what is wrong.\nAnd when I am executing it individually it is showing me the right output but when I do the test case on Codechef it is showing the opposite answer.</p>\n</blockquote>\n<p>What is wrong here?</p>\n"},{"tags":["java","eclipse","jsp","jakarta-ee","java-ee-5"],"comments":[{"owner":{"user_id":6505250,"display_name":"howlger"},"edited":false,"comment_id":132380774,"body":"The encoding for a new JSP file can be configured in the preferences <i>Web &gt; JSP Files</i>. In the <i>New JSP File</i> dialog click <i>Next</i> to choose a template or click the <i>JSP Templates</i> link to go where you can change the template."},{"owner":{"user_id":3728901,"display_name":"Rapha&#235;l Colantonio"},"edited":false,"comment_id":132380817,"body":"You can post your answer, I will accept it. How to set value for <code>${encoding}</code> ?"}],"answers":[{"owner":{"user_id":6505250,"display_name":"howlger"},"up_vote_count":2,"is_accepted":false,"creation_date":1672911042,"answer_id":75016301,"body":"<p>In the <strong><em>New JSP File</em> dialog click <em>Next</em></strong></p>\n<ul>\n<li>to <strong>choose a template</strong> or</li>\n<li>click the <strong><em>JSP Templates</em> link</strong> to go to the preferences <em>Web &gt; JSP Files &gt; Editor &gt; Templates</em> where you can <strong>change the template for JSP</strong>.</li>\n</ul>\n<p>By default, in the JSP templates the variable <strong><code>${encoding}</code></strong> is used which can be configured in the <strong>preferences <em>Web &gt; JSP Files</em></strong>.</p>\n<p><a href=\"https://i.stack.imgur.com/CcY8P.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/CcY8P.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/aZcBI.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/aZcBI.png\" alt=\"enter image description here\" /></a></p>\n<p>sample result</p>\n<pre><code>&lt;%@ page language=&quot;java&quot; contentType=&quot;text/html; charset=UTF-8&quot;\n    pageEncoding=&quot;UTF-8&quot;%&gt;\n&lt;!DOCTYPE html&gt;\n&lt;html&gt;\n&lt;head&gt;\n&lt;meta charset=&quot;UTF-8&quot;&gt;\n&lt;title&gt;Insert title here&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n\n&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n"},{"owner":{"user_id":2384656,"display_name":"user-jose garcia-2384656"},"up_vote_count":0,"is_accepted":false,"creation_date":1681517148,"answer_id":76019721,"body":"<p>If you are working in a Dynamic Web Project in eclipse IDE for web development, then click the &quot;Window&quot; menu tab, then &quot;Preferences&quot;, then the Preferences window comes up, then in the navigation column (left), click &quot;Web&quot; &gt; &quot;Editor&quot; &gt; &quot;Templates&quot;. Then, click on the the &quot;New&quot; template you want to change and click the &quot;Edit&quot; button. The window that allows you to change the tags comes up. Make the changes, then click OK, and then click &quot;Apply and Close&quot; and it's done.\n<a href=\"https://i.stack.imgur.com/ufcm7.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/ufcm7.jpg\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"user_id":3728901,"display_name":"Rapha&#235;l Colantonio"},"view_count":77,"up_vote_count":3,"answer_count":2,"score":2,"creation_date":1672906849,"question_id":75015563,"body":"<p>I am using Eclipse IDE 2022-06 , Java/JDK 1.6, Windows 10 pro x64, Spring 2.5.6 .</p>\n<p><a href=\"https://i.stack.imgur.com/wN6Lp.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/wN6Lp.png\" alt=\"enter image description here\" /></a></p>\n<p>I need encoding <code>UTF-8</code> by default, not <code>ISO-8859-1</code>. I don't want edit many files, many time manually. How to change template when create new JSP file?</p>\n"},{"tags":["java","database","database-migration","liquibase"],"answers":[{"owner":{"user_id":15486677,"display_name":"Daryl Doak"},"up_vote_count":2,"is_accepted":true,"creation_date":1672872115,"answer_id":75012121,"body":"<p>Once a changeset has been executed, it cannot be modified (assuming runOnChange is not used).  If you modify an already executed changeset you will get a checksum error preventing further deployments.</p>\n<p>The best option is to create new changesets that contain the updated sql statements.</p>\n"},{"owner":{"user_id":173149,"display_name":"gavenkoa"},"up_vote_count":0,"is_accepted":false,"creation_date":1684416189,"answer_id":76281276,"body":"<p>You could mark a changeset as valid with the updated checksum. It won't be applied if already applied but will stop to complain about checksum mismatch ))</p>\n<p>There is even magical hash to ignore any edits: <code>1:any</code> ))</p>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/36547003/modify-sql-changeset\">Modify SQL changeset</a></li>\n</ul>\n"}],"owner":{"user_id":17029505,"display_name":"idelkaro"},"view_count":79,"up_vote_count":2,"accepted_answer_id":75012121,"answer_count":2,"score":2,"creation_date":1672832971,"question_id":75005007,"body":"<p>I have a lot of changelog files with the initial data for my database. Before all the tables were located in Postgres public schema, but now I have distributed them between different schemas, so that changes with initial data can't reach the tables.</p>\n<p>Can I just change all the old files with initial data and add there schemaName=&quot;my_schema&quot; or there is another way to solve the problem?</p>\n"},{"tags":["java","android","deep-linking","firebase-dynamic-links","android-deep-link"],"answers":[{"owner":{"user_id":11717481,"display_name":"user11717481"},"up_vote_count":2,"is_accepted":true,"creation_date":1672894843,"answer_id":75014009,"body":"<p>first you need to make sure you <code>URI</code> is formulated like</p>\n<p><code>https://your_subdomain.page.link/?link=your_deep_link&amp;apn=package_name[&amp;amv=minimum_version][&amp;afl=fallback_link] </code></p>\n<p>method <code>getDynamicLink</code> returns null if a dynamic link is not previously captured or is in the Uri, the above link format is not necessarily to be like that but it should match to the intent filters you have previously defined.</p>\n<p>AndroidManifest.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;manifest xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;&gt;\n\n    &lt;application\n        android:allowBackup=&quot;true&quot;\n        android:icon=&quot;@mipmap/ic_launcher&quot;\n        android:label=&quot;@string/app_name&quot;\n        android:supportsRtl=&quot;true&quot;\n        android:theme=&quot;@style/AppTheme&quot; &gt;\n\n        &lt;activity android:name=&quot;.EntryChoiceActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.MAIN&quot; /&gt;\n\n                &lt;category android:name=&quot;android.intent.category.LAUNCHER&quot; /&gt;\n            &lt;/intent-filter&gt;\n        &lt;/activity&gt;\n\n        &lt;activity android:name=&quot;.java.MainActivity&quot;\n            android:exported=&quot;true&quot;&gt;\n            &lt;!-- [START link_intent_filter] --&gt;\n            &lt;intent-filter&gt;\n                &lt;action android:name=&quot;android.intent.action.VIEW&quot;/&gt;\n                &lt;category android:name=&quot;android.intent.category.DEFAULT&quot;/&gt;\n                &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot;/&gt;\n                &lt;data\n                    android:host=&quot;link&quot;\n                    android:scheme=&quot;your_subdomain.page.link&quot;/&gt;\n            &lt;/intent-filter&gt; \n        &lt;/activity&gt;\n    &lt;/application&gt;\n\n&lt;/manifest&gt;\n</code></pre>\n<p>also you should add query parameters to the link field in the firebase console, <code>https://your_subdomain.page.link/?link=your_deep_link&amp;apn=package_name[&amp;amv=minimum_version][&amp;afl=fallback_link]</code> and deep link remain short <code>https://your_subdomain.page.link/example</code> now to reproduce an adb test for a intent filters like:</p>\n<pre><code>&lt;activity\n    android:name=&quot;.ui.activities.MyActivity&quot;\n    android:label=&quot;@string/title_activity&quot;\n    android:screenOrientation=&quot;portrait&quot;&gt;\n    &lt;!-- ATTENTION: This intent was auto-generated. Follow instructions at\n    https://g.co/AppIndexing/AndroidStudio to publish your Android app deep links. --&gt;\n    &lt;intent-filter&gt;\n        &lt;action android:name=&quot;android.intent.action.VIEW&quot; /&gt;\n\n        &lt;category android:name=&quot;android.intent.category.DEFAULT&quot; /&gt;\n        &lt;category android:name=&quot;android.intent.category.BROWSABLE&quot; /&gt;\n        &lt;!-- ATTENTION: This data URL was auto-generated. We recommend that you use the HTTP scheme.\n        TODO: Change the host or pathPrefix as necessary. --&gt;\n        &lt;data\n            android:host=&quot;link&quot;\n            android:scheme=&quot;your_subdomain.page.link&quot; /&gt;\n    &lt;/intent-filter&gt;\n&lt;/activity&gt;\n</code></pre>\n<p>use:</p>\n<p><code>adb shell am start -W -a android.intent.action.VIEW -d &quot;your_subdomain.page.link://link?key=category_parent_id\\&amp;value=92\\&amp;title=test&quot; com.app_name.android</code></p>\n<p>Hope this help thanks.</p>\n"}],"owner":{"user_id":5723903,"display_name":"Devesh Kumawat"},"view_count":76,"up_vote_count":2,"accepted_answer_id":75014009,"answer_count":1,"score":2,"creation_date":1672752896,"question_id":74994090,"body":"<p><a href=\"https://i.stack.imgur.com/qi7lN.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/qi7lN.png\" alt=\"enter image description here\" /></a>We are not access share url from firebase using &quot;https://firebase.google.com/docs/dynamic-links/android/receive&quot;</p>\n<pre><code>FirebaseDynamicLinks.getInstance()\n        .getDynamicLink(getIntent())\n        .addOnSuccessListener(this, new OnSuccessListener&lt;PendingDynamicLinkData&gt;() {\n            @Override\n            public void onSuccess(PendingDynamicLinkData pendingDynamicLinkData) {\n                // Get deep link from result (may be null if no link is found)\n                Uri deepLink = null;\n                if (pendingDynamicLinkData != null) {\n                    deepLink = pendingDynamicLinkData.getLink();\n\n                    Log.e(&quot;deepLink&quot;,&quot;&quot;+deepLink.toString());\n                }\n\n\n                // Handle the deep link. For example, open the linked\n                // content, or apply promotional credit to the user's\n                // account.\n                // ...\n\n                // ...\n            }\n        })\n        .addOnFailureListener(this, new OnFailureListener() {\n            @Override\n            public void onFailure(@NonNull Exception e) {\n                Log.w(TAG, &quot;getDynamicLink:onFailure&quot;, e);\n            }\n        });\n</code></pre>\n<p>this method of firebase is allways return null in &quot;onSuccess&quot;.</p>\n"},{"tags":["java"],"comments":[{"owner":{"user_id":5133585,"display_name":"Sweeper"},"edited":false,"comment_id":132333131,"body":"Subclass field initialisers are run after the superclass constructor, so this is to be expected."},{"owner":{"user_id":19181948,"display_name":"Kevin_557"},"edited":false,"comment_id":132333171,"body":"ty, i def a setup() to register settings, it worked"}],"answers":[{"owner":{"user_id":5133585,"display_name":"Sweeper"},"up_vote_count":2,"is_accepted":true,"creation_date":1672716683,"answer_id":74988819,"body":"<p>Subclass field initialisers are run after the superclass constructor, so this is to be expected. See also <a href=\"https://stackoverflow.com/questions/23093470/java-order-of-initialization-and-instantiation\">Java initialisation order</a>.</p>\n<p>When the <code>Feature</code> constructor is run, the annotated fields have not been initialised yet, so they are all null.</p>\n<p>An easy way to fix it would be to require subclasses to call something like a <code>registerSettings</code> in their own constructor, at which point, all the subclass' fields would have been initialise.</p>\n<pre><code>// in Feature...\npublic final void registerSettings() {\n    try {\n        Class&lt;SettingAnno&gt; anno = SettingAnno.class;\n        for (Field field : this.getClass().getDeclaredFields()) {\n            if (field.isAnnotationPresent(anno)) {\n                Setting setting = (Setting) field.get(this);\n                this.settings.add(setting);\n            }\n        }\n    }\n    catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<pre><code>// in FeatureChild...\n\npublic FeatureChild() {\n    registerSettings();\n    // ...\n}\n</code></pre>\n"}],"owner":{"user_id":19181948,"display_name":"Kevin_557"},"view_count":82,"up_vote_count":2,"accepted_answer_id":74988819,"answer_count":1,"score":2,"creation_date":1672715482,"question_id":74988742,"body":"<p>i try to use annotation to register settings for a Feature, but i cant reflect the setting field, what i did wrong, ty</p>\n<p>this is Feature init, i want add settings</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Feature() {\n    try {\n        Class&lt;SettingAnno&gt; anno = SettingAnno.class;\n        for (Field field : this.getClass().getDeclaredFields()) {\n            if (field.isAnnotationPresent(anno)) {\n                Setting setting = (Setting) field.get(this);\n                this.settings.add(setting);\n            }\n        }\n    }\n    catch (Exception e) {\n        e.printStackTrace();\n    }\n}\n</code></pre>\n<p>but when i use <code>Setting setting = (Setting) field.get(this);</code>, it actually will be set to 'null'</p>\n<p>the Feature child:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public final class FeatureChild extends Feature {\n    @SettingAnno(&quot;setting1&quot;)\n    public final BooleanSetting setting1 = new BooleanSetting(true);\n}\n</code></pre>\n<p>BoolenSetting is Setting child</p>\n<p>this is the annotation</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Target(ElementType.FIELD)\n@Retention(RetentionPolicy.RUNTIME)\npublic @interface SettingAnno {\n    String value();\n}\n</code></pre>\n"},{"tags":["java","mysql","sql","rowset"],"answers":[{"owner":{"user_id":1602555,"display_name":"Karol Dowbecki"},"up_vote_count":2,"is_accepted":false,"creation_date":1672684030,"answer_id":74985851,"body":"<p><code>com.sun.rowset.CachedRowSetImpl</code> is a JDBC implementation detail. By historic convention all the classes under <code>com.sun</code> package are considered implementation detail. The distinction between JDK implementation detail and interface was enforced with the introduction of <a href=\"https://www.oracle.com/corporate/features/understanding-java-9-modules.html\" rel=\"nofollow noreferrer\">Java 9 module system</a>.</p>\n<p>In short you don't want to write your code depending on the JDK implementation details as they can change without warning.</p>\n<p>See <a href=\"https://www.codejava.net/java-se/jdbc/how-to-use-cachedrowset-in-jdbc\" rel=\"nofollow noreferrer\">How to Use CachedRowSet in JDBC</a>, section 3. Creating a CachedRowSet Object,  which shows how to create the same object using <code>RowSetProvider</code> and a <code>CachedRowSet</code> interface:</p>\n<pre><code>RowSetFactory rsf = RowSetProvider.newFactory();\nCachedRowSet crs = rsf.createCachedRowSet();\n</code></pre>\n"}],"owner":{"display_name":"user20913388"},"view_count":116,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1672680948,"question_id":74985434,"body":"<p>When migrating my project to Java 19, I am getting this error related to our use of RowSet:</p>\n<blockquote>\n<p>cannot access class com.sun.rowset.CachedRowSetImpl (in module java.sql.rowset) because module java.sql.rowset does not export com.sun.rowset to module</p>\n</blockquote>\n<p>and this is my code</p>\n<pre><code>import javax.sql.rowset.*;\nimport com.sun.rowset.CachedRowSetImpl;\nimport java.sql.*;\nimport javax.sql.rowset.CachedRowSet;\npublic static ResultSet dbExecuteQuery(String queryStmt) throws SQLException, ClassNotFoundException {\n    //Declare statement, resultSet and CachedResultSet as null\n    Statement stmt = null;\n    ResultSet resultSet = null;\n    CachedRowSetImpl crs = null;\n    try {\n        //Connect to DB (Establish Oracle Connection)\n        dbConnect();\n        System.out.println(&quot;Select statement: &quot; + queryStmt + &quot;\\n&quot;);\n\n        //Create statement\n        stmt = conn.createStatement();\n\n        //Execute select (query) operation\n        resultSet = stmt.executeQuery(queryStmt);\n\n        //CachedRowSet Implementation\n        //In order to prevent &quot;java.sql.SQLRecoverableException: Closed Connection: next&quot; error\n        //We are using CachedRowSet\n        crs = new CachedRowSetImpl();\n        crs.populate(resultSet);\n    } catch (SQLException e) {\n        System.out.println(&quot;Problem occurred at executeQuery operation : &quot; + e);\n        throw e;\n    } finally {\n        if (resultSet != null) {\n            //Close resultSet\n            resultSet.close();\n        }\n        if (stmt != null) {\n            //Close Statement\n            stmt.close();\n        }\n        //Close connection\n        dbDisconnect();\n    }\n    //Return CachedRowSet\n    return crs;\n}\n</code></pre>\n<p>I try because I don't know how to solve my problem and i expect that this problem will be solve</p>\n"},{"tags":["java","json","protocol-buffers"],"comments":[{"owner":{"user_id":11002,"display_name":"tgdavies"},"edited":false,"comment_id":132316912,"body":"Hand write some code to translate from one POJO to the other. (I assume you don&#39;t create a <code>Printer</code> for each object)"},{"owner":{"user_id":1709417,"display_name":"Nishant Kumar"},"edited":false,"comment_id":132317133,"body":"@tgdavies I am creating <code>Printer</code> for each object. can i resue it? (i didn&#39;t find any doc that says so). <code>Printer printer = JsonFormat.printer().printingEnumsAsInts().omittingInsignifi&zwnj;&#8203;cantWhitespace();</code>. this is used by multiple threads. is it thread-safe?"},{"owner":{"user_id":11002,"display_name":"tgdavies"},"edited":false,"comment_id":132317291,"body":"I don&#39;t know whether it&#39;s thread-safe. I would guess that it is."},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":132322331,"body":"Don&#39;t just copyu from one pojo to another. Don&#39;t do an intermediate step for JSON that will only take resources. Use something like MapStruct to generate mappers."}],"answers":[{"owner":{"user_id":3574093,"display_name":"Florian Enner"},"up_vote_count":2,"is_accepted":false,"creation_date":1672663489,"answer_id":74982587,"body":"<p>I ran into some performance issues as well and ended up writing the <a href=\"https://github.com/HebiRobotics/QuickBuffers\" rel=\"nofollow noreferrer\">QuickBuffers</a> library. It generates dedicated JSON serialization methods (i.e. no reflection) and should give you a 10-30x speedup. It can be used side-by-side with Google's implementation. The code should look something like this:</p>\n<pre><code>    // Initialization (objects can be reused if desired)\n    AdxOpenRtb.BidRequest bidRequestProto = AdxOpenRtb.BidRequest.newInstance();\n    ProtoSource protoSource = ProtoSource.newArraySource();\n    JsonSink jsonSink = JsonSink.newInstance().setWriteEnumsAsInts(true);\n\n    // Convert Protobuf to JSON\n    bidRequestProto.clearQuick() // or ::parseFrom if you want a new object\n            .mergeFrom(protoSource.setInput(request))\n            .writeTo(jsonSink.clear());\n\n    // Use the raw json bytes\n    RepeatedByte jsonBytes = jsonSink.getBytes();\n</code></pre>\n<p><a href=\"https://github.com/HebiRobotics/QuickBuffers/blob/490622c418a630be5d5de2a87c14bdc081684fe9/benchmarks/src/main/java/us/hebi/quickbuf/benchmarks/json/JsonSinkBenchmark.java\" rel=\"nofollow noreferrer\">JsonSinkBenchmark</a> has some sample code for replacing the built-in JSON encoder with more battle-tested Gson/Jackson backends.</p>\n<p><strong>Edit</strong>: if you're doing this within a single process and are worried about performance, you're better off writing or generating code to convert the Java objects directly. JSON is not a very efficient format to go through.</p>\n"},{"owner":{"user_id":1709417,"display_name":"Nishant Kumar"},"up_vote_count":0,"is_accepted":true,"creation_date":1673855026,"answer_id":75131388,"body":"<p>I end up using <code>MapStruct</code> as suggested by some of you (@M.Deinum).</p>\n<p>new code:</p>\n<pre><code>byte[] request = ..; // msg received\n\n// convert to intermediate POJO\nAdxOpenRtb.BidRequest bidRequestProto = AdxOpenRtb.BidRequest.parseFrom(request, reg);\n\n// direct conversion from protobuf Pojo to my custom Pojo\nBidRequest bidRequest = BidRequestMapper.INSTANCE.adxOpenRtbToBidRequest(bidRequestProto);\n\n</code></pre>\n<p>Code snippet of <code>BidRequestMapper</code>:</p>\n<pre><code>@Mapper(\n    collectionMappingStrategy = CollectionMappingStrategy.ADDER_PREFERRED, nullValueCheckStrategy = NullValueCheckStrategy.ALWAYS,\n    unmappedSourcePolicy = ReportingPolicy.WARN, unmappedTargetPolicy = ReportingPolicy.WARN)\n@DecoratedWith(BidRequestMapperDecorator.class)\npublic abstract class BidRequestMapper {\n\n  public static final BidRequestMapper INSTANCE = Mappers.getMapper(BidRequestMapper.class);\n\n  @Mapping(source = &quot;impList&quot;, target = &quot;imp&quot;)\n  @Mapping(target = &quot;impOverride&quot;, ignore = true)\n  @Mapping(target = &quot;ext&quot;, ignore = true)\n  public abstract BidRequest adxOpenRtbToBidRequest(AdxOpenRtb.BidRequest adxOpenRtb);\n...\n...\n}\n\n// manage proto extensions\nabstract class BidRequestMapperDecorator extends BidRequestMapper {\n  private final BidRequestMapper delegate;\n\n  BidRequestMapperDecorator(BidRequestMapper delegate) {\n    this.delegate = delegate;\n  }\n\n  @Override\n  public BidRequest adxOpenRtbToBidRequest(AdxOpenRtb.BidRequest bidRequestProto) {\n    // Covert protobuf msg to basic bid request object\n    BidRequest bidRequest = delegate.adxOpenRtbToBidRequest(bidRequestProto);\n...\n...\n  }\n}\n</code></pre>\n<p>The new approach is <strong>20-50x faster</strong> in my local test environment.</p>\n<p>It's worth mentioning that <code>MapStruct</code> is an <strong>annotation processor</strong> which makes it much faster than other similar libraries which use <strong>reflection</strong> and it also has very good support for customization.</p>\n"}],"owner":{"user_id":1709417,"display_name":"Nishant Kumar"},"view_count":262,"up_vote_count":3,"accepted_answer_id":75131388,"answer_count":2,"score":2,"creation_date":1672641418,"question_id":74979565,"body":"<p>I am receiving messages in protobuf format. I need to convert it to json format <strong>fast</strong> as all my business logic is written to handle json based POJO objects.</p>\n<pre><code>byte[] request = ..; // msg received\n\n// convert to intermediate POJO\nAdxOpenRtb.BidRequest bidRequestProto = AdxOpenRtb.BidRequest.parseFrom(request, reg);\n\n// convert intermediate POJO to json string.\n// THIS STEP IS VERY SLOW\nPrinter printer = JsonFormat.printer().printingEnumsAsInts().omittingInsignificantWhitespace();\nString jsonBody = printer.print(bidRequestProto);\n\n// convert json string to final POJO format\nBidRequest bidRequest = super.parse(jsonBody.getBytes());\n</code></pre>\n<p>Proto object to json conversion step is very slow. Is there any faster approach for it?</p>\n<p>can i reuse <code>printer</code> object? is it thread-safe?</p>\n<p><strong>Note:</strong> This POJO class (<code>AdxOpenRtb.BidRequest</code> &amp; <code>BidRequest</code>) is very complex having many hierarchy and fields but <strong>contains similar data with slightly different fields name and data types</strong>.</p>\n"},{"tags":["java","spring-boot","jackson","deserialization","json-deserialization"],"answers":[{"owner":{"user_id":16328516,"display_name":"TriS"},"up_vote_count":2,"is_accepted":true,"creation_date":1672584072,"answer_id":74975233,"body":"<p>This error occurs when we serialize a Java object or deserialize JSON to POJO. The POJO contains new Java 8+ date time classes such as LocalDate, LocalTime, LocalDateTime etc.<br/>\nSteps:</p>\n<ol>\n<li>Add dependency</li>\n</ol>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n    &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<ol start=\"2\">\n<li>Register the module <code>JavaTimeModule</code> either with ObjectMapper or JsonMapper</li>\n</ol>\n<pre><code>ObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.registerModule(new JavaTimeModule());\n\n// If JsonMapper is used in application\nJsonMapper jsonMapper = new JsonMapper();\njsonMapper.registerModule(new JavaTimeModule());\n</code></pre>\n<p>Here you are using <code>Jackson2JsonRedisSerializer</code> in the bean. So you can create the ObjectMapper object and set the <code>JavaTimeModule</code>. After that register the ObjectMapper to the Jackson2JsonRedisSerializer object.</p>\n<pre><code>\nObjectMapper objectMapper = new ObjectMapper();\nobjectMapper.registerModule(new JavaTimeModule());\nobjectMapper.setVisibility(PropertyAccessor.ALL, JsonAutoDetect.Visibility.ANY);\nobjectMapper.enableDefaultTyping(ObjectMapper.DefaultTyping.NON_FINAL);\n\nJackson2JsonRedisSerializer jackson2JsonRedisSerializer = new Jackson2JsonRedisSerializer(Object.class);\njackson2JsonRedisSerializer.setObjectMapper(objectMapper);\n</code></pre>\n"}],"owner":{"user_id":20346340,"display_name":"Hamza"},"view_count":360,"up_vote_count":2,"accepted_answer_id":74975233,"answer_count":1,"score":2,"creation_date":1672580262,"question_id":74974924,"body":"<p>I am using Jackson2JsonRedisSerializer.</p>\n<pre><code>@Bean\n    public RedisOperations&lt;String , Aircraft&gt; redisOperations(RedisConnectionFactory factory){\n        Jackson2JsonRedisSerializer&lt;Aircraft&gt; serializer = new Jackson2JsonRedisSerializer&lt;Aircraft&gt;(Aircraft.class);\n        RedisTemplate&lt;String, Aircraft&gt; template = new RedisTemplate&lt;&gt;();\n        template.setConnectionFactory(factory);\n        template.setDefaultSerializer(serializer);\n        template.setKeySerializer(new StringRedisSerializer());\n        return template;\n    }\n\n</code></pre>\n<p>My aircraft has field of type Instant.</p>\n<pre><code>    @JsonProperty(&quot;last_seen_time&quot;)\n    private Instant lastSeenTime;\n</code></pre>\n<p>While deserializing it gives me an error:</p>\n<pre><code>Java 8 date/time type `java.time.Instant` not supported by default: add Module &quot;com.fasterxml.jackson.datatype:jackson-datatype-jsr310&quot; to enable handling (through reference chain: com.example.chapter6.sburredis.Aircraft[&quot;last_seen_time&quot;])\n</code></pre>\n<p>I have already added the maven dependency in my pom.xml</p>\n<pre><code>&lt;dependency&gt;\n            &lt;groupId&gt;com.fasterxml.jackson.datatype&lt;/groupId&gt;\n            &lt;artifactId&gt;jackson-datatype-jsr310&lt;/artifactId&gt;\n            &lt;version&gt;2.14.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>The json file is as follows:</p>\n<pre><code>{\n  &quot;aircraft&quot;: [\n    {\n      &quot;id&quot;: 108,\n      &quot;callsign&quot;: &quot;AMF4263&quot;,\n      &quot;squawk&quot;: &quot;4136&quot;,\n      &quot;reg&quot;: &quot;N49UC&quot;,\n      &quot;flightno&quot;: &quot;&quot;,\n      &quot;route&quot;: &quot;LAN-DFW&quot;,\n      &quot;type&quot;: &quot;B190&quot;,\n      &quot;category&quot;: &quot;A1&quot;,\n      &quot;altitude&quot;: 20000,\n      &quot;heading&quot;: 235,\n      &quot;speed&quot;: 248,\n      &quot;lat&quot;: 38.865905,\n      &quot;lon&quot;: -90.429382,\n      &quot;barometer&quot;: 0,\n      &quot;vert_rate&quot;: 0,\n      &quot;selected_altitude&quot;: 0,\n      &quot;polar_distance&quot;: 12.99378,\n      &quot;polar_bearing&quot;: 345.393951,\n      &quot;is_adsb&quot;: true,\n      &quot;is_on_ground&quot;: false,\n      &quot;last_seen_time&quot;: 1672576769,\n      &quot;pos_update_time&quot;: 1672576769,\n      &quot;bds40_seen_time&quot;: null\n      }\n  ]\n}\n\n</code></pre>\n"},{"tags":["java","quarkus","guava","mybatis"],"comments":[{"owner":{"user_id":5445670,"display_name":"Solomon Ucko"},"edited":false,"comment_id":134505513,"body":"What code are you trying to run?"},{"owner":{"user_id":13202054,"display_name":"acanthite"},"edited":false,"comment_id":134507659,"body":"@SolomonUcko, I&#39;ve updated the original post"},{"owner":{"user_id":8233361,"display_name":"Claudio Weiler"},"edited":false,"comment_id":134509071,"body":"What JDK version are you using? There are specific reason to &quot;any other non-java collection&quot;?"},{"owner":{"user_id":13202054,"display_name":"acanthite"},"edited":false,"comment_id":134513077,"body":"I use JDK 17, though I don&#39;t see how it changes something. I just want to use immutable collections. I don&#39;t like defensive copying all over the my code, or just relying on &quot;no one will mutate it after passing to constructor&quot;, or relying on the actual implementation of List&lt;T&gt; is being immutable. I want to explicitly declare things immutable and don&#39;t bother myself with redundant work or mutability assumptions."},{"owner":{"user_id":8233361,"display_name":"Claudio Weiler"},"edited":false,"comment_id":134518275,"body":"&quot;I just want to use immutable collections&quot; Right! Since JDK 9 there is native immutable collections, just use them!"},{"owner":{"user_id":13202054,"display_name":"acanthite"},"edited":false,"comment_id":134518476,"body":"@ClaudioWeiler, yes I know that. But the problem is that I cannot be explicit about it. All I have is the <code>List</code> interface which cannot tell me that a collection that I&#39;ve got a reference to is immutable."},{"owner":{"user_id":8233361,"display_name":"Claudio Weiler"},"edited":false,"comment_id":134518722,"body":"Hum! Understand. You want a contractual immutable collection."},{"owner":{"user_id":13202054,"display_name":"acanthite"},"edited":false,"comment_id":134519350,"body":"Yes, that&#39;s exactly what I want!"}],"answers":[{"owner":{"user_id":5445670,"display_name":"Solomon Ucko"},"up_vote_count":1,"is_accepted":true,"creation_date":1684342258,"answer_id":76274452,"body":"<p>These are the key parts of the code:</p>\n<pre><code>  public Object execute(SqlSession sqlSession, Object[] args) {\n    Object result;\n    switch (command.getType()) {\n      // ...\n      case SELECT:\n        if (method.returnsVoid() &amp;&amp; method.hasResultHandler()) {\n          executeWithResultHandler(sqlSession, args);\n          result = null;\n        } else if (method.returnsMany()) {\n          result = executeForMany(sqlSession, args);\n        } else if (method.returnsMap()) {\n          result = executeForMap(sqlSession, args);\n        } else if (method.returnsCursor()) {\n          result = executeForCursor(sqlSession, args);\n        } else {\n          Object param = method.convertArgsToSqlCommandParam(args);\n          result = sqlSession.selectOne(command.getName(), param);\n          if (method.returnsOptional() &amp;&amp; (result == null || !method.getReturnType().equals(result.getClass()))) {\n            result = Optional.ofNullable(result);\n          }\n        }\n        break;\n      // ...\n    }\n    if (result == null &amp;&amp; method.getReturnType().isPrimitive() &amp;&amp; !method.returnsVoid()) {\n      throw new BindingException(&quot;Mapper method '&quot; + command.getName()\n          + &quot;' attempted to return null from a method with a primitive return type (&quot; + method.getReturnType() + &quot;).&quot;);\n    }\n    return result;\n  }\n</code></pre>\n<pre><code>  private &lt;E&gt; Object executeForMany(SqlSession sqlSession, Object[] args) {\n    List&lt;E&gt; result;\n    Object param = method.convertArgsToSqlCommandParam(args);\n    if (method.hasRowBounds()) {\n      RowBounds rowBounds = method.extractRowBounds(args);\n      result = sqlSession.selectList(command.getName(), param, rowBounds);\n    } else {\n      result = sqlSession.selectList(command.getName(), param);\n    }\n    // issue #510 Collections &amp; arrays support\n    if (!method.getReturnType().isAssignableFrom(result.getClass())) {\n      if (method.getReturnType().isArray()) {\n        return convertToArray(result);\n      }\n      return convertToDeclaredCollection(sqlSession.getConfiguration(), result);\n    }\n    return result;\n  }\n</code></pre>\n<pre><code>  private &lt;E&gt; Object convertToDeclaredCollection(Configuration config, List&lt;E&gt; list) {\n    Object collection = config.getObjectFactory().create(method.getReturnType());\n    MetaObject metaObject = config.newMetaObject(collection);\n    metaObject.addAll(list);\n    return collection;\n  }\n</code></pre>\n<p><a href=\"https://mybatis.org/mybatis-3/zh/jacoco/org.apache.ibatis.binding/MapperMethod.java.html\" rel=\"nofollow noreferrer\">https://mybatis.org/mybatis-3/zh/jacoco/org.apache.ibatis.binding/MapperMethod.java.html</a></p>\n<p>Unfortunately, it seems like the only options are to use the original list, convert into a new collection using no-arg-constructor + <code>addAll</code>, or convert into an array. Therefore, I would do this:</p>\n<pre><code>@Mapper\npublic interface UtilityRepository {\n  List&lt;Integer&gt; getAllIds();\n}\n\n@ApplicationScoped\n@AllArgsConstructor\npublic class UtilityService {\n  private final UtilityRepository repository;\n  \n  public ImmutableList&lt;Integer&gt; getAllIds() {\n    return ImmutableList.copyOf(repository.getAllIds());\n  }\n}\n</code></pre>\n"}],"owner":{"user_id":13202054,"display_name":"acanthite"},"view_count":52,"up_vote_count":2,"accepted_answer_id":76274452,"answer_count":1,"score":2,"creation_date":1684341977,"question_id":76274415,"body":"<p>I tried making return type ImmutableList and selecting a bunch of IDs from a table, but of course mybatis does not know how to do that and throws exception:</p>\n<pre><code>org.apache.ibatis.reflection.ReflectionException: Error instantiating class com.google.common.collect.ImmutableList with invalid types () or values (). Cause: java.lang.InstantiationException\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:88)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:53)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.create(DefaultObjectFactory.java:45)\n    at org.apache.ibatis.binding.MapperMethod.convertToDeclaredCollection(MapperMethod.java:173)\n    at org.apache.ibatis.binding.MapperMethod.executeForMany(MapperMethod.java:154)\n    at org.apache.ibatis.binding.MapperMethod.execute(MapperMethod.java:80)\n    at org.apache.ibatis.binding.MapperProxy$PlainMethodInvoker.invoke(MapperProxy.java:145)\n    at org.apache.ibatis.binding.MapperProxy.invoke(MapperProxy.java:86)\n    at jdk.proxy5/jdk.proxy5.$Proxy76.getAllIds(Unknown Source)\n    at org.acanthite.services.UtilityService.getAllIds(UtilityService.java:98)\n    at org.acanthite.services.UtilityService_ClientProxy.getAllIds(Unknown Source)\n    at org.acanthite.resources.UtilityResource.ids(UtilityResource.java:77)\n    at org.acanthite.resources.UtilityResource$quarkusrestinvoker$ids_8602df045ce9b7e168a75788bbd936486ed83b98.invoke(Unknown Source)\n    at org.jboss.resteasy.reactive.server.handlers.InvocationHandler.handle(InvocationHandler.java:29)\n    at io.quarkus.resteasy.reactive.server.runtime.QuarkusResteasyReactiveRequestContext.invokeHandler(QuarkusResteasyReactiveRequestContext.java:141)\n    at org.jboss.resteasy.reactive.common.core.AbstractResteasyReactiveContext.run(AbstractResteasyReactiveContext.java:145)\n    at io.quarkus.vertx.core.runtime.VertxCoreRecorder$14.runWith(VertxCoreRecorder.java:576)\n    at org.jboss.threads.EnhancedQueueExecutor$Task.run(EnhancedQueueExecutor.java:2513)\n    at org.jboss.threads.EnhancedQueueExecutor$ThreadBody.run(EnhancedQueueExecutor.java:1538)\n    at org.jboss.threads.DelegatingRunnable.run(DelegatingRunnable.java:29)\n    at org.jboss.threads.ThreadLocalResettingRunnable.run(ThreadLocalResettingRunnable.java:29)\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30)\n    at java.base/java.lang.Thread.run(Thread.java:833)\nCaused by: java.lang.InstantiationException\n    at java.base/jdk.internal.reflect.InstantiationExceptionConstructorAccessorImpl.newInstance(InstantiationExceptionConstructorAccessorImpl.java:48)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at org.apache.ibatis.reflection.factory.DefaultObjectFactory.instantiateClass(DefaultObjectFactory.java:66)\n    ... 22 more\n</code></pre>\n<p>Here is my mapper's XML:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot; ?&gt;\n&lt;!DOCTYPE mapper\n        PUBLIC &quot;-//mybatis.org//DTD Mapper 3.0//EN&quot;\n        &quot;https://mybatis.org/dtd/mybatis-3-mapper.dtd&quot;&gt;\n&lt;mapper namespace=&quot;org.acanthite.repository.UtilityRepository&quot;&gt;\n    &lt;select id=&quot;getAllIds&quot; resultType=&quot;integer&quot;&gt;\n        select id from utility;\n    &lt;/select&gt;\n&lt;/mapper&gt;\n</code></pre>\n<p>The mapper interface:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Mapper\npublic interface UtilityRepository {\n  ImmutableList&lt;Integer&gt; getAllIds();\n}\n\n</code></pre>\n<p>And how I use it:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@ApplicationScoped\n@AllArgsConstructor\npublic class UtilityService {\n  private final UtilityRepository repository;\n  \n  public ImmutableList&lt;Integer&gt; getAllIds() {\n    return repository.getAllIds();\n  }\n}\n</code></pre>\n<p>Is there a library or workaround teach mybatis how to instantiate Guava's immutable collections (or basically any other non-java collection)?</p>\n"},{"tags":["java","spring","spring-mvc"],"comments":[{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":134440833,"body":"Why not validate this in the same way you would validate any other user-provided input? <a href=\"https://stackoverflow.com/q/3684747/12567365\">How to validate a locale in java?</a> If you only want to support a very small list of predefined values, then it becomes even simpler - use a properties list, or an enum, etc. to provide the set of valid values. Return <code>400 Bad Request</code> (and explanation) to the user if the validation fails."},{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":134440842,"body":"(Java <a href=\"https://download.java.net/java/early_access/panama/docs/api/java.base/java/util/Locale.html\" rel=\"nofollow noreferrer\">does not validate locale data</a>: &quot;<i>the Locale class does not provide any validation features. The Builder only checks if an individual field satisfies the syntactic requirement (is well-formed), but does not validate the value itself.</i>&quot;. Sounds like Spring doesn&#39;t either. So, you have to do it.)"}],"answers":[{"owner":{"user_id":6551263,"display_name":"Chetan Ahirrao"},"up_vote_count":1,"is_accepted":true,"creation_date":1684172995,"answer_id":76256728,"body":"<p>Couldn't find any standard solution to this so solved it with my own way. <br/> I extended <code>LocaleChangeInterceptor</code> and overridden <code>preHandle</code> method.</p>\n<pre><code>public class CustomLocaleChangeInterceptor extends LocaleChangeInterceptor{\n\n    private Set&lt;String&gt; validLanguages;\n    \n    public CustomLocaleChangeInterceptor() {\n        super();\n    }\n    \n    public Set&lt;String&gt; getValidLanguages() {\n        return validLanguages;\n    }\n\n    public void setValidLanguages(Set&lt;String&gt; validLanguages) {\n        this.validLanguages = validLanguages;\n    }\n\n    @Override\n    public boolean preHandle(HttpServletRequest request, HttpServletResponse response, Object handler)\n            throws ServletException {\n\n        String newLocale = request.getParameter(getParamName());\n        if(newLocale!=null &amp;&amp; !&quot;&quot;.equals(newLocale)) {\n            newLocale=newLocale.toLowerCase();\n            if(!validLanguages.contains(newLocale)) {\n                throw new IllegalArgumentException(&quot;Language/Locale not supported&quot;);\n            }\n        }\n            \n        return super.preHandle(request, response, handler);\n    }\n}\n\n</code></pre>\n<p>and in xml configuration:</p>\n<pre><code>&lt;interceptors&gt;\n        &lt;beans:bean\n            class=&quot;mypackage.CustomLocaleChangeInterceptor&quot;&gt;\n            &lt;beans:property name=&quot;paramName&quot; value=&quot;language&quot; /&gt;\n            &lt;beans:property name=&quot;validLanguages&quot;&gt;\n                &lt;beans:set&gt;\n                    &lt;beans:value&gt;en&lt;/beans:value&gt;\n                    &lt;beans:value&gt;hi&lt;/beans:value&gt;\n                &lt;/beans:set&gt;\n            &lt;/beans:property&gt;\n        &lt;/beans:bean&gt;\n&lt;/interceptors&gt;\n</code></pre>\n<p>Though the invalid <code>Locale</code> doesn't cause any issue, the security team was persistent that <code>Locale</code> injection is possible so I needed to do this.</p>\n"}],"owner":{"user_id":6551263,"display_name":"Chetan Ahirrao"},"view_count":42,"up_vote_count":2,"accepted_answer_id":76256728,"answer_count":1,"score":2,"creation_date":1683893541,"question_id":76236171,"body":"<p>We are using Spring MVC ver 4.3 in one of the projects. The application supports i18n and Locale can be changed using url like <a href=\"http://appurl.com/?locale=en\" rel=\"nofollow noreferrer\">http://appurl.com/?locale=en</a> <br/>\nThe problem is when someone sends random value for locale, it is not rejected, rather Spring sets <code>Content-Language</code> header value = that_random_str <br/>\nAnd since we are using <code>CookieLocaleResolver</code>, Spring also sets localeCookie value to that_random_str.\nIs there any way where we can tell Spring to restrict locale values to only few Locales like only English(en) and Hindi(hi) are allowed and <code>IllegalArgumentException</code> shall be thrown for other values</p>\n"},{"tags":["java","byte-buddy"],"answers":[{"owner":{"user_id":21851535,"display_name":"uglibubla"},"up_vote_count":1,"is_accepted":false,"creation_date":1683732766,"answer_id":76220266,"body":"<p>According to <a href=\"https://github.com/raphw/byte-buddy/issues/1087\" rel=\"nofollow noreferrer\">this</a> (old) issue it's a bytebuddy bug, the workaround explained there is to use the same package for the Subclass, So:</p>\n<pre><code>Unloaded&lt;MyEntityA&gt; unloadedClass = new ByteBuddy()\n    .with(new NamingStrategy.SuffixingRandom(&quot;MyProxy&quot;))\n</code></pre>\n<p>becomes</p>\n<pre><code>Unloaded&lt;MyEntityA&gt; unloadedClass = new ByteBuddy()\n    .with(new NamingStrategy.SuffixingRandom(&quot;it.mict.lab.bytebuddy.entity.MyProxy&quot;))\n</code></pre>\n<p>Also make sure to load the class with the same Classloader as MyEntityA.</p>\n"},{"owner":{"user_id":19957919,"display_name":"Marco Dabbene"},"up_vote_count":0,"is_accepted":false,"creation_date":1683888631,"answer_id":76235557,"body":"<p>Being sure the classloader is the same for both the original class and the proxy is not easy at is seems. In fact I found a way to force the same classloader in Java 8, but it did not work in Java 17.\nThen I found a wonderful 2018 article from the author of ByteBuddy <a href=\"http://mydailyjava.blogspot.com/2018/04/jdk-11-and-proxies-in-world-past.html?m=1\" rel=\"nofollow noreferrer\">JDK 11 and proxies in a world past sun.misc.Unsafe</a> where he shows the correct way to specify class loading strategy and now my example works for both Java 8 and Java 17.\nI copy here the new version of the App class example that shows that solution:</p>\n<pre><code>package it.mict.lab.bytebuddy;\n\nimport java.lang.reflect.Constructor;\nimport java.lang.reflect.Method;\n\nimport it.mict.lab.bytebuddy.entity.MyEntityA;\nimport it.mict.lab.bytebuddy.entity.MyEntityB;\nimport net.bytebuddy.ByteBuddy;\nimport net.bytebuddy.description.modifier.Visibility;\nimport net.bytebuddy.dynamic.DynamicType.Unloaded;\nimport net.bytebuddy.dynamic.loading.ClassInjector;\nimport net.bytebuddy.dynamic.loading.ClassLoadingStrategy;\nimport net.bytebuddy.implementation.FieldAccessor;\nimport net.bytebuddy.implementation.MethodCall;\nimport net.bytebuddy.implementation.MethodDelegation;\nimport net.bytebuddy.implementation.auxiliary.AuxiliaryType.NamingStrategy;\nimport net.bytebuddy.matcher.ElementMatchers;\n\npublic class App \n{\n    private static Class&lt;? extends MyEntityA&gt; creteProxyClass() throws Exception {\n\n        Unloaded&lt;MyEntityA&gt; unloadedClass = new ByteBuddy()\n                .with(new NamingStrategy.SuffixingRandom(&quot;MyProxy&quot;))\n                .subclass(MyEntityA.class)\n                .defineField(&quot;_target&quot;, MyEntityA.class, Visibility.PRIVATE)\n                .defineConstructor(Visibility.PUBLIC)\n                .withParameter(MyEntityA.class)\n                .intercept(\n                    MethodCall.invoke(getDefaultConstructor(MyEntityA.class))\n                        .andThen(FieldAccessor.ofField(&quot;_target&quot;).setsArgumentAt(0))\n                )\n                .method(ElementMatchers.nameStartsWith(&quot;getRaw&quot;)\n                    .or(ElementMatchers.nameStartsWith(&quot;setRaw&quot;)))\n                    .intercept(MethodDelegation.toField(&quot;_target&quot;))\n                .make();\n        \n        // This is the strategy part shown in the Rafael blog\n\n        ClassLoadingStrategy&lt;ClassLoader&gt; strategy;\n        if (ClassInjector.UsingLookup.isAvailable()) {\n            Class&lt;?&gt; methodHandles = Class\n                    .forName(&quot;java.lang.invoke.MethodHandles&quot;);\n            Object lookup = methodHandles.getMethod(&quot;lookup&quot;).invoke(null);\n            Method privateLookupIn = methodHandles.getMethod(&quot;privateLookupIn&quot;,\n                    Class.class,\n                    Class.forName(&quot;java.lang.invoke.MethodHandles$Lookup&quot;));\n            Object privateLookup = privateLookupIn.invoke(null, MyEntityA.class,\n                    lookup);\n            strategy = ClassLoadingStrategy.UsingLookup.of(privateLookup);\n        } else if (ClassInjector.UsingReflection.isAvailable()) {\n            strategy = ClassLoadingStrategy.Default.INJECTION;\n        } else {\n            throw new IllegalStateException(\n                    &quot;No code generation strategy available&quot;);\n        }\n        \n        Class&lt;? extends MyEntityA&gt; proxyClass = unloadedClass\n            .load(MyEntityA.class.getClassLoader(), strategy)\n            .getLoaded();\n        \n        return proxyClass;\n    }\n\n    private static Constructor&lt;?&gt; getDefaultConstructor(Class&lt;MyEntityA&gt; entityClass) {\n        \n        for (Constructor&lt;?&gt; constructor : entityClass.getDeclaredConstructors()) {\n            if (constructor.getParameterCount() == 0) {\n                return constructor;\n            }\n        }\n        \n        throw new IllegalStateException();\n    }\n    \n    public static void main( String[] args ) throws Exception\n    {\n        System.out.println(&quot;Java version: &quot; + System.getProperty(&quot;java.version&quot;));\n        \n        MyEntityB entityB = new MyEntityB(new MyEntityA(123));\n        entityB.hello();\n        \n        Class&lt;? extends MyEntityA&gt; proxyClass = creteProxyClass();\n        System.out.println(&quot;MyEntityA package : &quot; + MyEntityA.class.getPackage().getName());\n        System.out.println(&quot;Proxy package     : &quot; + proxyClass.getPackage().getName());\n\n        System.out.println(&quot;MyEntityA ClassLoader : &quot; + MyEntityA.class.getClassLoader());\n        System.out.println(&quot;Proxy ClassLoader     : &quot; + proxyClass.getClassLoader());\n\n        Constructor&lt;? extends MyEntityA&gt; proxyConstructor = proxyClass.getConstructor(new Class&lt;?&gt;[] { MyEntityA.class });\n        MyEntityA proxy = proxyConstructor.newInstance(new MyEntityA());\n        System.out.println(&quot;Proxy: &quot; + proxy);\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":19957919,"display_name":"Marco Dabbene"},"view_count":45,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1683725837,"question_id":76219120,"body":"<p>I'm trying to create a proxy with ByteBuddy that can delegate calls of a protected method getRawId of a MyEntityA class to the same method of an object of the same class referenced in a target field.</p>\n<pre><code>package it.mict.lab.bytebuddy.entity;\n\npublic class MyEntityA {\n\n    private int id;\n    \n    public MyEntityA() {\n    }\n    \n    public MyEntityA(int id) {\n        this.id = id;\n    }\n    \n    protected int getRawId() {\n        return id;\n    }\n}\n\n</code></pre>\n<p>The proxy should do something similar to this MyEntityB class:</p>\n<pre><code>package it.mict.lab.bytebuddy.entity;\n\npublic class MyEntityB extends MyEntityA {\n\n    private MyEntityA _target;\n    \n    public MyEntityB(MyEntityA _target) {\n        this._target = _target;\n    }\n    \n    public void hello() {\n        System.out.println(_target.getRawId());\n    }\n}\n\n</code></pre>\n<p>And this is an example of what I would achieve:</p>\n<pre><code>package it.mict.lab.bytebuddy;\n\n\nimport java.lang.reflect.Constructor;\n\nimport it.mict.lab.bytebuddy.entity.MyEntityA;\nimport it.mict.lab.bytebuddy.entity.MyEntityB;\nimport net.bytebuddy.ByteBuddy;\nimport net.bytebuddy.description.modifier.Visibility;\nimport net.bytebuddy.dynamic.DynamicType.Unloaded;\nimport net.bytebuddy.implementation.FieldAccessor;\nimport net.bytebuddy.implementation.MethodCall;\nimport net.bytebuddy.implementation.MethodDelegation;\nimport net.bytebuddy.implementation.auxiliary.AuxiliaryType.NamingStrategy;\nimport net.bytebuddy.matcher.ElementMatchers;\n\npublic class App \n{\n    private static Class&lt;? extends MyEntityA&gt; creteProxyClass() {\n\n        Unloaded&lt;MyEntityA&gt; unloadedClass = new ByteBuddy()\n                .with(new NamingStrategy.SuffixingRandom(&quot;MyProxy&quot;))\n                .subclass(MyEntityA.class)\n                .defineField(&quot;_target&quot;, MyEntityA.class, Visibility.PRIVATE)\n                .defineConstructor(Visibility.PUBLIC)\n                .withParameter(MyEntityA.class)\n                .intercept(\n                    MethodCall.invoke(getDefaultConstructor(MyEntityA.class))\n                        .andThen(FieldAccessor.ofField(&quot;_target&quot;).setsArgumentAt(0))\n                )\n                .method(ElementMatchers.nameStartsWith(&quot;getRaw&quot;)\n                    .or(ElementMatchers.nameStartsWith(&quot;setRaw&quot;)))\n                    .intercept(MethodDelegation.toField(&quot;_target&quot;))\n                .make();\n        \n        Class&lt;? extends MyEntityA&gt; proxyClass = unloadedClass\n            .load(MyEntityA.class.getClassLoader())\n            .getLoaded();\n        \n        return proxyClass;\n    }\n\n    private static Constructor&lt;?&gt; getDefaultConstructor(Class&lt;MyEntityA&gt; entityClass) {\n        \n        for (Constructor&lt;?&gt; constructor : entityClass.getDeclaredConstructors()) {\n            if (constructor.getParameterCount() == 0) {\n                return constructor;\n            }\n        }\n        \n        throw new IllegalStateException();\n    }\n    \n    public static void main( String[] args ) throws Exception\n    {\n        MyEntityB entityB = new MyEntityB(new MyEntityA(123));\n        entityB.hello();\n        \n        Class&lt;? extends MyEntityA&gt; proxyClass = creteProxyClass();\n        System.out.println(&quot;MyEntityA package : &quot; + MyEntityA.class.getPackage().getName());\n        System.out.println(&quot;Proxy package     : &quot; + proxyClass.getPackage().getName());\n\n        Constructor&lt;? extends MyEntityA&gt; proxyConstructor = proxyClass.getConstructor(new Class&lt;?&gt;[] { MyEntityA.class });\n        MyEntityA proxy = proxyConstructor.newInstance(new MyEntityA());\n    }\n}\n\n</code></pre>\n<p>I'm using:</p>\n<p>OpenJDK Runtime Environment (Temurin)(build 1.8.0_332-b09)\nOpenJDK 64-Bit Server VM (Temurin)(build 25.332-b09, mixed mode)</p>\n<p>and ByteBuddy version 1.14.4</p>\n<p>When I execute this App class, I expect no errors, while I get:</p>\n<pre><code>123\nMyEntityA package : it.mict.lab.bytebuddy.entity\nProxy package     : it.mict.lab.bytebuddy.entity\nException in thread &quot;main&quot; java.lang.VerifyError: Bad access to protected data in invokevirtual\nException Details:\n  Location:\n    it/mict/lab/bytebuddy/entity/MyEntityA$ByteBuddy$GZzebPWq.getRawId()I @4: invokevirtual\n  Reason:\n    Type 'it/mict/lab/bytebuddy/entity/MyEntityA' (current frame, stack[0]) is not assignable to 'it/mict/lab/bytebuddy/entity/MyEntityA$ByteBuddy$GZzebPWq'\n  Current Frame:\n    bci: @4\n    flags: { }\n    locals: { 'it/mict/lab/bytebuddy/entity/MyEntityA$ByteBuddy$GZzebPWq' }\n    stack: { 'it/mict/lab/bytebuddy/entity/MyEntityA' }\n  Bytecode:\n    0x0000000: 2ab4 000a b600 0cac                    \n\n    at java.lang.Class.getDeclaredConstructors0(Native Method)\n    at java.lang.Class.privateGetDeclaredConstructors(Class.java:2671)\n    at java.lang.Class.getConstructor0(Class.java:3075)\n    at java.lang.Class.getConstructor(Class.java:1825)\n    at it.mict.lab.bytebuddy.App.main(App.java:63)\n\n</code></pre>\n<p>123 is what is printed using the MyEntityB class, then the next two lines check that that MyEntityA class and the one created by ByteBuddy are in the same package, and then there is the exception encountered while creating the instance of the proxy.</p>\n<p>If I change MyEntityA.getRawId() visibility from protected to public, everything works fine (but of course, I need it to be protected).</p>\n"},{"tags":["java","spring-boot","unit-testing","testcontainers","testcontainers-junit5"],"answers":[{"owner":{"user_id":12473843,"display_name":"Sergey Tsypanov"},"up_vote_count":1,"is_accepted":false,"creation_date":1683719464,"answer_id":76218051,"body":"<p>I think you are missing <code>@Testcontainers</code> over your test class.</p>\n"},{"owner":{"user_id":2203890,"display_name":"Edd&#250; Mel&#233;ndez"},"up_vote_count":0,"is_accepted":false,"creation_date":1683734008,"answer_id":76220460,"body":"<p>Add <code>@AutoConfigureTestDatabase(replace = AutoConfigureTestDatabase.Replace.NONE)</code> at class level</p>\n"}],"owner":{"user_id":1297091,"display_name":"codezoner"},"view_count":46,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1683719011,"question_id":76217978,"body":"<p>I'm trying to implement an integration test using TestContainers. But I'm continuously getting BeanDefinitionStoreException.</p>\n<p>My Test Class</p>\n<pre><code>    @SpringBootTest\n@AutoConfigureMockMvc\nclass OrderServiceApplicationTests {\n\n    @Container\n    static final MySQLContainer mySQLContainer = new MySQLContainer&lt;&gt;(&quot;mysql:8.0.30&quot;)\n            .withDatabaseName(&quot;testcontainer&quot;)\n            .withUsername(&quot;test&quot;)\n            .withPassword(&quot;test&quot;);\n\n    @Autowired\n    ObjectMapper objectMapper;\n    @Autowired\n    private MockMvc mockMvc;\n    @Autowired\n    OrderRepository orderRepository;\n\n    @DynamicPropertySource\n    static void setProperties(DynamicPropertyRegistry properties){\n        properties.add(&quot;spring.datasource.url&quot;, mySQLContainer::getJdbcUrl);\n        properties.add(&quot;spring.datasource.username&quot;, mySQLContainer::getUsername);\n        properties.add(&quot;spring.datasource.password&quot;, mySQLContainer::getPassword);\n    }\n\n    @Test\n    void shouldPlaceOrder() throws Exception {\n\n        OrderItemsDto orderItemsDto = OrderItemsDto.builder()\n                .skuCode(&quot;Test SKU&quot;)\n                .price(new BigDecimal(123.32))\n                .quantity(2).build();\n        OrderDto orderDto = OrderDto.builder()\n                .orderItemsDtos(Arrays.asList(orderItemsDto)).build();\n        String reqString = objectMapper.writeValueAsString(orderDto);\n        mockMvc.perform(MockMvcRequestBuilders.post(&quot;api/order&quot;)\n        .contentType(MediaType.APPLICATION_JSON)\n        .content(reqString))\n                .andExpect(status().isCreated());\n        Assertions.assertTrue(orderRepository.findAll().size() == 1);\n\n    }\n\n}\n</code></pre>\n<p>Here is my POM File</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.1.0-SNAPSHOT&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;com.example&lt;/groupId&gt;\n    &lt;artifactId&gt;order-service&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n    &lt;name&gt;order-service&lt;/name&gt;\n    &lt;description&gt;Order Service&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.mysql&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql-connector-j&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n            &lt;artifactId&gt;mysql&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n            &lt;artifactId&gt;junit-jupiter&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n    &lt;dependencyManagement&gt;\n        &lt;dependencies&gt;\n            &lt;dependency&gt;\n                &lt;groupId&gt;org.testcontainers&lt;/groupId&gt;\n                &lt;artifactId&gt;testcontainers-bom&lt;/artifactId&gt;\n                &lt;version&gt;1.18.0&lt;/version&gt;\n                &lt;type&gt;pom&lt;/type&gt;\n                &lt;scope&gt;import&lt;/scope&gt;\n            &lt;/dependency&gt;\n        &lt;/dependencies&gt;\n    &lt;/dependencyManagement&gt;\n\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n    &lt;repositories&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/repository&gt;\n        &lt;repository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/releases&gt;\n        &lt;/repository&gt;\n    &lt;/repositories&gt;\n    &lt;pluginRepositories&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-milestones&lt;/id&gt;\n            &lt;name&gt;Spring Milestones&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/milestone&lt;/url&gt;\n            &lt;snapshots&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/snapshots&gt;\n        &lt;/pluginRepository&gt;\n        &lt;pluginRepository&gt;\n            &lt;id&gt;spring-snapshots&lt;/id&gt;\n            &lt;name&gt;Spring Snapshots&lt;/name&gt;\n            &lt;url&gt;https://repo.spring.io/snapshot&lt;/url&gt;\n            &lt;releases&gt;\n                &lt;enabled&gt;false&lt;/enabled&gt;\n            &lt;/releases&gt;\n        &lt;/pluginRepository&gt;\n    &lt;/pluginRepositories&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>This is my console.</p>\n<pre><code>16:14:14.843 [main] INFO org.springframework.test.context.support.AnnotationConfigContextLoaderUtils -- Could not detect default configuration classes for test class [com.example.orderservice.OrderServiceApplicationTests]: OrderServiceApplicationTests does not declare any static, non-private, non-final, nested classes annotated with @Configuration.\n16:14:14.940 [main] INFO org.springframework.boot.test.context.SpringBootTestContextBootstrapper -- Found @SpringBootConfiguration com.example.orderservice.OrderServiceApplication for test class com.example.orderservice.OrderServiceApplicationTests\n16:14:15.163 [main] WARN org.testcontainers.utility.TestcontainersConfiguration -- Attempted to read Testcontainers configuration file at file:/C:/Users/binul/.testcontainers.properties but the file was not found. Exception message: FileNotFoundException: C:\\Users\\binul\\.testcontainers.properties (The system cannot find the file specified)\n16:14:15.169 [main] INFO org.testcontainers.utility.ImageNameSubstitutor -- Image name substitution will be performed by: DefaultImageNameSubstitutor (composite of 'ConfigurationFileImageNameSubstitutor' and 'PrefixingImageNameSubstitutor')\n\n  .   ____          _            __ _ _\n /\\\\ / ___'_ __ _ _(_)_ __  __ _ \\ \\ \\ \\\n( ( )\\___ | '_ | '_| | '_ \\/ _` | \\ \\ \\ \\\n \\\\/  ___)| |_)| | | | | || (_| |  ) ) ) )\n  '  |____| .__|_| |_|_| |_\\__, | / / / /\n =========|_|==============|___/=/_/_/_/\n :: Spring Boot ::       (v3.1.0-SNAPSHOT)\n\n2023-05-10T16:14:15.441+05:30  INFO 13040 --- [           main] c.e.o.OrderServiceApplicationTests       : Starting OrderServiceApplicationTests using Java 17.0.7 with PID 13040 (started by binul in D:\\Project Docs\\R&amp;D\\Microservices-Online-Shop\\order-service)\n2023-05-10T16:14:15.444+05:30  INFO 13040 --- [           main] c.e.o.OrderServiceApplicationTests       : No active profile set, falling back to 1 default profile: &quot;default&quot;\n2023-05-10T16:14:16.013+05:30  INFO 13040 --- [           main] .t.d.DockerMachineClientProviderStrategy : docker-machine executable was not found on PATH ([C:\\Program Files\\Common Files\\Oracle\\Java\\javapath, C:\\Program Files (x86)\\Common Files\\Oracle\\Java\\javapath, C:\\Windows\\system32, C:\\Windows, C:\\Windows\\System32\\Wbem, C:\\Windows\\System32\\WindowsPowerShell\\v1.0\\, C:\\Windows\\System32\\OpenSSH\\, C:\\Program Files\\Git\\cmd, C:\\Program Files\\Java\\jdk1.8.0_311\\bin, C:\\dev_tools\\apache-maven-3.8.3\\bin, C:\\Program Files\\PuTTY\\, C:\\Program Files\\dotnet\\, C:\\Program Files\\nodejs\\, C:\\Program Files\\Meld\\, C:\\Users\\binul\\AppData\\Local\\Microsoft\\WindowsApps, C:\\Users\\binul\\AppData\\Local\\Programs\\Microsoft VS Code\\bin, C:\\dev_tools\\gradle-6.8.1\\bin, C:\\Users\\binul\\AppData\\Roaming\\npm, C:\\Users\\binul\\.dotnet\\tools])\n2023-05-10T16:14:16.014+05:30 ERROR 13040 --- [           main] o.t.d.DockerClientProviderStrategy       : Could not find a valid Docker environment. Please check configuration. Attempted configurations were:\nAs no valid configuration was found, execution cannot continue.\nSee https://www.testcontainers.org/on_failure.html for more details.\n2023-05-10T16:14:16.027+05:30  WARN 13040 --- [           main] o.s.w.c.s.GenericWebApplicationContext   : Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanDefinitionStoreException: Failed to process import candidates for configuration class [com.example.orderservice.OrderServiceApplication]: Error processing condition on org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$EmbeddedDatabaseConfiguration\n2023-05-10T16:14:16.054+05:30  INFO 13040 --- [           main] .s.b.a.l.ConditionEvaluationReportLogger : \n\nError starting ApplicationContext. To display the condition evaluation report re-run your application with 'debug' enabled.\n2023-05-10T16:14:16.088+05:30 ERROR 13040 --- [           main] o.s.boot.SpringApplication               : Application run failed\n\norg.springframework.beans.factory.BeanDefinitionStoreException: Failed to process import candidates for configuration class [com.example.orderservice.OrderServiceApplication]: Error processing condition on org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$EmbeddedDatabaseConfiguration\n    at org.springframework.context.annotation.ConfigurationClassParser.processImports(ConfigurationClassParser.java:524) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.annotation.ConfigurationClassParser$DeferredImportSelectorGroupingHandler.lambda$processGroupImports$1(ConfigurationClassParser.java:726) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75) ~[na:na]\n    at org.springframework.context.annotation.ConfigurationClassParser$DeferredImportSelectorGroupingHandler.processGroupImports(ConfigurationClassParser.java:723) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.annotation.ConfigurationClassParser$DeferredImportSelectorHandler.process(ConfigurationClassParser.java:694) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.annotation.ConfigurationClassParser.parse(ConfigurationClassParser.java:182) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.processConfigBeanDefinitions(ConfigurationClassPostProcessor.java:415) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.annotation.ConfigurationClassPostProcessor.postProcessBeanDefinitionRegistry(ConfigurationClassPostProcessor.java:287) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanDefinitionRegistryPostProcessors(PostProcessorRegistrationDelegate.java:344) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.invokeBeanFactoryPostProcessors(PostProcessorRegistrationDelegate.java:115) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.support.AbstractApplicationContext.invokeBeanFactoryPostProcessors(AbstractApplicationContext.java:747) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:565) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:733) ~[spring-boot-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:435) ~[spring-boot-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:311) ~[spring-boot-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.test.context.SpringBootContextLoader.lambda$loadContext$3(SpringBootContextLoader.java:137) ~[spring-boot-test-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:58) ~[spring-core-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.util.function.ThrowingSupplier.get(ThrowingSupplier.java:46) ~[spring-core-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.boot.SpringApplication.withHook(SpringApplication.java:1405) ~[spring-boot-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.test.context.SpringBootContextLoader$ContextLoaderHook.run(SpringBootContextLoader.java:545) ~[spring-boot-test-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:137) ~[spring-boot-test-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.test.context.SpringBootContextLoader.loadContext(SpringBootContextLoader.java:108) ~[spring-boot-test-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContextInternal(DefaultCacheAwareContextLoaderDelegate.java:184) ~[spring-test-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.test.context.cache.DefaultCacheAwareContextLoaderDelegate.loadContext(DefaultCacheAwareContextLoaderDelegate.java:118) ~[spring-test-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.test.context.support.DefaultTestContext.getApplicationContext(DefaultTestContext.java:127) ~[spring-test-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.test.context.web.ServletTestExecutionListener.setUpRequestContextIfNecessary(ServletTestExecutionListener.java:191) ~[spring-test-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.test.context.web.ServletTestExecutionListener.prepareTestInstance(ServletTestExecutionListener.java:130) ~[spring-test-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.test.context.TestContextManager.prepareTestInstance(TestContextManager.java:241) ~[spring-test-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.test.context.junit.jupiter.SpringExtension.postProcessTestInstance(SpringExtension.java:138) ~[spring-test-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$10(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.executeAndMaskThrowable(ClassBasedTestDescriptor.java:382) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$invokeTestInstancePostProcessors$11(ClassBasedTestDescriptor.java:377) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at java.base/java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[na:na]\n    at java.base/java.util.ArrayList$ArrayListSpliterator.forEachRemaining(ArrayList.java:1625) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[na:na]\n    at java.base/java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[na:na]\n    at java.base/java.util.stream.StreamSpliterators$WrappingSpliterator.forEachRemaining(StreamSpliterators.java:310) ~[na:na]\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:735) ~[na:na]\n    at java.base/java.util.stream.Streams$ConcatSpliterator.forEachRemaining(Streams.java:734) ~[na:na]\n    at java.base/java.util.stream.ReferencePipeline$Head.forEach(ReferencePipeline.java:762) ~[na:na]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.invokeTestInstancePostProcessors(ClassBasedTestDescriptor.java:376) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$instantiateAndPostProcessTestInstance$6(ClassBasedTestDescriptor.java:289) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.instantiateAndPostProcessTestInstance(ClassBasedTestDescriptor.java:288) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$4(ClassBasedTestDescriptor.java:278) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at java.base/java.util.Optional.orElseGet(Optional.java:364) ~[na:na]\n    at org.junit.jupiter.engine.descriptor.ClassBasedTestDescriptor.lambda$testInstancesProvider$5(ClassBasedTestDescriptor.java:277) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at org.junit.jupiter.engine.execution.TestInstancesProvider.getTestInstances(TestInstancesProvider.java:31) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$prepare$0(TestMethodTestDescriptor.java:105) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:104) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.prepare(TestMethodTestDescriptor.java:68) ~[junit-jupiter-engine-5.9.3.jar:5.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$prepare$2(NodeTestTask.java:123) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.prepare(NodeTestTask.java:123) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:90) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54) ~[junit-platform-engine-1.9.3.jar:1.9.3]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147) ~[junit-platform-launcher-1.9.3.jar:1.9.3]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127) ~[junit-platform-launcher-1.9.3.jar:1.9.3]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90) ~[junit-platform-launcher-1.9.3.jar:1.9.3]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55) ~[junit-platform-launcher-1.9.3.jar:1.9.3]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102) ~[junit-platform-launcher-1.9.3.jar:1.9.3]\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54) ~[junit-platform-launcher-1.9.3.jar:1.9.3]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114) ~[junit-platform-launcher-1.9.3.jar:1.9.3]\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86) ~[junit-platform-launcher-1.9.3.jar:1.9.3]\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86) ~[junit-platform-launcher-1.9.3.jar:1.9.3]\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53) ~[junit-platform-launcher-1.9.3.jar:1.9.3]\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:69) ~[junit5-rt.jar:na]\n    at com.intellij.rt.execution.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:47) ~[junit-rt.jar:na]\n    at com.intellij.rt.execution.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:242) ~[junit-rt.jar:na]\n    at com.intellij.rt.execution.junit.JUnitStarter.main(JUnitStarter.java:70) ~[junit-rt.jar:na]\nCaused by: java.lang.IllegalStateException: Error processing condition on org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$EmbeddedDatabaseConfiguration\n    at org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:60) ~[spring-boot-autoconfigure-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.context.annotation.ConditionEvaluator.shouldSkip(ConditionEvaluator.java:108) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:219) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.annotation.ConfigurationClassParser.processMemberClasses(ConfigurationClassParser.java:365) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.annotation.ConfigurationClassParser.doProcessConfigurationClass(ConfigurationClassParser.java:265) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.annotation.ConfigurationClassParser.processConfigurationClass(ConfigurationClassParser.java:243) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.context.annotation.ConfigurationClassParser.processImports(ConfigurationClassParser.java:514) ~[spring-context-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    ... 93 common frames omitted\nCaused by: java.lang.IllegalStateException: Previous attempts to find a Docker environment failed. Will not retry. Please see logs and check configuration\n    at org.testcontainers.dockerclient.DockerClientProviderStrategy.getFirstValidStrategy(DockerClientProviderStrategy.java:212) ~[testcontainers-1.18.0.jar:1.18.0]\n    at org.testcontainers.DockerClientFactory.getOrInitializeStrategy(DockerClientFactory.java:150) ~[testcontainers-1.18.0.jar:1.18.0]\n    at org.testcontainers.DockerClientFactory.dockerHostIpAddress(DockerClientFactory.java:323) ~[testcontainers-1.18.0.jar:1.18.0]\n    at org.testcontainers.containers.ContainerState.getHost(ContainerState.java:64) ~[testcontainers-1.18.0.jar:na]\n    at org.testcontainers.containers.MySQLContainer.getJdbcUrl(MySQLContainer.java:104) ~[mysql-1.18.0.jar:na]\n    at com.example.orderservice.OrderServiceApplicationTests.lambda$setProperties$0(OrderServiceApplicationTests.java:46) ~[test-classes/:na]\n    at org.springframework.test.context.support.DynamicValuesPropertySource.getProperty(DynamicValuesPropertySource.java:43) ~[spring-test-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.core.env.PropertySourcesPropertyResolver.getProperty(PropertySourcesPropertyResolver.java:85) ~[spring-core-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertyResolver$DefaultResolver.getProperty(ConfigurationPropertySourcesPropertyResolver.java:123) ~[spring-boot-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertyResolver.findPropertyValue(ConfigurationPropertySourcesPropertyResolver.java:97) ~[spring-boot-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertyResolver.getProperty(ConfigurationPropertySourcesPropertyResolver.java:74) ~[spring-boot-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.context.properties.source.ConfigurationPropertySourcesPropertyResolver.getProperty(ConfigurationPropertySourcesPropertyResolver.java:60) ~[spring-boot-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.core.env.AbstractEnvironment.getProperty(AbstractEnvironment.java:552) ~[spring-core-6.0.9-20230509.130721-27.jar:6.0.9-SNAPSHOT]\n    at org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$EmbeddedDatabaseCondition.hasDataSourceUrlProperty(DataSourceAutoConfiguration.java:156) ~[spring-boot-autoconfigure-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.autoconfigure.jdbc.DataSourceAutoConfiguration$EmbeddedDatabaseCondition.getMatchOutcome(DataSourceAutoConfiguration.java:139) ~[spring-boot-autoconfigure-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    at org.springframework.boot.autoconfigure.condition.SpringBootCondition.matches(SpringBootCondition.java:47) ~[spring-boot-autoconfigure-3.1.0-20230509.165129-256.jar:3.1.0-SNAPSHOT]\n    ... 99 common frames omitted\n</code></pre>\n<p>I highly suspect that this is related to injecting Mysql image into the local environment.\nNote : I did the same code to Mongodb and it works fine.</p>\n<p>Could anyone had the same issue and resolved ? btw unit testing becoming embarrassing :-(</p>\n"},{"tags":["java","jpa","jakarta-migration"],"comments":[{"owner":{"user_id":3728901,"display_name":"Rapha&#235;l Colantonio"},"edited":false,"comment_id":134402233,"body":"You ask a question related to container, but you did not show your <code>Dockerfile</code>. You command came to error as expected, because Jakarta EE did not in classpath."},{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":134402270,"body":"If you want to run your project using <code>java</code> not <code>mvn</code>, then you can collect all the dependent JARs you need (the transitive dependencies downloaded by your POM). See <a href=\"https://stackoverflow.com/q/10294070/12567365\">How extract all the jars needed for a maven project to a folder?</a>, and probably similar questions. Then, make sure these are all on the classpath of your <code>java</code> command - something like: <code>java -cp lib&#47;*.jar java.org.example.Main</code>"},{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":134402339,"body":"Did you include the Jakarta Persistence API as a dependency?"},{"owner":{"user_id":4165384,"display_name":"Damien Cooke"},"edited":false,"comment_id":134407371,"body":"@BasilBourque I did In the example I mentioned the app was able to satisfy the dependencies from &lt;artifactId&gt;hibernate-core-Jakarta&lt;/artifactId&gt;,  the issue I think is that I am missing a runtime dependency I am not sure what to resolve it with."},{"owner":{"user_id":4165384,"display_name":"Damien Cooke"},"edited":false,"comment_id":134407446,"body":"@andrewJames I believe all the dependencies should be in the jar"},{"owner":{"user_id":4165384,"display_name":"Damien Cooke"},"edited":false,"comment_id":134407463,"body":"@Rapha&#235;lColantonio Sorry, that was misleading, I was referring to a Java EE Container (Payara or Glassfish for example)"},{"owner":{"user_id":12567365,"display_name":"andrewJames"},"edited":false,"comment_id":134407993,"body":"What jar do you mean? The command in the question (<code>java org.example.Main</code>) does not refer to any jar. Also the jar would need to have been built as a &quot;fat&quot; jar. Was it built that way?"}],"answers":[{"owner":{"user_id":4165384,"display_name":"Damien Cooke"},"up_vote_count":1,"is_accepted":false,"creation_date":1683805926,"answer_id":76227354,"body":"<p>In this particular case it was a matter of putting all the jars that it needs (that would normally be provided by the container) in the modules directory and calling the app like this:</p>\n<p>java --class-path &quot;modules/*&quot; --module-path modules com.smartphonedev.mqttlistener.MQTTClient</p>\n"}],"owner":{"user_id":4165384,"display_name":"Damien Cooke"},"view_count":50,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1683673788,"question_id":76213908,"body":"<p>I get the following exception</p>\n<pre class=\"lang-java prettyprint-override\"><code>ClassNotFoundException: jakarta.persistence.Persistencee\n</code></pre>\n<p>This error happens in my standalone Java web-app I am trying to use JPA with it. I have normally used JPA in a container and have done for years. You can view a very simple app here: (<a href=\"https://github.com/pramodShehan5/jpa-example\" rel=\"nofollow noreferrer\">https://github.com/pramodShehan5/jpa-example</a> ) that displays the same behavior.</p>\n<p>File <code>pom.xml</code> contains the following dependencies</p>\n<pre><code>&lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n        &lt;artifactId&gt;hibernate-core-jakarta&lt;/artifactId&gt;\n        &lt;version&gt;5.6.14.Final&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n        &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n        &lt;version&gt;42.6.0&lt;/version&gt;\n    &lt;/dependency&gt;\n&lt;/dependencies&gt;\n</code></pre>\n<p>When this sample app is compiled with <code>mvn compile</code> all is fine.</p>\n<pre class=\"lang-bash prettyprint-override\"><code>cd target/classes\njava org.example.Main \n</code></pre>\n<p>Error</p>\n<pre class=\"lang-java prettyprint-override\"><code>    Exception in thread &quot;main&quot; java.lang.NoClassDefFoundError: jakarta/persistence/Persistence\n        at org.example.Main.main(Main.java:21)\n    Caused by: java.lang.ClassNotFoundException: jakarta.persistence.Persistence\n        at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n        at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n        at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:521)\n</code></pre>\n<p>So the problem as I see it is I need a provider added into my jar and this is where I need help. Can anyone point out what I need to add to my pom file to give me a provider (assuming that is really what I am missing) or do I just need to get one of the GlassFish JARs on the classpath to do this for me?</p>\n"},{"tags":["java","macos"],"comments":[{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":134356824,"body":"Similar but apparently outdated Questions: <a href=\"https://stackoverflow.com/q/27372524/642706\"><i>OSX Notification System for Java</i></a>, <a href=\"https://stackoverflow.com/q/11720652/642706\"><i>Using 10.8 Notification Center in Java</i></a>, <a href=\"https://stackoverflow.com/q/13638092/642706\"><i>Using OS X 10.8 Notification Center (NSUserNotification) with Java</i></a>, and <a href=\"https://stackoverflow.com/q/53153578/642706\"><i>Mac OS Push Notifications with Java</i></a>."}],"answers":[{"owner":{"user_id":10684385,"display_name":"Soheil Babadi"},"up_vote_count":1,"is_accepted":true,"creation_date":1683349645,"answer_id":76187243,"body":"<p>I have had this experience before. It is better to use a more suitable library like <a href=\"https://github.com/sshtools/two-slices\" rel=\"nofollow noreferrer\">two-slices</a> instead of Java Swing, which is cross platform and works the same in all operating systems. Your code should be such that you can display the icon and message in the System Tray</p>\n<pre><code>Toast.toast(ToastType.INFO, &quot;Information&quot;, &quot;Here is some information you cannot do without.&quot;);\n</code></pre>\n"}],"owner":{"user_id":13460562,"display_name":"Jelly Qwerty"},"view_count":41,"up_vote_count":2,"accepted_answer_id":76187243,"answer_count":1,"score":2,"creation_date":1683348110,"question_id":76187166,"body":"<p><a href=\"https://i.stack.imgur.com/f2CKX.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/f2CKX.png\" alt=\"enter image description here\" /></a>I am now working on a java project which needs to create a pop-up notification, similar to the one shown in the picture. For Windows, SystemTray could be used, but for Mac OS it doesn't show the notification globally. How could I achieve this? Is there any specific libraries I need to use?</p>\n"},{"tags":["java","record","z3","type-parameter"],"answers":[{"owner":{"user_id":936310,"display_name":"alias"},"up_vote_count":1,"is_accepted":true,"creation_date":1683300370,"answer_id":76183759,"body":"<p>z3 API's (whether it's C/C++/Java/Python) don't allow for creation of parameterized types.</p>\n<p>Note that parameterized-types are essentially a nicety in SMTLib: Essentially, each instantiation with different sorts will be a separate type of its own, with nothing to do with each other. So, the idea is to do this on your own: Write a function that takes the relevant sorts, and creates the corresponding &quot;monomorphized&quot; type on the fly. You'll have to change the accessor names slightly each time to avoid clashes, or you can add enough type-annotations to let the solver figure out the relevant types. (I'd go with the former as it is simpler, but latter is definitely possible too.)</p>\n"}],"owner":{"user_id":16632588,"display_name":"mkoe"},"view_count":25,"up_vote_count":2,"accepted_answer_id":76183759,"answer_count":1,"score":2,"creation_date":1683299535,"question_id":76183642,"body":"<p>With Z3 it is possible to declare custom datatypes (i.e., records) that take type parameters. For example, a <code>Pair</code> that takes the types <code>T1</code> and <code>T2</code> for its first and second element respectively, is declared as follows (taken from the <a href=\"https://microsoft.github.io/z3guide/docs/theories/Datatypes/\" rel=\"nofollow noreferrer\">Z3 Guide</a>):</p>\n<pre><code>(declare-datatypes (T1 T2) ((Pair (mk-pair (first T1) (second T2)))))\n</code></pre>\n<p>This type declaration can then be used to create pairs with different element types. For example, the constants <code>p1</code> and <code>p2</code> are both pairs with different element types (<code>Int String</code> and <code>Bool Int</code> respectively):</p>\n<pre><code>(declare-const p1 (Pair Int String))\n(declare-const p2 (Pair Bool Int))\n</code></pre>\n<p>I want to declare such a parametrized datatype using Z3's <a href=\"https://github.com/Z3Prover/z3/blob/master/examples/java/JavaExample.java\" rel=\"nofollow noreferrer\">Java API</a>. However, the datatype declarations there seem to not have a feature to add type parameters to datatype declarations.</p>\n<p>The Java API of Z3 does provide a method <code>mkDatatypeSort</code> in its <code>Context</code> class to declare a new datatype in Z3 (<a href=\"https://z3prover.github.io/api/html/classcom_1_1microsoft_1_1z3_1_1_context.html#ae53d8b6d95db6cecd53e9fe25deefb70\" rel=\"nofollow noreferrer\">Link</a>). However, this method does not take any arguments for type parameters. Also the constructors (taken as second argument of <code>mkDatatypeSort</code>) do not allow to define type parameters.</p>\n<p>I expected that it is possible to declare datatypes with type parameters in Z3's Java API, but I am not able to do so.  Am I missing something or does this feature just not exist in the Java API?</p>\n<p>Is it possible to declare such datatypes with the Java API?</p>\n"},{"tags":["java","spring","postgresql","spring-boot","jooq"],"answers":[{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"up_vote_count":0,"is_accepted":false,"creation_date":1683115462,"answer_id":76163604,"body":"<p>In your particular case, you can nest with <code>JOIN</code> and <code>GROUP BY</code> / <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/aggregate-functions/multiset-agg-function/\" rel=\"nofollow noreferrer\"><code>MULTISET_AGG</code></a>, instead of using the <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/multiset-value-constructor/\" rel=\"nofollow noreferrer\"><code>MULTISET</code> value constructor</a>, because you're nesting only one level of nested collections (the second nesting is not a collection). The main difference will be what happens when you don't have any <code>BAR</code> for a <code>FOO</code>. With aggregation, this produces a <code>NULL</code> value, not an empty collection.</p>\n<p>However, there are a few limitations in the API (e.g. <a href=\"https://github.com/jOOQ/jOOQ/issues/15008\" rel=\"nofollow noreferrer\">#15008</a>, <a href=\"https://github.com/jOOQ/jOOQ/issues/15007\" rel=\"nofollow noreferrer\">#15007</a>, <a href=\"https://github.com/jOOQ/jOOQ/issues/13937\" rel=\"nofollow noreferrer\">#13937</a>) making this a bit difficult using the <code>DefaultRecordMapper</code> (the <code>fetchInto(X.class)</code> call). Here's a solution using <a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/fetching/ad-hoc-converter/\" rel=\"nofollow noreferrer\">ad-hoc conversion</a> and type safety:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ctx().select(\n        FOO.FOO_NAME,\n        multisetAgg(\n\n          // Add more BAR columns here, if needed\n          row(\n\n            // Add more BAZZ columns here, if needed\n            BAR.bazz().NAME\n          ).mapping(Bazz::new)\n        ).convertFrom(r -&gt; r.map(Records.mapping(Bar::new)))\n      )\n     .from(FOO)\n     .join(BAR).on(BAR.FOO_ID.eq(FOO.ID))\n     .groupBy(FOO.ID)\n     .where(FOO.FOO_NAME.eq(fooName))\n     .fetch(Records.mapping(Foo::new));\n</code></pre>\n<p>This is assuming you have the relevant constructors. If you don't, you can always revert to <code>into(X.class)</code> calls on each level.</p>\n<p>One of the benefits of using <a href=\"https://blog.jooq.org/why-you-should-use-jooq-with-code-generation/\" rel=\"nofollow noreferrer\">jOOQ's code generator</a> is that you have type safe nested collection mapping as shown above.</p>\n"},{"owner":{"user_id":7840215,"display_name":"nogalo"},"up_vote_count":1,"is_accepted":false,"creation_date":1683567052,"answer_id":76202936,"body":"<p>I've made a little research and found several solutions to the aforementioned problem.</p>\n<ol>\n<li><p>Using multiset() -&gt; the previous example</p>\n<ul>\n<li>PROS:\n<ul>\n<li>least verbose way</li>\n<li>Java part is pretty simple if you know what you are doing</li>\n</ul>\n</li>\n<li>CONS:\n<ul>\n<li>besides knowing SQL, you'll have to research how <code>DSL.multiset()</code> works</li>\n<li>you have to use subselect</li>\n<li>the generated SQL might look very complicated, probably hard to debug</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Using multisetAgg()</p>\n<pre><code>return ctx().select(FOO.ID,\n                    FOO.FOO_NAME,\n                    multisetAgg(\n                            BAR.ID,\n                            row(BAR.bazz().ID,\n                                    BAR.bazz().NAME\n                            ).mapping(Bazz::new),\n                            BAR.SOME_ATTRIBUTE,\n                            BAR.SOME_OTHER_ATTRIBUTE\n                    ).convertFrom(r -&gt; r.map(Records.mapping(Bar::new))).as(&quot;bars&quot;),\n                    FOO.CREATED_AT,\n                    FOO.MODIFIED_AT\n            )\n            .from(FOO)\n            .join(BAR).on(BAR.FOO_ID.eq(FOO.ID))\n            .groupBy(FOO.ID)\n            .having(FOO.FOO_NAME.eq(fooName))\n            .fetchInto(Foo.class);\n</code></pre>\n<ul>\n<li>PROS:\n<ul>\n<li>still looks pretty simple</li>\n<li>you don't have to use subselect</li>\n</ul>\n</li>\n<li>CONS:\n<ul>\n<li>besides knowing SQL, you'll have to research how <code>DSL.multisetAgg()</code> works</li>\n<li>the order of the columns in the <code>SELECT</code> statement must match the order of the parameters in constructors</li>\n<li>the generated SQL might look very complicated, probably hard to debug</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Using <a href=\"https://modelmapper.org/\" rel=\"nofollow noreferrer\">modelmapper</a></p>\n<pre><code>@Bean\npublic ModelMapper modelMapper() {\n    var modelMapper = new ModelMapper();\n    modelMapper.getConfiguration()\n            .addValueReader(new RecordValueReader())\n            .setSourceNameTokenizer(NameTokenizers.UNDERSCORE);\n    return modelMapper;\n}\n</code></pre>\n<pre><code>return ctx().select(FOO.asterisk(),\n                        BAR.asterisk(),\n                        BAZZ.asterisk()\n                )\n                .from(FOO)\n                .join(BAR).on(BAR.FOO_ID.eq(FOO.ID))\n                .join(BAZZ).on(BAZZ.ID.eq(BAR.BAZZ_ID))\n                .where(FOO.FOO_NAME.eq(fooName))\n                .orderBy(FOO.ID, BAR.ID)\n                .collect(groupingBy(\n                        r -&gt; modelMapper.map(r.into(FOO), Foo.class), filtering(\n                                r -&gt; r.get(BAR.ID) != null, mapping(\n                                        r -&gt; new Pair(modelMapper.map(r.into(BAR), Bar.class),\n                                                modelMapper.map(r.into(BAZZ), Bazz.class)),\n                                        toList()\n                                )\n                        )\n                ))\n                .entrySet().stream().map(o -&gt; {\n                    var foo = o.getKey();\n                    return foo.setBars(o.getValue().stream().map(v -&gt; {\n                        var bar = (Bar) v.getValue0();\n                        var bazz = (Bazz) v.getValue1();\n                        return bar.setBazz(bazz);\n                    }).toList());\n                }).toList();\n</code></pre>\n<ul>\n<li>PROS:\n<ul>\n<li>1:1 equivalence between SQL syntax and the jOOQ API</li>\n</ul>\n</li>\n<li>CONS:\n<ul>\n<li>pretty verbose</li>\n<li>easy to mess up (manual grouping and mapping)</li>\n<li>external library</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>Using <a href=\"https://simpleflatmapper.org/0106-getting-started-jooq.html\" rel=\"nofollow noreferrer\">SimpleFlatMapper</a></p>\n<pre><code>private final JdbcMapper&lt;Foo&gt; fooResponseJdbcMapper;\n\npublic FooRepository(...) {\n    this.fooResponseJdbcMapper = JdbcMapperFactory.newInstance()\n            .addKeys(&quot;id&quot;)\n            .ignorePropertyNotFound()\n            .newMapper(Foo.class);\n    }\n.\n.\n.\npublic List&lt;Foo&gt; findByCustomerId(Long id) {\n    try (var result = ctx().select(FOO.ID,\n                        FOO.FOO_NAME,\n                        FOO.CREATED_AT,\n                        FOO.MODIFIED_AT,\n                        BAR.ID.as(&quot;bars_id&quot;),\n                        BAR.SOME_ATTRIBUTE.as(&quot;bars_some_attribute&quot;),\n                        BAR.SOME_OTHER_ATTRIBUTE.as(&quot;bars_some_other_attribute&quot;),\n                        BAZZ.ID.as(&quot;bars_bazz_id&quot;),\n                        BAZZ.NAME.as(&quot;bars_bazz_name&quot;)\n                )\n                .from(FOO)\n                .join(BAR).on(BAR.FOO_ID.eq(FOO.ID))\n                .join(BAZZ).on(BAZZ.ID.eq(BAR.BAZZ_ID))\n                .where(FOO.FOO_NAME.eq(fooName))\n                .orderBy(FOO.ID, BAR.ID)\n                .fetchResultSet()) {\n            return fooResponseJdbcMapper.stream(result).toList();\n    } catch (SQLException e) {\n        throw new RuntimeException(e);\n    }\n</code></pre>\n<ul>\n<li>PROS:\n<ul>\n<li>1:1 equivalence between SQL syntax and the jOOQ API</li>\n<li>looks pretty simple</li>\n</ul>\n</li>\n<li>CONS:\n<ul>\n<li>external library</li>\n<li>you have to assign aliases to selected columns if you want SimpleFlatMapper to map everything correctly</li>\n</ul>\n</li>\n</ul>\n</li>\n</ol>\n"}],"owner":{"user_id":7840215,"display_name":"nogalo"},"view_count":65,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1683110844,"question_id":76162952,"body":"<p>I am trying to fetch complex structure from the database using jOOQ. I will try to explain on an example where the problem is.</p>\n<p>So, let's imagine we have classes Foo, Bar and Bazz:</p>\n<pre><code>public class Foo {\n    private String fooName;\n    private List&lt;Bar&gt; bars;\n}\n\npublic class Bar {\n    private Bazz bazz;\n}\n\npublic class Bazz {\n    private String name;\n}\n</code></pre>\n<p>I want to fetch and populate Foo -&gt; List&lt;Bar&gt; -&gt; Bazz relationship.</p>\n<p>I tried with <code>MULTISET</code> and it works, but I want to avoid subqueries. I want to fetch and map that using <code>JOIN</code>. I wonder if it is possible to fetch that using reflection, something like <a href=\"https://stackoverflow.com/a/75723738/7840215\">this</a>.</p>\n<p>Here is an example with <code>MULTISET</code> :</p>\n<pre><code>public List&lt;FooResponse&gt; findByFooName(String fooName) {\n        return ctx().select(FOO.asterisk(),\n                        multiset(select(BAR.asterisk(),\n                                BAR.bazz().as(&quot;bazz&quot;))\n                              .from(BAR)\n                              .where(BAR.FOO_ID.eq(FOO.ID))).as(&quot;bars&quot;))\n        .from(FOO)\n        .where(FOO.FOO_NAME.eq(fooName))\n        .fetchInto(FooResponse.class);\n    }\n</code></pre>\n"},{"tags":["java","spring-boot","azure","maven","azure-spring-cloud"],"comments":[{"owner":{"user_id":7750784,"display_name":"Hoang Duc Nguyen"},"edited":false,"comment_id":134502581,"body":"I&#39;m experiencing exactly the same issue. Have you found the workaround or solution?"},{"owner":{"user_id":949297,"display_name":"Nicolas Riousset"},"edited":false,"comment_id":134502927,"body":"Not yet. I had some unsuccessful contacts with Azure support, I hope they&#39;ll get back to me."},{"owner":{"user_id":7750784,"display_name":"Hoang Duc Nguyen"},"edited":false,"comment_id":134517092,"body":"I visit this issue which were informed fixed in 1.17.0. According to the discussion, the issue was narrowed down to action of deploying to the Azure Spring Apps Consumption Plan. That was my case as well. <a href=\"https://github.com/microsoft/azure-maven-plugins/issues/2268\" rel=\"nofollow noreferrer\">github.com/microsoft/azure-maven-plugins/issues/2268</a> With 1.17.0 released, it fixed this error but I haven&#39;t seen any report of whether the deployment to Azure Spring Apps Consumption Plan would success since they also stated that they doesn&#39;t have plan to support the plan soon. What do you think?"}],"answers":[{"owner":{"user_id":19991670,"display_name":"Pravallika KV"},"up_vote_count":1,"is_accepted":false,"creation_date":1683288063,"answer_id":76181971,"body":"<blockquote>\n<p>Azure Spring Apps deployment with Maven causes error : Invalid arguments: DeploymentSettings must be provided</p>\n</blockquote>\n<p>I would suggest you to run <code>mvn clean install</code> before deploying your application to Azure Spring Apps.</p>\n<p>And also Check if the below configuration is being added in your pom.xml file after running <code>mvn com.microsoft.azure:azure-spring-apps-maven-plugin:1.17.0:config</code>.</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;plugin&gt;\n        &lt;groupId&gt;com.microsoft.azure&lt;/groupId&gt;\n        &lt;artifactId&gt;azure-spring-apps-maven-plugin&lt;/artifactId&gt;\n        &lt;version&gt;1.17.0&lt;/version&gt;\n        &lt;configuration&gt;\n                    \n            &lt;subscriptionId&gt;Azure_SUbscription_id&lt;/subscriptionId&gt;\n            &lt;resourceGroup&gt;Resource_group_name&lt;/resourceGroup&gt;\n            &lt;clusterName&gt;kpspringapp&lt;/clusterName&gt;\n            &lt;appName&gt;springboot-crud&lt;/appName&gt;\n            &lt;isPublic&gt;false&lt;/isPublic&gt;\n            &lt;deployment&gt;\n                  &lt;cpu&gt;1&lt;/cpu&gt;\n                  &lt;memoryInGB&gt;1&lt;/memoryInGB&gt;\n                  &lt;instanceCount&gt;1&lt;/instanceCount&gt;\n                  &lt;runtimeVersion&gt;Java 11&lt;/runtimeVersion&gt;\n                  &lt;resources&gt;\n                      &lt;resource&gt;\n                          &lt;filtering/&gt;\n                          &lt;mergeId/&gt;\n                          &lt;targetPath/&gt;\n                        &lt;directory&gt;${project.basedir}/target&lt;/directory&gt;\n                          &lt;includes&gt;\n                               &lt;include&gt;*.jar&lt;/include&gt;\n                          &lt;/includes&gt;\n                       &lt;/resource&gt;\n                   &lt;/resources&gt;\n              &lt;/deployment&gt;\n         &lt;/configuration&gt;\n    &lt;/plugin&gt;\n</code></pre>\n<hr />\n<p>I have created a spring boot application and deployed to Azure Spring Apps:</p>\n<ol>\n<li>Logged into Azure via command line.</li>\n</ol>\n<p><img src=\"https://i.imgur.com/0Hm2vQY.png\" alt=\"enter image description here\" /></p>\n<ol start=\"2\">\n<li>Generating the configurations to deploy the Spring Boot application to Azure Spring Apps by running <code>mvn com.microsoft.azure:azure-spring-apps-maven-plugin:1.17.0:config</code> command.\nThis will ask to select the <em>subscription, Resource group, Azure Spring Apps name, Java runtime version</em> etc., and then generate the configurations required for deployment.</li>\n</ol>\n<p><img src=\"https://i.imgur.com/WUrjFfn.png\" alt=\"enter image description here\" />\n<img src=\"https://i.imgur.com/PVCLOWA.png\" alt=\"enter image description here\" /></p>\n<p>I was also getting errors initially and couldn't deploy the application.\nBut, after running the command  <code>mvn clean install</code>, I was able to deploy the application to spring apps.</p>\n<p><img src=\"https://i.imgur.com/9Nz0yt1.png\" alt=\"enter image description here\" />\n<img src=\"https://i.imgur.com/mECLH70.png\" alt=\"enter image description here\" />\n<img src=\"https://i.imgur.com/koB5xgY.png\" alt=\"enter image description here\" /></p>\n<p><em><strong>Deploying the application to Azure Spring Apps:</strong></em></p>\n<p><img src=\"https://i.imgur.com/DqFNNtK.png\" alt=\"enter image description here\" /></p>\n<p><strong>Portal:</strong>\n<img src=\"https://i.imgur.com/zQcK01s.png\" alt=\"enter image description here\" /></p>\n<p><strong>Response:</strong>\n<img src=\"https://i.imgur.com/qmbvd0X.png\" alt=\"enter image description here\" /></p>\n"}],"owner":{"user_id":949297,"display_name":"Nicolas Riousset"},"view_count":68,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1683048530,"question_id":76157424,"body":"<p>I'm trying to deploy a Spring Boot application to Microsoft Azure Spring Apps using Maven.</p>\n<p>I strictly followed this tutorial from Microsoft : <a href=\"https://learn.microsoft.com/en-us/azure/spring-apps/how-to-maven-deploy-apps\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/spring-apps/how-to-maven-deploy-apps</a> , except for the azure-spring-apps-maven-plugin which had to be upgraded from 1.10.0 to 1.17.0, as per follows :</p>\n<p><code>mvn com.microsoft.azure:azure-spring-apps-maven-plugin:1.17.0:config</code></p>\n<p>But when running the deploy command with the sample project :</p>\n<p><code>mvn azure-spring-apps:deploy</code></p>\n<p>The following <em>&quot;Invalid arguments: DeploymentSettings must be provided&quot;</em> error occurs :</p>\n<pre><code>[ERROR] Operator called default onErrorDropped\nreactor.core.Exceptions$StaticThrowable: Operator has been terminated\n[INFO] ------------------------------------------------------------------------\n[INFO] BUILD FAILURE\n[INFO] ------------------------------------------------------------------------\n[INFO] Total time:  13.680 s\n[INFO] Finished at: 2023-05-02T19:06:23+02:00\n[INFO] ------------------------------------------------------------------------\n[ERROR] Failed to execute goal com.microsoft.azure:azure-spring-apps-maven-plugin:1.17.0:deploy (default-cli) on project hellospring: create or update Spring app(hellospring) from config: AzureToolkitRuntimeException: create Azure Spring App deployment (default): Status code 400, &quot;{&quot;error&quot;:{&quot;code&quot;:&quot;BadArgument&quot;,&quot;message&quot;:&quot;Invalid arguments: DeploymentSettings must be provided.&quot;,&quot;details&quot;:[{&quot;code&quot;:&quot;BadArgument&quot;,&quot;message&quot;:&quot;DeploymentSettings must be provided.&quot;,&quot;target&quot;:&quot;Properties.DeploymentSettings&quot;}]}}&quot; -&gt; [Help 1]\n</code></pre>\n<p>The HelloSpring sample application does not require any specific configuration (no database, no file storage, no https certificates, etc.).</p>\n<p>Any idea of what I may be doing wrong ?</p>\n<p>Thanks a lot for your help</p>\n"},{"tags":["java","gradle","lwjgl"],"answers":[{"owner":{"user_id":8623159,"display_name":"httpdigest"},"up_vote_count":1,"is_accepted":true,"creation_date":1682970428,"answer_id":76149756,"body":"<p>The problem is that you are creating an &quot;uber&quot;-jar with your current <code>jar</code> block. You can verify this by inspecting the single jar file produced by the Gradle build in the <code>build/libs</code> folder.</p>\n<p>The Java Platform Module System (JPMS) requires separate jar files for separate modules, because every jar/module will provide its own <code>module-info.class</code> at the root of the classpath, which cannot simply be ignored/discarded (which is what you are doing with the <code>duplicatesStrategy(DuplicatesStrategy.EXCLUDE)</code>).</p>\n<p>Since you are building an uber-jar which merges all your own classes/resources and those of the dependencies, this won't work with the Java Platform Module System anymore.</p>\n<p>You could avoid building an &quot;uber&quot;-jar by modifying the <code>jar</code> block to:</p>\n<pre><code>jar {\n    manifest {\n        attributes 'Main-Class': 'ch.l1chorpe.fractalscl.Main'\n    }\n}\n</code></pre>\n<p>and, since this is effectively now <em>only</em> specifying the main class, and you <em>also</em> already specify the main class in <code>application.mainClass</code>, you can completely remove the <code>jar</code> block.</p>\n"}],"owner":{"user_id":11609957,"display_name":"l1chorpe"},"view_count":50,"up_vote_count":2,"accepted_answer_id":76149756,"answer_count":1,"score":2,"creation_date":1682956225,"question_id":76148273,"body":"<p>I'm trying to run a program with LWJGL 3.3.1 with Gradle 8.0.2. I'm using IntelliJ 2022.2.1 but I run Gradle with a PowerShell instance. The compiling works fine but when I tell it to run the app, it tells me that my module contains a LWJGL package, which in turn exports to mine.</p>\n<p>After searching for a while, I didn't find anything so I didn't try much. Also, after looking at the generated zip file, my jar is in the same directory as the LWJGL jars. Here's my build.gradle and module-info.java</p>\n<hr />\n<h3>build.gradle</h3>\n<pre><code>plugins {\n    id 'java'\n    id 'application'\n    id 'org.beryx.jlink' version '2.25.0'\n}\n\ngroup 'ch.l1chorpe'\nversion '1.0.0'\n\nproject.ext.lwjglVersion = &quot;3.3.1&quot;\nproject.ext.lwjglNatives = &quot;natives-windows&quot;\n\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation platform(&quot;org.lwjgl:lwjgl-bom:$lwjglVersion&quot;)\n\n    implementation &quot;org.lwjgl:lwjgl&quot;\n    implementation &quot;org.lwjgl:lwjgl-assimp&quot;\n    implementation &quot;org.lwjgl:lwjgl-cuda&quot;\n    implementation &quot;org.lwjgl:lwjgl-glfw&quot;\n    implementation &quot;org.lwjgl:lwjgl-opencl&quot;\n    implementation &quot;org.lwjgl:lwjgl-opengl&quot;\n    implementation &quot;org.lwjgl:lwjgl-stb&quot;\n    runtimeOnly &quot;org.lwjgl:lwjgl::$lwjglNatives&quot;\n    runtimeOnly &quot;org.lwjgl:lwjgl-assimp::$lwjglNatives&quot;\n    runtimeOnly &quot;org.lwjgl:lwjgl-glfw::$lwjglNatives&quot;\n    runtimeOnly &quot;org.lwjgl:lwjgl-opengl::$lwjglNatives&quot;\n    runtimeOnly &quot;org.lwjgl:lwjgl-stb::$lwjglNatives&quot;\n}\n\njar {\n    duplicatesStrategy(DuplicatesStrategy.EXCLUDE)\n    manifest {\n        attributes 'Main-Class': 'ch.l1chorpe.fractalscl.Main'\n    } from { configurations.runtimeClasspath.collect { it.isDirectory() ? it : zipTree(it) } }\n}\n\nsourceCompatibility = '19'\ntargetCompatibility = '19'\n\napplication {\n    mainModule = 'ch.l1chorpe.fractalscl'\n    mainClass = 'ch.l1chorpe.fractalscl.Main'\n}\n\njlink {\n    imageZip = project.file(&quot;${buildDir}/distributions/FractalsCL-${version}.zip&quot;)\n    options = ['--strip-debug', '--compress', '2', '--no-header-files', '--no-man-pages']\n    launcher {\n        name = 'app'\n    }\n}\n\njlinkZip {\n    group = 'distribution'\n}\n</code></pre>\n<h3>module-info.java</h3>\n<pre class=\"lang-java prettyprint-override\"><code>module ch.l1chorpe.fractalscl {\n    requires org.lwjgl;\n    requires org.lwjgl.glfw;\n    requires org.lwjgl.opengl;\n\n    exports ch.l1chorpe.fractalscl;\n}\n</code></pre>\n"},{"tags":["java","apache-httpclient-5.x"],"answers":[{"owner":{"user_id":1180351,"display_name":"Rob Spoor"},"up_vote_count":0,"is_accepted":false,"creation_date":1682758734,"answer_id":76135346,"body":"<p><a href=\"https://hc.apache.org/httpcomponents-core-5.1.x/current/httpcore5/apidocs/org/apache/hc/core5/http/HttpResponse.html\" rel=\"nofollow noreferrer\">HttpResponse</a> doesn't, but <a href=\"https://hc.apache.org/httpcomponents-core-5.1.x/current/httpcore5/apidocs/org/apache/hc/core5/http/HttpEntityContainer.html\" rel=\"nofollow noreferrer\">HttpEntityContainer</a> does. Cast your response to it (after an <code>instanceof</code> check if you're not sure), then you can call <code>setEntity</code> again.</p>\n"},{"owner":{"user_id":335638,"display_name":"ok2c"},"up_vote_count":0,"is_accepted":false,"creation_date":1682762454,"answer_id":76135582,"body":"<p>I would strongly recommend to use a custom exec interceptor <code>ExecChainHandler</code> if one wants to modify the request or response messages. Message interceptors are expected to work with the message headers only</p>\n<pre><code>try (final CloseableHttpClient httpclient = HttpClients.custom()\n\n        // Add a simple request ID to each outgoing request\n\n        .addRequestInterceptorFirst(new HttpRequestInterceptor() {\n\n            private final AtomicLong count = new AtomicLong(0);\n\n            @Override\n            public void process(\n                    final HttpRequest request,\n                    final EntityDetails entity,\n                    final HttpContext context) throws HttpException, IOException {\n                request.setHeader(&quot;request-id&quot;, Long.toString(count.incrementAndGet()));\n            }\n        })\n\n        // Simulate a 404 response for some requests without passing the message down to the backend\n\n        .addExecInterceptorAfter(ChainElement.PROTOCOL.name(), &quot;custom&quot;, (request, scope, chain) -&gt; {\n\n            final Header idHeader = request.getFirstHeader(&quot;request-id&quot;);\n            if (idHeader != null &amp;&amp; &quot;13&quot;.equalsIgnoreCase(idHeader.getValue())) {\n                final ClassicHttpResponse response = new BasicClassicHttpResponse(HttpStatus.SC_NOT_FOUND, &quot;Oppsie&quot;);\n                response.setEntity(new StringEntity(&quot;bad luck&quot;, ContentType.TEXT_PLAIN));\n                return response;\n            } else {\n                return chain.proceed(request, scope);\n            }\n        })\n        .build()) {\n\n    for (int i = 0; i &lt; 20; i++) {\n        final HttpGet httpget = new HttpGet(&quot;http://httpbin.org/get&quot;);\n\n        System.out.println(&quot;Executing request &quot; + httpget.getMethod() + &quot; &quot; + httpget.getUri());\n\n        httpclient.execute(httpget, response -&gt; {\n            System.out.println(&quot;----------------------------------------&quot;);\n            System.out.println(httpget + &quot;-&gt;&quot; + new StatusLine(response));\n            EntityUtils.consume(response.getEntity());\n            return null;\n        });\n    }\n}\n\n</code></pre>\n"},{"owner":{"user_id":7189597,"display_name":"Sobhan"},"up_vote_count":1,"is_accepted":false,"creation_date":1682768825,"answer_id":76136056,"body":"<p>In <code>ApacheHttpClient 5</code>, you can replace a response entity within an interceptor by using the <code>decorator pattern</code> mentioned in the Javadoc for the interceptor.</p>\n<p>To do this, you can create a new response entity that wraps the original entity and apply any necessary transformations or modifications to it. Then, set the new entity on the response using the <code>setEntity()</code> of the <code>HttpResponse interface</code>.</p>\n<p>Here is an example implementation of a response interceptor that replaces the response entity with a Gzip-decompressed entity using the <code>decorator pattern</code>:</p>\n<pre><code>public class GzipResponseInterceptor implements HttpResponseInterceptor {\n\n    @Override\n    public void process(HttpResponse response, HttpContext context) throws HttpException, IOException {\n        if (response instanceof ClassicHttpResponse) {\n            ClassicHttpResponse classicResponse = (ClassicHttpResponse) response;\n            if (classicResponse.getEntity() != null) {\n                classicResponse.setEntity(new DecompressingEntity(classicResponse.getEntity(), new GzipInputStreamFactory()));\n            }\n        }\n    }\n\n    private static class GzipInputStreamFactory implements DecompressingEntity.InputStreamFactory {\n\n        @Override\n        public InputStream create(InputStream wrapped) throws IOException {\n            return new GZIPInputStream(wrapped);\n        }\n    }\n}\n</code></pre>\n<p>In this example, the <code>GzipResponseInterceptor</code> <code>implements</code> the <code>HttpResponseInterceptor</code> <code>interface</code> and <code>overrides</code> the process method. The method checks if the response is an instance of <code>ClassicHttpResponse</code> and if it has an entity. If it does, a <code>new DecompressingEntity</code> is created that wraps the original entity and applies Gzip decompression to it. The new entity is then set on the response using the setEntity method of <code>ClassicHttpResponse</code>.</p>\n<p>The <code>GzipInputStreamFactory</code> is a helper class that provides a Gzip input stream to the <code>DecompressingEntity</code> during entity decompression.</p>\n<p>************* UPDATE *************</p>\n<p>Casting the response parameter is one way to solve the problem. However, if you want to avoid casting, you can use the <code>HttpEntityWrapper</code> class, which is designed to decorate an existing <code>HttpEntity</code> instance:</p>\n<pre><code>public class GzipResponseInterceptor implements HttpResponseInterceptor {\n    @Override\n    public void process(HttpResponse response, HttpContext context) {\n        HttpEntity originalEntity = response.getEntity();\n        if (originalEntity != null) {\n            HttpEntity gzipEntity = new GzipDecompressingEntity(originalEntity);\n            HttpEntity wrappedEntity = HttpEntityWrapper.wrap(gzipEntity);\n            ((ClassicHttpResponse) response).setEntity(wrappedEntity);\n        }\n    }\n}\n</code></pre>\n<p>In this example, the <code>GzipDecompressingEntity</code> instance is wrapped with the <code>HttpEntityWrapper</code> class, which provides additional functionality such as buffering and chunking. The wrapped entity is then set on the response object.</p>\n<p>Note that the <code>HttpEntityWrapper</code> class is part of the <code>HttpCore library</code>, which is a separate library from the <code>HttpClient library</code>. Therefore, <em><strong>you will need to include the HttpCore library in your project in order to use this class</strong></em>.</p>\n"}],"owner":{"user_id":2233005,"display_name":"SPU42"},"view_count":67,"up_vote_count":2,"answer_count":3,"score":2,"creation_date":1682745349,"question_id":76134625,"body":"<p>We have legacy code using Apache Http Client 4 that replaces a response entity from within a response interceptor:</p>\n<pre><code>public class GzipResponseInterceptor implements HttpResponseInterceptor\n{\n    @Override\n    public void process(HttpResponse response, HttpContext context) throws HttpException, IOException\n    {\n        response.setEntity(new GzipDecompressingEntity(response.getEntity()));\n    }\n}\n</code></pre>\n<p>The interface <code>HttpResponse</code> for version 5 does not include a method for getting or setting the entity. The <code>process</code> method includes an EntityDetails parameter to get some information about the entity, but you cannot use that to replace it.</p>\n<p>The Javadoc for the interceptor mentions decorating an entity, but does not mention how to do that:</p>\n<blockquote>\n<p>Interceptors can also manipulate content entities enclosed with messages. Usually this is accomplished by using the 'Decorator' pattern where a wrapper entity class is used to decorate the original entity.</p>\n</blockquote>\n<p>Does anyone know how this is meant to be done?</p>\n"},{"tags":["java","spring-boot","stomp","spring-websocket"],"answers":[{"owner":{"user_id":10277150,"display_name":"gurkan"},"up_vote_count":1,"is_accepted":false,"creation_date":1682757516,"answer_id":76135276,"body":"<p>First you need to define <code>userDestinationPrefix</code>:</p>\n<pre><code>@Configuration\n@EnableWebSocketMessageBroker\npublic class WebSocketConfig implements WebSocketMessageBrokerConfigurer {\n\n  @Override\n  public void configureMessageBroker(MessageBrokerRegistry config) {\n    config.enableSimpleBroker(&quot;/topic&quot;, &quot;/queue&quot;);\n    config.setUserDestinationPrefix(&quot;/user&quot;); // DEFINE HERE\n    //topic added again to handle SubscribeMapping\n    config.setApplicationDestinationPrefixes(&quot;/app&quot;, &quot;/topic&quot;);\n  }\n\n  @Override\n  public void registerStompEndpoints(StompEndpointRegistry registry) {\n    registry\n        .addEndpoint(&quot;/ws&quot;)\n        .setAllowedOriginPatterns(&quot;*&quot;)\n        .setHandshakeHandler(new CustomHandshakeHandler())\n        .withSockJS();\n  }\n}\n</code></pre>\n<p>CustomHandshakeHandler:</p>\n<pre><code>public class CustomHandshakeHandler extends DefaultHandshakeHandler {\n  // Custom class for storing principal\n  @Override\n  protected Principal determineUser(\n      ServerHttpRequest request,\n      WebSocketHandler wsHandler,\n      Map&lt;String, Object&gt; attributes\n  ) {\n    // Generate principal with UUID as name\n    return new StompPrincipal(UUID.randomUUID().toString());\n  }\n}\n</code></pre>\n<p>Finally to send messages to specific user:</p>\n<pre><code> messagingTemplate.convertAndSendToUser(\n                  user.getName(), &quot;/queue/player&quot;, new PlayerState(gameObjectState));\n</code></pre>\n<p>Full example of sending message:</p>\n<pre><code> @MessageMapping(&quot;/game/{room}&quot;)\n  public void handleGameUpdates(\n      @DestinationVariable String room,\n      @Payload GameObjectState gameObjectState,\n      Principal principal) {\n\n    // Get all the users in the application\n    Collection&lt;SimpUser&gt; users = simpUserRegistry.getUsers();\n\n    for (SimpUser user : users) {\n      for (SimpSession session : user.getSessions()) {\n        if (session.getSubscriptions().stream()\n            .anyMatch(subscription -&gt; subscription.getDestination().endsWith(room))) {\n          // If the user is subscribed to the room, add their userId to the list\n          if (!user.getName().equals(principal.getName())) {\n            if (gameObjectState.getType().equals(GameObjectType.PLAYER)) {\n              messagingTemplate.convertAndSendToUser(\n                  user.getName(), &quot;/queue/player&quot;, new PlayerState(gameObjectState));\n            } else {\n              messagingTemplate.convertAndSendToUser(\n                  user.getName(), &quot;/queue/bullet&quot;, new BulletState(gameObjectState));\n            }\n          }\n        }\n      }\n    }\n  }\n</code></pre>\n<p>if you need more check the repo: <a href=\"https://github.com/gurkanucar/websockets/blob/main/stomp%20spring%20boot%20example/socket_detailed/src/main/java/com/gucardev/socket_detailed/config/WebSocketConfig.java\" rel=\"nofollow noreferrer\">https://github.com/gurkanucar/websockets/blob/main/stomp%20spring%20boot%20example/socket_detailed/src/main/java/com/gucardev/socket_detailed/config/WebSocketConfig.java</a></p>\n"}],"owner":{"user_id":1165493,"display_name":"Sandah Aung"},"view_count":34,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1682745292,"question_id":76134623,"body":"<p>I have a client server application implemented in Spring Boot 3. It uses web socket with stomp to communicate with each other. Currently both the server and client are implemented using different versions of Spring and Spring Boot.</p>\n<p>I was successful with sending messages using a common topic to each other. The messages are encrypted so only the intended client can decrypt it and view it.</p>\n<p>The application is intended for more complicated purposes but for my purpose let me present it to you as a chat application.</p>\n<p>This is part of the code which tests the functionality:\n@Autowired\nprivate SimpMessagingTemplate simpMessagingTemplate;</p>\n<pre><code>@Autowired\nprivate ActiveUserStore activeUserStore;\n\n@MessageMapping(&quot;/send&quot;)\n@SendToUser(&quot;/queue/chat&quot;)\npublic void sendToUser(@Payload WsIncomingMessage wsIncomingMessage, Principal user, @Header(&quot;simpSessionId&quot;) String sessionId) {\n    log.info(&quot; /queue/chat &gt; incoming msg: {}, user: {}, header: {}&quot;, wsIncomingMessage, user, sessionId);\n    WsOutgoingMessage wsOutgoingMessage = new WsOutgoingMessage();\n    wsOutgoingMessage.setMessage(wsIncomingMessage.getMessage());\n    wsOutgoingMessage.setMessageType(wsIncomingMessage.getMessageType());\n    wsOutgoingMessage.setSentDatetime(wsIncomingMessage.getSentDatetime());\n    wsOutgoingMessage.setSource(wsIncomingMessage.getSource());\n    wsOutgoingMessage.setDestination(wsIncomingMessage.getDestination());\n    wsIncomingMessage.setAdId(wsIncomingMessage.getAdId());\n    log.info(&quot; /queue/chat &gt; outgoing msg: {}, user: {}, header: {}&quot;, wsIncomingMessage, user, sessionId);\n    \n    simpMessagingTemplate.convertAndSendToUser(activeUserStore.getUser(wsOutgoingMessage.getDestination()).getPrincipal(), &quot;/queue/chat&quot;, wsOutgoingMessage);\n}\n</code></pre>\n<p>Calling <code>activeUserStore.getUser(wsOutgoingMessage.getDestination()).getPrincipal()</code> returns a phone number which identifies the user. We think the phone number in full path uniquely identifies the user.</p>\n<p>My handshaker:</p>\n<pre><code>@Slf4j\npublic class CustomHandshakeHandler extends DefaultHandshakeHandler { \n\n    \n    @Override\n    protected Principal determineUser(ServerHttpRequest request, WebSocketHandler wsHandler,\n            Map&lt;String, Object&gt; attributes) {\n        String uuid = UUID.randomUUID().toString();\n        Principal pinciplal = request.getPrincipal();\n\n        if (pinciplal instanceof UsernamePasswordAuthenticationToken) {\n            UsernamePasswordAuthenticationToken usernamePasswordAuthenticationToken = (UsernamePasswordAuthenticationToken) pinciplal;\n            Object principalObj = usernamePasswordAuthenticationToken.getPrincipal();\n            if (principalObj instanceof JwtUserDetails) {\n                JwtUserDetails connectingUser = (JwtUserDetails) principalObj;\n                connectingUser.setSessionUuid(uuid);\n                \n            }\n        }\n        log.info(&quot;principal in CustomHandshakeHandler: {}&quot;, pinciplal);\n        return pinciplal;\n    }\n}\n</code></pre>\n<p>The string representation of the principal: <code>UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]]</code></p>\n<p>The Spring Boot Server is receiving stomp messages. I think it is also returning messages but I don't know how to log the returned messages:</p>\n<pre><code>[boundChannel-13][0;39m [36mc.l.c.f.k.c.controller.ChatController   [0;39m [2m:[0;39m  /queue/chat &gt; incoming msg: WsIncomingMessage(message=Hi, messageType=text/plain, destination=4, sentDatetime=2023-04-29T10:39:49+07:00, source=3, sourceImage=0, adId=no-ad), user: UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], header: 36d934da-79d7-f00b-6459-331f1cef60ca\n\n[boundChannel-13][0;39m [36mc.l.c.f.k.c.controller.ChatController   [0;39m [2m:[0;39m  /queue/chat &gt; outgoing msg: WsIncomingMessage(message=Hi, messageType=text/plain, destination=4, sentDatetime=2023-04-29T10:39:49+07:00, source=3, sourceImage=0, adId=no-ad), user: UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], header: 36d934da-79d7-f00b-6459-331f1cef60ca\n</code></pre>\n<p>The server is registering subscribe events:</p>\n<pre><code>event: SessionSubscribeEvent[GenericMessage [payload=byte[0], headers={simpMessageType=SUBSCRIBE, stompCommand=SUBSCRIBE, nativeHeaders={destination=[/user/queue/chat], id=[0]}, simpSessionAttributes={}, simpHeartbeat=[J@197209d9, simpSubscriptionId=0, simpUser=UsernamePasswordAuthenticationToken [Principal=JwtUserDetails(id=3, name=Anupam, principal=+855964572928, password=, sessionUuid=0c4169cd-0289-4233-a6f4-0ec04ea3d08c, authorities=[JwtGrantedAuthority(authorityName=USER)]), Credentials=[PROTECTED], Authenticated=true, Details=null, Granted Authorities=[JwtGrantedAuthority(authorityName=USER)]], simpSessionId=36d934da-79d7-f00b-6459-331f1cef60ca, simpDestination=/user/queue/chat}]]\n</code></pre>\n<p>The client can also see the success of subscription:</p>\n<pre><code>StompSession.Subscription messageSubscriberSubscription = sessionStomp.get().subscribe(&quot;/user/queue/chat&quot;, messageSubscriber);\nlog.info(&quot;messageSubscriberSubscription: {}&quot;, messageSubscriberSubscription);\n\n10:39:43.244 [Grizzly(2)] INFO com.lomatechnology.cambodia.fintech.kke.chat.web.ServerCommunication -- messageSubscriberSubscription: Subscription [id=0, destination='/user/queue/chat', receiptId='null', handler=com.lomatechnology.cambodia.fintech.kke.chat.web.MessageSubscriber@39fe1782]\n10:39:49.022 [AWT-EventQueue-0] INFO com.lomatechnology.cambodia.fintech.kke.chat.util.DatetimeUtil -- Returned date string: 2023-04-29T10:39:49+07:00\n10:39:49.022 [AWT-EventQueue-0] INFO com.lomatechnology.cambodia.fintech.kke.chat.ui.ChatGui -- About to send: WsOutgoingMessage(message=Hi, messageType=text/plain, destination=4, sourceImage=null, sentDatetime=2023-04-29T10:39:49+07:00, source=3, adId=no-ad)\n</code></pre>\n<p>The only problem is that the intended client is never receiving messages. Is it the wrong use of principle in <code>simpMessagingTemplate.convertAndSendToUser</code> or hace I missed anything?</p>\n"},{"tags":["java","jooq","jsonschema2pojo"],"comments":[{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"edited":false,"comment_id":134244250,"body":"What&#39;s the reason why you&#39;re using the Joda time library, when at the same time you&#39;re also using JSR 310 types?"},{"owner":{"user_id":2261302,"display_name":"deniro.wang"},"edited":false,"comment_id":134246146,"body":"I took over and maintained a project for a while. It ran very well with jOOQ and DateTime, and we had lots of functions to manipulate DateTime and strings. We received a new request regarding a JSON issue, so I used jsonschema2pojo. When you asked me, I suddenly realized that I had misunderstood and thought jOOQ could only work with DateTime. I changed &quot;&lt;userType&gt;org.joda.time.LocalDate&lt;/userType&gt;&quot; to &quot;&lt;userType&gt;java.time.Instant&lt;/userType&gt;&quot; and it ran smoothly."},{"owner":{"user_id":2261302,"display_name":"deniro.wang"},"edited":false,"comment_id":134246260,"body":"but, if I change jooq forcedType from DateTime to Instant, our original code must modify lots. so back to my question, can we have other solution?"}],"answers":[{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"up_vote_count":1,"is_accepted":true,"creation_date":1682619224,"answer_id":76123473,"body":"<h3>Register a global <code>ConverterProvider</code></h3>\n<p>For the particular use-case you have here, you can implement a <a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/fetching/converter-provider/\" rel=\"nofollow noreferrer\"><code>ConverterProvider</code></a> that is able to convert between these two data types. <code>ConverterProvider</code> is an SPI that allows to override the default data type conversions between two data types, such as <code>DateTime</code> and <code>Instant</code>, in both directions.</p>\n<p>Roughly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>class MyConverterProvider implements ConverterProvider {\n    final ConverterProvider delegate = new DefaultConverterProvider();\n    \n    @Override\n    public &lt;T, U&gt; Converter&lt;T, U&gt; provide(Class&lt;T&gt; tType, Class&lt;U&gt; uType) {\n        if (tType == DateTime.class &amp;&amp; uType == Instant.class) {\n            return Converter.ofNullable(tType, uType,\n                t -&gt; (U) dateTimeToInstant((DateTime) t),\n                u -&gt; (T) instantToDateTime((Instant) u)\n            );\n        }\n        \n        // Delegate all other type pairs to jOOQ's default\n        else\n            return delegate.provide(tType, uType);\n    }\n}\n</code></pre>\n<p>You then set that to your local or global <code>Configuration</code>:</p>\n<pre class=\"lang-java prettyprint-override\"><code>configuration.set(new MyConverterProvider());\n</code></pre>\n<h3>Using a local ad-hoc converter</h3>\n<p>You can always attach a local <a href=\"https://www.jooq.org/doc/latest/manual/sql-execution/fetching/ad-hoc-converter/\" rel=\"nofollow noreferrer\">ad-hoc converter</a> to a field, effectively chaining converters</p>\n<pre class=\"lang-java prettyprint-override\"><code>List &lt;JsonConnector&gt; list = ctx.select(\n    CONNECTOR.INT1,\n    CONNECTOR.STRING1,\n    CONNECTOR.STRING2,\n    CONNECTOR.STRING3,\n    CONNECTOR.STRING4,\n    CONNECTOR.JODA_TIME_DATETIME.convertFrom(d -&gt; dateTimeToInstant(d)))\n    .from(CONNECTOR)\n    .fetchInto(JsonConnector.class);\n</code></pre>\n"}],"owner":{"user_id":2261302,"display_name":"deniro.wang"},"view_count":49,"up_vote_count":2,"accepted_answer_id":76123473,"answer_count":1,"score":2,"creation_date":1682589062,"question_id":76119036,"body":"<p>I have <strong>jooq</strong> create TableImpl POJO name CONNECTOR with variable <strong>joda.time.DateTime</strong></p>\n<p>and <strong>jsonschema2pojo</strong> create POJO name JsonConnector with variable <strong>java.time.Instant</strong></p>\n<p>how to convert jooq select result fetch to jsonschema2pojo create obj</p>\n<pre><code>List &lt;JsonConnector&gt; list = ctx.select(\n    CONNECTOR.INT1,\n    CONNECTOR.STRING1,\n    CONNECTOR.STRING2,\n    CONNECTOR.STRING3,\n    CONNECTOR.STRING4,\n    CONNECTOR.JODA_TIME_DATETIME))\n    .from(CONNECTOR)\n    .fetchInto(JsonConnector.class);\n</code></pre>\n\n<p><strong>jooq</strong> fetchInto jsonschema2pojo everything simple type convert is ok, but pojo type <strong>org.joda.time.DateTime</strong> to type <strong>java.time.Instant</strong></p>\n<p>that will throw exception\n<em>org.jooq.exception.MappingException: An error ocurred when mapping record to class JsonConnector</em></p>\n<p>how can I write function like\n<code>TableField&lt;ConnectorRecord, Instant&gt; convertDateTimeToInstant(TableField&lt;ConnectorRecord, DateTime&gt; datatimeField)</code>\nor something good method</p>\n<p>Thanks</p>\n"},{"tags":["java","apache-kafka","quarkus"],"comments":[{"owner":{"user_id":10109156,"display_name":"tornadoradon"},"edited":false,"comment_id":134231616,"body":"so, what&#39;s the problem?"},{"owner":{"user_id":16390219,"display_name":"Andrew Samoilov"},"edited":false,"comment_id":134238356,"body":"is it possible to transfer values ​​from the config in quarkus, as in spring?"},{"owner":{"user_id":10109156,"display_name":"tornadoradon"},"edited":false,"comment_id":134238985,"body":"No I meant that have you tried it, why it didn’t work?"}],"answers":[{"owner":{"user_id":1800344,"display_name":"gna"},"up_vote_count":1,"is_accepted":true,"creation_date":1682582776,"answer_id":76118136,"body":"<p>You have to provide the 'channel name' instead of the 'topic name' in your @Incoming annotation.</p>\n<p>Your java code would look like this:</p>\n<pre><code>@ApplicationScoped\npublic class Consumer {\n\n   @Incoming(&quot;your-custom-channel-name&quot;)\n   public void consume(String s) {\n      Log.info(s);\n   }\n}\n</code></pre>\n<p>To be honest, I've never used the yml format, just the application.properties file. Here you would define the channel with each of its properties (like the topic):</p>\n<pre><code>mp.messaging.incoming.your-custom-channel-name.topic=your-topic-name\nmp.messaging.incoming.your-custom-channel-name.auto.offset.reset=earliest\nmp.messaging.incoming.your-custom-channel-name.group.id=${quarkus.kafka-streams.application-id}-my-private-group-id\n</code></pre>\n<p>I assume that if you would try to reformat this into your yml file, it would look like this (not tested):</p>\n<pre><code>mp:\n  messaging:\n    incoming: \n      your-custom-channel-name:\n        topic: your-topic-name\n        auto:\n          offset:\n            reset: earliest\n        group:\n          id: ${quarkus.kafka-streams.application-id}-my-private-group-id\n</code></pre>\n<p>Following this guide on the Quarkus website would give you a step-by-step approach on how to do this: <a href=\"https://quarkus.io/guides/kafka-reactive-getting-started\" rel=\"nofollow noreferrer\">Reactive messaging with Kafka</a></p>\n"}],"owner":{"user_id":16390219,"display_name":"Andrew Samoilov"},"view_count":55,"up_vote_count":2,"accepted_answer_id":76118136,"answer_count":1,"score":2,"creation_date":1682526254,"question_id":76113041,"body":"<p>When I want to configure the costumer and specify the name of the topic, it is not possible to specify this name from the config, as, for example, it was done using spring</p>\n<p>Quarkus:</p>\n<pre><code>@ApplicationScoped\npublic class Consumer {\n    \n    @Incoming(&quot;topic-name&quot;)  //is it possible to pass the value from the config here?\n    public void consume(String s) {\n        Log.info(s);\n    }\n}\n</code></pre>\n<p>in spring it would look like this</p>\n<pre><code>@Incoming(&quot;${topic.name}&quot;)  \n</code></pre>\n<p>application.yml</p>\n<pre><code>topic:\n   name: topic-name\n\n</code></pre>\n<p>Is it possible to transfer the value from the config to the <code>@Incoming(&quot;value&quot;)</code> annotation in Quarkus?</p>\n"},{"tags":["java","gradle","sonarqube","lombok","jacoco"],"comments":[{"owner":{"user_id":11342225,"display_name":"alea"},"edited":false,"comment_id":134243994,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/65412697/addlombokgeneratedannotation-on-lombok-config-doesnt-ignore-lombok-annotations\">addLombokGeneratedAnnotation on lombok.config doesn&#39;t ignore Lombok Annotations on Jacoco report</a>"},{"owner":{"user_id":14564074,"display_name":"noob234"},"edited":false,"comment_id":134245832,"body":"Unfortunatley not, I tried as the other users suggested to add a random <code>@lombok.Data</code>. But the thing is that I already clean the project before lunching the sonar task <code>gradlew.bat clean build test --debug sonar -Dsonar.projectKey=&quot; + service + &quot; -Dsonar.projectName=&quot; + service + &quot; -Dsonar.host.url=http:&#47;&#47;localhost:9000 -Dsonar.token=&quot; + global_token</code>."}],"answers":[{"owner":{"user_id":14564074,"display_name":"noob234"},"up_vote_count":1,"is_accepted":true,"creation_date":1682671638,"answer_id":76127827,"body":"<p>lombok.config <strong>must be in the root</strong> of the project, not in <em>src\\main\\resources</em></p>\n"}],"owner":{"user_id":14564074,"display_name":"noob234"},"view_count":53,"up_vote_count":2,"accepted_answer_id":76127827,"answer_count":1,"score":2,"creation_date":1682455479,"question_id":76105303,"body":"<p>I am trying to exclude Lombok coverage in Sonar.</p>\n<p>This is my build.gradle:</p>\n<pre><code>plugins {\n//...\n    id &quot;org.sonarqube&quot; version &quot;4.0.0.2929&quot;\n    id 'jacoco'\n}\n\njacocoTestReport {\n    reports {\n        xml.enabled true\n    }\n}\ntest.finalizedBy jacocoTestReport\n\n//...\n</code></pre>\n<p>To exclude those classes I tried the following steps:</p>\n<ol>\n<li>I created a lombok.config file in this path: <em>src\\main\\resources</em></li>\n<li>I added the following properties:</li>\n</ol>\n<pre><code># This tells lombok this directory is the root,\n# no need to look somewhere else for java code.\nconfig.stopBubbling = true\n# This will add the @lombok.Generated annotation\n# to all the code generated by Lombok,\n# so it can be excluded from coverage by jacoco.\nlombok.addLombokGeneratedAnnotation = true\n</code></pre>\n<ol start=\"3\">\n<li>I added this in build.gradle:</li>\n</ol>\n<pre><code>jacocoTestReport {\n    // ...\n    afterEvaluate {\n        classDirectories.setFrom(files(classDirectories.files.collect {\n            fileTree(dir: it, exclude: ['lombok/**'])\n        }))\n    }\n}\n</code></pre>\n<ol start=\"4\">\n<li>Cleaning the project before executing the sonar task:</li>\n</ol>\n<pre><code>gradlew.bat clean build test --debug sonar -Dsonar.projectKey=&quot; + service + &quot; -Dsonar.projectName=&quot; + service + &quot; -Dsonar.host.url=http://localhost:9000 -Dsonar.token=&quot; + global_token\n</code></pre>\n<p>Unfortunately for some reason after executing the sonar task to analyze the project,</p>\n<p>I <strong>still have the Lombok code uncovered</strong>:</p>\n<p><a href=\"https://i.stack.imgur.com/b03wO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/b03wO.png\" alt=\"uncovered code\" /></a></p>\n"},{"tags":["java","netty","reactor-netty","netty4"],"answers":[{"owner":{"user_id":2078908,"display_name":"ursa"},"up_vote_count":1,"is_accepted":true,"creation_date":1682433952,"answer_id":76102490,"body":"<p><code>HttpContentDecompressor.decode</code> sources:</p>\n<pre><code>...\n// set new content encoding,\nCharSequence targetContentEncoding = getTargetContentEncoding(contentEncoding);\nif (HttpHeaderValues.IDENTITY.contentEquals(targetContentEncoding)) {\n    // Do NOT set the 'Content-Encoding' header if the target encoding is 'identity'\n    // as per: https://tools.ietf.org/html/rfc2616#section-14.11\n    headers.remove(HttpHeaderNames.CONTENT_ENCODING);\n} else {\n    headers.set(HttpHeaderNames.CONTENT_ENCODING, targetContentEncoding);\n}\n...\n</code></pre>\n<p>Use the following snippet to prevent <code>Content-Encoding</code> header modification:</p>\n<pre><code>pipeline.addLast(new HttpContentDecompressor() {\n    @Override\n    protected String getTargetContentEncoding(String contentEncoding) throws Exception {\n        return contentEncoding;\n    }\n})\n</code></pre>\n"}],"owner":{"user_id":15375796,"display_name":"Vaibhav"},"view_count":32,"up_vote_count":2,"accepted_answer_id":76102490,"answer_count":1,"score":2,"creation_date":1682432821,"question_id":76102308,"body":"<p>I am using netty io.netty.handler.codec.http.HttpContentDecompressor by adding it into pipeline in my spring boot server, its decompressing the incoming request successfully but also removing the 'content-encoding:gzip' header from request. Is there any way to configure netty server to stop removing this header after decompression as we really want to know if original request had come in the compressed format or decompressed format?</p>\n"},{"tags":["java","algorithm","data-structures"],"answers":[{"owner":{"user_id":14121186,"display_name":"Caleb Keller"},"up_vote_count":1,"is_accepted":true,"creation_date":1682356359,"answer_id":76094420,"body":"<p>You were really close! You accidentally mixed up <code>x</code> and <code>y</code> in your <code>Manhattan()</code> function. No matter what board state you passed into it, it would return a non-zero distance, so your code would keep searching forever until it used up all the memory and crashed.</p>\n<p>After switching those around, I ran it and got your expected result:</p>\n<pre><code>0 1 3 \n4 2 5 \n7 8 6 \n\n1 0 3 \n4 2 5 \n7 8 6 \n\n1 2 3 \n4 0 5 \n7 8 6 \n\n1 2 3 \n4 5 0 \n7 8 6 \n\n1 2 3 \n4 5 6 \n7 8 0 \n\n</code></pre>\n<p>Here's the change:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    static int Manhattan(int[][] arr) {\n        int ans = 0;\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                if (arr[i][j] == 0) continue;\n                int y = (arr[i][j] - 1) % 3; // Was x\n                int x = (arr[i][j] - 1) / 3; // Was y\n                ans += Math.abs(x - i) + Math.abs(y - j);\n            }\n        }\n        return ans;\n    }\n</code></pre>\n<p>As a rule of thumb for the future, if your algorithm is causing an OutOfMemory error, the exit condition has probably been set up incorrectly. Computers have a lot of memory, so you have to search through a <em>considerable</em> number of states for that to be an issue. It's definitely possible, especially for really difficult problems, but that's always the first place I look.</p>\n"}],"owner":{"user_id":20132436,"display_name":"Hyle33ies"},"view_count":78,"up_vote_count":2,"accepted_answer_id":76094420,"answer_count":1,"score":2,"creation_date":1682354993,"question_id":76094246,"body":"<p>I'm working on problem using the A* algorithm to solve a 8-puzzle problem in Java. The problem asks for the optimal solution for the following transmission:</p>\n<pre><code>0 1 3\n4 2 5\n7 8 6\n---------&gt;\n1 2 3\n4 5 6\n7 8 0\n</code></pre>\n<p>by virtue of moving one number to the place of '0' in one time.</p>\n<p>I basically want to imitate the solution in this tutorial: <a href=\"https://www.javatpoint.com/8-puzzle-problems-in-java\" rel=\"nofollow noreferrer\">https://www.javatpoint.com/8-puzzle-problems-in-java</a></p>\n<p>But my code do not work properly:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.*;\n\npublic class Puzzle8 {\n    static class State {\n        int[][] board;\n        int x;\n        int y;\n        int cost;\n        int depth;\n        State parent;\n\n        State(int[][] board, int x, int y, int cost, int depth, State parent) {\n            this.board = new int[3][3];\n            for (int i = 0; i &lt; 3; i++) {\n                for (int j = 0; j &lt; 3; j++) {\n                    this.board[i][j] = board[i][j];\n                }\n            }\n            this.x = x;\n            this.y = y;\n            this.cost = cost;\n            this.depth = depth;\n            this.parent = parent;\n        }\n\n        @Override\n        public boolean equals(Object o) {\n            if (this == o) return true;\n            if (o == null || getClass() != o.getClass()) return false;\n            State state = (State) o;\n            return Arrays.deepEquals(board, state.board);\n        }\n\n        @Override\n        public int hashCode() {\n            return Arrays.deepHashCode(board);\n        }\n    }\n\n    static int[] dx = {-1, 1, 0, 0};\n    static int[] dy = {0, 0, -1, 1};\n\n    public static void main(String[] args) {\n        int[][] board = new int[3][3];\n        Scanner sc = new Scanner(System.in);\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                board[i][j] = sc.nextInt();\n            }\n        }\n        PriorityQueue&lt;State&gt; pq = new PriorityQueue&lt;&gt;(new Comparator&lt;State&gt;() {\n            @Override\n            public int compare(State o1, State o2) {\n                return o1.cost - o2.cost;\n            }\n        });\n        int[] pos = new int[2];\n        find_zero(board, pos);\n        State initialState = new State(board, pos[0], pos[1], Manhattan(board), 0, null);\n        pq.add(initialState);\n\n        State goalState = null;\n\n        while (!pq.isEmpty()) {\n            State cur = pq.poll();\n            board = cur.board;\n\n            if (Manhattan(board) == 0) {\n                goalState = cur;\n                break;\n            }\n\n            find_zero(board, pos);\n            int x = pos[0];\n            int y = pos[1];\n            for (int k = 0; k &lt; 4; k++) {\n                int nx = x + dx[k];\n                int ny = y + dy[k];\n                if (nx &gt;= 0 &amp;&amp; nx &lt; 3 &amp;&amp; ny &gt;= 0 &amp;&amp; ny &lt; 3) {\n                    int[][] new_board = new int[3][3];\n                    for (int i = 0; i &lt; 3; i++) {\n                        for (int j = 0; j &lt; 3; j++) {\n                            new_board[i][j] = board[i][j];\n                        }\n                    }\n                    new_board[x][y] = new_board[nx][ny];\n                    new_board[nx][ny] = 0;\n                    var newState = new State(new_board, nx, ny, Manhattan(new_board) + cur.depth + 1, cur.depth + 1, cur);\n                    pq.add(newState);\n                }\n            }\n        }\n\n        if (goalState != null) {\n            Stack&lt;State&gt; path = new Stack&lt;&gt;();\n            State currentState = goalState;\n            while (currentState != null) {\n                path.push(currentState);\n                currentState = currentState.parent;\n            }\n\n            while (!path.isEmpty()) {\n                State state = path.pop();\n                printArr(state.board);\n            }\n        } else {\n            System.out.println(&quot;No solution found.&quot;);\n        }\n    }\n\n    static void printArr(int[][] arr) {\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                System.out.print(arr[i][j] + &quot; &quot;);\n            }\n            System.out.println();\n        }\n        System.out.println();\n    }\n\n    static void find_zero(int[][] arr, int[] pos) {\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                if (arr[i][j] == 0) {\n                    pos[0] = i;\n                    pos[1] = j;\n                    return;\n                }\n            }\n        }\n    }\n\n    static int Manhattan(int[][] arr) {\n        int ans = 0;\n        for (int i = 0; i &lt; 3; i++) {\n            for (int j = 0; j &lt; 3; j++) {\n                if (arr[i][j] == 0) continue;\n                int x = (arr[i][j] - 1) % 3;\n                int y = (arr[i][j] - 1) / 3;\n                ans += Math.abs(x - i) + Math.abs(y - j);\n            }\n        }\n        return ans;\n    }\n}\n</code></pre>\n<p>In my code, the class 'state' should store the current board, current position of '0' element (I think this is not necessary now, maybe I'll impove it later), the cost (in my implementation I deem the cost = Manhattan distance of all blocks to the right position + steps have been taken, the number of steps taken is stored in depth) and the parent in order to trace back the solution to print.</p>\n<pre><code>input:\n0 1 3\n4 2 5\n7 8 6\nexpected output:\n4\n\n0 1 3\n4 2 5 \n7 8 6\n\n1 0 3 \n4 2 5 \n7 8 6\n\n1 2 3 \n4 0 5 \n7 8 6\n\n1 2 3 \n4 5 0 \n7 8 6\n\n1 2 3 \n4 5 6\n7 8 0\n</code></pre>\n<p>My code encounter the exception of &quot;Exception in thread &quot;main&quot; java.lang.OutOfMemoryError: Java heap space at Puzzle8.main(Puzzle8.java:80)&quot;.</p>\n<p>I'm new to data structures and algorithms. Could you please provide some suggestions for debugging or tell me where did I do wrong?</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database"],"comments":[{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"edited":false,"comment_id":134161956,"body":"Please edit your question and show us how is <code>selectedActivityDatabase</code> defined."},{"owner":{"user_id":15338821,"display_name":"Se&#225;n Cahill"},"edited":false,"comment_id":134172660,"body":"Hi Alex, changed the definition, in this example the database reference includes the information within the &quot;Do&quot; section of the Json but I want some way to check if the key generated by the code &quot;-NTW-u8LJKsGd-wpcmir&quot; is in the users preferences"},{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"edited":false,"comment_id":134172822,"body":"I still cannot see how is <code>selectedActivityDatabase</code> defined."},{"owner":{"user_id":15338821,"display_name":"Se&#225;n Cahill"},"edited":false,"comment_id":134182161,"body":"Hi Alex, very new to this, not sure what you mean!"},{"owner":{"user_id":15338821,"display_name":"Se&#225;n Cahill"},"edited":false,"comment_id":134182293,"body":"Is the Json in the first code box how it is defined?"}],"answers":[{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"up_vote_count":1,"is_accepted":true,"creation_date":1682252185,"answer_id":76084779,"body":"<blockquote>\n<p>I don't understand how to pass the <code>activitySnapshot.getKey()</code> into a listener checking in the &quot;Users&quot; tree of the database.</p>\n</blockquote>\n<p>You should create a new reference that points exactly to <code>Users/$uid/preferences/Do/$pushedId</code>, and attach a listener to it. In code, it should look like this:</p>\n<pre><code>    DatabaseReference db = FirebaseDatabase.getInstance().getReference();\n    DatabaseReference doRef = db.child(&quot;Activity&quot;).child(&quot;Do&quot;);\n    doRef.addChildEventListener(new ChildEventListener() {\n        @Override\n        public void onChildAdded(@NonNull DataSnapshot activitySnapshot, @Nullable String s) {\n            if (activitySnapshot.exists()){\n                String currentActivityId = activitySnapshot.getKey();\n\n                String uid = FirebaseAuth.getInstance().getCurrentUser().getUid();\n                DatabaseReference ref = db.child(&quot;Users&quot;).child(uid).child(&quot;preferences&quot;).child(&quot;Do&quot;).child(currentActivityId);\n                ref.get().addOnCompleteListener(new OnCompleteListener&lt;DataSnapshot&gt;() {\n                    @Override\n                    public void onComplete(@NonNull Task&lt;DataSnapshot&gt; task) {\n                        if (task.isSuccessful()) {\n                            DataSnapshot result = task.getResult();\n                            if (result.getValue() != null) {\n                                boolean exists = result.getValue(Boolean.class);\n                                if (exists) {\n                                    Log.d(&quot;TAG&quot;, &quot;The id exists.&quot;);\n                                } else {\n                                    Log.d(&quot;TAG&quot;, &quot;The id doesn't exist.&quot;);\n                                }\n                            }}\n                        } else {\n                            Log.d(&quot;TAG&quot;, task.getException().getMessage()); //Never ignore potential errors!\n                        }\n                    }\n                });\n\n                //rest of the code\n            }\n        }\n\n        @Override\n        public void onChildChanged(@NonNull DataSnapshot dataSnapshot, @Nullable String s) {}\n\n        @Override\n        public void onChildRemoved(@NonNull DataSnapshot dataSnapshot) {}\n\n        @Override\n        public void onChildMoved(@NonNull DataSnapshot dataSnapshot, @Nullable String s) {}\n\n        @Override\n        public void onCancelled(@NonNull DatabaseError error) {\n            Log.d(&quot;TAG&quot;, error.getMessage()); //Never ignore potential errors!\n        }\n    });\n</code></pre>\n"}],"owner":{"user_id":15338821,"display_name":"Se&#225;n Cahill"},"view_count":86,"up_vote_count":2,"accepted_answer_id":76084779,"answer_count":1,"score":2,"creation_date":1682061990,"question_id":76070870,"body":"<p>I am looking to check within an <code>addChildEventListener </code> if the snapshot.getKey() exists within a different path in the same database.</p>\n<p>I have 2 trees within the database. And whether they like activity is denoted by a true or false with the activity ID as the key</p>\n<pre><code>{\n  &quot;Activity&quot;: {\n    &quot;Do&quot;: {\n      &quot;-NTW-cLFvmgSqZ72EKuJ&quot;: {\n        &quot;name&quot;: &quot;kayaking &quot;\n         },\n      &quot;-NTW-u8LJKsGd-wpcmir&quot;: {\n        &quot;name&quot;: &quot;climbing &quot;\n      }\n      \n  },\n  &quot;Users&quot;: {\n    &quot;wkFbhmSH6lfPkkyy6OGke0be1ys2&quot;: {\n      &quot;gender&quot;: &quot;Male&quot;,\n      &quot;preferences&quot;: {\n        &quot;Do&quot;: {\n          &quot;-NTW-cLFvmgSqZ72EKuJ&quot;: true}\n        }\n    }\n  }\n}\n\n</code></pre>\n<p>I want to survey the user to ask if they like the activity or not but I only want to ask if they have not answered the question before.</p>\n<p>To do this I have the following event listener that populates a question card for all the activities</p>\n<pre><code>DatabaseReference selectedActivityDatabase = FirebaseDatabase.getInstance().getReference().child(&quot;Activity&quot;).child(&quot;Do&quot;);\n        selectedActivityDatabase.addChildEventListener(new ChildEventListener() {\n\n            @Override\n            public void onChildAdded(@NonNull DataSnapshot activitySnapshot, @Nullable String previousChildName) {\n                if (activitySnapshot.exists()){\n                    currentActivityId = activitySnapshot.getKey();\n\n                    cards item = new cards(activitySnapshot.getKey(),activitySnapshot.child(&quot;name&quot;).getValue().toString());\n                    rowItems.add(item);\n                    String key = activitySnapshot.getKey();\n                    activityTpeArrayAdapter.notifyDataSetChanged();\n                }\n            }\n</code></pre>\n<p>I want to check if <code>activitySnapshot.getKey()</code> is in users.child(&quot;Do&quot;).child(&quot;preferences&quot;) but I don't understand how to pass the <code>activitySnapshot.getKey()</code> into a listener checking in the &quot;Users&quot; tree of the database</p>\n<p>I have tried a number of listeners and experimented with setting a global variable that would store the activity ID and check if that exists in a separate function but couldn't understand the intricacies of the listeners and how to pass in variables to them</p>\n"},{"tags":["java","multithreading","concurrency","producer-consumer"],"comments":[{"owner":{"user_id":16034206,"display_name":"experiment unit 1998X"},"edited":false,"comment_id":134160360,"body":"why not have as many threads as your addresses? Then each thread can correspond to an address, and if a task is received from a specific address, pass it to the corresponding thread and that thread will add it to its own internal queue. (each thread only receives from one address and all the other threads wait/block on their own internal queue)"},{"owner":{"user_id":21324690,"display_name":"chunkynuggy"},"edited":false,"comment_id":134160445,"body":"would that be counterintuitive? I am currently using NIO Selector to manage all my datagram channels to avoid the one-thread-per-channel that Datagram Socket uses. and that sounds like a convoluted thread per channel using NIO selector instead."},{"owner":{"user_id":21324690,"display_name":"chunkynuggy"},"edited":false,"comment_id":134175585,"body":"I think I solved the issue! I ll update the code above with a working version"}],"answers":[{"owner":{"user_id":831614,"display_name":"Soteric"},"up_vote_count":1,"is_accepted":true,"creation_date":1682067929,"answer_id":76071611,"body":"<p>You can implement something like this.</p>\n<p>There is a fixed set of threads equal to the number of CPU cores. Some dispatcher takes the task out of the queue, checks the channel, gets the available thread and marks that this thread is currently serving this channel (some sort of Map&lt;Channel, Thread&gt;). If the next task belongs to the same channel and the thread is still busy then the task should be added to that thread queue. If the task belongs to some other channel then get the next available thread. If all threads are busy then wait for the one to become available. Once all the tasks in the thread queue are done it is removed from the map and the thread is ready to process any other channel task.</p>\n<p>As for your question regarding the number of threads. It depends on many internal factors that out of your control and usually testing is the best way to tune the number of threads. But the rule of thumb: if your task utilizes CPU for 100% (some intensive computation, math, sorting arrays and etc.) then the number of threads equal to the number of CPU cores will give you more or less optimal performance. If the task blocks for waiting some I/O operations, external service response (like DB or HTTP server) then you may increase the number of threads and this new number will depend on how much time the thread spends waiting.</p>\n"}],"owner":{"user_id":21324690,"display_name":"chunkynuggy"},"view_count":108,"up_vote_count":2,"accepted_answer_id":76071611,"answer_count":1,"score":2,"creation_date":1682055234,"question_id":76070173,"body":"<p>I have data that comes in from several multicast addresses. In my task consumer thread, I have an array of reentrantlocks, each index corresponding to a multicast address. I will lock fairly on an address. because I want to ensure that each data must be processed sequentially/in correct order</p>\n<pre><code>                task = TASK_QUEUE.take(); //arrayblockingqueue\n                lock = task.getUdpChannel().getLock();\n                try {\n                    while (!lock.tryLock(TIMEOUT, TimeUnit.MILLISECONDS)){}  //busy spin for lock\n                    runTask(appenderIndex);\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                } finally {\n                    lock.unlock();\n                    LOGGER.info(&quot;{} {} {} {} {} |&quot;, () -&gt; ZonedDateTime.ofInstant(Instant.ofEpochMilli(millis), ZoneId.of(&quot;Asia/Hong_Kong&quot;)) ,\n                        () -&gt; remoteAdd.getHostName(), () -&gt; remotePort, () -&gt; ni,\n                        () -&gt; remaining);\n                }\n</code></pre>\n<p>Checking the logs, it seems that some threads are &quot;chattier&quot; than others. I currently have 3 threads, and if it were to interact with the 12 datagram packets sent from 239.2.1.1 55000 as seen below, I believe that the task consumers will behave as if it was single threaded for that amount of time, since all the other threads will be blocked waiting for their turn (only one thread is allowed to lock)</p>\n<p><a href=\"https://i.stack.imgur.com/8u1bW.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8u1bW.png\" alt=\"one address sends more than the rest\" /></a></p>\n<p>I am considering to use multiple threads, more than the amount of cores that I have - 12 task consumer threads vs 8 cores (excluding the main thread and producer threads). This should mean that the extra threads can process tasks that are being queued up without waiting for these series of tasks from that specific address to finish completely.</p>\n<p>Is it reasonable to have more threads than cores? Would it be better to find out how to have a backlog of tasks (other threads pass tasks from 239.2.1.1 55000 to the thread that currently has the corresponding lock)</p>\n<p>I did read <a href=\"https://stackoverflow.com/a/3126400/21324690\">this</a>, which gives me the idea that having more threads is better, but how many more threads would it be reasonable to have?</p>\n<p>I have wrote some sample code as follows, The following is a working version that is infinitely looping, and has a working task dispatcher.</p>\n<pre><code>public class Main {\n    \n    private final ArrayBlockingQueue&lt;Task&gt; taskPool;\n    private final ArrayBlockingQueue&lt;Task&gt; taskQueue;\n    private static int capacity = 2000;\n    private static int threads = 3;\n    private Thread[] producers;\n    private Thread[] consumers;\n    \n    public Main() {\n        this.taskPool = new ArrayBlockingQueue&lt;&gt;(capacity);\n        this.taskQueue = new ArrayBlockingQueue&lt;&gt;(capacity, true);\n        this.producers = new Thread[threads];\n        consumers = new Thread[threads];\n        ReentrantLock[] locks = new ReentrantLock[4]; \n        TaskConsumer[] cArr = new TaskConsumer[threads];\n        TaskDispatch dispatch = new TaskDispatch(this.taskQueue, cArr, threads);\n        for (int i=0; i&lt; locks.length; i++) {\n            locks[i] = new ReentrantLock();\n        }\n        for (int i=0; i&lt; threads; i++) {\n            this.producers[i] = new Thread(new TaskProducer(this.taskPool, this.taskQueue), &quot;producer&quot;+i);\n            this.producers[i].start();\n            cArr[i] = new TaskConsumer(this.taskPool, locks, capacity, dispatch);\n            this.consumers[i] = new Thread(cArr[i], &quot;consumer&quot;+i);\n            this.consumers[i].start();\n        }\n        Thread dThread = new Thread(dispatch, &quot;dispatch&quot;);\n        dThread.start();\n    }\n    \n    public void fillPool() throws InterruptedException {\n        for (int i=0; i&lt; capacity; i++) {\n            taskPool.put(new Task());\n        }\n    }\n\n}\n\npublic class TaskProducer implements Runnable{\n    private final static String[] randomStrings = {&quot;random&quot;, &quot;payload&quot;, &quot;to&quot;, &quot;simulate&quot;};\n    private ArrayBlockingQueue&lt;Task&gt; TASK_POOL;\n    private ArrayBlockingQueue&lt;Task&gt; TASK_QUEUE;\n\n    public TaskProducer(ArrayBlockingQueue&lt;Task&gt; pool, ArrayBlockingQueue&lt;Task&gt; queue) {\n        // TODO Auto-generated constructor stub\n        this.TASK_POOL = pool;\n        this.TASK_QUEUE = queue;\n    }\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n        Task task = null;\n        Random rand = new Random();\n        while (true) {\n            if (Thread.currentThread().isInterrupted()) {\n                break;\n            }\n            if (task == null) {\n                try {\n                    task = TASK_POOL.take();\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            }\n//          System.out.println(&quot;iterating&quot;+task);\n            if (task != null) {\n                int idx = rand.nextInt(0, 4);\n                task.setId(idx);\n                task.setData(Instant.now().toString());\n                try {\n                    TASK_QUEUE.put(task);\n                    task = null;\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            }\n        }\n    }\n\n}\n\npublic class TaskConsumer implements Runnable {\n    private ArrayBlockingQueue&lt;Task&gt; TASK_POOL;\n    private ReentrantLock[] locks;\n    private ArrayBlockingQueue&lt;Task&gt; internalQueue;\n    private TaskDispatch dispatch;\n\n    public TaskConsumer(ArrayBlockingQueue&lt;Task&gt; pool, ReentrantLock[] locks, int capacity, TaskDispatch dispatch) {\n        // TODO Auto-generated constructor stub\n        this.TASK_POOL = pool;\n        this.locks = locks;\n        this.internalQueue = new ArrayBlockingQueue&lt;&gt;(capacity, true);\n        this.dispatch = dispatch;\n    }\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n        Task task = null;\n        while (true) {\n//          System.out.println(&quot;iterating &quot;+Thread.currentThread().getName());\n            if (Thread.currentThread().isInterrupted()) {\n                break;\n            }\n            if (task == null) {\n                try {\n                    task = internalQueue.take();\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            }\n            if (task != null) {\n                //process\n                int id = task.getId();\n                System.out.println(Thread.currentThread().getName()+&quot; &quot;+task.getId()+&quot; &quot;+task.getData()+&quot; &quot;+Instant.now().toString());\n                //return\n                try {\n                    if (internalQueue.peek() == null) {\n                        synchronized (dispatch) {\n                            if (internalQueue.peek() == null) {\n                                dispatch.signalFreeConsumer(task.getId(), this);\n                            }\n                        }\n                    }\n                    TASK_POOL.put(task);\n                    task = null;\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            }\n        }\n    }\n    \n    public void putInternalQueue(Task t) throws InterruptedException {\n        this.internalQueue.put(t);\n    }\n\n}\npublic class TaskDispatch implements Runnable {\n    private ConcurrentHashMap&lt;Integer , TaskConsumer&gt; mapping;\n    private ArrayBlockingQueue&lt;TaskConsumer&gt; freeConsumers;\n    private ArrayBlockingQueue&lt;Task&gt; TASK_QUEUE;\n    private TaskConsumer[] consumers;\n\n    public TaskDispatch( ArrayBlockingQueue&lt;Task&gt; queue,TaskConsumer[] consumers, int threads) {\n        mapping = new ConcurrentHashMap&lt;&gt;(threads);\n        freeConsumers = new ArrayBlockingQueue&lt;&gt;(threads);\n        this.TASK_QUEUE = queue;\n        this.consumers = consumers;\n    }\n\n    @Override\n    public void run() {\n        // TODO Auto-generated method stub\n        for (int i=0; i&lt; consumers.length; i++) {\n            try {\n                freeConsumers.put(consumers[i]);\n            } catch (InterruptedException e) {\n                e.printStackTrace();\n            }\n        }\n        Task task = null;\n        TaskConsumer free = null;\n        while (true) {\n            if (Thread.currentThread().isInterrupted()) {\n                break;\n            }\n            if (task == null) {\n                try {\n                    task = TASK_QUEUE.take();\n                } catch (InterruptedException e) {\n                    Thread.currentThread().interrupt();\n                }\n            }\n            if (task != null) {\n                if (mapping.containsKey(task.getId())) {\n                    synchronized (this) {\n                        if (mapping.containsKey(task.getId())) {\n                            try {\n                                mapping.get(task.getId()).putInternalQueue(task);\n                                task = null;\n                            } catch (InterruptedException e) {\n                                Thread.currentThread().interrupt();\n                            }\n                        }else {\n                            continue;\n                        }\n                    }\n                }else {\n                    try {\n                        if (free == null) {\n                            free = freeConsumers.poll(5000, TimeUnit.MILLISECONDS);\n                        }\n                        \n                        if (free != null) {\n                            synchronized (this) {\n                                mapping.putIfAbsent(task.getId(), free);\n                                free.putInternalQueue(task);\n                                task = null;\n                                free = null;\n                            }\n                        }\n                    } catch (InterruptedException e) {\n                        Thread.currentThread().interrupt();\n                    }\n                }\n            }\n        }\n    }\n    \n    public void signalFreeConsumer(Integer id, TaskConsumer consumer) throws InterruptedException {\n        synchronized (this) {\n//          System.out.println(&quot;removing &quot;+id+&quot; &quot;+Thread.currentThread().getName());\n            mapping.remove(id, consumer);\n            freeConsumers.put(consumer);\n//          System.out.println(&quot;notify &quot;+Arrays.asList(freeConsumers.toArray()));\n        }\n    }\n\n}\npublic class Runner {\n\n    public static void main(String[] args) throws InterruptedException {\n        // TODO Auto-generated method stub\n        Main m = new Main();\n        m.fillPool();\n    }\n\n}\npublic class Task {\n    private int id;\n    private String data;\n    \n    public Task () {}\n\n    public Task(int id, String dat) {\n        // TODO Auto-generated constructor stub\n        this.id = id;\n        this.data = dat;\n    }\n\n    public int getId() {\n        return this.id;\n    }\n\n    public String getData() {\n        return this.data;\n    }\n\n    public void setId(int id) {\n        this.id = id;\n    }\n\n    public void setData(String data) {\n        this.data = data;\n    }\n    \n    public String toString() {\n        return &quot;&quot;+id+&quot; &quot;+data;\n    }\n}\n</code></pre>\n"},{"tags":["java","android","android-sqlite","android-contentprovider","android-contentresolver"],"comments":[{"owner":{"user_id":2310289,"display_name":"Scary Wombat"},"edited":false,"comment_id":134156992,"body":"<i>it is throwing an error couldn&#39;t open database.</i> - please share the stacktrace"},{"owner":{"user_id":574911,"display_name":"NoAIUser"},"edited":false,"comment_id":134157299,"body":"edited the question to add stacktrace.  <code>Directory &#47;data&#47;data&#47;com.example.xxxxx&#47;databases doesn&#39;t exist</code> Actually Directory exists, looks like permission issue, not sure what permission that is."},{"owner":{"user_id":2310289,"display_name":"Scary Wombat"},"edited":false,"comment_id":134157415,"body":"<code>chmod 777 &#47;data&#47;data&#47;com.example.xxxxx&#47;databases&#47;*</code> ?"},{"owner":{"user_id":574911,"display_name":"NoAIUser"},"edited":false,"comment_id":134157464,"body":"Why would there be a permission issue when reading through contentresolver? Why we need to do this manual step to give permission to the db folder?"}],"answers":[{"owner":{"user_id":574911,"display_name":"NoAIUser"},"up_vote_count":1,"is_accepted":true,"creation_date":1682389716,"answer_id":76097277,"body":"<p>I had the issue with manifest tag sharedId, removing which resolved the issue. Also here's how the application looks like after the problem is solved. Hopefully this helps.</p>\n<p><a href=\"https://i.stack.imgur.com/hD19H.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hD19H.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"user_id":574911,"display_name":"NoAIUser"},"view_count":52,"up_vote_count":2,"accepted_answer_id":76097277,"answer_count":1,"score":2,"creation_date":1682037169,"question_id":76069107,"body":"<p>I've a requirement to access database created by a system user from other service via a foreground user. Both services are part of the same application.</p>\n<p>Created a system service, which creates a database and exposes it via ContentProvider. In another application, foreground user tries to access it via ContentResolver.</p>\n<p>Added permissions</p>\n<pre><code>&lt;uses-permission android:name=&quot;android.permission.READ_EXTERNAL_STORAGE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.WRITE_EXTERNAL_STORAGE&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.INTERACT_ACROSS_USERS&quot; /&gt;\n&lt;uses-permission android:name=&quot;android.permission.INTERACT_ACROSS_USERS_FULL&quot; /&gt;\n</code></pre>\n<p>manifest declarations</p>\n<pre><code>&lt;service\nandroid:name=&quot;.EXDBService&quot;\nandroid:enabled=&quot;true&quot;\nandroid:singleUser=&quot;true&quot;\nandroid:exported=&quot;true&quot; /&gt;\n\n&lt;service\nandroid:name=&quot;.EXService&quot;\nandroid:enabled=&quot;true&quot;\nandroid:exported=&quot;true&quot;\nandroid:permission=&quot;com.example.EX_SERVICE&quot; /&gt;\n&lt;provider\nandroid:name=&quot;.EXDBMananger&quot;\nandroid:authorities=&quot;com.example.provider&quot;\nandroid:exported=&quot;true&quot;\nandroid:readPermission=&quot;com.example.provider.READ_DATABASE&quot;\nandroid:writePermission=&quot;com.example.provider.WRITE_DATABASE&quot; /&gt;\n</code></pre>\n<p>But when making the request like insert/update with Contentresolver, it is throwing an error couldn't open database.</p>\n<pre><code>ContentResolver resolver = getContentResolver();\nUri uri = DbContract.BASE_CONTENT_URI;\n// initiate contentValues with valid data\nCursor cursor = resolver.insert(uri, contentValues);\n</code></pre>\n<p>Wish I could share more code here, but any guesses for what this could cause this issue?</p>\n<p>I saw the user id 11 trying to access database on other application which is running on user 0. Does this cause any permission issue?</p>\n<pre><code>2023-04-20 21:01:48.745 8530-8530/com.example.xxxxx E/SQLiteDatabase: Failed to open database '/data/data/com.example.xxxxx/databases/My.DB'.\n    android.database.sqlite.SQLiteCantOpenDatabaseException: Cannot open database '/data/data/com.example.xxxxx/databases/MY.DB': Directory /data/data/com.example.xxxxx/databases doesn't exist\n        at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:254)\n        at android.database.sqlite.SQLiteConnection.open(SQLiteConnection.java:205)\n        at android.database.sqlite.SQLiteConnectionPool.openConnectionLocked(SQLiteConnectionPool.java:505)\n        at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:206)\n        at android.database.sqlite.SQLiteConnectionPool.open(SQLiteConnectionPool.java:198)\n        at android.database.sqlite.SQLiteDatabase.openInner(SQLiteDatabase.java:919)\n        at android.database.sqlite.SQLiteDatabase.open(SQLiteDatabase.java:899)\n        at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:763)\n        at android.database.sqlite.SQLiteDatabase.openDatabase(SQLiteDatabase.java:752)\n        at android.database.sqlite.SQLiteOpenHelper.getDatabaseLocked(SQLiteOpenHelper.java:383)\n        at android.database.sqlite.SQLiteOpenHelper.getReadableDatabase(SQLiteOpenHelper.java:340)\n</code></pre>\n"},{"tags":["java","winapi","filesystems","jna"],"comments":[{"owner":{"user_id":1161484,"display_name":"Daniel Widdis"},"edited":false,"comment_id":134157962,"body":"I&#39;m not sure your union is modeled correctly.  Where is <code>FILE_ID_128</code> defined, and does it actually allocate 128 bits even if you&#39;re only assigning a value to the 64-bit member?"},{"owner":{"user_id":12302220,"display_name":"Andriy Y"},"edited":false,"comment_id":134159344,"body":"@DanielWiddis, this what you see in the post - is the last version I was trying. The DUMMYUNIONNAME was Structure, Pointer, there were NO DUMMYUNIONNAME, but just Id, etc. I was trying from 4 - to 512 bits - error code never changed. I&#39;m desperate actually to find a solution."}],"answers":[{"owner":{"user_id":1161484,"display_name":"Daniel Widdis"},"up_vote_count":1,"is_accepted":true,"creation_date":1682184693,"answer_id":76081031,"body":"<p>You've incorrectly initialized your <code>FILE_ID_DESCRIPTOR</code> values:</p>\n<pre class=\"lang-java prettyprint-override\"><code>new FILE_ID_DESCRIPTOR(\n   FILE_ID_DESCRIPTOR.sizeOf(),\n   0,\n   new DUMMYUNIONNAME(fii.FileId.Identifier)\n);\n</code></pre>\n<p>You're passing the <code>Type</code> parameter as 0, indicating you want the <code>long FileId</code> from the union.</p>\n<p>But you have hardcoded your dummy union constructor to assign the value to the 8-byte <code>long</code> member when the value of <code>fii.FileId.Identifier</code> is a 16-byte array.</p>\n<p>You've indicated in the comments that:</p>\n<blockquote>\n<p>this what you see in the post - is the last version I was trying. The DUMMYUNIONNAME was Structure, Pointer, there were NO DUMMYUNIONNAME, but just Id, etc. I was trying from 4 - to 512 bits - error code never changed.</p>\n</blockquote>\n<p>There is exactly one right answer and it's 16 bytes (128 bits).  However, if you pass a <code>Type</code> of 0, it's only reading the first 8 bytes (64 bits) of your <code>fii.FileId.Identifier</code>.</p>\n<p>Most likely you want to set/read the <code>ExtendedFileId</code> field in the union, by setting a <code>Type</code> of 2.</p>\n<p>There are several other issues with your code that are not the cause of the error:</p>\n<ol>\n<li>You are over-allocating memory when creating the <code>FILE_ID_INFO</code> by giving 128 bytes to <code>p</code>.  You haven't shown your mapping for it, but it's an 8-byte <code>long</code> followed by a structure wrapping a 16-byte array so you only need 24 bytes.</li>\n<li>You don't need to implement your own <code>sizeOf()</code>.  JNA's <code>Structure</code> has a <code>size()</code> method that does exactly what you're asking.  Or you can just use your knowledge that in this case the size is always 24.</li>\n<li>The <code>dwSize</code> field of <code>FILE_ID_DESCRIPTOR</code> is a <code>DWORD</code> not a <code>UINT</code>.  Since these are both 32-bit values it doesn't make a difference.  Since Java does not have a concept of signed integers you may as well just simplify and pass an <code>int</code> here.</li>\n<li>If you want to actually leverage JNA's <code>Union</code> class you should fully implement it including overriding the <code>read()</code> in the union to read the appropriate native value.  In your case, you're only writing it for use once, so you can just skip the complexity of the union and directly assign the internal field you want.  If that's the largest size value (the <code>FILE_ID_128</code>) you can just assign it directly. If it's a smaller size value (the <code>long</code> then you could just add padding to make sure the entire structure size is 24 bytes).</li>\n</ol>\n"}],"owner":{"user_id":12302220,"display_name":"Andriy Y"},"view_count":63,"up_vote_count":2,"accepted_answer_id":76081031,"answer_count":1,"score":2,"creation_date":1682021593,"question_id":76067944,"body":"<p>I'm trying to get file <strong>HANDLE</strong> by NTFS file id.</p>\n<ol>\n<li>Having file HANLDE I'm getting <strong>FILE_ID_INFO</strong></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>Memory p = new Memory(128);\n            Kernel32.INSTANCE.GetFileInformationByHandleEx(\n    hFile, \n    WinBase.FileIdInfo,\n    p,\n    new DWORD(p.size())\n);\nFILE_ID_INFO fii = new FILE_ID_INFO(p);\n</code></pre>\n<p>From FILE_ID_INFO I can get <strong>VolumeSerialNumber</strong> and <strong>FileId.Identifier</strong></p>\n<ol start=\"2\">\n<li>Now when I have that - I want to open HANDLE using VolumeSerialNumber and FileId.Identifier</li>\n<li>First using <strong>Kernel32Util.getLogicalDriveStrings()</strong> and <strong>Kernel32.INSTANCE.GetVolumeInformation</strong> I can find VolumeId by VolumeSerialNumber - which in my case would be D:\\</li>\n<li>Now I open HANDLE for D:\\ using <strong>Kernel32.INSTANCE.CreateFile</strong></li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>Kernel32.INSTANCE.CreateFile(\n    path,\n    FILE_READ_ATTRIBUTES,\n    1 | 2 | 4,\n    null,\n    OPEN_EXISTING,\n    FILE_FLAG_BACKUP_SEMANTICS,\n    null\n)\n</code></pre>\n<ol start=\"5\">\n<li>And last step - using <a href=\"https://learn.microsoft.com/en-us/windows/win32/api/winbase/nf-winbase-openfilebyid\" rel=\"nofollow noreferrer\">OpenFileById</a> I'm trying open file HANDLE by its id.\nMethod definition</li>\n</ol>\n<pre class=\"lang-java prettyprint-override\"><code>HANDLE OpenFileById(\n    HANDLE hVolumeHint,\n    Structure lpFileId,\n    int dwDesiredAccess,\n    int dwShareMode,\n    SECURITY_ATTRIBUTES lpSecurityAttributes,\n    int dwFlagsAndAttributes\n);\n</code></pre>\n<p>Required structure</p>\n<pre class=\"lang-java prettyprint-override\"><code>@FieldOrder({&quot;dwSize&quot;, &quot;Type&quot;, &quot;Id&quot;})\npublic static class FILE_ID_DESCRIPTOR extends Structure {\n\n    public UINT dwSize;\n    public int Type;\n    public DUMMYUNIONNAME Id;\n\n    @FieldOrder({&quot;FileId&quot;, &quot;ObjectId&quot;, &quot;ExtendedFileId&quot;})\n    public static class DUMMYUNIONNAME extends Union {\n\n        public long FileId;\n        public GUID ObjectId;\n        public FILE_ID_128 ExtendedFileId;\n\n        public DUMMYUNIONNAME() {\n             super();\n        }\n\n        public DUMMYUNIONNAME(long Id) {\n            this.FileId = Id;\n            write();\n        }\n    }\n\n    public static UINT sizeOf() {\n        return new UINT(Native.getNativeSize(FILE_ID_DESCRIPTOR.class, null));\n    }\n\n    public FILE_ID_DESCRIPTOR() {\n        super();\n    }\n\n    public FILE_ID_DESCRIPTOR(Pointer memory) {\n        super(memory);\n        read();\n    }\n\n    public FILE_ID_DESCRIPTOR(UINT dwSize, int type,\n            DUMMYUNIONNAME id) {\n        this.dwSize = dwSize;\n        this.Type = type;\n        this.Id = id;\n        write();\n    }\n}\n</code></pre>\n<p>Usage</p>\n<pre class=\"lang-java prettyprint-override\"><code>FILE_ID_DESCRIPTOR fileIdDesc = new FILE_ID_DESCRIPTOR(FILE_ID_DESCRIPTOR.sizeOf(), 0, new DUMMYUNIONNAME(fii.FileId.Identifier));\nHANDLE handle = Kernel32.INSTANCE.OpenFileById(hVolume, fileIdDesc, FILE_READ_ATTRIBUTES, 1 | 2 | 4, null, FILE_FLAG_BACKUP_SEMANTICS);\n</code></pre>\n<p>When I after executing\n<strong>Kernel32.INSTANCE.GetLastError();</strong>\nIt gives me - 87 Invalid Parameter.</p>\n<p>I've change FILE_ID_DESCRIPTOR to accept long instead of byte[], and other changes - but everytime - same error.</p>\n<p>Similar code works successfully in C#, but I need it to run in Java as well.</p>\n<p>Please advise.</p>\n"},{"tags":["java"],"comments":[{"owner":{"user_id":112968,"display_name":"knittl"},"edited":false,"comment_id":134146976,"body":"Your clear method looks odd, why do you call <code>.get()</code> on the threadlocal? That won&#39;t remove the value …"},{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":134147891,"body":"You forgot the <code>&lt;typeGoesHere&gt;</code> on data1 and data2."},{"owner":{"user_id":1348691,"display_name":"Tiina"},"edited":false,"comment_id":134157258,"body":"@knittl sorry, mistyped, already fix it from <code>get</code> to <code>remove</code>."},{"owner":{"user_id":1348691,"display_name":"Tiina"},"edited":false,"comment_id":134327744,"body":"<code>ThreadLocal</code> has a <code>isPresent</code> method, <code>local.isPresent</code> can be used to check if a local variable is removed."}],"answers":[{"owner":{"user_id":3461397,"display_name":"oleg.cherednik"},"up_vote_count":1,"is_accepted":true,"creation_date":1681986535,"answer_id":76063081,"body":"<p>Provably you should use <code>ThreadLocal.withInitial()</code>?</p>\n<pre class=\"lang-java prettyprint-override\"><code>class ContextHolder {\n\n    private final static ThreadLocal&lt;String&gt; DATA =\n                    ThreadLocal.withInitial(() -&gt; &quot;initial value&quot;);\n    \n}\n</code></pre>\n<p>It will initialize the thread local value once per thread.</p>\n<p><a href=\"http://www.java2s.com/example/java-book/set-the-initial-value-for-thread-local-variable.html\" rel=\"nofollow noreferrer\">Java - Set the initial value for thread-local variable</a></p>\n"}],"owner":{"user_id":1348691,"display_name":"Tiina"},"view_count":59,"up_vote_count":2,"accepted_answer_id":76063081,"answer_count":1,"score":2,"creation_date":1681986137,"question_id":76063023,"body":"<p>In a method it runs like this:</p>\n<pre><code>interceptorMethod () {\n    try {\n        ContextHolder.init();\n        doSomething();\n    } finally {\n        ContextHolder.clear();\n    }\n}\n</code></pre>\n<p>And ContextHolder is like this:</p>\n<pre><code>ContextHolder {\n    ThreadLocal&lt;Integer&gt; data1 = new ...\n    ThreadLocal&lt;Integer&gt; data2 = new ...\n    init(int d1, int d2) {\n       data1.set(d1)\n       data2.set(d2)\n    }\n    \n    clear() {\n       data1.remove()\n       data2.remove()\n    }\n    \n    // getters and setters for data1 and data2\n}\n</code></pre>\n<p>The problem shows up when <code>doSomething</code> is intercepted too, aka. <code>interceptorMethod</code> run twice. In this case, init() is called twice, and clear is also called twice, and clear cannot be called twice continuously.</p>\n<p>So I am thinking to add a <code>ThreadLocal&lt;Integer&gt; counter</code>, thereafter init becomes like this:</p>\n<pre><code>ContextHolder {\n    ThreadLocal&lt;Integer&gt; data1 = new ...\n    ThreadLocal&lt;Integer&gt; data2 = new ...\n    ThreadLocal&lt;Integer&gt; counter = new ...\n    init(int d1, int d2) {\n       // here, how do I know if counter is removed?\n       isRemoved(counter)? counter.set(0): counter.set(counteger.get() + 1)\n       data1.set(d1)\n       data2.set(d2)\n    }\n    clear() {\n       if ( 0 == minusCounter(counter)) {\n           data1.remove()\n           data2.remove()\n           counter.remove()\n       } \n    }\n</code></pre>\n<p><strong>Then how to detect if a ThreadLocal is already removed? isRemoved(counter)</strong> Or is there a better way, not using counter, to achieve this?</p>\n"},{"tags":["java","minecraft"],"comments":[{"owner":{"user_id":10952503,"display_name":"Elikill58"},"edited":false,"comment_id":134133637,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/67925186/could-not-load-plugin-due-to-error-jar-does-not-contain-plugin-yml\">Could not Load Plugin due to Error: &quot;Jar does not contain plugin.yml&quot;</a> or <a href=\"https://stackoverflow.com/a/74732824/10952503\">this one</a>"}],"answers":[{"owner":{"user_id":21668471,"display_name":"atlaska826"},"up_vote_count":1,"is_accepted":false,"creation_date":1681924538,"answer_id":76057208,"body":"<p>It would be nice to be able to see your plugin.yml, but with the information you've given, there are a few possible solutions I can think of.</p>\n<ol>\n<li>Check and make sure the plugin is located in the correct plugins folder. I've seen one time when there was a duplicate for some reason, so I'd check that.</li>\n<li>This is gonna sound like a really stupid fix, but make sure that your plugin is compatible with the version of Minecraft your server is in. I've done this before, so that's why I'm including it.</li>\n<li>You could also try redownloading the .jar file to see if it possibly got corrupted in any way.</li>\n<li>Make sure that your plugin.yml file is included on the jar.</li>\n</ol>\n<p>I mainly develop in Spigot and not Paper, and I know there are a few differences between the two, so I may be missing an obvious solution.</p>\n"}],"owner":{"user_id":18605954,"display_name":"Sigge"},"view_count":81,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681904797,"question_id":76054136,"body":"<p>I have got a error in this plugin, which i dont know how to fix.\nThe error (copied from console) is</p>\n<pre><code>[18:21:25 ERROR]: Error loading plugin: File 'plugins\\lobbyplugin.jar' failed to load!\njava.lang.RuntimeException: File 'plugins\\lobbyplugin.jar' failed to load!\n    at io.papermc.paper.plugin.provider.source.FileProviderSource.registerProviders(FileProviderSource.java:59) ~[paper-1.19.3.jar:git-Paper-448]\n    at io.papermc.paper.plugin.provider.source.DirectoryProviderSource.lambda$registerProviders$2(DirectoryProviderSource.java:32) ~[paper-1.19.3.jar:git-Paper-448]\n    at java.util.stream.ForEachOps$ForEachOp$OfRef.accept(ForEachOps.java:183) ~[?:?]\n    at java.util.stream.ReferencePipeline$2$1.accept(ReferencePipeline.java:179) ~[?:?]\n    at java.util.stream.ReferencePipeline$3$1.accept(ReferencePipeline.java:197) ~[?:?]\n    at java.util.Iterator.forEachRemaining(Iterator.java:133) ~[?:?]\n    at java.util.Spliterators$IteratorSpliterator.forEachRemaining(Spliterators.java:1921) ~[?:?]\n    at java.util.stream.AbstractPipeline.copyInto(AbstractPipeline.java:509) ~[?:?]\n    at java.util.stream.AbstractPipeline.wrapAndCopyInto(AbstractPipeline.java:499) ~[?:?]\n    at java.util.stream.ForEachOps$ForEachOp.evaluateSequential(ForEachOps.java:150) ~[?:?]\n    at java.util.stream.ForEachOps$ForEachOp$OfRef.evaluateSequential(ForEachOps.java:173) ~[?:?]\n    at java.util.stream.AbstractPipeline.evaluate(AbstractPipeline.java:234) ~[?:?]\n    at java.util.stream.ReferencePipeline.forEach(ReferencePipeline.java:596) ~[?:?]\n    at io.papermc.paper.plugin.provider.source.DirectoryProviderSource.registerProviders(DirectoryProviderSource.java:30) ~[paper-1.19.3.jar:git-Paper-448]\n    at io.papermc.paper.plugin.provider.source.DirectoryProviderSource.registerProviders(DirectoryProviderSource.java:14) ~[paper-1.19.3.jar:git-Paper-448]\n    at io.papermc.paper.plugin.util.EntrypointUtil.registerProvidersFromSource(EntrypointUtil.java:14) ~[paper-1.19.3.jar:git-Paper-448]\n    at io.papermc.paper.plugin.PluginInitializerManager.load(PluginInitializerManager.java:100) ~[paper-1.19.3.jar:git-Paper-448]\n    at net.minecraft.server.Main.main(Main.java:114) ~[paper-1.19.3.jar:git-Paper-448]\n    at org.bukkit.craftbukkit.Main.main(Main.java:302) ~[paper-1.19.3.jar:git-Paper-448]\n    at io.papermc.paperclip.Paperclip.lambda$main$0(Paperclip.java:42) ~[app:?]\n    at java.lang.Thread.run(Thread.java:1589) ~[?:?]\nCaused by: java.lang.IllegalArgumentException: File 'plugins\\lobbyplugin.jar' is not a valid plugin file, cannot load a plugin from it!\n    at io.papermc.paper.plugin.provider.source.FileProviderSource.registerProviders(FileProviderSource.java:54) ~[paper-1.19.3.jar:git-Paper-448]\n    ... 20 more\n</code></pre>\n<p>I tried the old way of checking for errors, but it didnt work.\nThe code is:</p>\n<pre><code>package com.gmail.AAAA.SpleefClicker;\n\n\nimport org.bukkit.Material;\nimport org.bukkit.NamespacedKey;\nimport org.bukkit.entity.ArmorStand;\nimport org.bukkit.entity.Player;\nimport org.bukkit.event.EventHandler;\nimport org.bukkit.event.Listener;\nimport org.bukkit.event.entity.EntityDamageByEntityEvent;\nimport org.bukkit.persistence.PersistentDataType;\nimport org.bukkit.plugin.java.JavaPlugin;\n\nimport com.google.common.io.ByteArrayDataOutput;\nimport com.google.common.io.ByteStreams;\npublic final class SpleefClicker extends JavaPlugin implements Listener {\n    @Override\n    public void onEnable() {\n        getLogger().info(&quot;onEnable has been invoked!&quot;);\n    }\n\n\n    @Override\n    public void onDisable() {\n        // TODO Put stuff to clean the plugin up.\n    }\n    @SuppressWarnings(&quot;deprecation&quot;)\n    @EventHandler\n    public void onArmorStandDamage(EntityDamageByEntityEvent event) {\n        if (!(event.getEntity() instanceof ArmorStand)) {\n            return;\n        }\n\n        ArmorStand armorStand = (ArmorStand) event.getEntity();\n\n        if (!armorStand.getPersistentDataContainer().has(new NamespacedKey(this, &quot;tag&quot;), PersistentDataType.STRING)) {\n            return;\n        }\n\n        if (!armorStand.getPersistentDataContainer().get(new NamespacedKey(this, &quot;tag&quot;), PersistentDataType.STRING).equals(&quot;spleefclicker&quot;)) {\n            return;\n        }\n\n        if (!(event.getDamager() instanceof Player)) {\n            return;\n        }\n\n        Player player = (Player) event.getDamager();\n\n        if (player.getInventory().getItemInMainHand().getType() != Material.STICK) {\n            return;\n        }\n\n        player.sendMessage(&quot;We are attempting to teleport you&quot;);\n        // TODO Add bungeecord pluginmessages to teleport the player to another server\n        armorStand.setHealth(armorStand.getMaxHealth()); // Heal the armor stand to prevent it breaking.\n    }\n}\n</code></pre>\n<p>I tried to make a plugin to interact with the world and send a player to minigame server.</p>\n<p>I expected it to send a message and teleport the player (not currently implemented)</p>\n<p>However, it failed to load.\nThe plugin.yml exists and the code is OK.</p>\n"},{"tags":["java","dictionary","switch-statement","java-stream","language-agnostic"],"answers":[{"owner":{"user_id":12706564,"display_name":"Emanuel Trandafir"},"up_vote_count":1,"is_accepted":true,"creation_date":1681900229,"answer_id":76053450,"body":"<p>It's an interesting approach, I sometimes do it for filters or mappers. The only thing I would change would be to avoid using a <code>Map</code> if you don't really need one (what would be the hashcode of your Predicate - it can be looked up, but still, it's not super straightforward).</p>\n<p>Instead, you can put the Predicate and the Consumer in some sort of <code>Pair&lt;&gt;</code> or <code>Tuple&lt;&gt;</code>, or even create your own structure:</p>\n<pre><code>record PossibleAction&lt;T&gt;(\n        Predicate&lt;T&gt; predicate,\n        Consumer&lt;T&gt; action\n) {\n    // if you use a custom structure you can define these methods\n    // and use .appliesFor(data) instead of using .getPredicate().test(data)\n    public boolean appliesFor(T data) {\n        return predicate.test(data);\n    }\n\n    public void apply(T data) {\n        action.accept(data);\n    }\n}\n</code></pre>\n<p>Now you can have a list of these <code>PossibleActions</code>:</p>\n<pre><code>List&lt;PossibleAction&lt;String&gt;&gt; actions = List.of(\n    new PossibleAction&lt;&gt;(s -&gt; s.contains(&quot;A&quot;), s -&gt; System.out.println(&quot;1&quot;) ),\n    new PossibleAction&lt;&gt;(s -&gt; s.contains(&quot;B&quot;), s -&gt; System.out.println(&quot;2&quot;) ),\n    new PossibleAction&lt;&gt;(s -&gt; s.contains(&quot;C&quot;), s -&gt; System.out.println(&quot;3&quot;) )\n);\n</code></pre>\n<p>And you can use this, as pointed out by you in the initial post:</p>\n<pre><code>void performActions(String data) {\n    actions.stream()\n            .filter(a -&gt; a.appliesFor(data))\n            .forEach(a -&gt; a.apply(data));\n}\n</code></pre>\n"}],"owner":{"user_id":10084790,"display_name":"Shmuel Greeberger"},"view_count":42,"up_vote_count":2,"accepted_answer_id":76053450,"answer_count":1,"score":2,"creation_date":1681891770,"question_id":76052119,"body":"<p>At the risk of this being an opinion based question, would creating a Map/dictionary where the keys are predicates and the values the action to be made be a good and viable substitute for switch case?</p>\n<p>For example (following Java Map) :</p>\n<pre><code>    Map.of(predicate1, action1, ... predicateN, actionN)\n    .entrySet().stream()\n    .filter(e -&gt; e.getKey()).findAny()\n    .ifPresentOrElseThrow().getValue();\n</code></pre>\n"},{"tags":["java","spring-boot","google-chrome","cors","private-network-access"],"answers":[{"owner":{"user_id":2094249,"display_name":"tbigby"},"up_vote_count":1,"is_accepted":false,"creation_date":1682663974,"answer_id":76126873,"body":"<p>This is not quite an answer to why your code does not work, but I have just created a Spring way to achieve this, so it may assist you. I am using Spring Boot 2.7 therefore Spring 5.3 is included.</p>\n<p>It uses a custom <code>CorsProcessor</code> class to add the relevant header to the response.</p>\n<p><code>CustomCorsProcessor.java</code>:</p>\n<pre><code>public class CustomCorsProcessor extends DefaultCorsProcessor implements CorsProcessor {\n\n    private static final String ACCESS_CONTROL_REQUEST_PRIVATE_NETWORK = &quot;Access-Control-Request-Private-Network&quot;;\n    private static final String ACCESS_CONTROL_ALLOW_PRIVATE_NETWORK = &quot;Access-Control-Allow-Private-Network&quot;;\n    \n    @Override\n    public boolean processRequest(@Nullable CorsConfiguration config, HttpServletRequest request,\n            HttpServletResponse response) throws IOException {\n        \n        //Allow DefaultCorsProcessor to run first\n        boolean superResult = super.processRequest(config, request, response);\n        if (superResult == false) return false;\n        \n        ServerHttpRequest serverRequest = new ServletServerHttpRequest(request);\n        \n        //If the CORS header requesting Private Network access is present, respond allowing access\n        if(serverRequest.getHeaders().containsKey(ACCESS_CONTROL_REQUEST_PRIVATE_NETWORK)) {\n            response.addHeader(ACCESS_CONTROL_ALLOW_PRIVATE_NETWORK, Boolean.toString(true));\n        }\n        \n        return true;\n    }\n}\n</code></pre>\n<p>You might like to customise the <code>CorsConfiguration</code> class to avoid hardcoding the Boolean <code>true</code>.</p>\n<p>Then the <code>CustomCorsProcessor</code> class is used in <code>WebSecurityConfig</code> as a <code>CorsProcessor</code>.</p>\n<p>Note that before this Private Network change, the <code>CorsConfigurationSource</code> was itself an <code>@Bean</code> but now the <code>CorsFilter</code> is the <code>@Bean</code>.</p>\n<pre><code>@Configuration\n@EnableWebSecurity\npublic class WebSecurityConfig {\n    @Bean\n    public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {\n        http\n            // by default uses a Bean by the name of corsFilter\n            .cors()\n            .and()\n            ... as needed for your application\n\n        return http.build();\n    }\n\n    public CorsConfigurationSource corsConfigurationSource() {\n        CorsConfiguration configuration = new CorsConfiguration();\n        configuration.setAllowCredentials(true);\n        configuration.addAllowedOrigin(&quot;http://domain1.com&quot;);\n        configuration.addAllowedHeader(&quot;*&quot;);\n        configuration.addAllowedMethod(&quot;*&quot;);\n        UrlBasedCorsConfigurationSource source = new UrlBasedCorsConfigurationSource();\n        source.registerCorsConfiguration(&quot;/**&quot;, configuration);\n        return source;\n    }\n    \n    @Bean\n    public CorsFilter corsFilter() {\n        CorsConfigurationSource corsConfigurationSource = corsConfigurationSource();\n        CorsFilter corsFilter = new CorsFilter(corsConfigurationSource);\n\n        //Register our custom CorsProcessor that includes the Private Network allowed header\n        corsFilter.setCorsProcessor(new CustomCorsProcessor());\n        return corsFilter;\n    }\n}\n</code></pre>\n<p>This then allowed Chrome to connect to the Private Network web service.</p>\n<p>This is partly based on what I found from these URLs:</p>\n<p><a href=\"https://spring.io/blog/2015/06/08/cors-support-in-spring-framework\" rel=\"nofollow noreferrer\">https://spring.io/blog/2015/06/08/cors-support-in-spring-framework</a><br />\n<a href=\"https://www.baeldung.com/spring-cors\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-cors</a></p>\n"}],"owner":{"user_id":21664963,"display_name":"Naga"},"view_count":97,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681743340,"question_id":76036487,"body":"<p>I have a webapp hosted on a public URL, trying to call a local webservice API (running on localhost)\nI am using Chrome to access the public website, this creates a CORS issue as described here</p>\n<p><a href=\"https://developer.chrome.com/blog/private-network-access-preflight/\" rel=\"nofollow noreferrer\">https://developer.chrome.com/blog/private-network-access-preflight/</a></p>\n<p>The solution stated in the above link is to either,</p>\n<ol>\n<li>Disable Private Network Access checks in Chrome (which works)</li>\n<li>Set response header &quot;Access-Control-Allow-Private-Network: true&quot;  (doesnt work)</li>\n</ol>\n<p>There is no Spring CORS support for the header &quot;Access-Control-Allow-Private-Network&quot; yet. So I have tried various ways to create a filter in my Spring Boot application, but to no avail. The filter never gets invoked and I encounter the CORS issue.</p>\n<p>Please point me in the right direction to fix this issue.</p>\n<p>This is my filter class</p>\n<pre><code>@Component\n@Order(Ordered.HIGHEST_PRECEDENCE)\npublic class MyFilter implements Filter {\n\n    @Override\n    public void doFilter(ServletRequest servletRequest, ServletResponse servletResponse, FilterChain filterChain) throws IOException, ServletException {\n        log.info(&quot;MyFilter invoked............&quot;);\n        final HttpServletResponse response = (HttpServletResponse) servletResponse;\n        response.setHeader(&quot;Access-Control-Allow-Private-Network&quot;, &quot;true&quot;);\n        filterChain.doFilter(servletRequest, servletResponse);\n    }\n}\n</code></pre>\n<p>This is my config class</p>\n<pre><code>@Configuration\npublic class MyConfig {\n\n    @Bean\n    public WebMvcConfigurer corsMappingConfigurer() {\n        return new WebMvcConfigurer() {\n            @Override\n            public void addCorsMappings(CorsRegistry registry) {\n                registry.addMapping(&quot;/**&quot;);\n            }\n        };\n    }\n</code></pre>\n"},{"tags":["java","iso8583","jpos"],"answers":[{"owner":{"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"up_vote_count":1,"is_accepted":true,"creation_date":1681756838,"answer_id":76038283,"body":"<p>You can use a <code>Switch</code> transaction participant with transaction groups like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;txnmgr class=&quot;org.jpos.transaction.TransactionManager&quot; logger=&quot;Q2&quot;&gt;\n    &lt;property name=&quot;queue&quot; value=&quot;TXNMGR&quot;/&gt;\n    &lt;property name=&quot;sessions&quot; value=&quot;10&quot;/&gt;\n    &lt;property name=&quot;max-sessions&quot; value=&quot;100&quot;/&gt;\n\n    &lt;participant class=&quot;org.jpos.transaction.participant.Switch&quot;\n      logger=&quot;Q2&quot; realm=&quot;Switch&quot;&gt;\n      &lt;property name=&quot;txnname&quot; value=&quot;&lt;CONTEXT_KEY_TO_SWITCH_ON&gt;&quot;/&gt; &lt;!--1--&gt;\n      &lt;property name=&quot;&lt;LOCAL_VALUE&gt;&quot; value=&quot;LOCAL&quot;/&gt;                &lt;!--2--&gt;\n      &lt;property name=&quot;&lt;UAT_VALUE&gt;&quot; value=&quot;UAT&quot;/&gt;                    &lt;!--3--&gt;\n      &lt;property name=&quot;unknown&quot; value=&quot;&lt;DEFAULT_ENDPOINT_OR_ERROR_GROUP&gt;&quot;/&gt;  &lt;!--4--&gt;\n    &lt;/participant&gt;\n    &lt;group name=&quot;LOCAL&quot;&gt;\n        &lt;participant name=&quot;LOCAL&quot; class=&quot;com.sanjok.qbean.RestParticipant&quot;&gt;     \n...\n       &lt;/participant&gt;\n     &lt;/group&gt;    \n     &lt;group name=&quot;UAT&quot;&gt;\n       &lt;participant name=&quot;UAT&quot; class=&quot;com.sanjok.qbean.RestParticipant&quot;&gt;     \n...\n       &lt;/participant&gt;\n    &lt;/group&gt;\n    &lt;participant class=&quot;org.jpos.transaction.participant.SendResponse&quot;&gt;        \n    &lt;/participant&gt;\n&lt;/txnmgr&gt;\n\n</code></pre>\n<ol>\n<li><code>&lt;CONTEXT_KEY_TO_SWITCH_ON&gt;</code> is the context key that contains the value based on which you want to select the destiny.</li>\n<li><code>&lt;LOCAL_VALUE&gt;</code> is the value of that key that should make the transaction go to local</li>\n<li><code>&lt;UAT_VALUE&gt;</code> is the value of that key that should make the transaction go to UAT.</li>\n<li><code>&lt;DEFAULT_ENDPOINT_OR_ERROR_GROUP&gt;</code> is the endpoint (or an error group, if you want to handle it like that) where you want to go if none of the previous match. Like the <code>default</code> on a java <code>switch</code> statement.</li>\n</ol>\n<p>The <code>Switch</code> transaction participant is documented in the <a href=\"http://jpos.org/doc/proguide-draft.pdf\" rel=\"nofollow noreferrer\">jPOS Programmer's Guide</a> section 9.8.1.</p>\n<p>Basically, we are saying that if the key matches <code>&lt;LOCAL_VALUE&gt;</code> run group <code>LOCAL</code>, if it matches <code>&lt;UAT_VALUE&gt;</code> run group <code>UAT</code>, else run whatever group you define there. Participants in each group get executed right after the <code>Switch</code> participant, and before the next one.</p>\n<h1>Select endpoint based on a property of a context object.</h1>\n<p>The OP asked in a comment to be able to select the endpoint based on a field of the request. For this we need to use code, it can be in a scripted participant.</p>\n<p>Best option would be to use <code>GroovyParticipant</code> since it enables to precompile the script, but since the OP is not using jPOS-EE, not clear if he doesn't want to, or just isn't but willing to do.</p>\n<h2>Using <code>BSHGroupSelector</code>.</h2>\n<p>The simplest option is to use <code>BSHGroupSelector</code> since we just need to modify the <code>Switch</code> participant for this xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>  &lt;participant class=&quot;org.jpos.transaction.participant.BSHGroupSelector&quot;&gt;\n    &lt;select&gt;\n      import org.jpos.iso.*;\n      ISOMsg m = context.get(&quot;REQUEST&quot;);\n      String de3 = m.getString(3);\n      result = (/*condition on DE3 for selecting UAT*/) ?  &quot;UAT&quot; : &quot;LOCAL&quot;;\n    &lt;/select&gt;\n  &lt;/participant&gt;\n</code></pre>\n<p><code>result</code> is the variable used by <code>GroupSelector</code> to determine the result of the <code>select</code> method, i.e., get the group to run.</p>\n<h2>Using <code>JSParticipant</code></h2>\n<p>There is no way to write a <code>GroupSelector</code> with <code>JSParticipant</code> that I know of. However, we can use a <code>JSParticipant</code> to extract field 3 to a context key. We would need to add this participant, previous to the <code>Switch</code> participant:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;participant class=&quot;org.jpos.transaction.participant.JSParticipant&quot;\n  logger=&quot;Q2&quot; realm=&quot;js&quot; src='cfg/extract-de3.js' /&gt;\n&lt;/participant&gt;\n</code></pre>\n<p>Where <code>cfg/extract-de3.js</code> has the following content:</p>\n<pre class=\"lang-js prettyprint-override\"><code>var K = Java.type(&quot;org.jpos.transaction.TransactionConstants&quot;);\nvar prepare = function(id, ctx) {\n  //put de 3 in context under de3 key.  ctx.put(&quot;de3&quot;, \n  ctx.get(&quot;REQUEST&quot;).getString(3);\n  return K.PREPARED;\n}\n</code></pre>\n<p>The <code>Switch</code> participant definition would be as follows:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;participant class=&quot;org.jpos.transaction.participant.Switch&quot;\n      logger=&quot;Q2&quot; realm=&quot;Switch&quot;&gt;\n      &lt;property name=&quot;txnname&quot; value=&quot;de3&quot;/&gt; \n      &lt;property name=&quot;&lt;LOCAL_VALUE&gt;&quot; value=&quot;LOCAL&quot;/&gt;                \n      &lt;property name=&quot;&lt;UAT_VALUE&gt;&quot; value=&quot;UAT&quot;/&gt;                    \n      &lt;property name=&quot;unknown&quot; value=&quot;&lt;DEFAULT_ENDPOINT_OR_ERROR_GROUP&gt;&quot;/&gt;\n    &lt;/participant&gt;\n</code></pre>\n"},{"owner":{"user_id":183639,"display_name":"apr"},"up_vote_count":0,"is_accepted":false,"creation_date":1681783393,"answer_id":76040540,"body":"<p>You can take advantage of jPOS environment variables and add the <code>enabled</code> attribute.</p>\n<p>You can have a couple of environment variables, i.e:<code>uat.enabled</code>and <code>local.enabled</code> that you can configure like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;participant name=&quot;LOCAL&quot; class=&quot;com.sanjok.qbean.RestParticipant&quot; enabled=&quot;${local.enabled}&quot;&gt; \n    ...\n    ...\n&lt;/participant&gt;\n&lt;participant name=&quot;UAT&quot; class=&quot;com.sanjok.qbean.RestParticipant&quot; enabled-&quot;${uat.enabled}&quot;&gt;  \n   ...\n   ...\n&lt;/participant&gt;\n  \n</code></pre>\n<p>The you can either use YAML configurations or just environment variables (<code>LOCAL_ENABLED</code> and <code>UAT_ENABLED</code>).</p>\n<p>This is documented in <a href=\"http://jpos.org/doc/proguide.pdf\" rel=\"nofollow noreferrer\">jPOS Programmer's Guide</a> section 3.3.</p>\n"}],"owner":{"user_id":3124992,"display_name":"Sanjok"},"view_count":60,"up_vote_count":2,"accepted_answer_id":76038283,"answer_count":2,"score":2,"creation_date":1681708886,"question_id":76031925,"body":"<p>I have multiple participants in my transaction manager config as below. I want to switch between <code>UAT</code> and <code>LOCAL</code> participants based on the object property that the current context holds (like if specific fields have specific values). How can I achieve this without having to change Java code and just modify the XML config? I am not sure if <code>org.jpos.transaction.participant.JSParticipant</code> is the way to go.</p>\n<p><strong>NOTE</strong>: I am simply using <strong>jpos-template</strong> project but not the <strong>Jpos-EE</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;txnmgr class=&quot;org.jpos.transaction.TransactionManager&quot; logger=&quot;Q2&quot;&gt;\n    &lt;property name=&quot;queue&quot; value=&quot;TXNMGR&quot;/&gt;\n    &lt;property name=&quot;sessions&quot; value=&quot;10&quot;/&gt;\n    &lt;property name=&quot;max-sessions&quot; value=&quot;100&quot;/&gt;\n\n \n    &lt;participant name=&quot;LOCAL&quot; class=&quot;com.sanjok.qbean.RestParticipant&quot;&gt;     \n\n        &lt;property name=&quot;server-signature-public-key&quot;\n                  value=&quot;***&quot;/&gt;\n        &lt;property name=&quot;server-encryption-public-key&quot;\n                  value=&quot;***&quot;/&gt;\n        &lt;property name=&quot;base64-client-signature-private-key&quot;\n                  value=&quot;***&quot;/&gt;\n        &lt;property name=&quot;base64-client-encryption-private-key&quot;\n                  value=&quot;***&quot;/&gt;               \n    &lt;/participant&gt;\n    \n     &lt;participant name=&quot;UAT&quot; class=&quot;com.sanjok.qbean.RestParticipant&quot;&gt;     \n\n        &lt;property name=&quot;server-signature-public-key&quot;\n                  value=&quot;***&quot;/&gt;\n        &lt;property name=&quot;server-encryption-public-key&quot;\n                  value=&quot;***&quot;/&gt;\n        &lt;property name=&quot;base64-client-signature-private-key&quot;\n                  value=&quot;***&quot;/&gt;\n        &lt;property name=&quot;base64-client-encryption-private-key&quot;\n                  value=&quot;***&quot;/&gt;               \n    &lt;/participant&gt;\n\n    &lt;participant class=&quot;org.jpos.transaction.participant.SendResponse&quot;&gt;        \n    &lt;/participant&gt;\n&lt;/txnmgr&gt;\n</code></pre>\n"},{"tags":["java","oop","equality"],"comments":[{"owner":{"user_id":112968,"display_name":"knittl"},"edited":false,"comment_id":134079954,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/40480/is-java-pass-by-reference-or-pass-by-value\">Is Java &quot;pass-by-reference&quot; or &quot;pass-by-value&quot;?</a>"},{"owner":{"user_id":112968,"display_name":"knittl"},"edited":false,"comment_id":134079962,"body":"<code>var x = 4; var y = x; y = 2;</code> – x is still 4."},{"owner":{"user_id":1899640,"display_name":"that other guy"},"edited":false,"comment_id":134080046,"body":"It sounds like you&#39;re reading the <code>=</code> as mathematical equality, so that <code>x=y, x=z</code> means <code>y=z</code>. It&#39;s actually assignment, in math sometimes written <code>:=</code>, and means something like &quot;forget the previous definition of x and use this new one instead&quot;"},{"owner":{"user_id":12299000,"display_name":"kaya3"},"edited":false,"comment_id":134080178,"body":"I suggest you try stepping through your program with a visualisation like <a href=\"https://pythontutor.com/java.html\" rel=\"nofollow noreferrer\">this one</a>."},{"owner":{"user_id":21651013,"display_name":"Andrew"},"edited":false,"comment_id":134080774,"body":"@knittl The pass-by-value thing is for passing objects into methods. This example however is all in the main method. Basically i&#39;m saying why obj.child = obj3 is different from saying obj2 = obj3, assuming that obj.child is obj2"}],"answers":[{"owner":{"user_id":5050667,"display_name":"Yassin Hajaj"},"up_vote_count":1,"is_accepted":false,"creation_date":1681574479,"answer_id":76023341,"body":"<p>This is what happens after each of your code lines.</p>\n<h2>1</h2>\n<pre class=\"lang-java prettyprint-override\"><code>Practice obj = new Practice(10);\n// HEAP\n// ====\n//                +--------------+\n//      obj ----&gt; + Practice(10) +\n//                +--------------+\n</code></pre>\n<h2>2</h2>\n<pre class=\"lang-java prettyprint-override\"><code>Practice obj2 = new Practice(9);\n// HEAP\n//                +--------------+\n//      obj ----&gt; + Practice(10) +\n//                +--------------+\n//\n//                 +-------------+\n//      obj2 ----&gt; + Practice(9) +  \n//                 +-------------+   \n</code></pre>\n<h2>3</h2>\n<pre class=\"lang-java prettyprint-override\"><code>Practice obj = new Practice(10);\n// HEAP\n// ====\n//                +--------------+\n//      obj ----&gt; + Practice(10) +\n//                +--------------+\n//\n//                 +-------------+\n//      obj2 ----&gt; + Practice(9) +  \n//                 +-------------+        \n//  \n//                 +--------------+       \n//      obj3 ----&gt; + Practice(11) +\n//                 +--------------+    \n</code></pre>\n<h2>4</h2>\n<pre class=\"lang-java prettyprint-override\"><code>obj.child = obj3;\n// HEAP\n// ====\n//                +--------------+\n//      obj ----&gt; + Practice(10) +\n//                +    child -------------+\n//                +--------------+        |\n//                                        |\n//                 +-------------+        |\n//      obj2 ----&gt; + Practice(9) +        |\n//                 +-------------+        | \n//                                        |\n//                 +--------------+       |\n//      obj3 ----&gt; + Practice(11) +  &lt;----+\n//                 +--------------+ \n</code></pre>\n<h2>5</h2>\n<pre class=\"lang-java prettyprint-override\"><code>obj.child = obj2;\n// HEAP\n// ====\n//                +--------------+\n//      obj ----&gt; + Practice(10) +\n//                +    child -------------+\n//                +--------------+        |\n//                                        |\n//                 +-------------+        |\n//      obj2 ----&gt; + Practice(9) + &lt;------+\n//                 +-------------+         \n//                                        \n//                 +--------------+       \n//      obj3 ----&gt; + Practice(11) +\n//                 +--------------+ \n</code></pre>\n"}],"owner":{"user_id":21651013,"display_name":"Andrew"},"view_count":82,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681573541,"question_id":76023279,"body":"<pre><code>public class Practice {\n    public int value;\n    public Practice child;\n    public Practice(int value) {\n        this.value = value; \n    }\n\n    public static void main(String[] args) {\n        Practice obj = new Practice(10);\n        Practice obj2 = new Practice(9);\n        Practice obj3 = new Practice(11);\n\n        obj.child = obj3;\n        obj.child = obj2;\n\n        System.out.println(obj2 == obj3);\n\n\n    }\n\n}\n</code></pre>\n<p>In this code, since I made obj.child = obj3, then I thought you could substitute obj3 for obj.child so that in other words the line &quot;obj.child = obj2&quot; could mean &quot;obj3 = obj2&quot;. However, in the print statement it returns false.</p>\n<p>However, if you do something like</p>\n<pre><code>obj.child = obj3;\nobj.child.value = obj2.value;\n</code></pre>\n<p>Then you are actually manipulating obj3 as its value changes, however in the previous code obj3 is only &quot;replaced&quot; however the object remains unchanged.</p>\n<p>Same thing here:</p>\n<pre><code>obj.child = obj3;\nobj2 = obj.child;\n</code></pre>\n<p>Now they are actual equal... so you can subsitute obj3 for obj.child? Now Im confused... Bit of a novice coder so I would appreciate if someone would clear this up for me. Thank you!!</p>\n"},{"tags":["java","android"],"answers":[{"owner":{"user_id":21408550,"display_name":"inkredusk"},"up_vote_count":1,"is_accepted":true,"creation_date":1681560332,"answer_id":76022154,"body":"<p><strong>Welcome to StackOverflow!</strong></p>\n<p>Here is a <code>quick and dirty</code> implementation to give you an idea. You will need to build a <code>better logic</code> based on your requirements. The idea here is to use a <code>Handler</code> to append the characters of the <code>word</code> (which is <code>Hello</code> in below example) with a certain <code>delay</code> to give it a <code>typewriter</code> kind of effect.</p>\n<p><strong>MainActivity.java</strong></p>\n<pre><code>public class MainActivity extends AppCompatActivity {\n      \n    TextView typingt;\n    Button typingb;\n  \n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_main);\n          \n        typingb = findViewById(R.id.typingb);\n        typingt = findViewById(R.id.typingt);\n          \n        typingb.setOnClickListener(new View.OnClickListener() {\n            @Override\n            public void onClick(View v) {\n                new Handler().postDelayed(new Runnable() {\n                    @Override\n                    public void run() {\n                        typingt.setText(&quot;H&quot;);\n                    }\n                }, 300);\n                new Handler().postDelayed(new Runnable() {\n                    @Override\n                    public void run() {\n                        typingt.append(&quot;e&quot;);\n                    }\n                }, 400);\n                new Handler().postDelayed(new Runnable() {\n                    @Override\n                    public void run() {\n                        typingt.append(&quot;e&quot;);\n                    }\n                }, 500);\n                new Handler().postDelayed(new Runnable() {\n                    @Override\n                    public void run() {\n                        typingt.append(&quot;l&quot;);\n                    }\n                }, 600);\n                new Handler().postDelayed(new Runnable() {\n                    @Override\n                    public void run() {\n                        typingt.append(&quot;o&quot;);\n                    }\n                }, 700);\n                \n              }\n        });\n    }\n}\n</code></pre>\n<p><strong>activity_main.xml</strong></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout\n    xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:layout_margin=&quot;20dp&quot;\n    android:orientation=&quot;vertical&quot;\n    android:padding=&quot;20dp&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/typingt&quot;\n        android:layout_width=&quot;wrap_content&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_alignParentTop=&quot;true&quot;\n        android:layout_centerHorizontal=&quot;true&quot;\n        android:layout_margin=&quot;15dp&quot;\n        android:text=&quot;Hello&quot;\n        android:textColor=&quot;@color/black&quot;\n        android:textSize=&quot;30dp&quot; /&gt;\n\n    &lt;Button\n        android:id=&quot;@+id/typingb&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:layout_margin=&quot;15dp&quot;\n        android:background=&quot;@color/black&quot;\n        android:padding=&quot;20dp&quot;\n        android:text=&quot;Typing Animation&quot; /&gt;\n    \n&lt;/LinearLayout&gt;\n</code></pre>\n<p>Hope this helps to give you some idea.</p>\n"}],"owner":{"user_id":21648604,"display_name":"Ali Nasouri"},"view_count":42,"up_vote_count":2,"accepted_answer_id":76022154,"answer_count":1,"score":2,"creation_date":1681558574,"question_id":76022012,"body":"<p>I am a very novice java learner,\nI am trying to ADD typewriter effect to my app in android studio. I have defined the class &quot;typeWriter&quot; for the effect, still I have problem to use it in my app. specifically, to use the text from other classes.</p>\n<pre><code>@Override\nprotected void onCreate(Bundle savedInstanceState) {\n    super.onCreate(savedInstanceState);\n    setContentView(R.layout.game_screen);\n    image = (ImageView) findViewById(R.id.IntroImage);\n    text = (TextView) findViewById(R.id.HelpAndDefine);\n    button1 = (Button) findViewById(R.id.button3);\n    button2 = (Button) findViewById(R.id.button5);\n    button3 = (Button) findViewById(R.id.button7);\n    button1.setTransformationMethod(null);\n    button2.setTransformationMethod(null);\n    button3.setTransformationMethod(null);\n    typeWriter txtView = findViewById(R.id.HelpAndDefine);\n    txtView.setText(&quot;&quot;);\n    txtView.setCharacterDelays(150);\n    txtView.animateText(&quot;&quot;);\n\n\n    story.startingPoint();\n</code></pre>\n"},{"tags":["java","java-8","concurrentlinkedqueue"],"comments":[{"owner":{"user_id":637853,"display_name":"Thomas"},"edited":false,"comment_id":134045740,"body":"Well, <code>queue.add(new Object());</code> will add an object that your code would never remove so <code>queue.remove(object);</code> would always have to look for the the object you just added. When you remove that line then <code>object</code> will be at the head of a 1-element queue which makes it way easier to remove."},{"owner":{"user_id":637853,"display_name":"Thomas"},"edited":false,"comment_id":134045764,"body":"Btw, note that times taken like you did are not directly comparable as there may be many factors influencing the JVM. For such micro benchmarks you should use JMH."},{"owner":{"user_id":637853,"display_name":"Thomas"},"edited":false,"comment_id":134045824,"body":"On the term &quot;memory leak&quot;: I&#39;d not consider this a real memory leak but in general <code>remove(Object o)</code> will use <code>equals()</code> to find the object to be removed - and the basic implementation of <code>Object.equals(...)</code> will use instance identity. Thus, calling <code>add(new Object())</code> will add an instance whose identity you don&#39;t have (as you have no reference to it) so you can&#39;t directly use <code>remove()</code> to remove it - you&#39;d need to get the instance from the queue first."},{"owner":{"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"edited":false,"comment_id":134045933,"body":"IMHO not really a memory leak: there is exactly one element that is added to the queue and stays there. And you could retrieve (and remove) that element anytime you want by calling <code>queue.poll()</code>"},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134046861,"body":"What book was it?"},{"owner":{"user_id":1542523,"display_name":"flower"},"edited":false,"comment_id":134047278,"body":"@MacGyver，ISBN: 9787111657705"},{"owner":{"user_id":640205,"display_name":"Entree"},"edited":false,"comment_id":134054061,"body":"Not necessarily.  Depending on how concurrency is implemented, dealing with memory on a CPU is often a concern, and that is the focus of improving performance.  Look up the term &quot;context switching&quot;.  That is how multiple processes can share a single CPU."}],"answers":[{"owner":{"user_id":4539838,"display_name":"Amit kumar"},"up_vote_count":0,"is_accepted":false,"creation_date":1681530381,"answer_id":76020248,"body":"<p>Yes. This will cause memory leak issue.</p>\n<p><strong>Explanation</strong> :</p>\n<ol>\n<li><code>queue.add(new Object())</code> adds a new object to the <code>ConcurrentLinkedQueue</code>, which means queue will hold the reference to that object until it is removed.</li>\n<li>But in the code snippet same object is getting added and removed\nrepeatedly, via queue.remove(object) in the while loop.</li>\n</ol>\n<p>This might cause the <code>ConcurrentLinkedQueue</code> to keep the reference to the object indefinitely, even when the object is no longer needed, causing memory leak.</p>\n<blockquote>\n<p>To fix the memory leak issue, remove the line <code>queue.add(new Object())</code> and only add the object instance to the queue, which is\nbeing used in the while loop.</p>\n</blockquote>\n<p><strong>Note</strong> : Make sure that the object is removed from the queue after it is no longer needed.</p>\n"},{"owner":{"user_id":139985,"display_name":"Stephen C"},"up_vote_count":2,"is_accepted":false,"creation_date":1681536542,"answer_id":76020516,"body":"<p>The problem presented in that the book is actually caused by an OpenJDK Bug:  <a href=\"https://bugs.openjdk.org/browse/JDK-8054446\" rel=\"nofollow noreferrer\">https://bugs.openjdk.org/browse/JDK-8054446</a>.</p>\n<p>Kudos to @MacGyver for finding this!!</p>\n<p>According to the analysis on the bug report:</p>\n<blockquote>\n<p>&quot;Reporter is correct - <code>remove(Object)</code> will never unlink dead Nodes <em>if only ever the element at the tail is removed<sup>1</sup>.</em>&quot;</p>\n</blockquote>\n<p>(Emphasis added)</p>\n<p>The bug report shows that the issue was initially raised against Java 8 in 2014, and was fixed in Java 9 in 2019.  The fix was subsequently backported to Java 8 and Java 7.</p>\n<p>Note that Java 7 is EOL.  To get a Java 7 release with the fix, I think you will either need an Oracle support contract, or you will need to use a 3rd-party Java 7 release.</p>\n<hr />\n<p>So to you answer your question:</p>\n<blockquote>\n<p>Will the use of <code>ConcurrentLinkedQueue</code> cause memory leak?</p>\n</blockquote>\n<p>If you are using an out-of-date version of Java AND you are repeatedly removing the last element of the queue, then Yes.  Otherwise No.</p>\n<p>Solution: use an up-to-date version of Java 7, 8 or later.</p>\n<p>I should also point out that using <code>remove(E)</code> on a <code>Queue</code> / <code>Deque</code> is kind of a bad idea anyway.  It is an <code>O(N)</code> operation compared with <code>O(1)</code> for <code>add(E)</code>, <code>offer(E)</code>, <code>remove()</code>, <code>poll()</code>, <code>element()</code> and <code>peek()</code> (and the equivalent <code>Deque</code> operations).</p>\n<hr />\n<p><sup>1 - I didn't look at the original source code to see if the leak could occur in other circumstances, but I am prepared to take the official analysis at face value.</sup></p>\n"}],"owner":{"user_id":1542523,"display_name":"flower"},"view_count":130,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1681368578,"question_id":76002435,"body":"<p>I read from a book that the following code will cause memory leak,and the book tells that we should remove the code <code>queue.add(new Object());</code> and it will not cause memory leak. but I don't know why. Why?</p>\n<pre><code>import com.google.common.base.Stopwatch;\nimport java.util.concurrent.ConcurrentLinkedQueue;\nimport java.util.concurrent.TimeUnit;\n\npublic class ConcurrentLinkedQueueMemLeak\n {\npublic static void main(String[] args) throws InterruptedException\n{\n    ConcurrentLinkedQueue&lt;Object&gt; queue =\n                    new ConcurrentLinkedQueue&lt;&gt;();\n    queue.add(new Object()); // ① 这一行代码会导致内存泄漏\n    Object object = new Object();\n\n    int loops = 0;\n\n    // 休眠10秒，方便打开JDK诊断工具，监控执行前后的内存变化\n    TimeUnit.SECONDS.sleep(10);\n\n    Stopwatch watch = Stopwatch.createStarted();\n    while (true)\n    {\n        // 每执行10000次进行一次耗时统计，并且输出\n        if (loops % 10000 == 0 &amp;&amp; loops != 0)\n        {\n            long elapsedMs = watch.stop()\n                .elapsed(TimeUnit.MILLISECONDS);\n            System.out.printf(&quot;loops=%d duration=%d MS%n&quot;, loops, elapsedMs);\n            watch.reset().start();\n        }\n        queue.add(object);\n        // ② remove方法删除object\n        queue.remove(object);\n        ++loops;\n    }\n}\n}\n</code></pre>\n<p>before remove the code queue.add(new Object()):</p>\n<pre><code>loops=10000 duration=588 MS\nloops=20000 duration=1881 MS\nloops=30000 duration=3175 MS\nloops=40000 duration=3452 MS\nloops=50000 duration=3784 MS\nloops=60000 duration=4424 MS\nloops=70000 duration=4761 MS\nloops=80000 duration=5733 MS\n</code></pre>\n<p>after remove the code queue.add(new Object()):</p>\n<pre><code>loops=363590000 duration=0 MS\nloops=363600000 duration=0 MS\nloops=363610000 duration=0 MS\nloops=363620000 duration=0 MS\nloops=363630000 duration=1 MS\n</code></pre>\n"},{"tags":["java","spring","spring-boot","spring-batch"],"answers":[{"owner":{"user_id":2230325,"display_name":"rMonteiro"},"up_vote_count":1,"is_accepted":false,"creation_date":1681363502,"answer_id":76001912,"body":"<ol>\n<li>Start with <code>fileCollectTasklet()</code>.</li>\n<li>If <code>fileCollectTasklet()</code> fails (<code>on(&quot;FAILED&quot;)</code>), run <code>writerTasklet()</code> and fail the job regardless of the outcome of <code>writerTasklet()</code> (<code>.on(&quot;*&quot;).fail()</code>).</li>\n<li>If <code>fileCollectTasklet()</code> finishes with any other status, run <code>writerTasklet()</code> and complete the job regardless of the outcome of <code>writerTasklet()</code> (<code>.on(&quot;*&quot;).end()</code>).</li>\n</ol>\n<pre><code>public Job testJob() {\n    return jobBuilderFactory.get(&quot;test_job&quot;)\n            .incrementer(new RunIdIncrementer())\n            .preventRestart()\n            .start(fileCollectTasklet())\n                .on(&quot;FAILED&quot;)\n                .to(writerTasklet()).on(&quot;*&quot;).fail()\n            .from(fileCollectTasklet())\n                .on(&quot;*&quot;)\n                .to(writerTasklet())\n                .on(&quot;*&quot;)\n                .end()\n            .end();\n}\n</code></pre>\n"}],"owner":{"user_id":21631286,"display_name":"주행가 종시기"},"view_count":39,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681363209,"question_id":76001878,"body":"<p>Hi i'm using spring batch to make some batch product but my logic doesn't work.\nI want to know why!\nPlease give some answer</p>\n<p>My logic is like this</p>\n<pre class=\"lang-java prettyprint-override\"><code>public test_job(){\n   return jobBuilderFactory.get(&quot;test_job&quot;).incrementer(new RunIdIncrementer()).preventRestart()\n          .start(fileCollectTasklet())\n             .on(&quot;FAILED&quot;)\n             .to(writerTasklet())\n             .on(&quot;*&quot;)\n             .fail()\n          .from(fileCollectTasklet())\n             .on(&quot;FAILED&quot;)\n             .to(writerTasklet())\n             .on(&quot;*&quot;)\n             .end()\n          .end()\n}\n</code></pre>\n<p>I want to make if fileCollectTasklet() finished with FAILED, then run writerTasklet and make end job with fail status doesn't matter how writerTasklet end.\nAnd if fileCollectTasklet() finished with COMPLETE, then run writerTasklet and make end job with SUCESS status doesn't matter how writerTasklet end.</p>\n<p>Could you guys help me????</p>\n"},{"tags":["java","regex","xml","xsd","xerces"],"answers":[{"owner":{"user_id":2834978,"display_name":"LMC"},"up_vote_count":1,"is_accepted":true,"creation_date":1681252785,"answer_id":75990588,"body":"<p>Regexp matching looks like a <a href=\"https://www.w3.org/TR/xmlschema-2/#nt-regExp\" rel=\"nofollow noreferrer\">limited implementation</a> for xsd.<br />\nRemoving some unneeded grouping and refactoring regex parts to avoid repeating <code>(jpg|png)</code> pattern.</p>\n<pre><code>(@\\{.*|[A-Z]:/.*)\\.(png|jpg)\\}?\n</code></pre>\n<p>Match</p>\n<pre><code>@{../test-image.png}\nZ:/test/image.jpg\n</code></pre>\n<p>A more verbose but simplified pattern closer to <a href=\"https://www.w3.org/TR/xmlschema-2/#nt-regExp\" rel=\"nofollow noreferrer\">w3.org regexp definition</a>.</p>\n<pre><code>@\\{.*\\.(png|jpg)\\}|[A-Z]:/.*\\.(png|jpg)\n</code></pre>\n<p>Testing on command line (<a href=\"https://github.com/GNOME/libxml2\" rel=\"nofollow noreferrer\">libxml2</a> implementation)</p>\n<pre><code>xmllint --schema tmp.xsd --noout tmp.xml \ntmp.xml validates\n</code></pre>\n<p>Note: got error as described with original regex</p>\n<pre><code>tmp.xml:8: element frameui: Schemas validity error : Element '{http://www.squidxtv.me/schema/frameui/v1/frameui.xsd}frameui', attribute 'background-image': [facet 'pattern'] The value '@{../test-image.png}' is not accepted by the pattern '^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$'.\n</code></pre>\n"}],"owner":{"user_id":16367144,"display_name":"SquidXTV"},"view_count":67,"up_vote_count":2,"accepted_answer_id":75990588,"answer_count":1,"score":2,"creation_date":1681246675,"question_id":75990087,"body":"<p>I have an xsd schema file which uses a pattern which is basically RegEx but I have problems creating the correct RegEx.\nMy RegEx should accept these:</p>\n<ul>\n<li><code>@{...}</code> with <code>...</code> being anything which ends in <code>.png/.jpg</code></li>\n<li><code>C:/...</code> with <code>...</code> being anything which ends in <code>.png/.jpg</code> and <code>C</code> being any <strong>drive</strong> character so I think all upper case characters</li>\n<li><code>/...</code> with <code>...</code> being anything which ends in <code>.png/.jpg</code></li>\n</ul>\n<p>I got to this RegEx: <code>^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$</code> which works using the Java ReGex matcher and on <a href=\"https://regex101.com/\" rel=\"nofollow noreferrer\">regex101</a> but the xml parser throws an exception and says that it doesn't match.</p>\n<p>I also found out that the <a href=\"https://xerces.apache.org/xerces2-j/javadocs/xerces2/org/apache/xerces/impl/xpath/regex/RegularExpression.html\" rel=\"nofollow noreferrer\">xml regex matching engine</a> is using Non-deterministic finite automaton but I dont know what that means for my RegEx:</p>\n<blockquote>\n<p>A regular expression matching engine using Non-deterministic Finite Automaton (NFA). This engine does not conform to the POSIX regular expression.</p>\n</blockquote>\n<p>valid.xml</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;frameui xmlns=&quot;http://www.squidxtv.me/schema/frameui/v1/frameui.xsd&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://www.squidxtv.me/schema/frameui/v1 /frameui.xsd&quot;\n         id=&quot;valid-frame&quot;\n         width=&quot;5&quot;\n         height=&quot;3&quot;\n         background-image=&quot;@{../test-image.png}&quot;&gt;\n    &lt;div id=&quot;first-div&quot; width=&quot;500&quot; height=&quot;500&quot; x=&quot;100&quot; y=&quot;100&quot; border-color=&quot;#FFFFFF&quot; border-width=&quot;1&quot;&gt;\n        &lt;text id=&quot;first-test&quot; x=&quot;100&quot; y=&quot;100&quot; underline=&quot;true&quot; border-color=&quot;#FFFFFF&quot; border-width=&quot;1&quot;&gt;Test Text&lt;/text&gt;\n    &lt;/div&gt;\n&lt;/frameui&gt;\n</code></pre>\n<p>frameui.xsd</p>\n<pre><code>&lt;xs:schema xmlns:xs=&quot;http://www.w3.org/2001/XMLSchema&quot;\n           elementFormDefault=&quot;qualified&quot;\n           targetNamespace=&quot;http://www.squidxtv.me/schema/frameui/v1/frameui.xsd&quot;\n           xmlns=&quot;http://www.squidxtv.me/schema/frameui/v1/frameui.xsd&quot;\n           version=&quot;1.0&quot;&gt;\n    &lt;xs:element name=&quot;frameui&quot;&gt;\n        &lt;xs:complexType&gt;\n            &lt;xs:all&gt;\n                &lt;xs:element name=&quot;text&quot; type=&quot;TextType&quot; minOccurs=&quot;0&quot;/&gt;\n                &lt;xs:element name=&quot;image&quot; type=&quot;ImgType&quot; minOccurs=&quot;0&quot;/&gt;\n                &lt;xs:element name=&quot;div&quot; type=&quot;DivType&quot; minOccurs=&quot;0&quot;/&gt;\n            &lt;/xs:all&gt;\n            &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\n            &lt;xs:attribute name=&quot;width&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\n            &lt;xs:attribute name=&quot;height&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\n            &lt;xs:attribute name=&quot;background-color&quot; type=&quot;hexType&quot; default=&quot;#0D0D0D&quot;/&gt;\n            &lt;xs:attribute name=&quot;background-image&quot; type=&quot;pathType&quot;/&gt;\n            &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\n            &lt;xs:attribute name=&quot;click-radius&quot; type=&quot;xs:positiveInteger&quot; default=&quot;6&quot;/&gt;\n            &lt;xs:attribute name=&quot;scroll-radius&quot; type=&quot;xs:positiveInteger&quot; default=&quot;6&quot;/&gt;\n        &lt;/xs:complexType&gt;\n    &lt;/xs:element&gt;\n\n    &lt;xs:complexType name=&quot;TextType&quot;&gt;\n        &lt;xs:simpleContent&gt;\n            &lt;xs:extension base=&quot;xs:string&quot;&gt;\n                &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\n                &lt;xs:attributeGroup ref=&quot;position&quot;/&gt;\n                &lt;xs:attributeGroup ref=&quot;font&quot;/&gt;\n                &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\n            &lt;/xs:extension&gt;\n        &lt;/xs:simpleContent&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:complexType name=&quot;ImgType&quot;&gt;\n        &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\n        &lt;xs:attributeGroup ref=&quot;position&quot;/&gt;\n        &lt;xs:attribute name=&quot;path&quot; type=&quot;pathType&quot; use=&quot;required&quot;/&gt;\n        &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:complexType name=&quot;DivType&quot;&gt;\n        &lt;xs:all&gt;\n            &lt;xs:element name=&quot;text&quot; type=&quot;TextType&quot; minOccurs=&quot;0&quot;/&gt;\n            &lt;xs:element name=&quot;image&quot; type=&quot;ImgType&quot; minOccurs=&quot;0&quot;/&gt;\n            &lt;xs:element name=&quot;div&quot; type=&quot;DivType&quot; minOccurs=&quot;0&quot;/&gt;\n        &lt;/xs:all&gt;\n        &lt;xs:attribute name=&quot;id&quot; type=&quot;xs:string&quot; use=&quot;required&quot;/&gt;\n        &lt;xs:attributeGroup ref=&quot;position&quot;/&gt;\n        &lt;xs:attribute name=&quot;width&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\n        &lt;xs:attribute name=&quot;height&quot; type=&quot;xs:positiveInteger&quot; use=&quot;required&quot;/&gt;\n        &lt;xs:attributeGroup ref=&quot;border&quot;/&gt;\n    &lt;/xs:complexType&gt;\n\n    &lt;xs:attributeGroup name=&quot;font&quot;&gt;\n        &lt;xs:attribute name=&quot;font&quot; type=&quot;xs:string&quot; default=&quot;Sans Serif&quot;/&gt;\n        &lt;xs:attribute name=&quot;font-size&quot; type=&quot;xs:positiveInteger&quot; default=&quot;12&quot;/&gt;\n        &lt;xs:attribute name=&quot;font-color&quot; type=&quot;hexType&quot; default=&quot;#FFFFFF&quot;/&gt;\n        &lt;xs:attribute name=&quot;bold&quot; type=&quot;xs:boolean&quot; default=&quot;false&quot;/&gt;\n        &lt;xs:attribute name=&quot;italic&quot; type=&quot;xs:boolean&quot; default=&quot;false&quot;/&gt;\n        &lt;xs:attribute name=&quot;underline&quot; type=&quot;xs:boolean&quot; default=&quot;false&quot;/&gt;\n    &lt;/xs:attributeGroup&gt;\n\n    &lt;xs:attributeGroup name=&quot;border&quot;&gt;\n        &lt;xs:attribute name=&quot;border-color&quot; type=&quot;hexType&quot; default=&quot;#0D0D0D&quot;/&gt;\n        &lt;xs:attribute name=&quot;border-width&quot; type=&quot;xs:nonNegativeInteger&quot; default=&quot;0&quot;/&gt;\n    &lt;/xs:attributeGroup&gt;\n\n    &lt;xs:attributeGroup name=&quot;position&quot;&gt;\n        &lt;xs:attribute name=&quot;x&quot; type=&quot;xs:integer&quot; default=&quot;0&quot;/&gt;\n        &lt;xs:attribute name=&quot;y&quot; type=&quot;xs:integer&quot; default=&quot;0&quot;/&gt;\n    &lt;/xs:attributeGroup&gt;\n\n    &lt;xs:simpleType name=&quot;hexType&quot;&gt;\n        &lt;xs:restriction base=&quot;xs:string&quot;&gt;\n            &lt;xs:pattern value=&quot;#[0-9a-fA-F]{6}&quot;/&gt;\n        &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n\n    &lt;xs:simpleType name=&quot;pathType&quot;&gt;\n        &lt;xs:restriction base=&quot;xs:string&quot;&gt;\n            &lt;xs:pattern value=&quot;^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$&quot;/&gt;\n            &lt;xs:whiteSpace value=&quot;collapse&quot;/&gt;\n        &lt;/xs:restriction&gt;\n    &lt;/xs:simpleType&gt;\n\n&lt;/xs:schema&gt;\n\n</code></pre>\n<p>test</p>\n<pre><code>@Test\npublic void testValidXml() {\n        ScreenType model = assertDoesNotThrow(() -&gt; parser.parse(Path.of(getClass().getResource(&quot;/guis/valid.xml&quot;).toURI())));\n}\n</code></pre>\n<p>parser configuration:</p>\n<pre><code>package me.squidxtv.frameui.core.parser;\n\nimport me.squidxtv.frameui.core.content.*;\nimport org.bukkit.plugin.java.JavaPlugin;\nimport org.jetbrains.annotations.NotNull;\nimport org.w3c.dom.Document;\nimport org.w3c.dom.Element;\nimport org.w3c.dom.Node;\nimport org.w3c.dom.NodeList;\nimport org.xml.sax.SAXException;\n\nimport javax.xml.XMLConstants;\nimport javax.xml.parsers.DocumentBuilder;\nimport javax.xml.parsers.DocumentBuilderFactory;\nimport javax.xml.parsers.ParserConfigurationException;\nimport javax.xml.validation.Schema;\nimport javax.xml.validation.SchemaFactory;\nimport java.io.IOException;\nimport java.nio.file.Path;\nimport java.nio.file.Paths;\nimport java.util.Arrays;\nimport java.util.Objects;\nimport java.util.function.Predicate;\nimport java.util.regex.Pattern;\n\n/**\n * The ScreenParser class provides methods for parsing an XML file into a ScreenType object\n * and retrieving information about the child nodes of a given Node.\n */\npublic class ScreenParser {\n\n    /**\n     * The regular expression pattern for matching Windows-style paths.\n     */\n    private static final @NotNull Predicate&lt;String&gt; WINDOWS_PATH = Pattern.compile(&quot;^[A-Z]:\\\\\\\\.+$&quot;).asMatchPredicate();\n    /**\n     * The regular expression pattern for matching Unix-style paths.\n     */\n    private static final @NotNull Predicate&lt;String&gt; UNIX_PATH = Pattern.compile(&quot;^/.+$&quot;).asMatchPredicate();\n    /**\n     * The regular expression pattern for matching relative paths.\n     */\n    private static final @NotNull Predicate&lt;String&gt; RELATIVE_PATH = Pattern.compile(&quot;^@\\\\{.+}$&quot;).asMatchPredicate();\n\n    /**\n     * The {@link DocumentBuilder} used for parsing XML files.\n     */\n    private final @NotNull DocumentBuilder documentBuilder;\n\n    /**\n     * Constructs a new instance of {@link ScreenParser} class.\n     * @param plugin\n     * @throws SAXException if there is an error in the XML schema.\n     * @throws ParserConfigurationException if there is a configuration error in the {@link DocumentBuilder}.\n     */\n    public ScreenParser(JavaPlugin plugin) throws SAXException, ParserConfigurationException {\n        SchemaFactory schemaFactory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n        Schema schema = schemaFactory.newSchema(getClass().getResource(&quot;/frameui.xsd&quot;));\n\n        DocumentBuilderFactory documentBuilderFactory = DocumentBuilderFactory.newInstance();\n        documentBuilderFactory.setSchema(schema);\n        documentBuilderFactory.setNamespaceAware(true);\n        documentBuilder = documentBuilderFactory.newDocumentBuilder();\n\n        ParserErrorHandler errorHandler = new ParserErrorHandler(plugin);\n        documentBuilder.setErrorHandler(errorHandler);\n    }\n\n    /**\n     * Parses an XML file and returns a ScreenType object representing the root element of the document.\n     * @param xmlFile the Path to the XML file to be parsed\n     * @return a ScreenType object representing the root element of the parsed document\n     * @throws IOException if an I/O error occurs while reading the file\n     * @throws SAXException if an error occurs during parsing\n     */\n    public ScreenType parse(Path xmlFile) throws IOException, SAXException {\n        Document xml = documentBuilder.parse(xmlFile.toFile());\n        Element root = xml.getDocumentElement();\n        return ScreenType.of(root, xmlFile);\n    }\n\n    /**\n     * Returns the {@link DocumentBuilder} used by this {@link ScreenParser} instance.\n     * @return the {@link DocumentBuilder} used by this {@link ScreenParser} instance\n     */\n    public DocumentBuilder getDocumentBuilder() {\n        return documentBuilder;\n    }\n\n    /**\n     * Returns an array of ComplexType objects representing the child nodes of the specified root Node.\n     *\n     * @param root the root Node whose children to retrieve\n     * @param path the path to the XML file containing the root Node\n     * @return an array of ComplexType objects representing the child nodes of the root Node\n     */\n    public static ComplexType[] getChildren(Node root, Path path) {\n        NodeList nodes = root.getChildNodes();\n        if (nodes.getLength() == 0) {\n            return new ComplexType[0];\n        }\n\n        ComplexType[] sub = new ComplexType[nodes.getLength()];\n        for (int i = 0; i &lt; nodes.getLength(); i++) {\n            Node current = nodes.item(i);\n            String name = current.getNodeName();\n            if (name.equals(&quot;#text&quot;)) {\n                continue;\n            }\n\n            switch (name) {\n                case &quot;text&quot; -&gt; sub[i] = TextType.of((Element) current);\n                case &quot;image&quot; -&gt; sub[i] = ImageType.of((Element) current, path);\n                case &quot;div&quot; -&gt; sub[i] = DivType.of((Element) current, path);\n            }\n        }\n        return Arrays.stream(sub).filter(Objects::nonNull).toArray(ComplexType[]::new);\n    }\n\n    /**\n     * Converts the given path string to a {@link Path} object.\n     *\n     * @param original the path string to convert\n     * @param xml the path to the XML file used as the base for relative paths\n     * @return the {@link Path} object corresponding to the input path string\n     * @throws IllegalArgumentException if the input path string is not in a recognized format\n     */\n    public static Path convert(String original, Path xml) {\n        if (RELATIVE_PATH.test(original)) {\n            return xml.resolve(original.substring(2, original.length() - 1));\n        }\n\n        if (WINDOWS_PATH.test(original) || UNIX_PATH.test(original)) {\n            return Paths.get(original);\n        }\n\n        throw new IllegalArgumentException(&quot;Invalid path format: &quot; + original);\n    }\n\n}\n\n</code></pre>\n<p>exception:</p>\n<pre><code>OpenJDK 64-Bit Server VM warning: Sharing is only supported for boot loader classes because bootstrap classpath has been appended\n\norg.opentest4j.AssertionFailedError: Unexpected exception thrown: org.xml.sax.SAXException: org.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value '@{../test-image.png}' is not facet-valid with respect to pattern '^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$' for type 'pathType'.\n\n    at org.junit.jupiter.api.AssertionFailureBuilder.build(AssertionFailureBuilder.java:152)\n    at org.junit.jupiter.api.AssertDoesNotThrow.createAssertionFailedError(AssertDoesNotThrow.java:84)\n    at org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:75)\n    at org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:58)\n    at org.junit.jupiter.api.Assertions.assertDoesNotThrow(Assertions.java:3196)\n    at me.squidxtv.frameui.core.parser.ScreenParserTest.testValidXml(ScreenParserTest.java:53)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.junit.platform.commons.util.ReflectionUtils.invokeMethod(ReflectionUtils.java:727)\n    at org.junit.jupiter.engine.execution.MethodInvocation.proceed(MethodInvocation.java:60)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$ValidatingInvocation.proceed(InvocationInterceptorChain.java:131)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.intercept(TimeoutExtension.java:156)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestableMethod(TimeoutExtension.java:147)\n    at org.junit.jupiter.engine.extension.TimeoutExtension.interceptTestMethod(TimeoutExtension.java:86)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker$ReflectiveInterceptorCall.lambda$ofVoidMethod$0(InterceptingExecutableInvoker.java:103)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.lambda$invoke$0(InterceptingExecutableInvoker.java:93)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain$InterceptedInvocation.proceed(InvocationInterceptorChain.java:106)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.proceed(InvocationInterceptorChain.java:64)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.chainAndInvoke(InvocationInterceptorChain.java:45)\n    at org.junit.jupiter.engine.execution.InvocationInterceptorChain.invoke(InvocationInterceptorChain.java:37)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:92)\n    at org.junit.jupiter.engine.execution.InterceptingExecutableInvoker.invoke(InterceptingExecutableInvoker.java:86)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.lambda$invokeTestMethod$7(TestMethodTestDescriptor.java:217)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.invokeTestMethod(TestMethodTestDescriptor.java:213)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:138)\n    at org.junit.jupiter.engine.descriptor.TestMethodTestDescriptor.execute(TestMethodTestDescriptor.java:68)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:151)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.invokeAll(SameThreadHierarchicalTestExecutorService.java:41)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$6(NodeTestTask.java:155)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$8(NodeTestTask.java:141)\n    at org.junit.platform.engine.support.hierarchical.Node.around(Node.java:137)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.lambda$executeRecursively$9(NodeTestTask.java:139)\n    at org.junit.platform.engine.support.hierarchical.ThrowableCollector.execute(ThrowableCollector.java:73)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.executeRecursively(NodeTestTask.java:138)\n    at org.junit.platform.engine.support.hierarchical.NodeTestTask.execute(NodeTestTask.java:95)\n    at org.junit.platform.engine.support.hierarchical.SameThreadHierarchicalTestExecutorService.submit(SameThreadHierarchicalTestExecutorService.java:35)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestExecutor.execute(HierarchicalTestExecutor.java:57)\n    at org.junit.platform.engine.support.hierarchical.HierarchicalTestEngine.execute(HierarchicalTestEngine.java:54)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:147)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:127)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:90)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.lambda$execute$0(EngineExecutionOrchestrator.java:55)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.withInterceptedStreams(EngineExecutionOrchestrator.java:102)\n    at org.junit.platform.launcher.core.EngineExecutionOrchestrator.execute(EngineExecutionOrchestrator.java:54)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:114)\n    at org.junit.platform.launcher.core.DefaultLauncher.execute(DefaultLauncher.java:86)\n    at org.junit.platform.launcher.core.DefaultLauncherSession$DelegatingLauncher.execute(DefaultLauncherSession.java:86)\n    at org.junit.platform.launcher.core.SessionPerRequestLauncher.execute(SessionPerRequestLauncher.java:53)\n    at com.intellij.junit5.JUnit5IdeaTestRunner.startRunnerWithArgs(JUnit5IdeaTestRunner.java:57)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater$1.execute(IdeaTestRunner.java:38)\n    at com.intellij.rt.execution.junit.TestsRepeater.repeat(TestsRepeater.java:11)\n    at com.intellij.rt.junit.IdeaTestRunner$Repeater.startRunnerWithArgs(IdeaTestRunner.java:35)\n    at com.intellij.rt.junit.JUnitStarter.prepareStreamsAndStart(JUnitStarter.java:232)\n    at com.intellij.rt.junit.JUnitStarter.main(JUnitStarter.java:55)\nCaused by: org.xml.sax.SAXException: org.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value '@{../test-image.png}' is not facet-valid with respect to pattern '^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$' for type 'pathType'.\norg.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value '@{../test-image.png}' is not facet-valid with respect to pattern '^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$' for type 'pathType'.\n    at me.squidxtv.frameui.core.parser.ParserErrorHandler.error(ParserErrorHandler.java:40)\n    at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:138)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:396)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:327)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLErrorReporter.reportError(XMLErrorReporter.java:284)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator$XSIErrorReporter.reportError(XMLSchemaValidator.java:512)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.reportSchemaError(XMLSchemaValidator.java:3600)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processOneAttribute(XMLSchemaValidator.java:3108)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.processAttributes(XMLSchemaValidator.java:3052)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.handleStartElement(XMLSchemaValidator.java:2287)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.xs.XMLSchemaValidator.startElement(XMLSchemaValidator.java:830)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.scanStartElement(XMLNSDocumentScannerImpl.java:374)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl$NSContentDriver.scanRootElementHook(XMLNSDocumentScannerImpl.java:613)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl$FragmentContentDriver.next(XMLDocumentFragmentScannerImpl.java:3079)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl$PrologDriver.next(XMLDocumentScannerImpl.java:836)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentScannerImpl.next(XMLDocumentScannerImpl.java:605)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLNSDocumentScannerImpl.next(XMLNSDocumentScannerImpl.java:112)\n    at java.xml/com.sun.org.apache.xerces.internal.impl.XMLDocumentFragmentScannerImpl.scanDocument(XMLDocumentFragmentScannerImpl.java:542)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:889)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.XML11Configuration.parse(XML11Configuration.java:825)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.XMLParser.parse(XMLParser.java:141)\n    at java.xml/com.sun.org.apache.xerces.internal.parsers.DOMParser.parse(DOMParser.java:247)\n    at java.xml/com.sun.org.apache.xerces.internal.jaxp.DocumentBuilderImpl.parse(DocumentBuilderImpl.java:342)\n    at java.xml/javax.xml.parsers.DocumentBuilder.parse(DocumentBuilder.java:206)\n    at me.squidxtv.frameui.core.parser.ScreenParser.parse(ScreenParser.java:77)\n    at me.squidxtv.frameui.core.parser.ScreenParserTest.lambda$testValidXml$1(ScreenParserTest.java:53)\n    at org.junit.jupiter.api.AssertDoesNotThrow.assertDoesNotThrow(AssertDoesNotThrow.java:71)\n    ... 73 more\nCaused by: org.xml.sax.SAXParseException; systemId: file:/D:/intellij-workspace/FrameUI/target/test-classes/guis/valid.xml; lineNumber: 8; columnNumber: 50; cvc-pattern-valid: Value '@{../test-image.png}' is not facet-valid with respect to pattern '^(@\\{.*\\.(png|jpg)\\}|([A-Z]:)?/.*\\.(png|jpg))$' for type 'pathType'.\n    at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.createSAXParseException(ErrorHandlerWrapper.java:204)\n    at java.xml/com.sun.org.apache.xerces.internal.util.ErrorHandlerWrapper.error(ErrorHandlerWrapper.java:135)\n    ... 98 more\n\n\nProcess finished with exit code -1\n\n</code></pre>\n"},{"tags":["java","spring"],"answers":[{"owner":{"user_id":18079889,"display_name":"Mohammed Fataka"},"up_vote_count":1,"is_accepted":false,"creation_date":1681268962,"answer_id":75991591,"body":"<p>I'm assuming you want to invoke <code>onApplicationEvent()</code> upon startup of the application, if so the correct annotation is <code>@EventListener(ApplicationReadyEvent.class) </code>\nAlthough it is not very clear to me where this method is located, another option is to use <code>@PostConstruct</code> if your class is a service or component that can start listening to Kafka after the constructor of your class.</p>\n<p>Again, it depends on your implementation. I hope this helps.</p>\n"}],"owner":{"user_id":18698545,"display_name":"Akhila K"},"view_count":17,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1681232071,"question_id":75988380,"body":"<p>I'm on Spring 3 and using a basic Kafka subscribe and poll mechanism to consume and process messages like the code snippet given below\nFrom our consumer dashboards I can see the app isnt subscribing to the topic, looks like the method is not at all invoked, no errors too. How do I resolve this issue??</p>\n<pre><code> @Async\n @Override\n public void onApplicationEvent(ContextRefreshedEvent applicationContextEvent) {\n       log.info(&quot;Subscribing to topic={}&quot;, topic);\n       consumer.subscribe(Collections.singletonList(topic));\n       while (true) {\n          try {\n             ConsumerRecords&lt;String, Order&gt; records = consumer.poll(Duration.ofMillis(1000));\n             messageProcessor.processMessages(records);\n             consumer.commitAsync();\n          } catch (Exception e) {\n             log.error(&quot;Exception when consuming the  messages from kafka &quot;, e);\n          }\n       }\n    }\n</code></pre>\n"},{"tags":["java","elasticsearch","gradle","spring-data-elasticsearch"],"answers":[{"owner":{"user_id":4393565,"display_name":"P.J.Meisch"},"up_vote_count":1,"is_accepted":true,"creation_date":1681215795,"answer_id":75985871,"body":"<p><code>org.elasticsearch.search.aggregations.AbstractAggregationBuilder</code> was coming from the old Elasticsearch client libraries in version 7.17 and used with the <code>NativeQueryBuilder</code> and the Elasticsearch <code>RestHighLevelClient</code>.</p>\n<p>For the new Elasticsearch client used in Spring Data Elasticsearch version 5.0 you will need to use the client classes from the elasticsearch-java client library like <code>co.elastic.clients.elasticsearch._types.aggregations.Aggregation</code>.</p>\n"}],"owner":{"user_id":352290,"display_name":"user352290"},"view_count":24,"up_vote_count":2,"accepted_answer_id":75985871,"answer_count":1,"score":2,"creation_date":1681214477,"question_id":75985676,"body":"<p>I get this error while compiling a Spring Boot application on 19.0.2 using spring-data-elasticsearch with the recent dependencies.</p>\n<p>org.elasticsearch.search.aggregations.AbstractAggregationBuilder not found during compilation</p>\n<pre><code>./gradlew --version\n\n------------------------------------------------------------\nGradle 8.0.2\n------------------------------------------------------------\n\nBuild time:   2023-03-03 16:41:37 UTC\nRevision:     7d6581558e226a580d91d399f7dfb9e3095c2b1d\n\nKotlin:       1.8.10\nGroovy:       3.0.13\nAnt:          Apache Ant(TM) version 1.10.11 compiled on July 10 2021\nJVM:          19.0.2 (Private Build 19.0.2+7-Ubuntu-0ubuntu322.04)\nOS:           Linux 5.19.0-38-generic amd64\n\njava --version\nopenjdk 19.0.2 2023-01-17\nOpenJDK Runtime Environment (build 19.0.2+7-Ubuntu-0ubuntu322.04)\nOpenJDK 64-Bit Server VM (build 19.0.2+7-Ubuntu-0ubuntu322.04, mixed mode, sharing)\n\n&gt; Task :compileJava FAILED\nAn exception has occurred in the compiler (19.0.2). Please file a bug against the Java compiler via the Java bug reporting page (http://bugreport.java.com) after checking the Bug Database (http://bugs.java.com) for duplicates. Include your program, the following diagnostic, and the parameters passed to the Java compiler in your report. Thank you.\ncom.sun.tools.javac.code.Symbol$CompletionFailure: class file for org.elasticsearch.search.aggregations.AbstractAggregationBuilder not found\n</code></pre>\n"},{"tags":["java","spring-boot","java-8"],"comments":[{"owner":{"user_id":6650475,"display_name":"Andrew S"},"edited":false,"comment_id":134003944,"body":"Some context is missing, but possibly use of strategy pattern or maybe the decorator pattern."},{"owner":{"user_id":2840178,"display_name":"kar"},"edited":false,"comment_id":134004108,"body":"@AndrewS Strategy is more of a selection of 1 functionality from 2 or more functionalities whereas I am looking to add on multiple functionalities. Guess decorator might fit."}],"answers":[{"owner":{"user_id":202009,"display_name":"Andy Thomas"},"up_vote_count":1,"is_accepted":true,"creation_date":1681136717,"answer_id":75977952,"body":"<p>If you just want to replace fields referencing a String, you could pass in a <code>Function&lt;String,String&gt;</code>.</p>\n<pre><code>public void parse(Object obj, \n   java.util.function.Function&lt;String,String&gt; replaceFn ) \nthrows IllegalAccessException { ... }\n</code></pre>\n<p>If you want to be more general, you could pass in something that accepts an object and a field, and does something with it. Defining that as a specific interface makes it easier to find all implementations.</p>\n<pre><code>@FunctionalInterface\npublic interface IFieldReplacer {\n    public void accept(Object o, Field f) throws IllegalAccessException;\n}\n\npublic class MyFieldReplacerA implements IFieldReplacer {\n\n    @Override\n    public void accept(Object o, Field f) \n    throws IllegalAccessException {\n\n        // TODO Get the value, transmogrify it, and set it.\n\n    }\n}\n\npublic void parse(Object obj, IFieldReplacer fieldReplacer ) {\n  ...\n}\n</code></pre>\n<p>Both of these allow the caller to pass in a lambda expression.</p>\n"}],"owner":{"user_id":2840178,"display_name":"kar"},"view_count":45,"up_vote_count":2,"accepted_answer_id":75977952,"answer_count":1,"score":2,"creation_date":1681134985,"question_id":75977751,"body":"<p>I have the following logic which works fine where I am iterating an object and replacing string values if applicable.</p>\n<p>But I am trying to make this more generic: I want the <code>replace</code> logic to come externally.</p>\n<p>It is because I want the flexibility to be able to add on more manipulation functionality as needed.</p>\n<p>I don't want to keep coming into this class and modify it each time. Instead looking to make it configurable.</p>\n<p>Is there any approach I could take to achieve this?</p>\n<p>For example I may want another logic where if the value is a string, I want to append &quot;hello&quot; to the string.</p>\n<p>I <em>don't</em> want to do this:</p>\n<pre><code>private String addHello(String value) {\n    return value + &quot;hello&quot;;\n}\n\n// then in the parse method. \nif (fieldValue instanceof String) {\n    field.set(obj, switchName((String) fieldValue));\n    field.set(obj, addHello((String) fieldValue)); // new hello logic inserted\n}\n</code></pre>\n<p>This would mean I am amending the class every time. Not exactly following <a href=\"https://en.wikipedia.org/wiki/SOLID\" rel=\"nofollow noreferrer\">SOLID</a> principle.</p>\n<p>It should be closed for modifications.</p>\n<p>I am looking for advice on how I could turn this into being configurable so that I can stop touching the following implementation, but still be able to add on further logic to it.</p>\n<pre><code>import org.apache.commons.lang.reflect.FieldUtils;\nimport org.springframework.stereotype.Component;\n\nimport java.lang.reflect.Field;\nimport java.lang.reflect.Modifier;\nimport java.util.List;\nimport java.util.Map;\n\n@Component\npublic class Helper {\n\n    @SuppressWarnings(&quot;unchecked&quot;)\n    public void parse(Object obj) throws IllegalAccessException {\n        if (obj == null) {\n            return;\n        }\n\n        for (Field field : obj.getClass().getDeclaredFields()) {\n            field.setAccessible(true);\n            int modifiers = field.getModifiers();\n            Object fieldValue = FieldUtils.readField(obj, field.getName(), true);\n            if (fieldValue instanceof String) {\n                field.set(obj, switchName((String) fieldValue));\n            }\n            else {\n                parse(fieldValue);\n            }\n        }\n    }\n\n    private String switchName(String value) {\n        return value.replace(&quot;apple&quot;, &quot;orange&quot;);\n    }\n}\n</code></pre>\n"},{"tags":["java","http","filter","interceptor","micronaut"],"comments":[{"owner":{"user_id":22656,"display_name":"Jon Skeet"},"edited":false,"comment_id":133986798,"body":"Think of it as going through a pipeline - the request goes in one direction, then the response goes in the opposite direction, which means the bits of the pipeline (filters in this case) are encountered in the reverse order. I think every HTTP framework I&#39;ve seen with interception behaves the same way... it just makes it easier to reason about."},{"owner":{"user_id":21597685,"display_name":"Mateusz"},"edited":false,"comment_id":133987373,"body":"So what you are saying is basically that every Publishers.then method will produce some callback and place in in this &quot;pipeline&quot; to wait for the  MutableHttpResponse, but every new callback will be placed at the beginning of this pipeline, thus if FirstFilter creted Publisher first, it will be last one to be invoked? Did I understand it correctly?"},{"owner":{"user_id":22656,"display_name":"Jon Skeet"},"edited":false,"comment_id":133989826,"body":"I can&#39;t talk to Micronaut specifically - but I&#39;m just saying that the order of processing tends to be &quot;request, filter1, filter2, filter3, application (creates response)&quot; -&gt; &quot;filter3, filter2, filter1, send response&quot;."}],"answers":[{"owner":{"user_id":960875,"display_name":"saw303"},"up_vote_count":1,"is_accepted":true,"creation_date":1680984220,"answer_id":75967434,"body":"<p>As mentioned by <a href=\"https://stackoverflow.com/users/22656/jon-skeet\">Jon Skeet</a>, this is a filter chain. In this chain you have all your filters in the given order. After the chain reaches the end the actual controller is called. And the the same filter chain is processed in the reverse order.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Override\npublic Publisher&lt;MutableHttpResponse&lt;?&gt;&gt; doFilter(HttpRequest&lt;?&gt; request, ServerFilterChain chain) {\n        // This happens before the controller gets invoked\n        System.out.println(&quot;Returning publisher in SecondFilter!&quot;);\n        return Publishers.then(\n                chain.proceed(request),\n                mutableHttpResponse -&gt; {\n                    // this happens after the controller has been invokes. That's why you have the http response available.\n                    System.out.println(&quot;Mapping response in second filter!&quot;);\n                    mutableHttpResponse.getBody(ServiceHttpResponse.class)\n                            .ifPresent(resp -&gt; mutableHttpResponse.body(resp.format()));\n        });\n}\n</code></pre>\n<p>The following image illustrates the pattern. It's not 1:1 what Micronaut does but it should give you an impression how things work.</p>\n<p><a href=\"https://i.stack.imgur.com/6zlci.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6zlci.jpg\" alt=\"enter image description here\" /></a></p>\n<p>Image source: <a href=\"https://www.informit.com/articles/article.aspx?p=1398619&amp;seqNum=3\" rel=\"nofollow noreferrer\">https://www.informit.com/articles/article.aspx?p=1398619&amp;seqNum=3</a></p>\n"}],"owner":{"user_id":21597685,"display_name":"Mateusz"},"view_count":39,"up_vote_count":2,"accepted_answer_id":75967434,"answer_count":1,"score":2,"creation_date":1680979181,"question_id":75967075,"body":"<p>I'm quite new to the reactive world, right now I'm trying to create two HttpServerFilters that will map the response in server written in micronaut. To present my issue I prepared simplified code snipped:</p>\n<pre><code>@Filter(&quot;/**&quot;)\npublic class FirstFilter implements HttpServerFilter {\n\n    @Override\n    public int getOrder(){\n        return ServerFilterPhase.FIRST.before();\n    }\n\n    @Override\n    public Publisher&lt;MutableHttpResponse&lt;?&gt;&gt; doFilter(HttpRequest&lt;?&gt; request, ServerFilterChain chain) {\n        System.out.println(&quot;Returning publisher in FirstFilter!&quot;);\n        return Publishers.then(\n                chain.proceed(request),\n                mutableHttpResponse -&gt; {\n                    System.out.println(&quot;Mapping response in first filter!&quot;);\n                    mutableHttpResponse.getBody(ServiceHttpResponse.class)\n                            .ifPresent(resp -&gt; mutableHttpResponse.status(resp.getStatus()));\n                });\n    }\n}\n</code></pre>\n<pre><code>@Filter(&quot;/**&quot;)\npublic class SecondFilter implements HttpServerFilter {\n\n    @Override\n    public int getOrder(){\n        return ServerFilterPhase.FIRST.after();\n    }\n\n    @Override\n    public Publisher&lt;MutableHttpResponse&lt;?&gt;&gt; doFilter(HttpRequest&lt;?&gt; request, ServerFilterChain chain) {\n        System.out.println(&quot;Returning publisher in SecondFilter!&quot;);\n        return Publishers.then(\n                chain.proceed(request),\n                mutableHttpResponse -&gt; {\n                    System.out.println(&quot;Mapping response in second filter!&quot;);\n                    mutableHttpResponse.getBody(ServiceHttpResponse.class)\n                            .ifPresent(resp -&gt; mutableHttpResponse.body(resp.format()));\n                });\n    }\n}\n</code></pre>\n<p>logs after executing a request are as follow:</p>\n<pre><code>Returning publisher in FirstFilter!\nReturning publisher in SecondFilter!\nMapping response in second filter!\nMapping response in first filter!\n</code></pre>\n<p>From logs i can see that doFilter methods are invoked in the right order, but the methods in reactive stream that maps the response are invoked in reversed.</p>\n<p>In my example I'm trying to first set response status using information from current response body (ServiceHttpResponse) and then seta new, formatted body but because these executes in reversed order, new body is set first and information about response status is lost.</p>\n<p>What is causing this behavior? I tested it using more that 2 filters and the order is always reversed, so it's not random.</p>\n"},{"tags":["java","android","firebase","firebase-realtime-database","firebase-authentication"],"comments":[{"owner":{"user_id":13139131,"display_name":"Roshan Kumar"},"edited":false,"comment_id":133968022,"body":"Did you get any error message?"},{"owner":{"user_id":209103,"display_name":"Frank van Puffelen"},"edited":false,"comment_id":133968251,"body":"There is <b>way</b> too much code here for us to effectively help with, and not enough information on what&#39;s going wrong. Somebody may of course happen to catch what&#39;s going wrong, but chances drastically go up if you increase the focus and information. Please read <a href=\"http://stackoverflow.com/help/mcve\">how to create a minimal, complete, verifiable example</a> and follow those instruction to update your question to be more concise and actionable."},{"owner":{"user_id":18691018,"display_name":"Myriam_2189"},"edited":false,"comment_id":133968700,"body":"@RoshanKumar No , just the app don&#39;t display anything and in logcat all attributes are null"},{"owner":{"user_id":7454336,"display_name":"Thomas Meinhart"},"edited":false,"comment_id":133968751,"body":"Have you tried to read the data only once with using <code>get()</code> ? <a href=\"https://firebase.google.com/docs/database/android/read-and-write#read_data_once\" rel=\"nofollow noreferrer\">firebase.google.com/docs/database/android/&hellip;</a>"}],"answers":[{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"up_vote_count":1,"is_accepted":false,"creation_date":1680849770,"answer_id":75956074,"body":"<blockquote>\n<p>No, just the app doesn't display anything and in logcat all attributes are null.</p>\n</blockquote>\n<p>This is happening because you're trying to read user data from a location that doesn't exist. When you create the following reference and attach a listener to it:</p>\n<pre><code>mDatabase = FirebaseDatabase.getInstance().getReference()                              \n                                          .child(&quot;Users&quot;)\n                                          .child(currentUser.getUid());\n//                                                              👍\n</code></pre>\n<p>It means that you want to read data under a node, that is the UID of the user that was provided in the authentication process. Such a UID contains 28 characters and looks like this:</p>\n<p><a href=\"https://i.stack.imgur.com/6tKjw.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/6tKjw.png\" alt=\"enter image description here\" /></a></p>\n<p>On the other hand, in your database, there are no such nodes:</p>\n<p><a href=\"https://i.stack.imgur.com/sLHJC.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/sLHJC.png\" alt=\"enter image description here\" /></a></p>\n<p>See? Those nodes are created using the <a href=\"https://firebase.google.com/docs/reference/android/com/google/firebase/database/DatabaseReference#push()\" rel=\"nofollow noreferrer\">DatabaseReference#push()</a> method. To solve this issue, when you create the user data in the database, remove the call to push(), because each time you call it, it generates a new random ID. And instead, use the UID of the user. In code, it will be as simple as:</p>\n<pre><code>mDatabase.setValue(userObj);    \n</code></pre>\n"}],"owner":{"user_id":18691018,"display_name":"Myriam_2189"},"view_count":73,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680826401,"question_id":75954609,"body":"<p>Good Morning,\nHope you all doing well,</p>\n<p>I want to retrieve data from Firebase Realtime Database and display it in profile user using Firebase Realtime Database and authentication database, and there's the code to understand.</p>\n<p>Thanks in advance</p>\n<p>Sign up:</p>\n<p><div class=\"snippet\" data-lang=\"js\" data-hide=\"false\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>mAuth.createUserWithEmailAndPassword(email, password)\n                    .addOnCompleteListener(this, new OnCompleteListener&lt;AuthResult&gt;() {\n                        @Override\n                        public void onComplete(@NonNull Task&lt;AuthResult&gt; task) {\n                            if (task.isSuccessful()) {\n                                FirebaseUser user = mAuth.getCurrentUser();\n                                Users users = new Users(name, email, password, phonenumber);\n\n                                databaseReference.setValue(users);//.push()\n                                \n                                startActivity(new Intent(SignUp.this, Home.class));\n                                finish();\n\n                            } else {\n                                Toast.makeText(SignUp.this, \"Register failed.\",\n                                        Toast.LENGTH_SHORT).show();\n                            }\n                        }\n                    });</code></pre>\r\n</div>\r\n</div>\r\n</p>\n<p>Profile xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:orientation=&quot;vertical&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:background=&quot;@color/white&quot;\n    android:layout_height=&quot;match_parent&quot;\n    tools:context=&quot;.Profile&quot;&gt;\n\n    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:padding=&quot;10dp&quot;&gt;\n        &lt;LinearLayout\n            android:id=&quot;@+id/linear&quot;\n            android:layout_width=&quot;50dp&quot;\n            android:layout_height=&quot;50dp&quot;\n            android:background=&quot;@drawable/buttonstyle2&quot;\n            android:elevation=&quot;5dp&quot;\n            android:layout_marginStart=&quot;10dp&quot;\n            android:layout_marginTop=&quot;20dp&quot;\n            android:padding=&quot;10dp&quot;\n            android:layout_marginBottom=&quot;10dp&quot;\n            android:gravity=&quot;center&quot;&gt;\n            &lt;ImageView\n                android:id=&quot;@+id/back&quot;\n                android:layout_width=&quot;wrap_content&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:src=&quot;@drawable/back&quot;/&gt;\n\n\n        &lt;/LinearLayout&gt;\n        &lt;TextView\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_toEndOf=&quot;@id/linear&quot;\n            android:layout_marginTop=&quot;26dp&quot;\n            android:text=&quot;Mon Profile &quot;\n            android:textColor=&quot;@color/black&quot;\n            android:textSize=&quot;22sp&quot;\n            android:fontFamily=&quot;@font/poppins_semibold&quot;\n            android:gravity=&quot;center&quot;\n            /&gt;\n    &lt;/RelativeLayout&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/tname&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;nom&quot;\n        android:fontFamily=&quot;@font/poppins_semibold&quot;\n        android:textColor=&quot;@color/black&quot;\n        android:layout_marginStart=&quot;30dp&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:textSize=&quot;16sp&quot;/&gt;\n\n\n    &lt;TextView\n        android:id=&quot;@+id/temail&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;email&quot;\n        android:fontFamily=&quot;@font/poppins_semibold&quot;\n        android:textColor=&quot;@color/black&quot;\n        android:layout_marginStart=&quot;30dp&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:textSize=&quot;16sp&quot;/&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/tphonenumber&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;numéro &quot;\n        android:fontFamily=&quot;@font/poppins_semibold&quot;\n        android:textColor=&quot;@color/black&quot;\n        android:layout_marginStart=&quot;30dp&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:textSize=&quot;16sp&quot;/&gt;\n\n\n    &lt;TextView\n        android:id=&quot;@+id/tpassword&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:text=&quot;mot de passe&quot;\n        android:fontFamily=&quot;@font/poppins_semibold&quot;\n        android:textColor=&quot;@color/black&quot;\n        android:layout_marginStart=&quot;30dp&quot;\n        android:layout_marginTop=&quot;20dp&quot;\n        android:textSize=&quot;16sp&quot;/&gt;\n\n\n    &lt;androidx.appcompat.widget.AppCompatButton\n        android:id=&quot;@+id/editProfileButton&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_marginTop=&quot;37dp&quot;\n        android:layout_height=&quot;50dp&quot;\n        android:layout_marginHorizontal=&quot;90dp&quot;\n        android:layout_marginBottom=&quot;30dp&quot;\n        android:text=&quot;Modifier Profile&quot;\n        android:fontFamily=&quot;@font/poppins_semibold&quot;\n        android:textColor=&quot;@color/white&quot;\n        android:textAllCaps=&quot;false&quot;\n        android:textSize=&quot;18sp&quot;\n        android:textStyle=&quot;bold&quot;\n        android:background=&quot;@drawable/buttonstyle1&quot;/&gt;\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>I do this code for Profile.java, but it does not work:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class Profile extends AppCompatActivity {\n    ImageView back;\n    AppCompatButton mEditButton;\n\n    private DatabaseReference mDatabase;\\\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.fragment_profile);\n\n        back = findViewById(R.id.back);\n\n        // In your onCreate method:\n        FirebaseUser currentUser = FirebaseAuth.getInstance().getCurrentUser();\n        mDatabase = FirebaseDatabase.getInstance().getReference().child(&quot;Users&quot;).child(currentUser.getUid());\n\n        mDatabase.addValueEventListener(new ValueEventListener() {\n            @Override\n            public void onDataChange(DataSnapshot dataSnapshot) {\n                // Get user data from the dataSnapshot\n                String email = dataSnapshot.child(&quot;email&quot;).getValue(String.class);\n                String name = dataSnapshot.child(&quot;name&quot;).getValue(String.class);\n                String password = dataSnapshot.child(&quot;password&quot;).getValue(String.class);\n                String phoneNumber = dataSnapshot.child(&quot;phonenumber&quot;).getValue(String.class);\n\n                // Display user data in profile\n                TextView emailTextView = findViewById(R.id.temail);\n                emailTextView.setText(email);\n\n                TextView nameTextView = findViewById(R.id.tname);\n                nameTextView.setText(name);\n\n                TextView passwordTextView = findViewById(R.id.tpassword);\n                passwordTextView.setText(password);\n\n                TextView phoneNumberTextView = findViewById(R.id.tphonenumber);\n                phoneNumberTextView.setText(phoneNumber);\n            }\n\n            @Override\n            public void onCancelled(DatabaseError databaseError) {\n                Log.d(TAG, &quot;onCancelled: &quot; + databaseError.getMessage());\n            }\n        });\n    }\n}\n</code></pre>\n<p>The realtime data</p>\n<p><img src=\"https://i.stack.imgur.com/pLNgj.png\" alt=\"enter image description here\" /></p>\n<p>The auth data</p>\n<p><img src=\"https://i.stack.imgur.com/D7r0x.png\" alt=\"enter image description here\" /></p>\n"},{"tags":["java","spring","spring-boot","hibernate","jpa"],"answers":[{"owner":{"user_id":13819413,"display_name":"Diego Sanz"},"up_vote_count":1,"is_accepted":true,"creation_date":1680779488,"answer_id":75948855,"body":"<p>You have <code>@JsonBackReference</code> in <code>sizes</code> attributes, and <code>@JsonManagedReference</code> in Size class, into good attribute. You can change one annotation by the other one. See this link: <a href=\"https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion\" rel=\"nofollow noreferrer\">https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion</a></p>\n<blockquote>\n<p><strong>@JsonManagedReference</strong> is the forward part of reference, the one that <strong>gets serialized</strong> normally.</p>\n<p><strong>@JsonBackReference</strong> is the back part of reference; <strong>it'll be omitted from serialization</strong>.</p>\n</blockquote>\n<p>If you need in some cases show Size object and its good related attribute, you can create a SizeDto and you can include different annotations there.</p>\n"}],"owner":{"user_id":20502277,"display_name":"velovatik"},"view_count":52,"up_vote_count":2,"accepted_answer_id":75948855,"answer_count":1,"score":2,"creation_date":1680776417,"question_id":75948434,"body":"<p>I make internet shoe shop with Spring Boot + Hibernate + PostgreSQL and there are tables Goods with info about shoe and Sizes table which contains info about concrete shoe sizes and quantity in stock. So table with goods will contain info about its sizes. Table Sizes contains foreign key to Id in Goods and I want Hibernate to parse JSON that will contain sizes either</p>\n<p>relations from Good entity</p>\n<pre><code>@Entity\n@Table(name = &quot;goods&quot;)\n@JsonIdentityInfo(\n        generator = ObjectIdGenerators.PropertyGenerator.class,\n        property = &quot;id&quot;)\npublic class Good {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int Id;\n\n    @Column(name = &quot;Title&quot;)\n    private String title;\n\n    @Enumerated(EnumType.STRING)\n    @Column(name = &quot;sex&quot;)\n    private sexType sexType;\n\n    @ManyToOne(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n    CascadeType.REFRESH, CascadeType.MERGE})\n    @JoinColumn(name = &quot;ManufacturerId&quot;)\n    @JsonManagedReference //-------------------------------------------------------\n    Manufacturer manufacturer; //Many goods can refer to one manufacturer\n\n    @JsonBackReference\n    @OneToMany(cascade = {CascadeType.PERSIST, CascadeType.DETACH,\n            CascadeType.REFRESH, CascadeType.MERGE}, mappedBy = &quot;good&quot;)  //Uni-directional reference to size array\n            //@JoinColumn(name= &quot;goodid&quot;)\n    List&lt;Size&gt; sizes; //Refactor to bi-directional relationship\n\n    public void addSizeToGood(Size size) {\n        if (sizes == null) sizes = new ArrayList&lt;&gt;();\n        sizes.add(size);\n        //size.setGood(this);\n    }\n</code></pre>\n<p>Size entity</p>\n<pre><code>@Entity\n@Table(name = &quot;sizes&quot;)\n@JsonIdentityInfo(\n        generator = ObjectIdGenerators.PropertyGenerator.class,\n        property = &quot;id&quot;)\npublic class Size {\n    @Id\n    @Column(name = &quot;id&quot;)\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    private int Id;\n\n    @Column(name = &quot;Size&quot;)\n    private int size;\n\n    @Column(name = &quot;Quantity&quot;)\n    private int quantity;\n\n    @Column(name = &quot;goodid&quot;)\n    private int goodId;\n\n    @JsonManagedReference\n    @ManyToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;goodId&quot;)\n    Good good;\n</code></pre>\n<p>DAO method that returns list of goods</p>\n<pre><code>@Repository\npublic class GoodDAOImpl implements GoodDAO{\n\n    @Autowired\n    private EntityManager entityManager;\n\n    @Override\n    @Transactional //Spring open and close transactions automatically\n    public List&lt;Good&gt; getAllGoods() {\n        Session session = entityManager.unwrap(Session.class);\n\n        //Query&lt;Good&gt; query = session.createQuery(&quot;from Good&quot;, Good.class);\n        Query&lt;Good&gt; query = (Query&lt;Good&gt;) entityManager.createQuery(&quot;from Good right join Size on Good.&quot;);\n        List&lt;Good&gt; allGoods = query.getResultList();\n\n        return allGoods;\n    }\n}\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/SfxQf.png\" rel=\"nofollow noreferrer\">DB architecture</a>\n<a href=\"https://i.stack.imgur.com/PAgBh.png\" rel=\"nofollow noreferrer\">JSON response w/o info about sizes</a></p>\n<p>I tried to use sophisticated query hql code and used multiple hibernate annotations but nothing goood happened...</p>\n"},{"tags":["java","struct","unpack"],"comments":[{"owner":{"user_id":2338547,"display_name":"markspace"},"edited":false,"comment_id":133951164,"body":"Something like a <code>ByteBuffer</code> or a <code>FloatBuffer</code> seems possible here, depending on your requirements."}],"answers":[{"owner":{"user_id":5133585,"display_name":"Sweeper"},"up_vote_count":1,"is_accepted":false,"creation_date":1680744598,"answer_id":75945149,"body":"<p>You can wrap the bytes you read from the file in a <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/FloatBuffer.html\" rel=\"nofollow noreferrer\"><code>FloatBuffer</code></a>.</p>\n<pre><code>var fis = new FileInputStream(&quot;/path/to/file&quot;);\nvar bytes = fis.readNBytes(4 * 128 * 128);\nvar floats = ByteBuffer.wrap(bytes)\n//  optionally, specify the byte order here\n//  .order(ByteOrder.LITTLE_ENDIAN)\n    .asFloatBuffer();\n</code></pre>\n<p>Then, you can use <code>floats.get(n)</code> to get the float at index <code>n</code>, or <code>floats.put(n, f)</code> to write the float <code>f</code> into index <code>n</code>, just like you can with a <code>float[]</code>.</p>\n<p>If you want a <code>float[]</code> for some reason, you need to allocate a new one and read the contents of <code>floats</code> into it:</p>\n<pre><code>var floatArray = new float[128 * 128];\nfloats.get(floatArray);\n</code></pre>\n"}],"owner":{"user_id":17696091,"display_name":"newbie5050"},"view_count":44,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680736482,"question_id":75944653,"body":"<p>I have a Python code that works fine but I will need to convert it into Java:</p>\n<pre><code>    file_path = ...\n    with open(file_path, &quot;rb&quot;) as file:\n        in = file.read(4 * 128 * 128)\n        numbers = struct.unpack('f' * 128 * 128, in)\n</code></pre>\n<p>I found <a href=\"https://stackoverflow.com/questions/29879009/how-to-convert-python-struct-unpack-to-java\">the implementation for other types here</a> but I am looking for the implementation of the struct.unpack in Java for <a href=\"https://docs.python.org/3/library/struct.html\" rel=\"nofollow noreferrer\">float type(C Type = f)</a>.</p>\n"},{"tags":["java","java-8"],"answers":[{"owner":{"user_id":7237884,"display_name":"Panagiotis Bougioukos"},"up_vote_count":1,"is_accepted":true,"creation_date":1680867654,"answer_id":75958084,"body":"<p>Your suspicion is correct.</p>\n<p>As String is immutable in <code>Java</code> you can't just read the value of the field of the object and then modify that value. Doing so will not affect the field value.</p>\n<p>This would work with your <code>List</code> and your <code>Map</code> code since then you also call the relevant method (<code>arr.set</code>, <code>entry.setValue</code>) to put this value inside the relevant <code>list</code> or <code>map</code>.</p>\n<p>The respective relevant action to do when modifying a specific object (ex <code>CustomResponse</code>) would be to either call the setter with the modified value or to use reflection and modify directly the value of the field.</p>\n<p>But what I understand from your code is that you try to add some global configuration for <code>ObjectMapper</code> as to how it has to handle an <code>Object</code> that has <code>String</code> fields so that the produced <code>JSON</code> complies with your custom logic. If that is the case then it would be much easier in the following way.</p>\n<pre><code>ObjectMapper mapper = new ObjectMapper();\nSimpleModule module = new SimpleModule(&quot;MyStringSerializer&quot;);\nmodule.addSerializer(String.class, new MyStringSerializer());\nmapper.registerModule(module);\n</code></pre>\n<p>while you also need a Serializer Class like the following</p>\n<pre><code>public class MyStringSerializer extends JsonSerializer&lt;String&gt; {\n    @Override\n    public void serialize(\n                    String value, \n                    JsonGenerator gen, \n                    SerializerProvider serializers) throws IOException {\n\n        gen.writeString(value + &quot; atest&quot;);\n\n    }\n}\n</code></pre>\n<p>Otherwise if all you want is just to modify the state of an existing object and all it's relative string fields and you thought you could convert it with Jackson to achieve that, I think the part with reflection you just mentioned would be more appropriate. Reflection would also be best to cover your requirement</p>\n<blockquote>\n<p>Note that I do not want to recreate any new objects, preferably stick\nto in-place replacement.</p>\n</blockquote>\n"}],"owner":{"user_id":2840178,"display_name":"kar"},"view_count":48,"up_vote_count":3,"accepted_answer_id":75958084,"answer_count":1,"score":2,"creation_date":1680716736,"question_id":75942564,"body":"<p>I am trying to replace all the Strings nested inside an object via following which kind of works.</p>\n<p>But after replacing, the information just seems lost. The original object remains as is without change.</p>\n<p>Suspect it's cos I changed the original object which is of type <code>CustomResponse</code> to a map.</p>\n<p>I had to change it to a map first, else I can't traverse the way I am doing it now.</p>\n<p>Is there a way around this to not have to turn it into a map first.</p>\n<p>Else I can't traverse the way I am currently doing it.</p>\n<p><code>CustomResponse</code> is just an example. There are other objects being passed in like CustomResponse.\nThus I don't want to write logic to specifically cater to CustomResponse but keep it more generic as an object.</p>\n<p>Note that I do not want to recreate any new objects, preferably stick to in-place replacement.</p>\n<pre><code>import com.fasterxml.jackson.core.type.TypeReference;\nimport com.fasterxml.jackson.databind.ObjectMapper;\n\nimport java.util.List;\nimport java.util.Map;\n\nprivate static ObjectMapper MAPPER = new ObjectMapper();\n\n@SuppressWarnings(&quot;unchecked&quot;)\npublic void parse(Object obj) {\n    if (obj instanceof List) {\n        List&lt;Object&gt; arr = (List&lt;Object&gt;) obj;\n        for (int i = 0; i &lt; arr.size(); i++) {\n            Object o = arr.get(i);\n            if (o instanceof String) {\n                String str = (String) o;\n                arr.set(i, str + &quot; atest&quot;);\n            } else {\n                parse(o);\n            }\n        }\n    } else if (obj instanceof Map) {\n        Map&lt;Object, Object&gt; map = (Map&lt;Object, Object&gt;) obj;\n        for (Map.Entry&lt;Object, Object&gt; entry : map.entrySet()) {\n            Object o = entry.getValue();\n            if (o instanceof String) {\n                String str = (String) o;\n                entry.setValue(str + &quot; atest&quot;);\n            } else {\n                parse(o);\n            }\n        }\n    } else if (obj instanceof CustomResponse) {\n        // likely logic causing issue\n        Map&lt;Object, Object&gt; map = MAPPER.convertValue(obj, new TypeReference&lt;Map&lt;Object, Object&gt;&gt;() {});\n        parse(map);\n    }\n}\n</code></pre>\n<p>Another consideration was to use reflection like this but feels bit too hacky.</p>\n<pre><code>else if (obj instanceof CustomResponse) {\n    Field[] fields = obj.getClass().getDeclaredFields();\n    for (Field field : fields) {\n        field.setAccessible(true);\n        Object fieldValue = field.get(obj);\n        if (fieldValue instanceof String) {\n            String str = (String) fieldValue;\n            field.set(obj, str + &quot; atest&quot;);\n        } else {\n            parse(fieldValue);\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","exception","karate","feature-file","catch-exception"],"answers":[{"owner":{"user_id":143475,"display_name":"Peter Thomas"},"up_vote_count":1,"is_accepted":true,"creation_date":1680609628,"answer_id":75929120,"body":"<p>You can use a JS try-catch block with the <code>eval</code> keyword. Here is an example that also shows how to use <code>karate.fail()</code> if you still want to fail the test.</p>\n<pre><code>* eval\n&quot;&quot;&quot;\ntry {\n  var TestUtil = Java.type(&quot;pkg.TestUtil&quot;);\n  TestUtil.execute();\n} catch (e) {\n  karate.logger.error('failed:', e);\n  // do your custom cleanup or logging\n  karate.fail('failed because of: ' + e);\n}\n&quot;&quot;&quot;\n</code></pre>\n<p>For further reading: <a href=\"https://github.com/karatelabs/karate/issues/2242\" rel=\"nofollow noreferrer\">https://github.com/karatelabs/karate/issues/2242</a></p>\n<p>And also: <a href=\"https://stackoverflow.com/a/75903894/143475\">https://stackoverflow.com/a/75903894/143475</a></p>\n<p>Besides this I have no suggestions, so if you want any improvements in Karate please consider contributing code.</p>\n"}],"owner":{"user_id":21564194,"display_name":"Divya"},"view_count":50,"up_vote_count":2,"accepted_answer_id":75929120,"answer_count":1,"score":2,"creation_date":1680608776,"question_id":75928987,"body":"<p>While I'm running karate feature files with java classes, the feature file step is failing with <code>org.graalvm.polyglot.PolyglotException</code> and do we have a way to handle those exceptions?</p>\n<p>Since there are couple of test cases which has java implementation and these are tested by karate features.\ni.e., let's assume a java class &amp; feature</p>\n<p>Class</p>\n<pre><code>public class TestUtil{\n public static void execute(){\n  // this value might be null for some use cases &amp; unexpected\n  Long unexepectedVal = SomeInternalClass.getValue(); \n  SomeInternalImpl.processAndValidate(unexepectedVal.toString());\n }\n}\n</code></pre>\n<p>Feature</p>\n<pre><code>Background:\n  * def TestUtil = Java.type(&quot;pkg&quot;)\nScenario:\n  * eval TestUtil.execute()\n</code></pre>\n<p>While executing the feature file some use cases, I may get <code>NPE/ConnectionTimeOutException/Other Runtime exceptions</code> and but during the failures I've got <code>org.graalvm.polyglot.PolyglotException</code> as a root exception &amp; how can we <strong>trace/print</strong> the the <strong>original exception</strong> in <strong>HTML report</strong>?.</p>\n<p>Trying to catch the <code>org.graalvm.polyglot.PolyglotException</code> and trace the original exception.</p>\n"},{"tags":["java","terminal","utf-8","java.util.scanner","system.in"],"comments":[{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"edited":false,"comment_id":133922493,"body":"<code>-D&quot;file.encoding=UTF=8&quot;</code> is wrong, 1) it&#39;s UTF-8, not UTF=8, and 2) as far as I know the quotes should enclose the entire argument or be left out. That is <code>-Dfile.encoding=UTF-8</code> or <code>&quot;-Dfile.encoding=UTF-8</code>"},{"owner":{"user_id":13318909,"display_name":"ShadeOfLight"},"edited":false,"comment_id":133922975,"body":"Sorry, the = was a typo. I&#39;ve changed the quotes to enclose the entire argument, but the error persists."},{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"edited":false,"comment_id":133923019,"body":"Is the 65501 also a typo? Because on my system it results in <i>&quot;Invalid code page&quot;</i>, and the UTF-8 codepage is 65001, and 65501 is also not listed on <a href=\"https://learn.microsoft.com/en-us/windows/win32/intl/code-page-identifiers\" rel=\"nofollow noreferrer\">learn.microsoft.com/en-us/windows/win32/intl/&hellip;</a>"},{"owner":{"user_id":13318909,"display_name":"ShadeOfLight"},"edited":false,"comment_id":133923027,"body":"Yes, I&#39;m terribly sorry. It should be 65001, which is UTF-8."},{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"edited":false,"comment_id":133923073,"body":"That said, I retract (and deleted) my previous comment, because I can reproduce the problem."},{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"edited":false,"comment_id":133923089,"body":"Interestingly enough, when I don&#39;t use chcp 65001 (my system defaults to code page 437), it works fine and as expected."},{"owner":{"user_id":13318909,"display_name":"ShadeOfLight"},"edited":false,"comment_id":133923470,"body":"Very interesting indeed, but then the accented characters are not displayed correctly, even though they are not registered as 0."},{"owner":{"user_id":16376827,"display_name":"g00se"},"edited":false,"comment_id":133924127,"body":"<code>PS C:\\&gt; echo ? | Format-Hex</code> would be interesting. I&#39;m going to take a guess that the hex would involve 0XFC, which is <i>not</i> Unicode (Don&#39;t change codepage when you do that)"},{"owner":{"user_id":13318909,"display_name":"ShadeOfLight"},"edited":false,"comment_id":133925248,"body":"The output for &#252; as ? was 3F in position 0000 in codepage 65001, if you were curious."},{"owner":{"user_id":13318909,"display_name":"ShadeOfLight"},"edited":false,"comment_id":133926735,"body":"It seems that by changing UTF-8 out in favour of ANSI, the characters are displayed correctly and the inputs are read correctly. However, this is far from a perfect solution for me, given the prototype I&#39;m developing is supposed to be a language-learning tool."},{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":133927347,"body":"List version number for Windows OS, PowerShell app, and Java."},{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":133927370,"body":"What happens when you run within IntelliJ, using its built-in console? Describe its character encoding setting, and its behavior."},{"owner":{"user_id":2985643,"display_name":"skomisa"},"edited":false,"comment_id":133928154,"body":"More information is needed to properly reproduce your issue. Update your question with: [1] Your version of Java when running in PowerShell (<code>java --version</code>). [2] Your version of Java when running within Intellij. [3] Per the previous comment from Basil, what happens when running within Intellij? [4] What happens when you run from Windows Terminal using <i>Command Prompt</i> instead of <i>PowerShell</i>? [5] What is your <i>default</i> code page. That is, what do you see if you open a new PowerShell window and just submit <code>chcp</code>? [6] The value returned by <code>chcp</code> when <b>echo &#252;</b> is rendered as <b>echo ?</b>."},{"owner":{"user_id":13318909,"display_name":"ShadeOfLight"},"edited":false,"comment_id":133928931,"body":"I have added the information requested. Hopefully it is of some use to you."},{"owner":{"user_id":16376827,"display_name":"g00se"},"edited":false,"comment_id":133929602,"body":"<i>The output for &#252; as ? was 3F in position 0000 in codepage 6500</i> Ah no, that would be from entering a <i>literal question mark</i>. You started off with <i>modern consoles are capable of handling accented character outputs, and correctly encoding inputs, even though they show up as ?</i> So that was, I&#39;m afraid, a wasted exercise. You were meant to be doing that with the &#39;real&#39; character you wanted to examine. Of course, it <i>could</i> have been showing a real question mark as encoding had already failed before it even got to your app"},{"owner":{"user_id":13318909,"display_name":"ShadeOfLight"},"edited":false,"comment_id":133930405,"body":"Interestingly enough, the &#252; is displayed correctly as &#252; prior to sending the command <code>echo &#252;</code> in Command Prompt. In PowerShell, codepage 65001 breaks the &#252; character prior to sending it for some reason."},{"owner":{"user_id":2985643,"display_name":"skomisa"},"edited":false,"comment_id":133930475,"body":"@ShadeOfLight OK. I can reproduce your problem: works within Intellij, but fails from Windows Terminal when using the PS and cmd windows. A few minor differences in our environments: I am using Java 19 on Win 10 with IntelliJ IDEA 2023.1 (Ultimate Edition). Also, my default code page is 65001 so I don&#39;t need to use chcp. An interesting problem."},{"owner":{"user_id":16376827,"display_name":"g00se"},"edited":false,"comment_id":133932496,"body":"<i>in Command Prompt. In PowerShell, codepage 65001 breaks the &#252;...</i> What did I say? <i>Don&#39;t</i> change the codepage!"},{"owner":{"user_id":13318909,"display_name":"ShadeOfLight"},"edited":false,"comment_id":133932732,"body":"@g00se I&#39;ve added the results for codepage 1252 by editing my question. As for my system default, which is codepage 850, the output is again 3F in 0000, the same as codepage 65001. Apologies for my lazy skimming."}],"answers":[{"owner":{"user_id":2985643,"display_name":"skomisa"},"up_vote_count":1,"is_accepted":true,"creation_date":1680646997,"answer_id":75934287,"body":"<p>I can reproduce your problem, but I see nothing wrong with your code and I have no easy solution. Incredibly, it seems that even with the most recent versions of Java (18, 19, 20), reading UTF-8 characters from a Windows console remains problematic.</p>\n<p>This is formally documented in JDK bug <a href=\"https://bugs.openjdk.org/browse/JDK-8295672\" rel=\"nofollow noreferrer\">JDK-8295672 Provide a better alternative to reading System.in</a> which is open and unresolved. It states (with my emphasis added):</p>\n<blockquote>\n<p>Reading <code>System.in</code> is problematic as it is an input stream encoded in\nthe host's encoding. With the JEP 400, <strong><em>there are cases where the\ndefault encoding (UTF-8) and host's native encoding differ</em></strong>. To read\nthe bytes correctly, users would have to convert the bytes\nnative-to-default, which seems to be an obstacle for basic usage.\nProviding a better means to access (w/o considering encoding stuff)\nwould be appropriate.</p>\n</blockquote>\n<p>So setting the default charset to UTF-8 does not resolve the issue because the <em>&quot;host's native encoding&quot;</em> is not UTF-8, and there is nothing you can do about that (at least with respect to <em>cmd.exe</em> and <em>PowerShell</em> on Windows).</p>\n<p>Notes:</p>\n<ul>\n<li>My understanding is that this is only an issue on Windows. Linux and Mac handle UTF-8 input without problems.</li>\n<li>A possible workaround is using JNA (<a href=\"https://github.com/java-native-access/jna\" rel=\"nofollow noreferrer\">Java Native Access</a>) methods to read the console input instead of using a <code>Scanner</code>. See <a href=\"https://stackoverflow.com/q/58026937/2985643\">How do I read the contents from an open Windows Console (Command Prompt) using Java Native Access</a> to help get you started. Also see the Javadoc for JNA's <code>WinCon</code> interface, <a href=\"https://java-native-access.github.io/jna/5.10.0/javadoc/com/sun/jna/platform/win32/Wincon.html\" rel=\"nofollow noreferrer\">especially <code>ReadConsoleInput()</code></a>.</li>\n<li>Although it won't resolve your problem, you might consider upgrading to a more recent version of Java (18, 19 or 20) because of the implementation of <a href=\"https://openjdk.org/jeps/400\" rel=\"nofollow noreferrer\">JEP 400: UTF-8 by Default</a> in Java 18. This was one of the goals of JEP400 (with my emphasis added):</li>\n</ul>\n<blockquote>\n<p>Standardize on UTF-8 throughout the standard Java APIs, <strong>except for\nconsole I/O</strong>.</p>\n</blockquote>\n<ul>\n<li>Presumably console I/O was excluded in JEP400 because of the <em>&quot;host's encoding&quot;</em> issue mentioned above.</li>\n<li>An obvious question arising is why does your code work when run within Intellij? I suspect that is because JetBrains uses JNA to read the input from their console, but that's just a guess.</li>\n</ul>\n"}],"owner":{"user_id":13318909,"display_name":"ShadeOfLight"},"view_count":126,"up_vote_count":2,"accepted_answer_id":75934287,"answer_count":1,"score":2,"creation_date":1680603071,"question_id":75928132,"body":"<p><em>If you are facing the same problem, and your character set is covered by the ANSI test encoding (codepage 1252 or &quot;ISO 8859-1&quot;), you could use that encoding instead to temporarily circumvent the problem with UTF-8, however UTF-8 is the modern standard that encompasses every script for ultimate localisation.</em></p>\n<p>I'm creating an application that has to read user input containing accented characters from the console. From what I've read online, modern consoles are capable of handling accented character outputs, and correctly encoding inputs, even though they show up as <code>?</code> before sending the command.</p>\n<pre><code>PS C:\\&gt; echo ?\nü\nPs C:\\&gt;\n</code></pre>\n<p><em>Note: this behaviour is not reproducible in Command Prompt. Command Prompt, when run in Windows Terminal, seems to display accented characters correctly before sending as well.</em></p>\n<p>However, when running the following test code:</p>\n<pre><code>package com.test.outputtest;\n\nimport java.io.*;\nimport java.nio.charset.StandardCharsets;\nimport java.util.*;\nimport java.nio.file.*;\n\npublic class OutputTest {\n\n    public static void main(String[] args) {\n        // Set I/O to use UTF-8\n        System.setOut(new PrintStream(new FileOutputStream(FileDescriptor.out), true, StandardCharsets.UTF_8));\n\n        // Create the response listener\n        Scanner input = new Scanner(System.in, StandardCharsets.UTF_8);\n\n        System.out.println(Arrays.toString(&quot;èéëê&quot;.getBytes(StandardCharsets.UTF_8)));\n        String temp = input.nextLine();\n        System.out.println(Arrays.toString(temp.getBytes(StandardCharsets.UTF_8)));\n    }\n\n}\n</code></pre>\n<p>this is the output (after building the artifact &quot;app.jar&quot;):</p>\n<pre><code>PS C:\\Users\\[name]\\Desktop\\output_test&gt; chcp 65001\nActive code page: 65001\nPS C:\\Users\\[name]\\Desktop\\output_test&gt; java &quot;-Dfile.encoding=UTF-8&quot; -jar app.jar\n[-61, -88, -61, -87, -61, -85, -61, -86]\nèéëê\n[0, 0, 0, 0]\n</code></pre>\n<p>The first array of bytes comes from the pre-written string, the second array is the bytes of the inputted string. The fact that <code>echo</code> outputs accents correctly leads me to believe that this is a compiler error, but I'm not sure how to fix it. I've tried replacing the <code>Scanner</code> with <code>Console</code>, that gave me the same error.</p>\n<p>When running inside of IntelliJ, the ü is read completely normally when inputting it in the terminal. This is also a reason why I suspect a problem during compilation.\nWhen running with command prompt instead of PowerShell, the same error occurs.</p>\n<p>Note: I'm using Windows Terminal running PowerShell and using IntelliJ Idea Community Edition 2021.3. I have not edited the <code>.xml</code> files besides the artifact building file path and some other project-specific file paths.</p>\n<ul>\n<li>OS: Windows 10 build 19045.2728</li>\n<li>Java version: 17.0.6 (Also in IntelliJ)</li>\n<li>Default codepage: 850 (OEM)</li>\n<li>Codepage used in which the error occured: 65001 (UTF-8)</li>\n</ul>\n"},{"tags":["java","android","firebase","firebase-realtime-database","firebaseui"],"answers":[{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"up_vote_count":1,"is_accepted":false,"creation_date":1680590977,"answer_id":75926281,"body":"<p>Your <code>adapter</code> object is an object of type <code>FirebaseRecyclerPagingAdapter</code>. When you try to call <code>getCurrentList(position)</code> on such an object, it's the expected behavior to get the following error:</p>\n<pre><code>Cannot resolve method 'getCurrentList' in 'FirebaseRecyclerOptions':101\n</code></pre>\n<p>Since there is no <code>getCurrentList()</code> method inside your adapter class. Moreover, if such a method existed, as the name says, it would have returned a list and not a <code>DatabaseReference</code> object. So seeing your code, that line of code that produces that error should be removed.</p>\n"},{"owner":{"user_id":209103,"display_name":"Frank van Puffelen"},"up_vote_count":0,"is_accepted":false,"creation_date":1680617123,"answer_id":75930334,"body":"<p>Are you looking for <code>getRef()</code>? That'd be:</p>\n<pre><code>databaseReference = adapter.getRef(position);\n</code></pre>\n<p>I highly recommend keeping the source code for the class you're using handy in cases like this, as the entire <a href=\"https://github.com/firebase/FirebaseUI-Android/blob/master/database/src/main/java/com/firebase/ui/database/FirebaseAdapter.java\" rel=\"nofollow noreferrer\"><code>FirebaseAdapter.java</code> file</a> is only 47 lines long and can quickly help you find what <em>does</em> and what <em>doesn't</em> exist.</p>\n"}],"owner":{"user_id":16416275,"display_name":"abhay singh"},"view_count":30,"up_vote_count":3,"answer_count":2,"score":2,"creation_date":1680583515,"question_id":75925586,"body":"<p>I am working on a college search app and I am unable to solve this error.</p>\n<p>Here is the code:</p>\n<pre><code>public class searchEngineActivity extends AppCompatActivity {\n    public String stateSelected;\n    public String courseSelected;\n    public RecyclerView searchRecyclerView;\n    public WebView webView;\n    public FirebaseRecyclerOptions adapter;\n    public DatabaseReference databaseReference;\n    String queryState, queryCourse;\n\n    @Override\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        setContentView(R.layout.activity_search_engine);\n\n        Window window = getWindow();\n        window.addFlags(WindowManager.LayoutParams.FLAG_DRAWS_SYSTEM_BAR_BACKGROUNDS);\n        window.setStatusBarColor(getResources().getColor(R.color.colorPrimaryDark));\n        Bundle bundle = getIntent().getExtras();\n        stateSelected = bundle.getString(&quot;stateSelected&quot;);\n        courseSelected = bundle.getString(&quot;courseSelected&quot;);\n        Log.e(&quot;arguments&quot;,stateSelected+courseSelected );\n        makeQuery(stateSelected, courseSelected);\n        searchRecyclerView = (RecyclerView) findViewById(R.id.searchRecyclerView);\n        webView = (WebView) findViewById(R.id.webView);\n        searchRecyclerView.setLayoutManager(new LinearLayoutManager(this, LinearLayoutManager.HORIZONTAL, false));\n        setAdapter();\n        searchRecyclerView.addItemDecoration(new DividerItemDecoration(this,DividerItemDecoration.HORIZONTAL));\n    }\n\n    public void makeQuery(String q, String c) {\n        queryState = q.replaceAll(&quot; &quot;, &quot;-&quot;);\n        queryState = queryState.toLowerCase();\n        queryCourse = c.toLowerCase();\n\n    }\n\n    public void setAdapter() {\n        Query query = FirebaseDatabase.getInstance().getReference().child(&quot;searchengines&quot;);\n        FirebaseRecyclerOptions&lt;searchModelClass&gt; options = new FirebaseRecyclerOptions.Builder&lt;searchModelClass&gt;().setQuery(query, searchModelClass.class).build();\n        adapter = new FirebaseRecyclerPagingAdapter&lt;searchModelClass, androidx.recyclerview.widget.RecyclerView.ViewHolder&gt;(options) {\n\n            //@Override\n            protected void onBindViewHolder(@NonNull searchRecyclerViewHolder holder, final int position, @NonNull searchModelClass model) {\n                holder.setSiteImage(model.getImage());\n                holder.setSiteName(model.getName());\n                holder.setSiteURL(model.getUrl());\n            }\n\n            @Override\n            protected void onBindViewHolder(@androidx.annotation.NonNull @NonNull RecyclerView.ViewHolder viewHolder, int position, @androidx.annotation.NonNull @NonNull searchModelClass model) {\n            }\n\n            @Override\n            protected void onLoadingStateChanged(@androidx.annotation.NonNull @NonNull LoadingState state) {\n            }\n\n            @NonNull\n            //@Override\n            public searchRecyclerViewHolder onCreateViewHolder(@NonNull ViewGroup parent, int viewType) {\n                View view = LayoutInflater.from(parent.getContext())\n                        .inflate(R.layout.search_recycler_view, parent, false);\n\n                final searchRecyclerViewHolder viewHolder = new searchRecyclerViewHolder(view);\n                viewHolder.setOnClickListener(new searchRecyclerViewHolder.ClickListener() {\n                    @Override\n                    public void onClick(View view, int position) {\n                        **databaseReference = adapter.getCurrentList(position);**\n                        databaseReference = databaseReference.child(queryCourse);\n                        databaseReference.addListenerForSingleValueEvent(new ValueEventListener() {\n                            @Override\n                            public void onDataChange(DataSnapshot dataSnapshot) {\n                                String queryURL = dataSnapshot.getValue(String.class);\n                                queryURL = queryURL.replaceAll(&quot;state&quot;, queryState);\n                                webView.loadUrl(queryURL);\n\n                            }\n\n                            @Override\n                            public void onCancelled(DatabaseError databaseError) {\n                            }\n                        });\n                    }\n                });\n                return viewHolder;\n            }\n        };\n        searchRecyclerView.setAdapter(adapter);\n    }\n\n    @Override\n    public void onStart() {\n        super.onStart();\n        FirebaseRecyclerPagingAdapter&lt;Object, RecyclerView.ViewHolder&gt; firebaseRecyclerAdapter = null;\n        firebaseRecyclerAdapter.startListening();\n    } //UPDATING RECYCLER VIEW REGULARLY FROM THE START OF FRAGMENT\n}\n</code></pre>\n<p>Error is:</p>\n<blockquote>\n<p>Cannot resolve method 'getCurrentList' in 'FirebaseRecyclerOptions':101</p>\n</blockquote>\n<p>I tried to use other library for recycler view in place of firebase ui library, but then I have to change my whole code. What else I can do?</p>\n"},{"tags":["java","spring","mongodb","spring-data-mongodb","spring-data-mongodb-reactive"],"answers":[{"owner":{"user_id":20142156,"display_name":"Dhaval Gajjar"},"up_vote_count":1,"is_accepted":true,"creation_date":1681980771,"answer_id":76062237,"body":"<blockquote>\n<p>type class java.util.ArrayList into an instance of class com.vilya.farm.domain.model.Plot;</p>\n</blockquote>\n<p>The error says that you are getting an array instead of an object at the plot key. If you check your document <code>UserPlot</code> you have Plot as a property, not an array. So aggregation from the second lookup is returning an array.</p>\n<p>So, you need to use <code>$unwind</code> to convert the array to an object in aggregation. As, we have always 1 plot so we can use that. <a href=\"https://www.mongodb.com/docs/manual/reference/operator/aggregation/unwind/\" rel=\"nofollow noreferrer\">$unwind documentation</a></p>\n<p>Updated Aggregation:</p>\n<pre><code>{$lookup:{from:'users_have_plots',let:{plots:'$plots'},pipeline:[{$match:{$expr:{$in:['$_id',{$ifNull:['$$plots.$id',[]]}]}}},{$lookup:{from:'plots',localField:'plot.$id',foreignField:'_id',as:'plot'}},{$unwind: '$plot'}],as:'plots'}}\n</code></pre>\n<p>Gives result an object in plot:</p>\n<pre><code>[\n  {\n    _id: ObjectId(&quot;6412c76956d4170a7de34d92&quot;),\n    email: 'abc@abc.com',\n    password: '$2a$10$s9VgOYd.fOKZF66TnAsjWemiCYkA7aG45NJpuSNgbVxpcIGF7fWqu',\n    firstName: 'f',\n    lastName: 'l',\n    plots: [\n      {\n        _id: ObjectId(&quot;6426b073ca83da130cdb7f71&quot;),\n        userId: '6412c76956d4170a7de34d92',\n        plot: {\n          _id: ObjectId(&quot;6426b069ca83da130cdb7f70&quot;),\n          x: 0,\n          y: 0,\n          _class: 'com.vilya.farm.domain.model.Plot'\n        },\n        _class: 'com.vilya.farm.domain.model.UserPlot'\n      }\n    ],\n    _class: 'com.vilya.farm.domain.model.User'\n  },\n  {\n    _id: ObjectId(&quot;6414667360e4ba4481052627&quot;),\n    email: 'abc1@abc.com',\n    password: '$2a$10$OP52phZ61l2JX2e2TQOu9ubYFBYcPeqEZ92ox2Nyyp5e.MEZk7GhS',\n    firstName: 'f',\n    lastName: 'l',\n    _class: 'com.vilya.farm.domain.model.User',\n    plots: []\n  }\n]\n</code></pre>\n"}],"owner":{"user_id":10870817,"display_name":"SoT"},"view_count":141,"up_vote_count":2,"accepted_answer_id":76062237,"answer_count":1,"score":2,"creation_date":1680257701,"question_id":75897357,"body":"<p>Basically, I have a <code>User</code> collection that contains a @DbRef to <code>UserPlot</code> (plots) collection. Inside <code>UserPlot</code>, I also have a @DbRef to <code>Plot</code> (plot). My goal is to find all users and eagerly load plots to <code>User</code> (also eagerly load plot to UserPlot)</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Data\n@NoArgsConstructor\n@Document(collection = &quot;users&quot;)\npublic class User {\n\n  @Id private String id;\n\n  @Indexed(name = &quot;ui_email&quot;, unique = true)\n  private String email;\n\n  private String password;\n\n  @Indexed(name = &quot;ui_first_name&quot;)\n  private String firstName;\n\n  @Indexed(name = &quot;ui_last_name&quot;)\n  private String lastName;\n  \n  @DBRef\n  private List&lt;UserPlot&gt; plots;\n}\n\n@Data\n@Document(collection = &quot;users_have_plots&quot;)\npublic class UserPlot {\n  \n  @Id\n  private String id;\n  private String userId;\n  \n  @DBRef\n  private Plot plot;\n}\n\n@Data\n@Document(collection = &quot;plots&quot;)\n@NoArgsConstructor\npublic class Plot {\n  \n  @Id\n  private String id;\n  \n  private Integer x;\n  private Integer y;\n}\n\n@Repository\npublic interface UserRepository extends ReactiveMongoRepository&lt;User, String&gt; {\n  \n  @Aggregation(pipeline = {\n      &quot;{$lookup:{from:'users_have_plots',let:{plots:'$plots'},pipeline:[{$match:{$expr:{$in:['$_id',{$ifNull:['$$plots.$id',[]]}]}}},{$lookup:{from:'plots',localField:'plot.$id',foreignField:'_id',as:'plot'}}],as:'plots'}}&quot;\n  })\n  Flux&lt;User&gt; findAllIncludePlots();\n}\n\n@SpringBootApplication(exclude = UserDetailsServiceAutoConfiguration.class)\n@EnableReactiveMongoRepositories\npublic class FarmApplication {\n\n  public static void main(String[] args) {\n    SpringApplication.run(FarmApplication.class, args);\n  }\n  \n  @Bean\n  CommandLineRunner t(UserRepository userRepository) {\n    return a -&gt; {\nuserRepository.findAllIncludePlots().map(User::getPlots).doOnNext(System.out::println).subscribe();\n    };\n  }\n}\n</code></pre>\n<p>When I invoke <code>userRepository.findAllIncludePlots().map(User::getPlots).doOnNext(System.out::println).subscribe();</code> then i get this error:</p>\n<pre><code>org.springframework.data.mapping.MappingException: Cannot convert [Document{{_id=6426b069ca83da130cdb7f70, x=0, y=0, _class=com.vilya.farm.domain.model.Plot}}] of type class java.util.ArrayList into an instance of class com.vilya.farm.domain.model.Plot; Implement a custom Converter&lt;class java.util.ArrayList, class com.vilya.farm.domain.model.Plot&gt; and register it with the CustomConversions; Parent object was: UserPlot(id=6426b073ca83da130cdb7f71, userId=6412c76956d4170a7de34d92, plot=null) -&gt; User(id=6412c76956d4170a7de34d92, email=abc@abc.com, password=$2a$10$s9VgOYd.fOKZF66TnAsjWemiCYkA7aG45NJpuSNgbVxpcIGF7fWqu, firstName=f, lastName=l, plots=null) -&gt; null\nCaused by: org.springframework.data.mapping.MappingException: Cannot convert [Document{{_id=6426b069ca83da130cdb7f70, x=0, y=0, _class=com.vilya.farm.domain.model.Plot}}] of type class java.util.ArrayList into an instance of class com.vilya.farm.domain.model.Plot; Implement a custom Converter&lt;class java.util.ArrayList, class com.vilya.farm.domain.model.Plot&gt; and register it with the CustomConversions; Parent object was: UserPlot(id=6426b073ca83da130cdb7f71, userId=6412c76956d4170a7de34d92, plot=null) -&gt; User(id=6412c76956d4170a7de34d92, email=abc@abc.com, password=$2a$10$s9VgOYd.fOKZF66TnAsjWemiCYkA7aG45NJpuSNgbVxpcIGF7fWqu, firstName=f, lastName=l, plots=null) -&gt; null\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$DefaultConversionContext.convert(MappingMongoConverter.java:2292) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$AssociationConversionContext.convert(MappingMongoConverter.java:2208) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$AssociationConversionContext.convert(MappingMongoConverter.java:2208) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$AssociationConversionContext.convert(MappingMongoConverter.java:2208) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$AssociationConversionContext.convert(MappingMongoConverter.java:2208) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$ConversionContext.convert(MappingMongoConverter.java:2131) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$MongoDbPropertyValueProvider.getPropertyValue(MappingMongoConverter.java:1900) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.getValueInternal(MappingMongoConverter.java:1359) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.lambda$getDbRefResolverCallback$1(MappingMongoConverter.java:632) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.DefaultDbRefResolverCallback.resolve(DefaultDbRefResolverCallback.java:57) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.DefaultDbRefResolver.resolveDbRef(DefaultDbRefResolver.java:85) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.readAssociation(MappingMongoConverter.java:673) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.readProperties(MappingMongoConverter.java:597) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.populateProperties(MappingMongoConverter.java:535) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:513) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.readDocument(MappingMongoConverter.java:477) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$DefaultConversionContext.convert(MappingMongoConverter.java:2325) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$AssociationConversionContext.convert(MappingMongoConverter.java:2208) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$AssociationConversionContext.convert(MappingMongoConverter.java:2208) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$ConversionContext.convert(MappingMongoConverter.java:2131) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.readCollectionOrArray(MappingMongoConverter.java:1402) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$DefaultConversionContext.convert(MappingMongoConverter.java:2297) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$AssociationConversionContext.convert(MappingMongoConverter.java:2208) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$AssociationConversionContext.convert(MappingMongoConverter.java:2208) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$ConversionContext.convert(MappingMongoConverter.java:2131) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter$MongoDbPropertyValueProvider.getPropertyValue(MappingMongoConverter.java:1900) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.getValueInternal(MappingMongoConverter.java:1359) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.lambda$getDbRefResolverCallback$1(MappingMongoConverter.java:632) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.DefaultDbRefResolverCallback.resolve(DefaultDbRefResolverCallback.java:57) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.DefaultDbRefResolver.resolveDbRef(DefaultDbRefResolver.java:85) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.readAssociation(MappingMongoConverter.java:673) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.readProperties(MappingMongoConverter.java:597) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.populateProperties(MappingMongoConverter.java:535) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:513) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.readDocument(MappingMongoConverter.java:477) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:413) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:409) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.convert.MappingMongoConverter.read(MappingMongoConverter.java:121) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at org.springframework.data.mongodb.core.ReactiveMongoTemplate$ReadDocumentCallback.doWith(ReactiveMongoTemplate.java:2914) ~[spring-data-mongodb-4.0.0.jar:4.0.0]\n    at reactor.core.publisher.FluxConcatMapNoPrefetch$FluxConcatMapNoPrefetchSubscriber.onNext(FluxConcatMapNoPrefetch.java:183) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.FluxCreate$BufferAsyncSink.drain(FluxCreate.java:814) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.FluxCreate$BufferAsyncSink.next(FluxCreate.java:739) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.FluxCreate$SerializedFluxSink.next(FluxCreate.java:161) ~[reactor-core-3.5.0.jar:3.5.0]\n    at java.base/java.util.ArrayList.forEach(ArrayList.java:1511) ~[na:na]\n    at com.mongodb.reactivestreams.client.internal.BatchCursorFlux.lambda$recurseCursor$4(BatchCursorFlux.java:98) ~[mongodb-driver-reactivestreams-4.8.0.jar:na]\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.FluxPeekFuseable$PeekConditionalSubscriber.onNext(FluxPeekFuseable.java:854) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:172) ~[reactor-core-3.5.0.jar:3.5.0]\n    at com.mongodb.reactivestreams.client.internal.MongoOperationPublisher.lambda$sinkToCallback$31(MongoOperationPublisher.java:577) ~[mongodb-driver-reactivestreams-4.8.0.jar:na]\n    at com.mongodb.internal.operation.AsyncQueryBatchCursor.next(AsyncQueryBatchCursor.java:173) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.reactivestreams.client.internal.BatchCursor.lambda$next$0(BatchCursor.java:38) ~[mongodb-driver-reactivestreams-4.8.0.jar:na]\n    at reactor.core.publisher.MonoCreate.subscribe(MonoCreate.java:58) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.Mono.subscribe(Mono.java:4444) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.Mono.subscribeWith(Mono.java:4510) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.Mono.subscribe(Mono.java:4272) ~[reactor-core-3.5.0.jar:3.5.0]\n    at com.mongodb.reactivestreams.client.internal.BatchCursorFlux.recurseCursor(BatchCursorFlux.java:108) ~[mongodb-driver-reactivestreams-4.8.0.jar:na]\n    at com.mongodb.reactivestreams.client.internal.BatchCursorFlux.lambda$subscribe$0(BatchCursorFlux.java:60) ~[mongodb-driver-reactivestreams-4.8.0.jar:na]\n    at reactor.core.publisher.LambdaMonoSubscriber.onNext(LambdaMonoSubscriber.java:171) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.FluxMap$MapSubscriber.onNext(FluxMap.java:122) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.MonoNext$NextSubscriber.onNext(MonoNext.java:82) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.MonoFlatMap$FlatMapMain.secondComplete(MonoFlatMap.java:245) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.MonoFlatMap$FlatMapInner.onNext(MonoFlatMap.java:305) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.MonoPeekTerminal$MonoTerminalPeekSubscriber.onNext(MonoPeekTerminal.java:180) ~[reactor-core-3.5.0.jar:3.5.0]\n    at reactor.core.publisher.MonoCreate$DefaultMonoSink.success(MonoCreate.java:172) ~[reactor-core-3.5.0.jar:3.5.0]\n    at com.mongodb.reactivestreams.client.internal.MongoOperationPublisher.lambda$sinkToCallback$31(MongoOperationPublisher.java:577) ~[mongodb-driver-reactivestreams-4.8.0.jar:na]\n    at com.mongodb.reactivestreams.client.internal.OperationExecutorImpl.lambda$execute$2(OperationExecutorImpl.java:94) ~[mongodb-driver-reactivestreams-4.8.0.jar:na]\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:46) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.async.function.AsyncCallbackSupplier.lambda$whenComplete$1(AsyncCallbackSupplier.java:97) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.async.function.RetryingAsyncCallbackSupplier$RetryingCallback.onResult(RetryingAsyncCallbackSupplier.java:116) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:46) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.async.function.AsyncCallbackSupplier.lambda$whenComplete$1(AsyncCallbackSupplier.java:97) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:46) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.async.function.AsyncCallbackSupplier.lambda$whenComplete$1(AsyncCallbackSupplier.java:97) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.operation.CommandOperationHelper.lambda$transformingReadCallback$10(CommandOperationHelper.java:332) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:46) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.DefaultServer$DefaultServerProtocolExecutor$1.onResult(DefaultServer.java:242) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:46) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.CommandProtocolImpl$1.onResult(CommandProtocolImpl.java:84) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.DefaultConnectionPool$PooledConnection$1.onResult(DefaultConnectionPool.java:683) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.UsageTrackingInternalConnection$2.onResult(UsageTrackingInternalConnection.java:159) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.async.ErrorHandlingResultCallback.onResult(ErrorHandlingResultCallback.java:46) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection$2$1.onResult(InternalStreamConnection.java:524) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection$2$1.onResult(InternalStreamConnection.java:501) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection$MessageHeaderCallback$MessageCallback.onResult(InternalStreamConnection.java:824) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection$MessageHeaderCallback$MessageCallback.onResult(InternalStreamConnection.java:788) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection$5.completed(InternalStreamConnection.java:648) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection$5.completed(InternalStreamConnection.java:645) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.connection.netty.NettyStream.readAsync(NettyStream.java:319) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.connection.netty.NettyStream.readAsync(NettyStream.java:266) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.readAsync(InternalStreamConnection.java:645) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection.access$600(InternalStreamConnection.java:89) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection$MessageHeaderCallback.onResult(InternalStreamConnection.java:778) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection$MessageHeaderCallback.onResult(InternalStreamConnection.java:763) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection$5.completed(InternalStreamConnection.java:648) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.internal.connection.InternalStreamConnection$5.completed(InternalStreamConnection.java:645) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.connection.netty.NettyStream.readAsync(NettyStream.java:319) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.connection.netty.NettyStream.handleReadResponse(NettyStream.java:347) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.connection.netty.NettyStream.access$1100(NettyStream.java:105) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.connection.netty.NettyStream$InboundBufferHandler.channelRead0(NettyStream.java:421) ~[mongodb-driver-core-4.8.0.jar:na]\n    at com.mongodb.connection.netty.NettyStream$InboundBufferHandler.channelRead0(NettyStream.java:418) ~[mongodb-driver-core-4.8.0.jar:na]\n    at io.netty.channel.SimpleChannelInboundHandler.channelRead(SimpleChannelInboundHandler.java:99) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:444) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.fireChannelRead(AbstractChannelHandlerContext.java:412) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.DefaultChannelPipeline$HeadContext.channelRead(DefaultChannelPipeline.java:1410) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:440) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.AbstractChannelHandlerContext.invokeChannelRead(AbstractChannelHandlerContext.java:420) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.DefaultChannelPipeline.fireChannelRead(DefaultChannelPipeline.java:919) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.nio.AbstractNioByteChannel$NioByteUnsafe.read(AbstractNioByteChannel.java:166) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKey(NioEventLoop.java:788) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeysOptimized(NioEventLoop.java:724) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.nio.NioEventLoop.processSelectedKeys(NioEventLoop.java:650) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.channel.nio.NioEventLoop.run(NioEventLoop.java:562) ~[netty-transport-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.util.concurrent.SingleThreadEventExecutor$4.run(SingleThreadEventExecutor.java:997) ~[netty-common-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.util.internal.ThreadExecutorMap$2.run(ThreadExecutorMap.java:74) ~[netty-common-4.1.85.Final.jar:4.1.85.Final]\n    at io.netty.util.concurrent.FastThreadLocalRunnable.run(FastThreadLocalRunnable.java:30) ~[netty-common-4.1.85.Final.jar:4.1.85.Final]\n    at java.base/java.lang.Thread.run(Thread.java:833) ~[na:na]\n</code></pre>\n<p>I think there is a problem with my <code>@Aggregation</code> but I cannot find out the reason. Please help. Thank you</p>\n<p>EDIT: my data looks like</p>\n<pre><code>vilya_be&gt; db.plots.find({})\n[\n  {\n    _id: ObjectId(&quot;6426b069ca83da130cdb7f70&quot;),\n    x: 0,\n    y: 0,\n    _class: 'com.vilya.farm.domain.model.Plot'\n  }\n]\n\nvilya_be&gt; db.users_have_plots.find({})\n[\n  {\n    _id: ObjectId(&quot;6426b073ca83da130cdb7f71&quot;),\n    userId: '6412c76956d4170a7de34d92',\n    plot: DBRef(&quot;plots&quot;, ObjectId(&quot;6426b069ca83da130cdb7f70&quot;)),\n    _class: 'com.vilya.farm.domain.model.UserPlot'\n  }\n]\n\nvilya_be&gt; db.users.find({})\n[\n  {\n    _id: ObjectId(&quot;6412c76956d4170a7de34d92&quot;),\n    email: 'abc@abc.com',\n    password: '$2a$10$s9VgOYd.fOKZF66TnAsjWemiCYkA7aG45NJpuSNgbVxpcIGF7fWqu',\n    firstName: 'f',\n    lastName: 'l',\n    plots: [ DBRef(&quot;users_have_plots&quot;, ObjectId(&quot;6426b073ca83da130cdb7f71&quot;)) ],\n    _class: 'com.vilya.farm.domain.model.User'\n  },\n  {\n    _id: ObjectId(&quot;6414667360e4ba4481052627&quot;),\n    email: 'abc1@abc.com',\n    password: '$2a$10$OP52phZ61l2JX2e2TQOu9ubYFBYcPeqEZ92ox2Nyyp5e.MEZk7GhS',\n    firstName: 'f',\n    lastName: 'l',\n    _class: 'com.vilya.farm.domain.model.User'\n  }\n]\n</code></pre>\n<p>mongo version: mongo:6.0.2-focal running on docker desktop</p>\n"},{"tags":["java","sql","jooq"],"answers":[{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"up_vote_count":1,"is_accepted":true,"creation_date":1680250152,"answer_id":75896235,"body":"<p>The problem here is <a href=\"https://blog.jooq.org/a-beginners-guide-to-the-true-order-of-sql-operations/\" rel=\"nofollow noreferrer\">SQL's logical order of operations</a>. Any means of counting results (both aggregate counts and window counts) happens <em>before</em> the <code>LIMIT</code> is applies. So, if you don't want <code>LIMIT</code> to have any effect on your count, you have to write the query in a way that it counts first. But if you don't get any results from your <code>WHERE</code> clause, then you don't get any rows when using window counts. When using aggregate counts, you'd get a row, but you can't apply <code>LIMIT</code> so easily anymore. (Without the <code>LIMIT</code>, you could simply use aggregate count and <a href=\"https://www.jooq.org/doc/latest/manual/sql-building/column-expressions/aggregate-functions/multiset-agg-function/\" rel=\"nofollow noreferrer\"><code>multisetAgg()</code></a> instead).</p>\n<p>So, I can see 2 solutions, a slow but simple one, a faster but more complex one:</p>\n<h2>Doing everything in the query, accessing the table twice:</h2>\n<p>If you want to move all the mapping logic into the query itself, I suspect you'd have to run 2 queries against the <code>PERSON</code> table, which probably isn't desirable for performance reasons:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ctx.select(\n      count().filterWhere(PERSON.NAME.startsWith(&quot;A&quot;)).convertFrom(Info::new),\n      multiset(\n        select(PERSON_ID, PERSON_NAME)\n        .from(PERSON)\n        .where(PERSON.NAME.startsWith(&quot;A&quot;))\n        .orderBy(PERSON.NAME.asc())\n        .limit(5)\n      ).convertFrom(r -&gt; r.map(mapping(Person::new)))\n    )\n   .from(PERSON)\n   .fetchOne(mapping(MyResult::new))\n</code></pre>\n<p>This works for your simple example, but as soon as you start joining things, you will have to duplicate a lot of query logic between the inner and outer query, and that's not really desirable.</p>\n<h2>Using JDK <code>Collector</code> API</h2>\n<p>But you don't have to form the query in a hierarchical way like your target data structure. You can still do <em>some</em> mapping logic in the client as well, outside of jOOQ, e.g.:</p>\n<pre class=\"lang-java prettyprint-override\"><code>ctx.select(\n      count().over().convertFrom(Info::new),\n      row(PERSON_ID, PERSON_NAME).mapping(Person::new)\n    )\n    .from(PERSON)\n    .where(PERSON.NAME.startsWith(&quot;A&quot;))\n    .orderBy(PERSON.NAME.asc())\n    .limit(5)\n    .collect(collectingAndThen(\n        groupingBy(\n            // There's a single possible value from count().over()\n            r -&gt; r.value1(),\n            mapping(r -&gt; r.value2(), toList())\n        ),\n        m -&gt; {\n            // Probably, just use var here...\n            Iterator&lt;Entry&lt;Info, List&lt;Person&gt;&gt;&gt; it = m.entrySet().iterator();\n\n            if (it.hasNext()) {\n                Entry&lt;Info, List&lt;Person&gt;&gt; e = it.next();\n                return new MyResult(e.getKey(), e.getValue());\n            }\n            else\n                return new MyResult(new Info(0), Collections.emptyList());\n        }\n    )));\n</code></pre>\n<p>This is assuming the following static import:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import static java.util.stream.Collectors.*;\n</code></pre>\n<p>Granted, it's not so pretty. You could maybe refactor this into a different format or write some more generic utility for this sort of result, but I hope you get the essence of it.</p>\n<p><strong>Note:</strong> this approach won't give you the correct count value if you paginate beyond the last page</p>\n"}],"owner":{"user_id":785230,"display_name":"Manu"},"view_count":244,"up_vote_count":2,"accepted_answer_id":75896235,"answer_count":1,"score":2,"creation_date":1680211919,"question_id":75893162,"body":"<p>I have the following java records :</p>\n<pre><code>record Info(Integer count){}\nrecord Person(Integer id, String name) {}\nrecord MyResult(Info info, List&lt;Person&gt; persons){}\n</code></pre>\n<p>I need to return a MyResult Object containing the total count of persons in Info and a partial list of these persons.</p>\n<p>I have no idea if it is possible to do it directly with only one JOOQ query and how to do it.</p>\n<p>Here is an attempt but obviously it will fetch a list so this is not the correct way.</p>\n<pre><code>DSL.getContext(conn)\n  .select(\n    DSL.row(DSL.count().over()).mapping(Info::new),\n    DSL.multiset(\n      DSL.select(\n         PERSON.PERSON_ID,\n         PERSON.NAME\n      ).convertFrom(r -&gt; r.map(Records.mapping(PERSON::new)))\n    )\n  )\n   .from(PERSON)\n   .where(PERSON.NAME.startWith(&quot;A&quot;))\n   .orderBy(PERSON.NAME.asc())\n   .offset(0)\n   .limit(5) \n   .fetchOne(Records.mapping(MyResult::new));\n</code></pre>\n<p>Any idea ?</p>\n"},{"tags":["java","android"],"comments":[{"owner":{"user_id":21408550,"display_name":"inkredusk"},"edited":false,"comment_id":133853539,"body":"have you checked this link <a href=\"https://github.com/PhilJay/MPAndroidChart/wiki/MarkerView\" rel=\"nofollow noreferrer\">github.com/PhilJay/MPAndroidChart/wiki/MarkerView</a>"},{"owner":{"user_id":19802321,"display_name":"Shaikh Faizan"},"edited":false,"comment_id":133853641,"body":"And How to put city names on x axis"}],"answers":[{"owner":{"user_id":21408550,"display_name":"inkredusk"},"up_vote_count":1,"is_accepted":false,"creation_date":1680169263,"answer_id":75886542,"body":"<p><code>MPAndroidChart</code> provides a class called <code>MarkerView</code> to create a <code>customized popup</code>. All you need to do is create a custom class that extends the <code>MarkerView</code> class as follows:</p>\n<pre><code>public class MyMarkerView extends MarkerView { \n\n  private final TextView tvCity;\n\n  public MyMarkerView(Context context, ValueFormatter xAxisValueFormatter) {\n    super(context, R.layout.custom_marker_view);\n     ...\n     //bind your TextView contained in the layout over here\n     tvCity = (TextView)findViewById(R.id.tvCity);\n  }\n\n  // runs every time the MarkerView is redrawn, can be used to update \n  @Override\n  public void refreshContent(Entry e, Highlight highlight) {\n     //set your values to the view over here\n     tvCity.setText(&quot;Some value&quot;);\n     ...\n     super.refreshContent(e, highlight);\n  }\n\n}\n</code></pre>\n<p>Reference link : <a href=\"https://github.com/PhilJay/MPAndroidChart/wiki/MarkerView\" rel=\"nofollow noreferrer\">MarkerView </a></p>\n<p>You can refer this <a href=\"https://www.codeplayon.com/android-bar-chart-with-tooltip-example/\" rel=\"nofollow noreferrer\">tutorial</a> as an example.</p>\n"}],"owner":{"user_id":19802321,"display_name":"Shaikh Faizan"},"view_count":32,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680167655,"question_id":75886278,"body":"<p>I have to plot a line graph which shows no. of projects in talukas and when clicked on one point it shows more data as shown in this image: <a href=\"https://i.stack.imgur.com/zUFaq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zUFaq.png\" alt=\"enter image description here\" /></a></p>\n<p>How can I implement that? I tried MPAndroidChart but I don't know how to do this.</p>\n"},{"tags":["java","spring","spring-boot","spring-webflux","spring-webclient"],"comments":[{"owner":{"user_id":1840146,"display_name":"Toerktumlare"},"edited":false,"comment_id":133845598,"body":"dont block in a reactive application."}],"answers":[{"owner":{"user_id":2991105,"display_name":"Erunafailaro"},"up_vote_count":1,"is_accepted":false,"creation_date":1680162629,"answer_id":75885470,"body":"<p>One way to transform the JSON file into a Flux would be:</p>\n<pre><code>public Flux&lt;DataBuffer&gt; test(String fileName) {\n    Path p = Paths.get(new File(basePath + fileName).getAbsolutePath());\n    DataBufferFactory dbf = new DefaultDataBufferFactory();\n    Flux&lt;DataBuffer&gt; flux = DataBufferUtils.read(p, dbf, 256 * 256);\n    return flux;\n}\n</code></pre>\n<p>or another way:</p>\n<pre><code>public Flux&lt;DataBuffer&gt; test(final JsonObject jo) {\n    final DataBufferFactory bufferFactory = new DefaultDataBufferFactory();\n    final byte[] bytes = jo.toString().getBytes(StandardCharsets.UTF_8);\n    final DataBuffer buffer = bufferFactory.allocateBuffer(bytes.length);\n    buffer.write(bytes);\n    return Flux.just(buffer);\n}\n\n</code></pre>\n<p><strong>Alternate approach</strong></p>\n<p>As a sidenote: I would really encourage you to consider a different approach to sending files of that size over a rest interface. The load you put on rest server, rest client and other components that might be involved (network, api gateways, load balancers, cpu, memory etc) could cause severe problems.</p>\n<p>Instead, a better tool to share files of this size would be a blob storage (S3 or similar) or a simple file system that is available to all parties involved.</p>\n<p>Instead of sending the whole file you could send an &quot;event message&quot; over the REST api that basically tells the receiver that a new file has arrived for them on the storage at path <code>/some/where/file.json</code>.</p>\n<p>The receiver could then download the file from the storage (or just read it from a mounted file system), parse it into json again and so on ...</p>\n"}],"owner":{"user_id":8348819,"display_name":"Ronit Nath"},"view_count":233,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680115149,"question_id":75880974,"body":"<p>I am new to Spring WebFlux and WebClient. I am working on a PoC where I have to send a huge JSON (&gt; 100 MB) as a stream from microservice A to B using a <strong>POST request</strong>. The current implementation sends the <strong>entire json as the request body</strong> which leads to memory spikes on both the ends. Following is the structure of the JSON:</p>\n<pre><code>{\n   &quot;bindings&quot;:  {\n      &quot;entity1&quot;: {\n\n      },\n      &quot;entity2&quot;: {\n\n      }\n   },\n   &quot;artifacts&quot;: {\n      &quot;types&quot;: {\n         &quot;type1&quot;: {\n\n         },\n         &quot;type2&quot;: {\n\n         }\n      },\n      &quot;action&quot;: {\n         &quot;action1&quot;: {\n\n         },\n         &quot;action2&quot;: {\n\n         }\n      }\n   }\n}\n</code></pre>\n<p>entity1, entity2 have identical structure. Same applies for type1, type2 and action1, action2 respectively. These objects are <strong>huge</strong> in size with multiple nestings and there can be hundreds of them.</p>\n<p>After going through multiple documentation, I have developed the following algorithm for JSON streaming:</p>\n<ol>\n<li>Convert the JSON object to DataBuffer object, since as per the <a href=\"https://www.amitph.com/spring-webclient-large-file-download/\" rel=\"nofollow noreferrer\">link</a> conversion to DataBuffer helps in chunking.</li>\n<li>Create a flux from the DataBuffer object.</li>\n<li>Send the <code>dataBufferFlux</code> as the response body in the following way:</li>\n</ol>\n<pre><code>         WebClient.create(&quot;http://localhost:9002/registry&quot;)\n                    .post()\n                    .uri(&quot;/packages&quot;)\n                    .contentType(MediaType.APPLICATION_JSON)\n                    .body(dataBufferFlux, DataBuffer.class)\n                    .retrieve()\n                    .bodyToMono(Void.class)\n                    .block();\n</code></pre>\n<p>Using content-type as <code>MediaType.APPLICATION_NDJSON</code> since <code>MediaType.APPLICATION_STREAM_JSON</code> is deprecated.</p>\n<p>I have two questions:</p>\n<ol>\n<li>Is the algorithm correct to do JSON streaming using webclient?</li>\n<li>If the algorithm is correct, then what is the process of converting a <code>JSONObject</code> to <code>Flux&lt;DataBuffer&gt;</code> ?</li>\n</ol>\n"},{"tags":["java","httpclient","micronaut","micronaut-client"],"answers":[{"owner":{"user_id":9959152,"display_name":"Ryuzaki L"},"up_vote_count":1,"is_accepted":false,"creation_date":1680009165,"answer_id":75866726,"body":"<p>Basically in the background micronaut uses the <a href=\"https://docs.micronaut.io/latest/guide/#aopArch\" rel=\"nofollow noreferrer\">AOP</a> Advice for retrying using <a href=\"https://docs.micronaut.io/snapshot/api/io/micronaut/retry/annotation/Retryable.html\" rel=\"nofollow noreferrer\">@Retryable</a> annotation</p>\n<p>So, you can basically move the logic into method and implement the logic to retry that method on exception and with delay.</p>\n<pre><code>@Retryable(attempts = &quot;2&quot;, includes =[NullPointerException.class,..], delay= &quot;1s&quot;)\npublic void clientCall() {\n\n  client = new DefaultHttpClient(&quot;http://127.0.0.1:8200&quot;, configuration);\n\n  var uri = UriBuilder.of(&quot;http://127.0.0.1:8200&quot;).path(&quot;/v1/kv/data/&quot;).build();\n  var request = HttpRequest.GET(uri).header(&quot;username&quot;,&quot;password&quot;);\n  var response = client.toBlocking().exchange(request);\n}\n</code></pre>\n<p>You can also configure the values in <code>application.yml/application.properties</code> and use them in annotation</p>\n<pre><code>@Retryable(\nattempts = &quot;\\${micronaut.http.services.get_core_item_graphql.retryAttempts}&quot;,\ndelay = &quot;\\${micronaut.http.services.get_core_item_graphql.retryDelay}&quot;)\n</code></pre>\n"}],"owner":{"user_id":9977928,"display_name":"shashank"},"view_count":117,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680005710,"question_id":75866135,"body":"<p>Micronaut supports retry mechanism for http clients if we use it in a declarative client like this :</p>\n<pre><code>@Client(&quot;http://127.0.0.1:8200&quot;)\n@Retryable(delay = &quot;${retry-delay}&quot;, attempts = &quot;${retry-attempts}&quot;)\n@Header(name = &quot;username&quot;, value = &quot;password&quot;)\n\npublic interface SampleHttpClient {\n    @Get(value = &quot;/v1/kv/data/&quot;, produces = MediaType.APPLICATION_JSON)\n    HttpResponse&lt;String&gt; getVaultSecret();\n}\n</code></pre>\n<p>Here <strong>retry-delay</strong> and <strong>retry-attempts</strong> are read from configuration yaml file.</p>\n<p>But I am <strong>creating the http clients in my code on the fly</strong> as show below. This is because I get the http client parameters(URL, retry properties, header etc) at runtime.</p>\n<p>How can I add retry option to my http configuration here ?</p>\n<pre><code>HttpClient client = null;\nvar configuration = new ServiceHttpClientConfiguration(&quot;myId&quot;, null, \n                                  null, new DefaultHttpClientConfiguration());  \n   \n// how to add retry to http configuration here ???       \n\nclient = new DefaultHttpClient(&quot;http://127.0.0.1:8200&quot;, configuration);\n\nvar uri = UriBuilder.of(&quot;http://127.0.0.1:8200&quot;).path(&quot;/v1/kv/data/&quot;).build();\nvar request = HttpRequest.GET(uri).header(&quot;username&quot;,&quot;password&quot;);\nvar response = client.toBlocking().exchange(request);\n</code></pre>\n"},{"tags":["java","gitlab","gitlab-api"],"answers":[{"owner":{"user_id":14864319,"display_name":"Cydonia"},"up_vote_count":1,"is_accepted":false,"creation_date":1680615847,"answer_id":75930122,"body":"<p>The answer is actually quite simple, the documentation if pretty well written (I just missed it somehow) <a href=\"https://docs.gitlab.com/ee/api/packages.html#list-package-files\" rel=\"nofollow noreferrer\">package files</a></p>\n"}],"owner":{"user_id":14864319,"display_name":"Cydonia"},"view_count":33,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1680004858,"question_id":75866006,"body":"<p>I've managed to get a connection to GitLab API working and I can see the available projects and their respective packages in the package registries. I'm having a problem understanding how to programatically see the files inside of a package, aka how to get the <strong>filename.extension</strong> in my URL:</p>\n<p>.../projectID/packages/generic/packageName/packageVersion/<strong>filename.extension</strong></p>\n<p>Also, is there a smarter way of downloading the package files other than using URL and HttpURLConnection in Java?</p>\n<p>I've managed to donwload files already with the hardcoded version of the URL (via curl and programatically), where I knew the name and the file extension beforehand. Since I won't have that option for the actual download, I expect that there is a way to generalize this, I just haven't found it in the documentation.</p>\n"},{"tags":["java","parsing","antlr","grammar"],"answers":[{"owner":{"user_id":1137174,"display_name":"Mike Lischke"},"up_vote_count":1,"is_accepted":false,"creation_date":1679900060,"answer_id":75852859,"body":"<p>Internally the parsing engine doesn't work in terms of rules, but of ATN states and will have to walk this augmented transition network to find states that follow a given state (also known as follow set).</p>\n<p>For a single look ahead use the <a href=\"https://github.com/antlr/antlr4/blob/master/runtime/Java/src/org/antlr/v4/runtime/atn/LL1Analyzer.java\" rel=\"nofollow noreferrer\">LL1Analyzer</a> class from the runtime. For more complex lookahead, possibly collecting rule names search for a code completion engine (e.g. <a href=\"https://github.com/mike-lischke/antlr4-c3\" rel=\"nofollow noreferrer\">antlr4-c3</a>).</p>\n"}],"owner":{"user_id":14396749,"display_name":"JAKE"},"view_count":38,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1679882941,"question_id":75851642,"body":"<p>I've looked through the ANTLR book, but I haven't come across a way to get the next possible rules for a given rule.</p>\n<p>For instance, with a test grammar like</p>\n<pre><code>grammar ArrayInit;\ninit : '{' value (',' value)* '}' ; \nvalue : init \n    | INT\n    ;\nINT : [0-9]+ ;\nWS : [ \\t\\r\\n]+ -&gt; skip ;\n</code></pre>\n<p>is there a way to iteratively go through the rules and list the next possible rules?</p>\n<p>For something like the above grammar, I'd expect to be able to start with the <code>init</code> rule. When I give that <code>init</code> rule, I'd expect to get the next possible options of <code>{</code>, <code>value</code>, (<code>,</code> and <code>value</code>), and <code>}</code>.</p>\n<p>This way I could figure out what next possible tokens might be. I would be able to start with the <code>init</code> rule, and iteratively move through the grammar, seeing that <code>init</code> -&gt; <code>{ value }</code> possible with the comma variation.</p>\n<p>I've looked through the ANTLR classes. I'm able to use the parser's <code>getRuleNames</code> function to get all the rules. However, I can't use that to determine which rules follow a given rule.</p>\n"},{"tags":["java","android","google-play-services","android-location"],"answers":[{"owner":{"user_id":19980636,"display_name":"Krokomot"},"up_vote_count":1,"is_accepted":true,"creation_date":1680709902,"answer_id":75941563,"body":"<p>Also <a href=\"https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest#setPriority(int)\" rel=\"nofollow noreferrer\"><code>LocationRequest.setPriority()</code></a> has become deprecated and been replaced by <a href=\"https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest.Builder#setPriority(int)\" rel=\"nofollow noreferrer\"><code>LocationRequest.Builder.setPriority()</code></a> where</p>\n<blockquote>\n<p>The default value is <a href=\"https://developers.google.com/android/reference/com/google/android/gms/location/Priority#PRIORITY_BALANCED_POWER_ACCURACY\" rel=\"nofollow noreferrer\"><code>Priority.PRIORITY_BALANCED_POWER_ACCURACY</code></a>.</p>\n</blockquote>\n<p>So in your case you don't need to call <code>setPriority()</code> at all.</p>\n<p>Further note, that <code>PRIORITY_BALANCED_POWER_ACCURACY</code> has been moved from <strong>class</strong> <a href=\"https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest\" rel=\"nofollow noreferrer\"><code>LocationRequest</code></a> to <strong>interface</strong> <a href=\"https://developers.google.com/android/reference/com/google/android/gms/location/Priority\" rel=\"nofollow noreferrer\"><code>Priority</code></a>.</p>\n"}],"owner":{"user_id":1114043,"display_name":"zeus"},"view_count":27,"up_vote_count":2,"accepted_answer_id":75941563,"answer_count":1,"score":2,"creation_date":1679700696,"question_id":75838826,"body":"<p>When I read the doc : <a href=\"https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest\" rel=\"nofollow noreferrer\">https://developers.google.com/android/reference/com/google/android/gms/location/LocationRequest</a> then say that <code>PRIORITY_BALANCED_POWER_ACCURACY</code> is deprecated and that we must use instead <code>Priority.PRIORITY_BALANCED_POWER_ACCURACY</code>. but when i do so i receive :</p>\n<blockquote>\n<p>error: cannot find symbol<br />\n.setPriority(Priority.PRIORITY_BALANCED_POWER_ACCURACY)</p>\n</blockquote>\n<p>What did I miss ?</p>\n"},{"tags":["java","c#",".net","regex"],"comments":[{"owner":{"user_id":1831987,"display_name":"VGR"},"edited":false,"comment_id":133738283,"body":"Is the input XML?  <code>&lt;sps&gt;6&amp;&lt;&#47;sps&gt;</code> is not legal XML, so I’m not entirely clear on the format."},{"owner":{"user_id":14868997,"display_name":"Charlieface"},"edited":false,"comment_id":133739163,"body":"Consider using a proper XML parser, see also <a href=\"https://stackoverflow.com/a/1732454/14868997\">stackoverflow.com/a/1732454/14868997</a> You could for example use XPath <code>sym&#47;text()</code> and <code>sps&#47;text()</code>"},{"owner":{"user_id":546871,"display_name":"AdrianHHH"},"edited":false,"comment_id":133739350,"body":"Java and C# are different languages. Please choose one and delete the other tag."},{"owner":{"user_id":13685884,"display_name":"Dhruba"},"edited":false,"comment_id":133751301,"body":"@VGR, The input is not XML. I created those tags and the tags can contain anything including alphanumeric/special characters."},{"owner":{"user_id":13685884,"display_name":"Dhruba"},"edited":false,"comment_id":133751393,"body":"@Charlieface, parsing the XML is not my target. I want all the tags including the start and end tags with contained data. E.g., From test case 2, I expect the following result (separated by comma)  &lt;sym&gt;nu&lt;/sym&gt;, &lt;sps&gt;6&amp;&lt;/sps&gt;, &lt;sbs&gt;10&lt;/sbs&gt;, &lt;sym&gt;b&lt;/sym&gt;  Along with that the strings which are outside of any tags. Again from test case 2: (separated by comma)  Hello World, With Special Characters$#  Please let me know if I missed anything to explain."},{"owner":{"user_id":13685884,"display_name":"Dhruba"},"edited":false,"comment_id":133751663,"body":"@AdrianHHH, I assumed the same regex is compatible with both Java and C#. I need this to use in C#. Although After searching I learned that, Java has all of the C# regex syntaxes but vice versa is not always compatible. But I think in this case the regex might be the same for both languages. Please correct me if I am wrong in this case."},{"owner":{"user_id":14868997,"display_name":"Charlieface"},"edited":false,"comment_id":133751951,"body":"You just need to add a <code>&lt;Root&gt;</code> tag around the whole string. Eg <a href=\"https://dotnetfiddle.net/wAtz0Q\" rel=\"nofollow noreferrer\">dotnetfiddle.net/wAtz0Q</a>"},{"owner":{"user_id":13685884,"display_name":"Dhruba"},"edited":false,"comment_id":133752642,"body":"@Charlieface, it&#39;s a nice idea to go with XML parser. I reviewed the solution you shared. It&#39;s also taking the texts which are inside the tag. Just removing the text which are inside the tags will solve the problem. I am not sure how to remove the texts from the tags."},{"owner":{"user_id":14868997,"display_name":"Charlieface"},"edited":false,"comment_id":133752696,"body":"<a href=\"https://dotnetfiddle.net/32F65r\" rel=\"nofollow noreferrer\">dotnetfiddle.net/32F65r</a> There are also ways to read XML without having an XML root, you need to use <code>XmlSerializer</code> for that I think"},{"owner":{"user_id":1831987,"display_name":"VGR"},"edited":false,"comment_id":133753171,"body":"If this is not XML, does your markup notation account for the possibility that the text content might actually contain the six characters <code>&lt;&#47;sbs&gt;</code>?"},{"owner":{"user_id":13685884,"display_name":"Dhruba"},"edited":false,"comment_id":133756041,"body":"@VGR, there can be any number of characters but I will use one or two which can be alphanumeric/special characters."}],"answers":[{"owner":{"user_id":5440883,"display_name":"Chris Maurer"},"up_vote_count":0,"is_accepted":false,"creation_date":1679517858,"answer_id":75817109,"body":"<p>Alternation seems to do what you want.  You need a final lookahead to stop the zero occurrence case from overconsuming.</p>\n<pre><code>&quot;&lt;sym&gt;.+?&lt;\\/sym&gt;|&lt;sps&gt;.+?&lt;\\/sps&gt;|&lt;sbs&gt;.+?&lt;\\/sbs&gt;|.+?(?=&lt;s(?:ym|ps|bs)&gt;|$)&quot;gm\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/WMlHE.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/WMlHE.jpg\" alt=\"enter image description here\" /></a></p>\n<p>You can also shorten it with a backreference:</p>\n<pre><code>&quot;&lt;(sym|sps|sbs)&gt;.+?&lt;\\/\\1&gt;|.+?(?=&lt;s(?:ym|ps|bs)&gt;|$)&quot;gm\n</code></pre>\n<p>In this case the alternation is shortened to just the tag value, and the closing tag can reuse it with the backreference <code>\\1</code>.</p>\n"},{"owner":{"user_id":14868997,"display_name":"Charlieface"},"up_vote_count":1,"is_accepted":true,"creation_date":1679591795,"answer_id":75826121,"body":"<p>You should use a proper XML parser for this. In C# you can use XElement. Thhis allows you to use Linq-to-XML to query it.</p>\n<p>Since your XML doesn't have a root, we need to add one.</p>\n<pre class=\"lang-cs prettyprint-override\"><code>var myxml = @&quot;abcd&lt;sps&gt;2&lt;/sps&gt;&lt;sbs&gt;yy&lt;/sbs&gt;efgh&lt;sym&gt;b&lt;/sym&gt;&quot;;\n\nvar doc = XElement.Parse(&quot;&lt;Root&gt;&quot; + myxml + &quot;&lt;/Root&gt;&quot;);\nvar nodes = doc.Descendants()\n            .Where(e =&gt; e.Name == &quot;sps&quot; || e.Name == &quot;sbs&quot;)\n            .Cast&lt;XNode&gt;()\n            .Concat(doc.Nodes().OfType&lt;XText&gt;());\nConsole.WriteLine(string.Join(&quot;\\r\\n&quot;, nodes));\n</code></pre>\n<p><a href=\"https://dotnetfiddle.net/JE5qmC\" rel=\"nofollow noreferrer\"><strong>dotnetfiddle</strong></a></p>\n"}],"owner":{"user_id":13685884,"display_name":"Dhruba"},"view_count":63,"up_vote_count":2,"accepted_answer_id":75826121,"answer_count":2,"score":2,"creation_date":1679514852,"question_id":75816731,"body":"<p>I want a regex that will return zero or more occurrences of matched substrings of different patterns.</p>\n<p><strong>Different patterns to match</strong></p>\n<ol>\n<li><p><code>&lt;sym&gt;Any value&lt;/sym&gt;</code></p>\n</li>\n<li><p><code>&lt;sps&gt;Any value&lt;/sps&gt;</code></p>\n</li>\n<li><p><code>&lt;sbs&gt;Any value&lt;/sbs&gt;</code></p>\n</li>\n<li><p>Any string including spaces and special characters which are outside of the above 3 tags</p>\n</li>\n</ol>\n<p>Where &quot;Any value&quot; is any string including spaces and special characters.</p>\n<p><strong>Test Cases</strong></p>\n<ol>\n<li><p><code>abcd&lt;sps&gt;2&lt;/sps&gt;&lt;sbs&gt;yy&lt;/sbs&gt;efgh&lt;sym&gt;b&lt;/sym&gt;</code></p>\n</li>\n<li><p><code>&lt;sym&gt;nu&lt;/sym&gt;Hello World&lt;sps&gt;6&amp;&lt;/sps&gt;&lt;sbs&gt;10&lt;/sbs&gt;With Special Characters$#&lt;sym&gt;b&lt;/sym&gt;</code></p>\n</li>\n<li><p><code>&lt;sps&gt;2&lt;/sps&gt;Test&lt;sbs&gt;yy&lt;/sbs&gt;&lt;sym&gt;b&lt;/sym&gt;End String</code></p>\n</li>\n</ol>\n<p><strong>Results</strong></p>\n<p>1.</p>\n<blockquote>\n<pre><code>abcd\n&lt;sps&gt;2&lt;/sps&gt;\n&lt;sbs&gt;yy&lt;/sbs&gt;  \nefgh\n&lt;sym&gt;b&lt;/sym&gt;\n</code></pre>\n</blockquote>\n<ol start=\"2\">\n<li></li>\n</ol>\n<blockquote>\n<pre><code>&lt;sym&gt;nu&lt;/sym&gt;  \nHello World \n&lt;sps&gt;6&amp;&lt;/sps&gt;  \n&lt;sbs&gt;10&lt;/sbs&gt;\nWith Special Characters$#\n&lt;sym&gt;b&lt;/sym&gt;\n</code></pre>\n</blockquote>\n<ol start=\"3\">\n<li></li>\n</ol>\n<blockquote>\n<pre><code>&lt;sps&gt;2&lt;/sps&gt;\nTest\n&lt;sbs&gt;yy&lt;/sbs&gt;\n&lt;sym&gt;b&lt;/sym&gt;\nEnd String\n</code></pre>\n</blockquote>\n<p>I tried the following regex:</p>\n<p><code>(?([a-zA-Z0-9]+))&lt;sym&gt;[^.]*&lt;/sym&gt;|&lt;sps&gt;[^.]*&lt;/sps&gt;|&lt;sbs&gt;[^.]*&lt;/sbs&gt;(?([a-zA-Z0-9]+))</code></p>\n<p><strong>Result against &quot;Test Case 1&quot;:</strong> Getting the following strings where I am not getting the strings outside the tags.</p>\n<p><code>&lt;sps&gt;2&lt;/sps&gt; &lt;sbs&gt;yy&lt;/sbs&gt; &lt;sym&gt;b&lt;/sym&gt;</code></p>\n<p><strong>Result against &quot;Test Case 2&quot;:</strong> Getting the full input text.</p>\n<p><code>&lt;sym&gt;nu&lt;/sym&gt;Hello World&lt;sps&gt;6&amp;&lt;/sps&gt;&lt;sbs&gt;10&lt;/sbs&gt;With Special Characters$#&lt;sym&gt;b&lt;/sym&gt;</code></p>\n<p>Could you please help me in this context. Thank you in advanced!</p>\n"},{"tags":["java","java-8"],"comments":[{"owner":{"user_id":2308683,"display_name":"OneCricketeer"},"edited":false,"comment_id":133719690,"body":"Make <code>Employee</code> have a single <code>Map&lt;String, Object&gt; props</code> rather than &quot;100+ fields&quot;"},{"owner":{"user_id":592355,"display_name":"xerx593"},"edited":false,"comment_id":133719705,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/13592236/parse-a-uri-string-into-name-value-collection\">Parse a URI String into Name-Value Collection</a>"},{"owner":{"user_id":592355,"display_name":"xerx593"},"edited":false,"comment_id":133719783,"body":"It&#39;s &quot;url specific&quot;, but quite popular... top answer can be refactored to strings (with/-out decoding) + many (good) &quot;string based&quot; answers..."}],"answers":[{"owner":{"user_id":1794485,"display_name":"df778899"},"up_vote_count":1,"is_accepted":false,"creation_date":1679438575,"answer_id":75806975,"body":"<p>Assuming the normal getter/setter pairs are on the target class, recommend such as the Apache <code>commons-beanutils</code> library for simplicity:</p>\n<pre><code>BeanUtils.setProperty(emp, key, value);\n</code></pre>\n<p>To achieve the same without an external library, <code>java.beans.Introspector</code> will return an array of <code>PropertyDescriptor</code> for a class.  These would need sifting by name, for example:</p>\n<pre><code>PropertyDescriptor[] propertyDescriptors = Introspector\n    .getBeanInfo(Employee.class).getPropertyDescriptors();\nPropertyDescriptor propertyDescriptor = Arrays\n    .stream(propertyDescriptors)\n    .filter(p -&gt; p.getName().equals(key)).findAny()\n    .orElseThrow(() -&gt; new IllegalArgumentException(\n        String.format(&quot;Property not found: %s&quot;, key)));\npropertyDescriptor.getWriteMethod().invoke(emp, value);\n</code></pre>\n"}],"owner":{"user_id":1069186,"display_name":"Coder17"},"view_count":72,"up_vote_count":3,"answer_count":1,"score":2,"creation_date":1679426475,"question_id":75805557,"body":"<p>I have a json request which hits a post mapping call</p>\n<pre><code>{   &quot;xyz&quot;:&quot;tyu&quot;,\n\n    &quot;abc&quot;:&quot;test1=1&amp;test2=2&amp;.....test100=100&quot;\n}\n</code></pre>\n<p>There are 100+ key value pairs in the field abc. How do I map it to a java class which contains these 100+ fields</p>\n<p>My approach:</p>\n<pre><code>@PostMapping(&quot;/employee&quot;)\n    public Response someMethod(@RequestBody Employee emp) {\n           \n        String reqStream = emp.getAbc();\n        String[] reqStreamArray = reqStream.split(&quot;&amp;&quot;);\n\n        for (String pair : reqStreamArray) {\n            String[] reqStreamKeyValue = pair.split(&quot;=&quot;);\n            String key = reqStreamKeyValue[0];\n            String value = reqStreamKeyValue[1];\n            switch (key) {\n                case &quot;test1&quot;:\n                    emp.setTest1(value);\n                    break;\n</code></pre>\n<p>So the problem is I need to have 100+ switch stmts which is wrong. What is the better approach?</p>\n"},{"tags":["java","spring","multithreading","singleton"],"comments":[{"owner":{"user_id":10632369,"display_name":"tomerpacific"},"edited":false,"comment_id":133707974,"body":"Consider synchronizing the singleton methods so that only one thread has access to a shared resource."},{"owner":{"user_id":9176914,"display_name":"Muddassir Rahman"},"edited":false,"comment_id":133708062,"body":"@tomerpacific synchronizing will affect the performance very badly ."},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":133709571,"body":"What you should do is make your chain prototype scoped and create <code>@Bean</code> methods that configure the different chains you want and inject those into the service, instead of combining the chains in the service. Basically you should move the construction of the chain out of your service."},{"owner":{"user_id":9176914,"display_name":"Muddassir Rahman"},"edited":false,"comment_id":133709846,"body":"@M.Deinum isn&#39;t making the bean as prototype,  will have extra memory utilisation ? as it will create object on each request"},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":133709863,"body":"No it won&#39;t create an object on each request (prototype != request scope), it will only create objects for each injection point."},{"owner":{"user_id":9176914,"display_name":"Muddassir Rahman"},"edited":false,"comment_id":133719808,"body":"@M.Deinum Would you mind providing an example of how you propose to create <code>@Bean</code>. As far as I know bean returns an object. How chains will be mapped there ? and how I will use that in my service"},{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":133725811,"body":"You are now configuring the chains in your service method, that logic has to move to <code>@Bean</code> methods. You can then inject the resulting chain into the service, with that even not knowing you are using this as a chain of responsibility."}],"answers":[{"owner":{"user_id":1089967,"display_name":"lance-java"},"up_vote_count":1,"is_accepted":true,"creation_date":1679388047,"answer_id":75798921,"body":"<p>Personally I'd remove the <code>nextChain(...)</code> method from <code>TransactionChain</code> so it is immutable and therefore thread-safe. Then you could do something like</p>\n<pre><code>public class ChainProcessor {\n   private TransactionChain[] steps;\n   public ChainProcessor(TransactionChain... steps) { \n      this.steps = steps;\n   }\n   public void process(ChainContext context) { \n      Arrays.stream(steps).forEach(step -&gt; step.processChain(context));\n   }\n}\n</code></pre>\n<pre><code>/**\n * This context class only required if you need to pass state from one step to another\n */\npublic class ChainContext {\n   public void setValue(String name, Object value) { ... }\n   public &lt;T&gt; T getValue(String name, Class&lt;T&gt; type) { ... }\n}\n</code></pre>\n<pre><code>public interface TransactionChain {\n   void processChain(ChainContext context);\n}\n</code></pre>\n<pre><code>@Service \npublic class TransactionChainContext {\n\n   @Autowired\n   TransactionChain validationChainOne;\n\n   @Autowired\n   TransactionChain validationChainTwo;\n\n   @Autowired\n   TransactionChain validationChainThree;\n   \n   private ChainProcessor cp1;\n   private ChainProcessor cp2;\n\n   @PostConstruct\n   public void postConstruct() {\n      cp1 = new ChainProcessor(validationChainOne, validationChainTwo, validationChainThree);\n      cp2 = new ChainProcessor(validationChainThree, validationChainTwo, validationChainOne);\n   }\n\n   public void saveChainOne() { \n      cp1.process(new ChainContext());\n   }\n\n   public void saveChainTwo() {                     \n      cp2.process(new ChainContext());\n   }\n}\n</code></pre>\n<p>I personally hate <code>@Autowired</code> and <code>@PostConstruct</code> and never use them. I prefer final member variables and constructor injection. See <a href=\"https://odrotbohm.de/2013/11/why-field-injection-is-evil/\" rel=\"nofollow noreferrer\">this blog post</a> on why field injection is evil</p>\n<p><strong>Edit</strong></p>\n<p>In answer to Muddassir Rahman question regarding filtering a list you could do</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service \npublic class TransactionChainContext {\n   ...\n   public void saveChainOne(List&lt;Transaction&gt; transactions) { \n      ChainContext context = new new ChainContext();\n      context.setValue(&quot;transactions&quot;, transactions);\n      cp1.process(context);\n      List&lt;Transaction&gt; filteredTransactions = context.getValue(&quot;transactions&quot;, List.class);\n      doStuff(filteredTransactions);\n   }\n   ...\n}\n</code></pre>\n<p>And</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class MyConfiguration {\n   @Bean\n   public TransactionChain validationChainOne() {\n      return context -&gt; {\n         List&lt;Transaction&gt; transactions = context.getValue(&quot;transactions&quot;, List.class);\n         List&lt;Transaction&gt; filteredTransactions = transactions.stream().filter(t -&gt; !t.getName().contains(&quot;foo&quot;)).collect(Collectors.toList());\n         context.setValue(&quot;transactions&quot;, filteredTransactions);\n      };\n   }\n\n   @Bean\n   public TransactionChain validationChainTwo() {\n      return context -&gt; {\n         List&lt;Transaction&gt; transactions = context.getValue(&quot;transactions&quot;, List.class);\n         List&lt;Transaction&gt; filteredTransactions = transactions.stream().filter(t -&gt; !t.getName().contains(&quot;bar&quot;)).collect(Collectors.toList());\n         context.setValue(&quot;transactions&quot;, filteredTransactions);\n      };\n   }\n}\n</code></pre>\n<p>If you want to be less generic, you could have a customised context class. Eg</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ChainContext {\n   private final List&lt;Transaction&gt; transactions;\n   private final List&lt;Predicate&lt;Transaction&gt;&gt; filters = new ArrayList&lt;&gt;();\n\n   public ChainContext(List&lt;Transaction&gt; transactions) {\n      this.transactions = transactions;\n   }\n\n   public void addFilter(Predicate&lt;Transaction&gt; filter) {\n      filters.add(filter);\n   }\n\n   public List&lt;Transaction&gt; getFilteredTransactions() {\n      return transactions.stream()\n         .filter(t -&gt; filters.stream().allMatch(filter -&gt; filter.test(t))\n         .collect(Collectors.toList());\n   }\n}\n</code></pre>\n"}],"owner":{"user_id":9176914,"display_name":"Muddassir Rahman"},"view_count":105,"up_vote_count":2,"accepted_answer_id":75798921,"answer_count":1,"score":2,"creation_date":1679386602,"question_id":75798722,"body":"<p>I have a spring boot project in which I have implemented chain of responsibility pattern. I have created chains of multiple service class.\nEach service is of scope Singleton. Now I have 2 threads are accessing the bean which is singleton, then in this case modifications done by one thread is affecting the other thread working on the same bean. I tried making the bean scope as request but it didn't work.</p>\n<p><strong>TransactionChainContext - defining chains</strong></p>\n<pre><code>@Service \npublic class TransactionChainContext {\n\n@Autowired\nTransactionChain validationChainOne;\n\n@Autowired\nTransactionChain validationChainTwo;\n\n@Autowired\nTransactionChain validationChainThree;\n\n@Autowired\nTransactionChain validationChainFour;\n\n@Autowired\nTransactionChain validationChainFive;\n\n/* Execute by Thread 1 */\n public void saveTransactionInChain(List&lt;Transaction&gt; txnList) {                      \n    validationChainOne.nextChain(validationChainTwo);\n    validationChainTwo.nextChain(validationChainThree);\n    validationChainThree.nextChain(validationChainFour);\n    validationChainFour.nextChain(null);\n\n    validationChainOne.processChain(txnList);\n}\n\n/* Execute by Thread 2 but it changes the chaing for thread 1 as well */\n\n public void saveChainTwo(List&lt;Transaction&gt; txnList) {                    \n    validationChainOne.nextChain(validationChainFour);\n    validationChainFour.nextChain(validationChainFive);\n    validationChainFive.nextChain(null);\n\n   validationChainOne.processChain(txnList);\n}\n</code></pre>\n<p>}</p>\n<p><strong>TransactionChain interface</strong></p>\n<pre><code>public interface TransactionChain {\n\nvoid nextChain(TransactionChain transactionChain);\n\nvoid processChain(List&lt;Transaction&gt; txnList);\n</code></pre>\n<p>}</p>\n<p><strong>EDIT : Validation class</strong></p>\n<pre><code>@Service\npublic class ValidationChainOne implements TransactionChain {\n\n\nTransactionChain nextTransactionChain;\n\n\n\n@Override\npublic void nextChain(TransactionChain transactionChain) {\n    this.nextTransactionChain = transactionChain;\n}\n\n@Override\npublic void processChain(List&lt;Transaction&gt; txnList)  {\n    // some business logic\n     //filtering txns bases on validations\n     if(nextTransactionChain !=null){\n        nextTransactionChain.processChain(txnList); // passing filtered txnList\n     }\n}\n</code></pre>\n<p>}</p>\n<p><strong>What I tried</strong></p>\n<p>In order to make sure that both threads does not affect each other , I made bean scope as request</p>\n<pre><code>@Scope(value = &quot;request&quot;,  proxyMode = ScopedProxyMode.TARGET_CLASS)\n</code></pre>\n<p>but got following error</p>\n<pre><code>'scopedTarget.ValidationChainOne': Scope 'request' is not active for the current thread; consider defining a scoped proxy for this bean if you intend to refer to it from a singleton; nested exception is java.lang.IllegalStateException: No thread-bound request found: Are you referring to request attributes outside of an actual web request, or processing a request outside of the originally receiving thread? If you are actually operating within a web request and still receive this message, your code is probably running outside of DispatcherServlet: In this case, use RequestContextListener or RequestContextFilter to expose the current request.\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:368)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:202)\n    at org.springframework.aop.target.SimpleBeanTargetSource.getTarget(SimpleBeanTargetSource.java:35)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:673)\n</code></pre>\n"},{"tags":["java","logging","log4j","log4j2","slf4j"],"comments":[{"owner":{"user_id":16034206,"display_name":"experiment unit 1998X"},"edited":false,"comment_id":133650477,"body":"you can use log4j2&#39;s routing appender and marker to do this. Based on the configuration of the routing appender, you can then pass a marker so that it would create either new files/new directory depending on the marker"},{"owner":{"user_id":20622382,"display_name":"Seriously"},"edited":false,"comment_id":133650508,"body":"I am new to logging would you share some ref on how to use routing appender and marker? - @experimentunit1998X"}],"answers":[{"owner":{"user_id":16034206,"display_name":"experiment unit 1998X"},"up_vote_count":1,"is_accepted":true,"creation_date":1679024728,"answer_id":75763588,"body":"<p>This is a recent example I was working with. The log4j2.xml I used is as follows:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;Configuration&gt;\n\n    &lt;Properties&gt;\n        &lt;Property name=&quot;CONSOLE_PATTERN&quot;&gt;%d{HH:mm:ss.SSS} [%t] %-5level %logger{36} - %msg%n&lt;/Property&gt;\n        &lt;Property name=&quot;LOG_PATTERN&quot;&gt;%d %-5p method: [%t] %C{2} (%F:%L) - %m%n&lt;/Property&gt;\n    &lt;/Properties&gt;\n\n    &lt;Appenders&gt;\n        &lt;Routing name=&quot;RoutingAppender&quot;&gt;\n            &lt;Routes pattern=&quot;$${marker:}&quot;&gt;\n                &lt;Route&gt;\n                    &lt;RollingFile name=&quot;RollingFile-${marker:}&quot;\n                                 fileName=&quot;./logs/application/${marker:}/app.log&quot;\n                                 filePattern=&quot;./logs/application/${marker:}/app-%d{MM-dd-yyyy}.log.gz&quot;\n                                 ignoreExceptions=&quot;false&quot;&gt;\n                        &lt;PatternLayout pattern=&quot;${LOG_PATTERN}&quot;/&gt;\n                        &lt;TimeBasedTriggeringPolicy/&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;\n            &lt;/Routes&gt;\n        &lt;/Routing&gt;\n\n        &lt;Console name=&quot;StdOut&quot; target=&quot;SYSTEM_OUT&quot; follow=&quot;true&quot;&gt;\n            &lt;PatternLayout pattern=&quot;${CONSOLE_PATTERN}&quot;/&gt;\n        &lt;/Console&gt;\n\n        &lt;Routing name=&quot;SequenceRoutingAppender&quot;&gt;\n            &lt;Routes pattern=&quot;$${marker:}&quot;&gt;\n                &lt;Route&gt;\n                    &lt;RollingFile name=&quot;Sequencing-${marker:}&quot;\n                                 fileName=&quot;./logs/service/${marker:}/seq_gap.log&quot;\n                                 filePattern=&quot;./logs/service/${marker:}/seq_gap-%d{MM-dd-yyyy}.log.gz&quot;\n                                 ignoreExceptions=&quot;false&quot;&gt;\n                        &lt;PatternLayout pattern=&quot;${LOG_PATTERN}&quot;/&gt;\n                        &lt;TimeBasedTriggeringPolicy/&gt;\n                    &lt;/RollingFile&gt;\n                &lt;/Route&gt;\n            &lt;/Routes&gt;\n        &lt;/Routing&gt;\n    &lt;/Appenders&gt;\n    &lt;Loggers&gt;\n        &lt;Root level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;RoutingAppender&quot;/&gt;\n        &lt;/Root&gt;\n        &lt;logger name=&quot;SequencingLogger&quot; additivity=&quot;false&quot; level=&quot;info&quot;&gt;\n            &lt;AppenderRef ref=&quot;SequenceRoutingAppender&quot;/&gt;\n        &lt;/logger&gt;\n    &lt;/Loggers&gt;\n&lt;/Configuration&gt;\n</code></pre>\n<p>There are two RoutingAppenders I used, but its basically the same for both, I just want to log different things for the same Markers. It would take the marker values and insert it where the placeholders are ${marker:}. Inside my code, I have instantiated Markers as follows:</p>\n<pre><code>    Marker mainMarker = MarkerManager.getMarker(&quot;MAIN&quot;);\n    Marker applicationMarker = MarkerManager.getMarker(&quot;APPLICATION&quot;);\n    Marker sequenceMarker = MarkerManager.getMarker(&quot;SEQUENCE&quot;);\n</code></pre>\n<p>You can pass the name of your files and their file types as params to getMarker(). Then, when you log you pass the marker to the logger as well as whatever statement you want to log as follows:</p>\n<pre><code>LOGGER.warn(mainMarker, &quot;unable to find config in working directory. Fall back to jar config&quot;);\n</code></pre>\n<p>I know that the answer I provide is quite brief and to the point without much explanation why, but here is an <a href=\"https://roytuts.com/how-to-create-separate-log-file-for-each-module-using-routingappender-and-mdc-mapped-diagnostic-context-in-log4j2-slf4j/\" rel=\"nofollow noreferrer\">informative site</a> that explains what is going on, and why some of the things are done the way they are. I used it quite frequently while trying to understand how RoutingAppender works since the sample provided by Apache, and other examples on SO were quite brief.</p>\n<p>and quoting from the link</p>\n<blockquote>\n<p>The Routing is kept under Appender and it’s a RoutingAppender.</p>\n<p>The Routes element accepts a single attribute named “pattern”. The\npattern is evaluated against all the registered Lookups and the result\nis used to select a Route. Each Route may be configured with a key. If\nthe key matches the result of evaluating the pattern then that Route\nwill be selected. If no key is specified on a Route then that Route is\nthe default. Only one Route can be configured as the default.</p>\n<p>The Routes element may contain a Script child element. If specified,\nthe Script is run for each log event and returns the String Route key\nto use.</p>\n<p>You must specify either the pattern attribute or the Script element,\nbut not both.</p>\n<p>Each Route must reference an Appender. If the Route contains a ref\nattribute then the Route will reference an Appender that was defined\nin the configuration. If the Route contains an Appender definition\nthen an Appender will be created within the context of the\nRoutingAppender and will be reused each time a matching Appender name\nis referenced through a Route.</p>\n<p>In our example the Routes pattern is $${ctx:module}. This pattern\nmatches with a key called module in the context.</p>\n</blockquote>\n<p>but in my case the Routes pattern in $${marker:}</p>\n"}],"owner":{"user_id":20622382,"display_name":"Seriously"},"view_count":44,"up_vote_count":2,"accepted_answer_id":75763588,"answer_count":1,"score":2,"creation_date":1679023878,"question_id":75763522,"body":"<p>I have Created a maven java project, if given a folderpath, the code will iterate over the folder and pick file one by one and read all the contents of file (file type supported-txt,pdf,word,excel,csv,xml,logs) How to create separate log file for each file with same name as &quot;filename_filetype.log&quot; using log4j2 or any other lib will also work.</p>\n"},{"tags":["java","spring-boot","microservices"],"comments":[{"owner":{"user_id":16034206,"display_name":"experiment unit 1998X"},"edited":false,"comment_id":133630557,"body":"i think i had a similar error before. inside some of the dependencies, they import other libraries that could conflict with each other. So you should ccheck each dependency and exclude the conflicting dependencies which in this case are Logback or slf4j"},{"owner":{"user_id":1212880,"display_name":"Joseph"},"edited":false,"comment_id":133630635,"body":"Thanks @experimentunit1998X but i did  review the dependency tree and i noticed the spring boot starter web had those dependencies and i excluded them yet it didnt work"},{"owner":{"user_id":1212880,"display_name":"Joseph"},"edited":false,"comment_id":133630685,"body":"No, i excluded and recompiled. i have also updated my question with a section of dependency tree"}],"answers":[{"owner":{"user_id":1384297,"display_name":"Andy Wilkinson"},"up_vote_count":1,"is_accepted":true,"creation_date":1678954762,"answer_id":75753575,"body":"<p>You've got SLF4J 1.7 on the classpath and Spring Boot 3.0 requires SLF4J 2.0. I think the cause is your parent pom where the import of Boot's dependency management is incorrect. You're importing <code>spring-boot</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\n    &lt;version&gt;${spring.boot.dependencies.version}&lt;/version&gt;\n    &lt;scope&gt;import&lt;/scope&gt;\n    &lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>It should be <code>spring-boot-dependencies</code>:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-dependencies&lt;/artifactId&gt;\n    &lt;version&gt;${spring.boot.dependencies.version}&lt;/version&gt;\n    &lt;scope&gt;import&lt;/scope&gt;\n    &lt;type&gt;pom&lt;/type&gt;\n&lt;/dependency&gt;\n</code></pre>\n"}],"owner":{"user_id":1212880,"display_name":"Joseph"},"view_count":313,"up_vote_count":2,"accepted_answer_id":75753575,"answer_count":1,"score":2,"creation_date":1678932635,"question_id":75751602,"body":"<p>I created a sample modular basic microservices (customer, fraud)using spring boot 3.0.4 with IntelliJ just to test auto service discovery pattern.  All was ok until I added a 3rd microservice: eureka server with the spring cloud dependencies (version 2022.0.1).</p>\n<p>When I tried to run the application, I got the following error:</p>\n<pre><code>    SLF4J: See http://www.slf4j.org/codes.html#StaticLoggerBinder for further details.\nException in thread &quot;main&quot; java.lang.IllegalArgumentException: LoggerFactory is not a Logback LoggerContext but Logback is on the classpath. Either remove Logback or the competing implementation (class org.slf4j.helpers.NOPLoggerFactory loaded from file:/Users/apple/.m2/repository/org/slf4j/slf4j-api/1.7.33/slf4j-api-1.7.33.jar). If you are using WebLogic you will need to add 'org.slf4j' to prefer-application-packages in WEB-INF/weblogic.xml: org.slf4j.helpers.NOPLoggerFactory\n    at org.springframework.util.Assert.instanceCheckFailed(Assert.java:713)\n    at org.springframework.util.Assert.isInstanceOf(Assert.java:632)\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.getLoggerContext(LogbackLoggingSystem.java:382)\n    at org.springframework.boot.logging.logback.LogbackLoggingSystem.beforeInitialize(LogbackLoggingSystem.java:123)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationStartingEvent(LoggingApplicationListener.java:238)\n    at org.springframework.boot.context.logging.LoggingApplicationListener.onApplicationEvent(LoggingApplicationListener.java:220)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.doInvokeListener(SimpleApplicationEventMulticaster.java:172)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.invokeListener(SimpleApplicationEventMulticaster.java:165)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:139)\n    at org.springframework.context.event.SimpleApplicationEventMulticaster.multicastEvent(SimpleApplicationEventMulticaster.java:127)\n    at org.springframework.boot.context.event.EventPublishingRunListener.multicastInitialEvent(EventPublishingRunListener.java:136)\n    at org.springframework.boot.context.event.EventPublishingRunListener.starting(EventPublishingRunListener.java:75)\n    at org.springframework.boot.SpringApplicationRunListeners.lambda$starting$0(SpringApplicationRunListeners.java:54)\n    at java.base/java.lang.Iterable.forEach(Iterable.java:75)\n    at org.springframework.boot.SpringApplicationRunListeners.doWithListeners(SpringApplicationRunListeners.java:118)\n    at org.springframework.boot.SpringApplicationRunListeners.starting(SpringApplicationRunListeners.java:54)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:302)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1304)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1293)\n    at com.techronym.eurekaserver.EurekaServerApplication.main(EurekaServerApplication.java:11)\n\nProcess finished with exit code 1\n</code></pre>\n<p>Here's my parent pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.techronym.app&lt;/groupId&gt;\n  &lt;artifactId&gt;demo-app&lt;/artifactId&gt;\n    &lt;packaging&gt;pom&lt;/packaging&gt;\n    &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;modules&gt;\n        &lt;module&gt;customer&lt;/module&gt;\n      &lt;module&gt;fraud&lt;/module&gt;\n      &lt;module&gt;eureka-server&lt;/module&gt;\n    &lt;/modules&gt;\n\n    &lt;name&gt;demo-app&lt;/name&gt;\n  &lt;url&gt;https://www.techronym.com&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n    &lt;spring.boot.maven.plugin&gt;3.0.4&lt;/spring.boot.maven.plugin&gt;\n    &lt;spring.boot.dependencies.version&gt;3.0.4&lt;/spring.boot.dependencies.version&gt;\n    &lt;spring-cloud.version&gt;2022.0.1&lt;/spring-cloud.version&gt;\n\n  &lt;/properties&gt;\n\n  &lt;dependencyManagement&gt;\n\n    &lt;dependencies&gt;\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot&lt;/artifactId&gt;\n        &lt;version&gt;${spring.boot.dependencies.version}&lt;/version&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n      &lt;/dependency&gt;\n\n      &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-cloud-dependencies&lt;/artifactId&gt;\n        &lt;version&gt;${spring-cloud.version}&lt;/version&gt;\n        &lt;type&gt;pom&lt;/type&gt;\n        &lt;scope&gt;import&lt;/scope&gt;\n      &lt;/dependency&gt;\n\n    &lt;/dependencies&gt;\n  &lt;/dependencyManagement&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n      &lt;version&gt;3.0.4&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n      &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n      &lt;version&gt;1.18.24&lt;/version&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (maybe moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;plugin&gt;\n          &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n          &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n          &lt;version&gt;${spring.boot.maven.plugin}&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n<p>Eureka Server pom.xml:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n         xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n         xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;parent&gt;\n        &lt;artifactId&gt;demo-app&lt;/artifactId&gt;\n        &lt;groupId&gt;com.techronym.app&lt;/groupId&gt;\n        &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n    &lt;/parent&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n    &lt;artifactId&gt;eureka-server&lt;/artifactId&gt;\n\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;17&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;17&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.cloud&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-cloud-starter-netflix-eureka-server&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n\n&lt;/project&gt;\n</code></pre>\n<p>Eureka App:</p>\n<pre><code>package com.techronym.eurekaserver;\n\nimport org.springframework.boot.SpringApplication;\nimport org.springframework.boot.autoconfigure.SpringBootApplication;\nimport org.springframework.cloud.netflix.eureka.server.EnableEurekaServer;\n\n@SpringBootApplication\n@EnableEurekaServer\npublic class EurekaServerApplication {\n    public static void main(String[] args) {\n        SpringApplication.run(EurekaServerApplication.class, args);\n    }\n}\n</code></pre>\n<p>Dependency tree</p>\n<pre><code>com.techronym.app:demo-app:pom:1.0-SNAPSHOT\n+- org.springframework.boot:spring-boot-starter-test:jar:3.0.4:compile\n +- org.springframework.boot:spring-boot-starter:jar:3.0.4:compile\n|  |  +- org.springframework.boot:spring-boot:jar:3.0.4:compile\n |  |  |  \\- org.springframework:spring-context:jar:6.0.6:compile\n|  |  |     +- org.springframework:spring-aop:jar:6.0.6:compile\n[INFO] |  |  |     +- org.springframework:spring-beans:jar:6.0.6:compile\n[INFO] |  |  |     \\- org.springframework:spring-expression:jar:6.0.6:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-autoconfigure:jar:3.0.4:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-logging:jar:3.0.4:compile\n[INFO] |  |  |  +- ch.qos.logback:logback-classic:jar:1.4.5:compile\n[INFO] |  |  |  |  \\- ch.qos.logback:logback-core:jar:1.4.5:compile\n[INFO] |  |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.19.0:compile\n[INFO] |  |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.19.0:compile\n[INFO] |  |  |  \\- org.slf4j:jul-to-slf4j:jar:2.0.6:compile\n[INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile\n[INFO] |  |  \\- org.yaml:snakeyaml:jar:1.33:compile\n[INFO] |  +- org.springframework.boot:spring-boot-test:jar:3.0.4:compile\n[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:3.0.4:compile\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.7.0:compile\n[INFO] |  |  +- net.minidev:json-smart:jar:2.4.7:compile\n[INFO] |  |  |  \\- net.minidev:accessors-smart:jar:2.4.7:compile\n[INFO] |  |  |     \\- org.ow2.asm:asm:jar:9.1:compile\n[INFO] |  |  \\- org.slf4j:slf4j-api:jar:1.7.33:compile\n[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.0:compile\n[INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:2.1.0:compile\n[INFO] |  +- org.assertj:assertj-core:jar:3.23.1:compile\n[INFO] |  |  \\- net.bytebuddy:byte-buddy:jar:1.12.10:compile\n[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:compile\n[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.9.2:compile\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.9.2:compile\n[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:compile\n[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.9.2:compile\n[INFO] |  |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:compile\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.9.2:compile\n[INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.9.2:runtime\n[INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.9.2:runtime\n[INFO] |  +- org.mockito:mockito-core:jar:4.8.1:compile\n[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.12.16:compile\n[INFO] |  |  \\- org.objenesis:objenesis:jar:3.2:runtime\n[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:4.8.1:compile\n[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:compile\n[INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:compile\n[INFO] |  +- org.springframework:spring-core:jar:6.0.6:compile\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:6.0.6:compile\n[INFO] |  +- org.springframework:spring-test:jar:6.0.6:compile\n[INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.9.1:compile\n[INFO] \\- org.projectlombok:lombok:jar:1.18.24:compile\n[INFO] \n[INFO] ---------------------&lt; com.techronym.app:customer &gt;---------------------\n\n[INFO] Building eureka-server 1.0-SNAPSHOT                                [4/4]\n[INFO] --------------------------------[ jar ]---------------------------------\n[INFO] \n[INFO] --- maven-dependency-plugin:2.8:tree (default-cli) @ eureka-server ---\n[INFO] com.techronym.app:eureka-server:jar:1.0-SNAPSHOT\n[INFO] +- org.springframework.cloud:spring-cloud-starter-netflix-eureka-server:jar:4.0.0:compile\n[INFO] |  +- org.springframework.cloud:spring-cloud-starter:jar:4.0.1:compile\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-context:jar:4.0.1:compile\n[INFO] |  |  |  \\- org.springframework.security:spring-security-crypto:jar:6.0.1:compile\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-commons:jar:4.0.1:compile\n[INFO] |  |  \\- org.springframework.security:spring-security-rsa:jar:1.0.11.RELEASE:compile\n[INFO] |  |     \\- org.bouncycastle:bcpkix-jdk15on:jar:1.69:compile\n[INFO] |  |        +- org.bouncycastle:bcprov-jdk15on:jar:1.69:compile\n[INFO] |  |        \\- org.bouncycastle:bcutil-jdk15on:jar:1.69:compile\n[INFO] |  +- org.springframework.cloud:spring-cloud-netflix-eureka-server:jar:4.0.0:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-web:jar:3.0.0:compile\n[INFO] |  |  |  +- org.springframework.boot:spring-boot-starter-json:jar:3.0.0:compile\n[INFO] |  |  |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jdk8:jar:2.14.1:compile\n[INFO] |  |  |  |  +- com.fasterxml.jackson.datatype:jackson-datatype-jsr310:jar:2.14.1:compile\n[INFO] |  |  |  |  \\- com.fasterxml.jackson.module:jackson-module-parameter-names:jar:2.14.1:compile\n[INFO] |  |  |  +- org.springframework.boot:spring-boot-starter-tomcat:jar:3.0.0:compile\n[INFO] |  |  |  |  +- org.apache.tomcat.embed:tomcat-embed-core:jar:10.1.1:compile\n[INFO] |  |  |  |  +- org.apache.tomcat.embed:tomcat-embed-el:jar:10.1.1:compile\n[INFO] |  |  |  |  \\- org.apache.tomcat.embed:tomcat-embed-websocket:jar:10.1.1:compile\n[INFO] |  |  |  +- org.springframework:spring-web:jar:6.0.2:compile\n[INFO] |  |  |  |  \\- org.springframework:spring-beans:jar:6.0.2:compile\n[INFO] |  |  |  \\- org.springframework:spring-webmvc:jar:6.0.2:compile\n[INFO] |  |  |     +- org.springframework:spring-aop:jar:6.0.2:compile\n[INFO] |  |  |     \\- org.springframework:spring-expression:jar:6.0.2:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-actuator:jar:3.0.0:compile\n[INFO] |  |  |  +- org.springframework.boot:spring-boot-actuator-autoconfigure:jar:3.0.0:compile\n[INFO] |  |  |  |  \\- org.springframework.boot:spring-boot-actuator:jar:3.0.0:compile\n[INFO] |  |  |  +- io.micrometer:micrometer-observation:jar:1.10.2:compile\n[INFO] |  |  |  |  \\- io.micrometer:micrometer-commons:jar:1.10.2:compile\n[INFO] |  |  |  \\- io.micrometer:micrometer-core:jar:1.10.2:compile\n[INFO] |  |  |     +- org.hdrhistogram:HdrHistogram:jar:2.1.12:runtime\n[INFO] |  |  |     \\- org.latencyutils:LatencyUtils:jar:2.0.3:runtime\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-freemarker:jar:3.0.0:compile\n[INFO] |  |  |  +- org.freemarker:freemarker:jar:2.3.31:compile\n[INFO] |  |  |  \\- org.springframework:spring-context-support:jar:6.0.2:compile\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-netflix-eureka-client:jar:4.0.0:compile\n[INFO] |  |  |  +- com.netflix.eureka:eureka-client:jar:2.0.0:compile\n[INFO] |  |  |  |  +- com.netflix.netflix-commons:netflix-eventbus:jar:0.3.0:compile\n[INFO] |  |  |  |  |  +- com.netflix.netflix-commons:netflix-infix:jar:0.3.0:runtime\n[INFO] |  |  |  |  |  |  +- commons-jxpath:commons-jxpath:jar:1.3:runtime\n[INFO] |  |  |  |  |  |  +- joda-time:joda-time:jar:2.3:runtime\n[INFO] |  |  |  |  |  |  +- org.antlr:antlr-runtime:jar:3.4:runtime\n[INFO] |  |  |  |  |  |  |  +- org.antlr:stringtemplate:jar:3.2.1:runtime\n[INFO] |  |  |  |  |  |  |  \\- antlr:antlr:jar:2.7.7:runtime\n[INFO] |  |  |  |  |  |  \\- com.google.code.gson:gson:jar:2.1:runtime\n[INFO] |  |  |  |  |  \\- org.apache.commons:commons-math:jar:2.2:runtime\n[INFO] |  |  |  |  +- com.thoughtworks.xstream:xstream:jar:1.4.19:compile\n[INFO] |  |  |  |  |  \\- io.github.x-stream:mxparser:jar:1.2.2:compile\n[INFO] |  |  |  |  |     \\- xmlpull:xmlpull:jar:1.1.3.1:compile\n[INFO] |  |  |  |  +- com.netflix.servo:servo-core:jar:0.12.21:compile\n[INFO] |  |  |  |  |  \\- com.google.guava:guava:jar:19.0:compile\n[INFO] |  |  |  |  +- org.apache.httpcomponents:httpclient:jar:4.5.3:compile\n[INFO] |  |  |  |  |  \\- org.apache.httpcomponents:httpcore:jar:4.4.6:compile\n[INFO] |  |  |  |  +- commons-configuration:commons-configuration:jar:1.10:compile\n[INFO] |  |  |  |  |  \\- commons-lang:commons-lang:jar:2.6:compile\n[INFO] |  |  |  |  \\- org.codehaus.jettison:jettison:jar:1.4.0:runtime\n[INFO] |  |  |  \\- org.apache.httpcomponents.client5:httpclient5:jar:5.1.4:compile\n[INFO] |  |  |     +- org.apache.httpcomponents.core5:httpcore5:jar:5.1.5:compile\n[INFO] |  |  |     +- org.apache.httpcomponents.core5:httpcore5-h2:jar:5.1.5:compile\n[INFO] |  |  |     \\- commons-codec:commons-codec:jar:1.15:compile\n[INFO] |  |  +- com.netflix.eureka:eureka-client-jersey3:jar:2.0.0:compile\n[INFO] |  |  |  \\- org.glassfish.jersey.connectors:jersey-apache-connector:jar:3.0.5:compile\n[INFO] |  |  +- com.netflix.eureka:eureka-core-jersey3:jar:2.0.0:compile\n[INFO] |  |  |  \\- com.netflix.eureka:eureka-core:jar:2.0.0:compile\n[INFO] |  |  |     \\- jakarta.servlet:jakarta.servlet-api:jar:5.0.0:compile\n[INFO] |  |  +- org.glassfish.jersey.containers:jersey-container-servlet:jar:3.1.0:compile\n[INFO] |  |  |  +- org.glassfish.jersey.containers:jersey-container-servlet-core:jar:3.1.0:compile\n[INFO] |  |  |  +- org.glassfish.jersey.core:jersey-common:jar:3.1.0:compile\n[INFO] |  |  |  |  \\- org.glassfish.hk2:osgi-resource-locator:jar:1.0.3:compile\n[INFO] |  |  |  \\- jakarta.ws.rs:jakarta.ws.rs-api:jar:3.1.0:compile\n[INFO] |  |  +- org.glassfish.jersey.core:jersey-server:jar:3.1.0:compile\n[INFO] |  |  |  \\- jakarta.validation:jakarta.validation-api:jar:3.0.2:compile\n[INFO] |  |  +- org.glassfish.jersey.core:jersey-client:jar:3.1.0:compile\n[INFO] |  |  +- org.glassfish.jersey.inject:jersey-hk2:jar:3.1.0:compile\n[INFO] |  |  |  +- org.glassfish.hk2:hk2-locator:jar:3.0.3:compile\n[INFO] |  |  |  |  +- org.glassfish.hk2.external:aopalliance-repackaged:jar:3.0.3:compile\n[INFO] |  |  |  |  \\- org.glassfish.hk2:hk2-utils:jar:3.0.3:compile\n[INFO] |  |  |  \\- org.javassist:javassist:jar:3.28.0-GA:compile\n[INFO] |  |  +- org.glassfish.hk2:spring-bridge:jar:3.0.3:compile\n[INFO] |  |  |  +- org.glassfish.hk2:hk2-api:jar:3.0.3:compile\n[INFO] |  |  |  \\- org.springframework:spring-context:jar:5.2.4.RELEASE:compile\n[INFO] |  |  +- jakarta.inject:jakarta.inject-api:jar:2.0.1:compile\n[INFO] |  |  \\- com.fasterxml.jackson.dataformat:jackson-dataformat-xml:jar:2.14.1:compile\n[INFO] |  |     +- com.fasterxml.jackson.core:jackson-core:jar:2.14.1:compile\n[INFO] |  |     +- com.fasterxml.jackson.core:jackson-annotations:jar:2.14.1:compile\n[INFO] |  |     +- com.fasterxml.jackson.core:jackson-databind:jar:2.14.1:compile\n[INFO] |  |     +- org.codehaus.woodstox:stax2-api:jar:4.2.1:compile\n[INFO] |  |     \\- com.fasterxml.woodstox:woodstox-core:jar:6.4.0:compile\n[INFO] |  +- org.springframework.cloud:spring-cloud-starter-loadbalancer:jar:4.0.1:compile\n[INFO] |  |  +- org.springframework.cloud:spring-cloud-loadbalancer:jar:4.0.1:compile\n[INFO] |  |  |  +- io.projectreactor:reactor-core:jar:3.5.2:compile\n[INFO] |  |  |  |  \\- org.reactivestreams:reactive-streams:jar:1.0.4:compile\n[INFO] |  |  |  \\- io.projectreactor.addons:reactor-extra:jar:3.5.0:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-cache:jar:3.0.2:compile\n[INFO] |  |  \\- com.stoyanr:evictor:jar:1.0.0:compile\n[INFO] |  \\- org.glassfish.jaxb:jaxb-runtime:jar:4.0.1:compile\n[INFO] |     \\- org.glassfish.jaxb:jaxb-core:jar:4.0.1:compile\n[INFO] |        +- org.eclipse.angus:angus-activation:jar:1.0.0:runtime\n[INFO] |        +- org.glassfish.jaxb:txw2:jar:4.0.1:compile\n[INFO] |        \\- com.sun.istack:istack-commons-runtime:jar:4.1.1:compile\n[INFO] +- org.springframework.boot:spring-boot-starter-test:jar:3.0.4:compile\n[INFO] |  +- org.springframework.boot:spring-boot-starter:jar:3.0.4:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot:jar:3.0.4:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-autoconfigure:jar:3.0.4:compile\n[INFO] |  |  +- org.springframework.boot:spring-boot-starter-logging:jar:3.0.4:compile\n[INFO] |  |  |  +- ch.qos.logback:logback-classic:jar:1.4.5:compile\n[INFO] |  |  |  |  \\- ch.qos.logback:logback-core:jar:1.4.5:compile\n[INFO] |  |  |  +- org.apache.logging.log4j:log4j-to-slf4j:jar:2.19.0:compile\n[INFO] |  |  |  |  \\- org.apache.logging.log4j:log4j-api:jar:2.19.0:compile\n[INFO] |  |  |  \\- org.slf4j:jul-to-slf4j:jar:2.0.6:compile\n[INFO] |  |  +- jakarta.annotation:jakarta.annotation-api:jar:2.1.1:compile\n[INFO] |  |  \\- org.yaml:snakeyaml:jar:1.33:compile\n[INFO] |  +- org.springframework.boot:spring-boot-test:jar:3.0.4:compile\n[INFO] |  +- org.springframework.boot:spring-boot-test-autoconfigure:jar:3.0.4:compile\n[INFO] |  +- com.jayway.jsonpath:json-path:jar:2.7.0:compile\n[INFO] |  |  +- net.minidev:json-smart:jar:2.4.7:compile\n[INFO] |  |  |  \\- net.minidev:accessors-smart:jar:2.4.7:compile\n[INFO] |  |  |     \\- org.ow2.asm:asm:jar:9.1:compile\n[INFO] |  |  \\- org.slf4j:slf4j-api:jar:1.7.33:compile\n[INFO] |  +- jakarta.xml.bind:jakarta.xml.bind-api:jar:4.0.0:compile\n[INFO] |  |  \\- jakarta.activation:jakarta.activation-api:jar:2.1.0:compile\n[INFO] |  +- org.assertj:assertj-core:jar:3.23.1:compile\n[INFO] |  |  \\- net.bytebuddy:byte-buddy:jar:1.12.10:compile\n[INFO] |  +- org.hamcrest:hamcrest:jar:2.2:compile\n[INFO] |  +- org.junit.jupiter:junit-jupiter:jar:5.9.2:compile\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-api:jar:5.9.2:compile\n[INFO] |  |  |  +- org.opentest4j:opentest4j:jar:1.2.0:compile\n[INFO] |  |  |  +- org.junit.platform:junit-platform-commons:jar:1.9.2:compile\n[INFO] |  |  |  \\- org.apiguardian:apiguardian-api:jar:1.1.2:compile\n[INFO] |  |  +- org.junit.jupiter:junit-jupiter-params:jar:5.9.2:compile\n[INFO] |  |  \\- org.junit.jupiter:junit-jupiter-engine:jar:5.9.2:runtime\n[INFO] |  |     \\- org.junit.platform:junit-platform-engine:jar:1.9.2:runtime\n[INFO] |  +- org.mockito:mockito-core:jar:4.8.1:compile\n[INFO] |  |  +- net.bytebuddy:byte-buddy-agent:jar:1.12.16:compile\n[INFO] |  |  \\- org.objenesis:objenesis:jar:3.2:runtime\n[INFO] |  +- org.mockito:mockito-junit-jupiter:jar:4.8.1:compile\n[INFO] |  +- org.skyscreamer:jsonassert:jar:1.5.1:compile\n[INFO] |  |  \\- com.vaadin.external.google:android-json:jar:0.0.20131108.vaadin1:compile\n[INFO] |  +- org.springframework:spring-core:jar:6.0.6:compile\n[INFO] |  |  \\- org.springframework:spring-jcl:jar:6.0.6:compile\n[INFO] |  +- org.springframework:spring-test:jar:6.0.6:compile\n[INFO] |  \\- org.xmlunit:xmlunit-core:jar:2.9.1:compile\n[INFO] \\- org.projectlombok:lombok:jar:1.18.24:compile\n</code></pre>\n<p>Please what am I doing wrong?</p>\n"},{"tags":["java","ffmpeg","java-8"],"comments":[{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"edited":false,"comment_id":133625685,"body":"Please provide the full exception stacktrace. The &quot;Could not initialize class org.bytedeco.ffmpeg.global.avutil&quot; suggests that something went wrong while loading the class, the details of that are likely deeper in the exception stacktrace."},{"owner":{"user_id":14564074,"display_name":"noob234"},"edited":false,"comment_id":133627220,"body":"Sure, here it is: <a href=\"https://pastebin.com/2vicmTnr\" rel=\"nofollow noreferrer\">pastebin.com/2vicmTnr</a>"}],"answers":[{"owner":{"user_id":8041003,"display_name":"John Williams"},"up_vote_count":1,"is_accepted":true,"creation_date":1678904006,"answer_id":75748613,"body":"<p>You need a dependency to the jar containing <code>org.bytedeco.ffmpeg.global.avutil</code></p>\n<p>Replace</p>\n<pre><code>implementation 'org.bytedeco:javacv:1.5.8'\n</code></pre>\n<p>With</p>\n<pre><code>implementation 'org.bytedeco:javacv-platform:1.5.8'\n</code></pre>\n<p>See <a href=\"https://github.com/bytedeco/javacv/#downloads\" rel=\"nofollow noreferrer\">bytedeco downloads page</a></p>\n"}],"owner":{"user_id":14564074,"display_name":"noob234"},"view_count":152,"up_vote_count":2,"accepted_answer_id":75748613,"answer_count":1,"score":2,"creation_date":1678900618,"question_id":75748062,"body":"<p>I am trying to get the video duration with this library <code>import org.bytedeco.javacv.FFmpegFrameGrabber;</code></p>\n<p>When I upload this mp4 video (<a href=\"https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4\" rel=\"nofollow noreferrer\">https://sample-videos.com/video123/mp4/720/big_buck_bunny_720p_1mb.mp4</a>), I get this error message:\n<code>java.lang.NoClassDefFoundError: Could not initialize class org.bytedeco.ffmpeg.global.avutil</code></p>\n<p>It will break when trying to get the 'grabber':</p>\n<pre class=\"lang-java prettyprint-override\"><code>private void videoInfo(MultipartFile file) {\n    try (FFmpegFrameGrabber grabber = new FFmpegFrameGrabber(file.getInputStream())) { // on this line it will break :(\n        grabber.start();\n        long durationMs = grabber.getLengthInTime();\n    } catch (FrameGrabber.Exception e) {\n        throw new RuntimeException(e);\n    } catch (IOException e) {\n        throw new RuntimeException(e);\n    }\n}\n</code></pre>\n<p>This is my build.gradle:</p>\n<pre><code>plugins {\n    id 'java'\n    id 'org.springframework.boot' version '2.7.9'\n    id 'io.spring.dependency-management' version '1.0.15.RELEASE'\n}\n\ngroup = 'com.nob234'\nversion = '0.0.1-SNAPSHOT'\n\nconfigurations {\n    compileOnly {\n        extendsFrom annotationProcessor\n    }\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation 'org.springframework.boot:spring-boot-starter-web'\n    compileOnly 'org.projectlombok:lombok'\n    annotationProcessor 'org.projectlombok:lombok'\n    testImplementation 'org.springframework.boot:spring-boot-starter-test'\n    implementation 'org.springdoc:springdoc-openapi-ui:1.6.9'\n    implementation 'org.springframework.boot:spring-boot-starter-data-jpa'\n    runtimeOnly 'org.postgresql:postgresql'\n    // for logging\n    implementation 'org.slf4j:slf4j-api:1.7.30'\n    implementation 'org.slf4j:jcl-over-slf4j:1.7.30'\n    implementation 'org.slf4j:log4j-over-slf4j:1.7.30'\n    implementation 'ch.qos.logback:logback-classic:1.2.3'\n    implementation 'org.bytedeco:javacv:1.5.8'\n}\n\ntasks.named('test') {\n    useJUnitPlatform()\n}\n</code></pre>\n<p>This is my ffmpeg version:</p>\n<pre class=\"lang-none prettyprint-override\"><code>ffmpeg version 6.0-full_build-www.gyan.dev Copyright (c) 2000-2023 the FFmpeg developers\nbuilt with gcc 12.2.0 (Rev10, Built by MSYS2 project)\nconfiguration: --enable-gpl --enable-version3 --enable-static --disable-w32threads --disable-autodetect --enable-fontconfig --enable-iconv --enable-gnutls --enable-libxml2 --enable-gmp --enable-bzlib --enable-lzma --enable-libsnappy --enable-zlib --enable-librist --enable-libsrt --enable-libssh --enable-libzmq --enable-avisynth --enable-libbluray --enable-libcaca --enable-sdl2 --enable-libaribb24 --enable-libdav1d --enable-libdavs2 --enable-libuavs3d --enable-libzvbi --enable-librav1e --enable-libsvtav1 --enable-libwebp --enable-libx264 --enable-libx265 --enable-libxavs2 --enable-libxvid --enable-libaom --enable-libjxl --enable-libopenjpeg --enable-libvpx --enable-mediafoundation --enable-libass --enable-frei0r --enable-libfreetype --enable-libfribidi --enable-liblensfun --enable-libvidstab --enable-libvmaf --enable-libzimg --enable-amf --enable-cuda-llvm --enable-cuvid --enable-ffnvcodec --enable-nvdec --enable-nvenc --enable-d3d11va --enable-dxva2 --enable-libvpl --enable-libshaderc --enable-vulkan --enable-libplacebo --enable-opencl --enable-libcdio --enable-libgme --enable-libmodplug --enable-libopenmpt --enable-libopencore-amrwb --enable-libmp3lame --enable-libshine --enable-libtheora --enable-libtwolame --enable-libvo-amrwbenc --enable-libilbc --enable-libgsm --enable-libopencore-amrnb --enable-libopus --enable-libspeex --enable-libvorbis --enable-ladspa --enable-libbs2b --enable-libflite --enable-libmysofa --enable-librubberband --enable-libsoxr --enable-chromaprint\nlibavutil      58.  2.100 / 58.  2.100\nlibavcodec     60.  3.100 / 60.  3.100\nlibavformat    60.  3.100 / 60.  3.100\nlibavdevice    60.  1.100 / 60.  1.100\nlibavfilter     9.  3.100 /  9.  3.100\nlibswscale      7.  1.100 /  7.  1.100\nlibswresample   4. 10.100 /  4. 10.100\nlibpostproc    57.  1.100 / 57.  1.100\n</code></pre>\n<p>Please keep in mind that I use Java 8 in this project and I hope this issue is reproducible. If you want more info please leave a comment.</p>\n"},{"tags":["java","algorithm"],"comments":[{"owner":{"user_id":7575111,"display_name":"NullDev"},"edited":false,"comment_id":133601936,"body":"a.) what have you tried so far? can you show any code? b.) you tagged both java and javascript. which one is it?"},{"owner":{"user_id":12255620,"display_name":"MBobrik"},"edited":false,"comment_id":133601959,"body":"llook up <a href=\"https://en.wikipedia.org/wiki/K-means_clustering\" rel=\"nofollow noreferrer\">en.wikipedia.org/wiki/K-means_clustering</a> ;-)"},{"owner":{"user_id":12763086,"display_name":"dean734"},"edited":false,"comment_id":133601994,"body":"I removed JS code though both would work for us. I didn&#39;t write any code yet as I feel I&#39;m missing something very basic and it&#39;s not as simple as I make it. Will write my solution shortly if it helps."},{"owner":{"user_id":12763086,"display_name":"dean734"},"edited":false,"comment_id":133602070,"body":"@MBobrik Yes, I&#39;ve seen that which is why I feel I&#39;m missing something basic here with my solution which is far from np-hard..."},{"owner":{"user_id":12255620,"display_name":"MBobrik"},"edited":false,"comment_id":133602125,"body":"quote &quot;The problem is computationally difficult (NP-hard); however, <i>efficient heuristic algorithms converge quickly to a local optimum</i>.&quot; ... so you basically got one of those heuristic solutions."},{"owner":{"user_id":585411,"display_name":"btilly"},"edited":false,"comment_id":133605826,"body":"@MBobrik No, in one dimension this is NOT NP-hard. In 2 dimensions it is."},{"owner":{"user_id":12255620,"display_name":"MBobrik"},"edited":false,"comment_id":133608749,"body":"@btilly to be honest, never thought about the 1D special case in detail - but never mind, others did - just found this one <a href=\"https://stackoverflow.com/questions/11513484/1d-number-array-clustering\" title=\"1d number array clustering\">stackoverflow.com/questions/11513484/1d-number-array-cluster&zwnj;&#8203;ing</a>"}],"answers":[{"owner":{"user_id":9392209,"display_name":"Animalz"},"up_vote_count":0,"is_accepted":false,"creation_date":1678806091,"answer_id":75734877,"body":"<p>The idea of sorting first is correct. Then you have to create K groups from the sorted array, which you can do as following: If there is any deviation you can play around the &quot;border elements&quot; of each group to make the result better.</p>\n<p>For example: N=16, K=3. Now there are some possible outcomes. First group 5 memebers, second group 6 members and last group again 5 members, but there are other possibilties to create your groups. Now you need to find and evaluate all the possibilities, and pick out the best one. For example, if shape [5,5,6] is better than shape [5,6,5] you move the last element (&quot;border element&quot;) from the second group into the third group.</p>\n<p>If there is no deviation at all, for example N=100, K=10, there is only one possibility you can choose, and that is the best one in this case.</p>\n"},{"owner":{"user_id":585411,"display_name":"btilly"},"up_vote_count":1,"is_accepted":false,"creation_date":1678819680,"answer_id":75737228,"body":"<p>You are missing a complication.</p>\n<p>Suppose that <code>k</code> is even and <code>n = 2.5*k</code>.  Then half your groups are of size 2 and half of size 3.  With a naïve approach, you have to consider the <code>k choose 2 = O(2^k / sqrt(k))</code> possible ways to decide which are of size 2 and which are of size 3.  This will take exponential time.</p>\n<p>Let <code>m</code> be the group size, rounded down.  Then the optimal division of the first <code>i</code> items into <code>j</code> groups will be to have either <code>m</code> elements in the last group and divide the first <code>i-m</code> items into <code>j-1</code> groups, or to have <code>m+1</code> elements in the last group and divide the first <code>i-m-1</code> items into <code>j-1</code> groups.  You can calculate that with a recursive function which returns a pair for <code>(cost, linkedListOfChoices)</code>.</p>\n<p>Add a caching layer to that recursion and it will run in polynomial time.  This is called top-down dynamic programming.</p>\n<p>Going from your optimal <code>linkedListOfChoices</code> for dividing the whole list into <code>k</code> groups to the actual groups should be straightforward.  Here is an example.</p>\n<p>Suppose we want to divide <code>[0.1, 0.2, 0.4, 0.5, 0.6, 0.8, 0.9, 1.0, 2.1, 2.3]</code> into <code>4</code> groups.  You should get a linked list corresponding to (but maybe with a very different representation):</p>\n<pre><code>[8, 9,\n    [5, 7,\n        [2, 4,\n            [0, 1,\n                null]]]]]\n</code></pre>\n<p>From which your groups (read inside out, turn indices back into numbers) are:</p>\n<pre><code>[[0.1, 0.2], [0.4, 0.5, 0.6], [0.8, 0.9, 1.0], [2.1, 2.3]]\n</code></pre>\n"}],"owner":{"user_id":12763086,"display_name":"dean734"},"view_count":108,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1678804330,"question_id":75734532,"body":"<p>Need to split a list of positive values into a K groups. The groups should be almost equal in size (number of values), but the values of items in each group have the minimal standard deviation. (Think grouping products by similar pricing).</p>\n<p>I was thinking sort the values, then split by order into K groups gets me very close and then only if the groups sizes aren't all equals do one-pass to see if the extra items moved from one group to the next creates a better result.\nBut I feel like I'm missing something big here and it should be more complicated than that.</p>\n"},{"tags":["java","dataframe-ec"],"answers":[{"owner":{"user_id":14312146,"display_name":"zakhav"},"up_vote_count":1,"is_accepted":true,"creation_date":1678673416,"answer_id":75717536,"body":"<p>You can add your custom functions to the dataframe-ec expression DSL at runtime. Then these functions can be used just like those that come with the library out of the box in expressions like computed columns, filters, and so on. So you will be able to write code that looks like:</p>\n<pre><code>dataFrame.addColumn(&quot;DaysToEvent&quot;, &quot;daysBetween(toDate(2023, 3, 11), StartDate)&quot;)\n</code></pre>\n<p>(this is a bit more streamlined than what you have in your example: you can call <code>addColumn</code> directly on a dataframe object and you don’t need to specify the type of a computed column as it is inferred from the expression you provide).</p>\n<p>To add a function (in this case <code>daysBetween</code>) to the expression DSL you need to call the <code>addFunctionDescriptor</code> method on the <code>BuiltInFunctions</code> class.\nYou can look at the existing implementations in <code>BuiltInFunctions</code> (which also has examples of dealing with parameters, different types, validations, etc.) and also take a look at <code>RuntimeAddedFunctionTest</code>. In your case something like this should work:</p>\n<pre><code>BuiltInFunctions.addFunctionDescriptor(new IntrinsicFunctionDescriptor(&quot;daysBetween&quot;, Lists.immutable.of(&quot;date1&quot;, &quot;date2&quot;))\n    {\n        @Override\n        public Value evaluate(EvalContext context)\n        {\n            LocalDate date1 = ((DateValue) context.getVariable(&quot;date1&quot;)).dateValue();\n            LocalDate date2 = ((DateValue) context.getVariable(&quot;date2&quot;)).dateValue();\n\n            return new LongValue(ChronoUnit.DAYS.between(date1, date2));\n        }\n\n        @Override\n        public ValueType returnType(ListIterable&lt;ValueType&gt; paraValueTypes)\n        {\n            return LONG;\n        }\n    }\n);\n</code></pre>\n<p><strong>Note:</strong> I am the original author of the dataframe-ec library</p>\n"}],"owner":{"user_id":1570415,"display_name":"Donald Raab"},"view_count":66,"up_vote_count":2,"accepted_answer_id":75717536,"answer_count":1,"score":2,"creation_date":1678592288,"question_id":75710932,"body":"<p>I have defined a column <code>StartDate</code> as follows for a DataFrame I am loading using the <a href=\"https://github.com/vmzakharov/dataframe-ec\" rel=\"nofollow noreferrer\">dataframe-ec</a> library.</p>\n<pre><code>schema.addColumn(&quot;StartDate&quot;, ValueType.DATE); \n</code></pre>\n<p>I would like to add a computed column named <code>DaysToEvent</code> but am unsure how to define a function leveraging the Java time library so the following expression code will work.</p>\n<pre><code>dataFrame.attachColumn(\n        dataFrame.createComputedColumn(\n                &quot;DaysToEvent&quot;,\n                ValueType.LONG,\n                &quot;daysBetween(toDate(2023, 3, 11), StartDate)&quot;));\n</code></pre>\n<p>I saw there was a built-in function named <code>withinDays</code> but am hoping to not have to change the library to add this function. I tried defining the expression using Java Code inline but that didn't work.</p>\n<pre><code>dataFrame.attachColumn(\n        dataFrame.createComputedColumn(\n                &quot;DaysToEvent&quot;,\n                ValueType.LONG,\n                &quot;java.time.temporal.ChronoUnit.DAYS.between(toDate(2023, 3, 11), StartDate)&quot;));\n\n</code></pre>\n"},{"tags":["java","algorithm","file","search"],"comments":[{"owner":{"user_id":1553851,"display_name":"shmosel"},"edited":false,"comment_id":133534077,"body":"<i>search in a csv file for a string that has a column with a prefix entered by the user</i> is not a very clear requirement. Can you provide example input/output?"},{"owner":{"user_id":14607529,"display_name":"ODDminus1"},"edited":false,"comment_id":133534256,"body":"It sounds like sorting the rows ahead of the search could solve the problem if you are allowed to handle the stored data. Either that or creating some index."},{"owner":{"user_id":21368032,"display_name":"Ymrik"},"edited":false,"comment_id":133534555,"body":"@shmosel, question updated, added example"},{"owner":{"user_id":21368032,"display_name":"Ymrik"},"edited":false,"comment_id":133534582,"body":"@ODDminus1, unforunately it is not available to edit stored data."},{"owner":{"user_id":1553851,"display_name":"shmosel"},"edited":false,"comment_id":133534927,"body":"Got it, thanks. Does &quot;not reading all lines from file&quot; imply that we may repeatedly read parts of the file? Also, is the column only specified once?"},{"owner":{"user_id":14607529,"display_name":"ODDminus1"},"edited":false,"comment_id":133534958,"body":"Okay, but creating an index which only stores the column which you are querying and a reference to the line number in the csv should be a solution which meets the criteria. E.g. <code>Map&lt;String, List&lt;Integer&gt;&gt;</code> which holds all the line numbers for a searchable value. Then you only need to build the map by reading the full file once, and you can later find the values in the map to find a narrow way to query the csv."},{"owner":{"user_id":1921273,"display_name":"MrSmith42"},"edited":false,"comment_id":133535157,"body":"@ODDminus1: If you create such an index for each column (which you need to allow searches for each column) you practically stored all data of the file in memory."},{"owner":{"user_id":3386109,"display_name":"user3386109"},"edited":false,"comment_id":133535338,"body":"If the prefix is &quot;Ma&quot;, will that match rows 2 and 4, or just 4?"},{"owner":{"user_id":21368032,"display_name":"Ymrik"},"edited":false,"comment_id":133536956,"body":"@shmosel, the column number is specified once, only the prefix changes during the subsequent search. The algorithm can read some blocks of the file repeatedly, the main condition is not to read the whole file."},{"owner":{"user_id":14607529,"display_name":"ODDminus1"},"edited":false,"comment_id":133536971,"body":"@MrSmith42 you can exclude all columns which isn&#39;t a part of the index, and if the search term is just for a prefix of a maximum certain size, you are saving some data there as well. With the given example, you aren&#39;t really saving anything, but with a larger csv, this could become significant. At any cost, it fits the criteria of not storing all the data."},{"owner":{"user_id":21368032,"display_name":"Ymrik"},"edited":false,"comment_id":133537138,"body":"@ODDminus1, we will have to fill in the Map for each prefix, which means going through the entire file again.  E.g. for the first search we filled Map for one prefix, now we can go through this map to find suitable lines from file. But if search again for another prefix we will have to read all file again, to find suitable line numbers for this prefix and put it in the Map. So for every search we will read all file again. Did I understand your solution correctly?"},{"owner":{"user_id":21368032,"display_name":"Ymrik"},"edited":false,"comment_id":133537197,"body":"@user3386109, prefix &quot;Ma&quot; will only match row 4."},{"owner":{"user_id":21368032,"display_name":"Ymrik"},"edited":false,"comment_id":133537471,"body":"@ODDminus1, I think that the only correct solution to this problem may be the answer proposed by icelop, in which a cache of a certain size is used. This cache will be updated with each search (the Least Recently Used or a Fixed-Size cache). In this case, we really won&#39;t store the whole file, but only part of it. And also we will not read the entire file again, because some part of it will already be stored in memory."},{"owner":{"user_id":4688321,"display_name":"kiner_shah"},"edited":false,"comment_id":133538397,"body":"Row count = cache size. Row&#39;s column value = cache entry (key-value pair of row number and column value). Then, for searching use some data structure like Trie."},{"owner":{"user_id":14607529,"display_name":"ODDminus1"},"edited":false,"comment_id":133540894,"body":"@Ymrik, is the prefix of a set maximum size, or could it be any length - potentially the entire string? If the former, I could throw together an answer with some code examples."},{"owner":{"user_id":1553851,"display_name":"shmosel"},"edited":false,"comment_id":133546408,"body":"Then you can hack the requirements by loading half the file into memory and reading half from disk. But I don&#39;t imagine that&#39;s the intent."}],"answers":[{"owner":{"user_id":3386109,"display_name":"user3386109"},"up_vote_count":0,"is_accepted":false,"creation_date":1678508658,"answer_id":75702761,"body":"<p>I would create an index of three-letter prefixes for the selected column. There are only 17576 three-letter prefixes (ignoring case) so the index would have 17576 entries.\nEach entry in the index would be a list of offsets into the file for the lines that match the prefix.</p>\n<p>For example, if the file contains this:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">Line from the file</th>\n<th style=\"text-align: left;\">Offset into the file</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">1,&quot;Sara&quot;,&quot;Common Algorithms&quot;</td>\n<td style=\"text-align: left;\">0</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">2,&quot;Adam&quot;,&quot;Computer Science&quot;</td>\n<td style=\"text-align: left;\">29</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">3,&quot;Liza&quot;,&quot;Condensed Matter Physics&quot;</td>\n<td style=\"text-align: left;\">57</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">4,&quot;Bob&quot;,&quot;Electrochemistry&quot;</td>\n<td style=\"text-align: left;\">93</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">5,&quot;Eva&quot;,&quot;Material Culture&quot;</td>\n<td style=\"text-align: left;\">120</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Then the index would contain this:</p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th style=\"text-align: left;\">prefix</th>\n<th style=\"text-align: left;\">offsets</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td style=\"text-align: left;\">&quot;Com&quot;</td>\n<td style=\"text-align: left;\">0, 29</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">&quot;Con&quot;</td>\n<td style=\"text-align: left;\">57</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">&quot;Ele&quot;</td>\n<td style=\"text-align: left;\">93</td>\n</tr>\n<tr>\n<td style=\"text-align: left;\">&quot;Mat&quot;</td>\n<td style=\"text-align: left;\">120</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>This is a variation on a <a href=\"https://en.wikipedia.org/wiki/Cache_placement_policies#Set-associative_cache\" rel=\"nofollow noreferrer\">set-associative cache</a> where the three-letter prefix is the set identifier, and the file offsets are the data. The cache can be implemented as a dictionary where the key is the prefix, and the value is a list of file offsets.</p>\n<p>When the search request contains a three-letter prefix, simply get the list for that prefix from the cache, seek to each offset in the file, and read the line.</p>\n<p>When the search request contains a two-letter prefix, it matches up to 26 three-letter prefixes. So check the dictionary for each of the possible matching three-letter prefixes, and read the lines for each of those.\nFor the example above, the two-letter prefix &quot;Co&quot; matches &quot;Com&quot; and &quot;Con&quot;, so the search result contains three lines, starting at offsets 0, 29, and 57. (A one-letter prefix matches up to 676 three-letter prefixes.)</p>\n<p>When the search request contains a four-letter (or longer) prefix, read all of the lines for the corresponding three-letter prefix, but only return those lines that match the given prefix. For the example above, the four-letter prefix &quot;Comp&quot; would read both lines for &quot;Com&quot;, but only return the line <code>2,&quot;Adam&quot;,&quot;Computer Science&quot;</code>.</p>\n"},{"owner":{"user_id":1553851,"display_name":"shmosel"},"up_vote_count":1,"is_accepted":true,"creation_date":1678600314,"answer_id":75711282,"body":"<p>You can construct an index that maps each value in the specified column to its line offset in the file, and then jump to the line using <code>RandomAccessFile</code>.</p>\n<pre><code>public static void main(String[] args) throws IOException {\n    Scanner in = new Scanner(System.in);\n\n    System.out.print(&quot;File: &quot;);\n    String path = in.nextLine();\n\n    System.out.print(&quot;Column: &quot;);\n    int col = in.nextInt();\n    in.nextLine();\n\n    Map&lt;Long, String&gt; index = index(path, col);\n\n    while (true) {\n        System.out.print(&quot;Prefix: &quot;);\n        String prefix = in.nextLine();\n        if (prefix.equals(&quot;end&quot;)) {\n            return;\n        }\n\n        try (RandomAccessFile file = new RandomAccessFile(path, &quot;r&quot;)) {\n            for (Map.Entry&lt;Long, String&gt; line : index.entrySet()) {\n                if (line.getValue().startsWith(prefix)) {\n                    file.seek(line.getKey());\n                    System.out.println(file.readLine());\n                }\n            }\n        }\n    }\n}\n\nprivate static Map&lt;Long, String&gt; index(String file, int col) throws IOException {\n    Map&lt;Long, String&gt; index = new LinkedHashMap&lt;&gt;();\n    long offset = 0;\n    for (String line : Files.readAllLines(Paths.get(file))) {\n        String value = line.split(&quot;,&quot;)[col - 1]\n                .replaceAll(&quot;^ *\\&quot;|\\&quot; *$&quot;, &quot;&quot;);\n        index.put(offset, value);\n        offset += line.length() + System.lineSeparator().length();\n    }\n    return index;\n}\n</code></pre>\n<p>To keep things simple, I took the liberty of assuming lines don't contain nested quotes or commas and that we're using the system line separator. But feel free to adjust as necessary.</p>\n<p>Also note that the map is not really a map so much as a list of entries. The column is stored as the value in case it contains duplicates. <code>Map</code> isn't designed for prefix searching anyway, but it shouldn't matter much unless you're dealing with huge files. You can optimize with a trie if necessary, but I'll leave that as an exercise for the reader.</p>\n"}],"owner":{"user_id":21368032,"display_name":"Ymrik"},"view_count":102,"up_vote_count":2,"accepted_answer_id":75711282,"answer_count":2,"score":2,"creation_date":1678429148,"question_id":75692819,"body":"<p>I am implementing an algorithm that will search in a csv file for a string that has a column with a prefix entered by the user. After finding the first search result, the user can enter a different prefix to perform a second search. The column number is specified only once, and only the prefix is allowed to be changed during the subsequent search. This will continue until the user enters &quot;end&quot;.</p>\n<p><strong>Example of search:</strong></p>\n<p><strong>File Data:</strong></p>\n<pre><code>1, &quot;Adam&quot;, &quot;Computer Science&quot;\n2, &quot;Liza&quot;, &quot;Condensed Matter Physics&quot;\n3, &quot;Bob&quot;, &quot;Electrochemistry&quot;\n4, &quot;Eva&quot;, &quot;Material Culture&quot;\n</code></pre>\n<p><strong>Search parameters:</strong></p>\n<pre><code>column: 3, prefix: &quot;Co&quot;\n</code></pre>\n<p><strong>Search result:</strong></p>\n<pre><code>1, &quot;Adam&quot;, &quot;Computer Science&quot;\n2, &quot;Liza&quot;, &quot;Condensed Matter Physics&quot;\n</code></pre>\n<p><strong>My algorithm must meet specific conditions:</strong></p>\n<ul>\n<li>not reading all lines from file at each search</li>\n<li>not store all file data in memory (dont matter if it is bytes array or any other structure which contains all file data)</li>\n<li>not edit file and not create other files (also not use db)</li>\n</ul>\n<p>It turns out that with each search operation we have to process the entire file, because any string in file can have the specified prefix. How can this be implemented without violating the above conditions? Maybe you know algorithm that can be used in this case?</p>\n<p>According to my guesses, we will need to process the entire file anyway. This means either reading all the lines from it at each search, or storing it completely in memory in order to exclude access to the file and work with this structure. Both of these options violate the condition of the problem.</p>\n"},{"tags":["java","spring-boot","maven","classloader","maven-plugin"],"answers":[{"owner":{"user_id":1384297,"display_name":"Andy Wilkinson"},"up_vote_count":1,"is_accepted":true,"creation_date":1678373185,"answer_id":75686167,"body":"<p>You can access the dependencies by calling <code>project.getArtifacts()</code>. From its javadoc:</p>\n<blockquote>\n<p>All dependencies that this project has, including transitive ones. Contents are lazily populated, so depending on what phases have run dependencies in some scopes won't be included. eg. if only compile phase has run, dependencies with scope test won't be included.</p>\n</blockquote>\n<p>You can use attributes on <code>@Mojo</code> to control the dependencies that are available. Specifically, you need to set both <code>requiresDependencyResolution</code> and <code>requiresDependencyCollection</code> to <code>ResolutionScope.TEST</code>.</p>\n"}],"owner":{"user_id":2667662,"display_name":"Stijn Hooft"},"view_count":37,"up_vote_count":2,"accepted_answer_id":75686167,"answer_count":1,"score":2,"creation_date":1678354575,"question_id":75682740,"body":"<p>I'm trying to develop a Maven plugin that looks for certain classes and generates specific documentation for them.\nI've built a POC as a unit test. I'm trying to convert that now to a Maven plugin.</p>\n<p>The test code has access to <strong>the classes of the project + the classes of any dependency</strong>.\nI'd like to have that &quot;same classloader&quot; (or a classloader with the same access) available in my Maven plugin.</p>\n<p>Is this possible?</p>\n<h4>Getting access to the project classes</h4>\n<p>Creating a classloader that contains the classes of the project is doable:</p>\n<pre><code>@Mojo(name = &quot;tao-generator&quot;, defaultPhase = LifecyclePhase.INSTALL)\npublic class TaoGeneratorMojo extends AbstractMojo {\n\n    @Parameter(defaultValue = &quot;${project}&quot;, required = true, readonly = true)\n    MavenProject project;\n\n    ...\n\n    @SneakyThrows\n    private ClassLoader getClassLoader(MavenProject project) {\n        List&lt;URL&gt; runtimeUrls = new ArrayList&lt;&gt;();\n        List&lt;String&gt; runtimeClasspathElements = project.getRuntimeClasspathElements();\n        for (int i = 0; i &lt; runtimeClasspathElements.size(); i++) {\n            String element = runtimeClasspathElements.get(i);\n            runtimeUrls.add(new File(element).toURI().toURL());\n        }\n\n        URL[] array = new URL[runtimeUrls.size()];\n        array = runtimeUrls.toArray(array);\n\n        return new URLClassLoader(array,\n                Thread.currentThread().getContextClassLoader());\n    }\n</code></pre>\n<h4>Getting access to the dependencies' classes</h4>\n<p>I haven't figured out how to create a classloader that has access to the dependencies classes. Can I use a similar technique, starting from <code>MavenProject project</code>?</p>\n<h4>Another angle: loading classes from a fat Spring Boot jar</h4>\n<p>I've also tried to load the classes directly from the generated fat Spring Boot jar. That doesn't work with a simple URLClassLoader, since that classloader isn't able to load classes from nested jars. Maybe this could be the starting point of another angle to make this work?</p>\n"},{"tags":["java","java-time","localdate","period","date-difference"],"answers":[{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"up_vote_count":1,"is_accepted":false,"creation_date":1678349035,"answer_id":75681860,"body":"<p>The &quot;problem&quot; is the way <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/Period.html#between(java.time.LocalDate,java.time.LocalDate)\" rel=\"nofollow noreferrer\"><code>Period.between</code></a> performs its calculation:</p>\n<blockquote>\n<p>The start date is included, but the end date is not. The period is\ncalculated by removing complete months, then calculating the remaining\nnumber of days, adjusting to ensure that both have the same sign. The\nnumber of months is then split into years and months based on a 12\nmonth year. A month is considered if the end day-of-month is greater\nthan or equal to the start day-of-month. For example, from 2010-01-15\nto 2011-03-18 is one year, two months and three days.</p>\n</blockquote>\n<p>This results in 2023-01-28 until 2023-01-01 counting as 1 month and 1 day (P1M1D), but so will 2023-01-29, 30, and 31. This is because 2023-01-31 plus 1 month is 2023-02-31, which is invalid, so it uses 2023-02-28 (and same for 29 and 30, and of course 28). In other words, there is 1 full month, which ends on 2023-02-28, and then there are 9 more days until 2023-03-09 (exclusive).</p>\n<p>This conforms to the behaviour documented for <a href=\"https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/time/LocalDate.html#plusMonths(long)\" rel=\"nofollow noreferrer\"><code>LocalDate.plusMonths</code></a>:</p>\n<blockquote>\n<p>This method adds the specified amount to the months field in three\nsteps:</p>\n<ol>\n<li>Add the input months to the month-of-year field</li>\n<li>Check if the resulting date would be invalid</li>\n<li>Adjust the day-of-month to the last valid day if necessary</li>\n</ol>\n<p>For example, 2007-03-31 plus one month would result in the invalid\ndate 2007-04-31. Instead of returning an invalid result, the last\nvalid day of the month, 2007-04-30, is selected instead.</p>\n</blockquote>\n"}],"owner":{"user_id":1439522,"display_name":"prom85"},"view_count":61,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678347995,"question_id":75681703,"body":"<p>I see that <code>java.time.Period</code> with <code>java.time.LocalDates</code> works mostly as desired and I can use it to get the duration between two dates in years, months and days but I found an example that is not working (not as I expected it), like following:</p>\n<pre><code>val test1 = LocalDate.of(2023, 1, 31)\nval test2 = LocalDate.of(2023, 1, 28)\nval testToday = LocalDate.of(2023, 3, 9)\n\nval period1 = Period.between(test1, testToday)\nval period2 = Period.between(test2, testToday)\n\nL.d { &quot;test1 = $test1 | test2 = $test2 | today = $testToday&quot; }\nL.d { &quot;period1 = $period1 | period2 = $period2&quot; }\n</code></pre>\n<p>Output is following:</p>\n<pre><code>period1 = P1M9D | period2 = P1M9D\ntest1 = 2023-01-31 | test2 = 2023-01-28 | today = 2023-03-09\n</code></pre>\n<p><strong>Problem</strong></p>\n<p>The solution above tells me following:</p>\n<ul>\n<li>Duration between 2023-01-31 and 2023-03-09 =&gt; 1 month and 9 days (P1M9D)</li>\n<li>Duration between 2023-01-28 and 2023-03-09 =&gt; 1 month and 9 days (P1M9D)</li>\n</ul>\n<p>=&gt; but this is wrong, the second one should show 3 days more as duration... Is there an explanation for this?</p>\n"},{"tags":["java","sql","oracle","jdbc","ojdbc"],"comments":[{"owner":{"user_id":1509264,"display_name":"MT0"},"edited":false,"comment_id":133503576,"body":"What is the output of <code>DUMP(strange_field)</code> for the affected row?"},{"owner":{"user_id":836215,"display_name":"ibre5041"},"edited":false,"comment_id":133504741,"body":"I&#39;d say it is known bug in Oracle&#39;s JDBC drivers. There is some Java property which will instruct JDBXC drivers to use different algorithm to encode doubles."},{"owner":{"user_id":14294053,"display_name":"Mar-Z"},"edited":false,"comment_id":133506655,"body":"I can only say that from my experience with financial software were the numbers really do matter - we are using only BigDecimal in Java code."}],"answers":[{"owner":{"user_id":836215,"display_name":"ibre5041"},"up_vote_count":1,"is_accepted":false,"creation_date":1678290993,"answer_id":75675311,"body":"<p>Check this example using SetFloatAndDoubleUseBinary.</p>\n<pre><code>import java.math.BigDecimal;\nimport java.sql.Connection;\nimport java.sql.DriverManager;\nimport java.sql.PreparedStatement;\nimport java.sql.ResultSet;\nimport java.sql.SQLException;\nimport java.sql.Statement;\nimport java.util.Properties;\n\npublic class DatabaseTest {\n    public static void main(String[] args) throws SQLException {\n        // System.out.println(200000000000000000000d);\n        // System.out.println(Double.POSITIVE_INFINITY);\n        // System.out.println(200000000000000000000d &lt; Double.POSITIVE_INFINITY);\n        // System.out.println(200000000000000000000d &lt; Double.MAX_VALUE);\n        // System.out.println(Double.MAX_VALUE);\n        \n        if (args.length &lt; 3) {\n            System.out.println(&quot;DatabaseTest url user password&quot;);\n            System.exit(-1);\n        }\n        \n        String url = args[0];\n        String user = args[1];\n        String password = args[2];\n\n        testFLOAT(url, user, password);\n\n        System.out.println();\n\n        testFLOATSetFloatAndDoubleUseBinary(url, user, password);\n    }\n\n    private static void testFLOAT(String url, String user, String password) throws SQLException {\n        System.out.println(&quot;--FLOAT datatype test&quot;);\n\n        Properties p = new Properties();\n        p.setProperty(&quot;user&quot;, user);\n        p.setProperty(&quot;password&quot;, password);\n\n        try (Connection conn = DriverManager.getConnection(url, p)) {\n            conn.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);\n            conn.setAutoCommit(false);\n\n            try (Statement stmt = conn.createStatement()) {\n                try {\n                    stmt.execute(&quot;DROP TABLE test1&quot;);\n                } catch (SQLException ex) {\n                }\n                stmt.execute(&quot;CREATE TABLE test1 (step NUMBER(10), num FLOAT DEFAULT 0 NOT NULL, remark VARCHAR2(100))&quot;);\n            }\n\n            try (PreparedStatement stmt = conn.prepareStatement(&quot;INSERT INTO test1 (step, num, remark) VALUES (?, ?, ?)&quot;)) {\n                stmt.setInt(1, 1);\n                stmt.setFloat(2, 200000000000000000000f);\n                stmt.setString(3, &quot;setFloat(_, 200000000000000000000f&quot;);\n                stmt.executeUpdate();\n\n                stmt.setInt(1, 2);\n                stmt.setDouble(2, 200000000000000000000d);\n                stmt.setString(3, &quot;setDouble(_, 200000000000000000000f&quot;);\n                stmt.executeUpdate();\n\n                stmt.setInt(1, 3);\n                stmt.setBigDecimal(2, BigDecimal.valueOf(2, -20));\n                stmt.setString(3, &quot;setBigDecimal(_, 200000000000000000000)&quot;);\n                stmt.executeUpdate();\n            }\n\n            try (PreparedStatement stmt = conn.prepareStatement(&quot;SELECT num, DUMP(num, 16), remark FROM test1 ORDER BY step&quot;)) {\n                stmt.execute();\n                try (ResultSet rs = stmt.getResultSet()) {\n                    while (rs.next()) {\n                        System.out.println(rs.getString(3) + &quot; : &quot; + rs.getBigDecimal(1) + &quot; dump: &quot; + rs.getString(2));\n                    }\n                }\n            }\n        }\n    }\n\n    private static void testFLOATSetFloatAndDoubleUseBinary(String url, String user, String password)\n            throws SQLException {\n        System.out.println(&quot;--FLOAT datatype test with SetFloatAndDoubleUseBinary=true&quot;);\n\n        Properties p = new Properties();\n        p.setProperty(&quot;user&quot;, user);\n        p.setProperty(&quot;password&quot;, password);\n        p.setProperty(&quot;SetFloatAndDoubleUseBinary&quot;, &quot;true&quot;);\n\n        try (Connection conn = DriverManager.getConnection(url, p)) {\n            conn.setTransactionIsolation(Connection.TRANSACTION_READ_COMMITTED);\n            conn.setAutoCommit(false);\n\n            try (Statement stmt = conn.createStatement()) {\n                try {\n                    stmt.execute(&quot;DROP TABLE test2&quot;);\n                } catch (SQLException ex) {\n                }\n                stmt.execute(\n                        &quot;CREATE TABLE test2 (step NUMBER(10), num FLOAT DEFAULT 0 NOT NULL, remark VARCHAR2(100))&quot;);\n            }\n\n            try (PreparedStatement stmt = conn\n                    .prepareStatement(&quot;INSERT INTO test2 (step, num, remark) VALUES (?, ?, ?)&quot;)) {\n                stmt.setInt(1, 1);\n                stmt.setFloat(2,  200000000000000000000f);\n                stmt.setString(3, &quot;setFloat(_, 200000000000000000000f&quot;);\n                stmt.executeUpdate();\n\n                stmt.setInt(1, 2);\n                stmt.setDouble(2, 200000000000000000000d);\n                stmt.setString(3, &quot;setDouble(_, 200000000000000000000f&quot;);\n                stmt.executeUpdate();\n\n                stmt.setInt(1, 3);\n                stmt.setBigDecimal(2, BigDecimal.valueOf(2, -20));\n                stmt.setString(3, &quot;setBigDecimal(_, 200000000000000000000)&quot;);\n                stmt.executeUpdate();\n            }\n\n            try (PreparedStatement stmt = conn\n                    .prepareStatement(&quot;SELECT num, DUMP(num, 16), remark FROM test2 ORDER BY step&quot;)) {\n                stmt.execute();\n                try (ResultSet rs = stmt.getResultSet()) {\n                    while (rs.next()) {\n                        System.out.println(rs.getString(3) + &quot; : &quot; + rs.getBigDecimal(1) + &quot; dump: &quot; + rs.getString(2));\n                    }\n                }\n            }\n        }\n    }\n}\n</code></pre>\n<p>Moreover malformed numbers stored by JDBC driver can not be transferred using expdp/impdp.</p>\n<p>Upon import impdp gives following output:</p>\n<pre><code>Processing object type SCHEMA_EXPORT/PRE_SCHEMA/PROCACT_SCHEMA\nProcessing object type SCHEMA_EXPORT/TABLE/TABLE\nProcessing object type SCHEMA_EXPORT/TABLE/TABLE_DATA\nORA-02374: conversion error loading table &quot;USER&quot;.&quot;TEST1&quot;\nORA-01722: invalid number\n\nORA-02372: data for row: NUM : ''\n\n\nORA-02374: conversion error loading table &quot;USER&quot;.&quot;TEST1&quot;\nORA-01722: invalid number\n\nORA-02372: data for row: NUM : ''\n</code></pre>\n<p>Summary. Avoid using setFloat and setDouble in you code(even with other databases). Anyways Oracle internally stores numberical types in form of digits - like BigDecimal does. Convert your number into BidDecimal format on your side and pass these digits to database driver.</p>\n"},{"owner":{"user_id":3612610,"display_name":"user3612610"},"up_vote_count":0,"is_accepted":false,"creation_date":1678374416,"answer_id":75686443,"body":"<p>I have also the issue with the data pump. With the property <code>&quot;SetFloatAndDoubleUseBinary&quot;</code>, the value was correctly written to oracle database. Thanks ibre5041!</p>\n<p>But is the issue a known bug of ojdbc?</p>\n"}],"owner":{"user_id":3612610,"display_name":"user3612610"},"view_count":119,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1678285634,"question_id":75674335,"body":"<p>I are experiencing a strange problem writing a certain double value to an Oracle database via the OJDBC drivers.</p>\n<p>If I write the exact double value <strong>7.00E+20</strong> into a field of type FLOAT(n), BINARY_FLOAT, BINARY_DOUBLE or NUMBER(38,10) by OJDBC, the value cannot be retrieved in Oracle tools like SQL Plus or SQL Developer. However, similar values such as 7.00E+19, 7,000001E+20 and 7.00E+21 do not cause any problems.</p>\n<p>The special value can be retrieved with another JDBC call, or if I use fake arithmetics like <code>SELECT (strange_field + 1 – 1) FROM mytable</code> in SQL Plus.\nIf I try to read <code>strange_field</code> directly, the value is displayed as nothing or (null) in SQL Plus and SQL Developer.</p>\n<p>Example table:</p>\n<pre><code>CREATE TABLE my_table(id VARCHAR(20), strange_field FLOAT(126));\nINSERT INTO my_table (id, strange_field) VALUES ('Value by SQL Plus', 7.00E+20);\n</code></pre>\n<p>Sample groovy script which shows the effect (the issue occurs also in Java or applications like SQuirreL SQL):</p>\n<pre><code>import groovy.sql.*\n\nprintln &quot;Start SqlTest.groovy&quot;\n\n// Oracle\ndriver = &quot;oracle.jdbc.OracleDriver&quot;\nurl = &quot;jdbc:oracle:thin:@//localhost:1521/xe&quot;\nusername = &quot;test&quot;\npassword = &quot;test&quot;\n\nid = 'Value by OJDBC'\ndouble value = 7.00E+20 //error!\n//float value = 7.00E+20 //value is stored correctly!\n\nsql = Sql.newInstance(url, username, password, driver)\ntry {\n sql.execute 'INSERT INTO my_table (id, strange_field) VALUES (?, ?)', id, value\n sql.eachRow('SELECT id, strange_field FROM my_table'){row -&gt; println row}\n} finally {\n  sql.close()\n}\n\nprintln &quot;Finished SqlTest.groovy&quot;\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/EsPBq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EsPBq.png\" alt=\"enter image description here\" /></a></p>\n<p>SQL Plus:\n<a href=\"https://i.stack.imgur.com/YMUsl.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/YMUsl.png\" alt=\"enter image description here\" /></a></p>\n<p><code>SELECT * FROM my_table WHERE strange_field IS NULL</code> don't returns the affected row.</p>\n<p>If <code>strange_field</code> is of type BINARY_FLOAT or BINARY_DOUBLE, the value 7E+20 is displayed as <code>NaN</code> in SQL Plus and cannot be retrieved again by JDBC or the arithmetic trick in SQL Plus.</p>\n<p>I have already tested with ojdbc7 and ojdbc10 drivers, different JDKs (8 and 17), and Oracle databases (12.2, 18c and 21c). The issue occurs in every constellation.</p>\n<p>I also suspect that the error might occur with other float values.</p>\n<p>Has anyone already experienced a similar problem, can reproduce it and/or has a idea for a workaround?</p>\n"},{"tags":["java","selenium-webdriver","open-telemetry","jaeger","remotewebdriver"],"comments":[{"owner":{"user_id":295416,"display_name":"trask"},"edited":false,"comment_id":133949115,"body":"can you post the full <code>NoClassDefFoundError</code> stack trace? that will help to see why <code>AutoConfiguredOpenTelemetrySdkBuilder</code> is being referenced"}],"answers":[{"owner":{"user_id":6797663,"display_name":"codemonkey"},"up_vote_count":1,"is_accepted":true,"creation_date":1682433353,"answer_id":76102398,"body":"<p>I was able to work around this by setting <a href=\"https://www.selenium.dev/selenium/docs/api/java/org/openqa/selenium/remote/RemoteWebDriver.html#%3Cinit%3E(java.net.URL,org.openqa.selenium.Capabilities,boolean)\" rel=\"nofollow noreferrer\">enableTracing</a> to false when creating the <code>RemoteWebDriver</code>:</p>\n<pre><code>webDriver = new RemoteWebDriver(remoteAddress, capabilities, false);\n</code></pre>\n<p>Although I'm using <code>opentelemetry-sdk:1.22.0</code>, <code>selenium-remote-driver</code> (4.1.4) is pulling in an earlier version (1.13.x) of <code>opentelemetry-sdk-extension-autoconfigure</code>.</p>\n<p><code>AutoConfiguredOpenTelemetrySdkBuilder</code> (in <code>opentelemetry-sdk-extension-autoconfigure</code>) references <code>SdkLogEmitterProviderBuilder</code> but that class was renamed in <a href=\"https://github.com/open-telemetry/opentelemetry-java/releases/tag/v1.19.0\" rel=\"nofollow noreferrer\">OpenTelemetry 1.19.0</a> so it is not found.</p>\n<p>There is an <a href=\"https://github.com/SeleniumHQ/selenium/issues/10251\" rel=\"nofollow noreferrer\">issue</a> against Selenium describing the problem, which <a href=\"https://github.com/SeleniumHQ/selenium/issues/10251#issuecomment-1019095873\" rel=\"nofollow noreferrer\">suggests</a> <code>selenium-remote-driver</code> is incorrectly depending on the sdk instead of just the api. However, the issue has been closed and the most recent version (currently 4.9.0) still <a href=\"https://repo1.maven.org/maven2/org/seleniumhq/selenium/selenium-remote-driver/4.9.0/selenium-remote-driver-4.9.0.pom\" rel=\"nofollow noreferrer\">depends on the sdk</a>.</p>\n<p>Picking a recent enough version of <code>selenium-remote-driver</code> to align its version of <code>opentelemetry-sdk</code> with the one in your project might be good enough but feels a bit brittle.</p>\n"}],"owner":{"user_id":461499,"display_name":"Rob Audenaerde"},"view_count":124,"up_vote_count":2,"accepted_answer_id":76102398,"answer_count":1,"score":2,"creation_date":1678277722,"question_id":75672918,"body":"<p>When trying to add open telemetry to my Selenium 4 tests</p>\n<p>like this</p>\n<pre><code>        System.setProperty(&quot;otel.traces.exporter&quot;, &quot;jaeger&quot;);\n        System.setProperty(&quot;otel.exporter.jaeger.endpoint&quot;, &quot;http://localhost:14250&quot;);\n        System.setProperty(&quot;JAEGER_SERVICE_NAME&quot;, &quot;client&quot;);\n        System.setProperty(&quot;otel.resource.attributes&quot;, &quot;service.name=selenium-java-try&quot;);\n</code></pre>\n<pre><code>    &lt;dependency&gt;\n        &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n        &lt;artifactId&gt;opentelemetry-exporter-jaeger&lt;/artifactId&gt;\n        &lt;version&gt;1.23.1&lt;/version&gt;\n    &lt;/dependency&gt;\n</code></pre>\n<p>I get this error:</p>\n<pre><code>java.lang.NoClassDefFoundError: io/opentelemetry/sdk/logs/SdkLogEmitterProviderBuilder\n\n    at io.opentelemetry.sdk.autoconfigure.AutoConfiguredOpenTelemetrySdkBuilder.&lt;init&gt;(AutoConfiguredOpenTelemetrySdkBuilder.java:69)\n</code></pre>\n<p>So I added the these as well:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n    &lt;artifactId&gt;opentelemetry-sdk&lt;/artifactId&gt;\n    &lt;version&gt;1.23.1&lt;/version&gt;\n&lt;/dependency&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;io.opentelemetry&lt;/groupId&gt;\n    &lt;artifactId&gt;opentelemetry-sdk-logs&lt;/artifactId&gt;\n    &lt;version&gt;1.23.1-alpha&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But still no success..</p>\n<p>Who to set-up the dependencies/configuration so that I can start using jaeger-over-otel?</p>\n"},{"tags":["java","visual-studio-code","javafx","scenebuilder"],"comments":[{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":133475854,"body":"Typically, that error means the main class is a subclass of <code>javafx.application.Application</code> <i>and</i> JavaFX was placed on the class-path instead of the module-path (more specifically, that the <code>javafx.graphics</code> module is not in the boot <code>ModuleLayer</code>). And the fix is to put JavaFX on the <code>--module-path</code> and, if your own code is not modular, use <code>--add-modules</code> as needed. I see that in one of your configurations, but not all of them; perhaps that&#39;s where the problem lies."},{"owner":{"user_id":19860728,"display_name":"Oliver A"},"edited":false,"comment_id":133488299,"body":"@Slaw: thanks for replying. I&#39;m not quite sure what you mean. How would I put JavaFX on the <code>--module-path</code> or how would I <code>--add-modules</code>? Is this in the launch.json? I realized additionally that when I place all my files inside a &#39;src folder&#39; then it makes the non Scene Builder but JavaFX hello world give the same error about runtime. I tried re-doing my vmArgs path a lot from other solutions but that didn&#39;t work. Thanks"},{"owner":{"user_id":19860728,"display_name":"Oliver A"},"edited":false,"comment_id":133488505,"body":"I see now. I think I have it working, and I&#39;m not getting the error now. After I figure out something (probably unrelated) I&#39;ll explain in an answer for other people with this problem. Thanks for the help!"},{"owner":{"user_id":1155209,"display_name":"jewelsea"},"edited":false,"comment_id":133492766,"body":"There are instructions for VSCode+JavaFX setup at <a href=\"https://openjfx.io/openjfx-docs/\" rel=\"nofollow noreferrer\">openjfx.io</a>.  I recommend those official instructions over videos on the internet.  Quickly reviewing your setup, it seems that you have most things right, but I don&#39;t use VSCode, so cannot verify.  Perhaps follow the instructions at openjfx.io exactly for a new hello world JavaFX project and check that you can get that to work in your environment."},{"owner":{"user_id":19133920,"display_name":"JialeDu"},"edited":false,"comment_id":133493740,"body":"@Oliver A   Welcome to StackOverflow. If you find the solution, Please consider answering it and accepting it as an answer to change its status to Answered. It will also help others to solve a similar issue. See <a href=\"https://stackoverflow.com/help/self-answer\">can I answer my own question..</a>, Just a reminder :)"}],"answers":[{"owner":{"user_id":13068918,"display_name":"Sheng Chen"},"up_vote_count":0,"is_accepted":false,"creation_date":1678239427,"answer_id":75668711,"body":"<p>I guess something wrong happens when you launch your JavaFX application.</p>\n<ol>\n<li><p>For the first question\n<code>Run Code</code> and <code>Run Java</code> are contributed from different extensions actually. The former one is contributed by Code Runner while the latter one from Java Debugger extension. I recommend to always use <code>Run Java</code> because the Code runner cannot understand your project's dependencies, you will get errors when your file uses third party libraries.</p>\n</li>\n<li><p>For the second question\nCan you try to launch your project directly from the launch panel and make sure the last configuration <code>HelloWorld</code> is selected?\n<a href=\"https://i.stack.imgur.com/BDSJc.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/BDSJc.png\" alt=\"enter image description here\" /></a></p>\n</li>\n</ol>\n"},{"owner":{"user_id":19860728,"display_name":"Oliver A"},"up_vote_count":1,"is_accepted":true,"creation_date":1678241636,"answer_id":75668877,"body":"<p>Thanks to @Slaw for pointing me in the right direction.</p>\n<p><strong>Solution:</strong>\nIt is a silly mistake. From my starting configuration I just had to:</p>\n<ul>\n<li>Place all my files in a folder called src.</li>\n<li>The vmArgs part needs to be placed for <em>all</em> the files using JavaFX</li>\n</ul>\n<p>For src folder: not sure why I need it, but taking them out caused problems.</p>\n<p>For vmArgs: the section of form <code>&quot;vmArgs&quot;: &quot;--module-path \\&quot;C:/Users/Oliver/Downloads/javafx-sdk-19.0.2.1/lib\\&quot; --add-modules javafx.controls,javafx.fxml&quot;,</code> in <code>launch.json</code> must be used for each 'type' that uses JavaFX.</p>\n<p>For example, here is my <code>launch.json</code>:</p>\n<pre><code>{\n    // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    &quot;version&quot;: &quot;0.2.0&quot;,\n    &quot;configurations&quot;: [\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;testing&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;vmArgs&quot;: &quot;--module-path \\&quot;C:/Users/Oliver/Downloads/javafx-sdk-19.0.2.1/lib\\&quot; --add-modules javafx.controls,javafx.fxml&quot;,\n            &quot;mainClass&quot;: &quot;src.testing&quot;,\n            &quot;projectName&quot;: &quot;Java VSCode test_a97e49e3&quot;\n        },\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;testing&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;vmArgs&quot;: &quot;--module-path \\&quot;C:/Users/Oliver/Downloads/javafx-sdk-19.0.2.1/lib\\&quot; --add-modules javafx.controls,javafx.fxml&quot;,\n            &quot;mainClass&quot;: &quot;testing&quot;,\n            &quot;projectName&quot;: &quot;Java VSCode test_a97e49e3&quot;\n        },\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;TestingBasic&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;vmArgs&quot;: &quot;--module-path \\&quot;C:/Users/Oliver/Downloads/javafx-sdk-19.0.2.1/lib\\&quot; --add-modules javafx.controls,javafx.fxml&quot;,\n            &quot;mainClass&quot;: &quot;TestingBasic&quot;,\n            &quot;projectName&quot;: &quot;Java VSCode test_a97e49e3&quot;\n        },\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;App&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;vmArgs&quot;: &quot;--module-path \\&quot;C:/Users/Oliver/Downloads/javafx-sdk-19.0.2.1/lib\\&quot; --add-modules javafx.controls,javafx.fxml&quot;,\n            &quot;mainClass&quot;: &quot;App&quot;,\n            &quot;projectName&quot;: &quot;Java VSCode test_a97e49e3&quot;\n        },\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;Current File&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;mainClass&quot;: &quot;${file}&quot;\n        },\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;HelloWorld&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;vmArgs&quot;: &quot;--module-path \\&quot;C:/Users/Oliver/Downloads/javafx-sdk-19.0.2.1/lib\\&quot; --add-modules javafx.controls,javafx.fxml&quot;,\n            &quot;mainClass&quot;: &quot;HelloWorld&quot;,\n            &quot;projectName&quot;: &quot;Java VSCode test_a97e49e3&quot;\n        }\n    ]\n}\n</code></pre>\n<p>to run all the java files in there. For people of my skill level note that: the vmArgs portion is in each and every* section; each section applies to each file (or java class) you are running.</p>\n<p>*Technically not</p>\n"}],"owner":{"user_id":19860728,"display_name":"Oliver A"},"view_count":203,"up_vote_count":2,"accepted_answer_id":75668877,"answer_count":2,"score":2,"creation_date":1678161605,"question_id":75657929,"body":"<p><strong>Summary of issue/goal:</strong></p>\n<p>I wish to make a JavaFX GUI with Scene Builder in VSCode. A simple 'hello world' program runs in VSCode without issue. I can additionally run a simple 'hello world' JavaFX code in VSCode without issue. However, the JavaFX with Scene Builder code gives me an error.</p>\n<p>This may be part of the issue, but 'Run Code' only works for non-JavaFX 'hello world'. The only way to run JavaFX (non-Scene Builder) is via 'Run Java'.</p>\n<p><strong>Versions:</strong></p>\n<ul>\n<li>VSCode is up to date (v1.76)</li>\n<li>JavaFX was downloaded in past week or so (v19.0.2.1)</li>\n<li>Scene Builder was installed in past week or so (19.0.0 probably)</li>\n</ul>\n<p><strong>Related Extensions (no links; post marked spam and trying to get around it):</strong></p>\n<ul>\n<li>Extension Pack for Java</li>\n<li>JavaFX Support</li>\n<li>Maven for Java (not sure if related)</li>\n<li>Project Manager for Java (not sure if related)</li>\n<li>SceneBuilder extension for Visual Studio Code</li>\n</ul>\n<p><strong>In detail (sorry, this will be a lot of code; wanted to give as much information possible):</strong></p>\n<p><em>Simple Hello World:</em></p>\n<pre><code>public class testing\n{\n    public static void main(String [] args)\n    {\n        System.out.println(&quot;HI&quot;);\n    }    \n}\n</code></pre>\n<p>This code runs in 'Run Code' and 'Run Java' with output being <code>HI</code>.</p>\n<p><em>JavaFX Hello World:</em></p>\n<pre><code>import javafx.application.Application;\nimport javafx.event.ActionEvent;\nimport javafx.event.EventHandler;\nimport javafx.scene.Scene;\nimport javafx.scene.control.Button;\nimport javafx.scene.layout.StackPane;\nimport javafx.stage.Stage;\n \npublic class HelloWorld extends Application {\n    \n    /** \n     * @param args\n     */\n    public static void main(String[] args) {\n        launch(args);\n    }\n    \n    @Override\n    public void start(Stage primaryStage) {\n        primaryStage.setTitle(&quot;Hello World!&quot;);\n        Button btn = new Button();\n        btn.setText(&quot;Say 'Hello World'&quot;);\n        btn.setOnAction(new EventHandler&lt;ActionEvent&gt;() {\n \n            @Override\n            public void handle(ActionEvent event) {\n                System.out.println(&quot;Hello World!&quot;);\n            }\n        });\n        \n        StackPane root = new StackPane();\n        root.getChildren().add(btn);\n        primaryStage.setScene(new Scene(root, 300, 250));\n        primaryStage.show();\n    }\n}\n</code></pre>\n<p>Using 'Run Code' gives 20 errors, here are two (my question was marked spam, maybe this changes it...?):</p>\n<pre><code>HelloWorld.java:1: error: package javafx.application does not exist\nimport javafx.application.Application;\n                         ^\nHelloWorld.java:2: error: package javafx.event does not exist\nimport javafx.event.ActionEvent;\n20 errors\n</code></pre>\n<p>Using 'Run Java' gives the expected output: a window with a button saying &quot;Say 'Hello World'&quot; that prints &quot;Hello World!&quot; to the console upon click. Image: <a href=\"https://i.stack.imgur.com/NisSK.png\" rel=\"nofollow noreferrer\">image here</a></p>\n<p><em>More complicated Scene Builder</em></p>\n<p>Code comes from <a href=\"https://youtu.be/AubJaosfI-0\" rel=\"nofollow noreferrer\">this Youtube Video</a>.</p>\n<p>Here is the .fxml file:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;?import javafx.scene.control.Button?&gt;\n&lt;?import javafx.scene.control.Label?&gt;\n&lt;?import javafx.scene.control.TextField?&gt;\n&lt;?import javafx.scene.layout.AnchorPane?&gt;\n\n\n&lt;AnchorPane maxHeight=&quot;-Infinity&quot; maxWidth=&quot;-Infinity&quot; minHeight=&quot;-Infinity&quot; minWidth=&quot;-Infinity&quot; prefHeight=&quot;400.0&quot; prefWidth=&quot;417.0&quot; xmlns=&quot;http://javafx.com/javafx/19&quot; xmlns:fx=&quot;http://javafx.com/fxml/1&quot; fx:controller=&quot;MainSceneController&quot;&gt;\n   &lt;children&gt;\n      &lt;Label layoutX=&quot;14.0&quot; layoutY=&quot;14.0&quot; prefHeight=&quot;19.0&quot; prefWidth=&quot;392.0&quot; text=&quot;Title&quot; /&gt;\n      &lt;TextField fx:id=&quot;tfTitle&quot; layoutX=&quot;14.0&quot; layoutY=&quot;33.0&quot; prefHeight=&quot;27.0&quot; prefWidth=&quot;392.0&quot; /&gt;\n      &lt;Button layoutX=&quot;184.0&quot; layoutY=&quot;359.0&quot; mnemonicParsing=&quot;false&quot; onAction=&quot;#btnOkClicked&quot; text=&quot;OK&quot; /&gt;\n   &lt;/children&gt;\n&lt;/AnchorPane&gt;\n</code></pre>\n<p>Here is the launch.json:</p>\n<pre><code>{\n    // Use IntelliSense to learn about possible attributes.\n    // Hover to view descriptions of existing attributes.\n    // For more information, visit: https://go.microsoft.com/fwlink/?linkid=830387\n    &quot;version&quot;: &quot;0.2.0&quot;,\n    &quot;configurations&quot;: [\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;testing&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;mainClass&quot;: &quot;testing&quot;,\n            &quot;projectName&quot;: &quot;Java VSCode test_a97e49e3&quot;\n        },\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;TestingBasic&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;mainClass&quot;: &quot;TestingBasic&quot;,\n            &quot;projectName&quot;: &quot;Java VSCode test_a97e49e3&quot;\n        },\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;App&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;mainClass&quot;: &quot;App&quot;,\n            &quot;projectName&quot;: &quot;Java VSCode test_a97e49e3&quot;\n        },\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;Current File&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;mainClass&quot;: &quot;${file}&quot;\n        },\n        {\n            &quot;type&quot;: &quot;java&quot;,\n            &quot;name&quot;: &quot;HelloWorld&quot;,\n            &quot;request&quot;: &quot;launch&quot;,\n            &quot;vmArgs&quot;: &quot;--module-path C:/openjfx-19.0.2.1_windows-x64_bin-sdk/javafx-sdk-19.0.2.1/lib --add-modules javafx.controls,javafx.fxml&quot;,\n            &quot;mainClass&quot;: &quot;HelloWorld&quot;,\n            &quot;projectName&quot;: &quot;Java VSCode test_a97e49e3&quot;\n        }\n    ]\n}\n</code></pre>\n<p>Here is MainSceneController.fxml:</p>\n<pre><code>import javafx.event.ActionEvent;\nimport javafx.fxml.FXML;\nimport javafx.scene.control.TextField;\nimport javafx.stage.Stage;\n\npublic class MainSceneController {\n\n    @FXML\n    private TextField tfTitle;\n\n    @FXML\n    void btnOkClicked(ActionEvent event) {\n        Stage mainWindow = (Stage) tfTitle.getScene().getWindow();\n        String title = tfTitle.getText();\n        mainWindow.setTitle(title);\n\n    }\n\n}\n</code></pre>\n<p>Here is the App.java:</p>\n<pre><code>import java.io.IOException;\n\nimport javafx.application.Application;\nimport javafx.fxml.FXMLLoader;\nimport javafx.scene.Parent;\nimport javafx.scene.Scene;\nimport javafx.stage.Stage;\n \npublic class App extends Application {\n    @Override\n    public void start(Stage primaryStage) { \n        \n  Parent root;\ntry {\n        root = FXMLLoader.load(getClass().getResource(&quot;MainScene.fxml&quot;));\n        Scene scene = new Scene(root);\n\n  \n        primaryStage.setTitle(&quot;Hello World!&quot;);\n        primaryStage.setScene(scene);\n        primaryStage.show();\n\n        } catch (IOException e) {\n        }\n}\n  \n \n public static void main(String[] args) {\n        System.out.println(&quot;got here&quot;);\n        launch(args);\n    }\n}\n</code></pre>\n<p>No code has errors. Running <code>main</code> in <code>App.java</code> produces</p>\n<p><code>Error: JavaFX runtime components are missing, and are required to run this application</code>.</p>\n<p>('Run Java' for App.java gives same thing; 'Run Code' for App.java gives 14 errors similar to the 20 earlier about java.fx packages not existing.)</p>\n<p>I am confused what this means.</p>\n<p>For reference, here is the 'Configure runtime for projects' page:\n<a href=\"https://i.stack.imgur.com/WL60U.png\" rel=\"nofollow noreferrer\">here</a>. I have two options (17 and 19), but both fail and give me the runtime error: <a href=\"https://i.stack.imgur.com/6qk2R.png\" rel=\"nofollow noreferrer\">here</a>.</p>\n<hr />\n<p>If you could point me in the correct direction, that'd be great. I am new to StackOverflow so I appreciate the support and apologize if I've made a mistake.</p>\n"},{"tags":["java","json","fasterxml"],"comments":[{"owner":{"user_id":3642410,"display_name":"Karim"},"edited":false,"comment_id":133463732,"body":"replace &quot;null&quot; with &quot;\\&quot;null\\&quot;&quot;"},{"owner":{"user_id":9719337,"display_name":"Dred"},"edited":false,"comment_id":133463928,"body":"it didn&#39;t help, if you mean int defaultValue"},{"owner":{"user_id":3642410,"display_name":"Karim"},"edited":false,"comment_id":133463958,"body":"both  in defaultValue and in private String name = &quot;null&quot;; should be private String name = &quot;\\&quot;null\\&quot;&quot;;"}],"answers":[{"owner":{"user_id":4845935,"display_name":"dimnnv"},"up_vote_count":1,"is_accepted":true,"creation_date":1678109763,"answer_id":75651509,"body":"<p>The property <code>defaultValue</code> of the @JsonProperty annotation does not lead to actual setting the default value and only used for informational purposes. That may be misleading but it is how currently Jackson is implemented: <a href=\"https://fasterxml.github.io/jackson-annotations/javadoc/2.14/com/fasterxml/jackson/annotation/JsonProperty.html#defaultValue--\" rel=\"nofollow noreferrer\">https://fasterxml.github.io/jackson-annotations/javadoc/2.14/com/fasterxml/jackson/annotation/JsonProperty.html#defaultValue--</a></p>\n<p>Setting default value for Java fields probably won't work either since you have actually these properties in your JSON so the setters will be actually called and will overwrite the original &quot;null&quot; values (you can check that with debugger).</p>\n<p>A simple solution would be to set <code>@JsonSetter(nulls = Nulls.SKIP)</code>:</p>\n<p>The working example:</p>\n<pre><code>@Data\npublic class Person {\n  @JsonProperty\n  @JsonSetter(nulls = Nulls.SKIP)\n  private String name = &quot;null&quot;;\n\n  @JsonProperty\n  @JsonSetter(nulls = Nulls.SKIP)\n  private String surName = &quot;null&quot;;\n}\n\n\n\npublic class PersonTest {\n  @Test\n  public void testDeserializePerson() throws JsonProcessingException {\n    var result = new ObjectMapper().readValue(&quot;{\\&quot;name\\&quot;:null, \\&quot;surName\\&quot;:null}&quot;, Person.class);\n    assertEquals(result.getName(), &quot;null&quot;);\n    assertEquals(result.getSurName(), &quot;null&quot;);\n  }\n}\n</code></pre>\n"}],"owner":{"user_id":9719337,"display_name":"Dred"},"view_count":89,"up_vote_count":2,"accepted_answer_id":75651509,"answer_count":1,"score":2,"creation_date":1678107819,"question_id":75651209,"body":"<p>I have class</p>\n<pre><code>@Data\nclass Person {\n\n  @JsonProperty(value=&quot;name&quot;, defaultValue = &quot;null&quot;)\n  private String name = &quot;null&quot;;\n\n  @JsonProperty(value=&quot;surName&quot;, defaultValue = &quot;null&quot;)\n  private String surName= &quot;null&quot;;\n\n}\n</code></pre>\n<p>When I try to deserialize string like  {&quot;name&quot;:null, &quot;surName&quot;:null} with</p>\n<pre><code>new ObjectMapper().readValue(json, Person.class); \n</code></pre>\n<p>I got Object with null fields, but I need with &quot;null&quot; fields. How to make that?</p>\n"},{"tags":["java","gradle-kotlin-dsl"],"comments":[{"owner":{"user_id":4161471,"display_name":"aSemy"},"edited":false,"comment_id":133476004,"body":"What does &quot;miserable fails&quot; look like? What error do you get? What have you done to try and fix it?"}],"answers":[{"owner":{"user_id":10435528,"display_name":"devatherock"},"up_vote_count":1,"is_accepted":true,"creation_date":1678200829,"answer_id":75663563,"body":"<p>The <code>build.gradle.kts</code> equivalent of the <code>build.gradle</code> snippet in the question would be something like below:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>extra.apply {\n    set(&quot;buildVersion&quot;, &quot;1.0.0&quot;)\n}\n\ntasks.register(&quot;readImageVersion&quot;) {\n     doLast {\n         file(&quot;image.version&quot;).appendText(&quot;&quot;&quot;Version=${project.property(&quot;buildVersion&quot;)}&quot;&quot;&quot;)\n     }\n}\n</code></pre>\n"}],"owner":{"user_id":21342044,"display_name":"Acacio Afonso"},"view_count":123,"up_vote_count":2,"accepted_answer_id":75663563,"answer_count":1,"score":2,"creation_date":1678105220,"question_id":75650768,"body":"<p>I have a project that use Jenkinsfile to do some tasks, one of them is generate build version of project with the version on .jar file name.</p>\n<p>Using Java 8 and build.gradle i was doing like this</p>\n<ul>\n<li><p>Build.gradle</p>\n<pre><code>ext {\n    buildVersion = '1.0.0'\n}\n\ntask readImageVersion() {\n     doLast {\n         new File(&quot;image.version&quot;).text = &quot;Version=${buildVersion}&quot;\n     }\n}\n</code></pre>\n</li>\n<li><p>Read this file to get version on Jenkinsfile</p>\n<pre><code>script {\n     def props = readProperties file: 'image.version'\n     def version = props['Version']\n}\n</code></pre>\n</li>\n</ul>\n<p>Now i'm using Java 17 and build.gradle.kts and i can't find a way to do something like this.\nCan someone help?</p>\n<p>I thy to do something like this, but miserable fails</p>\n<pre><code>task(&quot;readImageVersion&quot;) {\n     File.createTempFile(version as String, &quot;.txt&quot;)\n}\n</code></pre>\n"},{"tags":["java","io","bufferedreader"],"comments":[{"owner":{"user_id":29470,"display_name":"Tim Moore"},"edited":false,"comment_id":133459947,"body":"It’s probably that your terminal is buffering until the end of line before it’s available to be read by the Java program"},{"owner":{"user_id":40342,"display_name":"Joachim Sauer"},"edited":false,"comment_id":133460108,"body":"I see no point in wrapping the <code>InputStreamReader</code> inside another <code>BufferedReader</code> the way it&#39;s used here and (as the name suggests) the <code>BufferedReader</code> adds another layer of buffering that may or may not cause the behaviour you use. To get &quot;as direct as possible&quot; imput, use the <code>InputStreamReader</code> directly (though what Tim Moore suggests could still happen and cause the behaviour even without the <code>BufferedReader</code>)."},{"owner":{"user_id":17647337,"display_name":"fourleafclover"},"edited":false,"comment_id":133461207,"body":"What @TimMoore describes makes sense and seems to be the explanation. I found two related stackoverflow threads on this topic <a href=\"https://stackoverflow.com/questions/1066318/how-to-read-a-single-char-from-the-console-in-java-as-the-user-types-it\">here</a> and <a href=\"https://stackoverflow.com/questions/74085055/reading-system-in-character-by-character-without-buffering?rq=1\">here</a> which might be useful for future reference."},{"owner":{"user_id":4192839,"display_name":"CyberMafia"},"edited":false,"comment_id":133461377,"body":"That is how Buffered Streams work. They are used for better efficiency where data is read or write from buffer. You have decorated your input stream with buffered stream. So as soon as you start giving inputs, it will be sent to the buffer and once you hit enter, your program will start reading that data from buffer. You might want to explore Scanner class."},{"owner":{"user_id":17647337,"display_name":"fourleafclover"},"edited":false,"comment_id":133462426,"body":"It seems to go deeper than that @CyberMafia. The same behavior persists if InputStreamReader is not wrapped by BufferedReader, as @JoachimSauer pointed out. So it is rather caused by the buffer settings of the terminal itself (in my case on a Linux system). The buffering behavior of the terminal can be changed using e.g. <code>stty</code> as pointed out <a href=\"https://stackoverflow.com/a/6876253/17647337\">here</a>, but it is a change that is probably not required/intended by the authors of the example."}],"answers":[{"owner":{"user_id":2695990,"display_name":"fascynacja"},"up_vote_count":1,"is_accepted":true,"creation_date":1678097249,"answer_id":75649467,"body":"<p>System.in which you are using is buffered under the hood. The input will be send to the program only after you press <kbd>return</kbd>.<br />\nFor this kind of functionality is better to use: <code>Scanner</code> class.</p>\n<p>I think the autor of the book did not meant that the input was terminated at the &quot;.&quot; character. I think what was entered was <em>One Two.<kbd>return</kbd></em>, in the same way as you did.</p>\n"}],"owner":{"user_id":17647337,"display_name":"fourleafclover"},"view_count":57,"up_vote_count":2,"accepted_answer_id":75649467,"answer_count":1,"score":2,"creation_date":1678093259,"question_id":75648837,"body":"<p>I'm working through an example program provided in the Book &quot;Java A Beginnner's Guide (9th Ed.)&quot; by Herbert Schildt. The example reads:</p>\n<blockquote>\n<p>The following program demonstrates <code>read()</code> by reading characters from\nthe console until the user types a period.</p>\n</blockquote>\n<p>The code looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.io.*;\n\npublic class ReadChars {\n\n    public static void main(String[] args) throws IOException{\n\n        char c;\n        \n        BufferedReader br = new BufferedReader(\n                new InputStreamReader(System.in, System.console().charset()));\n        \n        System.out.println(&quot;Enter characters, period to quit.&quot;);\n        \n        do {\n            c = (char) br.read();\n            System.out.println(c);\n        } while (c != '.');\n    }\n\n}\n</code></pre>\n<p>The example output they provide looks like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter characters, period to quit.\nOne Two.\nO\nn\ne\n\nT\nw\no\n.\n</code></pre>\n<p>It to me suggests that the input was (as described) terminated at the <code>'.'</code> character and then printed to the console.</p>\n<p>However, when running the example myself, the output looks more like this:</p>\n<pre class=\"lang-none prettyprint-override\"><code>Enter characters, period to quit.\nabcde.fghij&lt;return&gt;\na\nb\nc\nd\ne\n.\n</code></pre>\n<p>That is, I first have to terminate the input with <code>&lt;return&gt;</code> and only then the characters are printed correctly up to the first <code>'.'</code> character in the input.</p>\n<p>I would like to understand what exactly is going on here. I assume it has something to do with the fact that the console input is somehow buffered and only flushed on <code>&lt;return&gt;</code>, but to me this is a bit confusing given the structure of the code, which reads and prints the characters in a do-while loop and should break as soon as a <code>'.'</code> is encountered.</p>\n<p>Would someone be able to break down the order of things that are happening that lead to this behavior (i.e. the last output above) in contrast to the example output (i.e. the first output above)?</p>\n"},{"tags":["java","spring","spring-boot"],"answers":[{"owner":{"user_id":11310433,"display_name":"localhost"},"up_vote_count":1,"is_accepted":true,"creation_date":1678083975,"answer_id":75647656,"body":"<p><strong>This solved the issue:</strong></p>\n<p>Issue with using schedular in Spring cloud. It has different configuration:\nreference: <a href=\"https://www.baeldung.com/spring-cloud-sleuth-single-application\" rel=\"nofollow noreferrer\">https://www.baeldung.com/spring-cloud-sleuth-single-application</a></p>\n<pre><code>@Configuration\n@EnableAsync\n@EnableScheduling\npublic class ThreadConfig extends AsyncConfigurerSupport\n  implements SchedulingConfigurer {\n \n    //...\n    \n    @Override\n    public void configureTasks(ScheduledTaskRegistrar scheduledTaskRegistrar) {\n        scheduledTaskRegistrar.setScheduler(schedulingExecutor());\n    }\n\n    @Bean(destroyMethod = &quot;shutdown&quot;) // I had to remove this line. because it gives error\n    public Executor schedulingExecutor() {\n        return Executors.newScheduledThreadPool(1);\n    }\n}\n</code></pre>\n<p>So, in my case proper dependency was not taken and during autoconfiguration it was giving an error.</p>\n"}],"owner":{"user_id":11310433,"display_name":"localhost"},"view_count":139,"up_vote_count":2,"accepted_answer_id":75647656,"answer_count":1,"score":2,"creation_date":1678080417,"question_id":75647321,"body":"<p>I am getting an error regarding accessibility issue while running the application.</p>\n<p>The <code>decorateTask()</code> method is a protected method of the ScheduledThreadPoolExecutor class, which means it can only be accessed by subclasses of <code>ScheduledThreadPoolExecutor</code>, or by other classes in the same package as <code>ScheduledThreadPoolExecutor</code>. If you are not accessing the method from a subclass or from the same package, you will need to modify your code to either extend <code>ScheduledThreadPoolExecutor</code> or move your code into the same package as <code>ScheduledThreadPoolExecutor</code>.</p>\n<p>Here is my springboot version:</p>\n<pre><code>&lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;2.7.2&lt;/version&gt;\n        &lt;relativePath/&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n</code></pre>\n<p>This is my java version and the spring cloud version:</p>\n<pre><code>&lt;java.version&gt;17&lt;/java.version&gt;\n&lt;spring-cloud.version&gt;2021.0.3&lt;/spring-cloud.version&gt;\n</code></pre>\n<p>I am getting this exception while executing it.</p>\n<pre><code>org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.boot.actuate.autoconfigure.metrics.task.TaskExecutorMetricsAutoConfiguration': Injection of autowired dependencies failed; nested exception is java.lang.reflect.InaccessibleObjectException: Unable to make protected java.util.concurrent.RunnableScheduledFuture java.util.concurrent.ScheduledThreadPoolExecutor.decorateTask(java.lang.Runnable,java.util.concurrent.RunnableScheduledFuture) accessible: module java.base does not &quot;opens java.util.concurrent&quot; to unnamed module @525b461a\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:405)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.populateBean(AbstractAutowireCapableBeanFactory.java:1431)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:619)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:542)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:335)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:333)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:208)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.preInstantiateSingletons(DefaultListableBeanFactory.java:955)\n    at org.springframework.context.support.AbstractApplicationContext.finishBeanFactoryInitialization(AbstractApplicationContext.java:918)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:583)\n    at org.springframework.boot.web.servlet.context.ServletWebServerApplicationContext.refresh(ServletWebServerApplicationContext.java:147)\n    at org.springframework.boot.SpringApplication.refresh(SpringApplication.java:734)\n    at org.springframework.boot.SpringApplication.refreshContext(SpringApplication.java:408)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:308)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1306)\n    at org.springframework.boot.SpringApplication.run(SpringApplication.java:1295)\n    at io.armadillo.aftfileuploads.AftFileUploadsApplication.main(AftFileUploadsApplication.java:23)\nCaused by: java.lang.reflect.InaccessibleObjectException: Unable to make protected java.util.concurrent.RunnableScheduledFuture java.util.concurrent.ScheduledThreadPoolExecutor.decorateTask(java.lang.Runnable,java.util.concurrent.RunnableScheduledFuture) accessible: module java.base does not &quot;opens java.util.concurrent&quot; to unnamed module @525b461a\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:354)\n    at java.base/java.lang.reflect.AccessibleObject.checkCanSetAccessible(AccessibleObject.java:297)\n    at java.base/java.lang.reflect.Method.checkCanSetAccessible(Method.java:199)\n    at java.base/java.lang.reflect.Method.setAccessible(Method.java:193)\n    at org.springframework.util.ReflectionUtils.makeAccessible(ReflectionUtils.java:577)\n    at org.springframework.cloud.sleuth.instrument.async.LazyTraceScheduledThreadPoolExecutor.makeAccessibleIfNotNull(LazyTraceScheduledThreadPoolExecutor.java:121)\n    at org.springframework.cloud.sleuth.instrument.async.LazyTraceScheduledThreadPoolExecutor.&lt;init&gt;(LazyTraceScheduledThreadPoolExecutor.java:205)\n    at org.springframework.cloud.sleuth.instrument.async.LazyTraceThreadPoolTaskScheduler.getScheduledThreadPoolExecutor(LazyTraceThreadPoolTaskScheduler.java:181)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.cloud.sleuth.instrument.async.ExecutorMethodInterceptor.invoke(ExecutorBeanPostProcessor.java:356)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:186)\n    at org.springframework.aop.framework.CglibAopProxy$CglibMethodInvocation.proceed(CglibAopProxy.java:763)\n    at org.springframework.aop.framework.CglibAopProxy$DynamicAdvisedInterceptor.intercept(CglibAopProxy.java:708)\n    at org.springframework.scheduling.concurrent.ThreadPoolTaskScheduler$$EnhancerBySpringCGLIB$$19449eea.getScheduledThreadPoolExecutor(&lt;generated&gt;)\n    at org.springframework.boot.actuate.autoconfigure.metrics.task.TaskExecutorMetricsAutoConfiguration.safeGetThreadPoolExecutor(TaskExecutorMetricsAutoConfiguration.java:83)\n    at org.springframework.boot.actuate.autoconfigure.metrics.task.TaskExecutorMetricsAutoConfiguration.lambda$bindTaskExecutorsToRegistry$0(TaskExecutorMetricsAutoConfiguration.java:61)\n    at java.base/java.util.LinkedHashMap.forEach(LinkedHashMap.java:721)\n    at org.springframework.boot.actuate.autoconfigure.metrics.task.TaskExecutorMetricsAutoConfiguration.bindTaskExecutorsToRegistry(TaskExecutorMetricsAutoConfiguration.java:56)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor$AutowiredMethodElement.inject(AutowiredAnnotationBeanPostProcessor.java:724)\n    at org.springframework.beans.factory.annotation.InjectionMetadata.inject(InjectionMetadata.java:119)\n    at org.springframework.beans.factory.annotation.AutowiredAnnotationBeanPostProcessor.postProcessProperties(AutowiredAnnotationBeanPostProcessor.java:399)\n    ... 17 common frames omitted\n</code></pre>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"user_id":768644,"display_name":"rzwitserloot"},"edited":false,"comment_id":133457201,"body":"You can rewrite the entire stream API and include the <code>&lt;T&gt; void foo() throws T</code> trick, but that&#39;s.. rather hacky and not a good idea. You can make your own <code>UncheckedDatabaseException</code> and throw that (<code>try { return x.next(); } catch (DatabaseException e) { throw new UncheckedDatabaseException(e); }</code>). But, really, lambdas / stream API is not at all a good fit here. &quot;I want to convert this to a stream since this also behaves like a lazy operation&quot; - no you don&#39;t. Streams have about 20 properties. This concept shares &#39;lazy&#39; as one, and misses on the other 19."}],"answers":[{"owner":{"user_id":6395627,"display_name":"Slaw"},"up_vote_count":1,"is_accepted":false,"creation_date":1678084099,"answer_id":75647670,"body":"<p>First, note the types in <code>java.util.function</code> and <code>java.util.stream</code> do not support throwing <em>checked</em> exceptions. If you really want to stream your rows, then somewhere you're going to have to catch the checked exception, wrap it in an <em>unchecked exception</em>, and then throw said unchecked exception. In the attempt you show in your question, you would do that inside the <code>Supplier</code> implementation.</p>\n<p>That said, the <code>generate</code> method creates an <em>infinite</em> stream. I doubt you have an infinite number of rows to return. The next method to consider is <code>iterate</code> (the finite overload), but the arguments it takes don't lend themselves to what you're trying to do. At least not directly.</p>\n<p>Probably the most correct solution is to first create a <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Spliterator.html\" rel=\"nofollow noreferrer\"><code>Spliterator</code></a> implementation to iterate the rows. Then use <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/stream/StreamSupport.html\" rel=\"nofollow noreferrer\"><code>StreamSupport</code></a> to create a <code>Stream</code>.</p>\n<p>For example:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import java.util.Objects;\nimport java.util.Spliterators.AbstractSpliterator;\nimport java.util.function.Consumer;\nimport java.util.stream.Stream;\nimport java.util.stream.StreamSupport;\n\npublic class MyClassSpliterator extends AbstractSpliterator&lt;Row&gt; {\n\n    public static Stream&lt;Row&gt; streamRows(MyClass myClass) {\n        return StreamSupport.stream(new MyClassSpliterator(myClass), false);\n    }\n\n    private final MyClass myClass;\n\n    public MyClassSpliterator(MyClass myClass) {\n        // Assumes an unknown number of rows. Also, assumes NONNULL\n        // characteristic due to the assumption that a null value\n        // means there's no more rows to process. Add or change\n        // characteristics as appropriate.\n        super(Long.MAX_VALUE, NONNULL);\n        this.myClass = Objects.requireNonNull(myClass);\n    }\n    \n    @Override\n    public boolean tryAdvance(Consumer&lt;? super Row&gt; action) {\n        try {\n            // Assumes MyClass#next() will return null when there's no\n            // more rows to process.\n            Row next = myClass.next();\n            if (next != null) {\n                action.accept(next);\n                return true;\n            }\n            return false;\n        } catch (DatabaseException ex) {\n            // Should probably create and use a custom unchecked exception\n            throw new RuntimeException(ex);\n        }\n    }\n}\n</code></pre>\n<p>Where you place the <code>Spliterator</code> implementation and the <code>streamRows</code> method are obviously up to you.</p>\n<p>Note the above extends <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Spliterators.AbstractSpliterator.html\" rel=\"nofollow noreferrer\"><code>AbstractSpliterator</code></a>. That class makes it easier to create <code>Spliterator</code> implementations. By default, it supports limited and relatively naive parallelism. It basically just buffers a bunch of elements so they can be split up. If you have a better splitting solution, or just don't want to support any splitting, then override the <code>trySplit()</code> method.</p>\n<p>And note if you already have an <code>Iterator</code> implementation for your <code>MyClass</code>, then it may be more appropriate to use one of the methods in <a href=\"https://docs.oracle.com/en/java/javase/19/docs/api/java.base/java/util/Spliterators.html\" rel=\"nofollow noreferrer\"><code>Spliterators</code></a> to create the <code>Spliterator</code>.</p>\n"}],"owner":{"user_id":21339766,"display_name":"bigi"},"view_count":92,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678079482,"question_id":75647244,"body":"<p>I have a class object that's like a database cursor, it has a <code>next()</code> method that reads the next table row.</p>\n<pre><code>class MyClass{\n   Row next() throws DatabaseException {\n   ...\n   }\n}\n</code></pre>\n<p>I want to convert this to a stream since this also behaves like a lazy operation.</p>\n<p>I tried using Supplier which is accepted by <code>Stream.generate()</code>. <code>Supplier</code> has a method <code>get()</code> which has to be overridden for custom implementations.</p>\n<pre><code>\nStream&lt;Row&gt; stream = Stream.generate (new Supplier &lt;Row&gt;() { \n   @Override public Row get() { \n      // custom implementation\n      ...\n   }\n});\n\n</code></pre>\n<p>The only problem using this is that MyClass.next() throws an exception while Supplier.get() doesnt allow exceptions. Is there any other way to create a custom stream for such class?</p>\n"},{"tags":["java","spring","hibernate","junit"],"comments":[{"owner":{"user_id":9513184,"display_name":"Unmitigated"},"edited":false,"comment_id":133451591,"body":"What does <code>names</code> currently return for you?"},{"owner":{"user_id":8593764,"display_name":"jennifer ruurs"},"edited":false,"comment_id":133451603,"body":"It returns: null null null"},{"owner":{"user_id":9513184,"display_name":"Unmitigated"},"edited":false,"comment_id":133451607,"body":"Change <code>List&lt;Map&lt;String,String&gt;&gt;</code> to <code>List&lt;Map&lt;String, Object&gt;&gt;</code>. Then update the <code>map</code> call to use <code>(String)((Map)e.get(&quot;customer&quot;)).get(&quot;name&quot;)</code>."}],"answers":[{"owner":{"user_id":9513184,"display_name":"Unmitigated"},"up_vote_count":1,"is_accepted":true,"creation_date":1678039575,"answer_id":75644306,"body":"<p>It looks like you have nested <code>Map</code>s. You can solve this by changing <code>List&lt;Map&lt;String,String&gt;&gt;</code> to <code>List&lt;Map&lt;String, Object&gt;&gt;</code>, then access the <code>name</code> key of the <code>Map</code> from the <code>customer</code> key:</p>\n<pre class=\"lang-java prettyprint-override\"><code>(String)((Map)e.get(&quot;customer&quot;)).get(&quot;name&quot;)\n</code></pre>\n"}],"owner":{"user_id":8593764,"display_name":"jennifer ruurs"},"view_count":26,"up_vote_count":2,"accepted_answer_id":75644306,"answer_count":1,"score":2,"creation_date":1678038689,"question_id":75644225,"body":"<p>I want to test (values that are definitely inside my database (I see these values when i am debugging))\nI want to get get a list of strings from an linkedArrayList with a LinkedHashMap inside it (named names in code bellow).</p>\n<p>I expect that this is wrong:</p>\n<pre><code>List&lt;String&gt; names = body.stream().map(e-&gt; e.get(&quot;name&quot;)).collect(Collectors.toList());\n</code></pre>\n<p>Do you know how I can get my test passed by receiving a list of strings of of the attribute name?</p>\n<p><a href=\"https://i.stack.imgur.com/kKYrF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kKYrF.png\" alt=\"DebugResults\" /></a></p>\n<pre><code>public class FinanceRestControllerTests {\n    private RestTemplate restTemplate;\n\n    @Before\n    public void setUp() {\n        restTemplate = new RestTemplate();\n    }\n    \n    @Test\n    public void testGetContracts() {\n        ResponseEntity&lt;List&gt; response = restTemplate.getForEntity(&quot;http://localhost:5050/finance/rest/contracts&quot;, List.class);\n        List&lt;Map&lt;String,String&gt;&gt; body = response.getBody();\n        System.out.println(body);\n        MatcherAssert.assertThat(response.getStatusCodeValue(), Matchers.equalTo(200));\n        List&lt;String&gt; names = body.stream().map(e-&gt; e.get(&quot;name&quot;)).collect(Collectors.toList());\n        names.forEach((n) -&gt; System.out.println(n));\n        MatcherAssert.assertThat(names, Matchers.containsInAnyOrder(&quot;Jen&quot;, &quot;Nakzo&quot;, &quot;Renes&quot;));\n    }\n}\n</code></pre>\n"},{"tags":["java","postgresql","kotlin","jooq","jooq-codegen"],"comments":[{"owner":{"user_id":19585145,"display_name":"razzledazzle88"},"edited":false,"comment_id":133448372,"body":"I&#39;ve fixed it by changing the Some type field to the generated one, but I don&#39;t think this is a good solution"}],"answers":[{"owner":{"user_id":521799,"display_name":"Lukas Eder"},"up_vote_count":1,"is_accepted":true,"creation_date":1678089926,"answer_id":75648382,"body":"<h2>Why doesn't it work</h2>\n<p>jOOQ can only auto-map <code>EnumType</code> enums to a PostgreSQL <code>enum</code> type out of the box, not custom enum types. The main reasons include:</p>\n<ul>\n<li>The type name is relevant in many types of queries, where a bind variable has to be cast to the correct type, e.g. <code>cast(? as users.some_type)</code> or when using arrays: <code>cast(? as users.some_type[])</code>. It just wouldn't work, otherwise, with pgjdbc.</li>\n<li>Some PostgreSQL enum values may be illegal identifiers in Java/kotlin/the JVM, so there needs to be a definition of <code>EnumType.getLiteral()</code> for each value, even if in many cases, that's the same value as the Java/kotlin literal for the enum.</li>\n</ul>\n<p>As such, you cannot expect your own user defined type to &quot;just work&quot;. The fact that it is an <code>enum</code> doesn't change that. It's no different from e.g. a <code>BIGINT</code> column in PostgreSQL being mapped to something like <code>MyType</code>. jOOQ can't just assume any mapping.</p>\n<h2>How to get it to work</h2>\n<p>You can easily attach an <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-advanced/codegen-config-database/codegen-database-forced-types/codegen-database-forced-types-enum-converter/\" rel=\"nofollow noreferrer\"><code>enumConverter</code></a> (or <a href=\"https://www.jooq.org/doc/latest/manual/code-generation/codegen-advanced/codegen-config-database/codegen-database-forced-types/\" rel=\"nofollow noreferrer\">any other type of converter</a>) to your generated column. Behind the scenes, jOOQ will still use the generated converter for variable binding, but at least in your user code, you'll only see your own type now.</p>\n"}],"owner":{"user_id":19585145,"display_name":"razzledazzle88"},"view_count":40,"up_vote_count":2,"accepted_answer_id":75648382,"answer_count":1,"score":2,"creation_date":1678018138,"question_id":75642109,"body":"<p>I have an enum SomeType with following structure:</p>\n<pre><code>enum class SomeType {\n    Type1, \n    Type2\n}\n</code></pre>\n<p>I also have a table with that enum:</p>\n<pre><code>create type users.some_type as enum ('Type1','Type2');\ncreate table users.some\n(\n    id   bigint default nextval('users.some_seq'),\n    type users.some_type not null,\n    primary key (id)\n);\n</code></pre>\n<p>The enum is generated as:</p>\n<pre><code>@Suppress(&quot;UNCHECKED_CAST&quot;)\nenum class SomeType(@get:JvmName(&quot;literal&quot;) public val literal: String) : EnumType {\n    Type1(&quot;Type1&quot;),\n    Type2(&quot;Type2&quot;);\n    override fun getCatalog(): Catalog? = schema.catalog\n    override fun getSchema(): Schema = Users.USERS\n    override fun getName(): String = &quot;some_type&quot;\n    override fun getLiteral(): String = literal\n}\n</code></pre>\n<p>However, when I try to write an insert method for that table, it doesn't recognise the enum type:</p>\n<pre><code>@Transactional\n    fun save(some: Some) =\n        dslContext.insertInto(\n            SOME,SOME.TYPE,\n        ).values(some.someType)\n</code></pre>\n<p>I'm using Kotlin and Postgres, however I don't think that this problem is Kotlin-specific</p>\n"},{"tags":["java","unit-testing","apache-kafka","apache-kafka-streams"],"answers":[{"owner":{"user_id":1820013,"display_name":"bbejeck"},"up_vote_count":1,"is_accepted":false,"creation_date":1678115255,"answer_id":75652478,"body":"<p>In Kafka Streams - Stream-Table joins are only triggered by new incoming KStream records; incoming KTable records only update the KTable.  In your test here, can you switch the order of calls and execute <code>inputTopicInsurances.pipeInput</code> first, then the <code>inputTopicEmployees.pipeInput</code> method, and see if that works?</p>\n"}],"owner":{"user_id":1144950,"display_name":"Thomas Mueller"},"view_count":93,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678015272,"question_id":75641863,"body":"<p>I have a question about to testing kafak streams, particulary testing joins inside kafka streams.\ni have a small use case with an employee which I want to join with an insurance. The output will be an enriched employee with the name of the insurance. The reference will be the insuranceIdx in the employee.</p>\n<p>Here is my topology for the use case:</p>\n<pre><code>public class EnrichEmployeesTopoplogy {\n\n\n    public void createTopology(final StreamsBuilder builder) {\n\n        final Serde&lt;EnrichedEmployee&gt; enrichedEmployeeSerde = SerdeFactory.serdeForEnrichedEmployee();\n        final Serde&lt;Insurance&gt; insuranceSerde = SerdeFactory.serdeForInsurance();\n        final Serde&lt;Employee&gt; employeeSerde = SerdeFactory.serdeForEmployee();\n\n        // read the incomming employee events in a stream\n        final KStream&lt;String, Employee&gt; employeeStream =\n                builder.stream(&quot;employees&quot;, Consumed.with(Serdes.String(), employeeSerde));\n\n        // rekey the incomming employee stream that it will have the same key as the insurance.\n        final KStream&lt;String, Employee&gt; rekeyedEmployeeStream\n                = employeeStream.selectKey((k, v) -&gt; String.valueOf(v.getInsuranceIdx()));\n\n\n        // read the incomming insurance events in a table\n        final KTable&lt;String, Insurance&gt; insuranceTable = builder.table(&quot;insurances&quot;,\n                Consumed.with(Serdes.String(), insuranceSerde));\n\n        // create the value joiner\n        ValueJoiner&lt;Employee, Insurance, EnrichedEmployee&gt; employeeJoiner =\n                (employee, insurance) -&gt;\n                        EnrichedEmployee.builder()\n                                .idx(employee.getIdx())\n                                .email(employee.getEmail())\n                                .insuranceName(insurance.getName())\n                                .build();\n\n        // create the joined with \n        final Joined&lt;String, Employee, Insurance&gt; joined = Joined.with(Serdes.String(), employeeSerde, insuranceSerde);\n\n\n        rekeyedEmployeeStream.join(insuranceTable, employeeJoiner, joined)\n                .to(&quot;enriched-employees&quot;, Produced.with(Serdes.String(), enrichedEmployeeSerde));\n\n\n    }\n}\n</code></pre>\n<p>When I test this behaviour with an real Kafka, it will work as it should.\nNow I've write a unit test using kafka-streams-test-utils</p>\n<p>Here is my test code:</p>\n<pre><code>class EnrichedEmployeeTopologyTest {\n\n\n    private TopologyTestDriver testDriver;\n    private TestInputTopic&lt;String, Employee&gt; inputTopicEmployees;\n    private TestInputTopic&lt;String, Insurance&gt; inputTopicInsurances;\n    private TestOutputTopic&lt;String, EnrichedEmployee&gt; outputTopicEnrichedEmployees;\n\n    @BeforeEach\n    void setUp() {\n\n        final Serde&lt;EnrichedEmployee&gt; enrichedEmployeeSerde = SerdeFactory.serdeForEnrichedEmployee();\n        final Serde&lt;Insurance&gt; insuranceSerde = SerdeFactory.serdeForInsurance();\n        final Serde&lt;Employee&gt; employeeSerde = SerdeFactory.serdeForEmployee();\n\n        final Properties streamsConfiguration = new Properties();\n        streamsConfiguration.put(StreamsConfig.APPLICATION_ID_CONFIG, &quot;test01&quot;);\n        streamsConfiguration.put(StreamsConfig.BOOTSTRAP_SERVERS_CONFIG, &quot;dummy:9092&quot;);\n\n        final EnrichEmployeesTopoplogy enrichEmployeesTopoplogy = new EnrichEmployeesTopoplogy();\n        final StreamsBuilder builder = new StreamsBuilder();\n\n        enrichEmployeesTopoplogy.createTopology(builder);\n\n        final Topology topology = builder.build();\n\n        testDriver = new TopologyTestDriver(topology, streamsConfiguration);\n        inputTopicEmployees = testDriver.createInputTopic(&quot;employees&quot;, Serdes.String().serializer(), employeeSerde.serializer());\n        inputTopicInsurances = testDriver.createInputTopic(&quot;insurances&quot;, Serdes.String().serializer(), insuranceSerde.serializer());\n        outputTopicEnrichedEmployees = testDriver.createOutputTopic(&quot;enriched-employees&quot;, Serdes.String().deserializer(), enrichedEmployeeSerde.deserializer());\n\n    }\n\n    @AfterEach\n    void tearDown() {\n        testDriver.close();\n    }\n\n    @Test\n    void createTopology() {\n        final String employeeIdx = UUID.randomUUID().toString();\n        final String insuranceIdx = UUID.randomUUID().toString();\n\n        final Employee employee = Employee.builder().idx(employeeIdx).email(&quot;foo1@bar.de&quot;).insuranceIdx(insuranceIdx).build();\n        final Insurance insurance = Insurance.builder().idx(insuranceIdx).name(&quot;insurance 01&quot;).build();\n\n\n        inputTopicEmployees.pipeInput(employee.getIdx(), employee);\n        inputTopicInsurances.pipeInput(insurance.getIdx(), insurance);\n\n        Assertions.assertEquals(true, !outputTopicEnrichedEmployees.isEmpty());\n    }\n}\n</code></pre>\n<p>The result will be that the assertion alway will fail.</p>\n<p>I've tried to experiment a little with the stream configuration values. But nothing will change.\nMy assumption is that it could be a timing problem within the test.\nCan anybody help me about this problem?</p>\n<p>Best Regards\nThomas</p>\n"},{"tags":["java","spring","spring-boot","mocking"],"answers":[{"owner":{"user_id":3405171,"display_name":"v.ladynev"},"up_vote_count":1,"is_accepted":false,"creation_date":1677846628,"answer_id":75627101,"body":"<p>I prefer to use an <code>interface</code> for <code>@Service</code> because we can make interface public and implementation package access. So it makes the scope tighter.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface FooService {\n\n}\n\n@Service\nclass FooServiceImpl implements FooService {\n\n}\n</code></pre>\n<p>But it is for service that is used like a facade only.\n<code>Controller -&gt; Facade Service -&gt; other classes from Spring context</code></p>\n<p>For &quot;other classes&quot; from Spring context that can be used by <code>Facade Service</code> I never use interfaces.</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Service\nclass FooServiceImpl {\n\n    private final FooServiceHelper helper;\n\n    @Autowired\n    public FooServiceImpl(FooServiceHelper helper) {\n        this.helper = helper;\n    }\n\n}\n</code></pre>\n<p>We can go even further and say: even we have multiple implementations, maybe better to have an abstract class or default implementation rather than an interface.</p>\n"},{"owner":{"user_id":21000666,"display_name":"Stephen Williams"},"up_vote_count":0,"is_accepted":false,"creation_date":1684330908,"answer_id":76272791,"body":"<p>In Java applications, one good reason to create an interface that only has a single implementation is to implement <strong>D</strong>ependency inversion (<strong>D</strong> as in SOLI<strong>D</strong>).</p>\n<p>For example, in an application that has an onion / hexagonal style architecture with an infrastructure layer surrounding an application layer surrounding a model layer, you might define a <code>PersonRepository</code> interface in the application layer and a <code>JdbcPersonRepository</code> class that implements <code>PersonRepository</code> in the infrastructure layer. Methods of classes defined in the application layer call methods on <code>PersonRepository</code> to save and search for <code>Person</code> domain objects. <code>JdbcPersonRepository</code> in the infrastructure layer allows the application to save and search for <code>Person</code> object state in a MySQL database using JDBC.</p>\n<p>In this design, although code execution flows down from application layer code to infrastructure layer code, code dependencies are directed up from the infrastructure layer to the application layer.</p>\n<p>Search for explanations of onion architecture, hexagonal architecture, ports and adapters architecture and, in particular, dependency inversion.</p>\n"}],"owner":{"user_id":2648,"display_name":"D&#243;nal"},"view_count":53,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1677842587,"question_id":75626455,"body":"<p>In my Spring application, there's typically an interface for each service, even if there's only a single implementation, e.g.</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface FooService {\n  Foo getFoo(long id)\n\n  Iterable&lt;Foo&gt; findAllFoos()\n\n  void deleteFoo(long id)\n}\n\n@Service\n@Transactional\npublic class FooServiceImpl implements FooService {\n    // method implementations omitted\n}\n</code></pre>\n<p>I think this practice originated in the olden days when mocking libraries could only generate a mock for an interface. But modern mocking libraries like Mockito can mock a class just as easily as an interface, so I'm not sure if there's any practical benefit to defining an interface for (Spring/Spring Boot) services with a single implementation?</p>\n"},{"tags":["java","android","react-native","kotlin","gradle"],"answers":[{"owner":{"user_id":10388981,"display_name":"Yang Kang"},"up_vote_count":1,"is_accepted":false,"creation_date":1677840775,"answer_id":75626128,"body":"<p>Looks like a gradle version compatibility issue.</p>\n<p>You can try to upgrade the kotlin version to 1.8(Modify in build.gradle).</p>\n<p>Or downgrade the gradle version to below 7.6(Modify in project/gradle/gradle-wrapper.properties).</p>\n<p>See more about gradle version compatibility：\n<a href=\"https://docs.gradle.org/current/userguide/compatibility.html#kotlin\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/compatibility.html#kotlin</a></p>\n"}],"owner":{"user_id":16732933,"display_name":"Rohan Patil"},"view_count":619,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1677840318,"question_id":75626057,"body":"<p>I am getting kotlin version incompatibility issue. I had made changes to my project level build.gradle file then also the issue persist.</p>\n<p>I am getting the following error after Gradle sync:\nC:/Users/ADMIN/.gradle/caches/8.0.1/generated-gradle-jars/gradle-api-8.0.1.jar!/META-INF/configuration-cache.kotlin_module: Module was compiled with an incompatible version of Kotlin. The binary version of its metadata is 1.8.0, expected version is 1.6.0.</p>\n<p>build.gradle</p>\n<pre><code>buildscript {\n    ext {\n        buildToolsVersion = &quot;31.0.0&quot;\n        minSdkVersion = 24\n        compileSdkVersion = 31\n        kotlinVersion = &quot;1.6.0&quot;\n        targetSdkVersion = 31\n        googlePlayServicesAuthVersion = &quot;19.2.0&quot;\n\n        if (System.properties['os.arch'] == &quot;aarch64&quot;) {\n            // For M1 Users we need to use the NDK 24 which added support for aarch64\n            ndkVersion = &quot;24.0.8215888&quot;\n        } else {\n            // Otherwise we default to the side-by-side NDK version from AGP.\n            ndkVersion = &quot;21.4.7075529&quot;\n        }\n    }\n    repositories {\n        google()\n        mavenCentral()\n    }\n    dependencies {\n        classpath('com.android.tools.build:gradle:7.2.1')\n        classpath 'com.google.gms:google-services:4.3.14'\n        classpath(&quot;com.facebook.react:react-native-gradle-plugin&quot;)\n        classpath(&quot;de.undercouch:gradle-download-task:5.0.1&quot;)\n        classpath(&quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlinVersion&quot;)\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        maven {\n            url &quot;$rootDir/../node_modules/react-native/android&quot;\n        }\n        maven {\n            url &quot;$rootDir/../node_modules/jsc-android/dist&quot;\n        }\n        maven {\n            url &quot;https://www.jitpack.io&quot;\n        }\n        mavenCentral {\n            content {\n                excludeGroup &quot;com.facebook.react&quot;\n            }\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","spring","maven","liquibase","alfresco"],"comments":[{"owner":{"user_id":266254,"display_name":"bilak"},"edited":false,"comment_id":133388576,"body":"are you also using spring-boot or just spring? Because if only spring this won&#39;t work for you."},{"owner":{"user_id":5861808,"display_name":"Amit Agarwal"},"edited":false,"comment_id":133397090,"body":"@bilak We are using spring and spring boot jar files but the application is packaged as a war file and deployed on an external tomcat server using Docker. Could you please help with how we can provide the values from the property file? in liquibase db-changelog.xml"},{"owner":{"user_id":5861808,"display_name":"Amit Agarwal"},"edited":false,"comment_id":133402664,"body":"Anyone, Please help as I am stuck here. Also, is there any other way to provide value from a property file in liquibase?"},{"owner":{"user_id":266254,"display_name":"bilak"},"edited":false,"comment_id":133406214,"body":"It seems like your application doesn&#39;t contain spring boot. Which version of spring-boot do you use? Can you try to provide some <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">simple application</a> and store it somewhere?"},{"owner":{"user_id":5861808,"display_name":"Amit Agarwal"},"edited":false,"comment_id":133462524,"body":"@bilak Please find below the list of Spring boot Jars added to our application:   spring-boot-2.5.12.jar spring-boot-autoconfigure-2.5.12.jar spring-boot-actuator-autoconfigure-2.5.12.jar spring-boot-starter-2.5.12.jar spring-boot-actuator-2.5.12.jar spring-boot-starter-security-2.5.12.jar spring-boot-starter-tomcat-2.5.12.jar spring-boot-starter-web-2.5.12.jar  We could not provide the actual project because of security reasons but we are using the project similar to this repo: <a href=\"https://github.com/OpenPj/alfresco-process-services-project-sdk/tree/2.x\" rel=\"nofollow noreferrer\">github.com/OpenPj/alfresco-process-services-project-sdk/tree&zwnj;&#8203;/&hellip;</a>"}],"answers":[{"owner":{"user_id":4571544,"display_name":"dekkard"},"up_vote_count":1,"is_accepted":false,"creation_date":1678112472,"answer_id":75651968,"body":"<p>It's quite strange to see that you have the <code>META-INF</code> directory under <code>/WEB-INF/classes</code>.<br />\nObviously this is not the location Spring Boot will look for the Liquibase changesets by default.<br />\nYou'll have to configure it explicitly in your <code>application.properties</code> to make this work, something like:</p>\n<pre><code>spring.liquibase.change-log=classpath:META-INF/liquibase/db.changelog.xml\n</code></pre>\n<p>You can add <code>logging.level.liquibase=debug</code> to you properties to log the exact locations Liquibase in reading from and queries it performs to\nbring the DB to the desired state.</p>\n"}],"owner":{"user_id":5861808,"display_name":"Amit Agarwal"},"view_count":192,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1677680637,"question_id":75604960,"body":"<p>I have a spring application on jdk 11</p>\n<p><strong>Note: The application is spring packaged as war packaging.</strong></p>\n<p>using maven, with the following liquibase dependency :</p>\n<pre><code>   &lt;dependency&gt;\n            &lt;groupId&gt;org.liquibase&lt;/groupId&gt;\n            &lt;artifactId&gt;liquibase-core&lt;/artifactId&gt;\n            &lt;version&gt;4.15.0&lt;/version&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>The changelog main file is named <strong>db.changelog.xml</strong> , and is located under <strong>/WEB-INF/classes/META-INF/liquibase/</strong> with the following configuration on application.properties :</p>\n<pre><code>spring.liquibase.parameters.firstname=admin1\nspring.liquibase.parameters.email=admin1@abc.com\n</code></pre>\n<p><strong>Spring Version: 5.3.22</strong></p>\n<p>and <strong>db-changelog.xml</strong> looks like :</p>\n<pre><code>    &lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;databaseChangeLog xmlns=&quot;http://www.liquibase.org/xml/ns/dbchangelog&quot;\n                   xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n                   xmlns:ext=&quot;http://www.liquibase.org/xml/ns/dbchangelog-ext&quot;\n                   xsi:schemaLocation=&quot;http://www.liquibase.org/xml/ns/dbchangelog http://www.liquibase.org/xml/ns/dbchangelog/dbchangelog-3.0.xsd&quot;&gt;\n\n  &lt;changeSet id=&quot;1&quot; author=&quot;abc&quot;&gt;\n\n    &lt;!--  USERS --&gt;\n\n    &lt;createTable tableName=&quot;USER&quot;&gt;\n      &lt;column name=&quot;login&quot; type=&quot;varchar(50)&quot; /&gt;\n      &lt;column name=&quot;first_name&quot; type=&quot;varchar(50)&quot; /&gt;\n      &lt;column name=&quot;email&quot; type=&quot;varchar(100)&quot; /&gt;\n    &lt;/createTable&gt;\n\n\n                             \n     &lt;insert tableName=&quot;USER&quot;&gt;\n        &lt;column name=&quot;login&quot; value=&quot;amit&quot;/&gt;\n        &lt;column name=&quot;first_name&quot; value=&quot;${firstname}&quot;/&gt;\n        &lt;column name=&quot;email&quot; value=&quot;${email}&quot;/&gt;\n    &lt;/insert&gt;&lt;/changeSet&gt;\n&lt;/databaseChangeLog&gt;\n</code></pre>\n<p>When I start my tomcat server using the liquibase SQL insert the string value in the DB column as pictured below:</p>\n<p><a href=\"https://i.stack.imgur.com/XMKIe.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/XMKIe.png\" alt=\"enter image description here\" /></a></p>\n<p>Can anyone please help? What I am missing here.</p>\n"},{"tags":["java","groovy","dynamic"],"comments":[{"owner":{"user_id":2350068,"display_name":"saurav"},"edited":false,"comment_id":133371305,"body":"Quick note: Variable &quot;a_variable_not_defined_anywhere&quot; is not defined prior in code script"},{"owner":{"user_id":438992,"display_name":"Dave Newton"},"edited":false,"comment_id":133371419,"body":"Whether or not it&#39;s &quot;compiled&quot; isn&#39;t super relevant, it has to do with language semantics. Groovy <b>could</b> do the same thing, but see <a href=\"https://issues.apache.org/jira/browse/GROOVY-98\" rel=\"nofollow noreferrer\">issues.apache.org/jira/browse/GROOVY-98</a> from a long time ago."},{"owner":{"user_id":2350068,"display_name":"saurav"},"edited":false,"comment_id":133371494,"body":"If I do println(foo) in Groovy Console, it does give No Such Property Excecption or even when I do so in groovysh."},{"owner":{"user_id":438992,"display_name":"Dave Newton"},"edited":false,"comment_id":133372138,"body":"Right, but as you noted it&#39;s not being evaluated. If you swap the <code>||</code> you get the property exception."},{"owner":{"user_id":2350068,"display_name":"saurav"},"edited":false,"comment_id":133372199,"body":"Yeah I understand that. But if it is the way I described in question, shouldn&#39;t this throw Property Not Found exception or something?"},{"owner":{"user_id":438992,"display_name":"Dave Newton"},"edited":false,"comment_id":133372428,"body":"I don&#39;t think so, because if it isn&#39;t evaluated there&#39;s nothing to throw the exception. Properties are looked up w/ <code>getProperty</code>, if it&#39;s not called, it won&#39;t know it doesn&#39;t exist. It&#39;s not the same as a variable. Scripts have a root object that props are stuck onto (you can see what&#39;s happening if you decompile the byte code)."}],"answers":[{"owner":{"user_id":15053047,"display_name":"IWilms"},"up_vote_count":1,"is_accepted":true,"creation_date":1677705698,"answer_id":75609118,"body":"<p>In Groovy script the variable <code>a_variable_not_defined_anywhere</code> <em>could</em> be defined at runtime in <code>binding.variables</code> (see <a href=\"https://docs.groovy-lang.org/latest/html/api/groovy/lang/Binding.html\" rel=\"nofollow noreferrer\">binding</a>). The binding context for the script is determined at runtime, therefore it compiles. At runtime, the second condition of the or statement is not executed, as already mentioned.</p>\n<p>The point is that you <em>could</em> inject the variable before executing the script.\nIn Java, there is no binding. So the compiler knows already at compile time that something's off and throws an exception.</p>\n<p><strong>EDIT</strong>: Hopefully, this example makes it a bit clearer than the one before:</p>\n<pre><code>    // Let's say this is your code:\n    String code = &quot;println(a)&quot;\n    // Variable &quot;a&quot; is not defined, but the code compiles\n    // in Groovy, because &quot;a&quot; could exist at runtime\n  \n    def sh = new GroovyShell(this.class.classLoader, new Binding([a: &quot;Hello World&quot;]))\n    // Here, &quot;a&quot; exists at runtime -&gt; the code runs just fine.\n    sh.evaluate(code)\n\n    def shRuntimeError = new GroovyShell(this.class.classLoader, new Binding([:]))\n    // Here, &quot;a&quot; does not exist at runtime -&gt; throws MissingPropertyException.\n    shRuntimeError.evaluate(code)\n</code></pre>\n"}],"owner":{"user_id":2350068,"display_name":"saurav"},"view_count":69,"up_vote_count":2,"accepted_answer_id":75609118,"answer_count":1,"score":2,"creation_date":1677611515,"question_id":75596353,"body":"<p>When I run this code in Groovy, it runs successfully. It even compiles successfully using <code>groovyc</code>.</p>\n<pre><code>if (2&lt;3 || a_variable_not_defined_anywhere) {\n  println &quot;This is still working&quot;\n}\n</code></pre>\n<p>This prints out the output same as print statement. I understand that when first condition in &quot;or&quot; condition is successful, it will not even check the second condition.</p>\n<p>But a similar &quot;If&quot; structure in Java errors out saying that variable is not defined.</p>\n<p>My question is why it is running in Groovy and not in Java? When both are compiled languages.\nEven in Python the above &quot;If&quot; structure works, but Python is Interpreted in nature.\nOr does this have to do with the fact that both Groovy and Python are Dynamic in nature?</p>\n<p>Can someone please clarify this?\nThanks</p>\n<p>Update: With respect to bindings, I tried this code:</p>\n<pre><code>if (2&lt;3 || a_variable_not_defined_anywhere) {\n  println &quot;This is still working&quot;\n}\na = 2\nprintln binding.variables\n</code></pre>\n<p>This actually printed &quot;a&quot; as binding variables but not &quot;a_variable_not_defined_anywhere&quot;</p>\n<p>So not sure it has anything to do with bindings here.</p>\n"},{"tags":["java","rest"],"answers":[{"owner":{"user_id":2879245,"display_name":"Michał Marcinkowski"},"up_vote_count":1,"is_accepted":true,"creation_date":1677572085,"answer_id":75589406,"body":"<p>I do not see any problems with idempotency in the last situation you've described, even if the PUT from point 2. got called several times it is gonna create a new entity for the first time, and then just update the existing record. It seems rather then PUT misusage to create a new record, but to be fair, I wouldn't consider it as a problem.</p>\n<p>In general it depends on your business case, needs etc. Normally if you try to use PUT to update non existing object, then API should return you an error about it and it is the client responsibility to determine what's next. Then depending on the business scenario you have to recreate the object with POST (and this is not same object anymore, because it will have another ID), or restore it from soft-delete state. Personally it is not a problem in any imaginable for me scenario.</p>\n<p>Concluding - all the approaches are still perfectly idempotent if you ask me.</p>\n"}],"owner":{"user_id":19630441,"display_name":"남혁준"},"view_count":37,"up_vote_count":2,"accepted_answer_id":75589406,"answer_count":1,"score":2,"creation_date":1677569650,"question_id":75589041,"body":"<p>I studied the difference between PUT and PATCH.</p>\n<p>Of which I understood that if I use PUT, it creates the target if it doesn't exist and updates if it exists.</p>\n<p>OK, so far no problems.</p>\n<p>Now it's time to consider the idempotency problem.</p>\n<p>The ID of each data is auto-generated or auto-incremented.</p>\n<ol>\n<li><p>Insert data using POST.</p>\n</li>\n<li><p>Use PUT to change the data of the IDs just created.</p>\n</li>\n<li><p>No matter how many times you try 2, the result is the same.</p>\n</li>\n</ol>\n<p>No problem!</p>\n<p>Now, let's assume that data is deleted in the middle.</p>\n<ol>\n<li><p>Insert data using POST.</p>\n</li>\n<li><p>Use PUT to change the data of the IDs just created.</p>\n</li>\n<li><p>I just used DELETE to delete the data of changed IDs.</p>\n</li>\n<li><p>The moment you try number 2, data with a new ID is created.</p>\n</li>\n</ol>\n<p>Now, it can no longer be seen as the same data.</p>\n<p>Is there any problem with idempotency in this situation?</p>\n<p>Do I need to recreate the same resource all the way to the ID to be idempotent ok?</p>\n<p>Or does it matter if only the valid data is the same except for the ID etc?</p>\n"},{"tags":["java","spring","spring-mvc","spring-annotations","java-17"],"answers":[{"owner":{"user_id":339637,"display_name":"Ken Chan"},"up_vote_count":1,"is_accepted":true,"creation_date":1677520619,"answer_id":75583972,"body":"<p>It is because it cannot find the Jakarta annotation as Spring framework 6 requires <a href=\"https://spring.io/blog/2021/09/02/a-java-17-and-jakarta-ee-9-baseline-for-spring-framework-6\" rel=\"nofollow noreferrer\">Jakarta EE 9+</a> as baseline.You have to at least upgrade the following legacy JavaEE dependencies to Jakarta EE 9+ :</p>\n<p>Upgrade</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;dependency&gt;\n        &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to</p>\n<pre class=\"lang-xml prettyprint-override\"><code> &lt;dependency&gt;\n    &lt;groupId&gt;jakarta.annotation&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.annotation-api&lt;/artifactId&gt;\n    &lt;version&gt;2.1.1&lt;/version&gt;\n &lt;/dependency&gt;\n</code></pre>\n<p>And</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n        &lt;groupId&gt;javax&lt;/groupId&gt;\n        &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n        &lt;version&gt;8.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>to</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;jakarta.platform&lt;/groupId&gt;\n    &lt;artifactId&gt;jakarta.jakartaee-api&lt;/artifactId&gt;\n    &lt;version&gt;10.0.0&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>And if your application codes are using stuff from JavaEE , you also need to change it to use the related stuff from <code>jakarta</code> namespace.</p>\n"}],"owner":{"user_id":11962586,"display_name":"Sarath14Kumar"},"view_count":274,"up_vote_count":2,"accepted_answer_id":75583972,"answer_count":1,"score":2,"creation_date":1677519263,"question_id":75583755,"body":"<p>I'm trying to enable support for @PostConstruct and @PreDestroy by defining a bean element in a config.xml file. But I'm getting error in console log stating <code>WARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0'</code> Should I need any dependency for this? And I'm working on java-17. Due to this am I facing any issue? Thanks in advance.</p>\n<p>Below I have shared the error log and dependent files for view.</p>\n<p><em><strong>ConsoleLog</strong></em></p>\n<pre><code>Feb 27, 2023 10:36:59 PM org.springframework.context.support.AbstractApplicationContext refresh\nWARNING: Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0' defined in class path resource [com/sarath/spring/springcore/lc/annotations/lifeCycleBeanConfig.xml]: jakarta/annotation/Resource\nException in thread &quot;main&quot; org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'org.springframework.context.annotation.CommonAnnotationBeanPostProcessor#0' defined in class path resource [com/sarath/spring/springcore/lc/annotations/lifeCycleBeanConfig.xml]: jakarta/annotation/Resource\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1307)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1199)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:205)\n    at org.springframework.context.support.PostProcessorRegistrationDelegate.registerBeanPostProcessors(PostProcessorRegistrationDelegate.java:240)\n    at org.springframework.context.support.AbstractApplicationContext.registerBeanPostProcessors(AbstractApplicationContext.java:763)\n    at org.springframework.context.support.AbstractApplicationContext.refresh(AbstractApplicationContext.java:568)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:144)\n    at org.springframework.context.support.ClassPathXmlApplicationContext.&lt;init&gt;(ClassPathXmlApplicationContext.java:85)\n    at com.sarath.spring.springcore.lc.annotations.LifeCycleTest.main(LifeCycleTest.java:10)\nCaused by: java.lang.NoClassDefFoundError: jakarta/annotation/Resource\n    at org.springframework.context.annotation.CommonAnnotationBeanPostProcessor.&lt;clinit&gt;(CommonAnnotationBeanPostProcessor.java:142)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance0(Native Method)\n    at java.base/jdk.internal.reflect.NativeConstructorAccessorImpl.newInstance(NativeConstructorAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingConstructorAccessorImpl.newInstance(DelegatingConstructorAccessorImpl.java:45)\n    at java.base/java.lang.reflect.Constructor.newInstanceWithCaller(Constructor.java:499)\n    at java.base/java.lang.reflect.Constructor.newInstance(Constructor.java:480)\n    at org.springframework.beans.BeanUtils.instantiateClass(BeanUtils.java:197)\n    at org.springframework.beans.factory.support.SimpleInstantiationStrategy.instantiate(SimpleInstantiationStrategy.java:87)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateBean(AbstractAutowireCapableBeanFactory.java:1301)\n    ... 13 more\nCaused by: java.lang.ClassNotFoundException: jakarta.annotation.Resource\n    at java.base/jdk.internal.loader.BuiltinClassLoader.loadClass(BuiltinClassLoader.java:641)\n    at java.base/jdk.internal.loader.ClassLoaders$AppClassLoader.loadClass(ClassLoaders.java:188)\n    at java.base/java.lang.ClassLoader.loadClass(ClassLoader.java:520)\n    ... 22 more\n</code></pre>\n<p><em><strong>lifeCycleBeanConfig.xml</strong></em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;beans xmlns=&quot;http://www.springframework.org/schema/beans&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xmlns:context=&quot;http://www.springframework.org/schema/context&quot;\n    xmlns:p=&quot;http://www.springframework.org/schema/p&quot;\n    xsi:schemaLocation=&quot;http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans.xsd\n    http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context.xsd&quot;&gt;\n    \n    &lt;bean name=&quot;lcXML&quot; class=&quot;com.sarath.spring.springcore.lc.annotations.PatientPojoBean&quot; p:id=&quot;20&quot;/&gt;\n    \n    &lt;bean class=&quot;org.springframework.context.annotation.CommonAnnotationBeanPostProcessor&quot;/&gt;\n    \n&lt;/beans&gt;\n</code></pre>\n<p><em><strong>PatientPojoBean.java</strong></em></p>\n<pre><code>package com.sarath.spring.springcore.lc.annotations;\n\nimport javax.annotation.PostConstruct;\nimport javax.annotation.PreDestroy;\n\npublic class PatientPojoBean {\n    private int id;\n\n    public int getId() {\n        return id;\n    }\n\n    public void setId(int id) {\n        System.out.println(&quot;Getting into setter&quot;);\n        this.id = id;\n    }\n\n    @PostConstruct\n    public void hi() {\n        System.out.println(&quot;Hello Hi&quot;);\n    }\n\n    @PreDestroy\n    public void bye() {\n        System.out.println(&quot;Okay Bye&quot;);\n    }\n\n    @Override\n    public String toString() {\n        return &quot;PatientPojoBean [id=&quot; + id + &quot;]&quot;;\n    }\n\n}\n\n</code></pre>\n<p><em><strong>LifeCycleTest.java</strong></em></p>\n<pre><code>package com.sarath.spring.springcore.lc.annotations;\n\nimport org.springframework.context.support.AbstractApplicationContext;\nimport org.springframework.context.support.ClassPathXmlApplicationContext;\n\npublic class LifeCycleTest {\n\n    public static void main(String[] args) {\n        @SuppressWarnings(&quot;resource&quot;)\n        AbstractApplicationContext ctxt = new ClassPathXmlApplicationContext(&quot;com/sarath/spring/springcore/lc/annotations/lifeCycleBeanConfig.xml&quot;);\n        PatientPojoBean ptnt = (PatientPojoBean) ctxt.getBean(&quot;lcXML&quot;);\n        System.out.println(&quot;Patient Name   : &quot; + ptnt);\n        ctxt.registerShutdownHook();    //To invoke the destroy method before closing\n    }\n\n}\n</code></pre>\n<p><em><strong>pom.xml</strong></em></p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;com.sarath.spring&lt;/groupId&gt;\n  &lt;artifactId&gt;springcore&lt;/artifactId&gt;\n  &lt;version&gt;0.0.1-SNAPSHOT&lt;/version&gt;\n\n  &lt;name&gt;springcore&lt;/name&gt;\n  &lt;!-- FIXME change it to the project's website --&gt;\n  &lt;url&gt;http://www.example.com&lt;/url&gt;\n\n  &lt;properties&gt;\n     &lt;springframework.version&gt;6.0.5&lt;/springframework.version&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-core&lt;/artifactId&gt;\n        &lt;version&gt;${springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-context&lt;/artifactId&gt;\n        &lt;version&gt;${springframework.version}&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/javax.annotation/javax.annotation-api --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax.annotation&lt;/groupId&gt;\n        &lt;artifactId&gt;javax.annotation-api&lt;/artifactId&gt;\n        &lt;version&gt;1.3.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;javax&lt;/groupId&gt;\n        &lt;artifactId&gt;javaee-api&lt;/artifactId&gt;\n        &lt;version&gt;8.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;!-- https://mvnrepository.com/artifact/org.javassist/javassist --&gt;\n    &lt;dependency&gt;\n        &lt;groupId&gt;org.javassist&lt;/groupId&gt;\n        &lt;artifactId&gt;javassist&lt;/artifactId&gt;\n        &lt;version&gt;3.29.2-GA&lt;/version&gt;\n    &lt;/dependency&gt;\n\n\n  &lt;/dependencies&gt;\n\n  &lt;build&gt;\n    &lt;pluginManagement&gt;&lt;!-- lock down plugins versions to avoid using Maven defaults (may be moved to parent pom) --&gt;\n      &lt;plugins&gt;\n        &lt;!-- clean lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#clean_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-clean-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.1.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- default lifecycle, jar packaging: see https://maven.apache.org/ref/current/maven-core/default-bindings.html#Plugin_bindings_for_jar_packaging --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-resources-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.8.0&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-surefire-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.22.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-jar-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-install-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.5.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-deploy-plugin&lt;/artifactId&gt;\n          &lt;version&gt;2.8.2&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;!-- site lifecycle, see https://maven.apache.org/ref/current/maven-core/lifecycles.html#site_Lifecycle --&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-site-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.7.1&lt;/version&gt;\n        &lt;/plugin&gt;\n        &lt;plugin&gt;\n          &lt;artifactId&gt;maven-project-info-reports-plugin&lt;/artifactId&gt;\n          &lt;version&gt;3.0.0&lt;/version&gt;\n        &lt;/plugin&gt;\n      &lt;/plugins&gt;\n    &lt;/pluginManagement&gt;\n  &lt;/build&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","java-security","java-security-manager"],"comments":[{"owner":{"user_id":845414,"display_name":"Johannes Kuhn"},"edited":false,"comment_id":133276528,"body":"&quot;None of my attempts so far have worked&quot; - how do you know that? What does &quot;not work&quot; mean?"},{"owner":{"user_id":21269336,"display_name":"8Sence W"},"edited":false,"comment_id":133277693,"body":"The program completed successfully, if it worked it should&#39;ve displayed a NoPermissionException."},{"owner":{"user_id":29470,"display_name":"Tim Moore"},"edited":false,"comment_id":133281998,"body":"I&#39;m not sure why this isn&#39;t working for you, but I&#39;ll point out that <code>SecurityManager</code> is <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/lang/SecurityManager.html\" rel=\"nofollow noreferrer\">deprecated for removal as of Java 17</a>, partly because it has never been able to provide guaranteed protection against malicious code. The rationale is detailed in <a href=\"https://openjdk.org/jeps/411\" rel=\"nofollow noreferrer\">JEP 411</a>. Even though it should work in Java 8, this is a dead end road and I would recommend looking for another approach. Something like Linux containers (i.e., Docker or similar) might provide a better solution."}],"answers":[{"owner":{"user_id":845414,"display_name":"Johannes Kuhn"},"up_vote_count":1,"is_accepted":true,"creation_date":1677187484,"answer_id":75550459,"body":"<p>You don't pass any VM parameters to enable a security manager.</p>\n<p>Your current command line is:</p>\n<pre><code>java -jar HelloWorld.jar -Djava.security.manager -Djava.security.policy=...\n</code></pre>\n<p>This means, <code>-Djava.security.manager -Djava.security.policy=...</code> are passed as program arguments, not as VM arguments.</p>\n<p>VM arguments have to appear before the <code>-jar file</code> or <code>classname</code>.<br />\nArguments after that are treated as program arguments and passed as <code>args</code> to the main method.</p>\n<p>To fix that, use</p>\n<pre><code>Launcher\\files\\azul-1.8.9_345\\bin\\java.exe -Djava.security.manager -Djava.security.policy=C:\\Users\\User\\Desktop\\policy.policy -jar HelloWorld.jar\n</code></pre>\n<hr />\n<p>Then the format of your policy file is not correct.<br />\nInside <code>&quot;</code>, <code>\\</code> needs to be escaped with <code>\\\\</code>.</p>\n<p>Also, the codebase does not use relative file names, instead file URLs.</p>\n<p>So, the policy file should look like this:</p>\n<pre><code>grant codebase &quot;file:/C:/Users/User/Desktop/HelloWorld.jar&quot; {\n    permission java.io.FilePermission &quot;C:\\\\Users\\\\User\\\\Desktop\\\\-&quot;, &quot;read&quot;;\n};\n</code></pre>\n<p>If your policy file contains errors, it might simply not be used, making debugging difficult.</p>\n"}],"owner":{"user_id":21269336,"display_name":"8Sence W"},"view_count":70,"up_vote_count":2,"accepted_answer_id":75550459,"answer_count":1,"score":2,"creation_date":1677113319,"question_id":75539595,"body":"<p>I'm the owner of a platform which allows anyone to upload their own products (jar files), I'm looking to secure the platform using java policy files.</p>\n<p>I'm using JRE azul-1.8.9_345,</p>\n<p>I'm testing with this program,</p>\n<pre><code>    public static void main(String[] args) {\n        String url = &quot;http://www.java2s.com/Code/JarDownload/test/test.jar.zip&quot;;\n\n        try {\n            download(url, &quot;C:\\\\Users\\\\User\\\\Desktop\\\\Test.jar&quot;);\n        } catch (IOException exception) {\n            exception.printStackTrace();\n        }\n    }\n\n    private static void download(String urlStr, String file) throws IOException{\n        URL url = new URL(urlStr);\n        BufferedInputStream bis = new BufferedInputStream(url.openStream());\n        FileOutputStream fis = new FileOutputStream(file);\n        byte[] buffer = new byte[1024];\n        int count=0;\n        while((count = bis.read(buffer,0,1024)) != -1)\n        {\n            fis.write(buffer, 0, count);\n        }\n        fis.close();\n        bis.close();\n    }\n</code></pre>\n<p>I would like to use policy files to prevent this program from running,</p>\n<p>None of my attempts so far have worked, I'm starting to wonder this might be a unsupported feature, and it might not work anymore.</p>\n<p>This is my policy</p>\n<pre><code>grant CodeBase &quot;file:HelloWorld.jar&quot; {\n    permission java.io.FilePermission &quot;C:\\Users\\User\\Desktop\\&quot;, &quot;read&quot;;\n};\n</code></pre>\n<p>I've tried using other permissions but they seem to do nothing as well, I appreciate the help.</p>\n<p>Could someone layout, why this doesn't work?, why I need to specify the file?, even though given when I run the jar, where to find a list of permissions and their arguments? (permission java.io.ExamplePermission (args), (args))</p>\n<pre><code>Launcher\\files\\azul-1.8.9_345\\bin\\java.exe -jar HelloWorld.jar -Djava.security.manager -Djava.security.policy=C:\\Users\\User\\Desktop\\policy.policy\n</code></pre>\n<p>I've attempted using other permissions, they didn't effect the program either.</p>\n"},{"tags":["java","class","uml"],"answers":[{"owner":{"user_id":3723423,"display_name":"Christophe"},"up_vote_count":1,"is_accepted":false,"creation_date":1676818891,"answer_id":75501037,"body":"<p>A class diagram with only classes belonging to the domain of application (e.g teachers, students, classes, ..) without any of the app's internals (e.g. UI related classes) is called a &quot;domain model&quot;. Its goal is not to document all possible classes used in your app, but to focus on the domain knowledge, independently of how the app is structured or implemented. Such domain model would stay the same if you create a mobile app, a text based terminal application, or a voice controlled app.</p>\n<p>On the other side you may also want to give insights on how your app is designed, i.e. using menu classes, database connectors, etc... This is also fine. It's up to you to decide what is the purpose of your class diagram and what you want to show with it. The only thing that you should avoid is to have one huge diagram with everything, because it'll be too complex to explain anything. Better go with several class diagrams focusing on different aspects of your design.</p>\n<p>One thing that may help if you want to combine in the same diagram classes with very different purpose, i.e UI classes, domain classes and business logic, is the <a href=\"https://en.m.wikipedia.org/wiki/Entity-control-boundary\" rel=\"nofollow noreferrer\">Entity-Boundary-Control</a> stereotypes, to help to understand what class fulfills which technical purpose.</p>\n<p><strong>Edit: Analysis diagrams</strong></p>\n<p>Your title and your comments refer specifically to analysis diagrams.  Analysis diagrams are not defined by the UML standard and depend on methodological choice:</p>\n<ul>\n<li>Some methods see analysis models as self-standing with only elements of the problem space, whereas design diagrams show the solution space.</li>\n<li>But some other methods see analysis models just a first stage that evolves into a design model.</li>\n<li>The Unified Process defines analysis classes to be Entity Boundary Controls, because they are directly related to Use-Cases, which model requirements. They would not contain details such as menus (which will belong to refinements of the boundary classes). But they would contain more than only entities of the domain model.</li>\n</ul>\n"}],"owner":{"user_id":20307618,"display_name":"nitrations"},"view_count":41,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1676816705,"question_id":75500805,"body":"<p>I am implementing a class diagram for an application related to teachers and students as an assignment. A student can have many teachers.</p>\n<p>I will implement a menu in coding. Should I add menu and interface as classes?\nIf yes, how should I link all these?\nWhat can menu and interface contain?\nCould I say: menu has settings and teachers page, which has all teachers profiles in it?</p>\n"},{"tags":["java","apache-spark","apache-spark-sql"],"comments":[{"owner":{"user_id":2718939,"display_name":"Ronak Jain"},"edited":false,"comment_id":133199355,"body":"Can you explain a little, maybe by adding sample data, and expected and actual outcome?"},{"owner":{"user_id":21240379,"display_name":"Nico"},"edited":false,"comment_id":133199369,"body":"here is the NewsArticle like: 1, &quot;TiTle&quot;, [{htt..., paragraph, rem...},{htt..., paragraph, rem...},{htt..., paragraph, rem...}], which is id, title, and List&lt;ContentItem&gt;"},{"owner":{"user_id":21240379,"display_name":"Nico"},"edited":false,"comment_id":133199427,"body":"and now I want to make each article look like: 1, &quot;Title&quot;, &quot;this is content which subtype equals paragraph&quot;"},{"owner":{"user_id":2718939,"display_name":"Ronak Jain"},"edited":false,"comment_id":133199619,"body":"You can explode the list and then apply filter"},{"owner":{"user_id":21240379,"display_name":"Nico"},"edited":false,"comment_id":133199648,"body":"I try explode, but each {} in list become a single row, I can&#39;t combine them again"}],"answers":[{"owner":{"user_id":2718939,"display_name":"Ronak Jain"},"up_vote_count":1,"is_accepted":true,"creation_date":1676740720,"answer_id":75495041,"body":"<p>This would work:</p>\n<pre><code>df\n     .withColumn(&quot;newContent&quot;, functions.explode(functions.col(&quot;items&quot;)))\n     .filter(&quot;newContent.subtype=='paragraph'&quot;)\n     .selectExpr(&quot;id&quot;, &quot;title&quot;, &quot;newContent.content as content&quot;)\n     .show(false);\n</code></pre>\n<p>Input:</p>\n<pre><code>+---+--------------------------------------------------------------------------------------------------------+-----+\n|id |items                                                                                                   |title|\n+---+--------------------------------------------------------------------------------------------------------+-----+\n|id |[[Content1, subtype1, someurl], [ContentOfParagraph, paragraph, someurl], [Content2, subtype2, someurl]]|Title|\n+---+--------------------------------------------------------------------------------------------------------+-----+\n</code></pre>\n<p>Output:</p>\n<pre><code>+---+-----+------------------+\n|id |title|content           |\n+---+-----+------------------+\n|id |Title|ContentOfParagraph|\n+---+-----+------------------+\n</code></pre>\n"}],"owner":{"user_id":21240379,"display_name":"Nico"},"view_count":40,"up_vote_count":2,"accepted_answer_id":75495041,"answer_count":1,"score":2,"creation_date":1676735746,"question_id":75494536,"body":"<p>I have two class, one is NewsArticle: String id, String title, List contents, the other is ContentItem: String content, String subtype, String url.</p>\n<p>I want to filter out the content whose subtype value is equal to &quot;paragraph&quot;, and spliced into one long string. (don't need url)</p>\n<p>here is the <code>NewsArticle Dataset</code> like:</p>\n<pre><code> 1, &quot;TiTle&quot;, [{htt..., paragraph, rem...},{htt..., paragraph, rem...},{htt..., paragraph, rem...}]\n</code></pre>\n<p>which is <code>id, title, List&lt;ContentItem&gt;</code></p>\n<p>I took out the contents column, and each single row is one article, it like this:</p>\n<p><code>[{http..., others, con...},{http..., paragraph, rem...},{http..., paragraph, rem...}]</code></p>\n<p>which is <code>url, subtype, content</code></p>\n<p>and now I want to make each article(row) look like:</p>\n<pre><code>1, &quot;Title&quot;, &quot;this is content which subtype equals paragraph&quot;\n</code></pre>\n<p>can anyone help me with java?</p>\n"},{"tags":["java","spring-boot","ssh","mainframe","zos"],"comments":[{"owner":{"user_id":664933,"display_name":"paulywill"},"edited":false,"comment_id":133193997,"body":"It is a case of EBCDIC vs. ASCII? Are you able to compare if the <code>privatekey</code> mutated on z/OS?"},{"owner":{"user_id":4261459,"display_name":"Jarek Brocki"},"edited":false,"comment_id":133222299,"body":"@paulywill 99.9% it&#39;s not the case of the conversion. I&#39;ve logged on to USS directly and using the same private key managed to logon via SSH to the service ID - both on the inbound IP and the localhost. So I know the key works and the SSHD are set up correctly.  Additionally I&#39;ve managed to setup JSch.Logger to get normal ssh clients -v option working.   When running in windows and targeting inboud IP I the whole verbose stack: <code>Authentication succeeded (publickey)</code> When running same jar on z/OS I only get: <code>java.lang.RuntimeException: com.jcraft.jsch.JSchException: invalid privatekey</code>"},{"owner":{"user_id":4261459,"display_name":"Jarek Brocki"},"edited":false,"comment_id":133230527,"body":"So I&#39;ve also regenerated new key using <code>ssh-keygen -t rsa -b 4096 -m PEM</code> and moved it to the authorized_keys for user. After moving the key to my PC I managed to SSH to the service ID using the new key via the command line and JSch. I can also do it via command line on the lpar targeting the localhost SSHD. However again I cannot logon to the localhost SSH via JSch application running on z/OS."}],"answers":[{"owner":{"user_id":4261459,"display_name":"Jarek Brocki"},"up_vote_count":1,"is_accepted":false,"creation_date":1678350900,"answer_id":75682108,"body":"<p>It works!</p>\n<p>The problem was that I've created the key pair in the USS session and transfered them for testing, to my windows machine using VSCode zExplorer plugin.\nSeems that this plugin does already a transfer back and fourth with ASCII and EBCDIC character sets.</p>\n<p>I reviewed the keys and they were identical - but I was trying to use a mainframe java program using a EBCDIC generated key.</p>\n<p>Turns out that SSHD daemon has already engraved that although it runs on z/OS which is a EBCDIC system it expects always a ASCII key.</p>\n<p>After converting the key to ASCII using iconv all works as it should</p>\n<pre><code>iconv –f IBM-1047 –t ISO8859-1 id_rsa &gt; id_rsa_ascii\n</code></pre>\n<p>@paulywill Thanks for hinting me where to look.</p>\n"}],"owner":{"user_id":4261459,"display_name":"Jarek Brocki"},"view_count":43,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1676667227,"question_id":75489154,"body":"<p>I'm working on a SpringBoot application running on z/OS natively (not in a zCX container).\nThe idea is to maintain a session to a PROTECTED RACF service id using ssh key private/public key pair.</p>\n<p>I've set the user, the USS directory and the keys are in the right places.</p>\n<p>Here is the interesting bit - I've written the application for easy of testing that runs locally on my corporate laptop. I've targeted in it the inbound address of the z/OS and the same exact private key as when running on z/OS natively(therefore I'm sure the key format is correct). Everything works as expected and I'm able to connect using this key.</p>\n<p>However when I package the application to a jar file and run it on z/OS I get</p>\n<pre><code>java.lang.RuntimeException: com.jcraft.jsch.JSchException: invalid privatekey\n</code></pre>\n<p>The service ID that is running the SpringBoot application on z/OS has access to the private key used when using <code>jSch.addIdentity()</code> - I know this because I changed the owner of the key and tested it out. Got a ICH408I message stating the user doesn't have access to the private key(reverted back after testing).</p>\n<p>After few days of scratching my head and testing out lots of access setups I've decided to test out if I'm even able to establish a SSH session to this ID from within z/OS - no problems here.</p>\n<p>I've also set a password to service ID that is used to run the SpringBoot application. Logged to it and ran <code>ssh XXXXXX@localhost -i private_key</code> without any problems. Therefore I'm pretty sure that this is somehow related to a JSch library problem.</p>\n<p>Anyone ever came a cross something like that ?</p>\n"},{"tags":["javascript","java","node.js","signature","cryptojs"],"answers":[{"owner":{"user_id":9346879,"display_name":"Kreetchy"},"up_vote_count":1,"is_accepted":false,"creation_date":1676650111,"answer_id":75486662,"body":"<p>Using <code>crypto</code> library we can do something similar in JS. Adapt as appropriate, this is just a reference.</p>\n<pre><code>const fs = require('fs');\nconst crypto = require('crypto');\n\nfunction generateSignature(key, stringToSign) {\n  const privateKey = fs.readFileSync(key, 'utf-8');\n\n  const sign = crypto.createSign('RSA-SHA256');\n  sign.update(stringToSign);\n\n  const signature = sign.sign(privateKey, 'base64');\n\n  return signature;\n}\n\nconst key = 'myKey.pem';\nconst stringToSign = 'myData';\n\nconst signature = generateSignature(key, stringToSign);\n\nconsole.log(`Signature:\\n\\n${signature}`);\n</code></pre>\n"}],"owner":{"user_id":19355668,"display_name":"Derliodev"},"view_count":49,"up_vote_count":3,"answer_count":1,"score":2,"creation_date":1676649580,"question_id":75486574,"body":"<p>I try to get the same functionality of java class to replicate in NodeJs, but I can't do it. I don't understand all the JavaCode, specialy when the instance sing() (what's return). for that can't replicate into NodeJs</p>\n<p>Java Code</p>\n<pre><code>public String generateSignature(String key, String stringToSign) throws Exception {\n    Signature signatureInstance = Signature.getInstance(&quot;SHA256WithRSA&quot;);\n\n    ServiceKeyRep keyRep = new ServiceKeyRep(KeyRep.Type.PRIVATE, &quot;RSA&quot;, &quot;PKCS#8&quot;,      Base64.getDecoder().decode(key));\n\n    PrivateKey resolvedPrivateKey = (PrivateKey) keyRep.readResolve();\n\n    signatureInstance.initSign(resolvedPrivateKey);           \n    \n    byte[] bytesToSign = stringToSign.getBytes(&quot;UTF-8&quot;);\n\n    \n    signatureInstance.update(bytesToSign);\n    \n    String signatureString = Base64.getEncoder().encodeToString(signatureBytes);\n\n    return signatureString;\n}\n</code></pre>\n<p>And I try this on Node JS</p>\n<pre><code>const privateKey = fs.readFileSync('myKey.pem', 'utf-8');\nconst stringToSign = new Int8Array([ myData ]);\nconst data = Buffer.from(stringToSign);  \nconst sign = crypto.sign(&quot;RSA-SHA256&quot;, data , privateKey);  \nconst signature = sign.toString('base64');  \n\n//Printing the signature \nconsole.log(`Signature:\\n\\n ${signature}`);\n</code></pre>\n<p>but when I print, the out is not the same</p>\n"},{"tags":["java","spring-boot","maven","springdoc-openapi-ui","openapi-generator-maven-plugin"],"answers":[{"owner":{"user_id":5841551,"display_name":"kladderradatsch"},"up_vote_count":1,"is_accepted":true,"creation_date":1676661410,"answer_id":75488439,"body":"<p>There seems to be an issue with the opeanapi-generator-maven-plugin 6.3.0 because it converts the tag name from the yaml file, e.g.</p>\n<pre><code>tags:\n  - name: zuege\n</code></pre>\n<p>into a slightly deviated annotation tag within the generated code, namely:</p>\n<pre><code>@Tag(name = &quot;Zuege&quot;, description = &quot;Zuege details&quot;)\npublic interface ZuegeApi {\n\n}\n</code></pre>\n<p>So when you change the tag within the yaml file into the same style (first character is always in upper case), then the issue is gone:</p>\n<p><a href=\"https://i.stack.imgur.com/McJEH.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/McJEH.png\" alt=\"enter image description here\" /></a></p>\n"}],"owner":{"user_id":5841551,"display_name":"kladderradatsch"},"view_count":515,"up_vote_count":2,"accepted_answer_id":75488439,"answer_count":1,"score":2,"creation_date":1676578415,"question_id":75477445,"body":"<p>The openapi-generator-maven-plugin (version 6.3.0) is configured as follows in a Spring-Boot 3 application:</p>\n<pre><code>          &lt;plugin&gt;\n                &lt;groupId&gt;org.openapitools&lt;/groupId&gt;\n                &lt;artifactId&gt;openapi-generator-maven-plugin&lt;/artifactId&gt;\n                &lt;version&gt;${openapi-maven-plugin.version}&lt;/version&gt;\n                &lt;executions&gt;\n                    &lt;execution&gt;\n                        &lt;goals&gt;\n                            &lt;goal&gt;generate&lt;/goal&gt;\n                        &lt;/goals&gt;\n                        &lt;configuration&gt;\n                            &lt;inputSpec&gt;${project.basedir}/src/main/resources/openApi.yaml&lt;/inputSpec&gt;\n                            &lt;generatorName&gt;spring&lt;/generatorName&gt;\n                            &lt;apiPackage&gt;com.company.api.v1&lt;/apiPackage&gt;\n                            &lt;modelPackage&gt;com.company.model.v1&lt;/modelPackage&gt;\n                            &lt;supportingFilesToGenerate&gt;ApiUtil.java&lt;/supportingFilesToGenerate&gt;\n                            &lt;configOptions&gt;\n                                &lt;delegatePattern&gt;true&lt;/delegatePattern&gt;\n                                &lt;useSpringBoot3&gt;true&lt;/useSpringBoot3&gt;\n                            &lt;/configOptions&gt;\n                        &lt;/configuration&gt;\n                    &lt;/execution&gt;\n                &lt;/executions&gt;\n            &lt;/plugin&gt;\n</code></pre>\n<p>and in the Swagger/OpenAPI Yaml file is only one endpoint configured:</p>\n<pre><code>paths:\n  /table:\n    get:\n      summary: get all trains\n      operationId: trainsList\n      tags:\n        - zuege\n</code></pre>\n<p>The issue here is in the Swagger-Ui; the endpoint is duplicated:</p>\n<p><a href=\"https://i.stack.imgur.com/VtDpA.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/VtDpA.png\" alt=\"enter image description here\" /></a></p>\n<p>When I remove the tag in the yaml then only the first endpoint is visible but actually this is the ugly one with the generated description. When I configure it with <code>&lt;useTags&gt;true&lt;/useTags&gt;</code> (<a href=\"https://openapi-generator.tech/docs/generators/spring/\" rel=\"nofollow noreferrer\">cf. config</a>) the two endpoints are still there but both with name <code>zuege</code>.</p>\n<p>Any idea how to reduce it to only one endpoint but consider the tag?</p>\n<p>When I add a global tag description as follows:</p>\n<pre><code>tags:\n  - name: zuege\n    description: &quot;Zuege details&quot;\n</code></pre>\n<p>together with <code>&lt;useTags&gt;true&lt;/useTags</code> it looks as follows:</p>\n<p><a href=\"https://i.stack.imgur.com/kyV8o.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kyV8o.png\" alt=\"enter image description here\" /></a></p>\n<p>So it is still duplicated.</p>\n"},{"tags":["java","reactjs","firebase","react-native","android-studio"],"comments":[{"owner":{"user_id":14927852,"display_name":"Landon Harter"},"edited":false,"comment_id":133154971,"body":"Can you elaborate on what you mean by tracking a button via Firebase?"},{"owner":{"user_id":21223885,"display_name":"Learner"},"edited":false,"comment_id":133175876,"body":"I am using Firebase analytics for tracking events in my app which is build upon react js. So, I want to track custom events but don&#39;t know which code or script I add into the applicaton to track these events."}],"answers":[{"owner":{"user_id":1350682,"display_name":"vignesh"},"up_vote_count":1,"is_accepted":true,"creation_date":1676531683,"answer_id":75468914,"body":"<p><a href=\"https://rnfirebase.io/analytics/usage\" rel=\"nofollow noreferrer\">RNFirebase</a> should be integrated into the react-native project.</p>\n<p>As explained in the document the event tracking for the button action should be handled in <code>onPress</code> callback method</p>\n<pre><code>import react, { useEffect } from 'react';\nimport { View, Button } from 'react-native';\nimport analytics from '@react-native-firebase/analytics';\n\nfunction App() {\n  return (\n    &lt;View&gt;\n      &lt;Button\n        title=&quot;Add To Basket&quot;\n        onPress={async () =&gt;\n          await analytics().logEvent('Event Name', {\n            Data Object\n          })\n        }\n      /&gt;\n    &lt;/View&gt;\n  );\n}\n</code></pre>\n"}],"owner":{"user_id":21223885,"display_name":"Learner"},"view_count":108,"up_vote_count":2,"accepted_answer_id":75468914,"answer_count":1,"score":2,"creation_date":1676522348,"question_id":75467915,"body":"<p>I am new in dealing with react native apps and I am trying to find out how to track few buttons that is being available on my android application.</p>\n<p>In my react native app, there is a &quot;submit&quot; button while signing up into the app and I want to track that button via Firebase, but have no idea on how to do that in android studio project for an react native application. Although I know the similar code which I need to put but not sure how to identify the button class element right here.</p>\n<p>Here's the similar code what I need to put:</p>\n<pre><code>``\n  Button b1= findViewById(R.id.button2);\n            b1.setOnClickListener(new View.OnClickListener() {\n                @Override\n                public void onClick(View v) {\n                    Bundle bundle= new Bundle();\n                    bundle.putString(&quot;Button_text&quot;,&quot;Sign_up&quot;);\n                    mFirebaseAnalytics.logEvent(&quot;Sign_up_button&quot;,bundle);\n            }\n``\n</code></pre>\n<p><a href=\"https://i.stack.imgur.com/JRdr4.png\" rel=\"nofollow noreferrer\">This is my react native app, and I don't know where is the right button I am trying to find out</a></p>\n"},{"tags":["java","spring-mvc","spring-data-jpa"],"answers":[{"owner":{"user_id":66686,"display_name":"Jens Schauder"},"up_vote_count":1,"is_accepted":true,"creation_date":1676536935,"answer_id":75469687,"body":"<p>The property names used in the repository need to match those in your entity.\nThe error message says: <code>No property 'fromAccount' found for type 'Transaction'</code>\nAnd if you check your entity, this is true. There is only a property <code>fromAcct</code>.</p>\n<p>Therefore the repository method should be named <code>findByFromAcct</code></p>\n"}],"owner":{"user_id":15636186,"display_name":"Adedeji Onigbinde"},"view_count":269,"up_vote_count":2,"accepted_answer_id":75469687,"answer_count":1,"score":2,"creation_date":1676519404,"question_id":75467680,"body":"<p>Hello im trying to create a custom query method in my repository but when i run my application i get this error</p>\n<pre><code> Exception encountered during context initialization - cancelling refresh attempt: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'transactionRepo' defined in com.base.BaseDependencies.Repository.TransactionRepo defined in @EnableJpaRepositories declared on JpaRepositoriesRegistrar.EnableJpaRepositoriesConfiguration: Invocation of init method failed; nested exception is org.springframework.data.repository.query.QueryCreationException: Could not create query for public abstract java.util.List com.base.BaseDependencies.Repository.TransactionRepo.findByFromAccount(com.base.BaseDependencies.Models.Account); Reason: Failed to create query for method public abstract java.util.List com.base.BaseDependencies.Repository.TransactionRepo.findByFromAccount(com.base.BaseDependencies.Models.Account)! No property 'fromAccount' found for type 'Transaction'; nested exception is java.lang.IllegalArgumentException: Failed to create query for method public abstract java.util.List com.base.BaseDependencies.Repository.TransactionRepo.findByFromAccount(com.base.BaseDependencies.Models.Account)! No property 'fromAccount' found for type 'Transaction'\n</code></pre>\n<p>Transaction Model</p>\n<pre><code>    @Data\n    @NoArgsConstructor\n    @AllArgsConstructor\n    @Entity\n    @Table(name=&quot;Transactions&quot;)\n    public class Transaction {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name=&quot;trans_id&quot;,updatable = false, nullable = false, unique = true)\n    private int transId;\n\n    private String transType;\n    \n    private double transAmount;\n    \n    @ManyToOne(cascade = CascadeType.ALL)\n    @JoinColumn(name = &quot;account_number&quot;)\n    @JsonManagedReference\n    private Account fromAcct;\n    \n    private long toAcct;\n\n\n}\n</code></pre>\n<p>Transaction Repo</p>\n<pre><code>     @Repository\n     public interface TransactionRepo extends CrudRepository&lt;Transaction, Integer&gt; {\n\n         List&lt;Transaction&gt; findByFromAccount(Account fromAccount);\n\n}\n</code></pre>\n<p>ive tried changing the name of the method and also the parameter type that is passed to it but i still get the same error</p>\n"},{"tags":["java","syntax","context-free-grammar"],"answers":[{"owner":{"user_id":1566221,"display_name":"rici"},"up_vote_count":1,"is_accepted":false,"creation_date":1676528954,"answer_id":75468582,"body":"<p>The Java specification uses font styles to distinguish between literal characters, as found in the input, and grammatical symbols (non-terminals and grammar operators). Literals are shown in <code>fixed width</code>, while grammar symbols are shown in <em>italics</em>.</p>\n<p>That's a pretty subtle distinction, particularly for certain punctuation symbols [Note 1]. Fortunately, the only punctuation used as grammar operators are brackets and braces, and it's not that hard to see whether a brace is slanting (italic) or upright. The brace in <em>ArrayInitializer</em> is upright, and the bracket is slanting, as is the brace in <em>VariableInitializerList</em>. So the brace in <em>ArrayInitializer</em> is a literal character. The brackets in that production indicate that the enclosed grammar symbols are optional, and the braces in <em>VariableInitializerList</em> indicate that the enclosed symbols can be repeated any number of times, including zero. (That's effectively the Kleene <code>*</code>-operator, which, as you say, is used in regular expressions.)</p>\n<p>I trust that answers your questions (1) and (3). I don't really understand your question 2. Note that the comma in <em>VariableInitializer { , VariableInitializer }</em> is a literal character (it's not in italic) so what's being described is a non-empty comma-separated list of initializers. I don't know why you think that differs from other Kleene star operators.</p>\n<hr />\n<h3>Notes</h3>\n<ol>\n<li>It doesn't help that a CSS bug affects  the examples in section 2.4, which supposedly illustrate the grammar. The CSS forces everything in a &quot;note&quot; to be italicized, thereby hiding the distinction between grammar operators and literal characters.</li>\n</ol>\n"}],"owner":{"user_id":15183118,"display_name":"Deepak Sangle"},"view_count":56,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1676492479,"question_id":75465091,"body":"<p>I have a syntatic doubt about a Java program grammar rule mentioned in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-10.html#jls-ArrayInitializer\" rel=\"nofollow noreferrer\">Oracle Java specification manual</a>. Here is an approximation of that rule, to the extent that SO's HTML restrictions allow it.</p>\n<pre><em>ArrayInitializer:\n&emsp;&emsp;</em>{<em> [VariableInitializerList] [,] </em>}<em>\n\nVariableInitializerList:\n&emsp;&emsp;VariableInitializer {, VariableInitializer}\n</em></pre>\n<p>It is given in <a href=\"https://docs.oracle.com/javase/specs/jls/se17/html/jls-2.html#jls-2.4\" rel=\"nofollow noreferrer\">section 2.4</a> of Java manual. <code>[x]</code> denotes zero or one occurrences of <code>x</code> and <code>{x}</code> denotes zero or more.</p>\n<p>However, I have the following doubts,</p>\n<ol>\n<li>For <em>ArrayInitializer</em> non-terminal, the first curly brace <code>{</code> denotes a terminal curly brace or the syntactic meaning I mentioned above.</li>\n<li>Also, for <em>VariableInitializerList</em> non-terminal, I know that <code><em>{</em>,<em> VariableInitializer}</em></code> means something equivalent to regex <code>(a,b)*</code>, but this kind of grammar will also accept some other string which does not actually fit the criterion, won't it?</li>\n<li>I also want to confirm if the square brackets in the first production denote the regex or simple terminals.</li>\n</ol>\n<p>I find this grammar specification confusing. Can you help me understand it?</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":181}