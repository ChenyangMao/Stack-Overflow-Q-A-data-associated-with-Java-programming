{"items":[{"tags":["java","google-api","google-play-integrity-api"],"owner":{"user_id":21509538,"display_name":"Paleo99"},"view_count":59,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680004930,"question_id":75866019,"body":"<p>I have used the java solution provided here for decrypting integrity token  <a href=\"https://stackoverflow.com/a/72461439/21509538\">https://stackoverflow.com/a/72461439/21509538</a>, i am decrypting the token on google server and while  <code>&quot;*DecodeIntegrityTokenResponse response = play.v1().decodeIntegrityToken(&quot;com.test.android.integritysample&quot;, requestObj).execute();* &quot;</code> this call i am getting below error</p>\n<p>com.google.api.client.googleapis.json.GoogleJsonResponseException: 403 Forbidden\nPOST <a href=\"https://playintegrity.googleapis.com/v1/com.companyname.android.qa:decodeIntegrityToken\" rel=\"nofollow noreferrer\">https://playintegrity.googleapis.com/v1/com.companyname.android.qa:decodeIntegrityToken</a></p>\n<pre><code>{\n  &quot;code&quot;: 403,\n  &quot;errors&quot;: [\n    {\n      &quot;domain&quot;: &quot;global&quot;,\n      &quot;message&quot;: &quot;You are not authorized to decode the requested integrity token.&quot;,\n      &quot;reason&quot;: &quot;forbidden&quot;\n    }\n  ],\n  &quot;message&quot;: &quot;You are not authorized to decode the requested integrity token.&quot;,\n  &quot;status&quot;: &quot;PERMISSION_DENIED&quot;\n}\n</code></pre>\n<p>what permission do i have to provide, do have make some changes in play console ?</p>\n<p>I am trying to read the integrity token, with the help of below code</p>\n<p><a href=\"https://stackoverflow.com/a/72461439/21509538\">https://stackoverflow.com/a/72461439/21509538</a></p>\n"},{"tags":["java","iso8583","jpos"],"comments":[{"owner":{"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"edited":false,"comment_id":133819527,"body":"Hi Shannon, can you show the code that is sending the requests, I would suspect the problem comes from that part, and without it, it seems unlikely someone will be able to help you."},{"owner":{"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"edited":false,"comment_id":133840494,"body":"Hi Sanjok, thank you for updating your question, The number of <code>sessions</code> is 5, and it matches the number of responses you receive before receiving a <code>null</code>. That can give a hint about the problem, don&#39;t know where it can lead yet. It would be better if you cold share a complete reproducible program, since there are a number of factors that could lead to what you are seeing. A few of them may depend on the values of the fields of the messages you are sending, and we are not seeing that information in this question. Maybe you could add the log of what you see as an advance?"},{"owner":{"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"edited":false,"comment_id":133840654,"body":"May I ask why are you using <code>MultiSessionChannelAdaptor</code> instead of the plain <code>ChannelAdaptor</code>? I haven&#39;t seen this one being frequently used, and in the project&#39;s git log, it doesn&#39;t seem to be highly maintained, so, it could be a bug here or there. Would you mind testing the <code>ChannelAdaptor</code> instead and see if the problem persists? Although it would be nice to hunt a possible bug, it would be better to first validate there is one by using another more common component."},{"owner":{"user_id":3124992,"display_name":"Sanjok"},"edited":false,"comment_id":133873201,"body":"I am choosing <code>MultiSessionChannelAdaptor</code> over  <code>ChannelAdaptor</code> because the Bank`s CBS is taking 10 sec to respond to my application. Due to this too many transactions are getting qued up on my end. Using <code>ChannelAdaptor</code> shows synchronous behavior. A tech person from the bank is saying their CBS supports only persistent TCP connections."},{"owner":{"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"edited":false,"comment_id":133878579,"body":"But, can you test with the normal channel adaptor to discard or not if it&#39;s an issue with multi session channel adaptor? I tried replacing a channel adaptor by a multi session channel adaptor in a test project and didn&#39;t see that issue, but as I told you without the code that generates the messages or the values of their fields and responses it&#39;s hard to tell if it&#39;s some combination of things. A lot extract would be helpful"},{"owner":{"user_id":3444205,"display_name":"Andr&#233;s Alcarraz"},"edited":false,"comment_id":133880296,"body":"&quot;my understanding is as soon as I got the response mux is supposed to send the remaining request to the server&quot; Actually, this is not true, the mux sends the request through the channel as soon as you call the request method, it doesn&#39;t directly send it, it put it in the <code>in</code> queue of the channel adaptor, and it is supposed to be taken by it independently of another request being answered, since the channel doesn&#39;t know about matching requests to responses."},{"owner":{"user_id":183639,"display_name":"apr"},"edited":false,"comment_id":133882220,"body":"Watch out your MUX&#39;s <code>ready</code> element, it shows: <code>&lt;ready&gt;jpos-client-adaptor.ready&lt;&#47;ready&gt;</code> so it expects your channel-adaptor to be called <code>jpos-client-adaptor</code>, but your channel-adaptor is actually called <code>manager</code>.  Make sure your remote host actually supports multiple sessions to the same port, I believe they don&#39;t, and you&#39;re just connected from a TCP/IP standpoint against the low level TCP/IP stack&#39;s backlog, and that&#39;s why you&#39;re not getting any response. Some sessions are actually connected to nothing."},{"owner":{"user_id":3124992,"display_name":"Sanjok"},"edited":false,"comment_id":133892327,"body":"Hi Andr&#233;s, I tested the same, running the jpos server in my test environment. I did not find the issue we were talking about. But, when I switch to their server problem is visible. I am not aware of any special request handling mechanism required on the server side for <code>MultiSessionChannelAdaptor</code>."}],"owner":{"user_id":3124992,"display_name":"Sanjok"},"view_count":84,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1680004658,"question_id":75865971,"body":"<p>below is my client mux config. I am facing the problem that when I send 100 requests, only the first 5 are reached to the server and I am able to get the response within 100 ms.my understanding is as soon as I got the response mux is supposed to send the remaining request to the server but it is not happening so all the rest of the 95 request gets a null response from the call to <code>mux.request(msg,25000)</code>.</p>\n<p><strong>10_client_channel.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; ?&gt;\n&lt;channel-adaptor name=&quot;manager&quot;\n                 class=&quot;org.jpos.q2.iso.MultiSessionChannelAdaptor&quot; logger=&quot;Q2&quot;&gt;\n    &lt;in&gt;channel-Tx&lt;/in&gt;\n    &lt;out&gt;channel-Rx&lt;/out&gt;\n    &lt;sessions&gt;5&lt;/sessions&gt;\n    &lt;timeout&gt;30000&lt;/timeout&gt;\n    &lt;keep-alive&gt;yes&lt;/keep-alive&gt;\n    &lt;max-connect-attempts&gt;30000000000&lt;/max-connect-attempts&gt;\n    &lt;reconnect-delay&gt;100&lt;/reconnect-delay&gt;\n   \n\n    &lt;channel name=&quot;client-channel&quot; class=&quot;org.jpos.iso.channel.ASCIIChannel&quot; logger=&quot;Q2&quot;\n             packager=&quot;org.jpos.iso.packager.GenericPackager&quot;&gt;\n        &lt;filter class=&quot;org.jpos.iso.filter.DebugFilter&quot; direction=&quot;outgoing&quot;/&gt;\n                &lt;property name=&quot;host&quot; value=&quot;localhost&quot;/&gt;\n        &lt;property name=&quot;port&quot; value=&quot;65000&quot;/&gt;\n        &lt;property name=&quot;timeout&quot; value=&quot;60000&quot;/&gt;\n \n        &lt;property name=&quot;packager-config&quot; value=&quot;${catalina.base}/conf/esewa/isoproperties/iso8583f1soft.xml&quot;/&gt;\n    &lt;/channel&gt;\n\n&lt;/channel-adaptor&gt;\n</code></pre>\n<p><strong>20_client_qmux.xml</strong></p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; ?&gt;\n&lt;mux class=&quot;org.jpos.q2.iso.QMUX&quot; logger=&quot;Q2&quot; name=&quot;jpos-client-mux&quot;&gt;\n    &lt;in&gt;channel-Rx&lt;/in&gt;\n    &lt;out&gt;channel-Tx&lt;/out&gt;\n    &lt;ready&gt;jpos-client-adaptor.ready&lt;/ready&gt;\n    &lt;key&gt;11,37&lt;/key&gt;\n    &lt;unhandled&gt;Channel-unhandled&lt;/unhandled&gt;\n&lt;/mux&gt;\n\n</code></pre>\n<p><code>private QMUX qmux;</code> is defined as a global variable and initialized via the constructor like:</p>\n<blockquote>\n<p><code>qmux= NameRegistrar.get(&quot;mux.jpos-client-mux&quot;);  channelTimeoutPeriod=25000;</code></p>\n</blockquote>\n<p>Below are the rest of the relevant codes as per @Andr√©s Alcarraz `s request</p>\n<pre class=\"lang-java prettyprint-override\"><code>\n            log.info(&quot;firing ISO....&quot;);\n            applicationResponse.setIsoRequestTime(new Date());\n            ISOMsg responseISOMessage= qmux.request(requestISOMessage,channelTimeoutPeriod);\n            applicationResponse.setIsoResponseTime(new Date());\n            log.info(&quot;responseISOMessage:{}&quot;,responseISOMessage);\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","join","spring-data-jpa"],"comments":[{"owner":{"user_id":3959856,"display_name":"Jack Flamp"},"edited":false,"comment_id":133818859,"body":"In what way is it not working? What error do you get?"},{"owner":{"user_id":7963227,"display_name":"Sametcey"},"edited":false,"comment_id":133820213,"body":"I want a JSON only with the data from Artikel Class. Without the Join to Artikeldetails"},{"owner":{"user_id":11713777,"display_name":"dariosicily"},"edited":false,"comment_id":133824917,"body":"Have you tried the <code>JsonIgnore</code> annotation above the list?"}],"answers":[{"owner":{"user_id":7963227,"display_name":"Sametcey"},"up_vote_count":0,"is_accepted":true,"creation_date":1680097415,"answer_id":75878070,"body":"<p>I have now the Solution:</p>\n<p>if you include fetch = FetchType.LAZY to OneToMany and to ManyToOne so you can catch only one Entity with</p>\n<pre><code>@Query(value = &quot;SELECT a FROM Artikel a where a.artikelnummer = :artikelnummer&quot;)\nList&lt;Artikel&gt; findByArtikelnummer(@Param(&quot;artikelnummer&quot;) int artikelnummer);\n</code></pre>\n<p>If You choose FetchType.Eager he will automaticaly Join every time the OneToMay relation.</p>\n"}],"owner":{"user_id":7963227,"display_name":"Sametcey"},"view_count":47,"up_vote_count":2,"accepted_answer_id":75878070,"answer_count":1,"score":2,"creation_date":1679999749,"question_id":75865159,"body":"<p>I have a question. I have two Tables in Database and two Classes for Hibernate.</p>\n<p>Class Artikel:</p>\n<pre><code>@Entity\n@Table(name = &quot;Artikel&quot;)\npublic class Artikel{\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    private String artikelbezeichnung;\n    private int artikelnummer;\n    private Float preis;\n    \n    @OneToMany(mappedBy = &quot;artikel&quot;, fetch = FetchType.LAZY)\n    @JsonManagedReference\n    private List&lt;Artikeldetails&gt; artikeldetails;\n</code></pre>\n<p>Class Artikeldetails</p>\n<pre><code>@Entity\n@Table(name=&quot;ARTIKELDETAILS&quot;)\npublic class Artikeldetails {\n    \n    @Id\n    @GeneratedValue(strategy = GenerationType.AUTO)\n    private Long id;\n    \n    private String artikeldetail;\n    private String artikelcustom;\n    private String artikelselektion;\n    \n    @ManyToOne(fetch = FetchType.LAZY)\n    @JoinColumn(name=&quot;artikelid&quot;)\n    @JsonBackReference\n    private Artikel artikel;\n</code></pre>\n<p>The JPA Query:</p>\n<pre><code>List&lt;Artikel&gt; findByArtikelnummer(@Param(&quot;artikelnummer&quot;) int artikelnummer);\n</code></pre>\n<p>The result is for example:</p>\n<pre><code>[{\n        &quot;id&quot;: 3,\n        &quot;artikelbezeichnung&quot;: null,\n        &quot;artikelnummer&quot;: 123,\n        &quot;preis&quot;: 123.0,\n        &quot;artikeldetails&quot;: [{\n                &quot;id&quot;: 4,\n                &quot;artikeldetail&quot;: &quot;DetailNummer 1&quot;,\n                &quot;artikelcustom&quot;: &quot;Detail Nummer 1&quot;,\n                &quot;artikelselektion&quot;: &quot;Detail Nummer 1&quot;\n            }, {\n                &quot;id&quot;: 5,\n                &quot;artikeldetail&quot;: &quot;DetailNummer 2&quot;,\n                &quot;artikelcustom&quot;: &quot;Detail Nummer 2&quot;,\n                &quot;artikelselektion&quot;: &quot;Detail Nummer 2&quot;\n            }, {\n                &quot;id&quot;: 6,\n                &quot;artikeldetail&quot;: &quot;DetailNummer 3&quot;,\n                &quot;artikelcustom&quot;: &quot;DetailNummer 3&quot;,\n                &quot;artikelselektion&quot;: &quot;DetailNummer 3&quot;\n            }\n        ]\n    }\n]\n</code></pre>\n<p>That's fine and working but now I only want to get ONLY the Artikel Data without Join. How should I do that? Must I create a new Class for that?</p>\n<p>I trying also to change this line:</p>\n<pre><code>@Query(value = &quot;SELECT a FROM Artikel a where a.artikelnummer = :artikelnummer&quot;)\nList&lt;Artikel&gt; findByArtikelnummer(@Param(&quot;artikelnummer&quot;) int artikelnummer);\n</code></pre>\n<p>but this is not working.</p>\n"},{"tags":["java","maven","dependencies","guice","plexus"],"comments":[{"owner":{"user_id":296328,"display_name":"khmarbaise"},"edited":false,"comment_id":133808810,"body":"Why are you trying to <code>I want to build a Maven project using the </code> why not simply by using the command line? via <code>mvn clean package</code> or alike? What kind of problem are you trying to solve?"},{"owner":{"user_id":5645656,"display_name":"Cardinal System"},"edited":false,"comment_id":133809819,"body":"@khmarbaise the purpose of my application is to deploy a Maven artifact and all of its dependencies to an internal company server. I need to 1) collect project info (group id, artifact id, version), 2) build the project, and 3) download and list dependencies (including transitive). The program needs the file paths to all the dependencies, as well as the project&#39;s jar (<code>project.build.directory</code> + <code>project.build.finalName</code>). Currently it uses Maven Invoker and parses the log output, but spinning up a new process to run Maven for each deployment is inefficient and the log output can vary."},{"owner":{"user_id":296328,"display_name":"khmarbaise"},"edited":false,"comment_id":133817769,"body":"That can simply being done via Maven itself via <code>mvn deploy</code>?"},{"owner":{"user_id":5645656,"display_name":"Cardinal System"},"edited":false,"comment_id":133819783,"body":"@khmarbaise is <code>mvn deploy</code> capable of deploying to a remote file system via SMB? Our internal company server is not a Maven repository, but rather a file server. There is also very particular logic in place to transfer files in a manner compatible with our VPN. Would I have to create my own mojo to do this? Lastly, I am still concerned about the inefficiency of spinning up a new process for each application that is deployed. If I must take a CLI approach, is there a way to keep the process alive and issue multiple different commands to it at any given time?"},{"owner":{"user_id":296328,"display_name":"khmarbaise"},"edited":false,"comment_id":133826958,"body":"Using a file sever (SMB) for a maven repository is simply the wrong way use a repository manager... much easier to handle and is supported out of the box of Maven.. even if needed I would suggest not to use Maven 4.0.0-alpha.. use Maven 3.9.1 as foundation.. also it would be easier to simply build your app and use the content of the local cash ($HOME/.m2/repository) ... or define that location via command line <code>-Dmaven.local.repo=..</code> and <code>I am still concerned about the inefficiency of spinning up a new process</code> exactly that is the reason doing things the wrong way..."},{"owner":{"user_id":5645656,"display_name":"Cardinal System"},"edited":false,"comment_id":133828122,"body":"@khmarbaise thank you for taking the time to work with me on this. Our programmers use the Maven CLI for <i>development</i> and we use a proper Nexus repository manager for our development builds and dependencies. The SMB server is a pre-existing file server which hosts our <b>completed applications</b> and dependencies as compiled jars (not fat jars), and distributes them to end-users. <i>We are <b>not</b> using the SMB server as a repository manager</i>. The goal is to decouple the completed projects from the Maven ecosystem so a <i>separate service</i> can distribute them to internal users from the SMB server."},{"owner":{"user_id":5645656,"display_name":"Cardinal System"},"edited":false,"comment_id":133828158,"body":"My current approach uses Maven Invoker to run <code>mvn dependency:list -DoutputAbsoluteArtifactFilename=true -DincludeScope=compile</code> and <code>mvn package</code>. It does not always work because I have to parse the raw output from these commands, which varies depending on the context. I am looking for a more reliable, consistent, and efficient approach. Can it be done with the CLI?"}],"owner":{"user_id":5645656,"display_name":"Cardinal System"},"view_count":69,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679941718,"question_id":75859178,"body":"<p>I want to build a Maven project using the <a href=\"https://maven.apache.org/ref/3.9.1/maven-core/\" rel=\"nofollow noreferrer\">Maven Core</a> (version <a href=\"https://mvnrepository.com/artifact/org.apache.maven/maven-core/4.0.0-alpha-5\" rel=\"nofollow noreferrer\">4.0.0-alpha-5</a>) library. All I want right now is a working proof-of-concept to run the <code>install</code> phase. However, I have not been able to create a working example and I cannot find a single tutorial or demonstration on the internet.</p>\n<p>My main method is quite straightforward, it shouldn't require explanation:</p>\n<pre><code>public static void main(String[] args) throws Exception {\n    Injector injector = Guice.createInjector(new CompleteMavenModule());\n\n    Maven maven = injector.getInstance(Maven.class);\n    MavenExecutionRequestPopulator populator = injector.getInstance(MavenExecutionRequestPopulator.class);\n\n    DefaultMavenExecutionRequest request = new DefaultMavenExecutionRequest();\n    request.setPom(new File(&quot;C:\\\\Users\\\\lc70844\\\\eclipse-workspace\\\\TestProject\\\\pom.xml&quot;));\n    request.setGoals(Arrays.asList(&quot;install&quot;));\n\n    populator.populateDefaults(request);\n\n    MavenExecutionResult result = maven.execute(request);\n    if (result.hasExceptions())\n        result.getExceptions().stream().forEach(Throwable::printStackTrace);\n}\n</code></pre>\n<p>When I run this, I get the following exception:</p>\n<pre><code>org.codehaus.plexus.component.repository.exception.ComponentLookupException: java.util.NoSuchElementException\n      role: org.eclipse.aether.repository.WorkspaceReader\n  roleHint: reactor\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:267)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:255)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:246)\n    at org.apache.maven.DefaultMaven.doExecute(DefaultMaven.java:228)\n    at org.apache.maven.DefaultMaven.execute(DefaultMaven.java:153)\n    at com.nhbb.test.MavenTest.main(MavenTest.java:43)\nCaused by: java.util.NoSuchElementException\n    at org.eclipse.sisu.inject.LocatedBeans$Itr.next(LocatedBeans.java:141)\n    at org.eclipse.sisu.inject.LocatedBeans$Itr.next(LocatedBeans.java:1)\n    at org.eclipse.sisu.plexus.DefaultPlexusBeans$Itr.next(DefaultPlexusBeans.java:76)\n    at org.eclipse.sisu.plexus.DefaultPlexusBeans$Itr.next(DefaultPlexusBeans.java:1)\n    at org.codehaus.plexus.DefaultPlexusContainer.lookup(DefaultPlexusContainer.java:263)\n    ... 5 more\n</code></pre>\n<p>Going back to my main method, you'll notice the <code>Guice.createInjector(new CompleteMavenModule())</code>. The <code>CompleteMavenModule</code> class is a <a href=\"https://github.com/google/guice\" rel=\"nofollow noreferrer\">Guice</a> module I setup to provide me with a <a href=\"https://maven.apache.org/ref/4-LATEST/maven-core/apidocs/org/apache/maven/DefaultMaven.html\" rel=\"nofollow noreferrer\"><code>DefaultMaven</code></a> instance:</p>\n<pre><code>import java.util.Arrays;\nimport java.util.Collections;\nimport java.util.HashSet;\nimport java.util.List;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.stream.Collectors;\nimport java.util.stream.Stream;\n\nimport javax.inject.Named;\nimport javax.inject.Singleton;\n\nimport org.apache.maven.DefaultMaven;\nimport org.apache.maven.Maven;\nimport org.apache.maven.WorkspaceReaderModule;\nimport org.apache.maven.artifact.factory.ArtifactFactory;\nimport org.apache.maven.artifact.factory.DefaultArtifactFactory;\nimport org.apache.maven.artifact.handler.ArtifactHandler;\nimport org.apache.maven.artifact.handler.manager.ArtifactHandlerManager;\nimport org.apache.maven.artifact.handler.manager.DefaultArtifactHandlerManager;\nimport org.apache.maven.artifact.repository.layout.ArtifactRepositoryLayout;\nimport org.apache.maven.artifact.repository.layout.DefaultRepositoryLayout;\nimport org.apache.maven.artifact.repository.metadata.io.DefaultMetadataReader;\nimport org.apache.maven.artifact.repository.metadata.io.MetadataReader;\nimport org.apache.maven.classrealm.ClassRealmManager;\nimport org.apache.maven.classrealm.ClassRealmManagerDelegate;\nimport org.apache.maven.classrealm.DefaultClassRealmManager;\nimport org.apache.maven.eventspy.EventSpy;\nimport org.apache.maven.execution.BuildResumptionAnalyzer;\nimport org.apache.maven.execution.BuildResumptionDataRepository;\nimport org.apache.maven.execution.DefaultBuildResumptionAnalyzer;\nimport org.apache.maven.execution.DefaultBuildResumptionDataRepository;\nimport org.apache.maven.execution.DefaultMavenExecutionRequestPopulator;\nimport org.apache.maven.execution.MavenExecutionRequestPopulator;\nimport org.apache.maven.execution.MojoExecutionListener;\nimport org.apache.maven.execution.ProjectExecutionListener;\nimport org.apache.maven.execution.scope.internal.MojoExecutionScopeCoreModule;\nimport org.apache.maven.extension.internal.CoreExports;\nimport org.apache.maven.graph.DefaultGraphBuilder;\nimport org.apache.maven.graph.GraphBuilder;\nimport org.apache.maven.internal.impl.EventSpyImpl;\nimport org.apache.maven.lifecycle.LifecycleMappingDelegate;\nimport org.apache.maven.lifecycle.MojoExecutionConfigurator;\nimport org.apache.maven.lifecycle.internal.DefaultExecutionEventCatapult;\nimport org.apache.maven.lifecycle.internal.DefaultLifecycleExecutionPlanCalculator;\nimport org.apache.maven.lifecycle.internal.DefaultLifecycleMappingDelegate;\nimport org.apache.maven.lifecycle.internal.DefaultLifecycleTaskSegmentCalculator;\nimport org.apache.maven.lifecycle.internal.DefaultMojoExecutionConfigurator;\nimport org.apache.maven.lifecycle.internal.DefaultProjectArtifactFactory;\nimport org.apache.maven.lifecycle.internal.ExecutionEventCatapult;\nimport org.apache.maven.lifecycle.internal.LifecycleExecutionPlanCalculator;\nimport org.apache.maven.lifecycle.internal.LifecycleTaskSegmentCalculator;\nimport org.apache.maven.lifecycle.internal.ProjectArtifactFactory;\nimport org.apache.maven.lifecycle.internal.builder.Builder;\nimport org.apache.maven.lifecycle.internal.builder.multithreaded.MultiThreadedBuilder;\nimport org.apache.maven.model.building.DefaultModelProcessor;\nimport org.apache.maven.model.building.DefaultModelSourceTransformer;\nimport org.apache.maven.model.building.ModelProcessor;\nimport org.apache.maven.model.building.ModelSourceTransformer;\nimport org.apache.maven.model.io.DefaultModelReader;\nimport org.apache.maven.model.io.ModelReader;\nimport org.apache.maven.model.locator.DefaultModelLocator;\nimport org.apache.maven.model.locator.ModelLocator;\nimport org.apache.maven.model.superpom.DefaultSuperPomProvider;\nimport org.apache.maven.model.superpom.SuperPomProvider;\nimport org.apache.maven.plugin.BuildPluginManager;\nimport org.apache.maven.plugin.DefaultBuildPluginManager;\nimport org.apache.maven.plugin.DefaultExtensionRealmCache;\nimport org.apache.maven.plugin.DefaultMojosExecutionStrategy;\nimport org.apache.maven.plugin.DefaultPluginArtifactsCache;\nimport org.apache.maven.plugin.DefaultPluginDescriptorCache;\nimport org.apache.maven.plugin.DefaultPluginRealmCache;\nimport org.apache.maven.plugin.ExtensionRealmCache;\nimport org.apache.maven.plugin.LegacySupport;\nimport org.apache.maven.plugin.MavenPluginManager;\nimport org.apache.maven.plugin.MavenPluginPrerequisitesChecker;\nimport org.apache.maven.plugin.MojosExecutionStrategy;\nimport org.apache.maven.plugin.PluginArtifactsCache;\nimport org.apache.maven.plugin.PluginDescriptorCache;\nimport org.apache.maven.plugin.PluginRealmCache;\nimport org.apache.maven.plugin.internal.DefaultLegacySupport;\nimport org.apache.maven.plugin.internal.DefaultMavenPluginManager;\nimport org.apache.maven.plugin.internal.DefaultPluginDependenciesResolver;\nimport org.apache.maven.plugin.internal.MavenPluginInternalModule;\nimport org.apache.maven.plugin.internal.MavenPluginJavaPrerequisiteChecker;\nimport org.apache.maven.plugin.internal.MavenPluginMavenPrerequisiteChecker;\nimport org.apache.maven.plugin.internal.PluginDependenciesResolver;\nimport org.apache.maven.plugin.prefix.PluginPrefixResolver;\nimport org.apache.maven.plugin.prefix.internal.DefaultPluginPrefixResolver;\nimport org.apache.maven.plugin.version.PluginVersionResolver;\nimport org.apache.maven.plugin.version.internal.DefaultPluginVersionResolver;\nimport org.apache.maven.project.DefaultProjectBuilder;\nimport org.apache.maven.project.DefaultProjectBuildingHelper;\nimport org.apache.maven.project.DefaultProjectDependenciesResolver;\nimport org.apache.maven.project.DefaultProjectRealmCache;\nimport org.apache.maven.project.ProjectBuilder;\nimport org.apache.maven.project.ProjectBuildingHelper;\nimport org.apache.maven.project.ProjectDependenciesResolver;\nimport org.apache.maven.project.ProjectRealmCache;\nimport org.apache.maven.project.RepositorySessionDecorator;\nimport org.apache.maven.project.artifact.DefaultProjectArtifactsCache;\nimport org.apache.maven.project.artifact.ProjectArtifactsCache;\nimport org.apache.maven.project.collector.DefaultProjectsSelector;\nimport org.apache.maven.project.collector.ProjectsSelector;\nimport org.apache.maven.repository.RepositorySystem;\nimport org.apache.maven.repository.internal.MavenResolverModule;\nimport org.apache.maven.repository.legacy.LegacyRepositorySystem;\nimport org.apache.maven.rtinfo.RuntimeInformation;\nimport org.apache.maven.rtinfo.internal.DefaultRuntimeInformation;\nimport org.apache.maven.session.scope.internal.SessionScopeModule;\nimport org.apache.maven.settings.crypto.DefaultSettingsDecrypter;\nimport org.apache.maven.settings.crypto.SettingsDecrypter;\nimport org.codehaus.plexus.DefaultPlexusContainer;\nimport org.codehaus.plexus.PlexusContainer;\nimport org.eclipse.aether.connector.basic.BasicRepositoryConnectorFactory;\nimport org.eclipse.aether.repository.WorkspaceReader;\nimport org.eclipse.aether.spi.connector.RepositoryConnectorFactory;\nimport org.eclipse.aether.spi.connector.transport.TransporterFactory;\nimport org.eclipse.aether.transport.file.FileTransporterFactory;\nimport org.eclipse.aether.transport.http.ChecksumExtractor;\nimport org.eclipse.aether.transport.http.HttpTransporterFactory;\nimport org.sonatype.plexus.components.cipher.DefaultPlexusCipher;\nimport org.sonatype.plexus.components.sec.dispatcher.DefaultSecDispatcher;\nimport org.sonatype.plexus.components.sec.dispatcher.SecDispatcher;\n\nimport com.google.inject.AbstractModule;\nimport com.google.inject.Provides;\nimport com.google.inject.name.Names;\nimport com.google.inject.util.Providers;\n\n@SuppressWarnings(&quot;deprecation&quot;)\npublic class CompleteMavenModule extends AbstractModule {\n\n    @Override\n    protected void configure() {\n        // org.apache.maven.repository.internal.MavenResolverModule does not provide\n        // bindings for all the necessary dependencies\n        install(new MavenResolverModule());\n        install(new SessionScopeModule());\n        install(new MojoExecutionScopeCoreModule());\n        install(new MavenPluginInternalModule());\n        install(new WorkspaceReaderModule());\n\n        // make module &quot;complete&quot; by binding things not bound by MavenResolverModule\n        bind(Maven.class).to(DefaultMaven.class).in(Singleton.class);\n        bind(EventSpy.class).annotatedWith(Names.named(&quot;impl&quot;)).to(EventSpyImpl.class);\n        bind(Builder.class).annotatedWith(Names.named(&quot;multithreaded&quot;)).to(MultiThreadedBuilder.class);\n        bind(MojosExecutionStrategy.class).to(DefaultMojosExecutionStrategy.class).in(Singleton.class);\n        bind(ArtifactRepositoryLayout.class).to(DefaultRepositoryLayout.class).in(Singleton.class);\n        bind(ArtifactHandlerManager.class).to(DefaultArtifactHandlerManager.class).in(Singleton.class);\n        bind(BuildResumptionAnalyzer.class).to(DefaultBuildResumptionAnalyzer.class).in(Singleton.class);\n        bind(BuildResumptionDataRepository.class).to(DefaultBuildResumptionDataRepository.class).in(Singleton.class);\n        bind(GraphBuilder.class).annotatedWith(Names.named(GraphBuilder.HINT)).to(DefaultGraphBuilder.class)\n                .in(Singleton.class);\n        bind(ExecutionEventCatapult.class).to(DefaultExecutionEventCatapult.class).in(Singleton.class);\n        bind(LifecycleExecutionPlanCalculator.class).to(DefaultLifecycleExecutionPlanCalculator.class)\n                .in(Singleton.class);\n        bind(LifecycleMappingDelegate.class).annotatedWith(Names.named(&quot;default&quot;))\n                .to(DefaultLifecycleMappingDelegate.class).in(Singleton.class);\n        bind(MojoExecutionConfigurator.class).annotatedWith(Names.named(&quot;default&quot;))\n                .to(DefaultMojoExecutionConfigurator.class).in(Singleton.class);\n        bind(LifecycleTaskSegmentCalculator.class).to(DefaultLifecycleTaskSegmentCalculator.class).in(Singleton.class);\n        bind(ProjectArtifactFactory.class).to(DefaultProjectArtifactFactory.class).in(Singleton.class);\n        bind(ArtifactFactory.class).to(DefaultArtifactFactory.class).in(Singleton.class);\n        bind(ModelLocator.class).to(DefaultModelLocator.class).in(Singleton.class);\n        bind(ModelReader.class).to(DefaultModelReader.class).in(Singleton.class);\n        bind(ModelProcessor.class).to(DefaultModelProcessor.class).in(Singleton.class);\n        bind(SuperPomProvider.class).to(DefaultSuperPomProvider.class).in(Singleton.class);\n        bind(ModelSourceTransformer.class).to(DefaultModelSourceTransformer.class).in(Singleton.class);\n        bind(BuildPluginManager.class).to(DefaultBuildPluginManager.class).in(Singleton.class);\n        bind(LegacySupport.class).to(DefaultLegacySupport.class).in(Singleton.class);\n        bind(MavenPluginManager.class).to(DefaultMavenPluginManager.class).in(Singleton.class);\n        bind(MavenPluginPrerequisitesChecker.class).annotatedWith(Names.named(&quot;java&quot;))\n                .to(MavenPluginJavaPrerequisiteChecker.class);\n        bind(MavenPluginPrerequisitesChecker.class).annotatedWith(Names.named(&quot;maven&quot;))\n                .to(MavenPluginMavenPrerequisiteChecker.class);\n        bind(ClassRealmManager.class).to(DefaultClassRealmManager.class).in(Singleton.class);\n        bind(ExtensionRealmCache.class).to(DefaultExtensionRealmCache.class).in(Singleton.class);\n        bind(PluginArtifactsCache.class).to(DefaultPluginArtifactsCache.class).in(Singleton.class);\n        bind(PluginDescriptorCache.class).to(DefaultPluginDescriptorCache.class).in(Singleton.class);\n        bind(PluginRealmCache.class).to(DefaultPluginRealmCache.class).in(Singleton.class);\n        bind(PluginDependenciesResolver.class).to(DefaultPluginDependenciesResolver.class).in(Singleton.class);\n        bind(PluginPrefixResolver.class).to(DefaultPluginPrefixResolver.class).in(Singleton.class);\n        bind(MetadataReader.class).to(DefaultMetadataReader.class).in(Singleton.class);\n        bind(PluginVersionResolver.class).to(DefaultPluginVersionResolver.class).in(Singleton.class);\n        bind(ProjectBuilder.class).to(DefaultProjectBuilder.class);\n        bind(ProjectBuildingHelper.class).to(DefaultProjectBuildingHelper.class).in(Singleton.class);\n        bind(ProjectDependenciesResolver.class).to(DefaultProjectDependenciesResolver.class);\n        bind(ProjectRealmCache.class).to(DefaultProjectRealmCache.class).in(Singleton.class);\n        bind(ProjectArtifactsCache.class).to(DefaultProjectArtifactsCache.class).in(Singleton.class);\n        bind(ProjectsSelector.class).to(DefaultProjectsSelector.class).in(Singleton.class);\n        bind(RepositorySystem.class).to(LegacyRepositorySystem.class).in(Singleton.class);\n        bind(RuntimeInformation.class).to(DefaultRuntimeInformation.class).in(Singleton.class);\n        bind(SettingsDecrypter.class).to(DefaultSettingsDecrypter.class).in(Singleton.class);\n        bind(PlexusContainer.class).to(DefaultPlexusContainer.class).in(Singleton.class);\n        bind(WorkspaceReader.class).annotatedWith(Names.named(&quot;ide&quot;)).toProvider(Providers.of(null))\n                .in(Singleton.class);\n        bind(SecDispatcher.class).annotatedWith(Names.named(&quot;maven&quot;))\n                .toInstance(new DefaultSecDispatcher(new DefaultPlexusCipher()));\n        bind(MavenExecutionRequestPopulator.class).to(DefaultMavenExecutionRequestPopulator.class).in(Singleton.class);\n        bind(CoreExports.class).toInstance(new CoreExports(null, Collections.emptySet(), Collections.emptySet()));\n\n        bind(RepositoryConnectorFactory.class).annotatedWith(Names.named(&quot;basic&quot;))\n                .to(BasicRepositoryConnectorFactory.class);\n        bind(TransporterFactory.class).annotatedWith(Names.named(&quot;file&quot;)).to(FileTransporterFactory.class);\n        bind(TransporterFactory.class).annotatedWith(Names.named(&quot;http&quot;)).to(HttpTransporterFactory.class);\n    }\n\n    @Provides\n    @Singleton\n    List&lt;RepositorySessionDecorator&gt; getRepositorySessionDecorators() {\n        // No implementations exist for\n        // org.apache.maven.project.RepositorySessionDecorator\n        return Collections.emptyList();\n    }\n\n    @Provides\n    @Singleton\n    List&lt;ClassRealmManagerDelegate&gt; getClassRealmManagerDelegates() {\n        // No implementations exist for\n        // org.apache.maven.classrealm.ClassRealmManagerDelegate\n        return Collections.emptyList();\n    }\n\n    @Provides\n    @Singleton\n    List&lt;MavenPluginPrerequisitesChecker&gt; getMavenPluginPrerequisitesCheckers(\n            @Named(&quot;java&quot;) MavenPluginPrerequisitesChecker java,\n            @Named(&quot;maven&quot;) MavenPluginPrerequisitesChecker maven) {\n        return Arrays.asList(java, maven);\n    }\n\n    @Provides\n    @Singleton\n    List&lt;MojoExecutionListener&gt; getMojoExecutionListeners(MojoExecutionListener listener) {\n        return Arrays.asList(listener);\n    }\n\n    @Provides\n    @Singleton\n    Map&lt;String, MojoExecutionConfigurator&gt; provideMojoExecutionConfigurators(\n            @Named(&quot;default&quot;) MojoExecutionConfigurator defaultConfigurator) {\n        return Stream.of(defaultConfigurator).collect(Collectors.toMap(k -&gt; &quot;default&quot;, v -&gt; v));\n    }\n\n    @Provides\n    @Singleton\n    Map&lt;String, LifecycleMappingDelegate&gt; provideLifecycleMappingDelegates(\n            @Named(&quot;default&quot;) LifecycleMappingDelegate defaultDelegate) {\n        return Stream.of(defaultDelegate).collect(Collectors.toMap(k -&gt; &quot;default&quot;, v -&gt; v));\n    }\n\n    @Provides\n    @Singleton\n    Map&lt;String, ArtifactHandler&gt; provideArtifactHandlers() {\n        // No implementations exist for CompleteResolverModule.provideArtifactHandlers()\n        return Collections.emptyMap();\n    }\n\n    @Provides\n    @Singleton\n    Map&lt;String, ArtifactRepositoryLayout&gt; provideRepositoryLayouts(ArtifactRepositoryLayout defaultLayout) {\n        return Stream.of(defaultLayout).collect(Collectors.toMap(k -&gt; &quot;default&quot;, v -&gt; v));\n    }\n\n    @Provides\n    @Singleton\n    List&lt;ProjectExecutionListener&gt; provideProjectExecutionListeners() {\n        // No listeners\n        return Collections.emptyList();\n    }\n\n    @Provides\n    @Singleton\n    Map&lt;String, Builder&gt; provideLifecycleBuilders(@Named(&quot;multithreaded&quot;) Builder multi) {\n        return Stream.of(multi).collect(Collectors.toMap(k -&gt; &quot;multithreaded&quot;, v -&gt; v));\n    }\n\n    @Provides\n    @Singleton\n    List&lt;EventSpy&gt; provideEventSpies(@Named(&quot;impl&quot;) EventSpy impl) {\n        return Arrays.asList(impl);\n    }\n\n    @Provides\n    @Singleton\n    Map&lt;String, ChecksumExtractor&gt; provideChecksumExtractors() {\n        return Collections.emptyMap();\n    }\n\n    @Provides\n    @Singleton\n    Set&lt;RepositoryConnectorFactory&gt; provideRepositoryConnectorFactories(\n            @Named(&quot;basic&quot;) RepositoryConnectorFactory basic) {\n        Set&lt;RepositoryConnectorFactory&gt; factories = new HashSet&lt;&gt;();\n        factories.add(basic);\n        return Collections.unmodifiableSet(factories);\n    }\n\n    @Provides\n    @Singleton\n    Set&lt;TransporterFactory&gt; provideTransporterFactories(@Named(&quot;file&quot;) TransporterFactory file,\n            @Named(&quot;http&quot;) TransporterFactory http) {\n        Set&lt;TransporterFactory&gt; factories = new HashSet&lt;&gt;();\n        factories.add(file);\n        factories.add(http);\n        return Collections.unmodifiableSet(factories);\n    }\n\n}\n</code></pre>\n<p>Right off the bat, I know that I am not doing this correctly. You'll notice these two lines:</p>\n<pre><code>install(new MavenPluginInternalModule());\ninstall(new WorkspaceReaderModule());\n</code></pre>\n<p>I had to create these modules to setup bindings for <a href=\"https://github.com/apache/maven/blob/master/maven-core/src/main/java/org/apache/maven/plugin/internal/ReadOnlyPluginParametersValidator.java\" rel=\"nofollow noreferrer\"><code>ReadOnlyPluginParametersValidator</code></a>, <a href=\"https://github.com/apache/maven/blob/master/maven-core/src/main/java/org/apache/maven/plugin/internal/DefaultMavenPluginValidator.java\" rel=\"nofollow noreferrer\"><code>DefaultMavenPluginValidator</code></a>, and <a href=\"https://github.com/apache/maven/blob/master/maven-core/src/main/java/org/apache/maven/ReactorReader.java\" rel=\"nofollow noreferrer\"><code>ReactorReader</code></a>, which are all package-private classes (the binding for ReactorReader was my attempt at addressing the error above). If these classes are private, it leads me to believe that some Maven class is supposed to setup these bindings for me. Judging by the fact that I have to create the bindings myself, I suspect that I am taking an improper approach to the dependency injection.</p>\n<p>I noticed that Maven does not use Guice directly, but is working with the <a href=\"https://javadoc.io/doc/org.codehaus.plexus/plexus-container-default/latest/org/codehaus/plexus/PlexusContainer.html\" rel=\"nofollow noreferrer\"><code>PlexusContainer</code></a> interface in conjunction with <a href=\"https://codehaus-plexus.github.io/plexus-classworlds/\" rel=\"nofollow noreferrer\">Plexus Classworlds</a> and <a href=\"https://github.com/google/guice\" rel=\"nofollow noreferrer\">Guice</a> for dependency injection. I do not have a solid understanding of what these &quot;Plexus&quot; libraries are or how work, and I believe this is the root of my problem. Again, I cannot find documentation, examples, or demonstrations on how to use these libraries with Maven.</p>\n<p>The exception I pasted above originated from <a href=\"https://github.com/apache/maven/blob/master/maven-core/src/main/java/org/apache/maven/DefaultMaven.java#L246\" rel=\"nofollow noreferrer\">this line</a> in the DefaultMaven class:</p>\n<pre><code>try {\n    WorkspaceReader reactorReader = container.lookup(WorkspaceReader.class, ReactorReader.HINT);\n    repoSession.setWorkspaceReader(reactorReader);\n} catch (ComponentLookupException e) {\n    return addExceptionToResult(result, e);\n}\n</code></pre>\n<p>In this snippet, <code>container</code> is a PlexusContainer instance, not a Guice injector. I am quite convinced at this point that I need to be setting up my dependency injection with this &quot;Plexus&quot; library rather than Guice, but how? There is nothing I can find explaining how to do this.</p>\n<hr />\n<p><strong>EDIT</strong>: Here is my pom.xml:</p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot; xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;groupId&gt;com.example.test&lt;/groupId&gt;\n    &lt;artifactId&gt;core-maven-test&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;properties&gt;\n        &lt;maven.compiler.source&gt;1.8&lt;/maven.compiler.source&gt;\n        &lt;maven.compiler.target&gt;1.8&lt;/maven.compiler.target&gt;\n        &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.inject&lt;/groupId&gt;\n            &lt;artifactId&gt;guice&lt;/artifactId&gt;\n            &lt;version&gt;5.1.0&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-core&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0-alpha-5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-compat&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0-alpha-5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resolver-provider&lt;/artifactId&gt;\n            &lt;version&gt;4.0.0-alpha-5&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.resolver&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resolver-connector-basic&lt;/artifactId&gt;\n            &lt;version&gt;1.9.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.resolver&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resolver-transport-file&lt;/artifactId&gt;\n            &lt;version&gt;1.9.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.resolver&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resolver-transport-http&lt;/artifactId&gt;\n            &lt;version&gt;1.9.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.resolver&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resolver-spi&lt;/artifactId&gt;\n            &lt;version&gt;1.9.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.resolver&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resolver-util&lt;/artifactId&gt;\n            &lt;version&gt;1.9.7&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.maven.resolver&lt;/groupId&gt;\n            &lt;artifactId&gt;maven-resolver-impl&lt;/artifactId&gt;\n            &lt;version&gt;1.9.7&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n"},{"tags":["java","kotlin"],"comments":[{"owner":{"user_id":448875,"display_name":"broot"},"edited":false,"comment_id":133798802,"body":"Looks like a missing feature in the Kotlin compiler. Please note these annotations are not standardized. Multiple companies provide their own for performing some kind of static code analysis. JetBrains&#39; annotations were created mostly for the code analysis in IntelliJ. Still, I think it would be a nice addition to respect them in the Kotlin compiler."},{"owner":{"user_id":1540818,"display_name":"Joffrey"},"edited":false,"comment_id":133798817,"body":"Since you can update the code manually, is your question about the generation of the snippet in the IDE? Or is it about forbidding returning <code>MutableList</code> when <code>@Unmodifiable List</code> is expected as return type in the Java interface?"},{"owner":{"user_id":1652377,"display_name":"Chris Rankin"},"edited":false,"comment_id":133799929,"body":"To be fair, the <code>@Unmodifiable</code> and <code>@UnmodifiableView</code> annotations are both defined as having <code>@Target(TYPE_USE)</code> which doesn&#39;t sound like what you want anyway.  By contrast, <code>@NotNull</code> and <code>@Nullable</code> are defined to have <code>@Target({METHOD, FIELD, PARAMETER, LOCAL_VARIABLE, TYPE_USE})</code>."},{"owner":{"user_id":1033686,"display_name":"Matthew Layton"},"edited":false,"comment_id":133802941,"body":"@Joffrey I guess the former (generation of the snippet in the IDE), since forbidding <code>MutableList&lt;T&gt;</code> isn&#39;t actually possible?"},{"owner":{"user_id":1540818,"display_name":"Joffrey"},"edited":false,"comment_id":133803939,"body":"I might be wrong, but IIRC with strict JSR 305 mode (<code>-Xjsr305=strict</code> compiler argument), you get compile errors on misuses of nullable/non-nullable types in Kotlin for things declared in java with the proper JSR-305 annotations, including method overrides like this. So I guess it would be possible in general, it just hasn&#39;t been done for <code>@Unmodifiable</code>"}],"owner":{"user_id":1033686,"display_name":"Matthew Layton"},"view_count":52,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679907408,"question_id":75853829,"body":"<p>Consider the following Java API:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Recipe {\n\n    @NotNull\n    List&lt;Ingredient&gt; getIngredients();\n\n    void AddOptionalIngredient(@Nullable Ingredient ingredient);\n}\n</code></pre>\n<p>When you implement this from Kotlin, IntelliJ will insert the correct nullable modifiers because of the <code>@NotNull</code> and <code>@Nullable</code> annotations:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class CakeRecipe : Recipe {\n\n    // Return type is non-nullable...\n    fun getIngredients(): MutableList&lt;Ingredient&gt; { ... }\n\n    // Parameter type is nullable...\n    fun addOptionalIngredient(ingredient: Ingredient?) { ... }\n}\n</code></pre>\n<p>There is still a problem with the implementation; notably, that Java's <code>List&lt;T&gt;</code> maps to <code>MutabeList&lt;T&gt;</code> in Kotlin, although, I can make this change manually:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class CakeRecipe : Recipe {\n\n    // Return type is read-only (or, unmodifiable)\n    fun getIngredients(): List&lt;Ingredient&gt; { ... }\n\n    ...\n}\n</code></pre>\n<p>I recently found out about the <code>@Unmodifiable</code> annotation, and assumed that JetBrains would respect this annotation in the same way that it respects <code>@NotNull</code> and <code>@Nullable</code>, therefore my Java API looks like this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public interface Recipe {\n\n    @NotNull\n    @Unmodifiable List&lt;Ingredient&gt; getIngredients();\n\n    void AddOptionalIngredient(@Nullable Ingredient ingredient);\n}\n</code></pre>\n<p>But, the Kotlin implementation still implements <code>MutableList&lt;T&gt;</code>:</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class CakeRecipe : Recipe {\n\n    // @Unmodifiable not respected by IDE\n    fun getIngredients(): MutableList&lt;Ingredient&gt; { ... }\n\n    ...\n}\n</code></pre>\n<p>What is the purpose of <code>@Unmodifiable</code>, and is it possible (with, or without an annotation) to get Kotlin to implement <code>List&lt;T&gt;</code> where the corresponding Java API is <code>List&lt;T&gt;</code>?</p>\n"},{"tags":["java","macos","sandbox","command-line-tool","jpackage"],"answers":[{"owner":{"user_id":6085193,"display_name":"Transformer"},"up_vote_count":0,"is_accepted":false,"creation_date":1680633204,"answer_id":75932726,"body":"<p>Couple of suggestions, especially when building with Xcode if you are also targeting mobile apps, I see you signed the entitlements but <em>not</em> the deepsign.</p>\n<blockquote>\n<p>maybe use <code>-c --verbose</code> options to get more debug information to help you out.</p>\n</blockquote>\n<hr />\n<blockquote>\n<p>Try creating a <em>new</em> text file named java.entitlements with the following contents:</p>\n</blockquote>\n\n<pre><code>&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;\n&lt;plist version=&quot;1.0&quot;&gt;\n    &lt;dict&gt;\n        &lt;key&gt;com.apple.security.app-sandbox&lt;/key&gt;\n        &lt;true/&gt;\n        &lt;key&gt;com.apple.security.inherit&lt;/key&gt;\n        &lt;true/&gt;\n    &lt;/dict&gt;\n&lt;/plist&gt;\n\n\n// Now grant these entitlements to the java executable:\ncodesign -f -s &quot;Mac Developer: John Smith (XYZ)&quot; --entitlements &quot;java.entitlements&quot; &quot;Home/bin/java&quot;\n</code></pre>\n<p>Make sure to use your own developer certificate with the correct paths appropriate to your situation.</p>\n<p>Because this is a cryptographic operation, complete changes to the Info.plist prior to this step.</p>\n<p>Now Configure Tools / for e.g. in Xcode\nMake sure that your <em>application or framework target during build</em></p>\n<ul>\n<li>first step will copy</li>\n<li>second step sign this PlugIn bundle when you build. Do this by adding a &quot;New Copy Files Phase&quot; to the target. Rename it to ‚ÄúCopy Java Runtime‚Äù), choose PlugIns as the destination, choose the Java.runtime directory, and ensure that code sign on copy is selected.</li>\n</ul>\n<p>Sign the Java.runtime bundle\nSometimes code sign on copy will complain that the Java.runtime bundle is not already signed, so you may have to manually deep sign the bundle in order to have your tool or Xcode re-sign it when building your project:</p>\n<pre><code>codesign --deep -f -s &quot;Mac Developer: John Smith (XYZ)&quot; Java.runtime/\n</code></pre>\n<hr />\n<p>Ultimately I think it is in the <code>codesign</code> <a href=\"https://github.com/airsdk/Adobe-Runtime-Support/issues/1778\" rel=\"nofollow noreferrer\">look at this ref. issue on github</a> to fix it\nSomeone forced it to code sign to run it ...</p>\n<pre><code>codesign --force --deep --sign - ./Test-signed.app\n</code></pre>\n<p>This is for when a process fails to start on macos similar to yours  <a href=\"https://github.com/libgdx/packr/issues/161\" rel=\"nofollow noreferrer\">https://github.com/libgdx/packr/issues/161</a></p>\n"}],"owner":{"user_id":2318843,"display_name":"RadekJ"},"view_count":133,"up_vote_count":3,"answer_count":1,"score":2,"creation_date":1679897818,"question_id":75852613,"body":"<p><strong>Objective</strong></p>\n<p>I want to ship my java app <strong>myapp</strong> to macOS appstore, the app uses a command line tool <strong>mytool</strong> called with:</p>\n<p><code>Runtime.getRuntime().exec(arrayOf(&quot;mytool&quot;, &quot;argument&quot;)</code></p>\n<p><strong>Tools</strong></p>\n<ul>\n<li>Mac M1Pro with Ventura 13.1</li>\n<li>OpenJDK 18.0.2 (x64)</li>\n<li>Xcode 14.2</li>\n</ul>\n<p><strong>Problem</strong></p>\n<p>When I try to run it it crashes with the error:</p>\n<p><code>Cannot run program &quot;/Applications/MyApp.app/Contents/app/mytool&quot;: error=0, Failed to exec spawn helper: pid 64709, signal: 4</code></p>\n<p><strong>What I have done so far</strong></p>\n<p>After reading:</p>\n<ul>\n<li><a href=\"https://developer.apple.com/documentation/xcode/embedding-a-helper-tool-in-a-sandboxed-app\" rel=\"nofollow noreferrer\">Embedding a command-line tool in a sandboxed app</a></li>\n<li><a href=\"https://docs.oracle.com/en/java/javase/17/jpackage/support-application-features.html#GUID-8D9F0607-91F4-4070-8823-02FCAB12238D\" rel=\"nofollow noreferrer\">Sign the Application Package (macOS)</a></li>\n</ul>\n<p>My understanding is that I have to:</p>\n<ul>\n<li>sign my command line tool <strong>mytool</strong> with entitlements:</li>\n</ul>\n<pre><code>&lt;key&gt;com.apple.security.app-sandbox&lt;/key&gt;\n&lt;true/&gt;\n&lt;key&gt;com.apple.security.inherit&lt;/key&gt;\n&lt;true/&gt;\n</code></pre>\n<ul>\n<li>place that tool inside the .app image and then sign the image</li>\n</ul>\n<p>To achieve that I do:</p>\n<pre><code>/usr/bin/codesign --timestamp --options runtime \\\n-s &quot;3rd Party Mac Developer Application: Radoslaw Juszczyk (*********)&quot; \\\n-i com.rjuszczyk.myapp.mytool \\\n--entitlements mytool.plist \\\n-vvvv inputDir/mytool\n</code></pre>\n<p>to sign <strong>mytool</strong>, and then I place it in the <strong>inputDir</strong></p>\n<p>Then I copy my <strong>myapp.jar</strong> to the same <strong>inputDir</strong> and execute:</p>\n<pre><code>jpackage --name MyApp\n--input inputDir\n--mac-sign --mac-signing-key-user-name &quot;Radoslaw Juszczyk&quot;\n--mac-package-signing-prefix com.rjuszczyk.myapp.\n--mac-app-store\n--type pkg\n--mac-entitlements myapp.plist\n--main-jar myapp.jar\n</code></pre>\n<p>Now it creates <strong>MyApp.pkg</strong> successfully, which passes verification in the <em>Transporter.app</em></p>\n<p>When I install it, it installs correctly, and the installed <code>.app</code> has this hierarchy:</p>\n<p><a href=\"https://i.stack.imgur.com/NFCbB.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/NFCbB.png\" alt=\"Contents of the .app\" /></a></p>\n<p>When the execution hits <code>Runtime.exec</code> it crashes with the mentioned above error.</p>\n<p>I tried also to specify different launch mechanisms (posix_spawn, fork) in the jpackage tool :</p>\n<p><code>--java-options &quot;-Djdk.lang.Process.launchMechanism=posix_spawn&quot;</code></p>\n<p>but no luck. My understanding of the problem is that somehow the process started with Runtime.exec does not start in the sandbox, and since <strong>mytool</strong> requires to be inside sandbox it fails to execute (I am not sure if it makes any sense).</p>\n<p><strong>My entitlement files for reference:</strong></p>\n<p>myapp.plist:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;\n&lt;plist version=&quot;1.0&quot;&gt;\n&lt;dict&gt;\n    &lt;key&gt;com.apple.security.app-sandbox&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;com.apple.security.cs.allow-jit&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;com.apple.security.cs.allow-unsigned-executable-memory&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;com.apple.security.cs.disable-library-validation&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;com.apple.security.cs.allow-dyld-environment-variables&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;com.apple.security.cs.debugger&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;com.apple.security.device.audio-input&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;!-- Add additional entitlements here, for example for network or hardware access. --&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n<p>mytool.plist:</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;!DOCTYPE plist PUBLIC &quot;-//Apple//DTD PLIST 1.0//EN&quot; &quot;http://www.apple.com/DTDs/PropertyList-1.0.dtd&quot;&gt;\n&lt;plist version=&quot;1.0&quot;&gt;\n&lt;dict&gt;\n    &lt;key&gt;com.apple.security.app-sandbox&lt;/key&gt;\n    &lt;true/&gt;\n    &lt;key&gt;com.apple.security.inherit&lt;/key&gt;\n    &lt;true/&gt;\n&lt;/dict&gt;\n&lt;/plist&gt;\n</code></pre>\n<p>This is the moment when I feel like I run out of options. The only thing which maybe is causing that (but I do not believe it matters) is the fact that I place my <strong>mytool</strong> under <code>Contents/app</code> instead of <code>Contents/MacOS</code> but I am not sure how make the <code>jpackage</code> tool to place it somewhere else.</p>\n<p>I hope there is someone who went through the same process and can point out what I am missing. Or point me to some docs describing how to do it.</p>\n"},{"tags":["java","rabbitmq","load-testing","project-reactor","onbackpressed"],"answers":[{"owner":{"user_id":5812179,"display_name":"Niamatullah Bakhshi"},"up_vote_count":0,"is_accepted":false,"creation_date":1682572085,"answer_id":76116918,"body":"<p>My initial assumption was that the issue must be with the project reactor. However, the issue seems to be with <code>spring integration.</code></p>\n<p>The flow of requests in my application is as follows:</p>\n<pre><code>FooController (1) ‚ûù FooService (2) ‚ûù Spring Integration (3) ‚ûù RabbitMQ (4)\n</code></pre>\n<p>As explained in the question, this flow works fine for sometimes. However, after processing few requests i.e. 300 requests, the app hangs and fails to accept more requests i.e. returning <code>503 http reponse</code>.</p>\n<p>After a through research, it seems the requests stop in step <code>(3)</code> which is delegating the tasks to spring integration for some unknown reasons.</p>\n<p>Solution:</p>\n<pre><code>FooController (1) ‚ûù FooService (2) ‚ûù RabbitMQ (3)\n</code></pre>\n<p>Note: delegating the tasks to Spring Integration is convenient and recommended. So, the more ideal scenario would be as follow should the root cause get resolved with <code>spring integration (4)</code>.</p>\n<pre><code>FooController (1) ‚ûù Spring Integration(2) ‚ûù FooService (3) ‚ûù Spring Integration(4) ‚ûù RabbitMQ (5)\n</code></pre>\n"}],"owner":{"user_id":5812179,"display_name":"Niamatullah Bakhshi"},"view_count":56,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1679896942,"question_id":75852532,"body":"<p>I am using <strong>projectreactor</strong> Sinks with backPressureBuffer support to handle incoming requests in my spring boot application.\nIn my <code>FooService.kt</code></p>\n<pre><code>private val requestProcessor = Sinks.many().multicast().onBackpressureBuffer&lt;FooRequest&gt;(100)\n</code></pre>\n<p>An EmitFailureHandler as follows</p>\n<pre><code>  val emitFailureHandler = EmitFailureHandler { _: SignalType?, emitResult: EmitResult -&gt;\n    (emitResult == EmitResult.FAIL_NON_SERIALIZED || emitResult == EmitResult.FAIL_OVERFLOW)\n  }\n</code></pre>\n<p>I have defined an <strong>init</strong> method inside the class as follows:</p>\n<pre><code>  init {\n    requestProcessor.asFlux()\n      .flatMap { request -&gt;\n        try {\n          logger.debug(&quot;handleByRabbitMq : {}&quot;, request)\n          footGateway.handleByRabbitMq(request)\n        } catch (e: Exception) {\n          logger.error(&quot;unknown error when processing foo request&quot;, e)\n          Mono.empty()\n        }\n      }\n      .subscribe()\n  }\n\n\n  fun handleRequest(fooRequest: FooRequest): Mono&lt;FooResponse&gt; {\n    val (_, id) = fooRequest\n    val responseSink = Sinks.one&lt;FooResponse&gt;()\n    responseListeners[id] = responseSink\n    requestProcessor.emitNext(fooRequest, emitFailureHandler)\n    return responseSink.asMono()\n      .timeout(Duration.ofSeconds(10))\n      .onErrorResume { Mono.just(FooResponse(REQUEST_SUBMITTED)) }\n      .doOnTerminate { responseListeners.remove(id) }\n  }\n</code></pre>\n<p><strong>FooController.kt</strong></p>\n<pre><code>  @GetMapping(&quot;/foo/request&quot;)\n  @Timed(value = &quot;foo.request&quot;)\n  fun fooRequest(fooRequest: FooRequest): Mono&lt;String&gt; {\n    return performAction(fooRequest)\n      .flatMap { fooResponse -&gt;\n        Mono.fromCallable {\n          &quot;FooResponse: $fooResponse&quot;\n        }\n      }\n      .doOnNext { logger.debug(&quot;response {}&quot;, it) }\n  }\n\n  fun performAction(fooRequest: FooRequest): Mono&lt;FooResponse&gt; {\n    return Mono.just(fooRequest))\n      .flatMap { request -&gt;\n        fooService.handleRequest(request)\n      }\n      .doOnNext { response -&gt;\n        //some operations here\n        logger.debug(response)\n      }.subscribeOn(Schedulers.boundedElastic())\n  }\n</code></pre>\n<p>Everything works great. The requests are emitted and processed normally initially.</p>\n<p><strong>Problem</strong>: When the app goes under a load of requests or when I do the load tesing using frameworks like <code>k6</code>, the <code>requestProcessor</code> stops emitting the items. In other words, the <code>init</code> block stops executing despite the <code>requestProcessor.emitNext(fooRequest, emitFailureHandler)</code> getting called.</p>\n<p>Initially, the app threw <code>FAIL_NON_SERIALIZED</code> and <code>FAIL_OVERFLOW</code> error. For this, I added the above <code>emitFailureHandler</code>. It helped but postponed the issue for a few hours.</p>\n<ol>\n<li>The App still responds though the success rate is 96%. This is still\ngood.</li>\n<li>The second time execution: The success rate jumps down to 88%.\nAfter execution of this, the app throws <code>503 http reponse</code> and no longer accepts requests.</li>\n</ol>\n<p>3.logs.</p>\n<p><a href=\"https://i.stack.imgur.com/MURYa.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/MURYa.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/zM4nz.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zM4nz.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://i.stack.imgur.com/UwLi4.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/UwLi4.png\" alt=\"enter image description here\" /></a></p>\n<p>New findings:\nThere seems to be some issues with the RabbitMQ [<code>fooGateway.handleByRabbitMq(request)</code>]. I have been digging around it but failed to see any errors. With removing the rabbitMQ in the <strong>init</strong> block, the app becomes responsive. Yet, I need to know the cause?</p>\n"},{"tags":["java","http","java-8","httpurlconnection"],"comments":[{"owner":{"user_id":2970947,"display_name":"Elliott Frisch"},"edited":false,"comment_id":133783730,"body":"I would use a <a href=\"https://docs.oracle.com/javase/8/docs/technotes/guides/net/proxies.html\" rel=\"nofollow noreferrer\">http proxy</a> if I needed that. <a href=\"https://www.telerik.com/fiddler\" rel=\"nofollow noreferrer\">Fiddler</a> for example."},{"owner":{"user_id":4085019,"display_name":"PseudoAj"},"edited":false,"comment_id":133783753,"body":"Unfortunately proxy wouldn&#39;t suffice the use case."},{"owner":{"user_id":20306007,"display_name":"life888888"},"edited":false,"comment_id":133785754,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/46157002/how-to-write-a-http-proxy-using-netty\">How to write a http proxy using netty</a>"},{"owner":{"user_id":4085019,"display_name":"PseudoAj"},"edited":false,"comment_id":133795205,"body":"What I am looking for is an inproc solution. Out of proc proxy is something that works and not a solution for the original question."},{"owner":{"user_id":1786065,"display_name":"Rogue"},"edited":false,"comment_id":133928525,"body":"Random thought: Have you tried a call to <code>HttpURLConnection.super.connect()</code>? (That&#39;s how the line would be written as-is in the code)."}],"answers":[{"owner":{"user_id":3182188,"display_name":"Raniz"},"up_vote_count":0,"is_accepted":false,"creation_date":1680202936,"answer_id":75892039,"body":"<p>What you can do is copy the existing implementation in the JDK and modify that.</p>\n<p>Note that this uses internal APIs and might only work on OpenJDK.</p>\n<p>I initially wrote this on OpenJDK 16 so the copied implementation is a bit fancier than the one in OpenJDK 8, but there's no harm in that.</p>\n<pre><code>public class Main {\n\n    private static String PREFIX = &quot;sun.net.www.protocol.&quot;;\n\n    public static void main(String[] args) throws IOException {\n\n\n        URL.setURLStreamHandlerFactory((protocol) -&gt; {\n            // Avoid using reflection during bootstrap\n            switch (protocol) {\n                case &quot;file&quot;:\n                    return new sun.net.www.protocol.file.Handler();\n                case &quot;jar&quot;:\n                    return new sun.net.www.protocol.jar.Handler();\n               // Inject our own http and https handlers\n                case &quot;http&quot;:\n                    return new HttpUrlHandler();\n                case &quot;https&quot;:\n                    return new HttpsUrlHandler();\n            }\n            // The rest of this method is copied from the JDK 19 implementation\n            String name = PREFIX + protocol + &quot;.Handler&quot;;\n            try {\n                Object o = Class.forName(name).getDeclaredConstructor().newInstance();\n                return (URLStreamHandler)o;\n            } catch (Exception e) {\n                // For compatibility, all Exceptions are ignored.\n                // any number of exceptions can get thrown here\n            }\n            return null;\n        });\n\n        byte[] buffer = new byte[1024];\n        new URL(&quot;http://stackoverflow.com&quot;).openStream().read(buffer);\n        System.out.println(new String(buffer, StandardCharsets.UTF_8));\n\n        new URL(&quot;https://stackoverflow.com&quot;).openStream().read(buffer);\n        System.out.println(new String(buffer, StandardCharsets.UTF_8));\n    }\n\n    private static class HttpUrlHandler extends sun.net.www.protocol.http.Handler {\n        @Override\n        protected URLConnection openConnection(URL u) throws IOException {\n            System.out.println(&quot;Overriding HTTP url&quot;);\n            return super.openConnection(new URL(&quot;http://httpbin.org/user-agent&quot;));\n        }\n    }\n\n    private static class HttpsUrlHandler extends sun.net.www.protocol.https.Handler {\n        @Override\n        protected URLConnection openConnection(URL u) throws IOException {\n            System.out.println(&quot;Overriding HTTPS url&quot;);\n            return super.openConnection(new URL(&quot;https://httpbin.org/user-agent&quot;));\n        }\n    }\n\n}\n</code></pre>\n<p>What this does is extend the normal protocol handle by overriding <code>openConnection</code>. The new implementation prints a message to standard out and then replace the URL with <em>http(s)://httpbin.org/user-agent</em> which responds with your user agent. The actual connection is then handled by the normal handler that we extend.</p>\n<p>Note that if you do this on more recent JDK you may have to handle the <em>jrt</em> protocol in the <code>switch</code> and you definitely will have to run and compile your application with a bunch of <code>--add-exports</code> to enable access to the internal packages.</p>\n<pre><code>$ ./gradlew run\n\n&gt; Task :compileJava\n/home/raniz/src/playground/src/main/java/playground/Main.java:20: warning: sun.net.www.protocol.file.Handler is internal proprietary API and may be removed in a future release\n                    return new sun.net.www.protocol.file.Handler();\n                                                        ^\n/home/raniz/src/playground/src/main/java/playground/Main.java:22: warning: sun.net.www.protocol.jar.Handler is internal proprietary API and may be removed in a future release\n                    return new sun.net.www.protocol.jar.Handler();\n                                                       ^\n/home/raniz/src/playground/src/main/java/playground/Main.java:47: warning: sun.net.www.protocol.http.Handler is internal proprietary API and may be removed in a future release\n    private static class HttpUrlHandler extends sun.net.www.protocol.http.Handler {\n                                                                         ^\n/home/raniz/src/playground/src/main/java/playground/Main.java:55: warning: sun.net.www.protocol.https.Handler is internal proprietary API and may be removed in a future release\n    private static class HttpsUrlHandler extends sun.net.www.protocol.https.Handler {\n                                                                           ^\n4 warnings\n\n&gt; Task :run\nOverriding HTTP url\n{\n  &quot;user-agent&quot;: &quot;Java/1.8.0_362&quot;\n}\n\nOverriding HTTPS url\n{\n  &quot;user-agent&quot;: &quot;Java/1.8.0_362&quot;\n}\n\n\nBUILD SUCCESSFUL in 1s\n2 actionable tasks: 2 executed\n</code></pre>\n<p>Another way to do this would be to use a HTTP client library that allows these kinds of extensions instead - Java's URL API is far from the most ergonomical.</p>\n<p>I found these examples with a quick search:</p>\n<p><a href=\"https://stackoverflow.com/questions/47401545/modify-request-uri-before-it-is-sent-with-apache-http-client\">Modify request URI before it is sent with apache http client</a><br />\n<a href=\"https://stackoverflow.com/questions/32196424/how-to-add-headers-to-okhttp-request-interceptor\">How to add headers to OkHttp request interceptor?</a> (this one's for adding headers but the approach for changing the URL is the same)</p>\n"}],"owner":{"user_id":4085019,"display_name":"PseudoAj"},"view_count":172,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1679786935,"question_id":75845092,"body":"<h2>About</h2>\n<p>Trying to see if it's possible to rewrite/mutate the request URL along with ability to intercept the headers, request and response cleanly over <code>java.net.HttpURLConnection</code> in Java 8. Closest approach is to use <code>setURLStreamHandlerFactory</code> to register a custom handler at the <code>URL</code> level:</p>\n<pre class=\"lang-java prettyprint-override\"><code>URL.setURLStreamHandlerFactory(new URLStreamHandler() {\n    protected URLConnection openConnection(URL url) throws IOException {\n        // Mutate the URL object to reqrite\n        URL rewrittenUrl = new URL(urlEndpoint);\n\n        // Return a connection object with custom connect()\n        return new URLConnection(rewrittenUrl) {\n            public void connect() throws IOException {\n                // Let the default HttpUrlConnection take care rest of the flow\n            }\n        };\n    }\n});\n</code></pre>\n<p>The existing usage of <code>URLConnection</code> can remain same:</p>\n<pre class=\"lang-java prettyprint-override\"><code>        HttpURLConnection httpConnection = (HttpURLConnection) requestUrl.openConnection();\n        httpConnection.setRequestMethod(&quot;GET&quot;);\n\n        // Pass Auth Header\n        httpConnection.setRequestProperty(&quot;Authorization&quot;, BEARER_TOKEN);\n\n        int status = httpConnection.getResponseCode();\n</code></pre>\n<h2>Problem Statement</h2>\n<p>The part that's not clear is how do we delegate the <code>connect()</code> method. Ideally, this should be handled by the existing http stack. Looks like <code>HttpURLConnection</code> is an abstract class and cannot to simply be delegated upon.</p>\n<h2>References</h2>\n<ul>\n<li><a href=\"https://stackoverflow.com/questions/26363573/registering-and-using-a-custom-java-net-url-protocol\">Registering and using a custom java.net.URL protocol</a></li>\n<li><a href=\"https://stackoverflow.com/questions/12764764/dont-understand-the-concept-of-extends-in-url-openconnection-in-java\">Dont understand the concept of extends in URL.openConnection() in JAVA</a></li>\n<li><a href=\"https://stackoverflow.com/questions/34154572/where-is-connect-and-disconnect-implemented\">Where is connect() and disconnect() implemented?</a></li>\n</ul>\n"},{"tags":["java"],"comments":[{"owner":{"user_id":214525,"display_name":"f1sh"},"edited":false,"comment_id":133765130,"body":"The problem is that you always need a reference to the structure that the <code>String</code> is inside of. The reason is that <code>String</code>s are immutable and you need to re-write the reference to the new value in the &quot;surrounding&quot; structure. In case of a <code>Collection</code> you need to re<code>set</code> that specific value in the collection. In case of a <code>Map</code>, you need to call <code>setValue</code> on that <code>Entry</code>."},{"owner":{"user_id":2840178,"display_name":"kar"},"edited":false,"comment_id":133765962,"body":"@f1sh Wondering if I should check if obj is a String and perform the value sets during the for loops itself before I traverse again. This way I will know the key for maps and index for collections. And just remove the instanceof String check. But will end up with Unsupported Exception if I modify during the loop though when it comes to collection."}],"owner":{"user_id":2840178,"display_name":"kar"},"view_count":35,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679660124,"question_id":75833532,"body":"<p>I have a complex json which has nested data, a mix of String numbers, list within lists, maps within maps and so on.</p>\n<p>I wan to go over every section of this object without having to recreate the object and find all the Strings.</p>\n<p>Every time a String value is found, append &quot;hello&quot; to it.</p>\n<p>Is this possible?</p>\n<p>Came up with the following but this will not work.</p>\n<p>Assigning the following won't actually replace it.</p>\n<pre><code>value = value + &quot;hello&quot;; // This is not going to work.\n</code></pre>\n<p>The complex json is not set in stone, there will be different variations,</p>\n<p>thus just trying to traverse every possible parts of the json and find string and append &quot;hello&quot; to it.</p>\n<p>Implementation where nothing is going to change since String is immutable.</p>\n<pre><code>    public void traverseAndAppendHello(Object obj) {\n    if (obj instanceof String) {\n        String value = (String) obj;\n        value = value + &quot;hello&quot;; // This is not going to work\n    } else if (obj instanceof Collection) {\n        Collection&lt;?&gt; collection = (Collection&lt;?&gt;) obj;\n        for (Object element : collection) {\n            traverseAndAppendHello(element);\n        }\n    } else if (obj instanceof Map) {\n        Map&lt;?, ?&gt; map = (Map&lt;?, ?&gt;) obj;\n        for (Map.Entry&lt;?, ?&gt; entry : map.entrySet()) {\n            Object value = entry.getValue();\n            traverseAndAppendHello(value);\n        }\n    } else if (obj instanceof Object[]) {\n        Object[] array = (Object[]) obj;\n        for (Object o : array) {\n            traverseAndAppendHello(o);\n        }\n    } else if (obj instanceof MyCustomObjectBeingTraversed) {\n        Map map = mapper.convertValue(obj, Map.class);\n        traverseAndAppendHello(map);\n    }\n    // move on to next steps if other types found like boolean and Number. \n}\n</code></pre>\n"},{"tags":["java","spring-boot","hibernate","hibernate-6.x"],"comments":[{"owner":{"user_id":1624551,"display_name":"Pao"},"edited":false,"comment_id":133762652,"body":"Have you tried escaped double quotes instead of ticks, cf. <a href=\"https://stackoverflow.com/questions/28571848/spring-boot-jpa-insert-in-table-with-uppercase-name-with-hibernate#comment61318428_28574416\" title=\"spring boot jpa insert in table with uppercase name with hibernate%23comment61318428_28574416\">stackoverflow.com/questions/28571848/&hellip;</a>? In this question and the answers there is also something about naming strategies, might also help."}],"owner":{"user_id":19036320,"display_name":"Kirill Vizniuk"},"view_count":105,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679640090,"question_id":75830677,"body":"<p>Good day everyone,\ntrying to upgrade Spring 5 to 6 as well as Hibernate from 5 to 6 versions.\nStumble upon an issue which I guess related to JPA and id casing.</p>\n<p>We are using JpaRepository with mix of custom <code>@Query</code>'es, no XML configuration.</p>\n<p>The problem we face is methods delivered from JpaRepository can't find ID of Domain Model, presumably due to casing issue. So for example <code>findById(String id)</code> doesn't work out of box.</p>\n<p>Original Stack Trace</p>\n<pre><code>org.springframework.orm.jpa.JpaSystemException: Unable to resolve property: {id}\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.convertHibernateAccessException(HibernateJpaDialect.java:321)\n    at org.springframework.orm.jpa.vendor.HibernateJpaDialect.translateExceptionIfPossible(HibernateJpaDialect.java:233)\n    at org.springframework.orm.jpa.AbstractEntityManagerFactoryBean.translateExceptionIfPossible(AbstractEntityManagerFactoryBean.java:550)\n    at org.springframework.dao.support.ChainedPersistenceExceptionTranslator.translateExceptionIfPossible(ChainedPersistenceExceptionTranslator.java:61)\n    at org.springframework.dao.support.DataAccessUtils.translateIfNecessary(DataAccessUtils.java:242)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:152)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.data.jpa.repository.support.CrudMethodMetadataPostProcessor$CrudMethodMetadataPopulatingMethodInterceptor.invoke(CrudMethodMetadataPostProcessor.java:163)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.interceptor.ExposeInvocationInterceptor.invoke(ExposeInvocationInterceptor.java:97)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.aop.framework.JdkDynamicAopProxy.invoke(JdkDynamicAopProxy.java:218)\n    at jdk.proxy2/jdk.proxy2.$Proxy188.findById(Unknown Source)\nCaused by: org.hibernate.HibernateException: Unable to resolve property: {id}\n    at org.hibernate.tuple.entity.EntityMetamodel.getPropertyIndex(EntityMetamodel.java:878)\n    at org.hibernate.persister.entity.AbstractEntityPersister.getPropertyIndex(AbstractEntityPersister.java:2826)\n    at org.hibernate.sql.results.graph.entity.internal.AbstractBatchEntitySelectFetchInitializer.getPropertyIndex(AbstractBatchEntitySelectFetchInitializer.java:133)\n    at org.hibernate.sql.results.graph.entity.internal.BatchEntityInsideEmbeddableSelectFetchInitializer.lambda$registerResolutionListener$0(BatchEntityInsideEmbeddableSelectFetchInitializer.java:82)\n    at org.hibernate.sql.results.graph.AbstractFetchParentAccess.notifyResolutionListeners(AbstractFetchParentAccess.java:41)\n    at org.hibernate.sql.results.graph.embeddable.AbstractEmbeddableInitializer.initializeInstance(AbstractEmbeddableInitializer.java:205)\n    at org.hibernate.sql.results.graph.embeddable.internal.EmbeddableAssembler.assemble(EmbeddableAssembler.java:34)\n    at org.hibernate.sql.results.graph.entity.AbstractEntityInitializer.initializeIdentifier(AbstractEntityInitializer.java:425)\n    at org.hibernate.sql.results.graph.entity.AbstractEntityInitializer.resolveEntityKey(AbstractEntityInitializer.java:387)\n    at org.hibernate.sql.results.graph.entity.AbstractEntityInitializer.resolveKey(AbstractEntityInitializer.java:318)\n    at org.hibernate.sql.results.graph.entity.internal.EntityJoinedFetchInitializer.resolveKey(EntityJoinedFetchInitializer.java:74)\n    at org.hibernate.sql.results.internal.StandardRowReader.coordinateInitializers(StandardRowReader.java:126)\n    at org.hibernate.sql.results.internal.StandardRowReader.readRow(StandardRowReader.java:97)\n    at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:178)\n    at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:443)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:166)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:91)\n    at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)\n    at org.hibernate.loader.ast.internal.SingleIdLoadPlan.load(SingleIdLoadPlan.java:140)\n    at org.hibernate.loader.ast.internal.SingleIdLoadPlan.load(SingleIdLoadPlan.java:98)\n    at org.hibernate.loader.ast.internal.CollectionLoaderBatchKey.load(CollectionLoaderBatchKey.java:122)\n    at org.hibernate.persister.collection.AbstractCollectionPersister.initialize(AbstractCollectionPersister.java:789)\n    at org.hibernate.event.internal.DefaultInitializeCollectionEventListener.onInitializeCollection(DefaultInitializeCollectionEventListener.java:75)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:107)\n    at org.hibernate.internal.SessionImpl.initializeCollection(SessionImpl.java:1710)\n    at org.hibernate.collection.spi.AbstractPersistentCollection.lambda$initialize$3(AbstractPersistentCollection.java:617)\n    at org.hibernate.collection.spi.AbstractPersistentCollection.withTemporarySessionIfNeeded(AbstractPersistentCollection.java:265)\n    at org.hibernate.collection.spi.AbstractPersistentCollection.initialize(AbstractPersistentCollection.java:615)\n    at org.hibernate.collection.spi.AbstractPersistentCollection.forceInitialization(AbstractPersistentCollection.java:813)\n    at org.hibernate.engine.internal.StatefulPersistenceContext.initializeNonLazyCollections(StatefulPersistenceContext.java:1003)\n    at org.hibernate.engine.internal.StatefulPersistenceContext.initializeNonLazyCollections(StatefulPersistenceContext.java:989)\n    at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:225)\n    at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:443)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:166)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:91)\n    at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)\n    at org.hibernate.loader.ast.internal.SingleUniqueKeyEntityLoaderStandard.load(SingleUniqueKeyEntityLoaderStandard.java:102)\n    at org.hibernate.persister.entity.AbstractEntityPersister.loadByUniqueKey(AbstractEntityPersister.java:2798)\n    at org.hibernate.persister.entity.AbstractEntityPersister.loadByUniqueKey(AbstractEntityPersister.java:2790)\n    at org.hibernate.sql.results.graph.entity.internal.EntitySelectFetchByUniqueKeyInitializer.initializeInstance(EntitySelectFetchByUniqueKeyInitializer.java:86)\n    at org.hibernate.sql.results.internal.StandardRowReader.coordinateInitializers(StandardRowReader.java:152)\n    at org.hibernate.sql.results.internal.StandardRowReader.readRow(StandardRowReader.java:97)\n    at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:178)\n    at org.hibernate.sql.results.spi.ListResultsConsumer.consume(ListResultsConsumer.java:33)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.doExecuteQuery(JdbcSelectExecutorStandardImpl.java:443)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.executeQuery(JdbcSelectExecutorStandardImpl.java:166)\n    at org.hibernate.sql.exec.internal.JdbcSelectExecutorStandardImpl.list(JdbcSelectExecutorStandardImpl.java:91)\n    at org.hibernate.sql.exec.spi.JdbcSelectExecutor.list(JdbcSelectExecutor.java:31)\n    at org.hibernate.loader.ast.internal.SingleIdLoadPlan.load(SingleIdLoadPlan.java:140)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderStandardImpl.load(SingleIdEntityLoaderStandardImpl.java:88)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderDynamicBatch.load(SingleIdEntityLoaderDynamicBatch.java:78)\n    at org.hibernate.loader.ast.internal.SingleIdEntityLoaderDynamicBatch.load(SingleIdEntityLoaderDynamicBatch.java:60)\n    at org.hibernate.persister.entity.AbstractEntityPersister.doLoad(AbstractEntityPersister.java:4416)\n    at org.hibernate.persister.entity.AbstractEntityPersister.load(AbstractEntityPersister.java:4406)\n    at org.hibernate.event.internal.DefaultLoadEventListener.loadFromDatasource(DefaultLoadEventListener.java:590)\n    at org.hibernate.event.internal.DefaultLoadEventListener.doLoad(DefaultLoadEventListener.java:563)\n    at org.hibernate.event.internal.DefaultLoadEventListener.load(DefaultLoadEventListener.java:221)\n    at org.hibernate.event.internal.DefaultLoadEventListener.proxyOrLoad(DefaultLoadEventListener.java:358)\n    at org.hibernate.event.internal.DefaultLoadEventListener.doOnLoad(DefaultLoadEventListener.java:110)\n    at org.hibernate.event.internal.DefaultLoadEventListener.onLoad(DefaultLoadEventListener.java:72)\n    at org.hibernate.event.service.internal.EventListenerGroupImpl.fireEventOnEachListener(EventListenerGroupImpl.java:118)\n    at org.hibernate.internal.SessionImpl.fireLoadNoChecks(SessionImpl.java:1244)\n    at org.hibernate.internal.SessionImpl.fireLoad(SessionImpl.java:1232)\n    at org.hibernate.loader.access.IdentifierLoadAccessImpl.doLoad(IdentifierLoadAccessImpl.java:195)\n    at org.hibernate.loader.access.IdentifierLoadAccessImpl.lambda$load$1(IdentifierLoadAccessImpl.java:161)\n    at org.hibernate.loader.access.IdentifierLoadAccessImpl.perform(IdentifierLoadAccessImpl.java:108)\n    at org.hibernate.loader.access.IdentifierLoadAccessImpl.load(IdentifierLoadAccessImpl.java:161)\n    at org.hibernate.internal.SessionImpl.find(SessionImpl.java:2336)\n    at org.hibernate.internal.SessionImpl.find(SessionImpl.java:2303)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.orm.jpa.SharedEntityManagerCreator$SharedEntityManagerInvocationHandler.invoke(SharedEntityManagerCreator.java:311)\n    at jdk.proxy2/jdk.proxy2.$Proxy179.find(Unknown Source)\n    at org.springframework.data.jpa.repository.support.SimpleJpaRepository.findById(SimpleJpaRepository.java:316)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker$RepositoryFragmentMethodInvoker.lambda$new$0(RepositoryMethodInvoker.java:288)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.doInvoke(RepositoryMethodInvoker.java:136)\n    at org.springframework.data.repository.core.support.RepositoryMethodInvoker.invoke(RepositoryMethodInvoker.java:120)\n    at org.springframework.data.repository.core.support.RepositoryComposition$RepositoryFragments.invoke(RepositoryComposition.java:516)\n    at org.springframework.data.repository.core.support.RepositoryComposition.invoke(RepositoryComposition.java:285)\n    at org.springframework.data.repository.core.support.RepositoryFactorySupport$ImplementationMethodExecutionInterceptor.invoke(RepositoryFactorySupport.java:628)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.doInvoke(QueryExecutorMethodInterceptor.java:168)\n    at org.springframework.data.repository.core.support.QueryExecutorMethodInterceptor.invoke(QueryExecutorMethodInterceptor.java:143)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.data.projection.DefaultMethodInvokingMethodInterceptor.invoke(DefaultMethodInvokingMethodInterceptor.java:77)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.transaction.interceptor.TransactionInterceptor$1.proceedWithInvocation(TransactionInterceptor.java:123)\n    at org.springframework.transaction.interceptor.TransactionAspectSupport.invokeWithinTransaction(TransactionAspectSupport.java:390)\n    at org.springframework.transaction.interceptor.TransactionInterceptor.invoke(TransactionInterceptor.java:119)\n    at org.springframework.aop.framework.ReflectiveMethodInvocation.proceed(ReflectiveMethodInvocation.java:184)\n    at org.springframework.dao.support.PersistenceExceptionTranslationInterceptor.invoke(PersistenceExceptionTranslationInterceptor.java:137)\n    ... 25 common frames omitted\n</code></pre>\n<p>Example of our ID mappings in Domain Model</p>\n<pre class=\"lang-java prettyprint-override\"><code> @Id\n @GeneratedValue(generator = &quot;uuid2&quot;)\n @GenericGenerator(name = &quot;uuid2&quot;, strategy = &quot;uuid2&quot;)\n @JsonProperty(&quot;ID&quot;)\n @Column(name = &quot;`ID`&quot;, length = 36)\n private String id;\n</code></pre>\n<p>We are using upperCase Database Column names with <code>ID</code>. I suppose the problem is JPA trying to look for <code>id</code> while we have <code>ID</code> there.\nMaking custom <code>findById(String id)</code> with <code>@Query</code> works fine, but not very eager to change ~200 repositories :) So hoping for better solution.</p>\n<p>Tried making custom <code>findById()</code> but that's local fix, tried naming strategy with Uppercase, didn't worked.</p>\n"},{"tags":["java","apache-httpclient-4.x","keep-alive","session-reuse"],"comments":[{"owner":{"user_id":1032890,"display_name":"GeertPt"},"edited":false,"comment_id":133761785,"body":"Does the nginx set a Keep-Alive header in the response? IIUC, it should reuse the connection if there is no Keep-Alive header anyways, but I&#39;m not sure about that. See <a href=\"https://stackoverflow.com/questions/68990038/apache-httpclient-keep-alive-strategy-for-active-connections\" title=\"apache httpclient keep alive strategy for active connections\">stackoverflow.com/questions/68990038/&hellip;</a>"},{"owner":{"user_id":10680142,"display_name":"Kreans"},"edited":false,"comment_id":133773793,"body":"yes, Nginx set a keep-alive header in the response"},{"owner":{"user_id":1032890,"display_name":"GeertPt"},"edited":false,"comment_id":133797581,"body":"OK, then what&#39;s the value of the keep-alive header?"},{"owner":{"user_id":10680142,"display_name":"Kreans"},"edited":false,"comment_id":134024115,"body":"Keep alive is set to 2000ms - confirmed by debug logs"}],"owner":{"user_id":10680142,"display_name":"Kreans"},"view_count":34,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679604365,"question_id":75827839,"body":"<p>I have nginx with enabled keepalive. I create simple java code, which sends 2 requests to nginx:</p>\n<pre><code>public class Main {\n    public static void main(String[] args) {\n        var apacheHttpClient = HttpClients.custom()\n                .setConnectionManager(new PoolingHttpClientConnectionManager())\n                .build();\n\n        HttpGet httpGet = new HttpGet(&quot;http://127.0.0.1:5000&quot;);\n        \n        for (int i = 0; i &lt; 2; i++) {\n            try (CloseableHttpResponse httpResponse = apacheHttpClient.execute(httpGet)) {\n                System.out.println(httpResponse.getStatusLine().getStatusCode());\n            } catch (ClientProtocolException e) {\n                throw new RuntimeException(e);\n            } catch (IOException e) {\n                throw new RuntimeException(e);\n            }\n        }\n    }\n}\n</code></pre>\n<p>I have checked with wireshark that the java program creates 2 connection to execute this command. Why Java apache httpclient do not reuse connection? I assume that 1 connection should be established and be reused.<a href=\"https://i.stack.imgur.com/nUe81.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/nUe81.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","spring-boot","tinkerpop","janusgraph"],"comments":[{"owner":{"user_id":18372214,"display_name":"ÊØõ‰∏âÁéã"},"edited":false,"comment_id":133796511,"body":"I&#39;ve managed to get this working using Cluster to connect to the JanusGraph server and submitting the <code>ConfiguredGraphFactory.create(graphName)</code> as a command string via the client to create the graph dynamically. A traversal object can then be obtained with <code>traversal.withRemote(DriverRemoteConnection.using(host, port, traversalName));</code> where the traversal name is graphName_traversal."}],"owner":{"user_id":18372214,"display_name":"ÊØõ‰∏âÁéã"},"view_count":58,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679553140,"question_id":75819840,"body":"<p>I'm trying to figure out how to connect to JanusGraph server from SpringBoot.</p>\n<p>JanusGraph was setup with Cassandra and ElasticSearch to run in docker and as each instance of JanusGraph only serves one graph, I've updated gremlin-server.yaml to use ConfiguredGraphFactory so that it can dynamically add graphs on the server, following this guide <a href=\"https://jointhegraph.github.io/articles/hosting-multiple-graphs-on-janusgraph/\" rel=\"nofollow noreferrer\">https://jointhegraph.github.io/articles/hosting-multiple-graphs-on-janusgraph/</a>.</p>\n<pre><code>graphManager: org.janusgraph.graphdb.management.JanusGraphManager\n  graphs: {\n    ConfigurationManagementGraph: conf/janusgraph-hbase-configurationgraph.properties\n  }\n</code></pre>\n<p>The setup has been tested to be working with Gremlin-console and graphs are being created and persisted to Cassandra.</p>\n<p>What I couldn't figure out is how to connect from SpringBoot app. I've tried using ConfiguredGraphFactory directly</p>\n<pre><code>graph = ConfiguredGraphFactory.getGraphNames().contains(xxx)\n        ? ConfiguredGraphFactory.open(xxx)\n        : ConfiguredGraphFactory.create(xxx);\n    g = graph.traversal();\n</code></pre>\n<p>but it fails to connect to the JanusGraph server with the following error</p>\n<blockquote>\n<p>java.lang.RuntimeException: org.janusgraph.graphdb.management.utils.ConfigurationManagementGraphNotEnabledException: Please add a key named &quot;ConfigurationManagementGraph&quot; to the &quot;graphs&quot; property in your YAML file and restart the server to be able to use the functionality of the ConfigurationManagementGraph class.</p>\n</blockquote>\n<p>My guess is that the hostname/ip and port for JanusGraph server hasn't been specified but where and how can I set them using the JanusGraph classes?</p>\n<p>I've checked the following but am still not getting it.</p>\n<ul>\n<li><a href=\"https://docs.janusgraph.org/operations/configured-graph-factory/\" rel=\"nofollow noreferrer\">https://docs.janusgraph.org/operations/configured-graph-factory/</a></li>\n<li><a href=\"https://docs.janusgraph.org/interactions/connecting/java/\" rel=\"nofollow noreferrer\">https://docs.janusgraph.org/interactions/connecting/java/</a></li>\n<li><a href=\"https://www.javadoc.io/static/org.janusgraph/janusgraph-core/0.6.3/index.html?org/janusgraph/core/ConfiguredGraphFactory.html\" rel=\"nofollow noreferrer\">https://www.javadoc.io/static/org.janusgraph/janusgraph-core/0.6.3/index.html?org/janusgraph/core/ConfiguredGraphFactory.html</a></li>\n</ul>\n<p>Would anyone be able to help?</p>\n<p>Appreciate and many thanks.</p>\n"},{"tags":["java","spring","spring-boot","gradle","grails"],"answers":[{"owner":{"user_id":379636,"display_name":"Cyntech"},"up_vote_count":0,"is_accepted":true,"creation_date":1680239044,"answer_id":75895009,"body":"<p>Found the issue, there was no stdout logger defined. I found the file log buried in some obscure location (log config was brought in from another app) and found it was hitting an error and exiting.</p>\n"}],"owner":{"user_id":379636,"display_name":"Cyntech"},"view_count":78,"up_vote_count":2,"accepted_answer_id":75895009,"answer_count":1,"score":2,"creation_date":1679535423,"question_id":75818595,"body":"<p>I'm in the process of upgrading a Grails 4.0.x app to Grails 5.3.0. I have managed to get the app building, however, the app itself does not start.</p>\n<p>Gradle goes through the actionable tasks and when it executes the <code>:bootRun</code> task, it exits with code 0 and terminates without running the app.</p>\n<p>I have tried both IntelliJ and gradlew (command line). Gradle has been upgraded to 7.2 and JDK to version 11. I've tried Spring Boot 2.5, 2.6 and 2.7.\nI've generated a blank grails 5 app, used the same versions, compared build.gradle files and the blank one runs fine.</p>\n<p>Command line:</p>\n<pre><code>C:\\Code\\project&gt;gradlew.bat bootRun\n\n&gt; Task :bootRun\n         @@@@@@@@@@@\n      @@             @@\n    @                   @\n  @@                      @          @@@@@@@@@@@@   @@@@@@@@@@@@        @@@@@@@      @@@@   @@@@        @@@@@@@@@@\n @    @@@@@@@@@@@@@@@@@    @      @@@@@@@@# 8@@@    @@@@    @@@@@      @@@@@@@@      @@@@   @@@@      @@@@@@  @@@\n @    @@@@@@@@@@@@@@@@o    #@    @@@@@              @@@@     @@@@@     @@@@ @@@@     @@@@   @@@@      @@@@\n@  @@@@@@@@@@@@@@@@@@ @@@@  @    @@@@               @@@@     @@@@     @@@@  @@@@@    @@@@   @@@@      @@@@@@@\n@   @@@@  @@@@@@@@@ @@@@@   @   @@@@@      @@@@@@@  @@@@@@@@@@@@      @@@@   @@@@    @@@@   @@@@        @@@@@@@@@\n@      @@    @@@   :@@      @   @@@@@       @@@@@@  @@@@@@@@@@@      @@@@    @@@@@   @@@@   @@@@           @@@@@@@\n.@     @@    @@@    @@     &amp;@    @@@@@       @@@@@  @@@@    @@@@    @@@@@@@@@@@@@@   @@@@   @@@@              @@@@@\n @     @@@   @@@   @@@     @     @@@@@@      @@@@@  @@@@    @@@@@   @@@@      @@@@@  @@@@   @@@@              @@@@@\n  @@        @@@@@         @        @@@@@@@@@@@@@@@  @@@@     @@@@@ @@@@@       @@@@@ @@@@   @@@@@@@@@  @@@@@@@@@@@\n    @                   @             @@@@@@@@@@8   @@@@      @@@@ @@@@        @@@@@ @@@@   @@@@@@@@@  @@@@@@@@@\n      @@             @@\n         @@@@@@@@@@@\n\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\n\nYou can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\n\nSee https://docs.gradle.org/7.2/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD SUCCESSFUL in 41s\n9 actionable tasks: 4 executed, 5 up-to-date\nC:\\Code\\project&gt;\n</code></pre>\n<p>IntelliJ:</p>\n<pre><code>|Running application...\n&gt; Task :bootBuildInfo\n&gt; Task :flywayMigrate\n&gt; Task :generateJooq UP-TO-DATE\n&gt; Task :compileJava UP-TO-DATE\n&gt; Task :compileGroovy\n&gt; Task :buildProperties\n&gt; Task :processResources UP-TO-DATE\n&gt; Task :classes\n&gt; Task :bootRunMainClassName\n\n&gt; Task :bootRun\n         @@@@@@@@@@@                                                                                              \n      @@             @@                                                                                           \n    @                   @                                                                                         \n  @@                      @          @@@@@@@@@@@@   @@@@@@@@@@@@        @@@@@@@      @@@@   @@@@        @@@@@@@@@@\n @    @@@@@@@@@@@@@@@@@    @      @@@@@@@@# 8@@@    @@@@    @@@@@      @@@@@@@@      @@@@   @@@@      @@@@@@  @@@ \n @    @@@@@@@@@@@@@@@@o    #@    @@@@@              @@@@     @@@@@     @@@@ @@@@     @@@@   @@@@      @@@@        \n@  @@@@@@@@@@@@@@@@@@ @@@@  @    @@@@               @@@@     @@@@     @@@@  @@@@@    @@@@   @@@@      @@@@@@@     \n@   @@@@  @@@@@@@@@ @@@@@   @   @@@@@      @@@@@@@  @@@@@@@@@@@@      @@@@   @@@@    @@@@   @@@@        @@@@@@@@@ \n@      @@    @@@   :@@      @   @@@@@       @@@@@@  @@@@@@@@@@@      @@@@    @@@@@   @@@@   @@@@           @@@@@@@\n.@     @@    @@@    @@     &amp;@    @@@@@       @@@@@  @@@@    @@@@    @@@@@@@@@@@@@@   @@@@   @@@@              @@@@@\n @     @@@   @@@   @@@     @     @@@@@@      @@@@@  @@@@    @@@@@   @@@@      @@@@@  @@@@   @@@@              @@@@@\n  @@        @@@@@         @        @@@@@@@@@@@@@@@  @@@@     @@@@@ @@@@@       @@@@@ @@@@   @@@@@@@@@  @@@@@@@@@@@\n    @                   @             @@@@@@@@@@8   @@@@      @@@@ @@@@        @@@@@ @@@@   @@@@@@@@@  @@@@@@@@@  \n      @@             @@                                                                                           \n         @@@@@@@@@@@                                                                                              \n\n\nDeprecated Gradle features were used in this build, making it incompatible with Gradle 8.0.\n\nYou can use '--warning-mode all' to show the individual deprecation warnings and determine if they come from your own scripts or plugins.\n\nSee https://docs.gradle.org/7.2/userguide/command_line_interface.html#sec:command_line_warnings\n\nBUILD SUCCESSFUL in 2m 41s\n9 actionable tasks: 6 executed, 3 up-to-date\n\nProcess finished with exit code 0\n</code></pre>\n<p>Is there anything I should be looking for or ways I can debug the bootRun task to figure out why this is happening.\nHas anyone come across this situation before?</p>\n"},{"tags":["java","mkdir","windows-11"],"comments":[{"owner":{"user_id":133203,"display_name":"Federico klez Culloca"},"edited":false,"comment_id":133735607,"body":"For what it&#39;s worth, the documentation you linked never states that it is an error to create such files. In fact that whole list is under a section called &quot;Naming <b>Conventions</b>&quot;, so it may be that such restrictions were relaxed and while Windows Explorer (or whatever the current Windows shell is called) keeps stopping you from creating files with those names, the actual operating system does not. Having said that, this is not really a Java question. It is borderline a <i>programming</i> question, imho."},{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":133736010,"body":"Just as an aside, I seem to recall once accidentally creating a directory or file with one of these reserved names. The creation occurred without errors. But it was a pain to delete. I believe this was with Windows 10 though."},{"owner":{"user_id":219159,"display_name":"Seva Alekseyev"},"edited":false,"comment_id":133736632,"body":"CON0-CON9 are not reserved and never were. CON is reserved (it stands for &quot;console&quot;), and COM0..COM9 are (those stand for the RS232 serial ports)."}],"answers":[{"owner":{"user_id":1128593,"display_name":"David Jones"},"up_vote_count":0,"is_accepted":false,"creation_date":1679506880,"answer_id":75815601,"body":"<p>The files are a remnant of the days of PC-DOS.  These pseudo-files are considered to exist regardless of any subdirectory (because DOS 1.0 didn't support directories).</p>\n<p>The filename, <code>NUL</code> for example, is reserved and cannot be used.  Back in the day, DOS would also ignore the extension so <code>NUL.TXT</code> was equivalent to <code>NUL</code> but I believe that went away when Windows started to support long filenames.   Nowadays, the naked reserved words tend to be treated differently to when used as part of a larger filename such as <code>NUL.txt</code> or <code>C:\\NUL</code>.  This may be because many commands use <code>\\\\?\\</code> <a href=\"https://learn.microsoft.com/en-us/windows/win32/fileio/naming-a-file#nt-namespaces\" rel=\"nofollow noreferrer\">naming</a> to avoid issues with filenames longer than <code>MAX_PATH</code>.</p>\n"}],"owner":{"user_id":2163727,"display_name":"MasterHD"},"view_count":69,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1679505124,"question_id":75815313,"body":"<p>I recently discovered that due to backward compatibility with DOS, the Windows OS has some <a href=\"https://learn.microsoft.com/en-us/windows/win32/fileio/naming-a-file\" rel=\"nofollow noreferrer\">reserved keywords</a> that cannot be created in the file system, since these were originally used to write streams of data to other hardware like printers. Microsoft states that you cannot name a folder nor a file (regardless of extension) with the following reserved keywords: <code>CON, PRN, AUX, NUL, COM0, COM1, COM2, COM3, COM4, COM5, COM6, COM7, COM8, COM9, LPT0, LPT1, LPT2, LPT3, LPT4, LPT5, LPT6, LPT7, LPT8, LPT9</code>. If you try to create one of these in Windows explorer you should receive the error message &quot;the specified device name is invalid&quot;.</p>\n<p>However, using Windows Explorer (Windows 11) I was actually able to create all of them as <em><strong>files</strong></em> as long as they had an extension, and I could create some of the <em><strong>folders</strong></em> named <code>COM0</code>-<code>COM9</code>.</p>\n<p>I wanted to know if there were any safeguards to help avoid accidentally creating these folders in Java, and first checked if the <code>java.io.File</code> or <code>java.nio.file.Path</code> classes would throw exceptions like <code>InvalidPathException</code> when trying to store any of these reserved keywords. No exceptions were thrown.</p>\n<p>So then I was curious to see if I could use <code>File.mkdir</code> (and <code>Files.createDirectories</code>) to create any of these invalid files, and I <strong>could</strong>. In fact they <strong>all</strong> returned <code>true</code> for success, and I can view them all in Windows Explorer fine, except for <code>NUL</code> which seems to be the only case that wasn't created.</p>\n<p>My question is, are there any risks on modern Windows when creating one of these 'illegal&quot; names? Why doesn't Microsoft's own documentation match my results, is it a recent update in Windows 11? What kinds of bugs might happen or go unnoticed if I don't add my own safeguards? Are Unix/macOS plagued with any of these reserved keywords?</p>\n<p>Here is a passing unit test:</p>\n<pre><code>@Test\npublic void test() throws IOException {\n    Path dirTest = Paths.get(&quot;C:\\\\Testing&quot;);\n    File fNul = dirTest.resolve(&quot;NUL&quot;).toFile();\n    assertTrue(fNul.mkdir());\n    assertFalse(fNul.exists()); //The only one impossible to create\n\n    String[] vKeywords = {&quot;CON&quot;, &quot;PRN&quot;, &quot;AUX&quot; };\n    for (String s : vKeywords) {\n        File f = dirTest.resolve(s).toFile();\n        assertTrue(f.mkdir());\n        assertTrue(f.exists() || s.equals(&quot;NUL&quot;));\n    }\n    String[] vPrefixes = {&quot;COM&quot;, &quot;LPT&quot; };\n    for (String s : vPrefixes) {\n        for (int i = 0; i &lt; 10; i++) { // 0-9 suffix\n            File f = dirTest.resolve(s + i).toFile();\n            assertTrue(f.mkdir());\n            assertTrue(f.exists());\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","android","kotlin","accessibility"],"comments":[{"owner":{"user_id":76714,"display_name":"slugolicious"},"edited":false,"comment_id":133735921,"body":"Isn&#39;t that a <b>user</b> option?  So you want to force a setting on the user?"},{"owner":{"user_id":5595926,"display_name":"Arda Kazancƒ±"},"edited":false,"comment_id":133736308,"body":"Yes. I want to open the link in reader mode in chrome."}],"owner":{"user_id":5595926,"display_name":"Arda Kazancƒ±"},"view_count":52,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679497514,"question_id":75813991,"body":"<p>I need to enable &quot;Simplified View for Web Pages&quot; setting in Accessibility settings. Is there any way I can do this?</p>\n<p><a href=\"https://i.stack.imgur.com/zV4wJ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/zV4wJ.png\" alt=\"Simplified View for Web Pages\" /></a></p>\n"},{"tags":["java","bash","maven"],"comments":[{"owner":{"user_id":89817,"display_name":"Gordon Davisson"},"edited":false,"comment_id":133724884,"body":"By default, shell scripts don&#39;t exit on errors. You can make them do that with <code>set -e</code>, but its idea of what&#39;s an exit-worthy error often doesn&#39;t match up with a reasonable person&#39;s (see [BashFAQ #105: &quot;Why doesn&#39;t <code>set -e</code> (or <code>set -o errexit</code>, or <code>trap ERR</code>) do what I expected?&quot;), so it&#39;s not very reliable. Personally, I just add error checking to important steps in the script, which can be as simple as <code>importantCommand || exit</code>."},{"owner":{"user_id":1934428,"display_name":"user1934428"},"edited":false,"comment_id":133725525,"body":"@otter : In the posted script, the only command in question is <code>$RUN_CMD[@]</code>. Are you refering to <b>this</b> command to fail?"},{"owner":{"user_id":1993366,"display_name":"vikingsteve"},"edited":false,"comment_id":133726590,"body":"When you execute a script, its the script itself that is responsible for proper error handling and process cleanup. Once you write a fully self contained script, you wont have any more problems with build"},{"owner":{"user_id":21380727,"display_name":"otter"},"edited":false,"comment_id":133730938,"body":"@user1934428 I am expecting if any of the components&#39; build processes fail, it will not execute $RUN_CMD[@]"},{"owner":{"user_id":620097,"display_name":"shellter"},"edited":false,"comment_id":133731466,"body":"My impression is that you&#39;re asking us to debug a third party&#39;s build/install script. But that is not the spirit of StackOverflow. Please read about <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and look at their code. Can you boil the problem down to something readers can test without having goto an external site and run that build process? For debugging help, maybe read <a href=\"https://stackoverflow.com/tags/bash/info\">stackoverflow.com/tags/bash/info</a> , skipping the version information at the top, and searching for &quot;Before asking about problematic code&quot; and &quot;How to turn bad code into a good question&quot;. (Or file a bug report with the project?) Good Luck"},{"owner":{"user_id":1934428,"display_name":"user1934428"},"edited":false,"comment_id":133731845,"body":"You don&#39;t show in your script, how you build your comments, so I can&#39;t say how you can determine their failure."},{"owner":{"user_id":21380727,"display_name":"otter"},"edited":false,"comment_id":133732311,"body":"@shellter  Thanks for your reply and guidance, I am new here and will read through the information you provided."},{"owner":{"user_id":620097,"display_name":"shellter"},"edited":false,"comment_id":133733095,"body":"AND you are relying on OpenRefine AFTER you are attempting to build some other X project. (as user193... has pointed out). Please edit your question to put a name to &quot;project X&quot; and include a github URL for it. (Not how we like to do things, but I have a little time today, maybe I can look at this). Good luck."},{"owner":{"user_id":167425,"display_name":"Tom Morris"},"edited":false,"comment_id":133735083,"body":"StackOverflow isn&#39;t intended as a place to get a bash tutorial. The two things needed are to 1) figure out how to get the Java compilation error to propagate to the Maven exit (if it isn&#39;t already) and 2) how to check the Maven exit code and modify the execution flow. As an intern applying to the OpenRefine project, you shouldn&#39;t be relying on StackOverflow to do this for you."},{"owner":{"user_id":21380727,"display_name":"otter"},"edited":false,"comment_id":133735148,"body":"@GordonDavisson I solved this problem by using importantCommand || exit. The only thing I found out is to know when and where the compile fail and add on &quot;|| exit&quot;. Thanks so much for saving my day!"},{"owner":{"user_id":21380727,"display_name":"otter"},"edited":false,"comment_id":133735165,"body":"@shellter Thanks for your kindness. I appreciate your words and your trying to help."},{"owner":{"user_id":620097,"display_name":"shellter"},"edited":false,"comment_id":133735724,"body":"@otter : Glad you found a solution to your problem. <code>|| exit</code> is certainly effective. Dig into why <code>ImportantCommand</code> is failing and you&#39;ll be on your way. I was thinking of a comment about how much you can learn from just a simple example like <code>set -vx ; true ; false ; true &amp;&amp; true ; false &amp;&amp; true ; false || true ; true || true ; true || false ; set +vx</code>. Best to take each section between <code>;</code> chars and copy/paste to a command line and inspect what is happening for each segment. You could append <code>; echo $?</code> to each segment .  ..."},{"owner":{"user_id":620097,"display_name":"shellter"},"edited":false,"comment_id":133735727,"body":"(Commands return 0 for true/success and non-zero numbers when there are prroblems. ). Good luck!"},{"owner":{"user_id":21380727,"display_name":"otter"},"edited":false,"comment_id":133736577,"body":"@shellter Thank you! I saved your suggestion and will definitely try these out. All the best :)."}],"owner":{"user_id":21380727,"display_name":"otter"},"view_count":72,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679453176,"question_id":75808055,"body":"<p>The refine script on Linux does not do a good job at stopping if it needs to compile OpenRefine and compilation errors occur.</p>\n<p>To Reproduce</p>\n<p>Steps to reproduce the behavior (from a git clone of the repository):</p>\n<p>First, clean with ./refine clean\nThen, introduce some compilation error somewhere, such as by doing rm ./extensions/wikibase/src/org/openrefine/wikibase/qa/QAWarning.java\nFinally, run ./refine\nCurrent Results</p>\n<p>The compilation fails in the Wikibase extension but the refine script still attempts to start OpenRefine:</p>\n<pre><code>...\n[ERROR] extensions/wikibase/src/org/openrefine/wikibase/qa/scrutinizers/NewEntityScrutinizer.java:[104,17] cannot find symbol\n[ERROR]   symbol:   class QAWarning\n[ERROR]   location: class org.openrefine.wikibase.qa.scrutinizers.NewEntityScrutinizer\n[ERROR] extensions/wikibase/src/org/openrefine/wikibase/qa/scrutinizers/NewEntityScrutinizer.java:[104,39] cannot find symbol\n[ERROR]   symbol:   class QAWarning\n[ERROR]   location: class org.openrefine.wikibase.qa.scrutinizers.NewEntityScrutinizer\n[ERROR] -&gt; [Help 1]\n[ERROR] \n[ERROR] To see the full stack trace of the errors, re-run Maven with the -e switch.\n[ERROR] Re-run Maven using the -X switch to enable full debug logging.\n[ERROR] \n[ERROR] For more information about the errors and possible solutions, please read the following articles:\n[ERROR] [Help 1] http://cwiki.apache.org/confluence/display/MAVEN/MojoFailureException\n[ERROR] \n[ERROR] After correcting the problems, you can resume the build with the command\n[ERROR]   mvn &lt;args&gt; -rf :wikibase\n\n\n15:54:05.840 [            refine_server] Starting Server bound to '127.0.0.1:3333' (0ms)\n15:54:05.975 [            refine_server] refine.memory size: 1400M JVM Max heap: 1468006400 bytes (135ms)\n15:54:06.359 [            refine_server] Initializing context: '/' from '/home/user/OpenRefine/main/webapp' (384ms)\n15:54:06.948 [            refine_server] Starting autoreloading scanner...  (589ms)\n15:54:13.478 [                   refine] Starting OpenRefine 3.8-SNAPSHOT [acca2dd]... (6530ms)\n15:54:13.495 [                   refine] initializing FileProjectManager with dir (17ms)\n...\n</code></pre>\n<p>Expected Behavior</p>\n<p>The refine script should stop at the end of the failing Maven build.</p>\n<p><a href=\"https://github.com/OpenRefine/OpenRefine/issues/5698\" rel=\"nofollow noreferrer\">https://github.com/OpenRefine/OpenRefine/issues/5698</a></p>\n<p>I found out the control of running server is these lines:</p>\n<pre><code> RUN_CMD=(&quot;$JAVA&quot; -cp &quot;$CLASSPATH&quot; &quot;${OPTS[@]}&quot; &quot;com.google.refine.Refine&quot;)\n\n    echo &quot;&quot;\n    \n    \n\n    if [ -z &quot;$FORK&quot; ] ; then\n        exec &quot;${RUN_CMD[@]}&quot;\n    else\n        &quot;${RUN_CMD[@]}&quot; &amp;\n        REFINE_PID=&quot;$!&quot;\n    fi\n</code></pre>\n<p>But I don't how to catch the wikibase error and then stop this run_cmd.</p>\n"},{"tags":["java"],"owner":{"user_id":731548,"display_name":"cquezel"},"view_count":90,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679421053,"question_id":75804762,"body":"<p>I have this exception while unserializing an object:</p>\n<p>java.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.</p>\n<p>At serialization, the a.b.c.BaseClass.aField does contain a List that was created like this</p>\n<pre><code>return List.copyOf(originalList);\n</code></pre>\n<p>I have a ‚Äúsimple‚Äù workaround to fix the problem by changing the previous line to:</p>\n<pre><code>return originalList.\n</code></pre>\n<p>Note that the list may be shared by multiple instances of a.b.c.BaseClass.\nStack:</p>\n<pre><code>Caused by: java.lang.ClassCastException: cannot assign instance of java.util.CollSer to field a.b.c.BaseClass.aField of type java.util.List in instance of a.b.c.SubClass.\n    at java.base/java.io.ObjectStreamClass$FieldReflector.setObjFieldValues(ObjectStreamClass.java:2227)\n    at java.base/java.io.ObjectStreamClass$FieldReflector.checkObjectFieldValueTypes(ObjectStreamClass.java:2191)\n    at java.base/java.io.ObjectStreamClass.checkObjFieldValueTypes(ObjectStreamClass.java:1478)\n    at java.base/java.io.ObjectInputStream$FieldValues.defaultCheckFieldValues(ObjectInputStream.java:2657)\n    at java.base/java.io.ObjectInputStream.readSerialData(ObjectInputStream.java:2471)\n    at java.base/java.io.ObjectInputStream.readOrdinaryObject(ObjectInputStream.java:2242)\n    at java.base/java.io.ObjectInputStream.readObject0(ObjectInputStream.java:1742)\n    at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:514)\n    at java.base/java.io.ObjectInputStream.readObject(ObjectInputStream.java:472)\n    ‚Ä¶ \n</code></pre>\n<p>If I break and debug at the exception point:</p>\n<pre><code>   private void setObjFieldValues(Object obj, Object[] vals, boolean dryRun) {\n        if (obj == null) {\n            throw new NullPointerException();\n        }\n        for (int i = numPrimFields; i &lt; fields.length; i++) {\n            long key = writeKeys[i];\n            if (key == Unsafe.INVALID_FIELD_OFFSET) {\n                continue;           // discard value\n            }\n            switch (typeCodes[i]) {\n                case 'L', '[' -&gt; {\n                    Object val = vals[offsets[i]];\n                    if (val != null &amp;&amp;\n                        !types[i - numPrimFields].isInstance(val))\n                    {\n                        Field f = fields[i].getField();\n                        throw new ClassCastException(\n                            &quot;cannot assign instance of &quot; +\n                            val.getClass().getName() + &quot; to field &quot; +\n                            f.getDeclaringClass().getName() + &quot;.&quot; +\n                            f.getName() + &quot; of type &quot; +\n                            f.getType().getName() + &quot; in instance of &quot; +\n                            obj.getClass().getName());\n                    }\n                    if (!dryRun)\n                        unsafe.putReference(obj, key, val);\n                }\n                default -&gt; throw new InternalError();\n            }\n        }\n    }\n</code></pre>\n<p>In my scenario,</p>\n<ul>\n<li>obj is an instance of a.b.c.SubClass</li>\n<li>vals has 26 elements of    which index 17 is a CollSer</li>\n<li>dryRun is true</li>\n<li>The ‚Äúi‚Äù value is 20.</li>\n<li>typecode[i] is ‚ÄòL‚Äô</li>\n<li>numPrimFields is 3</li>\n<li>offset[i] is 17</li>\n<li>types[i - numPrimFields] is java.util.List</li>\n<li>val is a CollSer    (array null, tag 1 (IMM_LIST))</li>\n</ul>\n<p>The line:</p>\n<pre><code>!types[i - numPrimFields].isInstance(val)\n</code></pre>\n<p>Fails because java.util.List is not an instance of java.util.CollSer\nI think (not sure) CollSer should probably have already been replaced by a List by CollSer‚Äôs readResolve.</p>\n<p>Am I doing something wrong?</p>\n<p>Unfortunately, this is a huge object being serialized (215 classes, 900MB on disk, error stack trace is 4200 lines) so I can‚Äôt easily reproduce the error using a simple test.\nMy env:</p>\n<ul>\n<li>openjdk version &quot;17&quot; 2021-09-14</li>\n<li>OpenJDK Runtime Environment (build 17+35-2724)</li>\n<li>OpenJDK 64-Bit Server VM (build 17+35-2724, mixed mode, sharing)</li>\n</ul>\n<p>(tested with version &quot;20&quot; also)</p>\n<p>This question is probably a duplicate of <a href=\"https://stackoverflow.com/q/65613929/731548\">Map in ActiveMQ ObjectMessage throws ClassCastException: cannot assign instance of java.util.CollSer?</a>\nthat has been flagged as answered without a real solution.</p>\n<p><a href=\"https://bugs.java.com/bugdatabase/view_bug?bug_id=8304814\" rel=\"nofollow noreferrer\">https://bugs.java.com/bugdatabase/view_bug?bug_id=8304814</a></p>\n<p>I think the problem is more specifically centered on the serialization of java.util.ImmutableCollections$List12.</p>\n"},{"tags":["java","json","gson","bukkit"],"comments":[{"owner":{"user_id":5354987,"display_name":"Samuel Marchant"},"edited":false,"comment_id":133717629,"body":"I go for @AllaArgsConstructor and the fact that rank class does not appear to have a variable for &quot;prefix&quot;:&quot;&quot;, apart no value."},{"owner":{"user_id":4288506,"display_name":"Marcono1234"},"edited":false,"comment_id":133721305,"body":"Is the JSON data possibly itself inside a JSON string, i.e. <code>&quot;[{\\&quot;id\\&quot;:\\&quot;default\\&quot;,\\&quot;displayName\\&quot;, ...</code>?"},{"owner":{"user_id":14430875,"display_name":"daysling"},"edited":false,"comment_id":133856598,"body":"Try marking Rank class Seralizable by adding @Seralizable annotation"}],"answers":[{"owner":{"user_id":12315154,"display_name":"Alex_Ts"},"up_vote_count":0,"is_accepted":false,"creation_date":1679418421,"answer_id":75804303,"body":"<p>Firstly the json strng you provided does not contain <code>inheritFromId</code> value which might be needed for deserializarion.</p>\n<p>The problem might also be caused by <code>color</code> field which is written to be an object of the type <code>ChatColor</code> while represented as a <code>String</code> in json.</p>\n"}],"owner":{"user_id":21448400,"display_name":"ma1de"},"view_count":40,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1679415164,"question_id":75803696,"body":"<p>I have tried to parse a JSON formatted text from my Web API into an ArrayList of Rank.class, but I have been getting a <a href=\"https://docs.oracle.com/javase/7/docs/api/java/lang/ClassCastException.html\" rel=\"nofollow noreferrer\">ClassCastException</a> error with message</p>\n<blockquote>\n<p>Cannot cast com.google.gson.JsonPrimitive to com.google.gson.JsonObject</p>\n</blockquote>\n<p>Here's some of my code:</p>\n<pre><code># RankHandler.refresh()\n\nthis.ranks = new Gson().fromJson(Juke.INSTANCE.getApiHandler().request(&quot;/ranks&quot;).getJsonResponse(), new TypeToken&lt;List&lt;Rank&gt;&gt;() {}.getType());\n</code></pre>\n<pre><code># Rank.class\n\n@Getter @AllArgsConstructor\npublic class Rank {\n    private String id, displayName, prefix, inheritFromId;\n    private ChatColor color;\n    private List&lt;String&gt; permissions;\n    private int weight;\n    private boolean staff;\n}\n</code></pre>\n<pre><code># Exception:\n\n[19:11:59 WARN]: java.lang.ClassCastException: Cannot cast com.google.gson.JsonPrimitive to com.google.gson.JsonObject\n[19:11:59 WARN]:        at java.lang.Class.cast(Unknown Source)\n[19:11:59 WARN]:        at com.google.gson.Gson.fromJson(Gson.java:690)\n[19:11:59 WARN]:        at me.ma1de.juke.shared.api.APIRequest.getJsonResponse(APIRequest.java:54)\n[19:11:59 WARN]:        at me.ma1de.juke.shared.api.APIHandler.request(APIHandler.java:27)\n[19:11:59 WARN]:        at me.ma1de.juke.shared.api.APIHandler.request(APIHandler.java:52)\n[19:11:59 WARN]:        at me.ma1de.juke.shared.rank.RankHandler.refresh(RankHandler.java:44)\n[19:11:59 WARN]:        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftTask.run(CraftTask.java:71)\n[19:11:59 WARN]:        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:53)\n[19:11:59 WARN]:        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n[19:11:59 WARN]:        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n[19:11:59 WARN]:        at java.lang.Thread.run(Unknown Source)\n[19:11:59 WARN]: Exception in thread &quot;Craft Scheduler Thread - 48&quot;\n[19:11:59 WARN]: org.apache.commons.lang.UnhandledException: Plugin juke-bukkit v1.0-SNAPSHOT generated an exception while executing task 2\n        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:56)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(Unknown Source)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(Unknown Source)\n        at java.lang.Thread.run(Unknown Source)\nCaused by: java.lang.NullPointerException\n        at me.ma1de.juke.shared.rank.RankHandler.refresh(RankHandler.java:44)\n        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftTask.run(CraftTask.java:71)\n        at org.bukkit.craftbukkit.v1_8_R3.scheduler.CraftAsyncTask.run(CraftAsyncTask.java:53)\n        ... 3 more\n</code></pre>\n<pre><code># What I am trying to parse as an array list of Rank.class\n\n[{&quot;id&quot;:&quot;default&quot;,&quot;displayName&quot;:&quot;Default&quot;,&quot;prefix&quot;:&quot;&quot;,&quot;color&quot;:&quot;WHITE&quot;,&quot;permissions&quot;:[],&quot;weight&quot;:0,&quot;staff&quot;:false}]\n</code></pre>\n<pre><code># Dependencies\n&lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.spigotmc&lt;/groupId&gt;\n            &lt;artifactId&gt;spigot-api&lt;/artifactId&gt;\n            &lt;version&gt;1.8.8-R0.1-SNAPSHOT&lt;/version&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;version&gt;1.18.26&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;me.ma1de.juke.shared&lt;/groupId&gt;\n            &lt;artifactId&gt;Shared&lt;/artifactId&gt;\n            &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.code.gson&lt;/groupId&gt;\n            &lt;artifactId&gt;gson&lt;/artifactId&gt;\n            &lt;version&gt;2.8.6&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.google.guava&lt;/groupId&gt;\n            &lt;artifactId&gt;guava&lt;/artifactId&gt;\n            &lt;version&gt;31.1-jre&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang3&lt;/artifactId&gt;\n            &lt;version&gt;3.12.0&lt;/version&gt;\n        &lt;/dependency&gt;\n\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.squareup.okhttp3&lt;/groupId&gt;\n            &lt;artifactId&gt;okhttp&lt;/artifactId&gt;\n            &lt;version&gt;4.10.0&lt;/version&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n</code></pre>\n<p>I have tried switching gson's version from <a href=\"https://github.com/google/gson/releases/tag/gson-parent-2.10.1\" rel=\"nofollow noreferrer\">2.10.1</a> to <a href=\"https://github.com/google/gson/releases/tag/gson-parent-2.8.6\" rel=\"nofollow noreferrer\">2.8.6</a>, thought that downgrading gson would not cause this error, but it happened again.</p>\n"},{"tags":["java","coding-style","editorconfig"],"comments":[{"owner":{"user_id":2668735,"display_name":"user2668735"},"edited":false,"comment_id":133828048,"body":"Sadly, Idea Intellij team told me they will not extract the java linter for now (which use .editoconfig) as it would be complicated (depend on a plugin management system), the request do not have enough vote."}],"answers":[{"owner":{"user_id":6685089,"display_name":"maharr"},"up_vote_count":0,"is_accepted":false,"creation_date":1680040989,"answer_id":75871437,"body":"<p>have you tried &quot;Adapter for Eclipse Code Formatter&quot;?\nYou can export warps</p>\n<p><a href=\"https://plugins.jetbrains.com/plugin/6546-adapter-for-eclipse-code-formatter\" rel=\"nofollow noreferrer\">https://plugins.jetbrains.com/plugin/6546-adapter-for-eclipse-code-formatter</a></p>\n<p>Than use export with formatter-maven-plugin\n<a href=\"https://code.revelc.net/formatter-maven-plugin/examples.html#custom-configuration-file\" rel=\"nofollow noreferrer\">https://code.revelc.net/formatter-maven-plugin/examples.html#custom-configuration-file</a></p>\n<p><a href=\"https://i.stack.imgur.com/juyxE.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/juyxE.png\" alt=\"enter image description here\" /></a></p>\n<p>Maybe &quot;Save Actions&quot; helps to achieve your goals earlier in the development process.</p>\n<p><a href=\"https://plugins.jetbrains.com/plugin/7642-save-actions\" rel=\"nofollow noreferrer\">https://plugins.jetbrains.com/plugin/7642-save-actions</a></p>\n"},{"owner":{"user_id":2774914,"display_name":"diziaq"},"up_vote_count":0,"is_accepted":false,"creation_date":1680590870,"answer_id":75926266,"body":"<p>Unfortunately, the <code>editorconfig-maven-plugin</code> doesn't support Java at the moment: for now the plugin has support to enforce coding style rules for other languages such as XML and YAML.</p>\n<p>There are different Maven plugins that support Java linting, like the <code>maven-checkstyle-plugin</code> or the <code>PMD plugin</code>.</p>\n<p>If you're looking for a tool to handle Java formatting based on <code>.editorConfig</code>, there are several options:</p>\n<ol>\n<li><p>Eclipse IDE along with the Eclipse Code Formatter plugin.</p>\n</li>\n<li><p>IntelliJ IDEA IDE with the <code>EditorConfig</code> plugin</p>\n</li>\n<li><p>separate command-line tools such as the <code>JHipster</code> code generator or the <code>Jalopy</code> code formatter. These tools can be easily integrated into Maven build process to automatically format Java code based on the <code>.editorConfig</code> rules.</p>\n</li>\n</ol>\n"}],"owner":{"user_id":2668735,"display_name":"user2668735"},"view_count":260,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1679402927,"question_id":75801441,"body":"<p>In a maven project (backend java + frontend angular) I would like to add a coding style and format code automatically (many file types), with a git pre-commit hook for example or/and at compile time.</p>\n<p>I found some code style related plugins:</p>\n<ul>\n<li><a href=\"https://code.revelc.net/formatter-maven-plugin/\" rel=\"nofollow noreferrer\">formatter-maven-plugin</a></li>\n<li><a href=\"https://maven.apache.org/plugins/maven-checkstyle-plugin/\" rel=\"nofollow noreferrer\">maven-checkstyle-plugin</a></li>\n<li><a href=\"https://ec4j.github.io/editorconfig-maven-plugin/\" rel=\"nofollow noreferrer\">editorconfig-maven-plugin</a></li>\n<li><a href=\"https://github.com/google/google-java-format\" rel=\"nofollow noreferrer\">google-java-format</a></li>\n</ul>\n<p>But each for each solution there is a problem (only java, without java linter, or opinionated). The <code>.editorConfig</code> seems the most complete configuration file, especially great for project which includes many different languages.</p>\n<p>Sadly, the only plugin dealing with .editorconfig, <code>editorconfig-maven-plugin</code>, does not handle java, the plugin only comes with a yaml and xml linter.</p>\n<p><strong>Question 1:</strong> can we configure a Java linter for <code>editorconfig-maven-plugin</code> ? Any idea of a base to fork to write one ?</p>\n<p><strong>Question 2:</strong> Is there other tools to handle a java formatting based on .editorConfig ?</p>\n<p>Any solution are welcome, even if not integrated with a maven plugin.</p>\n"},{"tags":["java","android","notifications","stack"],"owner":{"user_id":21446296,"display_name":"Charles"},"view_count":44,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679392485,"question_id":75799644,"body":"<p>I have an Android app in kiosk mode in which I would like to send notifications to the users if necessary.</p>\n<p>At first I was using the <code>Toast</code> but then I made a <code>FlashMessage</code> class (extending <code>Snackbar</code>) so that i could personalize (error/success/warning...). It might not be the best way but it works nice.</p>\n<p>The only thing is <code>Toast</code> and <code>Snackbar</code> are not stackable.  So if I call more than one <code>FlashMessage</code> in a row, the previous one is replaced by the new one and the message is lost.</p>\n<p>Is there a (easy) way to make it stackable (I didn't see a option in the doc) or maybe to use another class to make something similar?</p>\n<p>(I am using mostly java/kotlin)</p>\n<p>push notification are not working since the app is in kiosk mode.</p>\n<p><code>Toast</code> and <code>Snackbar</code> work nice but don't stack.</p>\n"},{"tags":["java","android","firebase"],"comments":[{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"edited":false,"comment_id":133706941,"body":"I&#39;m having a hard time understanding what the problem is. What exactly in this code doesn&#39;t work the way you expect? Tell us what is wrong with shared code. Do you have any errors?"},{"owner":{"user_id":5246885,"display_name":"Alex Mamo"},"edited":false,"comment_id":133706944,"body":"If you understand Kotlin, I think that this <a href=\"https://medium.com/firebase-developers/how-to-authenticate-to-firebase-using-google-one-tap-in-jetpack-compose-60b30e621d0d\" rel=\"nofollow noreferrer\">resource</a> will help. Here is the corresponding <a href=\"https://github.com/alexmamo/FirebaseSignInWithGoogle\" rel=\"nofollow noreferrer\">repo</a>."},{"owner":{"user_id":21442434,"display_name":"Edziu Kowalski"},"edited":false,"comment_id":133709386,"body":"Nah, the code works fine, but I&#39;m not sure how to handle the communication between the repository, ViewModel and activity. I want to login using an email and a password and if it successes -&gt; change activity to whatever, let&#39;s say, MainAppAcitivity, if it fails -&gt; display something on a screen (not a toast, please). Since firebase auth works on a background thread, the <code>FirebaseAuth.createUserWithEmailAndPassword</code> function returns a callback, so I cannot get results immediately like in the Login Activity that Android studio provides."},{"owner":{"user_id":21442434,"display_name":"Edziu Kowalski"},"edited":false,"comment_id":133709413,"body":"Summarising I don&#39;t know if my <code>LoginRepository.login</code> function should return <code>Task&lt;AuthResult&gt;</code> or something else. If <code>Task&lt;AuthResult&gt;</code>, should I get rid of <code>LoginViewModel</code>?"},{"owner":{"user_id":21442434,"display_name":"Edziu Kowalski"},"edited":false,"comment_id":133709420,"body":"I&#39;ve seen this article already."}],"owner":{"user_id":21442434,"display_name":"Edziu Kowalski"},"view_count":48,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679348357,"question_id":75795577,"body":"<p>Android Studio provides a Login Activity template. There's a lot of code, so I'll show you the Repository, DataSource and a view model:</p>\n<p>LoginDataSource:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.data;\n\nimport com.umk.packit.Login.data.model.LoggedInUser;\n\nimport java.io.IOException;\n\n/**\n * Class that handles authentication w/ login credentials and retrieves user information.\n */\npublic class LoginDataSource {\n    public Result&lt;LoggedInUser&gt; login(String email, String password) {\n        try {\n            // TODO: handle loggedInUser authentication\n            LoggedInUser fakeUser = new LoggedInUser(java.util.UUID.randomUUID().toString(), &quot;Jane Doe&quot;);\n            return new Result.Success&lt;&gt;(fakeUser);\n        } catch (Exception e) {\n            return new Result.Error(new IOException(&quot;Error logging in&quot;, e));\n        }\n    }\n\n    public void logout() {\n        // TODO: revoke authentication\n    }\n}\n</code></pre>\n<p>Result</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.data;\n\n/**\n * A generic class that holds a result success w/ data or an error exception.\n */\npublic class Result&lt;T&gt; {\n    // hide the private constructor to limit subclass types (Success, Error)\n    private Result() {\n    }\n\n    @Override\n    public String toString() {\n        if (this instanceof Result.Success) {\n            Result.Success success = (Result.Success) this;\n            return &quot;Success[data=&quot; + success.getData().toString() + &quot;]&quot;;\n        } else if (this instanceof Result.Error) {\n            Result.Error error = (Result.Error) this;\n            return &quot;Error[exception=&quot; + error.getError().toString() + &quot;]&quot;;\n        }\n        return &quot;&quot;;\n    }\n\n    // Success sub-class\n    public final static class Success&lt;T&gt; extends Result {\n        private T data;\n\n        public Success(T data) {\n            this.data = data;\n        }\n\n        public T getData() {\n            return this.data;\n        }\n    }\n\n    // Error sub-class\n    public final static class Error extends Result {\n        private Exception error;\n\n        public Error(Exception error) {\n            this.error = error;\n        }\n\n        public Exception getError() {\n            return this.error;\n        }\n    }\n}\n</code></pre>\n<p>LoginRepository:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.data;\n\nimport com.umk.packit.Login.data.model.LoggedInUser;\n\n/**\n * Class that requests authentication and user information from the remote data source and\n * maintains an in-memory cache of login status and user credentials information.\n */\npublic class LoginRepository {\n    // private constructor : singleton access\n    private LoginRepository(LoginDataSource dataSource) {\n        this.dataSource = dataSource;\n    }\n\n    public static LoginRepository getInstance(LoginDataSource dataSource) {\n        if (instance == null) {\n            instance = new LoginRepository(dataSource);\n        }\n        return instance;\n    }\n\n    public Result&lt;LoggedInUser&gt; login(String email, String password) {\n        // handle login\n        Result&lt;LoggedInUser&gt; result = dataSource.login(email, password);\n        if (result instanceof Result.Success) {\n            setLoggedInUser(((Result.Success&lt;LoggedInUser&gt;) result).getData());\n        }\n        return result;\n    }\n\n    public boolean isLoggedIn() {\n        return user != null;\n    }\n\n    public void logout() {\n        user = null;\n        dataSource.logout();\n    }\n\n    private void setLoggedInUser(LoggedInUser user) {\n        this.user = user;\n    }\n\n    private static volatile LoginRepository instance;\n\n    private final LoginDataSource dataSource;\n\n    private LoggedInUser user = null;\n}\n</code></pre>\n<p>LoginViewModel:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.ui.login;\n\nimport android.util.Patterns;\n\nimport androidx.lifecycle.LiveData;\nimport androidx.lifecycle.MutableLiveData;\nimport androidx.lifecycle.ViewModel;\n\nimport com.umk.packit.Login.data.LoginRepository;\nimport com.umk.packit.Login.data.Result;\nimport com.umk.packit.Login.data.model.LoggedInUser;\nimport com.umk.packit.R;\n\npublic class LoginViewModel extends ViewModel {\n    LoginViewModel(LoginRepository loginRepository) {\n        this.loginRepository = loginRepository;\n    }\n\n    public void login(String email, String password) {\n        // can be launched in a separate asynchronous job\n        Result&lt;LoggedInUser&gt; result = loginRepository.login(email, password);\n\n        if (result instanceof Result.Success) {\n            LoggedInUser data = ((Result.Success&lt;LoggedInUser&gt;) result).getData();\n            loginResult.setValue(new LoginResult(new LoggedInUserView(data.getDisplayName())));\n        } else {\n            loginResult.setValue(new LoginResult(R.string.login_failed));\n        }\n    }\n\n    public void loginDataChanged(String email, String password) {\n        if (!isEmailValid(email)) {\n            loginFormState.setValue(new LoginFormState(R.string.invalid_email, null));\n        } else if (!isPasswordValid(password)) {\n            loginFormState.setValue(new LoginFormState(null, R.string.invalid_password));\n        } else {\n            loginFormState.setValue(new LoginFormState(true));\n        }\n    }\n\n    // A placeholder email validation check\n    private boolean isEmailValid(String email) {\n        if (email == null) {\n            return false;\n        }\n        if (email.contains(&quot;@&quot;)) {\n            return Patterns.EMAIL_ADDRESS.matcher(email).matches();\n        } else {\n            return !email.trim().isEmpty();\n        }\n    }\n\n    // A placeholder password validation check\n    private boolean isPasswordValid(String password) {\n        return password != null &amp;&amp; password.trim().length() &gt; 5;\n    }\n\n    LiveData&lt;LoginFormState&gt; getLoginFormState() {\n        return loginFormState;\n    }\n\n    LiveData&lt;LoginResult&gt; getLoginResult() {\n        return loginResult;\n    }\n\n    private MutableLiveData&lt;LoginFormState&gt; loginFormState = new MutableLiveData&lt;&gt;();\n    private MutableLiveData&lt;LoginResult&gt; loginResult = new MutableLiveData&lt;&gt;();\n    private LoginRepository loginRepository;\n}\n</code></pre>\n<p>LoggedInUserView</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.ui.login;\n\npublic class LoggedInUserView {\n    LoggedInUserView(String displayName) {\n        this.displayName = displayName;\n    }\n\n    String getDisplayName() {\n        return displayName;\n    }\n\n    private final String displayName;\n    //... other data fields that may be accessible to the UI\n}\n</code></pre>\n<p>LoginResult</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.ui.login;\n\n//Authentication result : success (user details) or error message.\nclass LoginResult {\n    LoginResult(@Nullable Integer error) {\n        this.error = error;\n    }\n\n    LoginResult(@Nullable LoggedInUserView success) {\n        this.success = success;\n    }\n\n    @Nullable\n    LoggedInUserView getSuccess() {\n        return success;\n    }\n\n    @Nullable\n    Integer getError() {\n        return error;\n    }\n\n    @Nullable\n    private LoggedInUserView success;\n    @Nullable\n    private Integer error;\n}\n</code></pre>\n<p>LoginFormState:</p>\n<pre class=\"lang-java prettyprint-override\"><code>package com.umk.packit.Login.ui.login;\n\n\nclass LoginFormState {\n    LoginFormState(@Nullable Integer emailError, @Nullable Integer passwordError) {\n        this.emailError = emailError;\n        this.passwordError = passwordError;\n        this.isDataValid = false;\n    }\n\n    LoginFormState(boolean isDataValid) {\n        this.emailError = null;\n        this.passwordError = null;\n        this.isDataValid = isDataValid;\n    }\n\n    @Nullable\n    Integer getEmailError() {\n        return emailError;\n    }\n\n    @Nullable\n    Integer getPasswordError() {\n        return passwordError;\n    }\n\n    boolean isDataValid() {\n        return isDataValid;\n    }\n\n    @Nullable\n    private final Integer emailError;\n    @Nullable\n    private final Integer passwordError;\n    private final boolean isDataValid;\n}\n</code></pre>\n<p>I want to modify this code to fit firebase auth. I know that I need to get the instance of <code>FirebaseAuth</code> and there're methods like: <code>createUserWithEmailAndPassword(String, String)</code> and <code>signInWithEmailAndPassword(String, String)</code>.</p>\n<p>Since I want to use firebase I believe there's no need to have 'LoginDataSource<code>class,</code>Result<code>class,</code>LoggedInUser<code>class,</code>LoginFormState<code>class,</code>LoginResult<code>class,</code>LoggedInUserView` class (arguable).</p>\n<p>I'm not sure what's the best way to implement the login repository to work with a view model and an activity.</p>\n<p>The way that the template is implemented looks clear to me. Since the default implementation it's single threaded and firebase uses callbacks I'm not sure what <code>LoginRepository.login</code> function should return. Should it return a <code>Task&lt;AuthResult&gt;</code>?</p>\n<pre class=\"lang-java prettyprint-override\"><code>public Task&lt;AuthResult&gt; login(String email, String password) {\n        return firebaseAuth.createUserWithEmailAndPassword(email, password);\n    }\n</code></pre>\n<p>But now that's the point of having <code>LoginViewModel</code>? Unless it'll do some UI things, but if not, <code>LoginViewModel.login</code> would just be this:</p>\n<pre class=\"lang-java prettyprint-override\"><code>Task&lt;AuthResult&gt; login(String email, String password) {\n   return loginRepo.login(email, password);\n}\n</code></pre>\n<p>The reason I'd like to have some kind of result like <code>Task&lt;AuthResult&gt;</code> type be combatible with the activity is to be able to know if the authorization failed or successed to manage widgets.</p>\n<p>What should I do? Return <code>Task&lt;AuthResult&gt;</code> from <code>LoginRepository.login</code> and get rid of <code>LoginViewModel</code>? Return <code>Task&lt;AuthResult&gt; from </code>LoginRepository.login<code>and keep the</code>LoginViewModel`? How should I handle it?</p>\n"},{"tags":["java","flutter","gradle"],"owner":{"user_id":20716494,"display_name":"Mohammed Ayesh"},"view_count":216,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679271490,"question_id":75785739,"body":"<p>i have this error in build.gadle file in flutter project</p>\n<p>The supplied phased action failed with an exception.\nA problem occurred configuring root project 'android'.\nA problem occurred evaluating root project 'android'.\nA problem occurred configuring project ':app'.\norg.gradle.api.internal.tasks.DefaultTaskContainer$TaskCreationException: Could not create task ':app:packLibsflutterBuildDebug'.\nCould not create task ':app:packLibsflutterBuildDebug'.\nNo signature of method: org.gradle.api.tasks.bundling.Jar.destinationDir() is applicable for argument types: (File) values: [D:\\flutterProjects\\project\\build\\app\\intermediates\\flutter\\debug]\nCould not find method destinationDir() for arguments [D:\\flutterProjects\\project\\build\\app\\intermediates\\flutter\\debug] on task ':app:packLibsflutterBuildDebug' of type org.gradle.api.tasks.bundling.Jar.</p>\n<p>the red line i shown under the 'buildscript'</p>\n<pre><code>buildscript {\n    ext.kotlin_version = '1.7.10'\n    repositories {\n        google()\n        mavenCentral()\n    }\n\n    dependencies {\n        classpath 'com.android.tools.build:gradle:7.2.0'\n        classpath &quot;org.jetbrains.kotlin:kotlin-gradle-plugin:$kotlin_version&quot;\n    }\n}\n\nallprojects {\n    repositories {\n        google()\n        mavenCentral()\n    }\n}\n\nrootProject.buildDir = '../build'\nsubprojects {\n    project.buildDir = &quot;${rootProject.buildDir}/${project.name}&quot;\n}\nsubprojects {\n    project.evaluationDependsOn(':app')\n}\n\ntask clean(type: Delete) {\n    delete rootProject.buildDir\n}\n</code></pre>\n<p>i tried to delete android folder</p>\n"},{"tags":["java","raspberry-pi","raspberry-pi3","gpio","pi4j"],"comments":[{"owner":{"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"edited":false,"comment_id":133681373,"body":"Why don&#39;t you use the code from the <a href=\"https://pi4j.com/examples/components/ledstrip/\" rel=\"nofollow noreferrer\">LED Strip example</a>?"},{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"edited":false,"comment_id":133681594,"body":"@ThomasKl&#228;ger Thanks, I thought I could not find any examples for the LED-chains in this library. I had loosed too many time to launch only the simple example. If I right understood, MOSI-pin is faster than another GPIO-pins. Is it true?"},{"owner":{"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"edited":false,"comment_id":133682830,"body":"The MOSI pin is faster because the SPI module generates the timing - with more precision and less CPU overhead than any software based solution can achieve."},{"owner":{"user_id":2511795,"display_name":"0andriy"},"edited":false,"comment_id":133695252,"body":"@ThomasKl&#228;ger, the SPI can only gives you up to 32-bit packet, while GPIO can (theoretically) give you any length of the bit series. If it&#39;s not a problem for the HW in question, then I agree the SPI is the best choice here and looking at <a href=\"https://www.elektormagazine.com/news/spi-to-ws2812b-converter-more-leds-more-power\" rel=\"nofollow noreferrer\">elektormagazine.com/news/&hellip;</a> it seems the case."},{"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"edited":false,"comment_id":133937348,"body":"@ThomasKl&#228;ger, this example doesnot work properly with my LED. I think this example have another parameters for communication: frequency, signal duration and so on. My LED-strip looks like: <a href=\"https://www.youtube.com/watch?v=FeFuEqwTlGk\" rel=\"nofollow noreferrer\">youtube.com/watch?v=FeFuEqwTlGk</a>"}],"answers":[{"owner":{"user_id":5646962,"display_name":"Thomas Kl&#228;ger"},"up_vote_count":0,"is_accepted":false,"creation_date":1679337858,"answer_id":75794152,"body":"<p>The pi4j library has different code examples. One of them (<a href=\"https://pi4j.com/examples/components/ledstrip/\" rel=\"nofollow noreferrer\">LED Strip example</a>) seems like the perfect match for your problem.</p>\n<p>Generating the required timing for the WS2812 chips with switching a GPIO pin to high / low at the required rate is difficult even when working in C and probably almost impossible when working in Java.</p>\n<p>The example from pi4j uses the SPI interface to accurately generate the required timing. (Note that the approach taken is different from the one in the elektormagazine that you linked in a comment.)</p>\n<p>The bit timing for the SPI is set to a basic rate of around 156ns per bit and the data for the WS28xx is produced as follows:</p>\n<ul>\n<li>a 0 bit for the WS2812 (350ns high followed by 900ns low) is written as 0b1100_0000 (2 bits high -&gt; 312ns, 6 bits low -&gt; 936ns)</li>\n<li>a 1 bit for the WS2812 (900ns high followed by 350ns low) is written as 0xb1111_1000 (5 bits high -&gt; 780ns, 3 bits low -&gt; 468ns low)</li>\n</ul>\n<p>The timing this produces is well within the specified limits of the WS28xx chips.</p>\n<p>The example takes the RGB codes for all configured chips and creates a byte array where each byte corresponds to one output bit. These bytes are then sent out through the MOSI pin, thereby creating the required waveform.</p>\n<p>Note that the driver sends these bytes back-to-back by using the integrated FIFO of the SPI (it keeps that FIFO full for as long as there is some data available for sending).</p>\n<hr />\n<p>You are correct in noticing that using a GPIO directly and using the CPU to create the required waveform would allow you to basically send an unlimited length bit stream.</p>\n<p>However doing so can prove tricky if you want to</p>\n<ul>\n<li>produce the data on the fly (using loops and if/else)</li>\n<li>produce an accurate waveform without to much jitter</li>\n</ul>\n<p>And if your CPU / runtime is to slow then you simply cannot use that approach at all.</p>\n"}],"owner":{"user_id":21116910,"display_name":"Alexander Gorodilov"},"view_count":75,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1679232072,"question_id":75782278,"body":"<p>I create for a firma a java game using LibGDX. It will run on a Raspberry Pi 3. It is a clone of a famous arcade cabinet.\nThe game is ready. The joystick control using a port of the evdev library works well.\nThe application will use Pi4j library for interaction with external devices like a coin acceptor, a serial LED-chain based on a chip WS2812 and a 7-segments LED display.\nBut the control of the serial LED-chain has troubles. The LED-chain needs to have a high frequency serial impulses. The control impulses must be between 500 and 1500 nanoseconds long to transfer the data.\nI have launched a simple test for pin GPIO26 to know the typical frequency of the GPIO-outputs:</p>\n<pre><code>long end;\nlong start = System.nanoTime();\nfor (int i =0; i++; i&lt;10000){\n     ledPin.high();\n     ledPin.low();\n}\nend = System.nanoTime();\ndouble statementChangingTime = (double)(end - start)/(10000*2);\n</code></pre>\n<p>I have got that the time between the statement changings is between 3500 - 9000 nanoseconds. It is too long.</p>\n<p>I want to know, is it possible to increase the frequency (make the statementChangingTime smaller) using Pi4J? Maybe I need to select an another pin? Maybe I need change something in the raspi-config? Maybe I can use an another library? I don't know C/C++ and can not write myself a low-level code and a Java-wrapper for it.</p>\n"},{"tags":["java","spring","spring-boot","jpa"],"comments":[{"owner":{"user_id":1786065,"display_name":"Rogue"},"edited":false,"comment_id":133675842,"body":"Stepping back a moment: when you have this type of many-to-many relationship, sometimes the best thing to do is to create a junction relationship between the two (DB terms). In other words, rather than each <code>User</code> having a list of other <code>User</code>s involved in ducking each other [sic.], you can instead have a list of &quot;duckings&quot; that happened (e.g. a <code>List&lt;Pair&lt;User, User&gt;&gt;</code>, where the first user &quot;ducked&quot; the second). This provides a decoupling of the User from the action you are trying to track here, and they can be loaded or queried separately."},{"owner":{"user_id":21428561,"display_name":"Lucas Tomic"},"edited":false,"comment_id":133678279,"body":"That&#39;s a good idea. I&#39;ll implement it nad upload the code. Thank you"},{"owner":{"user_id":496099,"display_name":"Chris"},"edited":false,"comment_id":133694000,"body":"See @JsonIdentityInfo which is closer to what you want- it will trim repeats in a graph so that only the ID is included. See <a href=\"https://www.baeldung.com/jackson-bidirectional-relationships-and-infinite-recursion\" rel=\"nofollow noreferrer\">baeldung.com/&hellip;</a>"}],"answers":[{"owner":{"user_id":21428561,"display_name":"Lucas Tomic"},"up_vote_count":0,"is_accepted":true,"creation_date":1679222284,"answer_id":75781398,"body":"<p>As @Rogue has explained in the comments, the better solution was decoupling the User entity and the Ducks relations. This is how the code has ended:</p>\n<p>User entity</p>\n<pre><code>@Entity\npublic class User{\n\n    @OneToMany(mappedBy = &quot;sender&quot;)\n    private Set&lt;Duck&gt; ducksSent;\n\n    @OneToMany(mappedBy = &quot;receiver&quot;)\n    private Set&lt;Duck&gt; ducksReceived;\n\n    //Constructor, getters and setters....\n}\n</code></pre>\n<p>Duck entity</p>\n<pre><code>@Entity\npublic class Duck {\n   \n    @EmbeddedId\n    private DuckId id;\n    \n    @ManyToOne\n    @MapsId(&quot;senderId&quot;)\n    private User sender;\n    \n    @ManyToOne\n    @MapsId(&quot;receiverId&quot;)\n    private User receiver;\n\n\n    public Duck(User sender, User receiver) {\n        this.sender = sender;\n        this.receiver = receiver;\n        this.id = new DuckId(sender.getId(),receiver.getId());\n    }\n\n    //getters and setters....\n}\n</code></pre>\n"}],"owner":{"user_id":21428561,"display_name":"Lucas Tomic"},"view_count":81,"up_vote_count":2,"accepted_answer_id":75781398,"answer_count":1,"score":2,"creation_date":1679172164,"question_id":75778558,"body":"<p>I'm in a Spring project where I find myself with a circular reference problem that's a bit different from the ones already posted here (at least the ones I managed to find).</p>\n<h2>Class structure</h2>\n<p>The application has a user class/entity. This entity can send &quot;ducks&quot; to other users. It has an aggregation relationship (a list) with the users who have been sent a &quot;duck&quot;, and another list with the users who have sent you one. (It is an M-N cardinality relationship)</p>\n<pre><code>@Entity\npublic class User{\n    @ManyToMany\n    @JsonManagedReference\n    @JoinTable(\n        name = &quot;sendsDuck&quot;,\n        joinColumns = @JoinColumn(name = &quot;sender&quot;),\n        inverseJoinColumns = @JoinColumn(name = &quot;receiver&quot;)\n    )\n    private Set&lt;User&gt; duckedUsers;\n\n    @ManyToMany(mappedBy = &quot;duckedUsers&quot;)\n    @JsonBackReference\n    private set &lt;User&gt; receivesDuckFrom;\n    \n    //Getters and setters\n    ...\n\n}\n</code></pre>\n<p>As you can see I have added the <code>@JsonManagedReference</code> and <code>@JsonBackReference</code> tags to precisely avoid self-reference or cyclic reference.</p>\n<h2>Problem</h2>\n<p>The problem is, when one user sends a &quot;duck&quot; to another, the tags I mentioned above fixed the circular referencing problem. However, when two users send sensitive ducks to each other (A sends to B and B sends to A) I have a circular reference that I don't know how to handle.</p>\n<p>This is because both objects have the other within the same <code>duckedUsers</code> property.</p>\n<h2>What have I tried so far?</h2>\n<p>This is a list of the attempts I have made so far but haven't worked:</p>\n<ul>\n<li>@JsonIgnore</li>\n</ul>\n<p>This annotation works fine if I put it on the <code>duckedUsers</code> property. However, the API client needs to know the data of the users to whom it sent a duck, so this solution is not sufficient for my case.</p>\n<ul>\n<li>@JsonManagedReference and @JsonBackReference on the same property</li>\n</ul>\n<p>Bit of a silly attempt, but try using both annotations on the same property, even though they didn't make much sense. Also without success.</p>\n<pre><code>    @ManyToMany\n    @JsonManagedReference\n    @JoinTable(\n            name = &quot;sendsDuck&quot;,\n            joinColumns = @JoinColumn(name = &quot;sender&quot;),\n            inverseJoinColumns = @JoinColumn(name = &quot;receiver&quot;)\n    )\n</code></pre>\n<ul>\n<li>Object Mapper</li>\n</ul>\n<p>Inside the controller, try using an objectMapper configured in the following ways:</p>\n<pre><code>ObjectMapper().configure(SerializationFeature.WRITE_SELF_REFERENCES_AS_NULL, true);\n</code></pre>\n<pre><code>ObjectMapper().configure(SerializationFeature.FAIL_ON_SELF_REFERENCES, false);\n</code></pre>\n<p>And using it like this:</p>\n<pre><code>    @PostMapping(&quot;/sendDuck&quot;)\n    ResponseEntity sendDuck(@RequestParam Long transmitterId, @RequestParam Long receiverId) {\n        User transmitter = this.findOrThrow(transmitterId);\n        User receiver = this.findOrThrow(receiverId);\n        transmitter.sendsDuck(receiver);\n        repository.save(transmitter);\n        repository.save(receiver);\n        List&lt;User&gt; usersList = List.of(receiver, transmitter);\n        CollectionModel&lt;EntityModel&lt;User&gt;&gt; body = this.collectionModelFromList(usersList);\n        try{\n            String serializedBody = objectMapper.writeValueAsString(body);\n            return ResponseEntity.ok().body(body);\n        }catch (IOException ex){\n            String errorMessage = &quot;JSON serializing error: &quot; + ex.getMessage();\n            return ResponseEntity.internalServerError().body(errorMessage);\n        }\n    }\n</code></pre>\n<p>This attempt was also unsuccessful.</p>\n<h2>How do I think the solution should look like?</h2>\n<p>From what I've seen so far, I understand that what I'm looking to achieve would be a JSON response that works in a way that the <code>@JsonIgnore</code> is applied only if the entity is a child in the response. Something like that:</p>\n<pre><code>{\n   id:1,\n   ...\n   duckedUsers:[\n      {\n         id:1,\n         ... \n         duckedUsers:... //This must NOT appear as is a child entity\n      },\n   ]\n}\n</code></pre>\n"},{"tags":["java","intellij-idea","properties","arguments"],"comments":[{"owner":{"user_id":2960034,"display_name":"y.bedrov"},"edited":false,"comment_id":133690958,"body":"Mentioned VM options are passed to gradle process. To pass VM options to application you need to set them in build file. See this answer fro details: <a href=\"https://stackoverflow.com/a/31946708/2960034\">stackoverflow.com/a/31946708/2960034</a>"}],"owner":{"user_id":21241341,"display_name":"Lesia"},"view_count":72,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679090454,"question_id":75772558,"body":"<p>For my QA project I need to define VM options. Unfortunately any of options I put - produce &quot;null&quot;. I'm using mac.</p>\n<p>At Intellij IDEA project I configured &quot;VM options&quot; in &quot;Run/Debug configuration&quot; wizard (see picture).\n<a href=\"https://i.stack.imgur.com/8DKPM.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/8DKPM.png\" alt=\"enter image description here\" /></a>\nFor test purpose I decided to define property with name &quot;check&quot; to get printed value &quot;abc&quot; (that I indicate at &quot;VM options&quot; using <code>-D{property.name}={property.value}</code>). After the moment I executed method .test() that actually should print &quot;abc&quot; - I got &quot;null&quot; printed (see picture).\n<img src=\"https://i.stack.imgur.com/sGrIM.png\" alt=\"enter image description here\" /></p>\n<p>I tried to indicate <code>{property.value}</code> with quotation marks (&quot; as well as '), space after around = , unfortunately it doesn't helped.</p>\n"},{"tags":["java","gradle","mp3","mp3agic"],"answers":[{"owner":{"user_id":14564074,"display_name":"noob234"},"up_vote_count":0,"is_accepted":true,"creation_date":1679432307,"answer_id":75806274,"body":"<p>Fixed it:</p>\n<pre><code>implementation 'org:jaudiotagger:2.0.3'\n</code></pre>\n<pre><code>    public void upload(MultipartFile file){\n        // ....\n        String fileName = file.getOriginalFilename();\n        if (&quot;mp3&quot;.equals(extension)) {\n            try {\n                File tempFile = File.createTempFile(&quot;temp&quot;, &quot;.mp3&quot;);\n                file.transferTo(tempFile);\n                AudioFile audioFile = AudioFileIO.read(tempFile);\n                sampleRate = audioFile.getAudioHeader().getSampleRateAsNumber();\n                duration = audioFile.getAudioHeader().getTrackLength();\n            } catch (Exception e) {\n                throw new Mp3Exception(&quot;Couldn't get mp3 fields: &quot; + e.getMessage())\n            }\n        }\n        // ....\n    }\n</code></pre>\n"}],"owner":{"user_id":14564074,"display_name":"noob234"},"view_count":87,"up_vote_count":2,"accepted_answer_id":75806274,"answer_count":1,"score":2,"creation_date":1679081791,"question_id":75771568,"body":"<p>The code <strong>works completly fine</strong> but I get this exception:</p>\n<pre><code>Caused by: java.io.IOException: Cannot delete \nC:\\Users\\noob234\\AppData\\Local\\Temp\\tomcat.8080.5659248991534133251\\work\\Tomcat\\localhost\\ROOT\\upload_1723fa92_3db6_497a_9bdc_ac298b991fc8_00000000.tmp\n</code></pre>\n<p>I tried to somehow delete it or just add a sleep for one second, but unfortunatley I can't get rid of it.</p>\n<p>I am trying to get some fields from a multipart file. That multipart file is a mp3 file.\nHere is a snippet of the code:</p>\n<pre><code>public void upload (MultipartFile file){\n// ....\n\nString fileName = file.getOriginalFilename();\nif (&quot;mp3&quot;.equals(extension)) {\n            try {\n                Mp3File mp3file = new Mp3File(fileName);\n                sampleRate = mp3file.getSampleRate();\n            } catch (Exception e) {\n                throw new Mp3Exception(&quot;Couldn't get mp3 fields: &quot; + e.getMessage())\n            }\n    }\n\n// ....\n</code></pre>\n<p>Please keep in mind that I use in this project Java 8 and Gradle. Here is the dependency that I use:</p>\n<pre><code>    implementation 'com.mpatric:mp3agic:0.9.1'\n</code></pre>\n"},{"tags":["java","asynchttpclient"],"comments":[{"owner":{"user_id":1745544,"display_name":"OldProgrammer"},"edited":false,"comment_id":134178358,"body":"This is an HTTP client, not a REST client.  Try okhttp, which allows construction of an url instead or jax-rs"},{"owner":{"user_id":1745544,"display_name":"OldProgrammer"},"edited":false,"comment_id":134178383,"body":"or just <code>setUrl(v3_USER_DETAILS.replace(&quot;{userId}&quot;, userId))</code>"}],"owner":{"user_id":4110174,"display_name":"Bharat Bhagat"},"view_count":26,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679048791,"question_id":75766485,"body":"<p>I am using <a href=\"https://github.com/AsyncHttpClient/async-http-client\" rel=\"nofollow noreferrer\">AsyncHttpClient</a> for making HTTP calls. I am unable to find a solution to set a path parameter in a URL. Here is an example:</p>\n<pre><code>userId = &quot;dmsask121&quot;\nString v3_USER_DETAILS = &quot;http://example.com/users/{userId}/details&quot;;\nRequest request = new RequestBuilder(HttpConstants.Methods.GET)\n        .setUrl(v3_USER_DETAILS)\n        // some way to set userId in the URL??\n        .build();\nreturn execute(request)\n</code></pre>\n<p>Thanks in advance for your help.</p>\n"},{"tags":["java","hibernate","jpa","nativequery"],"comments":[{"owner":{"user_id":7218656,"display_name":"Arun Sudhakaran"},"edited":false,"comment_id":133655787,"body":"What about setting other 2 parameters?"}],"owner":{"user_id":10118195,"display_name":"Aurora"},"view_count":53,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679040053,"question_id":75765038,"body":"<p>I want to execute a simple native query, but it does not work:</p>\n<pre><code>Query query = entityManager.createNativeQuery(&quot;SELECT col1,col2,col3\nFROM table(schema.fn_name(?1,?2,?3))\nORDER BY col1,col2&quot;);\n\nquery.setParameter(1, 1193679);\nquery.setParameter(2, 1193679);\nquery.setParameter(3, 1193679);   \n\nresultList = query.getResultList();\n</code></pre>\n<p>It's failing with the below error</p>\n<blockquote>\n<p>&quot;message&quot;:&quot;Unknown data type: ; SQL statement\norg.springframework.orm.jpa.JpaSystemException: could not prepare statement; nested exception is org.hibernate.exception.GenericJDBCException: could not prepare statement</p>\n</blockquote>\n"},{"tags":["java","gradle","github-actions","netflix-dgs","javaexec-gradle-plugin"],"comments":[{"owner":{"user_id":7670262,"display_name":"Azeem"},"edited":false,"comment_id":133652165,"body":"Please include your relevant workflow in your question."},{"owner":{"user_id":10803013,"display_name":"andresmonc"},"edited":false,"comment_id":133659838,"body":"updated with action"}],"owner":{"user_id":10803013,"display_name":"andresmonc"},"view_count":87,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1679005993,"question_id":75762214,"body":"<p>I'm trying to run the main method of a class in my project as a Gradle task. The caveat is that this class has a dependency on a class that is generated by a different task(Netflix DGS generateJava)</p>\n<p>It is my assumption that this should be as simple as adding a <code>dependsOn</code>:</p>\n<pre><code>task printJsonSchema(type: JavaExec) {\n    dependsOn generateJava\n    group = &quot;Execution&quot;\n    description = &quot;Run schema printer task&quot;\n    classpath = sourceSets.main.runtimeClasspath\n    mainClass = 'com.company.xyz_api.utils.JsonSchemaGenerator'\n}\n</code></pre>\n<p>And this task works fine when I run it locally but refuses to work from within a GitHub Actions which fails during the compile step.</p>\n<p>Github Action Logs:\n(I tried to exclude all the junk but let me know if this isn't enough and I can try to get the full log attached)</p>\n<pre><code>Run ./gradlew printJsonSchema\n...\n&gt; Task :xyz-api:generateJava\n...\nBuild cache key for task ':xyz-api:generateJava' is eb70be25b6f69b5bd5dae98232698061\nTask ':xyz-api:generateJava' is not up-to-date because:\n  No history is available.\n...\nStored cache entry for task ':xyz-api:generateJava' with cache key eb70be25b6f69b5bd5dae98232698061\n...\n:xyz-api:generateJava (Thread[included builds,5,main]) completed. Took 7.043 secs.\n...\n:xyz-api:compileJava (Thread[included builds,5,main]) started.\n...\nBuild cache key for task ':xyz-api:compileJava' is 677850935e99c0573c6d0134967c67e2\nTask ':xyz-api:compileJava' is not up-to-date because:\n  No history is available.\nThe input changes require a full rebuild for incremental task ':xyz-api:compileJava'.\n...\n:xyz-api:compileJava (Thread[included builds,5,main]) completed. Took 55.844 secs.\nimport com.company.gen.xyzapi.types.DealInternal;\n                                        ^\n1 error\n13 warnings\n</code></pre>\n<p>One of the things I've tried is trying to include the build folder in the classpath for the task but that doesn't seem to be related to compileJava failing</p>\n<pre><code>classpath = sourceSets.main.runtimeClasspath + files(&quot;xyz-api/build/generated/sources/dgs-codegen/com/company/gen/types&quot;)\n</code></pre>\n<p>action:</p>\n<pre><code>name: Run Gradle Task\n\non: [push]\n\njobs:\n  gradle:\n    runs-on: ubuntu-latest\n    steps:\n      - name: Checkout code\n        uses: actions/checkout@v2\n      - name: Use JDK 17\n        uses: actions/setup-java@v3\n        with:\n          distribution: 'temurin'\n          java-version: 17\n      - name: Run Gradle Task\n        run: ./gradlew printJsonSchema\n      - name: Store Schema File as ENV VAR\n        id: generate_output_file\n        run: |\n          schema_json=$(cat xyz-api/schema.json)\n          echo &quot;$schema_json&quot;  &gt;&gt; $GITHUB_OUTPUT\n</code></pre>\n"},{"tags":["java","apache-kafka","kafka-consumer-api"],"comments":[{"owner":{"user_id":2308683,"display_name":"OneCricketeer"},"edited":false,"comment_id":133657989,"body":"It doesn&#39;t exclude the head. How do you know that k4 is actually in the topic? Did you dump the segment (not using Console consumer)? Please show your producer code"},{"owner":{"user_id":2308683,"display_name":"OneCricketeer"},"edited":false,"comment_id":133658056,"body":"Also, it&#39;s not recommended to create 10 segments per second. That&#39;ll likely cause high IO thrashing and wear out your disks"},{"owner":{"user_id":3442635,"display_name":"PurplePanda"},"edited":false,"comment_id":133659165,"body":"Thank you @OneCricketeer for your answer. I edited my post with the producer code. I wait 6 seconds between each producer to make sure that the log cleaner has been executed. When I say that k4 is actually in the topic, I can actually retrieve it by using the kafka-console-consumer.sh. I agree that 10 segments per second is a bad setting, but I was just trying to understand the log compaction and the segment logic in Kafka. I do not intend to use that setting outside my test."},{"owner":{"user_id":3442635,"display_name":"PurplePanda"},"edited":false,"comment_id":133710244,"body":"Can you explain what you mean by &quot;dump the segment&quot; ?"},{"owner":{"user_id":2308683,"display_name":"OneCricketeer"},"edited":false,"comment_id":133714009,"body":"<a href=\"https://stackoverflow.com/a/60175014/2308683\">stackoverflow.com/a/60175014/2308683</a>"},{"owner":{"user_id":3442635,"display_name":"PurplePanda"},"edited":false,"comment_id":133726614,"body":"Hello @OneCricketeer, I just edited my question with the dump segments. I think it confirms that k4 is actually in the topic."}],"owner":{"user_id":3442635,"display_name":"PurplePanda"},"view_count":101,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678981568,"question_id":75758505,"body":"<p>I'm currently working with Kafka, more specifically with the ability to use the log compaction feature, as stated here : <a href=\"https://kafka.apache.org/documentation/#compaction\" rel=\"nofollow noreferrer\">https://kafka.apache.org/documentation/#compaction</a>.</p>\n<p>I'm using the kafka-clients java library :</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.apache.kafka&lt;/groupId&gt;\n    &lt;artifactId&gt;kafka-clients&lt;/artifactId&gt;\n    &lt;version&gt;3.3.1&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>Then, I create a topic in compaction mode, using this property :</p>\n<pre><code>&quot;cleanup.policy&quot;=&quot;compact&quot;\n&quot;delete.retention.ms&quot;=&quot;100&quot;\n&quot;segment.ms&quot;=&quot;100&quot;\n&quot;min.cleanable.dirty.ratio&quot;=&quot;0.01&quot;\n</code></pre>\n<p>For test purpose, the broker has the property log.retention.check.interval.ms set to 1 second, in order to compact data every second.</p>\n<p>Then, I producer 3 distinct batch of messages, in that specific order :</p>\n<pre><code>#1\n&quot;k1&quot;:&quot;V1&quot;\n&quot;k3&quot;:&quot;V1&quot;\n&quot;k2&quot;:&quot;V1&quot;\n&quot;k1&quot;:&quot;V2&quot;\n#2 \n&quot;k2&quot;:&quot;V2&quot;\n&quot;k1&quot;:&quot;V3&quot;\n&quot;k1&quot;:&quot;V4&quot;\n#3\n&quot;k4&quot;:&quot;V1&quot;\n</code></pre>\n<p>I wait between each batch of messages at least 3 seconds (waiting for log cleaner). When I use the console consumer, I have this result :</p>\n<pre><code>&quot;k3&quot;:&quot;V1&quot;\n&quot;k2&quot;:&quot;V2&quot;\n&quot;k1&quot;:&quot;V4&quot;\n&quot;k4&quot;:&quot;V1&quot;\n</code></pre>\n<p>This is exactly what I expected. But, when I use the <code>KafkaConsumer</code> from the Java Library, I have this result :</p>\n<pre><code>&quot;k3&quot;:&quot;V1&quot;\n&quot;k2&quot;:&quot;V2&quot;\n&quot;k1&quot;:&quot;V4&quot;\n</code></pre>\n<p>k4 is missing. What I understand is that k4 has been push in a specific segment called the head, and only the tail has been compacted. The way Kafka works with his tail and head has been very well explained in this <a href=\"https://stackoverflow.com/a/61457387/3442635\">link</a>. It appears that in my case, the consumer never fully read the kafka topic : it exclude any data that is still in the &quot;dirty&quot; section (the head). So my question is simple : why the <code>KafkaConsumer</code> exclude the data in the head segment ? Am I missing a specific configuration in the properties of my consumer ?</p>\n<p>The Java Snippet just in case :</p>\n<pre class=\"lang-java prettyprint-override\"><code>@SneakyThrows\npublic static void main(String[] args) {\n    try (KafkaConsumer&lt;String, String&gt; consumer = new KafkaConsumer&lt;&gt;(getConsumerProperties());) {\n        consumer.subscribe(Collections.singletonList(TOPIC_NAME));\n\n        final ConsumerRecords&lt;String, String&gt; poll = consumer.poll(Duration.ofSeconds(1));\n        for (ConsumerRecord&lt;String, String&gt; consumerRecord : poll) {\n            log.info(&quot;Key : {} with value : {}&quot;, consumerRecord.key(), consumerRecord.value());\n        }\n    }\n\n}\n\nprivate static Properties getConsumerProperties() {\n    Properties result = new Properties();\n    result.put(CommonClientConfigs.BOOTSTRAP_SERVERS_CONFIG, BOOTSTRAP_SERVERS);\n    result.put(ConsumerConfig.GROUP_ID_CONFIG, UUID.randomUUID().toString());\n    result.put(ConsumerConfig.ENABLE_AUTO_COMMIT_CONFIG, &quot;false&quot;);\n    result.put(ConsumerConfig.AUTO_OFFSET_RESET_CONFIG, &quot;earliest&quot;);\n    result.put(ConsumerConfig.KEY_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n    result.put(ConsumerConfig.VALUE_DESERIALIZER_CLASS_CONFIG, StringDeserializer.class.getName());\n    return result;\n}\n</code></pre>\n<p>Here is the producer code :</p>\n<pre class=\"lang-java prettyprint-override\"><code>log.info(&quot;#####PRODUCING FIRST BATCH OF MESSAGES#####&quot;);\ntry (KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(getProducerProperties())) {\n    producer.send(new ProducerRecord&lt;&gt;(Constants.TOPIC_NAME, &quot;k1&quot;, &quot;V1&quot;));\n    producer.send(new ProducerRecord&lt;&gt;(Constants.TOPIC_NAME, &quot;k3&quot;, &quot;V1&quot;));\n    producer.send(new ProducerRecord&lt;&gt;(Constants.TOPIC_NAME, &quot;k2&quot;, &quot;V1&quot;));\n    producer.send(new ProducerRecord&lt;&gt;(Constants.TOPIC_NAME, &quot;k1&quot;, &quot;V2&quot;));\n    producer.flush();\n}\n\nThread.sleep(6000);\nlog.info(&quot;#####PRODUCING SECOND BATCH OF MESSAGES#####&quot;);\n\ntry (KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(getProducerProperties())) {\n    producer.send(new ProducerRecord&lt;&gt;(Constants.TOPIC_NAME, &quot;k2&quot;, &quot;V2&quot;));\n    producer.send(new ProducerRecord&lt;&gt;(Constants.TOPIC_NAME, &quot;k1&quot;, &quot;V3&quot;));\n    producer.send(new ProducerRecord&lt;&gt;(Constants.TOPIC_NAME, &quot;k1&quot;, &quot;V4&quot;));\n    producer.flush();\n}\n\nThread.sleep(6000);\nlog.info(&quot;#####PRODUCING LAST MESSAGE#####&quot;);\n\ntry (KafkaProducer&lt;String, String&gt; producer = new KafkaProducer&lt;&gt;(getProducerProperties())) {\n    producer.send(new ProducerRecord&lt;&gt;(Constants.TOPIC_NAME, &quot;k4&quot;, &quot;V1&quot;));\n    producer.flush();\n}\n</code></pre>\n<p>Edit 1 :\n@OneCricketeer advised me to dump the log segment to be sure that k4 is actually in the topic.</p>\n<pre><code>kafka-run-class.sh kafka.tools.DumpLogSegments --files 00000000000000000000.log,00000000000000000007.log\n\nDumping 00000000000000000000.log\nLog starting offset: 0\nbaseOffset: 0 lastOffset: 3 count: 1 baseSequence: 0 lastSequence: 3 producerId: 0 producerEpoch: 0 partitionLeaderEpoch: 0 isTransactional: false isControl: false deleteHorizonMs: OptionalLong.empty position: 0 CreateTime: 1679472971181 size: 72 magic: 2 compresscodec: none crc: 4285334185 isvalid: true\nbaseOffset: 4 lastOffset: 6 count: 2 baseSequence: 0 lastSequence: 2 producerId: 1 producerEpoch: 0 partitionLeaderEpoch: 0 isTransactional: false isControl: false deleteHorizonMs: OptionalLong.empty position: 72 CreateTime: 1679472977314 size: 83 magic: 2 compresscodec: none crc: 840210644 isvalid: true\nDumping 00000000000000000007.log\nLog starting offset: 7\nbaseOffset: 7 lastOffset: 7 count: 1 baseSequence: 0 lastSequence: 0 producerId: 2 producerEpoch: 0 partitionLeaderEpoch: 0 isTransactional: false isControl: false deleteHorizonMs: OptionalLong.empty position: 0 CreateTime: 1679472983359 size: 72 magic: 2 compresscodec: none crc: 1528509131 isvalid: true\n</code></pre>\n<p>We can see here that I have two log files : 00, containing all my compacted data, 07 containing only the offset 7, which is the &quot;k4&quot; key.</p>\n<p>I'm assuming that 07.log is the head segment and 00.log the tail.</p>\n"},{"tags":["java","spring","spring-boot","spring-mvc","springdoc-openapi-ui"],"comments":[{"owner":{"user_id":3706623,"display_name":"LucaT"},"edited":false,"comment_id":134472523,"body":"not sure if is the same problem..but I&#39;m trying to configure spring boot 3 with the new swagger &quot;springdoc-openapi-starter-webmvc-ui&quot;. In my project I have to extends WebMvcConfigurationSupport but it seems that extending this brake the swagger ui.. Any ideas ?"}],"answers":[{"owner":{"user_id":16242712,"display_name":"Stalowy"},"up_vote_count":0,"is_accepted":false,"creation_date":1679999557,"answer_id":75865133,"body":"<p>I had the same problem. I found one solution when i have tried debugging the springdoc code. I noticed that there is class <code>SwaggerWebMvcConfigurer</code> which has method <code>addResourceHandler()</code>. Because we have used <code>WebMvcConfigurationSupport</code> this method is not triggered in my opinion (For example <code>DelegatingWebMvcConfiguration</code> delegating somehow addResourceHandlers upper in class hierarchy, I am not sure).</p>\n<p>So, this is my code which helped:</p>\n<pre><code>    @ComponentScan(basePackages = {&quot;org.springdoc&quot;})\n@Import({\n        org.springdoc.core.SpringDocConfiguration.class,\n        org.springdoc.webmvc.core.SpringDocWebMvcConfiguration.class,\n        org.springdoc.webmvc.ui.SwaggerConfig.class,\n        org.springdoc.core.SwaggerUiConfigProperties.class,\n        org.springdoc.core.SwaggerUiOAuthProperties.class,\n    org.springframework.boot.autoconfigure.jackson.JacksonAutoConfiguration.class\n})\n    public class SwaggerConfig { \n    \n        private final SwaggerIndexTransformer swaggerIndexTransformer;\n        \n            public CloudServletConfig(SwaggerIndexTransformer swaggerIndexTransformer) {\n                this.swaggerIndexTransformer = swaggerIndexTransformer;\n            }\n        \n        @Override\n        public void addResourceHandlers(ResourceHandlerRegistry registry) {\n            registry.addResourceHandler(&quot;/swagger-ui*/**&quot;)\n                    .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/&quot;)\n                    .resourceChain(false)\n                    .addTransformer(swaggerIndexTransformer);\n        }\n</code></pre>\n<p>I'm, just doing the same what <code>SwaggerWebMvcConfigurer</code> does. I think so :D</p>\n"}],"owner":{"user_id":2970627,"display_name":"Alex Bondar"},"view_count":131,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678894562,"question_id":75746912,"body":"<p>I am working on old legacy project where spring boot was configured using WebMvcConfigurationSupport and now need to set up swagger ui using spring doc. Unfortunately it's not working properly when @EnableWebMvc is disabled.</p>\n<p>When I have this</p>\n<pre><code>registry.addResourceHandler(&quot;/swagger-ui/**&quot;)\n                .addResourceLocations(&quot;classpath:/META-INF/resources/webjars/swagger-ui/4.17.1/&quot;).resourceChain(false);\n</code></pre>\n<p>Default ui with petstore is loaded.</p>\n<p>With @EnableWebMvc it works but core app functionality is broken as all validators and front-end don't work. So I can't use it.</p>\n<p>Via Debug I see that SwaggerIndexPageTransformer is not called.</p>\n<p>What should I do?</p>\n"},{"tags":["java","sonarqube"],"comments":[{"owner":{"user_id":1831987,"display_name":"VGR"},"edited":false,"comment_id":133623696,"body":"Try the second option.  Documented properties are more reliable than an undocumented property.  You may also want to add <code>factory.setFeature(XMLConstants.FEATURE_SECURE_PROCESSING, true)</code>."},{"owner":{"user_id":10950272,"display_name":"makozaki"},"edited":false,"comment_id":133633497,"body":"I checked all options and sonar only accepts solution with disabled <code>ACCESS_EXTERNAL_*</code> flags. In my case I can suppress the warning as I&#39;m using schema from project resources. Nevertheless the description is misleading."},{"owner":{"user_id":1831987,"display_name":"VGR"},"edited":false,"comment_id":133639900,"body":"I have many times written code with a comment like <code>&#47;&#47; Make sonar happy</code>.  Sonar has a lot of flaws.  Secure XML processing is a good thing, but I can‚Äôt think of a justification for only accepting the doctype approach."}],"owner":{"user_id":10950272,"display_name":"makozaki"},"view_count":160,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678891773,"question_id":75746364,"body":"<p>Sonar proposes compliant solution for SchemaFactory as follows:</p>\n<pre class=\"lang-java prettyprint-override\"><code>SchemaFactory factory = SchemaFactory.newInstance(XMLConstants.W3C_XML_SCHEMA_NS_URI);\n// to be compliant, completely disable DOCTYPE declaration:\nfactory.setFeature(&quot;http://apache.org/xml/features/disallow-doctype-decl&quot;, true);\n// or prohibit the use of all protocols by external entities:\nfactory.setProperty(XMLConstants.ACCESS_EXTERNAL_DTD, &quot;&quot;);\nfactory.setProperty(XMLConstants.ACCESS_EXTERNAL_SCHEMA, &quot;&quot;);\n</code></pre>\n<p>It clearly says disable DOCTYPE declaration <strong>or</strong> prohibit the use of all protocols by external entities so I chose the 1st option.\n<a href=\"https://i.stack.imgur.com/pyg1Y.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/pyg1Y.png\" alt=\"Sonar finding\" /></a></p>\n<p>Any clues how to fix this without setting external properties? Is it a bug in Sonar or am I missing something? I used <code>newInstance()</code> with specific factory class argument but I don't think it should influence the security rule.</p>\n"},{"tags":["java","http","oauth-2.0","google-oauth","vert.x"],"comments":[{"owner":{"user_id":9772107,"display_name":"Mojtaba jalambadani"},"edited":false,"comment_id":133615641,"body":"Make sure that the scopes you define in authHandler and the scopes requested from the user (which are defined in the Google Cloud Console) match exactly."},{"owner":{"user_id":21402255,"display_name":"Luis Gamez"},"edited":false,"comment_id":133615796,"body":"Hey Mojtaba, yes I have added on OAuth consent screen the scopes &quot;./auth/userinfo.email&quot; and &quot;./auth/userinfo.profile&quot; to my app"}],"owner":{"user_id":21402255,"display_name":"Luis Gamez"},"view_count":45,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678871978,"question_id":75742696,"body":"<p>I'm having some issues when implementing OAuth2.0 Google and Vertx. I'm trying to make a simple example where user just have to ligon with google and after that we print a message on screen with the user name and email:</p>\n<pre><code>\npublic class MainVerticle extends AbstractVerticle {\n\n  public static void main(String[] args) {\n    Vertx.vertx().deployVerticle(new MainVerticle());\n  }\n\n  @Override\n  public void start(Promise&lt;Void&gt; startPromise) throws Exception {\n    final String CLIENT_ID = &quot;CLIENT_ID&quot;;\n\n    final String CLIENT_SECRET = &quot;CLIENT_SECRET&quot;;\n    \n    OAuth2Auth authProvider = GoogleAuth.create(vertx, CLIENT_ID,CLIENT_SECRET);\n\n\n    Router router = Router.router(vertx);\n\n    OAuth2AuthHandler authHandler = OAuth2AuthHandler.create(vertx, authProvider, &quot;http://localhost:8080/callback&quot;).withScopes(List.of(&quot;email&quot;, &quot;profile&quot;));\n\n\n    authHandler.setupCallback(router.route(&quot;/callback&quot;));\n\n\n    router.route(&quot;/login&quot;).handler(authHandler);\n\n    router.get(&quot;/callback&quot;).handler(ctx -&gt; {\n\n      String code = ctx.request().getParam(&quot;code&quot;);\n      System.out.println(code);\n      if(code != null){\n        //Obtenemos token de acceso\n        authProvider.authenticate(new Oauth2Credentials(new JsonObject().put(&quot;code&quot;, code)), res -&gt; {\n          if(res.succeeded()){\n            //Almacenamos el usuario\n            User user = res.result();\n            ctx.setUser(user);\n            ctx.put(&quot;token&quot;, user.principal());\n            ctx.response().putHeader(&quot;location&quot;, &quot;/protected&quot;).setStatusCode(302).end();\n          }else {\n            System.out.println(&quot;Error de authentication&quot;);\n            ctx.fail(401);\n          }\n        });\n      }else {\n        //El usuario ha denegado los permisos\n        System.out.println(&quot;El usuario ha denegado los permisos&quot;);\n        ctx.fail(401);\n      }\n    });\n\n    router.route(&quot;/protected&quot;).handler(RedirectAuthHandler.create(authProvider, &quot;/login&quot;));\n\n    router.route(&quot;/protected&quot;).handler(ctx -&gt;{\n\n      if(ctx.user() != null){\n        // Usuario identificado\n        JsonObject profile = ctx.user().principal();\n        String name = profile.getString(&quot;name&quot;);\n        String email = profile.getString(&quot;email&quot;);\n        ctx.response().end(&quot;Bienvenido, &quot;  + name + &quot; con email &quot; + email);\n      }\n      }\n\n    );\n\n\n    router\n      .get(&quot;/&quot;)\n        .handler(ctc -&gt; ctc.response()\n          .putHeader(&quot;content-type&quot;, &quot;text/html&quot;)\n          .end(&quot;Hello&lt;br&gt;&lt;a href=\\&quot;/login\\&quot;&gt;Protected by Google&lt;/a&gt;&quot;));\n\n    vertx.\n      createHttpServer()\n      .requestHandler(router)\n      .listen(8080, http -&gt; {\n      if (http.succeeded()) {\n        startPromise.complete();\n        System.out.println(&quot;HTTP server started on port 8080&quot;);\n      } else {\n        startPromise.fail(http.cause());\n      }\n    });\n  }\n}\n</code></pre>\n<p>After logging in with google and accepting the permissions when calling the calback I always get this error and it throw a 403 Forbidden</p>\n<pre><code>HTTP server started on port 8080\nmar 15, 2023 9:58:57 A.¬†M. io.vertx.ext.web.RoutingContext\nGRAVE: Unhandled exception in router\njava.lang.IllegalStateException: principal scope != handler scopes\n    at io.vertx.ext.web.handler.impl.OAuth2AuthHandlerImpl.postAuthentication(OAuth2AuthHandlerImpl.java:349)...\n</code></pre>\n"},{"tags":["java","api","karate"],"comments":[{"owner":{"user_id":143475,"display_name":"Peter Thomas"},"edited":false,"comment_id":133598403,"body":"same problem as in this question: <a href=\"https://stackoverflow.com/q/72731813/143475\">stackoverflow.com/q/72731813/143475</a> - so the rules are simple. ensure everything is a java map. clearly whatever you returned from <code>db.readRow()</code> is not. and you can try <code>karate.fromString()</code> if you have a JSON string. if still stuck, follow this process: <a href=\"https://github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue\" rel=\"nofollow noreferrer\">github.com/karatelabs/karate/wiki/How-to-Submit-an-Issue</a>"},{"owner":{"user_id":21395026,"display_name":"Karanth S P"},"edited":false,"comment_id":133599142,"body":"i tried the &quot;fromString&quot; as well. it did not work. same issue."},{"owner":{"user_id":143475,"display_name":"Peter Thomas"},"edited":false,"comment_id":133599827,"body":"I have nothing to add to my comment above. you have to re-look at the code you have for the <code>db.readRow()</code> this is not related to karate"}],"owner":{"user_id":21395026,"display_name":"Karanth S P"},"view_count":63,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678790523,"question_id":75732092,"body":"<p>I want to match a value in the column of the database using Karate for my API Automation.</p>\n<p>I have done as below .</p>\n<pre><code>* def test= db.readRow(&quot;select * from testdb.col xyz where xyz.id = '&quot;)\n</code></pre>\n<p>next i get the value from the Database and match . The Value is in the form of a JSON value</p>\n<blockquote>\n<pre><code>match test.someCol == {&quot;JSonValue1&quot;: null, &quot;JSonvalue2&quot;: null, &quot;JSonvalue3&quot;: &quot;b&quot;, &quot;JSonvalue4&quot;: &quot;a&quot;}\n</code></pre>\n</blockquote>\n<p>When i run this , i get as below.</p>\n<blockquote>\n<pre><code> com.intuit.karate.KarateException: match failed: EQUALS\n   data types don't match (OTHER:MAP)\n     {&quot;JSonValue1&quot;:null,&quot;JSonValue2&quot;:null,&quot;JSonValue3&quot;: &quot;b&quot;, &quot;JSonValue4&quot;: &quot;a&quot;}\n     {&quot;JSonValue1&quot;:null,&quot;JSonValue2&quot;:null,&quot;JSonValue3&quot;:&quot;b&quot;,&quot;JSonValue4&quot;:&quot;a&quot;}\n</code></pre>\n</blockquote>\n<p>I tried doing as:</p>\n<blockquote>\n<pre><code>match test.someCol == karate.toString({&quot;JSonValue1&quot;: null,&quot;JSonvalue2&quot;: null,&quot;JSonvalue3&quot;: &quot;b&quot;,&quot;JSonvalue4&quot;: &quot;a&quot;}).\n</code></pre>\n</blockquote>\n<p>I got the below error :</p>\n<blockquote>\n<pre><code>com.intuit.karate.KarateException: match failed: EQUALS\ndata types don't match (OTHER:STRING)\n</code></pre>\n</blockquote>\n<p>Can someone help me please.</p>\n"},{"tags":["java","java-19"],"comments":[{"owner":{"user_id":2851311,"display_name":"hfontanez"},"edited":false,"comment_id":133591744,"body":"I had to download Java 8 from an archive and run it to confirm. I don&#39;t know what changed, but I have the same issue when running with Java 17."},{"owner":{"user_id":768644,"display_name":"rzwitserloot"},"edited":false,"comment_id":133591822,"body":"Yes, this is intentional, starting with JDK9 every release breaks this kind of introspection; when one module does not export a package, it cannot be accessed like this, and no amount of <code>setAccessible</code> will let you get around that. <code>--add-opens</code> can."},{"owner":{"user_id":845414,"display_name":"Johannes Kuhn"},"edited":false,"comment_id":133592242,"body":"@rzwitserloot it is not modules, it is the <a href=\"https://github.com/openjdk/jdk/blob/49181b81dd284f65455492183ce5d0ab38b48d52/src/java.base/share/classes/jdk/internal/reflect/Reflection.java#L62\" rel=\"nofollow noreferrer\">reflection filter</a>. Even <code>--add-opens</code> doesn&#39;t help."}],"owner":{"user_id":5844477,"display_name":"Sai Dandem"},"view_count":75,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678752353,"question_id":75727985,"body":"<p>Recently I upgraded to JDK19 and I am trying to list all the declared fields in the Method class. But it returns nothing.</p>\n<pre><code>import java.lang.reflect.Method;\nimport java.util.Arrays;\n\npublic class MethodFieldsDemo {\n    public static void main(String... args){\n        Arrays.stream(Method.class.getDeclaredFields()).forEach(f-&gt; System.out.println(f.getName()));\n    }\n}\n</code></pre>\n<p>When I run the same program using JDK 8, it returns all the fields.</p>\n<p>Am I missing something or is there anything I need to do when workign with JDK 19.</p>\n"},{"tags":["java","distributed-computing","continuous-deployment","backwards-compatibility"],"comments":[{"owner":{"user_id":442945,"display_name":"Nathaniel Ford"},"edited":false,"comment_id":133586249,"body":"Your architecture sounds a bit unique. Typically tests against production services (&quot;prober&quot; tests) aren&#39;t run as part of a build pipeline, per se, and it seems like you have a rolling addition of nodes to a network? If so, you might want the node to, on joining the network, send a certain minimal set of test requests to each other node that exercise it&#39;s required functionality - and not join if there is a problem. However, to suggest more than that we&#39;d need to know something about <i>how</i> a given node would become backward incompatible? API change? Something else?"},{"owner":{"user_id":7493840,"display_name":"Zazaeil"},"edited":false,"comment_id":134039780,"body":"You are asking about versions and version based behaviors. Each node must be aware of its current version and past versions it supports; whenever request incomes - either explicitly or implicitly (sort of headers metadata) - a version stamp should be included and node mast match it and choose to act accordingly. Wouldn&#39;t it solve the problem?"}],"owner":{"user_id":2232913,"display_name":"Muhammad"},"view_count":30,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678717949,"question_id":75723266,"body":"<p>We have a Java-based distributed system in which two nodes communicate with each other. Due to regulations, we can't deploy to both regions at the same time. One node can have code that is a couple of hours or even days older than the other node. I need to test this system to detect if there is a backward incompatibility between nodes, so that measures (such as disabling internode communication) can be taken if necessary. These tests should run alongside integration and unit tests during the pipeline builds.</p>\n<p>I was thinking of decoupling the deserialization part and send a test request that includes a test flag, to avoid running logic on the node under test. Then run that at each stage of the pipeline between each source and destination node. This would include production nodes since this problem is node- and data- specific. However, I am not sure if this is the best approach. Are there other considerations? Running end to end flow might trigger these backward incompatibility issues which is not recommended.</p>\n"},{"tags":["java","java-stream"],"comments":[{"owner":{"user_id":139985,"display_name":"Stephen C"},"edited":false,"comment_id":133574667,"body":"There isn&#39;t a way.  You <i>could</i> shutdown the common forkjoinpool ... but that is a one way street."},{"owner":{"user_id":139985,"display_name":"Stephen C"},"edited":false,"comment_id":133574674,"body":"And yes ... they don&#39;t do any harm."},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":133580709,"body":"@StephenC actually, no: <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/util/concurrent/ForkJoinPool.html#shutdown()\" rel=\"nofollow noreferrer\"><code>shutdown()</code></a>: ‚Äú<i>Invocation has no effect on execution state if this is the commonPool()</i>‚Äù. The simplest way to get rid of the worker threads, is to wait a few minutes. But there‚Äôs no advantage in doing so‚Ä¶"},{"owner":{"user_id":974159,"display_name":"Joe Smith"},"edited":false,"comment_id":133584371,"body":"@holger, I waited 10 minutes and it doesn&#39;t seem to help. Am I doing it the wrong way (<a href=\"https://onlinegdb.com/QAj11GgGV\" rel=\"nofollow noreferrer\">onlinegdb.com/QAj11GgGV</a>)?"},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":133584957,"body":"It‚Äôs the purpose of a thread pool to reuse threads and hence, keep them alive for some time to be able to pick up new tasks. The exact policy is an implementation detail and may change between Java versions. It seems, you tested it in an environment which keeps at least one thread alive indefinitely. See also <a href=\"https://stackoverflow.com/q/54084915/2711488\">ForkJoinPool performance Java 8 vs 11</a>"}],"owner":{"user_id":974159,"display_name":"Joe Smith"},"view_count":48,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678683920,"question_id":75718200,"body":"<p>There are some leftover ForkJoinPool worker threads after calling parallelStream(). They probably don't do any harm but I'm wondering whether there is a way to get rid of them technically.</p>\n<p>Sample code:</p>\n<pre><code>import java.util.*;\n\npublic class Main\n{\n    public void test() {\n        List&lt;String&gt; names = Arrays.asList(&quot;Alex&quot;, &quot;Bob&quot;, &quot;Cathy&quot;, &quot;David&quot;);\n        \n        printThreads();\n        names.parallelStream().forEach(name -&gt; {\n            if (name.length() &lt; 5) {\n                System.out.println(String.format(&quot;Short name = %s&quot;, name));\n            }\n        });\n        printThreads();\n    }\n    \n    public void printThreads() {\n        Thread thread = Thread.currentThread();\n        Thread[] listThreads = new Thread[thread.getThreadGroup().activeCount()];\n        thread.getThreadGroup().enumerate(listThreads);\n        System.out.println(String.format(&quot;List of threads: %s&quot;, Arrays.asList(listThreads)));\n    }\n    \n    public static void main(String[] args) {\n        new Main().test();\n    }\n}\n</code></pre>\n<p>Output:</p>\n<pre><code>List of threads: [Thread[main,5,main]]\nShort name = Bob\nShort name = Alex\nList of threads: [Thread[main,5,main], Thread[ForkJoinPool.commonPool-worker-3,5,main]]\n</code></pre>\n<p>Onlinegdb link: <a href=\"https://onlinegdb.com/c2F_Tc1ko\" rel=\"nofollow noreferrer\">https://onlinegdb.com/c2F_Tc1ko</a></p>\n"},{"tags":["java","android","android-studio","arraylist","android-recyclerview"],"comments":[{"owner":{"user_id":3169238,"display_name":"Sergei Kozelko"},"edited":false,"comment_id":133741482,"body":"I think the call chain between <code>onLongClick</code> and <code>saveEditedTaskName</code> is important. Can you include it in the question? Also is everything happening on main thread?"},{"owner":{"user_id":7109256,"display_name":"random1234"},"edited":false,"comment_id":133752758,"body":"@SergeiKozelko There, I just added <code>onLongClick</code> to the code in the question."},{"owner":{"user_id":3169238,"display_name":"Sergei Kozelko"},"edited":false,"comment_id":133753389,"body":"So <code>getBindingAdapterPosition</code> wasn&#39;t called directly from <code>onLongClick</code>. In this case getting -1 isn&#39;t impossible. If you haven&#39;t touched activity&#39;s <a href=\"https://developer.android.com/guide/topics/manifest/activity-element#wsoft\" rel=\"nofollow noreferrer\"><code>windowSoftInputMode</code></a> then what might be happening is that activity gets resized when keyboard is shown which causes holder to unbind. You can try setting <code>windowSoftInputMode</code> to <code>adjustNothing</code> to test if that&#39;s the case, though it might break the positioning of the dialog."}],"answers":[{"owner":{"user_id":10875738,"display_name":"Torge Rosendahl"},"up_vote_count":0,"is_accepted":false,"creation_date":1678647087,"answer_id":75715597,"body":"<p><a href=\"https://developer.android.com/reference/androidx/recyclerview/widget/RecyclerView.ViewHolder#getBindingAdapterPosition()\" rel=\"nofollow noreferrer\">The docs</a> say</p>\n<blockquote>\n<p>Note that if you've called <code>notifyDataSetChanged</code>, until the next layout pass, the return value of this method will be <code>NO_POSITION</code>.</p>\n</blockquote>\n<p>If you want to lazily process your items (where you know the positions don't change), maybe use <code>getLayoutPosition</code> instead.</p>\n"},{"owner":{"user_id":7109256,"display_name":"random1234"},"up_vote_count":0,"is_accepted":true,"creation_date":1679427580,"answer_id":75805697,"body":"<p>The issue was solved by passing <code>getBindingAdapterPosition()</code> as an argument in the <code>onLongClick()</code> method call and further to the <code>saveEditedTaskName()</code> method and using that variable received in the parameter instead. I do not exactly know why it works, but it did, perhaps someone else can contribute with an explanation?</p>\n<pre><code>public static class MyViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener\n{\n    TextView textView;\n    OnItemListener onItemListener;\n    ArrayList&lt;Task&gt; list;\n    private final RecyclerViewAdapter adapter;\n\n    MyViewHolder(@NonNull View itemView, OnItemListener onItemListener, ArrayList&lt;Task&gt; list, RecyclerViewAdapter adapter) {\n        super(itemView);\n\n        textView = itemView.findViewById(R.id.singleView);\n        this.onItemListener = onItemListener;\n        this.list = list;\n        this.adapter = adapter;\n\n        itemView.setOnClickListener(this);\n        itemView.setOnLongClickListener(view -&gt; {\n            onLongClick(getBindingAdapterPosition());\n            return true;\n        });\n    }\n\n    // Other code\n\n    private void saveEditedTaskName(Context mContext, String editedText, int position)\n    {\n        // Method to save the edited task name.\n\n        SharedPreferences sharedPrefs = mContext.getSharedPreferences(MainActivity.SHARED_PREFS, 0);\n        String categoryId = sharedPrefs.getString(MainActivity.CATEGORY_ID_CHOICE, &quot;&quot;);\n\n        FirebaseHelper firebaseHelper = new FirebaseHelper();\n        if (position != RecyclerView.NO_POSITION)\n        {\n            Task task = list.get(position);\n            String taskId = task.getTaskId();\n\n            DatabaseReference databaseReference = firebaseHelper.getDatabaseReference();\n            databaseReference.child(categoryId).child(DatabaseNodes.TASKS)\n                    .child(taskId).child(DatabaseNodes.TASK_NAME).setValue(editedText);\n        }\n        else\n        {\n            Toast.makeText(mContext, &quot;Operation failed, please try again later.&quot;, Toast.LENGTH_SHORT).show();\n        }\n\n        adapter.notifyItemChanged(position);\n    }\n\n    // Other code\n}\n</code></pre>\n"}],"owner":{"user_id":7109256,"display_name":"random1234"},"view_count":151,"up_vote_count":2,"accepted_answer_id":75805697,"answer_count":2,"score":2,"creation_date":1678646595,"question_id":75715547,"body":"<p>I have a RecyclerView populated with objects and inside of my RecyclerView adapter I have a function for renaming the name value of the object, when running this method I use <code>getBindingAdapterPosition()</code> to get the selected object from the ArrayList of task objects to rename it, however <code>getBindingAdapterPosition()</code> is returning <code>RecyclerView.NO_POSITION</code> (or -1) only on SOME items in the RecyclerView and on others the function is working properly, I do not know why this is happening and I have tried to battle it by using an if check to check if <code>getBindingAdapterPosition()</code> is equal to <code>RecyclerView.NO_POSITION</code> but that check does not solve the issue it only skips the renaming. I also tried by adding <code>adapter.notifyItemChanged(adapterPosition)</code> thinking that maybe it didn't work because the adapter wasn't being notified of the change, but the issue persists. Why is <code>getBindingAdapterPosition()</code> returning -1 only on SOME items and how can I solve this? Is there another method I can use or is there something I am doing wrong without noticing?</p>\n<p>Here is the <code>MyViewHolder</code> in my RecyclerViewAdapter class:</p>\n<pre><code>public static class MyViewHolder extends RecyclerView.ViewHolder implements View.OnClickListener\n{\n    TextView textView;\n    OnItemListener onItemListener;\n    ArrayList&lt;Task&gt; list;\n    private final RecyclerViewAdapter adapter;\n\n    MyViewHolder(@NonNull View itemView, OnItemListener onItemListener, ArrayList&lt;Task&gt; list, RecyclerViewAdapter adapter) {\n        super(itemView);\n\n        textView = itemView.findViewById(R.id.singleView);\n        this.onItemListener = onItemListener;\n        this.list = list;\n        this.adapter = adapter;\n\n        itemView.setOnClickListener(this);\n        itemView.setOnLongClickListener(view -&gt; {\n            onLongClick();\n            return true;\n        });\n    }\n\n    private void onLongClick(int position)\n    {\n        // Handles the long click event on an item in the RecyclerView,\n        // opens a Dialog with an EditText with the name of the task to edit the task name.\n\n        String text = textView.getText().toString();\n        // Creates the EditText for user input and style the look and behavior of it.\n        final EditText input = new EditText(itemView.getContext());\n        input.setBackground(ContextCompat.getDrawable(itemView.getContext(), R.drawable.edit_text_dialog));\n        input.setTextColor(ContextCompat.getColor(itemView.getContext(), R.color.colorText));\n        input.setText(text);\n        input.setSingleLine();\n        input.setImeOptions(EditorInfo.IME_ACTION_SEND);\n        input.setPadding(28, 28, 28, 28);\n\n        // Create an AlertDialog for the user to edit the task name.\n        AlertDialog.Builder builder = new AlertDialog.Builder(itemView.getContext(), R.style.DialogTheme);\n        builder.setTitle(R.string.dialog_edit_title)\n                .setMessage(R.string.dialog_edit_message)\n                .setView(input)\n                .setPositiveButton(R.string.dialog_edit_positive_button, (dialogInterface, i) -&gt;\n                {\n                    // When the positive button is clicked, save the edited task name.\n                    String editedText = input.getText().toString();\n                    if (!editedText.isEmpty())\n                    {\n                    saveEditedTaskName(itemView.getContext(), editedText, position);\n                    }\n                })\n                .setNegativeButton(R.string.dialog_edit_negative_button, (dialogInterface, i) -&gt; dialogInterface.cancel());\n        // Show the AlertDialog.\n        AlertDialog dialog = builder.show();\n\n        input.setOnEditorActionListener((textView, actionId, keyEvent) -&gt;\n        {\n            // Set the listener for the send button on the EditText.\n            if (actionId == EditorInfo.IME_ACTION_SEND)\n            {\n                // When the send button is clicked, save the edited task name and dismiss the dialog.\n                String editedText = input.getText().toString();\n                if (!editedText.isEmpty())\n                {\n                    saveEditedTaskName(itemView.getContext(), editedText, position);\n                }\n                dialog.dismiss();\n                return true;\n            }\n            return false;\n        });\n    }\n\n    private void saveEditedTaskName(Context mContext, String editedText)\n    {\n        // Method to save the edited task name.\n\n        SharedPreferences sharedPrefs = mContext.getSharedPreferences(MainActivity.SHARED_PREFS, 0);\n        String categoryId = sharedPrefs.getString(MainActivity.CATEGORY_ID_CHOICE, &quot;&quot;);\n\n        FirebaseHelper firebaseHelper = new FirebaseHelper();\n\n        int adapterPosition = getBindingAdapterPosition();\n        if (adapterPosition != RecyclerView.NO_POSITION)\n        {\n            // Problem here!\n            Task task = list.get(getBindingAdapterPosition());\n            String taskId = task.getTaskId();\n\n            DatabaseReference databaseReference = firebaseHelper.getDatabaseReference();\n            databaseReference.child(categoryId).child(DatabaseNodes.TASKS)\n                    .child(taskId).child(DatabaseNodes.TASK_NAME).setValue(editedText);\n\n            if (adapter != null)\n            {\n                adapter.notifyItemChanged(adapterPosition);\n            }\n        }\n        else\n        {\n            Toast.makeText(mContext, &quot;An error occurred. Please try again.&quot;, Toast.LENGTH_SHORT).show();\n        }\n    }\n\n    // Other code\n}\n</code></pre>\n<p><strong>EDIT:</strong> I want to add that it seems like the objects where the issue is occurring that the values can't be renamed because the <code>getBindingAdapterPosition()</code> is returning -1 seem to always be in the same positions, it seems to always be somewhere around the 7th and 8th positioned items in the RecyclerView (indexes 6 &amp; 7). Don't know if this matters but thought that i'd share it, seems very odd...</p>\n<p><strong>EDIT:</strong> After further testing, it seems like it's not only those two positions making trouble, if I have more items it can occur later aswell if the list is longer, but as stated earlier, somewhere usually around the same positions, indexes, 6,7,8.</p>\n"},{"tags":["java","windows","intellij-idea","input","newline"],"comments":[{"owner":{"user_id":2338547,"display_name":"markspace"},"edited":false,"comment_id":133556462,"body":"Curious: have you checked the raw <code>InputStream</code> (just <code>System.in</code>)?  Does it contain a carriage return?"},{"owner":{"user_id":2338547,"display_name":"markspace"},"edited":false,"comment_id":133556482,"body":"Also: run this code on the command line w/ no IDE.  IntelliJ may be doing things differently that the Windows OS."},{"owner":{"user_id":9513184,"display_name":"Unmitigated"},"edited":false,"comment_id":133556486,"body":"I get 13 when running this in Eclipse. But you should try running from the command line."},{"owner":{"user_id":1393766,"display_name":"Pshemo"},"edited":false,"comment_id":133556495,"body":"If your Scanner will read fixed data like <code>Scanner reader = new Scanner(&quot;\\r\\n&quot;);</code> it returns <code>13</code> (so \\r) and 10 (\\n). My guess is that your IDE is set to have only <code>\\n</code> as line separator (even if it runs on Windows)."},{"owner":{"user_id":21033369,"display_name":"LJ replica"},"edited":false,"comment_id":133581433,"body":"Seems like a bug. I have created a bug report here: <a href=\"https://youtrack.jetbrains.com/issue/IDEA-315253/\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/issue/IDEA-315253</a>."}],"owner":{"user_id":1818935,"display_name":"Evan Aad"},"view_count":47,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678552195,"question_id":75706355,"body":"<p>When I run the following class from <em>IntelliJ</em> on a Windows 10:</p>\n<pre><code>import java.util.Scanner;\npublic class Main\n{\n    public static void main(String ... args)\n    {\n        Scanner reader = new Scanner(System.in);\n        reader.useDelimiter(&quot;&quot;);\n        String s = reader.next();\n        System.out.println((int)s.charAt(0));\n    }\n}\n</code></pre>\n<p>and I press the <code>Enter</code> key as the input, the output is:</p>\n<pre><code>10\n</code></pre>\n<p>This baffles me, since the Windows line separator is the 2 character sequence <code>\\r\\n</code>. Why isn't the output</p>\n<pre><code>13\n</code></pre>\n<p>?</p>\n"},{"tags":["java","hibernate","jpa","jpa-2.0","criteriabuilder"],"owner":{"user_id":10118195,"display_name":"Aurora"},"view_count":82,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678507231,"question_id":75702699,"body":"<p>I am working with oracle and using JPA with Hibernate, can we do this with criteriabuilder?</p>\n<pre class=\"lang-sql prettyprint-override\"><code>SELECT col1,col2,col3\nFROM table(schema.fn_name(param1,param2,param3))\nORDER BY col1,col2;\n</code></pre>\n<p>the query can display other additional field (xyz) as well, although there is no such column. I can do this with callable statement</p>\n"},{"tags":["java","spring-boot","spring-security"],"comments":[{"owner":{"user_id":5277820,"display_name":"dur"},"edited":false,"comment_id":133545584,"body":"You are not logged in, so your <code>ApplicationAuthenticationEntryPoint</code> is executed. This class is returning an error (<code>response.sendError(HttpServletResponse.SC_FORBIDDEN);</code>). This error is redirected to <code>&#47;error</code> (default error handler). You have to permit <code>&#47;error</code> to see the error response."},{"owner":{"user_id":5277820,"display_name":"dur"},"edited":false,"comment_id":133545607,"body":"Have a look at <a href=\"https://stackoverflow.com/questions/75271958/spring-boot-3-with-spring-security-intercepts-exceptions-i-dont-want-it-to\" title=\"spring boot 3 with spring security intercepts exceptions i dont want it to\">stackoverflow.com/questions/75271958/&hellip;</a>"},{"owner":{"user_id":9860374,"display_name":"Matheus"},"edited":false,"comment_id":133545658,"body":"@dur . . . it really helped me. If I understood it correctly, seems like Spring Boot registers the <code>BasicErrorController</code> mapped to /error by default to the servlet container, tomcat in this case. When the <code>SC_FORBIDDEN</code> is sent in the response, tomcat delegate the global error page to the <code>&#47;error</code> which then falls to the <code>BasicErrorController</code> to write the corresponding response."},{"owner":{"user_id":5277820,"display_name":"dur"},"edited":false,"comment_id":133545689,"body":"To be sure, open the <code>&#47;error</code> and you will see the error message. Maybe it is some other exception, I could not see in your code."},{"owner":{"user_id":9860374,"display_name":"Matheus"},"edited":false,"comment_id":133545763,"body":"Actually you&#39;re 100% correct. Permiting /error shows the default 403 response. Customizing the BasicErrorController was enough to deal with my case."}],"owner":{"user_id":9860374,"display_name":"Matheus"},"view_count":290,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678471352,"question_id":75699598,"body":"<p>So I have a simple <code>SecurityFilterChain</code> configuration and a simple <code>AuthenticationEntrypoint</code> implementation.</p>\n<p>The <code>AutheticationEntrypoint</code> implementation just writes a JSON response and the send a 403 error to the client.</p>\n<p>The problem is that, for some reason, when I try access a protected resource without credentials, the request gets redirected to <code>/error</code> as I can see in the logs (DEBUG level).</p>\n<p><strong><code>SecurityConfiguration.java</code></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>@Configuration\npublic class SecurityConfiguration {\n\n    @Bean\n    public SecurityFilterChain filterChain(HttpSecurity http) throws Exception {\n        return http\n            .authorizeHttpRequests()\n                .anyRequest().authenticated()\n                .and()\n            .formLogin().disable()\n            .httpBasic().disable()\n            .csrf().disable()\n            .headers()\n                .frameOptions().sameOrigin()\n                .and()\n            .exceptionHandling()\n                .authenticationEntryPoint(new ApplicationAuthenticationEntryPoint())\n                .and()\n            .sessionManagement()\n                .sessionCreationPolicy(SessionCreationPolicy.STATELESS)\n                .and()\n            .build();\n    }\n}\n</code></pre>\n<p><strong><code>ApplicationAuthenticationEntryPoint.java</code></strong></p>\n<pre class=\"lang-java prettyprint-override\"><code>public class ApplicationAuthenticationEntryPoint implements AuthenticationEntryPoint {\n\n    private final ObjectMapper mapper = new ObjectMapper();\n\n    @Override\n    public void commence(HttpServletRequest request, HttpServletResponse response, AuthenticationException authException) throws IOException, ServletException {\n        response.sendError(HttpServletResponse.SC_FORBIDDEN);\n        response.setContentType(MediaType.APPLICATION_JSON_VALUE);\n        response.getWriter().write(mapper.createObjectNode()\n                .put(&quot;timestamp&quot;, LocalDateTime.now().toEpochSecond(ZoneOffset.of(&quot;-3&quot;)))\n                .put(&quot;message&quot;, &quot;Access denied to resource&quot;)\n                .toString());\n    }\n}\n</code></pre>\n<p>When I call a protected resource, I see the following in the logs:</p>\n<pre><code>2023-03-10T14:59:49.528-03:00 DEBUG 58236 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /test\n2023-03-10T14:59:49.528-03:00 DEBUG 58236 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n2023-03-10T14:59:49.529-03:00 DEBUG 58236 --- [nio-8080-exec-8] o.s.security.web.FilterChainProxy        : Securing GET /error\n2023-03-10T14:59:49.529-03:00 DEBUG 58236 --- [nio-8080-exec-8] o.s.s.w.a.AnonymousAuthenticationFilter  : Set SecurityContextHolder to anonymous SecurityContext\n</code></pre>\n<p>Why there's a line &quot;Securing GET /error&quot;? The Spring Security filter chain is called twice due to that &quot;redirect&quot;. Including the <code>ExceptionTranslationFilter</code>. I put a breakpoint on the the <code>ExceptionTranslationFilter</code> and the debugger falls twice on this breakpoint.</p>\n<p>Is this <code>/error</code> that default error page from Spring Boot? If so, how? Since all the security is made on filters, it hasn't reached the MVC stack yet by the time the authentication exception occurs.</p>\n<p>Perhaps I'm lacking knowledge on how Spring Security works.</p>\n<p>Why is this happening?</p>\n"},{"tags":["java","linux","curl","netty","epoll"],"comments":[{"owner":{"user_id":5162472,"display_name":"dfogni"},"edited":false,"comment_id":133588780,"body":"Does your handler override the <a href=\"https://netty.io/4.1/api/io/netty/channel/ChannelInboundHandler.html#channelWritabilityChanged-io.netty.channel.ChannelHandlerContext-\" rel=\"nofollow noreferrer\">channelWritabilityChanged</a>? The issue you describe should be solved by using it: <a href=\"https://stackoverflow.com/a/64983174/5162472\">stackoverflow.com/a/64983174/5162472</a>"}],"owner":{"user_id":1214125,"display_name":"Simone Rondelli"},"view_count":88,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678314755,"question_id":75678850,"body":"<p>I have a server application that can return a huge response (&gt;10gb) via HTTP. The response is dynamically generated and sent in chunks to the client. The client (<code>curl</code>) could be slow in consuming the content generated by the server, this causes the server to stop and wait. The problem is that the server then never resumes.</p>\n<p>I'm using <code>EpollEventLoopGroup</code>.</p>\n<p>Here is what seems to happen:</p>\n<ol>\n<li>The server spits out data really fast (using <code>writeAndFlush()</code>).</li>\n<li>The client cannot keep up reading the data (I saw several posts about Netty and slow clients)</li>\n<li>The server stops sending data by setting <code>setFlag(Native.EPOLLOUT);</code>: <a href=\"https://github.com/netty/netty/blob/4.1/transport-classes-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollStreamChannel.java#L447-L449\" rel=\"nofollow noreferrer\">https://github.com/netty/netty/blob/4.1/transport-classes-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollStreamChannel.java#L447-L449</a></li>\n<li>The server stops sending data because calls to flush are actually unsuccessful, see this check: <a href=\"https://github.com/netty/netty/blob/4.1/transport-classes-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollChannel.java#L551-L559\" rel=\"nofollow noreferrer\">https://github.com/netty/netty/blob/4.1/transport-classes-epoll/src/main/java/io/netty/channel/epoll/AbstractEpollChannel.java#L551-L559</a> (note this checks for the same flag set above <code>!isFlagSet(Native.EPOLLOUT)</code>)</li>\n<li>For some reason the server never goes back into a writing state (<code>clearFlag(Native.EPOLLOUT)</code>).</li>\n<li>Since no data is flushed to the client the <code>ChannelOutboundBuffer</code> keeps growing, as the server keeps producing data, until I get OOM (Netty Direct Buffer).</li>\n<li>If after the <code>writeAndFlush()</code> I check for <code>channel.isWritable()</code> and stop until the channel is writable again, it will wait forever, because the channel will never be writable again.</li>\n</ol>\n<p>My question is, why does the server never goes back into writing to the client?</p>\n"},{"tags":["java","kotlin","swing","intellij-plugin","jtree"],"comments":[{"owner":{"user_id":992484,"display_name":"MadProgrammer"},"edited":false,"comment_id":133509607,"body":"<code>nodeStructureChanged</code> basically informs the <code>JTree</code> that the underlying structure has completely changed, so any expanded or selection information will be discarded.  The expanded state is maintained internally by the <code>JTree</code> and the selection via the <code>TreeSelectionModel</code>. If you want to maintain this state between updates, you have two basic choices. You either devise a delta update approach which can add/remove/update the nodes between the new and old models or try and restore the expended and selected states after the update - the first will likely produce a nicer UX"}],"owner":{"user_id":10401124,"display_name":"AmirHossein Abdolmotallebi"},"view_count":47,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678304445,"question_id":75677508,"body":"<p>I have a <code>JTree</code> that I want to update its node based on a list that I have receiving from remote (some of its data is already in Tree ,so they are some repeatations)</p>\n<p>Here is my data model that comes from remote</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>data class VariableInfo(\n    val name: String,\n    val type: String,\n    val value: String,\n    val children: List&lt;VariableInfo&gt;? = null,\n)\n</code></pre>\n<p>And here is &quot;VariableInfoTreeNode&quot;</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class VariableInfoTreeNode(\n    private val variableInfo: VariableInfo,\n    private val myParentNode: TreeNode?,\n) : TreeNode {\n    override fun toString(): String {\n        return &quot;${variableInfo.name}:${variableInfo.type} ${variableInfo.value}&quot;\n    }\n\n    override fun getChildAt(childIndex: Int): TreeNode {\n        return _children[childIndex]\n    }\n\n    override fun getChildCount(): Int {\n        return _children.size\n    }\n\n    override fun getParent(): TreeNode? {\n        return myParentNode\n    }\n\n    override fun getIndex(node: TreeNode?): Int {\n        return _children.indexOfFirst {\n            if (node is VariableInfoTreeNode) {\n                it == node\n            } else {\n                false\n            }\n        }\n    }\n\n    override fun getAllowsChildren(): Boolean {\n        return true\n    }\n\n    override fun isLeaf(): Boolean {\n        return false\n    }\n\n    private val _children by lazy {\n        variableInfo.children?.map {\n            VariableInfoTreeNode(it, this)\n        } ?: emptyList()\n    }\n\n    override fun children(): Enumeration&lt;out TreeNode&gt; {\n        return Collections.enumeration(_children)\n    }\n}\n</code></pre>\n<p>I also have a RootNode for containing <code>VariableInfoTreeNode</code> nodes</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class VariableInfoRootNode:TreeNode{\n    private var children= emptyList&lt;VariableInfo&gt;()\n    private lateinit var childrenNodes:List&lt;VariableInfoTreeNode&gt;\n    init {\n        refreshChildTree()\n    }\n    fun setVariableInfo(variableInfoList: List&lt;VariableInfo&gt;){\n        children=variableInfoList\n        refreshChildTree()\n    }\n\n    private fun refreshChildTree(){\n        childrenNodes=children.map {\n            VariableInfoTreeNode(it,this)\n        }\n    }\n\n\n    override fun getChildAt(childIndex: Int): TreeNode {\n        return childrenNodes[childIndex]\n    }\n\n    override fun getChildCount(): Int {\n        return childrenNodes.size\n    }\n\n    override fun getParent(): TreeNode? {\n        return null\n    }\n\n    override fun getIndex(node: TreeNode?): Int {\n        return childrenNodes.indexOfFirst {\n            it==node\n        }\n    }\n\n    override fun getAllowsChildren(): Boolean {\n        return true\n    }\n\n    override fun isLeaf(): Boolean {\n        return false\n    }\n\n    override fun children(): Enumeration&lt;out TreeNode&gt; {\n        return Collections.enumeration(childrenNodes)\n    }\n}\n\n</code></pre>\n<p>and here is my MainTreeContainer class</p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>class DebugBoardView : JPanel(GridLayout()) {\n    private val rootNode = VariableInfoRootNode()\n\n    private val treeModel = DefaultTreeModel(rootNode)\n    private val tree: Tree = Tree(treeModel).apply {\n        isRootVisible = false\n    }\n    \n    // I call this method somewhere else and I want \n    // Tree to update itself and does not lose selection and expansion state\n    fun onVariablesUpdate(list: List&lt;VariableInfo&gt;) {\n        rootNode.setVariableInfo(list)\n        treeModel.nodeStructureChanged(rootNode)\n    }\n\n    init {\n        add(tree)\n        //periodically update with same fake data!\n        javax.swing.Timer(5000) {\n            onVariablesUpdate(fakeInfo)\n        }.start()\n    }\n}\n\n</code></pre>\n<p>my problem is when I call <code>DebugBoardView::onVariablesUpdate</code> my tree will updated but all of selected paths and expanded paths will be gone!</p>\n<p>How can I fix that?</p>\n<p>It's worth to mention that I am developing <code>Intelij Idea Plugin</code> so any solution for this platform could be useful too</p>\n"},{"tags":["java","exception"],"answers":[{"owner":{"user_id":4222206,"display_name":"Queeg"},"up_vote_count":0,"is_accepted":false,"creation_date":1678278835,"answer_id":75673084,"body":"<p>You cannot pass the additional fields to the superclass. Instead your class must manage them itself. Example:</p>\n<pre><code>public class CustomException extends ProductsException {\n\n    private final String personId;\n    private final String code;\n    private final List&lt;String&gt; debugger;\n\n    public CustomException(String personId, String code, List&lt;String&gt; debugger) {\n        super();\n        this.personId = personId;\n        this.code = code;\n        this.debugger = debugger;\n    }\n\n    public CustomException(String personId, String code, List&lt;String&gt; debugger, Exception cause) {\n        super(cause);\n        this.personId = personId;\n        this.code = code;\n        this.debugger = debugger;\n    }\n\n    public String getMessage() {\n        return &quot;Failed at &quot; + personId + &quot;, &quot; + code + &quot;, &quot; + debugger;\n    }\n\n}\n</code></pre>\n<p>Change getMessage() to format the message to your needs. Or add getter functions so some other code part can take over formatting as needed, e.g. it would be different for your customer than for the logfile.</p>\n<p>I cannot tell why you get uncaught exceptions. There may be something missing in your try/catch blocks but you show where you throw, not where you catch.</p>\n"}],"owner":{"user_id":13983643,"display_name":"newLearner"},"view_count":44,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678276536,"question_id":75672719,"body":"<p>I have an exception class as :</p>\n<pre><code>@NoArgsConstructor\npublic class ProductsException extends RuntimeException {\n\n    private MyError error;\n\n    public ProductsException(Exception e) {\n        super(e);\n    }\n}\n</code></pre>\n<pre><code>\npublic class MyError {\n    private final String errorCode;\n    private final String message;\n    private final String moreInfo;\n    private final List&lt;Errors&gt; errors;\n\n\n    public MyError(String errorCode, String message, String moreInfo, List&lt;Errors&gt; errors) {\n        this.errorCode = errorCode;\n        this.message = message;\n        this.moreInfo = moreInfo;\n        this.errors = errors;\n    }\n</code></pre>\n<p>This exception is being thrown from inside the service class but my client expects exception as :</p>\n<pre><code>\n{\n    &quot;personId&quot; : &quot;1&quot;,\n    &quot;code&quot; : &quot;1&quot;,\n    &quot;debugger&quot; : &quot;[\n        //List\n    ]&quot;\n    \n}\n\n</code></pre>\n<p>So I created a new class as</p>\n<pre><code>@Builder\npublic class CustomException extends ProductsException {\n\n    private final String personId;\n    private final String code;\n    private final List&lt;String&gt; debugger;\n\n}\n</code></pre>\n<p>And in the controller :</p>\n<pre><code>catch(ProductsException e) {\n  throw CustomException.builder()\n    .code(e.getErrorCode())\n    .debugger(List.of(e.getError().getMessage()))\n    .build();\n}\n</code></pre>\n<p>This does not seem to work and I am getting uncaught exception.\nI am suspecting that I need to pass these fields in the constructor but not sure what needs to be done exactly.</p>\n<p>Even if I do <code>public class CustomException extends RuntimeException</code>\nhow can I pass all these fields to <code>super()</code> ?</p>\n<p>Any help will be highly appreciated.</p>\n"},{"tags":["java","spring","jpa","junit","entitymanager"],"comments":[{"owner":{"user_id":2696260,"display_name":"M. Deinum"},"edited":false,"comment_id":133497389,"body":"Which Spring Boot version and please add your pom or build file."},{"owner":{"user_id":2138953,"display_name":"PAX"},"edited":false,"comment_id":133497454,"body":"Does it help if you &quot;reattach&quot; the entity, again? <code>Foo mergedFoo = entityManager.merge(foo); entityManager.refresh(mergedFoo);</code> It may be possible that your used version of Spring/Hibernate is not compatible with Java 17."},{"owner":{"user_id":7109162,"display_name":"XtremeBaumer"},"edited":false,"comment_id":133497588,"body":"Does this answer your question? <a href=\"https://stackoverflow.com/questions/44554783/spring-data-jpa-entity-not-managed-exception-when-calling-refresh\">Spring data Jpa Entity not managed Exception when calling refresh</a>"}],"owner":{"user_id":5705247,"display_name":"Tuomas Toivonen"},"view_count":176,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678264486,"question_id":75670843,"body":"<p>I have the following test, where foo is retrieved in current transaction, updated in new transaction and refreshed in current transaction. I'm using Spring Boot and Spring Data JPA with JUnit 4.</p>\n<pre><code>// Test case of @SpringBootTest\n@Test\n@Transactional\npublic void testHandleFoo() {\n    Foo foo = fooRepository.save(Foo.builder().build());\n    sut.handleFoo(foo);\n    verify(...);\n}\n\n// Service A\n@Transactional\npublic void handleFoo(Foo foo) {\n    service.updateFooInNewTransaction(foo.getId()); // REQUIRES_NEW propagation\n    entityManager.refresh(foo); // Throws java.lang.IllegalArgumentException: Entity not managed\n}\n\n// Service B\n@Transactional(propagation = Propagation.REQUIRES_NEW)\nprivate updateFooInNewTransaction(long id) {\n    fooRepository.getById(id).setValue(...);\n}\n</code></pre>\n<p>With Java 8 the test work fine, but Java 17 gives the following error</p>\n<pre><code>java.lang.IllegalArgumentException: Entity not managed\n\n    at org.hibernate.internal.SessionImpl.fireRefresh(SessionImpl.java:1245)\n    at org.hibernate.internal.SessionImpl.refresh(SessionImpl.java:1202)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke0(Native Method)\n    at java.base/jdk.internal.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:77)\n    at java.base/jdk.internal.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)\n    at java.base/java.lang.reflect.Method.invoke(Method.java:568)\n</code></pre>\n<p>Why <code>refresh</code> method doesn't work with Java 17?</p>\n"},{"tags":["java","spring-boot","kubernetes","spring-cloud","spring-cloud-kubernetes"],"comments":[{"owner":{"user_id":2730527,"display_name":"spencergibb"},"edited":false,"comment_id":133492727,"body":"You need to set <code>spring.config.import=kubernetes:</code>, see <a href=\"https://docs.spring.io/spring-cloud-kubernetes/docs/current/reference/html/#kubernetes-propertysource-implementations\" rel=\"nofollow noreferrer\">docs.spring.io/spring-cloud-kubernetes/docs/current/referenc&zwnj;&#8203;e/&hellip;</a> Otherwise you need to enable bootstrap as documented"},{"owner":{"user_id":2117355,"display_name":"Mark"},"edited":false,"comment_id":133493349,"body":"Yup, that&#39;s what I was missing.  Also, note the trailing colon"}],"answers":[{"owner":{"user_id":1059372,"display_name":"Eugene"},"up_vote_count":0,"is_accepted":false,"creation_date":1680681516,"answer_id":75936958,"body":"<p>As Spencer commented, you need to enable &quot;config-data&quot; support in <code>application.yaml</code> (see documentation <a href=\"https://docs.spring.io/spring-cloud-kubernetes/docs/current/reference/html/#kubernetes-propertysource-implementations\" rel=\"nofollow noreferrer\">here</a>).</p>\n<p>The thing to note is that, while we indeed added this support, at the moment it is a bit limited compared to bootstrap. For example, you can't read multiple secrets, for that you will need to still enable bootstrap.</p>\n"}],"owner":{"user_id":2117355,"display_name":"Mark"},"view_count":360,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678230801,"question_id":75668043,"body":"<p>I am attempting to load properties from a K8s configmap into my Spring Boot service using Spring Cloud Kubernetes Fabric8, as described in the Spring Cloud docs <a href=\"https://docs.spring.io/spring-cloud-kubernetes/docs/current/reference/html/#configmap-propertysource\" rel=\"nofollow noreferrer\">here</a>.</p>\n<p>My configmap for my service looks like this:</p>\n<pre><code>apiVersion: v1\nkind: ConfigMap\nmetadata:\n  name: foo-my-service\n  namespace: foo\n  labels:\n    helm.sh/chart: my-service-1.0.0-SNAPSHOT\n    app.kubernetes.io/name: my-service\n    app.kubernetes.io/instance: foo\n    app.kubernetes.io/version: &quot;1.0.0-SNAPSHOT&quot;\n    app.kubernetes.io/managed-by: Helm\ndata:\n  spring.datasource.url: jdbc:postgresql://foo-postgresql/mydb\n</code></pre>\n<p>And my Spring Boot <code>application.yaml</code> looks like this:</p>\n<pre><code>spring:\n  application:\n    name: foo-my-service\n  cloud:\n    kubernetes:\n      secrets:\n        enable-api: true\n\n</code></pre>\n<p>I'm using Fabric8 to communicate with k8s.  This dependency is brought in as <code> org.springframework.cloud:spring-cloud-starter-kubernetes-fabric8-config:jar:3.0.1</code> in my Maven pom.</p>\n<p>I'm using Spring Boot version 3.0.3 and Spring Cloud 2022.0.1.</p>\n<p>What I expect to happen based on the Spring Cloud documentation is that my <code>spring.datasource.url</code> property will be set from the value in the configmap.</p>\n<p>What's actually happening is that the property is not detected, and the Spring Boot application fails to start when it tries to use the property to run a Flyway migration.</p>\n<pre><code>‚îÇ Failed to configure a DataSource: 'url' attribute is not specified and no embedded datasource could be configured.                                                                                                                                       ‚îÇ\n‚îÇ Reason: Failed to determine suitable jdbc url                                                                                                                                                                                                            ‚îÇ\n</code></pre>\n<p>If I downgrade my Spring Boot version to 2.x and Spring Cloud to the corresponding version, then this works (my application starts up and the <code>spring.datasource.url</code> property is set to the value in the configmap).</p>\n<p>How do I get this to work in Spring Boot 3?</p>\n"},{"tags":["java","android","android-videoview"],"comments":[{"owner":{"user_id":21017714,"display_name":"Enowneb"},"edited":false,"comment_id":133493688,"body":"Can you provide more information on this statement <b><i>however the video does not play at all</i></b>? Any error log? And do you test it on an emulator? Can you try it on a real device or try another emulator? And also what is your <code>R.raw.asf</code> format? Is the encoding supported by the device?"},{"owner":{"user_id":21288859,"display_name":"Lord V"},"edited":false,"comment_id":133494082,"body":"Hello! Sure i have tried both emulator and Real device. R.raw.asf it&#39;s MP4 file so yes supported by device. Log is clear."},{"owner":{"user_id":21017714,"display_name":"Enowneb"},"edited":false,"comment_id":133494218,"body":"May I know if you are showing the correct layout with <code>@layout&#47;videopozadina</code>? The way that you set the video to your <code>VideoView</code> looks good to me. And just to double confirm your video can be played and is not corrupted?"},{"owner":{"user_id":21288859,"display_name":"Lord V"},"edited":false,"comment_id":133494269,"body":"Hello thanks for your reply. I have tried with another video but same thing... Also i have tried to add directly to my fragment_login layour by <code>&lt;VideoView             android:id=&quot;@+id&#47;bgVideoView&quot;             android:layout_width=&quot;match_parent&quot;             android:layout_height=&quot;match_parent&quot;             android:fitsSystemWindows=&quot;true&quot;             android:keepScreenOn=&quot;true&quot; &#47;&gt; </code> Still no progress..."},{"owner":{"user_id":21017714,"display_name":"Enowneb"},"edited":false,"comment_id":133494359,"body":"I have instead provided a little guiding sample that should be working fine. See if it gives you any hint."},{"owner":{"user_id":21017714,"display_name":"Enowneb"},"edited":false,"comment_id":133512534,"body":"I have reposted another guide from your provided screenshot. See if that is your case?"}],"answers":[{"owner":{"user_id":21017714,"display_name":"Enowneb"},"up_vote_count":0,"is_accepted":false,"creation_date":1678326430,"answer_id":75679733,"body":"<p>So from the provided screenshot, I guess it should be from this xml:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n        &lt;include layout=&quot;@layout/videopozadina&quot; /&gt;\n    &lt;!-- There should be more layout design here --&gt;\n</code></pre>\n<p>And you need to make sure that for this layout <code>videopozadina</code>, it has the <code>VideoView</code> defined there, which I believe it should be something you provided like this:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;VideoView\n        android:id=&quot;@+id/bgVideoView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:fitsSystemWindows=&quot;true&quot;\n        android:keepScreenOn=&quot;true&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>Then, you need to further define an ID for the included layout in the first xml mentioned here:</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n        &lt;include id=&quot;@+id/videoLayout&quot; \n             layout=&quot;@layout/videopozadina&quot; /&gt;\n   &lt;!-- There should be more layout design here --&gt;\n</code></pre>\n<p>And you should set the video in the Fragment or Activity of your login / register page (I am not sure if it is <code>videologreg</code>):</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class videologreg extends AppCompatActivity {\n    private VideoView mVideoView;\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        // I guess you should have setContentView() elsewhere, and the View should be the first mentioned xml, I believe\n        // to play a video on the login background\n        // You should first retrieve the included layout with the ID first, then further access the VideoView inside the included layout\n        mVideoView = (VideoView) findViewById(R.id.videoLayout).findViewById(R.id.bgVideoView);\n\n        Uri uri = Uri.parse(&quot;android.resource://&quot;+getPackageName()+&quot;/&quot;+R.raw.asf);\n        mVideoView.setVideoURI(uri);\n        mVideoView.start();\n        mVideoView.setOnPreparedListener(mediaPlayer -&gt; mediaPlayer.setLooping(true));\n    }\n}\n</code></pre>\n"}],"owner":{"user_id":21288859,"display_name":"Lord V"},"view_count":60,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678223120,"question_id":75667160,"body":"<p>I want to put on my application a background video on the login/register page</p>\n<p>I have made videobg.xml layout</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;RelativeLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;&gt;\n\n    &lt;VideoView\n        android:id=&quot;@+id/bgVideoView&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:fitsSystemWindows=&quot;true&quot;\n        android:keepScreenOn=&quot;true&quot; /&gt;\n\n&lt;/RelativeLayout&gt;\n</code></pre>\n<p>after that I made videologreg.java</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class videologreg extends AppCompatActivity {\n    private VideoView mVideoView;\n    protected void onCreate(Bundle savedInstanceState) {\n        super.onCreate(savedInstanceState);\n        //to play a video on the login background\n        mVideoView = (VideoView) findViewById(R.id.bgVideoView);\n\n\n\n        Uri uri = Uri.parse(&quot;android.resource://&quot;+getPackageName()+&quot;/&quot;+R.raw.asf);\n        mVideoView.setVideoURI(uri);\n        mVideoView.start();\n\n        mVideoView.setOnPreparedListener(mediaPlayer -&gt; mediaPlayer.setLooping(true));\n\n\n\n\n    }\n}\n</code></pre>\n<p>and finally I'm in the register login layout</p>\n<pre class=\"lang-xml prettyprint-override\"><code>    &lt;RelativeLayout\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;match_parent&quot;\n        android:orientation=&quot;vertical&quot;&gt;\n        &lt;include layout=&quot;@layout/videopozadina&quot; /&gt;\n</code></pre>\n<p>however the video does not play at all so I would like your help, thanks in advance.</p>\n<p>I have tried all the above things but unfortunately it doesn't work</p>\n<p>About black screen what i got</p>\n<p><a href=\"https://i.stack.imgur.com/24s0n.jpg\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/24s0n.jpg\" alt=\"what i got\" /></a></p>\n"},{"tags":["java","android","xml","android-studio","gridview"],"answers":[{"owner":{"user_id":17779236,"display_name":"Waqar Ahmed"},"up_vote_count":0,"is_accepted":false,"creation_date":1678181936,"answer_id":75660207,"body":"<p>You can use the recycler view for this purpose and set it's layout as Grid layout manager</p>\n<p>simply add the  recycler view dependancy</p>\n<pre><code>implementation &quot;androidx.recyclerview:recyclerview:1.2.1&quot;\n</code></pre>\n<p>Just create a new activity and test this example code\n<a href=\"https://abhiandroid.com/materialdesign/recyclerview-gridview.html\" rel=\"nofollow noreferrer\">https://abhiandroid.com/materialdesign/recyclerview-gridview.html</a></p>\n"}],"owner":{"user_id":20127730,"display_name":"Mr_Milky"},"view_count":63,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678181329,"question_id":75660130,"body":"<p>How to show all installed apps in a grid view,\nHow can I display a list of app icons in a gridview</p>\n<p>MainActivity:</p>\n<pre><code>    import android.content.Context;\n    import android.content.DialogInterface;\n    import android.content.Intent;\n    import android.content.pm.ApplicationInfo;\n    import android.content.pm.PackageInfo;\n    import android.content.pm.PackageManager;\n    import android.graphics.drawable.Drawable;\n    import android.net.Uri;\n    import android.os.Bundle;\n    import android.view.LayoutInflater;\n    import android.view.View;\n    import android.view.ViewGroup;\n    import android.widget.AdapterView;\n    import android.widget.BaseAdapter;\n    import android.widget.GridView;\n    import android.widget.ImageView;\n    import android.widget.ListAdapter;\n    import android.widget.ListView;\n    import android.widget.TextView;\n    import android.widget.Toast;\n    \n    import androidx.appcompat.app.AlertDialog;\n    import androidx.appcompat.app.AppCompatActivity;\n    \n    import java.util.ArrayList;\n    import java.util.List;\n    \n    public class MainActivity extends AppCompatActivity {\n    \n        private List&lt;AppList&gt; installedApps;\n        private AppAdapter installedAppAdapter;\n        ListView userInstalledApps;\n    \n        @Override\n        protected void onCreate(Bundle savedInstanceState) {\n            super.onCreate(savedInstanceState);\n            setContentView(R.layout.activity_main);\n    \n            userInstalledApps = (ListView) findViewById(R.id.installed_app_list);\n    \n            installedApps = getInstalledApps();\n            installedAppAdapter = new AppAdapter(MainActivity.this, installedApps);\n            userInstalledApps.setAdapter(installedAppAdapter);\n            userInstalledApps.setOnItemClickListener(new AdapterView.OnItemClickListener() {\n                @Override\n                public void onItemClick(AdapterView&lt;?&gt; adapterView, View view, final int i, long l) {\n    \n                    String[] colors = {&quot; Open App&quot;, &quot; App Info&quot;};\n                    AlertDialog.Builder builder = new AlertDialog.Builder(MainActivity.this);\n                    builder.setTitle(&quot;Choose Action&quot;)\n                            .setItems(colors, new DialogInterface.OnClickListener() {\n                                public void onClick(DialogInterface dialog, int which) {\n                                    // The 'which' argument contains the index position of the selected item\n                                    if (which==0){\n                                        Intent intent = getPackageManager().getLaunchIntentForPackage(installedApps.get(i).packages);\n                                        if(intent != null){\n                                            startActivity(intent);\n                                        }\n                                        else {\n                                            Toast.makeText(MainActivity.this, installedApps.get(i).packages + &quot; Error, Please Try Again...&quot;, Toast.LENGTH_SHORT).show();\n                                        }\n                                    }\n                                    if (which==1){\n                                        Intent intent = new Intent(android.provider.Settings.ACTION_APPLICATION_DETAILS_SETTINGS);\n                                        intent.setData(Uri.parse(&quot;package:&quot; + installedApps.get(i).packages));\n                                        Toast.makeText(MainActivity.this, installedApps.get(i).packages, Toast.LENGTH_SHORT).show();\n                                        startActivity(intent);\n                                    }\n                                }\n                            });\n                    builder.show();\n    \n                }\n            });\n    \n            //Total Number of Installed-Apps(i.e. List Size)\n            String  abc = userInstalledApps.getCount()+&quot;&quot;;\n            TextView countApps = (TextView)findViewById(R.id.countApps);\n            countApps.setText(&quot;Total Installed Apps: &quot;+abc);\n            Toast.makeText(this, abc+&quot; Apps&quot;, Toast.LENGTH_SHORT).show();\n    \n        }\n    \n        private List&lt;AppList&gt; getInstalledApps() {\n            PackageManager pm = getPackageManager();\n            List&lt;AppList&gt; apps = new ArrayList&lt;AppList&gt;();\n            List&lt;PackageInfo&gt; packs = getPackageManager().getInstalledPackages(0);\n            //List&lt;PackageInfo&gt; packs = getPackageManager().getInstalledPackages(PackageManager.GET_PERMISSIONS);\n            for (int i = 0; i &lt; packs.size(); i++) {\n                PackageInfo p = packs.get(i);\n                if ((!isSystemPackage(p))) {\n                    String appName = p.applicationInfo.loadLabel(getPackageManager()).toString();\n                    Drawable icon = p.applicationInfo.loadIcon(getPackageManager());\n                    String packages = p.applicationInfo.packageName;\n                    apps.add(new AppList(appName, icon, packages));\n                }\n            }\n            return apps;\n        }\n    \n        private boolean isSystemPackage(PackageInfo pkgInfo) {\n            return (pkgInfo.applicationInfo.flags &amp; ApplicationInfo.FLAG_SYSTEM) != 0;\n        }\n    \n        public class AppAdapter extends BaseAdapter {\n    \n            public LayoutInflater layoutInflater;\n            public List&lt;AppList&gt; listStorage;\n    \n            public AppAdapter(Context context, List&lt;AppList&gt; customizedListView) {\n                layoutInflater =(LayoutInflater)context.getSystemService(Context.LAYOUT_INFLATER_SERVICE);\n                listStorage = customizedListView;\n            }\n    \n            @Override\n            public int getCount() {\n                return listStorage.size();\n            }\n    \n            @Override\n            public Object getItem(int position) {\n                return position;\n            }\n    \n            @Override\n            public long getItemId(int position) {\n                return position;\n            }\n    \n            @Override\n            public View getView(int position, View convertView, ViewGroup parent) {\n    \n                ViewHolder listViewHolder;\n                if(convertView == null){\n                    listViewHolder = new ViewHolder();\n                    convertView = layoutInflater.inflate(R.layout.installed_app_list, parent, false);\n    \n                    listViewHolder.textInListView = (TextView)convertView.findViewById(R.id.list_app_name);\n                    listViewHolder.imageInListView = (ImageView)convertView.findViewById(R.id.app_icon);\n                    listViewHolder.packageInListView=(TextView)convertView.findViewById(R.id.app_package);\n                    listViewHolder.GridView = (GridView)convertView.findViewById(R.id.gridview);\n    \n                    convertView.setTag(listViewHolder);\n                }else{\n                    listViewHolder = (ViewHolder)convertView.getTag();\n                }\n                listViewHolder.textInListView.setText(listStorage.get(position).getName());\n                listViewHolder.imageInListView.setImageDrawable(listStorage.get(position).getIcon());\n                listViewHolder.packageInListView.setText(listStorage.get(position).getPackages());\n     //           listViewHolder.GridView.setAdapter((ListAdapter) listStorage.get(position).getIcon());\n    \n                return convertView;\n            }\n    \n            class ViewHolder{\n                public GridView GridView;\n                TextView textInListView;\n                ImageView imageInListView;\n                TextView packageInListView;\n    \n            }\n        }\n    \n        public class AppList {\n            private String name;\n            Drawable icon;\n            private String packages;\n            public AppList(String name, Drawable icon, String packages) {\n                this.name = name;\n                this.icon = icon;\n                this.packages = packages;\n            }\n            public String getName() {\n                return name;\n            }\n            public Drawable getIcon() {\n                return icon;\n            }\n            public String getPackages() {\n                return packages;\n            }\n    \n        }\n        }\n</code></pre>\n<p>activity_main.xml :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:app=&quot;http://schemas.android.com/apk/res-auto&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;match_parent&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:background=&quot;@drawable/backround&quot;\n    android:orientation=&quot;vertical&quot;\n    tools:context=&quot;.MainActivity&quot;&gt;\n\n    &lt;TextView\n        android:id=&quot;@+id/countApps&quot;\n        android:text=&quot;Count: &quot;\n        android:padding=&quot;5dp&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot; /&gt;\n    &lt;ListView\n        android:id=&quot;@+id/installed_app_list&quot;\n        android:layout_width=&quot;match_parent&quot;\n        android:layout_height=&quot;wrap_content&quot; /&gt;\n\n    &lt;GridView xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n        android:id=&quot;@+id/gridview&quot;\n        android:layout_width=&quot;fill_parent&quot;\n        android:layout_height=&quot;fill_parent&quot;\n        android:columnWidth=&quot;90dp&quot;\n        android:numColumns=&quot;auto_fit&quot;\n        android:verticalSpacing=&quot;10dp&quot;\n        android:horizontalSpacing=&quot;10dp&quot;\n        android:stretchMode=&quot;columnWidth&quot;\n        android:gravity=&quot;center&quot;\n        /&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>installed_app_list.xml :</p>\n<pre><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;utf-8&quot;?&gt;\n&lt;LinearLayout xmlns:android=&quot;http://schemas.android.com/apk/res/android&quot;\n    xmlns:tools=&quot;http://schemas.android.com/tools&quot;\n    android:layout_width=&quot;wrap_content&quot;\n    android:layout_height=&quot;match_parent&quot;\n    android:orientation=&quot;vertical&quot;&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;100dp&quot;\n        android:layout_height=&quot;70dp&quot;\n        android:orientation=&quot;horizontal&quot;\n        android:padding=&quot;15dp&quot;&gt;\n\n        &lt;ImageView\n            android:id=&quot;@+id/app_icon&quot;\n            android:layout_width=&quot;70dp&quot;\n            android:layout_height=&quot;43dp&quot; /&gt;\n\n        &lt;LinearLayout\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;wrap_content&quot;\n            android:layout_marginStart=&quot;3dp&quot;\n            android:layout_marginLeft=&quot;3dp&quot;\n            android:descendantFocusability=&quot;beforeDescendants&quot;\n            android:orientation=&quot;vertical&quot;&gt;\n\n            &lt;TextView\n                android:id=&quot;@+id/app_package&quot;\n                android:layout_width=&quot;match_parent&quot;\n                android:layout_height=&quot;wrap_content&quot;\n                android:text=&quot;App Package Name&quot;\n                android:textSize=&quot;0dp&quot; /&gt;\n\n        &lt;/LinearLayout&gt;\n\n    &lt;/LinearLayout&gt;\n\n    &lt;LinearLayout\n        android:layout_width=&quot;200dp&quot;\n        android:layout_height=&quot;wrap_content&quot;\n        android:orientation=&quot;horizontal&quot;\n        android:padding=&quot;15dp&quot;&gt;\n\n        &lt;TextView\n            android:id=&quot;@+id/list_app_name&quot;\n            android:layout_width=&quot;match_parent&quot;\n            android:layout_height=&quot;25dp&quot;\n            android:lineSpacingExtra=&quot;0sp&quot;\n            android:textSize=&quot;15dp&quot;\n            android:textStyle=&quot;bold&quot; /&gt;\n\n    &lt;/LinearLayout&gt;\n\n&lt;/LinearLayout&gt;\n</code></pre>\n<p>Can you give me some source code of a simple grid view?\ni want all installed app in a grid view</p>\n<p>Thankyou .............................................</p>\n"},{"tags":["python","java","jython","jython-2.7"],"comments":[{"owner":{"user_id":407651,"display_name":"mzjn"},"edited":false,"comment_id":133515755,"body":"Reported here: <a href=\"https://github.com/jython/jython/issues/236\" rel=\"nofollow noreferrer\">github.com/jython/jython/issues/236</a>"}],"owner":{"user_id":21345856,"display_name":"Peter Wu"},"view_count":60,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678151762,"question_id":75657238,"body":"<p>I am trying to read from a file: test1.txt\nthe file has only one line:  abcdefghigk</p>\n<pre><code>java -jar jython-standalone-2.7.3.jar\nJython 2.7.3 (tags/v2.7.3:5f29801fe, Sep 10 2022, 18:52:49)\n[Java HotSpot(TM) 64-Bit Server VM (Oracle Corporation)] on java1.8.0_351\nType &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.\n\n&gt;&gt;&gt; from java.io import FileReader\nfrom java.io import FileReader\n&gt;&gt;&gt; import jarray\nimport jarray\n&gt;&gt;&gt; reader = FileReader('./test1.txt')\nreader = FileReader('./test1.txt')\n&gt;&gt;&gt; chars = jarray.zeros(2048, 'c')\nchars = jarray.zeros(2048, 'c')\n&gt;&gt;&gt; num = reader.read(chars)\nnum = reader.read(chars)\nTraceback (most recent call last):\n  File &quot;&lt;stdin&gt;&quot;, line 1, in &lt;module&gt;\nTypeError: read(): 1st arg can't be coerced to java.nio.CharBuffer, char[]\n&gt;&gt;&gt; \n</code></pre>\n<p>If I use the older jython , it works</p>\n<pre><code>[pzwu@pzwu-1 python]$ java -jar jython-standalone-2.7.2.jar \nJython 2.7.2 (v2.7.2:925a3cc3b49d, Mar 21 2020, 10:03:58)\n[Java HotSpot(TM) 64-Bit Server VM (Oracle Corporation)] on java1.8.0_351\nType &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.\n\n&gt;&gt;&gt; from java.io import FileReader\nfrom java.io import FileReader\n&gt;&gt;&gt; import jarray\nimport jarray\n&gt;&gt;&gt; reader = FileReader('./test1.txt')\nreader = FileReader('./test1.txt')\n&gt;&gt;&gt; chars = jarray.zeros(2048, 'c')\nchars = jarray.zeros(2048, 'c')\n&gt;&gt;&gt; num = reader.read(chars)\nnum = reader.read(chars)\n&gt;&gt;&gt; print num\nprint num\n13\n</code></pre>\n<p>Not sure what's going from 2.7.2 to 2.7.3.   Thanks</p>\n<p>Tried with jdk11, same result..    I guess it is a 2.7.3 bug?</p>\n"},{"tags":["java","android","couchbase"],"comments":[{"owner":{"user_id":40015,"display_name":"Matthew Groves"},"edited":false,"comment_id":133470843,"body":"Are you trying to connect to a Couchbase Server or are you trying to embed Couchbase Lite in a Java app?"},{"owner":{"user_id":40015,"display_name":"Matthew Groves"},"edited":false,"comment_id":133470848,"body":"If you&#39;re using Server, what version are you using?"},{"owner":{"user_id":17162030,"display_name":"Juser"},"edited":false,"comment_id":133471022,"body":"It&#39;s CouchbaseLite for now"},{"owner":{"user_id":40015,"display_name":"Matthew Groves"},"edited":false,"comment_id":133502576,"body":"I&#39;m no Java developer, FYI, but I&#39;m a little confused. You&#39;re importing <code>com.couchbase.client.java.*</code> but your bundle file is referencing <code>com.couchbase.lite...</code>. So I think you&#39;re trying to import the Server SDK libraries, but you actually want the Couchbase Lite SDK libraries. Have you gone through the Install docs for Couchbase Lite for Java? <a href=\"https://docs.couchbase.com/couchbase-lite/current/java/gs-install.html\" rel=\"nofollow noreferrer\">docs.couchbase.com/couchbase-lite/current/java/gs-install.ht&zwnj;&#8203;ml</a>"}],"owner":{"user_id":17162030,"display_name":"Juser"},"view_count":25,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678131044,"question_id":75655059,"body":"<p>I'm trying to build a project using couchbase. The thing is, the system cannot even locate the package. Thus when I try</p>\n<pre><code>import com.couchbase.client.java.Cluster;\n// or any other of the below\n\nimport com.couchbase.client.java.CouchbaseCluster;\nimport com.couchbase.client.java.Bucket;\n\nimport com.couchbase.client.java.document.JsonDocument;\nimport com.couchbase.client.java.document.json.JsonObject;\n</code></pre>\n<p>it says couchbase can't be located.</p>\n<p>In build.gradle file I've tried including (among other different) these lines</p>\n<pre><code>implementation 'com.couchbase.lite:couchbase-lite-android-ee:3.0.0'\nimplementation 'com.couchbase.lite:couchbase-lite-android:2.0.0'\n// To access the database through HTTP (often used for hybrid development and peer-to-peer sync).\nimplementation 'com.couchbase.lite:couchbase-lite-java-listener:1.4.4'\n// To use ForestDB as the storage type.\nimplementation 'com.couchbase.lite:couchbase-lite-android-forestdb:1.4.4'\n// To enable encryption on SQLite databases.\nimplementation 'com.couchbase.lite:couchbase-lite-android-sqlcipher:1.4.4'\nimplementation 'com.couchbase.lite:couchbase-lite-java-javascript:1.2.1'\nimplementation 'com.couchbase.lite:couchbase-lite-android:1.1.0'\n</code></pre>\n<p>I found these on stackoverflow. However, it seems that they no longer work / deprecated. I wonder if there is still a way to implement couchbase?</p>\n"},{"tags":["java","apache-kafka","memory-leaks","spring-kafka","bytebuffer"],"owner":{"user_id":15821295,"display_name":"Taliebram"},"view_count":167,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678107340,"question_id":75651128,"body":"<p>We have a service that listens on an mqtt channel for measurements. After some conversions these measurements get put on kafka. This all works fairly well, but there is a memory leak, somewhere, which I can't pinpoint.</p>\n<p>The memory profile of my application can be seen here:</p>\n<p><a href=\"https://i.stack.imgur.com/kIDo1.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/kIDo1.png\" alt=\"Memory leak over time\" /></a></p>\n<p>The yellow line corresponds to the direct byte buffer pool.</p>\n<p>After investigating the heap dump with MAT and applying this OQL query: <code>SELECT x AS ByteBuffer, x.capacity AS Capacity, x.limit AS Limit, x.mark AS Mark, x.position AS Position FROM java.nio.DirectByteBuffer x WHERE ((x.capacity &gt; (1024 * 1024)) and (x.cleaner != null))</code> we see that there are roughly 400 direct bytebuffers, each with a capacity of roughly 4MB.</p>\n<p><a href=\"https://i.stack.imgur.com/KXsoG.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/KXsoG.png\" alt=\"OQL response\" /></a></p>\n<p>If you follow this to the GC root you see that it is used by a kafka producer:\n<a href=\"https://i.stack.imgur.com/EBd6K.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/EBd6K.png\" alt=\"GC root\" /></a></p>\n<p>This led me to applying this OQL query: <code>select * from org.apache.kafka.common.utils.KafkaThread</code> which returns the following response:\n<a href=\"https://i.stack.imgur.com/1RG8s.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/1RG8s.png\" alt=\"OQL Kafka threads response\" /></a></p>\n<p>Which seems like a logical response, however if you dive a bit deeper into the contents of the kafka producer you see that it is keeping a lot of direct byte buffers:\n<a href=\"https://i.stack.imgur.com/hMXDO.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/hMXDO.png\" alt=\"kafka thread expand\" /></a></p>\n<p>The producer gets made here:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@Component\n@RequiredArgsConstructor\npublic class BxKafkaProducerFactory {\n\n    private final KafkaProperties kafkaProperties;\n\n    public &lt;K, V&gt; Producer&lt;K, V&gt; getProducer() {\n        return new KafkaProducer&lt;&gt;(getKafkaProducerProperties());\n    }\n}\n</code></pre>\n<p>We use default settings for almost all things. Whe use <code>acks=all</code>, the lingering time is <code>100ms</code>, security protocol <code>SASL_PLAINTEXT</code>, <code>PLAIN</code> for the saslMechanism,KafkaAvroSerializer for the key and value serializer, compression type of <code>snappy</code>. The same settings we use in different (relatable) services where we don't see this memory issue.</p>\n<p>We just have 3 producers that get created on startup, and removed on shutdown, so it is not that we are leaking producers (I checked this by adding a log statement on the producer creation). It looks more like the producers themselves are leaking memory.</p>\n<p>Does anybody have any idea what could cause this? Or have any good pointers on how to debug this next? As you can see in the first image the memory is steadily increasing and it doesn't come down even after a week or so.</p>\n<p>EDIT:</p>\n<p>After some more debugging and following all the byte buffers to their gc root, we see this progress:</p>\n<pre><code>15:23\nTotal 18:\nGlobalStream: 1\nHearthBeat: 1\nJava Thread: 1\nNio FastThread: 5\nProducer 1: 1\nProducer 2: 2\nProducer 3: 2\nCleaner: 5\n\n16:04\nTotal 23:\nGlobalStream: HearthBeat 1\nJava Thread: 1\nNio FashThread: 6\nProducer 1: 0\nProducer 2: 8\nProdcuer 3: 2\nCleaner: 4\n\n17:04\nTotal 25:\nGlobalStream: HearthBeat 2\nJava Thread: 1\nNio FashThread: 7\nProducer 1: 2\nProducer 2: 8\nProdcuer 3: 4\nCleaner: 0\n</code></pre>\n<p>We clearly see the number of bytebuffers of the kafka producer increasing over time. This also matches to the jvm metrics we catch:\n<a href=\"https://i.stack.imgur.com/LASGZ.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/LASGZ.png\" alt=\"DirectByteBuffer bumps\" /></a></p>\n<p>Thanks in advance!</p>\n<p>PS: I have also investigated it with jeprof and jemalloc, but couldn't find anomalies there.</p>\n"},{"tags":["java","oracle","lambda"],"comments":[{"owner":{"user_id":37213,"display_name":"duffymo"},"edited":false,"comment_id":133465247,"body":"I&#39;m betting the problem is the JDBC driver version for Oracle.  It doesn&#39;t matter what version of JDK your code uses if it isn&#39;t updated to accept lambdas.  JDK 8 is long past its support life.  You should be using JDK 17.  Upgrade your driver JAR, too."},{"owner":{"user_id":1898563,"display_name":"Michael"},"edited":false,"comment_id":133465277,"body":"@duffymo &quot;<i>JDK 8 is long past its support life</i>&quot; Why do people keep saying this here? It&#39;s supported for 7 more years."},{"owner":{"user_id":1509264,"display_name":"MT0"},"edited":false,"comment_id":133465305,"body":"@duffymo The OP is using Java embedded within the Oracle database and is <b>NOT</b> connecting to the Oracle database via Java and JDBC. Oracle 12.1 comes with Java 6 embedded and supports upgrading to Java 7. I haven&#39;t yet found the support matrix for Oracle 12.2 (however, the OP states that their embedded Java version is 1.8.0_271)."},{"owner":{"user_id":102937,"display_name":"Robert Harvey"},"edited":false,"comment_id":133465336,"body":"Try putting parentheses around your lambda variable , as in <code>(i_s) -&gt; ....</code>"},{"owner":{"user_id":37213,"display_name":"duffymo"},"edited":false,"comment_id":133465358,"body":"<a href=\"https://endoflife.date/java\" rel=\"nofollow noreferrer\">endoflife.date/java</a>.  I would not use this as an argument for staying on JDK 8.  Others can choose as they wish.  I&#39;d only go to production on LTS versions myself."},{"owner":{"user_id":1509264,"display_name":"MT0"},"edited":false,"comment_id":133465401,"body":"@duffymo That is (mostly) irrelevant as you cannot just upgrade the embedded version of Java to any later version. There are a very limited number of versions that you can upgrade to as those are the version supported by the containing database. (However, you can make the argument that the OP should upgrade their database version.)"},{"owner":{"user_id":10726998,"display_name":"vasu2005s"},"edited":false,"comment_id":133465446,"body":"@MT0 from Java Developer&#39;s Guide for Release 12.2: 1.7 Support for Java 8 Oracle Database 12c Release 2 (12.2.0.1) provides support for Java 8, which enables portability of Java applications and libraries, and compliance with the latest Java standards."},{"owner":{"user_id":37213,"display_name":"duffymo"},"edited":false,"comment_id":133465476,"body":"Yes, that&#39;s my argument.  I understand what you&#39;re saying.  The mindset that says &quot;I&quot;m fine on JDK8&quot; appears to be affecting the choice of sticking with Oracle 12.2 when the current version is 21.1.0.  I think it&#39;s harmful."},{"owner":{"user_id":10726998,"display_name":"vasu2005s"},"edited":false,"comment_id":133465547,"body":"@Robert Harvey No luck. Parentheses or not it&#39;s still valid lambda syntax so I had not much expectations anyway :)"},{"owner":{"user_id":1509264,"display_name":"MT0"},"edited":false,"comment_id":133465726,"body":"It works in Oracle 18.4.0.0 with Java 1.8.0_161 <a href=\"https://dbfiddle.uk/Xz5vdhLL\" rel=\"nofollow noreferrer\">fiddle</a>."},{"owner":{"user_id":10726998,"display_name":"vasu2005s"},"edited":false,"comment_id":133466203,"body":"@duffymo Migration database to new release is not arbitrary choice. It is large project requiring resources from bussiness. Whole codebase much be tested on same hardware with production workload together with neighboring systems."},{"owner":{"user_id":37213,"display_name":"duffymo"},"edited":false,"comment_id":133466517,"body":"Yes, I get it.  You and your business need to come to grips with the risk you incur by doing nothing.  You are being irresponsible and lazy.  I&#39;m sure the folks who maintain your servers keep up with operating system versions.  The applications that run on them have a similar responsibility to stay current."},{"owner":{"user_id":10726998,"display_name":"vasu2005s"},"edited":false,"comment_id":133467115,"body":"@duffymo Matter here is not in coming to grips, its approval testing budget from bussiness. OS version on servers not changing without testing also. Same for hardware before you ask :)"},{"owner":{"user_id":37213,"display_name":"duffymo"},"edited":false,"comment_id":133467370,"body":"They decide how to spend their money.  Your job is to inform them of the risks and keep them up to date.  They will be the ones with the ink dot portrait on the cover of the WSJ if there are problems."},{"owner":{"user_id":10726998,"display_name":"vasu2005s"},"edited":false,"comment_id":133941310,"body":"By the way I found workaround, calling separate JVM using RMI. It works with latest Java 20."}],"owner":{"user_id":10726998,"display_name":"vasu2005s"},"view_count":66,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678098165,"question_id":75649618,"body":"<p>Using lambda in Oracle 12.2 embedded Java gives error ORA-29536, do not recognize -&gt; symbol. Why? Java version is 1.8.0_271 checked by dbms_java.get_jdk_version. Lambdas are supported in this Java version.</p>\n<p>I tried installing Oracle Linux on virtual machine and Oracle 12.2 on it, same result. Here is minimal code I try, it works in Oracle 19 and jdoodle.com with Java 8.</p>\n<pre class=\"lang-sql prettyprint-override\"><code>create or replace and compile java source named lambda_test_min as\npublic class MyClass2 \n{\n\n  interface i_add_function\n  {\n    String add ( String i_s ) ;\n  }\n  \n  public static void out_call()\n  {\n    main( null ) ; \n  }\n\n  public static void main(String args[]) \n  {\n    i_add_function v_add_function = new i_add_function() \n                                    {\n                                      public String add ( String i_s2 ) \n                                      {\n                                        return &quot;Added text by anonimous class: &quot; + i_s2 ;\n                                      }\n                                    };\n                                          \n    v_add_function = i_s -&gt; &quot;Added text by lambda: &quot; + i_s ;                                          \n\n    System.out.println ( v_add_function.add ( &quot;added text.&quot;  ) ) ;\n    System.out.println( &quot;java version = &quot; + System.getProperty(&quot;java.version&quot;) );\n  }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","file","elasticsearch","file-upload"],"comments":[{"owner":{"user_id":175554,"display_name":"ozkanpakdil"},"edited":false,"comment_id":133549564,"body":"have you tried bulk insert <a href=\"https://stackoverflow.com/a/51868683/175554\">stackoverflow.com/a/51868683/175554</a> and <a href=\"https://www.elastic.co/guide/en/elasticsearch/client/java-api-client/current/indexing-bulk.html\" rel=\"nofollow noreferrer\">elastic.co/guide/en/elasticsearch/client/java-api-client/&hellip;</a>"}],"owner":{"user_id":19624744,"display_name":"BEY MEHREZ"},"view_count":86,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678097671,"question_id":75649531,"body":"<p>So I am building a Spring Boot rest api that it takes a file ( Multipart file ) ( and it is a log file ) as an argument and saves its content in a unique  elasticsearch index ! Each line of the file will be in a document. so my plan was :\n1- create the index.\n2- read each line of the file\n3- save this line in the index.</p>\n<p>the version elasticsearch  that I am using is : 8.6</p>\n<p><strong>the problem :</strong>  I am dealing with big files ( their size can reach to 200mb) and when I tested my code, it took hours just for an average file ( size way too smaller than 100mb )</p>\n<p>this is my code ( I used the buffer reader and elasticsearch java api client ) :</p>\n<pre><code>// Creating the index \nString indexName = &quot;newIndex&quot;;\n\nCreateIndexResponse createResponse =client.indices().create(\n                new CreateIndexRequest.Builder()\n                .index(indexName)\n                .build()\n                );\n// read each line and save it \ntry (BufferedReader br = new BufferedReader(new InputStreamReader(file.getInputStream()))){\n            \n            String line =&quot;&quot;;\n            while((line = br.readLine()) != null) {\n                if (!line.trim().isEmpty()) {\n                    LogFile log = new LogFile(); // the code is below this\n                    log.setMessage(line);\n                    IndexResponse resp = client.index(i -&gt; i\n                            .index(indexName)\n                            .document(log));\n                        } \n            }\n}\n</code></pre>\n<pre><code>// the code of the class LogFile \n@Document(indexName = &quot;log-model&quot;)\n@Data\npublic class LogFile {\n\n    @Id\n    private String id;\n    \n    @Field(type = FieldType.Text)\n    private String message;\n\n}\n</code></pre>\n<p><strong>What I am looking for :</strong>  How can I improve my code ? is there a library or another tool like logstach or something that i can use to load theese type of files in a shorter time ! I ve been searching for more than one week and I didn't find anything helpful</p>\n"},{"tags":["java","udp","netty"],"comments":[{"owner":{"user_id":20174801,"display_name":"Synopsis"},"edited":false,"comment_id":133510304,"body":"I&#39;m not sure about that framework, but you give the port 5555 <b>two</b> times for each channel and additionally a bind() function usually binds a local socket to listen. I would guess, by using bind() you force the system to use the same local port twice, which does not work.  Try using different port numbers in the bind() call and I <b>think</b> you could succeed."},{"owner":{"user_id":21324690,"display_name":"chunkynuggy"},"edited":false,"comment_id":133513438,"body":"In NIO, this should be fine because I am using the reuse_address option. I did however try to use different port numbers, however it only listens to the first channel regardless"}],"owner":{"user_id":21324690,"display_name":"chunkynuggy"},"view_count":228,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678096793,"question_id":75649400,"body":"<p>I have a UDP Multicast application which will be hardcoded to listen to specific groups of multicasts addresses. However, while I am able to have one NioDatagramChannel that joins multiple groups, my code cannot handle multiple NioDatagramChannels that listens to separate groups (somewhat like Java NIO selector). The following is the code I wrote:</p>\n<pre><code>public class NettyTest implements Runnable {\n    public static void main(String[] args){\n        new NettyTest().run();\n    }\n    @Override\n    public void run() {\n        MulticastHandler handler = new MulticastHandler();\n        MulticastHandler handler2 = new MulticastHandler();\n        EventLoopGroup group = new NioEventLoopGroup();\n        try{\n            UDPChannel channel = new UDPChannel(5555, &quot;eth0&quot;, &quot;239.1.1.1&quot;);\n            UDPChannel channel2 = new UDPChannel(5556, &quot;eth0&quot;, &quot;225.1.1.1&quot;);\n\n            Bootstrap b = new Bootstrap();\n            NetworkInterface ni = NetworkInterface.getByName(&quot;eth0&quot;);\n            b.group(group)\n                    .channel(NioDatagramChannel.class)\n                    .option(ChannelOption.SO_REUSEADDR, true)\n                    .option(ChannelOption.IP_MULTICAST_IF, ni)\n                    .option(ChannelOption.SO_RCVBUF, 1500 * 200)\n                    .handler(new ChannelInitializer&lt;NioDatagramChannel&gt;() {\n                        @Override\n                        protected void initChannel(NioDatagramChannel nioDatagramChannel) throws Exception {\n                            nioDatagramChannel.pipeline().addLast(new MulticastHandler());  //&lt;------------- modification\n                        }\n                    });\n\n            System.out.println(channel.getMULTICAST_STRING()+&quot; &quot;+channel2.getMULTICAST_STRING());\n\n            AttributeKey&lt;String&gt; markerKey = AttributeKey.valueOf(&quot;Marker&quot;);\n            NioDatagramChannel ch = (NioDatagramChannel)b.bind(5555).sync().channel();\n            ch.attr(markerKey).set(channel.getMULTICAST_STRING());\n            ch.joinGroup(new InetSocketAddress(&quot;239.1.1.1&quot;, 5555), ni).sync();\n            group.register(ch);\n\n            NioDatagramChannel ch1 =(NioDatagramChannel)b.bind(5556).sync().channel();\n            ch1.attr(markerKey).set(channel2.getMULTICAST_STRING());\n            ch1.joinGroup(new InetSocketAddress(&quot;225.1.1.1&quot;, 5556), ni).sync();\n            group.register(ch1);\n\n//            ch.closeFuture().await();\n//            ch1.closeFuture().await();\n            ch.closeFuture();\n            ch1.closeFuture();\n        } catch (InterruptedException | SocketException e) {\n            e.printStackTrace();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n\nclass MulticastHandler extends SimpleChannelInboundHandler&lt;DatagramPacket&gt;{\n    private MoldUdpHeader moldUdpHeader = new MoldUdpHeader();\n    AttributeKey&lt;String&gt; markerKey = AttributeKey.valueOf(&quot;Marker&quot;);\n    @Override\n    protected void channelRead0(ChannelHandlerContext channelHandlerContext, DatagramPacket datagramPacket) throws Exception {\n        moldUdpHeader.decode(datagramPacket.content().nioBuffer(), 0);\n        System.out.println(channelHandlerContext.channel().attr(markerKey).get()+&quot; &quot;+moldUdpHeader.getSeqNum());\n    }\n}\n</code></pre>\n<p>I have tried the above but it gives a <code>io.netty.channel.StacklessClosedChannelException at io.netty.channel.AbstractChannel$AbstractUnsafe.ensureOpen(ChannelPromise)(Unknown Source)</code>. What is the proper way to be able to process both of these channels? I do not want to combine both into one channel, because the messages on both channels can have same ID but different values (values are specific for that channel).</p>\n<p>Edit: I just found out that either Netty or Log4j (i m not sure which) has been suppressing the console output for the errors that has happened with the sample code above. I found an inconspicuous log file which contains all the error messages Netty has been writing, even though the above does not use loggers at all. The following is the error logs. I have checked up some of the errors and modified my code above (it turns out each channel needs a new handle)</p>\n<pre><code>2023-03-15 13:56:50,688 WARN  method: [main] bootstrap.AbstractBootstrap (AbstractBootstrap.java:467) - Failed to set channel option 'IP_MULTICAST_IF' with value 'name:eth0 (eth0)' for channel '[id: 0xf46f62a3]'\nio.netty.channel.ChannelException: java.lang.reflect.InvocationTargetException\n    at io.netty.channel.socket.nio.NioDatagramChannelConfig.setOption0(NioDatagramChannelConfig.java:206) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.channel.socket.nio.NioDatagramChannelConfig.setNetworkInterface(NioDatagramChannelConfig.java:161) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.channel.socket.DefaultDatagramChannelConfig.setOption(DefaultDatagramChannelConfig.java:126) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.channel.socket.nio.NioDatagramChannelConfig.setOption(NioDatagramChannelConfig.java:216) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.setChannelOption(AbstractBootstrap.java:463) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.setChannelOptions(AbstractBootstrap.java:455) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.Bootstrap.init(Bootstrap.java:264) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.initAndRegister(AbstractBootstrap.java:311) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.doBind(AbstractBootstrap.java:272) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.bind(AbstractBootstrap.java:268) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.bind(AbstractBootstrap.java:246) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at udp.NettyTest.run(NettyTest.java:52) ~[classes/:?]\n    at udp.NettyTest.main(NettyTest.java:24) ~[classes/:?]\nCaused by: java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_351]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_351]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_351]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_351]\n    at io.netty.channel.socket.nio.NioDatagramChannelConfig.setOption0(NioDatagramChannelConfig.java:204) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    ... 12 more\nCaused by: java.net.SocketException: No such file or directory\n    at sun.nio.ch.Net.setInterface6(Native Method) ~[?:1.8.0_351]\n    at sun.nio.ch.DatagramChannelImpl.setOption(DatagramChannelImpl.java:226) ~[?:1.8.0_351]\n    at sun.nio.ch.DatagramChannelImpl.setOption(DatagramChannelImpl.java:42) ~[?:1.8.0_351]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_351]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_351]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_351]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_351]\n    at io.netty.channel.socket.nio.NioDatagramChannelConfig.setOption0(NioDatagramChannelConfig.java:204) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    ... 12 more\n2023-03-15 13:56:50,733 WARN  method: [main] bootstrap.AbstractBootstrap (AbstractBootstrap.java:467) - Failed to set channel option 'IP_MULTICAST_IF' with value 'name:eth0 (eth0)' for channel '[id: 0x5085932f]'\nio.netty.channel.ChannelException: java.lang.reflect.InvocationTargetException\n    at io.netty.channel.socket.nio.NioDatagramChannelConfig.setOption0(NioDatagramChannelConfig.java:206) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.channel.socket.nio.NioDatagramChannelConfig.setNetworkInterface(NioDatagramChannelConfig.java:161) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.channel.socket.DefaultDatagramChannelConfig.setOption(DefaultDatagramChannelConfig.java:126) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.channel.socket.nio.NioDatagramChannelConfig.setOption(NioDatagramChannelConfig.java:216) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.setChannelOption(AbstractBootstrap.java:463) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.setChannelOptions(AbstractBootstrap.java:455) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.Bootstrap.init(Bootstrap.java:264) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.initAndRegister(AbstractBootstrap.java:311) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.doBind(AbstractBootstrap.java:272) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.bind(AbstractBootstrap.java:268) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at io.netty.bootstrap.AbstractBootstrap.bind(AbstractBootstrap.java:246) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    at udp.NettyTest.run(NettyTest.java:57) ~[classes/:?]\n    at udp.NettyTest.main(NettyTest.java:24) ~[classes/:?]\nCaused by: java.lang.reflect.InvocationTargetException\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_351]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_351]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_351]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_351]\n    at io.netty.channel.socket.nio.NioDatagramChannelConfig.setOption0(NioDatagramChannelConfig.java:204) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    ... 12 more\nCaused by: java.net.SocketException: No such file or directory\n    at sun.nio.ch.Net.setInterface6(Native Method) ~[?:1.8.0_351]\n    at sun.nio.ch.DatagramChannelImpl.setOption(DatagramChannelImpl.java:226) ~[?:1.8.0_351]\n    at sun.nio.ch.DatagramChannelImpl.setOption(DatagramChannelImpl.java:42) ~[?:1.8.0_351]\n    at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method) ~[?:1.8.0_351]\n    at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62) ~[?:1.8.0_351]\n    at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43) ~[?:1.8.0_351]\n    at java.lang.reflect.Method.invoke(Method.java:498) ~[?:1.8.0_351]\n    at io.netty.channel.socket.nio.NioDatagramChannelConfig.setOption0(NioDatagramChannelConfig.java:204) ~[netty-transport-4.1.78.Final.jar:4.1.78.Final]\n    ... 12 more\n</code></pre>\n<p>It looks like it now receives both channels packets, so thats pretty great.</p>\n<p>output:</p>\n<pre><code>239.1.1.1 225.1.1.1\n239.1.1.1 0\n225.1.1.1 0\n225.1.1.1 1\n239.1.1.1 1\n225.1.1.1 2\n239.1.1.1 2\n225.1.1.1 3\n239.1.1.1 3\n</code></pre>\n"},{"tags":["java","hibernate","quarkus","hibernate-validator"],"comments":[{"owner":{"user_id":5043585,"display_name":"Guillaume Smet"},"edited":false,"comment_id":133460012,"body":"If you have this problem in the context of Quarkus, could you open a Quarkus issue here: <a href=\"https://github.com/quarkusio/quarkus/issues\" rel=\"nofollow noreferrer\">github.com/quarkusio/quarkus/issues</a> with a small Maven reproducer? I will have a look. Thanks!"},{"owner":{"user_id":1977508,"display_name":"Furious Gamer"},"edited":false,"comment_id":133463500,"body":"@GuillaumeSmet Thanks for your response! I did not think about that this could be a quarkus related issue, but i will try to get to it ASAP! Much appreciated."}],"owner":{"user_id":1977508,"display_name":"Furious Gamer"},"view_count":70,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1678044551,"question_id":75644812,"body":"<p>I am using Hibernate validator in a Quarkus REST API project to validate entities with annotated properties after being parsed from JSON in my endpoints. Throughout the development, i came to expect that Hibernate Validator throws <code>ConstraintViolationException</code>s with a set of constraint violations resulting in responses in the following format:</p>\n<pre><code>{\n  &quot;title&quot;: &quot;Constraint Violation&quot;,\n  &quot;status&quot;: 400,\n  &quot;violations&quot;: [\n    {\n      &quot;field&quot;: &quot;createJob.arg0.sourceTableName&quot;,\n      &quot;message&quot;: &quot;Source database table name may not be blank&quot;\n    },\n    {\n      &quot;field&quot;: &quot;createJob.arg0.sourceTableName&quot;,\n      &quot;message&quot;: &quot;Source database table name should have size [1,256]&quot;\n    },\n    {\n      &quot;field&quot;: &quot;createJob.arg0.sourceDatabaseURL&quot;,\n      &quot;message&quot;: &quot;Source database URL should have size [1,256]&quot;\n    }\n  ]\n</code></pre>\n<p>}</p>\n<p>This example is for a the <code>JobRequest</code> entity with only simple data types or not having other entities nested yet. This works well and my frontend client has been programmed accordingly to expect such a response format for <strong>HTTP 400 Bad Request</strong> responses. However, i now have the case where i need to add another entity called <code>Settings</code> (with its own validation annotations etc.) as a nested property to <code>JobRequest</code>. Example:</p>\n<pre><code>@GroupSequenceProvider(JobRequestSequenceProvider.class)\npublic class JobRequest {\n    @Transient\n    private Optional&lt;Boolean&gt; useLocalSourceDatabase;\n    @Size(min = 1, max = 256, message = &quot;Source database URL should have size [{min},{max}]&quot;, groups = SourceConditionalValidation.class)\n    @URL(message = &quot;Source database connection has to be a valid URL&quot;, groups = SourceConditionalValidation.class)\n    private String sourceDatabaseURL;\n    @Size(min = 1, max = 256, message = &quot;Source database table name should have size [{min},{max}]&quot;, groups = SourceConditionalValidation.class)\n    @NotBlank(message = &quot;Source database table name may not be blank&quot;, groups = SourceConditionalValidation.class)\n    private String sourceTableName;\n\n    @Transient\n    private Optional&lt;Boolean&gt; useLocalTargetDatabase;\n    @Size(min = 1, max = 256, message = &quot;Target database URL should have size [{min},{max}]&quot;, groups = TargetConditionalValidation.class)\n    @URL(message = &quot;Target database connection has to be a valid URL&quot;, groups = TargetConditionalValidation.class)\n    private String targetDatabaseURL;\n    @Size(min = 1, max = 256, message = &quot;Target database table name should have size [{min},{max}]&quot;, groups = TargetConditionalValidation.class)\n    @NotBlank(message = &quot;Target database table name may not be blank&quot;, groups = TargetConditionalValidation.class)\n    private String targetTableName;\n\n    // Here i add settings as a nested property and force validation of it\n    @Valid\n    private Settings settings;\n\n    // get/set...\n}\n</code></pre>\n<p><em>(JobRequest + Settings entity as a nested property)</em></p>\n<p>I was expecting the same response format in cases of constraint violations of either the top level entity <code>JobRequest</code> or nested entity <code>Settings</code>, however the response format i receive for constraint violations in the nested <code>Settings</code> entity look like this:</p>\n<pre><code>{\n  &quot;objectName&quot;: &quot;JobRequest&quot;,\n  &quot;attributeName&quot;: &quot;settings.requestDelayInMiliseconds&quot;,\n  &quot;line&quot;: 1,\n  &quot;column&quot;: 470,\n  &quot;value&quot;: &quot;fsdf&quot;\n}\n</code></pre>\n<p>Not only does it have a different schema, but it is also inadequate as it always just returns ONE violation and not multiple if thats the case for the <code>Settings</code> entity. In fact, it even overrides the constraint violations in the parent entity (<code>JobRequest</code>) for the response.</p>\n<p>What is going on here? <strong>How can i get Hibernate Validator to perform the same type of validation (with according exceptions and ultimately error responses) for entites with nested entities?</strong></p>\n<hr />\n<p>Here is the <code>Settings</code> entity for reference (for which validation by itself works perfectly fine as expected with <code>ConstraintViolationException</code>s - this strange behaviour only occurs for when entities get nested):</p>\n<pre><code>@Entity\n@Table(name = &quot;settings&quot;, uniqueConstraints = { @UniqueConstraint(columnNames = {&quot;is_default&quot;}) })\npublic class Settings extends BaseEntity {\n    @NotNull\n    @Digits(fraction = 0, integer = 5)\n    @Min(value = 1)\n    @Column(name = &quot;request_limit_before_delay&quot;, nullable = false)\n    private int requestLimitBeforeDelay = 0;\n    \n    @NotNull\n    @Digits(fraction = 0, integer = 5)\n    @Min(value = 1, message = ERROR_MESSAGE)\n    @Column(name = &quot;request_delay_in_miliseconds&quot;, nullable = false)\n    private int requestDelayInMiliseconds = 0;\n\n    @Column(name = &quot;is_default&quot;, nullable = false)\n    @JsonIgnore\n    private Boolean isDefault = null;\n    // get/set...\n}\n</code></pre>\n"},{"tags":["java","scala","gradle","sbt"],"comments":[{"owner":{"user_id":5122436,"display_name":"Mikhail Ionkin"},"edited":false,"comment_id":133454239,"body":"Is it work for you with java 8? I mean, if you will have worked solution, it will be easy to migrate to new java. Why not you use SBT (1.6.0+ version)? If you use sbt, can you provide minimum reproducible example?"},{"owner":{"user_id":2992404,"display_name":"Jewels"},"edited":false,"comment_id":133461025,"body":"it works fine with java 8 and java 11, only java 17 is giving me trouble."},{"owner":{"user_id":5249621,"display_name":"Dmytro Mitin"},"edited":false,"comment_id":134225518,"body":"@Jewels Do you have any updates? Do you have reproduction?"}],"answers":[{"owner":{"user_id":5249621,"display_name":"Dmytro Mitin"},"up_vote_count":0,"is_accepted":false,"creation_date":1681783913,"answer_id":76040578,"body":"<p>Please double check that you're using Scala 2.12.15+, the latest is 2.12.17.</p>\n<p><code>packages cannot be represented as URI</code> was a bug in Scala compiler and Gradle Scala plugin uses Scala compiler (sbt zinc compiler)</p>\n<p><a href=\"https://github.com/scala/bug/issues/11794\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11794</a> <em>Scala 2.13.0 OpenJdk 13: REPL crashes with RuntimeException: /packages cannot be represented as URI</em></p>\n<p><a href=\"https://github.com/scala/bug/issues/11762\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11762</a> <em>Failed to run scala on Eclipse OpenJ9 VM, Java 13</em></p>\n<p><a href=\"https://github.com/scala/bug/issues/11608\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11608</a> <em>Compiler crashes when using macros in Scala 2.12 with JDK 13</em></p>\n<p><a href=\"https://github.com/scala/bug/issues/11381#issuecomment-539727339\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/issues/11381#issuecomment-539727339</a> <em>GlobalSymbolLoaders#lookupMemberAtTyperPhaseIfPossible throw NullPointerException with JDK12</em></p>\n<p><a href=\"https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html\" rel=\"nofollow noreferrer\">https://docs.scala-lang.org/overviews/jdk-compatibility/overview.html</a></p>\n<p><strong>Version compatibility table</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>JDK version</th>\n<th>Minimum Scala versions</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>20</td>\n<td>3.3.0 (soon), 2.13.11 (soon), 2.12.18 (soon)</td>\n</tr>\n<tr>\n<td>19</td>\n<td>3.2.0, 2.13.9, 2.12.16</td>\n</tr>\n<tr>\n<td>18</td>\n<td>3.1.3, 2.13.7, 2.12.15</td>\n</tr>\n<tr>\n<td><strong>17</strong> (LTS)</td>\n<td>3.0.0, 2.13.6, <strong>2.12.15</strong></td>\n</tr>\n<tr>\n<td>11 (LTS)</td>\n<td>3.0.0, 2.13.0, 2.12.4, 2.11.12</td>\n</tr>\n<tr>\n<td>8 (LTS)</td>\n<td>3.0.0, 2.13.0, 2.12.0, 2.11.0</td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Zinc 1.8.0 uses Scala 2.12.17.</p>\n<p><a href=\"https://github.com/sbt/zinc/blob/v1.8.0/project/Dependencies.scala#L10\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/blob/v1.8.0/project/Dependencies.scala#L10</a></p>\n<pre><code>val scala210 = &quot;2.10.7&quot;\nval scala211 = &quot;2.11.12&quot;\nval scala212 = &quot;2.12.17&quot;\nval scala213 = &quot;2.13.8&quot;\n</code></pre>\n<p>The issue <em>Update Zinc used by Scala plugin to 1.7.1</em> <a href=\"https://github.com/gradle/gradle/issues/21392\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/issues/21392</a> is still open, the pull request <em>Update Zinc used by Scala plugin to 1.7.1</em> <a href=\"https://github.com/gradle/gradle/pull/21393\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/pull/21393</a> was closed without merging. So Gradle 8.1.0 seems to be still on <code>zinc_2.13:1.6.1</code></p>\n<p><a href=\"https://github.com/gradle/gradle/blob/v8.1.0/subprojects/scala/build.gradle.kts#L32\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/blob/v8.1.0/subprojects/scala/build.gradle.kts#L32</a></p>\n<pre><code>compileOnly(&quot;org.scala-sbt:zinc_2.13:1.6.1&quot;) {\n  ...\n</code></pre>\n<p>And zinc 1.6.1 is on Scala 2.13.6</p>\n<p><a href=\"https://github.com/sbt/zinc/blob/v1.6.1/project/Dependencies.scala#L11\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/blob/v1.6.1/project/Dependencies.scala#L11</a></p>\n<pre><code>val scala210 = &quot;2.10.7&quot;\nval scala211 = &quot;2.11.12&quot;\nval scala212 = &quot;2.12.15&quot;\nval scala213 = &quot;2.13.6&quot;\n</code></pre>\n<p>where <code>packages cannot be represented as URI</code> was supposed to be fixed.</p>\n<p><a href=\"https://docs.gradle.org/current/userguide/scala_plugin.html#sec:configure_zinc_compiler\" rel=\"nofollow noreferrer\">https://docs.gradle.org/current/userguide/scala_plugin.html#sec:configure_zinc_compiler</a></p>\n<p><strong>Zinc compatibility table</strong></p>\n<div class=\"s-table-container\">\n<table class=\"s-table\">\n<thead>\n<tr>\n<th>Gradle version</th>\n<th>Supported Zinc versions</th>\n<th>Zinc coordinates</th>\n<th>Required Scala version</th>\n<th>Supported Scala compilation version</th>\n</tr>\n</thead>\n<tbody>\n<tr>\n<td>7.5 and newer</td>\n<td><a href=\"https://github.com/sbt/zinc\" rel=\"nofollow noreferrer\">SBT Zinc.</a> Versions 1.6.0 and above.</td>\n<td>org.scala-sbt:zinc_2.13</td>\n<td>Scala 2.13.x is required for <em>running</em> Zinc.</td>\n<td>Scala 2.10.x through 3.x can be compiled.</td>\n</tr>\n<tr>\n<td>...</td>\n<td></td>\n<td></td>\n<td></td>\n<td></td>\n</tr>\n</tbody>\n</table>\n</div>\n<p>Scala 2.12.15+, 2.13.6+ are considered to be compatible with Java 17. So if there are still incompatibilities maybe you should open an issue at <a href=\"https://github.com/gradle/gradle/issues\" rel=\"nofollow noreferrer\">https://github.com/gradle/gradle/issues</a>, <a href=\"https://github.com/sbt/zinc/issues\" rel=\"nofollow noreferrer\">https://github.com/sbt/zinc/issues</a> or <a href=\"https://github.com/scala/bug/\" rel=\"nofollow noreferrer\">https://github.com/scala/bug/</a></p>\n<hr />\n<p>Actually, I can't reproduce <code>packages cannot be represented as URI</code> with Gradle 8.1, Scala 2.12.17, zinc 1.8.0, Java eclipse_adoptium-17-amd64-linux/jdk-17.0.7+7</p>\n<p><a href=\"https://github.com/DmytroMitin/gradledemo\" rel=\"nofollow noreferrer\">https://github.com/DmytroMitin/gradledemo</a></p>\n<p><em>settings.gradle.kts</em></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    id(&quot;org.gradle.toolchains.foojay-resolver-convention&quot;) version &quot;0.4.0&quot;\n}\n\nrootProject.name = &quot;gradledemo&quot;\ninclude(&quot;app&quot;)\n</code></pre>\n<p><em>app/build.gradle.kts</em></p>\n<pre class=\"lang-kotlin prettyprint-override\"><code>plugins {\n    scala\n\n    application\n}\n\nrepositories {\n    mavenCentral()\n}\n\ndependencies {\n    implementation(&quot;org.scala-lang:scala-library:2.12.17&quot;)\n\n    implementation(&quot;com.chuusai:shapeless_2.12:2.3.10&quot;)\n}\n\njava {\n    toolchain {\n        languageVersion.set(JavaLanguageVersion.of(17))\n    }\n}\n\nscala {\n    zincVersion.set(&quot;1.8.0&quot;)\n}\n\n// see (*)\n// Without -target or -release: Task :app:compileScala FAILED: jvm-1.17 is not a valid choice for -target, bad option: -target:jvm-1.17\n// With -target: [Warn] : -target is deprecated: Scala 2.12 cannot emit valid class files for targets newer than 8 (this is possible with Scala 2.13). Use -release to compile against a specific platform API version.\ntasks.withType&lt;ScalaCompile&gt;() {\n    targetCompatibility = &quot;&quot;\n    scalaCompileOptions.additionalParameters = listOf(&quot;-release:17&quot;)\n}\n\napplication {\n    mainClass.set(&quot;gradledemo.App&quot;)\n}\n</code></pre>\n<p><em>app/src/main/scala/gradledemo/App.scala</em></p>\n<pre class=\"lang-scala prettyprint-override\"><code>package gradledemo\n\nimport shapeless._\n\nobject App {\n  def main(args: Array[String]): Unit = {\n    println(1 :: &quot;a&quot; :: true :: HNil)\n  }\n}\n</code></pre>\n<pre><code>$ gradle clean\n\nBUILD SUCCESSFUL in 533ms\n1 actionable task: 1 executed\n\n$ gradle run\n\n&gt; Task :app:run\n1 :: a :: true :: HNil\n\nBUILD SUCCESSFUL in 4s\n2 actionable tasks: 2 executed\n</code></pre>\n<p>How to reproduce <code>packages cannot be represented as URI</code>? Please prepare reproduction.</p>\n<p>(*) <a href=\"https://stackoverflow.com/questions/54878493/scala-build-error-on-java-11-using-intellijidea\">Scala build error on Java 11 using intellijidea</a></p>\n"}],"owner":{"user_id":2992404,"display_name":"Jewels"},"view_count":212,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1678023730,"question_id":75642638,"body":"<p>I have a scala project that is stuck on version 2.12. I am trying to upgrade the Java version to 17, but am getting the infamous <code>java.io.IOError: java.lang.RuntimeException: /packages cannot be represented as URI</code> error. I have looked <a href=\"https://stackoverflow.com/questions/60308229/scala-packages-cannot-be-represented-as-uri\">here</a> and <a href=\"https://stackoverflow.com/questions/63800811/how-do-i-resolve-the-packages-cannot-be-represented-as-uri-issue\">here</a> and <a href=\"https://stackoverflow.com/questions/73428839/packages-cannot-be-represented-as-uri\">here</a> and <a href=\"https://stackoverflow.com/questions/66976989/sbt-test-error-java-lang-runtimeexception-packages-cannot-be-represented-as-u\">here</a> (all SO Q&amp;A's) but all to no avail. The common advice between all those answers is either to use Java 8 (not what I want), to upgrade Scala to the latest patch version (already did that) or to upgrade SBT. Regarding the last point, I added the following snippet to my <code>build.gradle.kts</code> file but am still getting the error:</p>\n<pre><code>scala {\n    zincVersion.set(&quot;1.8.0&quot;)\n}\n</code></pre>\n<p>Any ideas?</p>\n"},{"tags":["java","gradle"],"answers":[{"owner":{"user_id":19392086,"display_name":"DaVaMu"},"up_vote_count":0,"is_accepted":false,"creation_date":1682173579,"answer_id":76080144,"body":"<p>Gradle recommends using this:</p>\n<p><a href=\"https://docs.gradle.org/current/userguide/sharing_build_logic_between_subprojects.html#sec:convention_plugins\" rel=\"nofollow noreferrer\">Convention Plugins</a></p>\n"}],"owner":{"user_id":17426905,"display_name":"CoolLoong"},"view_count":196,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1677994429,"question_id":75640395,"body":"<p>I'm writing a build script for a multi-module project using gradle 8.0.2, declaring some dependencies in the libs.versions.toml file, and my build script is as follows</p>\n<pre><code>buildscript {\n    repositories {\n        gradlePluginPortal()\n        maven {\n            url = uri(&quot;https://plugins.gradle.org/m2/&quot;)\n        }\n    }\n    dependencies {\n        classpath(&quot;gradle.plugin.com.github.johnrengelman:shadow:7.1.2&quot;)\n    }\n\n}\n\nplugins{\n    `kotlin-dsl`\n}\n\ngroup = &quot;xxx&quot;\nversion = &quot;0.0.1-SNAPSHOT&quot;\njava.sourceCompatibility = JavaVersion.VERSION_19\n\nsubprojects {\n    apply(plugin = &quot;java&quot;)\n    apply(plugin = &quot;checkstyle&quot;)\n    apply(plugin = &quot;maven-publish&quot;)\n    apply(plugin = &quot;com.github.johnrengelman.shadow&quot;)\n    // common deps + repos\n    repositories {\n        mavenCentral()\n    }\n\n    dependencies {\n        api(libs.jsr305)\n        testImplementation(libs.bundles.junit)\n\n        compileOnly(libs.lombok)\n        annotationProcessor(libs.lombok)\n\n        testCompileOnly(libs.lombok)\n        testAnnotationProcessor(libs.lombok)\n    }\n\n    java {\n        withSourcesJar()\n    }\n\n    tasks.named&lt;Test&gt;(&quot;test&quot;) {\n        useJUnitPlatform()\n    }\n\n    tasks.withType&lt;JavaCompile&gt;() {\n        options.encoding = &quot;UTF-8&quot;\n    }\n\n    tasks.withType&lt;Javadoc&gt;() {\n        options.encoding = &quot;UTF-8&quot;\n    }\n}\n</code></pre>\n<p>I want to apply these common dependencies in each subproject, which are defined in libs.versions.toml, and I can guarantee that libs.versions.toml is written without problems, but I can't get it to work in subprojects</p>\n<p>Error:</p>\n<pre><code>Extension with name 'libs' does not exist. Currently registered extension names: [ext, base, defaultArtifacts, sourceSets, reporting, javaToolchains, java, testing, checkstyle, publishing, shadow]\n\n* Try:\n&gt; Run with --info or --debug option to get more log output.\n&gt; Run with --scan to get full insights.\n\n* Exception is:\norg.gradle.api.UnknownDomainObjectException: Extension with name 'libs' does not exist. Currently registered extension names: [ext, base, defaultArtifacts, sourceSets, reporting, javaToolchains, java, testing, checkstyle, publishing, shadow]\n</code></pre>\n"},{"tags":["java","spring-boot","validation"],"owner":{"user_id":17974178,"display_name":"Victor Hugo Pongolino"},"view_count":54,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677985977,"question_id":75639994,"body":"<p>I have a custom spring validator to validates a role DTO class but when I called it using @Valid annotation or by any other means (like data binder validation or calling validate method) nothing happens. I didn't understand if i'm doing something wrong, i have spring validation starter as dependency like so:</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n    &lt;artifactId&gt;spring-boot-starter-validation&lt;/artifactId&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But when i added the Hibernate Validator it started to validate normally but why? wasn't supposed to spring-boot-starter-validation solve that as it related to spring ?</p>\n<pre><code>&lt;!-- https://mvnrepository.com/artifact/org.hibernate/hibernate-validator --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;org.hibernate&lt;/groupId&gt;\n    &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n    &lt;version&gt;8.0.0.Final&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>DTO</p>\n<pre><code>@Getter @Setter\npublic class UserRegistrationDTO {\n    private String username;\n    private String password;\n    private String confirmPassword;\n    private String email;\n}\n</code></pre>\n<p>Validator</p>\n<pre><code>@Component(value = &quot;userRegistrationValidator&quot;)\npublic class UserRegistrationValidator implements Validator {\n    @Override\n    public boolean supports(Class&lt;?&gt; clazz) {\n        return UserRegistrationDTO.class.isAssignableFrom(clazz);\n    }\n\n    @Override\n    public void validate(Object target, Errors errors) {\n        UserRegistrationDTO userRegistrationDTO = (UserRegistrationDTO) target;\n        ValidationUtils.rejectIfEmptyOrWhitespace(errors,&quot;password&quot;, &quot;password.empty&quot;, &quot;The password must not be empty&quot;);\n        ValidationUtils.rejectIfEmptyOrWhitespace(errors,&quot;confirmPassword&quot;, &quot;cpassword.empty&quot;, &quot;You have to confirm you password&quot;);\n\n        if (userRegistrationDTO.getPassword() != null) {\n            if (userRegistrationDTO.getPassword().length() &lt; 5 || userRegistrationDTO.getPassword().length() &gt; 25)\n                errors.rejectValue(&quot;password&quot;, &quot;password.size&quot;, &quot;The password size must be between 5 to 25&quot;);\n\n            if (userRegistrationDTO.getConfirmPassword() != null &amp;&amp; !userRegistrationDTO.getPassword().equals(userRegistrationDTO.getConfirmPassword()))\n                errors.rejectValue(&quot;confirmPassword&quot;, &quot;password.not_equals&quot;, &quot;The password is not equals&quot;);\n        }\n    }\n}\n</code></pre>\n<p>Controller</p>\n<pre><code>@Controller\n@RequestMapping(&quot;/register&quot;)\n@RequiredArgsConstructor(access = AccessLevel.PRIVATE)\npublic class RegisterController {\n\n    @Qualifier(&quot;userRegistrationValidator&quot;)\n    private final Validator validator;\n\n    @PostMapping\n    public String registerProcessing(@ModelAttribute(&quot;userRegistration&quot;) @RequestBody UserRegistrationDTO userRegistrationDTO, BindingResult bindingResult) {\n        \n        ValidationUtils.invokeValidator(validator, userRegistrationDTO, bindingResult);\n\n        if (bindingResult.hasErrors()) {\n            return &quot;login/signup&quot;;\n        }\n\n        // ... \n\n        return &quot;redirect:/login&quot;;\n    }\n}\n</code></pre>\n<p>My first attempt was setting the validator directly to the data binder. Therefore, i would not need to call the validator. Nothing happens.</p>\n<pre><code>@Qualifier(&quot;userRegistrationValidator&quot;)\nprivate final Validator validator;\n\n@InitBinder\npublic void initBinder(WebDataBinder webDataBinder) {\n    webDataBinder.addValidators(validator);\n}\n</code></pre>\n<p>My second attempt was call the validate method but it still doesn't work.</p>\n<pre><code>@PostMapping\n    public String registerProcessing(@ModelAttribute(&quot;userRegistration&quot;) @RequestBody UserRegistrationDTO userRegistrationDTO, BindingResult bindingResult) {\n        validator.validate(userRegistrationDTO, bindingResult);\n        if (bindingResult.hasErrors()) {\n            return &quot;login/signup&quot;;\n        }\n    // ...\n}\n</code></pre>\n"},{"tags":["java","openai-api"],"comments":[{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":133429465,"body":"On a related note: <a href=\"https://stackoverflow.com/q/3802370/642706\"><i>Java time-based map/cache with expiring keys</i></a>"},{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":133429572,"body":"Do you want to clear the entire map, or clear the ‚Äúconversation‚Äù list? Edit your Question to clarify."},{"owner":{"user_id":10844972,"display_name":"Dylan Wedman"},"edited":false,"comment_id":133429688,"body":"I&#39;ve updated the title. I don&#39;t want to clear the entire map, just the entry containing the list of chat messages."},{"owner":{"user_id":10844972,"display_name":"Dylan Wedman"},"edited":false,"comment_id":133429855,"body":"I looked at the link you sent and found Guava. It has a HashMap like object named CacheBuilder that has time-based expiration of entries measured since last access or write. I think this might be an option."},{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":133430277,"body":"If the Guava <code>CacheBuilder</code> solves your issue, know that on Stack Overflow you are welcome and encouraged to post and accept an Answer to your own Question."},{"owner":{"user_id":642706,"display_name":"Basil Bourque"},"edited":false,"comment_id":133430306,"body":"I changed your title and body to use the more general <code>Map</code> rather than <code>HashMap</code>. Unless your code requires the specific features of a concrete class such as <code>HashMap</code>, use the more general superclass or interface."},{"owner":{"user_id":256196,"display_name":"Bohemian"},"edited":false,"comment_id":133430791,"body":"This is a solved problem: You <i>actually</i> want a cache with expiry. There are libraries for this."},{"owner":{"user_id":5354987,"display_name":"Samuel Marchant"},"edited":false,"comment_id":133434687,"body":"You must use a local datetime object because of midnight ! Use date-time variable to update as the very last line of activity input code of an activity action. Use  first lines of activity  input code to obtain that last updated stored date-time object (one common reference) and use java.time.temporal Period to add 2 minutes then use compare() method by casting the LocalDateTime to java.time.temporal. TemporalAccessor and use the static ChronoLocalDateTime? .from( ) method to convert that time and compare the later one as a chronodate"},{"owner":{"user_id":5354987,"display_name":"Samuel Marchant"},"edited":false,"comment_id":133434717,"body":"Plenty of java.time info and IANA time zone java update info.    <a href=\"https://drive.google.com/file/d/1gjHmdC-BW0Q2vXiQYmp1rzPU497sybNy/view?usp=drivesdk\" rel=\"nofollow noreferrer\">drive.google.com/file/d/1gjHmdC-BW0Q2vXiQYmp1rzPU497sybNy/&hellip;</a>"}],"answers":[{"owner":{"user_id":19409530,"display_name":"Ftoy"},"up_vote_count":0,"is_accepted":false,"creation_date":1677868904,"answer_id":75630766,"body":"<p>How about a thread ? Check if there are changes , and if not for an amount of time to clear it ?</p>\n"},{"owner":{"user_id":10844972,"display_name":"Dylan Wedman"},"up_vote_count":1,"is_accepted":true,"creation_date":1677920926,"answer_id":75634654,"body":"<p>I've added Guava to my project and replaced the Map with a LoadingCache object. It takes the same type of parameters and allows me to easily set the time before expiration.</p>\n<pre><code>private static LoadingCache&lt;String, List&lt;ChatMessage&gt;&gt; conversations;\n\npublic static void initializeOpenAi() {\n    service = new OpenAiService(Settings.OPENAI_ACCESS_KEY);\n        \n    conversations = CacheBuilder.newBuilder()\n            .maximumSize(10000)\n            .expireAfterWrite(2, TimeUnit.MINUTES)\n            .build(\n                new CacheLoader&lt;String, List&lt;ChatMessage&gt;&gt;() {\n                    @Override\n                    public List&lt;ChatMessage&gt; load(String key) throws Exception {\n                        return conversations.get(key);\n                    }\n                });\n}\n\npublic static String generateChatResponse(User user, String prompt) {\n    List&lt;ChatMessage&gt; conversation = conversations.getIfPresent(user.getId());\n        \n    if (conversation == null) {\n        conversation = new ArrayList&lt;ChatMessage&gt;();\n            \n        ChatMessage system = new ChatMessage();\n        system.setRole(&quot;system&quot;);\n        system.setContent(&quot;Omnis is a chatbot with sarcasm&quot;);\n            \n        conversation.add(system);\n    }\n\n    // Remaining code is unchanged\n}\n</code></pre>\n"}],"owner":{"user_id":10844972,"display_name":"Dylan Wedman"},"view_count":130,"up_vote_count":2,"accepted_answer_id":75634654,"answer_count":2,"score":2,"creation_date":1677868336,"question_id":75630689,"body":"<p>I'm working on a chatbot powered by OpenAI. I'm using the new gpt-3.5-turbo model with ChatCompletion requests. I've already come up with a way for the bot to remember conversations for each individual user using a HashMap and it all works. The bot is able to remember all the previous responses and generate a new response using the history as context. However, the more responses in the query, the more tokens that it'll use, increasing costs. I want make it where if there is a certain amount of inactivity (like 2 minutes of not talking to the bot), it'll clear the history and start a fresh new conversation to save on tokens. What would be the best way to accomplish this?</p>\n<p>Here is my code:</p>\n<pre><code>private static OpenAiService service;\n    \nprivate static Map&lt;String, List&lt;ChatMessage&gt;&gt; conversations = new HashMap&lt;String, List&lt;ChatMessage&gt;&gt;();\n            \npublic static void initializeOpenAi() {\n    service = new OpenAiService(Settings.OPENAI_ACCESS_KEY);\n}\n\npublic static String generateChatResponse(User user, String prompt) {\n    List&lt;ChatMessage&gt; conversation;\n        \n    if (conversations.containsKey(user.getId())) {\n        conversation = conversations.get(user.getId());\n    } else {\n        conversation = new ArrayList&lt;ChatMessage&gt;();\n    }\n        \n    if (conversation.size() &lt; 1) {\n        ChatMessage system = new ChatMessage();\n        system.setRole(&quot;system&quot;);\n        system.setContent(&quot;Omnis is a chatbot with sarcasm&quot;);\n        conversation.add(system);\n    }\n        \n    ChatMessage userPrompt = new ChatMessage();\n    userPrompt.setRole(&quot;user&quot;);\n    userPrompt.setContent(prompt);\n    conversation.add(userPrompt);\n        \n    ChatCompletionRequest chatRequest = ChatCompletionRequest.builder()\n            .model(&quot;gpt-3.5-turbo&quot;)\n            .maxTokens(1000)\n            .temperature(0.9)\n            .topP(0.3)\n            .frequencyPenalty(0.9)\n            .presencePenalty(0.0)\n            .messages(conversation)\n            .build();\n        \n    ChatCompletionResult chatResult = null;\n        \n    try {\n        chatResult = service.createChatCompletion(chatRequest);\n    } catch (Exception e) {\n        System.out.println(&quot;An OpenAI request failed!&quot;);\n            \n        if (e.getMessage().contains(&quot;timeout&quot;)) {\n            return &quot;Your request timed out. Please try again after a breif wait for try a different request.&quot;;\n        }\n            \n        if (e.getMessage().contains(&quot;Rate limit&quot;)) {\n            return &quot;Rate limit for chat requests has been reached!&quot;;\n        }\n            \n        return &quot;Something went wrong with your request. Cause of error is &quot; + e.getMessage();\n    }\n        \n    if (chatResult != null) {\n        System.out.println(&quot;Created chat completion request that used &quot; + chatResult.getUsage().getTotalTokens() + &quot; tokens with &quot; + chatResult.getModel());\n    }\n        \n    String response = chatResult.getChoices().get(0).getMessage().getContent();\n        \n    ChatMessage assistantPrompt = new ChatMessage();\n    assistantPrompt.setRole(&quot;assistant&quot;);\n    assistantPrompt.setContent(response);\n    conversation.add(assistantPrompt);\n        \n    conversations.put(user.getId(), conversation);\n        \n    return response;\n}\n</code></pre>\n<p>The &quot;generateChatResonse&quot; method gets called each time a message is sent by a user. It get's the user's ID and pulls the conversation from the HashMap if it exists, if not it creates a new conversation.</p>\n<p>I don't know what to try.</p>\n<p>I don't want to clear the entire HashMap, just the entry associated with the inactive user.</p>\n"},{"tags":["java","selenium-webdriver"],"comments":[{"owner":{"user_id":4744568,"display_name":"pcalkins"},"edited":false,"comment_id":133392440,"body":"Seems like you&#39;d want to declare &quot;logger&quot; outside the constructor.   You can initialize it in the constructor, but declare it outside so it&#39;s scope is more global. Each TestCase is going to have it&#39;s own &quot;reports&quot;.  When their constructor is called...  which seems OK I guess.  Just get them all at the end to generate a complete report for all cases.  Seems odd that pass/fail methods do the same thing.  You may want a bool for &quot;passed&quot; so you can track each one and just use one method."},{"owner":{"user_id":6037662,"display_name":"Rajesh Qa"},"edited":false,"comment_id":133909808,"body":"pcalkins, i didn&#39;t get you ,can you please post some code for reference"}],"owner":{"user_id":6037662,"display_name":"Rajesh Qa"},"view_count":32,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677694042,"question_id":75607448,"body":"<p>I am trying to add different page class methods execution logs to ArraList using setter and getter methods but getting <code>IndexOutOfBound</code> exception due to different classes individual methods.</p>\n<p>I have 4 classes</p>\n<ol>\n<li>Base Class</li>\n<li>Test Case 1 class</li>\n<li>Test Case 2 class</li>\n<li>Report Generation Class</li>\n</ol>\n<p>I have declared ArraList&lt;String&gt; in Report Generation class as below</p>\n<pre><code>public ReportGeneration(){\n\nprivate ArrayList&lt;String&gt; logger = new ArrayList&lt;String&gt;()\n\npublic ArrayList&lt;String&gt; getLogs(){\n   return logger;\n}\n\n\npublic void setLogs(String log){\n   return logger.add(log);\n}\n\npublic void htmlReportGeneration(){\n\n//html report generation code\n}\n\n}\n</code></pre>\n<p>i'm using Report generation class method in BaseUtil class and using parent project unique methods to a add execution logs into html reports.</p>\n<pre><code>public class BaseUtil{\n    \n    ReportGeneration reports = new ReportGeneration();\n    \n    public void resultsPass(String log){\n    //Pass logs code\n    \n    reports.setLogs(log);\n    \n    } \n    \n    public void resultsFAIL(String log){\n    \n    //results fail logs code\n    reports.setLogs(log);\n    }\n    \n    public void report(){\n    \n    //i have folders to read one by one from results folder\n    Example: 10 Test Cases results present in results folder\n    \n    for(int i=0;i&lt;testcases.size();i++){'\n    reports.htmlReportGeneration(report.getLogs(i).toString);\n    }\n    \n    }\n    \n    }\n</code></pre>\n<p>I'm extending  Base class to Test Case 1 and Test Case 2 classes and using page classes methods for navigation</p>\n<pre><code>public class TestCaseOne extends Baseclass{\n\npublic void testcaseValidation(){\n\n//using Base class results pass or fail method as per validation condition\nresultsPass(&quot;Successfully Opened Browser&quot;)\nresultsPass(&quot;Successfully Opened URL&quot;)\nresultsFAIL(&quot;Not able to login to Account &quot;)\n\npage1.login(username,password)//it contains enter text , click elements etc methods in Base class and result methods included inside the unique methods\n}\n\n}\n</code></pre>\n<p>In this case <code>page1.login(username,password)</code> methods logs are not storing into <code>Arraylist&lt;String&gt;</code> only storing in case all pages methods writes in <code>BaseUtil class</code></p>\n<p>How to resolve this problem?</p>\n"},{"tags":["java","spring","spring-boot","jersey","jax-rs"],"owner":{"user_id":13266400,"display_name":"Q2Dev"},"view_count":50,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677673218,"question_id":75603648,"body":"<p>I have created a gradle spring-boot application which has both spring-mvc controllers as well as jersey jax-rs controllers. I have created .war file and deployed it in an external tomcat.</p>\n<p>I am able to successfully hit spring-mvc controllers as well as jersey jax-rs endpoints which are part of the project. But when I try to hit endpoints which are part of jar file placed in <strong>WEB-INF/lib</strong> directory, I get 404 error response.</p>\n<p>My <strong>JerseyConfig</strong> class file is as follows:</p>\n<pre><code>package com.example.core.config;\n\nimport com.example.core.rest.OauthController;\nimport org.glassfish.jersey.server.ResourceConfig;\nimport org.glassfish.jersey.servlet.ServletProperties;\nimport org.springframework.context.annotation.Configuration;\n\nimport javax.ws.rs.ApplicationPath;\n\n@Configuration\n@ApplicationPath(&quot;/rest&quot;)\npublic class JerseyConfig extends ResourceConfig {\n\npublic JerseyConfig(){\n    packages(&quot;com.example.core.oauth.*&quot;);    //This the package I am trying to load from jar file\n    property(ServletProperties.FILTER_FORWARD_ON_404, true);\n    register(OauthController.class);      //Endpoint created within the project which loads successfully\n\n  }\n\n}\n</code></pre>\n<p>When I call https://localhost/rest/oauthcontroller I get 200 response, even the spring mvc controller https://localhost/mycontroller from the same project gives 200 response, but all the rest endpoints which are part of the jar files(com.example.core.oauth.*) are giving 404 response.</p>\n"},{"tags":["java","wear-os","android-wear-complication","android-wear-3.0"],"comments":[{"owner":{"user_id":21309871,"display_name":"1Smart"},"edited":false,"comment_id":133436955,"body":"Is it possible to do this without switching to a jetpack?"}],"owner":{"user_id":21309871,"display_name":"1Smart"},"view_count":47,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677659574,"question_id":75601228,"body":"<p>On api less than 30 everything works, on Samsung (GW4) watches with api30 icons are also normally displayed and you can pull them out of ComplicationData.</p>\n<pre><code>if (complicationData.getIcon()!=null) {\n    icon[complicationId] = complicationData.getIcon();\n    drawable = icon[complicationId].loadDrawable(getApplicationContext());\n}\n</code></pre>\n<p>And in Pixel Watch and the emulator with api30 we have an error:</p>\n<p><code>Unable to find pkg=com.google.android.wearable.sysui for icon Icon(typ=RESOURCE pkg=com.google.android.wearable.sysui id=0x7f08010a)</code>\n<code>android.content.pm.PackageManager$NameNotFoundException: com.google.android.wearable.sysui</code></p>\n<p>The same (nothing data received) with</p>\n<pre><code>.getSmallImage() .getLargeImage() .getBurnInProtectionIcon()\n</code></pre>\n<p>Moreover, if you run the watchface from the Samsung Studio on the same emulator, there are icons.</p>\n<p>But the text from complications is displayed allways normally and is pulled out without problems.</p>\n<p>Something new in api 30 that is not shown in the complications documentation.</p>\n"},{"tags":["java","spring-boot","intellij-idea","entity"],"comments":[{"owner":{"user_id":104891,"display_name":"CrazyCoder"},"edited":false,"comment_id":133367451,"body":"Please try this instead: <a href=\"https://www.jetbrains.com/help/idea/persistence-tool-window.html#generate_entities_and_mappings\" rel=\"nofollow noreferrer\">jetbrains.com/help/idea/&hellip;</a>."}],"owner":{"user_id":17524471,"display_name":"Olivier"},"view_count":63,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677595353,"question_id":75593537,"body":"<p>Beginner with java, I try to create an entity from a table of my database in intellij. I do this with the jetbrain documentation:</p>\n<p><a href=\"https://i.stack.imgur.com/PKdly.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/PKdly.png\" alt=\"enter image description here\" /></a></p>\n<p><a href=\"https://www.jetbrains.com/help/datagrip/generating-code.html#generating_java_entities\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/datagrip/generating-code.html#generating_java_entities</a></p>\n<p>the problem is that the entity created does not have annotations.</p>\n<p>Here is the result when I respect the jetbrain documentation in my project:</p>\n<pre><code>public class Fiche {\n\n  private long id;\n  private String type;\n  private String url;\n\n  \n  public long getId() {\n    return id;\n  }\n\n  public void setId(long id) {\n    this.id = id;\n  }\n\n\n  public String getType() {\n    return type;\n  }\n\n  public void setType(String type) {\n    this.type = type;\n  }\n\n\n  public String getUrl() {\n    return url;\n  }\n\n  public void setUrl(String url) {\n    this.url = url;\n  }\n\n}\n</code></pre>\n<p>But I would like to have:</p>\n<pre><code>@Entity\n@Table(name = &quot;fiche&quot;)\npublic class Fiche {\n    @Id\n    @GeneratedValue(strategy = GenerationType.IDENTITY)\n    @Column(name = &quot;id&quot;, nullable = false)\n    private Long id;\n\n    @Size(max = 250)\n    @Column(name = &quot;TYPE&quot;, length = 250, nullable = false)\n    private String type;\n\n    @Size(max = 250)\n    @Column(name = &quot;URL&quot;, length = 250, nullable = false)\n    private String url;\n\n\n    public Long getId() {\n        return id;\n    }\n\n    public void setId(Long id) {\n        this.id = id;\n    }\n\n    public String getType() {\n        return type;\n    }\n\n    public void setType(String type) {\n        this.type = type;\n    }\n\n    public String getUrl() {\n        return url;\n    }\n\n    public void setUrl(String url) {\n        this.url = url;\n    }\n    \n}\n</code></pre>\n<p>Is it possible to do that ? Thanks for help</p>\n<p><strong>/////// EDIT POST: ///////</strong></p>\n<p>I have tried this doc\n<a href=\"https://www.jetbrains.com/help/idea/persistence-tool-window.html#run-queries\" rel=\"nofollow noreferrer\">https://www.jetbrains.com/help/idea/persistence-tool-window.html#run-queries</a></p>\n<p>Here‚Äôs how I did it:\n1/ right-click to the table and select <strong>Generate Persistence Mapping</strong>\n2/ Create package and persistenceUnit like this.</p>\n<p><a href=\"https://i.stack.imgur.com/9jqtF.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/9jqtF.png\" alt=\"enter image description here\" /></a></p>\n"},{"tags":["java","dependencies","uml","jdeps"],"owner":{"user_id":19822109,"display_name":"Ashwin"},"view_count":20,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677574063,"question_id":75589697,"body":"<p>I am trying to get a UML-style graph of my module. I tried the verbose class option but it still does not show the relationship between one class and another class within the same module.</p>\n<pre><code>jdeps -verbose:class classes.jar\n\ncom.package.module.MyClassOne -&gt; java.lang.Boolean\ncom.package.module.MyClassOne -&gt; java.lang.String\ncom.package.module.MyClassTwo -&gt; java.lang.Object\n</code></pre>\n<p>What I want to view is:</p>\n<pre><code>com.package.module.MyClassOne -&gt; com.package.module.MyClassTwo\ncom.package.module.MyClassOne -&gt; com.package.module.MyClassThree\n</code></pre>\n<p>Is this output possible with JDeps?</p>\n"},{"tags":["java","apache-poi","jsoup","spire.doc"],"comments":[{"owner":{"user_id":300257,"display_name":"Gilbert Le Blanc"},"edited":false,"comment_id":133354170,"body":"&quot;So I have a program that can create a docx file...&quot; So, make a copy of that program and modify it to create an HTML file."},{"owner":{"user_id":20833857,"display_name":"apo"},"edited":false,"comment_id":133360453,"body":"I dont wan&#39;t to just create a html file. But I want to be able to read a docx file and from there convert it to a html file. Cause if I copied the other program I wouldn&#39;t really convert anything but rather just create the html file."},{"owner":{"user_id":685641,"display_name":"Gagravarr"},"edited":false,"comment_id":133362206,"body":"Did you try with Apache Tika? Tika will output <code>&lt;h1&gt;</code> etc tags if the right styles were set in Word"}],"owner":{"user_id":20833857,"display_name":"apo"},"view_count":112,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677517879,"question_id":75583519,"body":"<p>So I have a program that can create a docx file and now I want to implement a code that takes the docx file and converts it into html.</p>\n<p>I have somewhat made it functional but the problem I'm having is that the converter does not detect the headers/title or a list. I've tried to make it detect headers but the if condition is never met and I'm not sure why.</p>\n<p>So this is our input where the first C++ is supposed to be the heading:</p>\n<pre><code>C++ &lt;-- header\nC++ is a general purpose, high-level programming language developed by Sun Microsystems. \nThe C++ programming language was developed by a small team of engineers, \nknown as the Green Team, who initiated the language in 1991.\n- Chapter 1\n- Chapter 2\n- Chapter 3\n</code></pre>\n<p>and here is the converter code:</p>\n<pre><code>package lab2.converter;\n\nimport java.io.*;\nimport java.util.*;\nimport org.apache.poi.xwpf.usermodel.*;\nimport org.jsoup.nodes.Document;\nimport org.jsoup.nodes.Element;\n\npublic class HtmlConverter implements Converter{\n\n    @Override\n    public void convert() throws IOException {\n        try {\n            // 1. Read in the Word document using Apache POI\n            FileInputStream fis = new FileInputStream(&quot;output/Find&amp;Replace.docx&quot;);\n            XWPFDocument document = new XWPFDocument(fis);\n\n            // 2. Convert the document to HTML using jsoup\n            Document htmlDoc = new Document(&quot;&quot;);\n            Element html = htmlDoc.appendElement(&quot;html&quot;);\n            Element body = html.appendElement(&quot;body&quot;);\n\n            List&lt;XWPFParagraph&gt; paragraphs = document.getParagraphs();\n            for (XWPFParagraph paragraph : paragraphs) {\n                Element p = body.appendElement(&quot;p&quot;);\n                String text = paragraph.getText();\n\n                //if condition to detect header and list\n                //not implemented\n\n                // Add the text content to the paragraph\n                p.appendText(text);\n            }\n\n            // 3. Write the HTML to a file\n            try (PrintWriter out = new PrintWriter(&quot;output/Find&amp;Replace.html&quot;)) {\n                out.println(htmlDoc.html());\n            }\n\n            System.out.println(&quot;Conversion complete.&quot;);\n            document.close();\n\n        } catch (Exception e) {\n            System.err.println(&quot;Error converting Word document to HTML: &quot; + e.getMessage());\n        }\n\n    }\n}\n</code></pre>\n<p>After running the docx file into the converter we get this:</p>\n<pre><code>&lt;html&gt;\n &lt;body&gt;\n  &lt;p&gt;Evaluation Warning: The document was created with Spire.Doc for JAVA.&lt;/p&gt;\n  &lt;p&gt;Evaluation Warning: The document was created with Spire.Doc for C++.&lt;/p&gt;\n  &lt;p&gt;C++&lt;/p&gt;\n  &lt;p&gt;C++ is a general purpose, high-level programming language developed by Sun Microsystems. The C++ programming language was developed by a small team of engineers, known as the Green Team, who initiated the language in 1991.&lt;/p&gt;\n  &lt;p&gt;Chapter 1&lt;/p&gt;\n  &lt;p&gt;Chapter 2&lt;/p&gt;\n  &lt;p&gt;Chapter 3&lt;/p&gt;\n &lt;/body&gt;\n&lt;/html&gt;\n\n</code></pre>\n<p>Like I said earlier I've tried conditionts to be met if they detect a header and lists but the problem I'm having is that I'm not sure how to detect a header with the libraries I'm using.</p>\n<p>The libraries im using to make the docx file uses the com.spire.doc library.</p>\n<p>The converter is using org.apache.poi and org.jsoup.nodes. So I'm not sure if It's that i can't mix libraries or the fact that I don't have the knowledge to find a header and lists in the docx file.</p>\n"},{"tags":["java","maven","double-quotes"],"comments":[{"owner":{"user_id":29470,"display_name":"Tim Moore"},"edited":false,"comment_id":133337346,"body":"It depends on the command shell that you use. Are you using a different operating system than those teammates?"},{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":133337358,"body":"Are those examples representative of the two scenarios? Typically, an argument needs to be quoted in order for the parser to consider an argument with spaces as a single argument, rather than 2+ arguments (depending on how many spaces there are)."},{"owner":{"user_id":5297979,"display_name":"Rachel Joyce"},"edited":false,"comment_id":133337378,"body":"Yes. We are using a different operating system"},{"owner":{"user_id":5297979,"display_name":"Rachel Joyce"},"edited":false,"comment_id":133337384,"body":"Yes. This is representative of the two scenarios. The arguments do not have spaces."},{"owner":{"user_id":1081110,"display_name":"Dawood ibn Kareem"},"edited":false,"comment_id":133337429,"body":"Are there any characters other than letters and dots in the value you&#39;re putting the quotes around?  (And if the answer is no, then I have no clue what&#39;s going on, because dots without quotes work fine for me in Windows)"},{"owner":{"user_id":4785110,"display_name":"maraca"},"edited":false,"comment_id":133337438,"body":"Apparently powershell splits the arguments not only at whitespaces but dots too."},{"owner":{"user_id":5297979,"display_name":"Rachel Joyce"},"edited":false,"comment_id":133337460,"body":"The only characters are letters and dots."},{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":133337465,"body":"@maraca I forgot about that. It&#39;s been a while since I&#39;ve had to pass an argument with dots to Java (or any program), but I now remember having to surround them with quotes when using PowerShell."},{"owner":{"user_id":1081110,"display_name":"Dawood ibn Kareem"},"edited":false,"comment_id":133337479,"body":"@maraca if you post that as an answer, I will upvote you."},{"owner":{"user_id":4785110,"display_name":"maraca"},"edited":false,"comment_id":133337499,"body":"Here&#39;s another one, they say <code>,</code>, <code>;</code> and <code>=</code> are delimiters too. <a href=\"https://stackoverflow.com/questions/26614969/how-can-i-pass-batch-arguments-with-dots-into-a-powershell-script\" title=\"how can i pass batch arguments with dots into a powershell script\">stackoverflow.com/questions/26614969/&hellip;</a> I found it an interesting question, but I don&#39;t know enough about powershell, would need official link."},{"owner":{"user_id":1081110,"display_name":"Dawood ibn Kareem"},"edited":false,"comment_id":133337530,"body":"I think a good principle is that if your commands have to be compatible with PowerShell, you should use quote marks around anything that&#39;s not just letters and numbers.  Who knows what the makers of PowerShell are going to break in the next release?"},{"owner":{"user_id":5297979,"display_name":"Rachel Joyce"},"edited":false,"comment_id":133337532,"body":"Yes. Sounds like this is an issue with passing arguments with dots via powershell. Marking it as a duplicate seems fair. Though, I didn&#39;t think to look for powershell commands when I asked this question. How would a person know to think about powershell specifically? It also doesn&#39;t come up as a suggestion when asking this question. So personally think an answer would be more appropriate. But I&#39;ll leave it up to you guys."},{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":133444351,"body":"Since no one has answered this question, and it seems the problem really is related to PowerShell and the way it handles periods/dots, I&#39;m closing this question as a duplicate. Part of the reason closing as a duplicate exists is to refer people to the solution despite (potentially radically) different phrasing of the question."},{"owner":{"user_id":6395627,"display_name":"Slaw"},"edited":false,"comment_id":133444377,"body":"Note I was going to try and answer this question myself, but I couldn&#39;t find anything official related specifically to <code>.</code> in <a href=\"https://learn.microsoft.com/en-us/powershell/module/microsoft.powershell.core/about/about_parsing?view=powershell-7.3\" rel=\"nofollow noreferrer\">this documentation</a>. Maybe there&#39;s something in other parts of the documentation, or maybe I just missed something. But I didn&#39;t feel comfortable adding an answer as, without more specific documentation, I don&#39;t think I can add anything more that the duplicate doesn&#39;t already cover."}],"owner":{"user_id":5297979,"display_name":"Rachel Joyce"},"view_count":47,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677467701,"question_id":75576492,"body":"<p>I am working with some people on a basic Java project. The POM files are exactly the same. But when I run the maven command, for example:</p>\n<pre class=\"lang-none prettyprint-override\"><code>mvn test -Dtest=ExampleTest -DexampleImplementations=com.company.somename.SomeClass\n</code></pre>\n<p>It runs fine.</p>\n<p>But when some others run the same command it produces errors and won't run. When they change the command to have quotes around the parameter values:</p>\n<pre class=\"lang-none prettyprint-override\"><code>mvn test -Dtest=ExampleTest -DexampleImplementations=&quot;com.company.somename.SomeClass&quot;\n</code></pre>\n<p>It runs fine.</p>\n<p>My questions are:</p>\n<ol>\n<li><p>Why the quotes are needed sometimes in the command line and sometimes not?</p>\n</li>\n<li><p>Is it best practice to use quotes, and why?</p>\n</li>\n</ol>\n<p>Other notable factors are that we have the same version of maven and the same jdk version. Though I believe the person that it is failing for is using Windows and I am using Mac.\nAdditionally, this does not have to do with the values having spaces.</p>\n<p>Thank you!</p>\n"},{"tags":["java","web-services","content-type","endpoint","micronaut"],"answers":[{"owner":{"user_id":2194470,"display_name":"Szymon Stepniak"},"up_vote_count":0,"is_accepted":false,"creation_date":1677584810,"answer_id":75591653,"body":"<p>You can use <code>@Get(produces=&quot;*/*&quot;)</code> to provide a fallback-like endpoint that will be executed when the <code>Accept</code> header is missing for the endpoints that use the same URI and are controlled by the specific content type. Take a look at the example below:</p>\n<pre class=\"lang-java prettyprint-override\"><code>import io.micronaut.http.annotation.Controller;\nimport io.micronaut.http.annotation.Get;\nimport io.micronaut.http.annotation.QueryValue;\n\nimport java.util.Map;\n\n@Controller(&quot;/hello&quot;)\npublic class HelloController {\n\n    @Get(produces = &quot;application/json&quot;)\n    Map&lt;?,?&gt; helloJson(@QueryValue(defaultValue = &quot;unknown&quot;) String name) {\n        return Map.of(&quot;message&quot;, &quot;Hello, &quot; + name + &quot;!&quot;);\n    }\n\n    @Get(produces = &quot;text/plain&quot;)\n    String helloText(@QueryValue(defaultValue = &quot;unknown&quot;) String name) {\n        return &quot;Hello, &quot; + name;\n    }\n\n    @Get(produces = &quot;*/*&quot;)\n    String helloDefault(@QueryValue(defaultValue = &quot;unknown&quot;) String name) {\n        return helloText(name) + &quot; (from default endpoint)&quot;;\n    }\n}\n</code></pre>\n<p>And here is what happens when we call this controller with and without the <code>Accept</code> header:</p>\n<pre class=\"lang-bash prettyprint-override\"><code>$ curl -H &quot;Accept:application/json&quot; &quot;localhost:8080/hello?name=test&quot;\n{&quot;message&quot;:&quot;Hello, test!&quot;}%\n\n$ curl -H &quot;Accept:text/plain&quot; &quot;localhost:8080/hello?name=test&quot;\nHello, test%\n\n$ curl &quot;localhost:8080/hello?name=test&quot;                             \nHello, test (from default endpoint)% \n</code></pre>\n"}],"owner":{"user_id":16085919,"display_name":"manuel"},"view_count":171,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1677349014,"question_id":75567470,"body":"<p>I am having a play with Micronaut, and want to create an endpoint that returns either <code>text/plain</code> or <code>text/html</code>, depending on the Accept header in the request.</p>\n<p>I found two ways to do this:</p>\n<ol>\n<li>create two methods for the same endpoint with different <em>produces</em> attributes,</li>\n<li>handle it all in a single method and that evaluates the accept header and use logic in my own code to return the right content type.</li>\n</ol>\n<p>I like the first way best, because it's very clean, and requires no logic from me:</p>\n<pre><code>    @Get(uri=&quot;/&quot;, produces=&quot;text/html&quot;)\n    public String indexHtml() {\n        return &quot;&quot;&quot;\n            &lt;html&gt;&lt;head&gt;&lt;meta charset=\\&quot;utf-8\\&quot;&gt;&lt;/head&gt;\n            &lt;body&gt;\n            &lt;h1&gt;Demo service&lt;/h1&gt;\n            &lt;/body&gt;&lt;/html&gt;&quot;&quot;&quot;;\n    }\n    @Get(uri=&quot;/&quot;, produces=&quot;text/plain&quot;)\n    public String indexText() {\n        return &quot;Demo service\\r\\n&quot;;\n    }\n\n</code></pre>\n<p>This works well when an accept header is in the request. However, when there is no accept header, I get an error response <code>400 Bad Request</code> with a message <code>&quot;More than 1 route matched the incoming request. The following routes matched /demo: GET - /demo, GET - /demo&quot;</code></p>\n<p><strong>Question 1</strong>\nIs there a way to provide a 3rd endpoint as a fallback, or to designate one of these methods as the default?</p>\n<p>The second way to do it, resulted in a method that I don't find very elegant:</p>\n<pre><code>    @Get(uri=&quot;/&quot;, produces={MediaType.TEXT_PLAIN, MediaType.TEXT_HTML})\n    public String index(HttpRequest&lt;?&gt; request) {\n        Collection&lt;MediaType&gt; mediaTypes = request.accept();\n        Iterator&lt;MediaType&gt; it = mediaTypes.iterator();\n        if (it.hasNext()) {\n            MediaType mediaType = it.next();\n            if (MediaType.TEXT_PLAIN_TYPE.equals(mediaType))\n                    return &quot;Demo service\\r\\n&quot;;\n            if (MediaType.TEXT_HTML_TYPE.equals(mediaType))\n                    return &quot;&quot;&quot;\n                        &lt;!DOCTYPE html&gt;\n                        &lt;html&gt;&lt;head&gt;&lt;meta charset=\\&quot;utf-8\\&quot;&gt;&lt;/head&gt;\n                        &lt;body&gt;\n                        &lt;h1&gt;Demo service&lt;/h1&gt;\n                        &lt;/body&gt;&lt;/html&gt;&quot;&quot;&quot;;\n        }\n        return &quot;&quot;&quot;\n            {\n                &quot;title&quot;: &quot;Demo service&quot;,\n            }&quot;&quot;&quot;;\n    }\n</code></pre>\n<p><strong>Question 2</strong></p>\n<ul>\n<li>If it's really necessary to handle this in a single method, is it indeed done by fetching the accept header and evaluating that, or should it be done differently?</li>\n</ul>\n"},{"tags":["java","spring","spring-boot","file","digital-signature"],"comments":[{"owner":{"user_id":6469880,"display_name":"angcap"},"edited":false,"comment_id":133366221,"body":"Hi, i&#39;m using Tika.detect API and some p7m files are detected as application/x-dbf"},{"owner":{"user_id":20130938,"display_name":"Matt"},"edited":false,"comment_id":133693317,"body":"yes, that was the problem, can&#39;t show the code but solved with some walkaround"},{"owner":{"user_id":6469880,"display_name":"angcap"},"edited":false,"comment_id":133762599,"body":"can you share somerhing useful?"},{"owner":{"user_id":20130938,"display_name":"Matt"},"edited":false,"comment_id":133777251,"body":"What do u need? Anyway, I found a sign removal method (aka return the original document binaries) that can be used to check the triplet (application/content, magic number and extension) of the p7m as pdf (original binaries have to give back a. pdf) then checked signature through BouncyCastle libraries"},{"owner":{"user_id":20130938,"display_name":"Matt"},"edited":false,"comment_id":133777261,"body":"For the detection used Tika"}],"owner":{"user_id":20130938,"display_name":"Matt"},"view_count":125,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677329228,"question_id":75565523,"body":"<p>Trying to detect a signed file doesn't gives back the right extension and content type:</p>\n<pre class=\"lang-java prettyprint-override\"><code>    byte[] content = parameters.getBytes();\n\n    TikaConfig config = TikaConfig.getDefaultConfig();\n    Metadata metadata = new Metadata();\n\n    try {\n\n        InputStream stream = TikaInputStream.get(content, metadata);\n        MediaType mediaType = config.getMimeRepository().detect(stream, metadata);\n\n        MimeType mimeType = config.getMimeRepository().forName(mediaType.toString());\n        String extension = mimeType.getExtension();\n\n    } catch (IOException | MimeTypeException e) { return false; }\n</code></pre>\n<p>While doing that through tika API there's no problem with files such as <code>PDF</code> or <code>JPG</code>,\nwas easy to find the magic number in order to check the autenticity of the file, there's no much documentation around <code>P7M</code> and can't find it's magic number.</p>\n<p>Some attempts on the right file that i needed to test gave back a <code>.dbf</code> instead of a <code>.p7m</code> and others on example files on the internet were detected as <code>application/pkcs7-signature</code> with the <code>.p7s</code> extension, but that wasn't right.</p>\n<p>Shall i use other libraries (even though i would rather use either <code>Tika</code> or <code>BouncyCastle</code>)?</p>\n<p>Did i messed up something on the code?</p>\n"},{"tags":["java","mongodb","spring-boot","spring-mongodb","reactive-mongo-java"],"owner":{"user_id":21283528,"display_name":"Bhagyashree Kalshetti"},"view_count":303,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677287444,"question_id":75562707,"body":"<p>I am upgrading my application from Spring Boot version 2.7.3 to 3.0.2 and Java version 8 to 17. My build is successful but during server startup I am getting below exception -</p>\n<pre class=\"lang-none prettyprint-override\"><code>Caused by: org.springframework.beans.factory.UnsatisfiedDependencyException: Error creating bean with name 'mappingMongoConverter' defined in class path resource [org/springframework/boot/autoconfigure/data/mongo/MongoDatabaseFactoryDependentConfiguration.class]: Unsatisfied dependency expressed through method 'mappingMongoConverter' parameter 1: Error creating bean with name 'mongoMappingContext' defined in class path resource [org/springframework/boot/autoconfigure/data/mongo/MongoDataConfiguration.class]: Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @2fd16761\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:798)\n    at org.springframework.beans.factory.support.ConstructorResolver.instantiateUsingFactoryMethod(ConstructorResolver.java:548)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.instantiateUsingFactoryMethod(AbstractAutowireCapableBeanFactory.java:1325)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBeanInstance(AbstractAutowireCapableBeanFactory.java:1162)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:562)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)\n    ... 66 common frames omitted\nCaused by: org.springframework.beans.factory.BeanCreationException: Error creating bean with name 'mongoMappingContext' defined in class path resource [org/springframework/boot/autoconfigure/data/mongo/MongoDataConfiguration.class]: Unable to make field private final java.lang.String java.io.File.path accessible: module java.base does not &quot;opens java.io&quot; to unnamed module @2fd16761\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.initializeBean(AbstractAutowireCapableBeanFactory.java:1752)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.doCreateBean(AbstractAutowireCapableBeanFactory.java:600)\n    at org.springframework.beans.factory.support.AbstractAutowireCapableBeanFactory.createBean(AbstractAutowireCapableBeanFactory.java:522)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.lambda$doGetBean$0(AbstractBeanFactory.java:326)\n    at org.springframework.beans.factory.support.DefaultSingletonBeanRegistry.getSingleton(DefaultSingletonBeanRegistry.java:234)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.doGetBean(AbstractBeanFactory.java:324)\n    at org.springframework.beans.factory.support.AbstractBeanFactory.getBean(AbstractBeanFactory.java:200)\n    at org.springframework.beans.factory.config.DependencyDescriptor.resolveCandidate(DependencyDescriptor.java:254)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.doResolveDependency(DefaultListableBeanFactory.java:1405)\n    at org.springframework.beans.factory.support.DefaultListableBeanFactory.resolveDependency(DefaultListableBeanFactory.java:1325)\n    at org.springframework.beans.factory.support.ConstructorResolver.resolveAutowiredArgument(ConstructorResolver.java:885)\n    at org.springframework.beans.factory.support.ConstructorResolver.createArgumentArray(ConstructorResolver.java:789)\n    ... 80 common frames omitted\n</code></pre>\n<p>I am seeing there is issue with Mongo mapping context in mongo data configuration class.\nI am not sure why this error is coming and how to resolve it?</p>\n<p>My Pom File -</p>\n<pre class=\"lang-xml prettyprint-override\"><code>&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;\n&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot;\n    xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n    xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 https://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n    &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n    &lt;parent&gt;\n        &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n        &lt;artifactId&gt;spring-boot-starter-parent&lt;/artifactId&gt;\n        &lt;version&gt;3.0.2&lt;/version&gt;\n        &lt;relativePath /&gt; &lt;!-- lookup parent from repository --&gt;\n    &lt;/parent&gt;\n    &lt;groupId&gt;XXXX&lt;/groupId&gt;\n    &lt;artifactId&gt;XXXXX&lt;/artifactId&gt;\n    &lt;version&gt;0.0.1&lt;/version&gt;\n    &lt;name&gt;XXXX&lt;/name&gt;\n    &lt;description&gt;XXXXX&lt;/description&gt;\n    &lt;properties&gt;\n        &lt;java.version&gt;17&lt;/java.version&gt;\n    &lt;/properties&gt;\n    &lt;dependencies&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-web&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.postgresql&lt;/groupId&gt;\n            &lt;artifactId&gt;postgresql&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;commons-lang&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-lang&lt;/artifactId&gt;\n            &lt;version&gt;2.6&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-data-jpa&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-data-mongodb&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n                &lt;dependency&gt;\n                    &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                    &lt;artifactId&gt;spring-boot-starter-data-mongodb-reactive&lt;/artifactId&gt;\n                &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-cache&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-mail&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.mongodb&lt;/groupId&gt;\n            &lt;artifactId&gt;mongodb-driver-sync&lt;/artifactId&gt;\n            &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-context-support&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpclient&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.httpcomponents&lt;/groupId&gt;\n            &lt;artifactId&gt;httpcore&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-devtools&lt;/artifactId&gt;\n            &lt;scope&gt;runtime&lt;/scope&gt;\n            &lt;optional&gt;true&lt;/optional&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n            &lt;scope&gt;provided&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;io.projectreactor&lt;/groupId&gt;\n            &lt;artifactId&gt;reactor-test&lt;/artifactId&gt;\n            &lt;scope&gt;test&lt;/scope&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;com.opencsv&lt;/groupId&gt;\n            &lt;artifactId&gt;opencsv&lt;/artifactId&gt;\n            &lt;version&gt;5.7.1&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;!-- https://mvnrepository.com/artifact/org.apache.commons/commons-text --&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.commons&lt;/groupId&gt;\n            &lt;artifactId&gt;commons-text&lt;/artifactId&gt;\n            &lt;version&gt;1.10.0&lt;/version&gt;\n        &lt;/dependency&gt;       \n        &lt;dependency&gt;\n            &lt;groupId&gt;com.amazonaws&lt;/groupId&gt;\n            &lt;artifactId&gt;aws-java-sdk-s3&lt;/artifactId&gt;\n            &lt;version&gt;1.12.261&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.json&lt;/groupId&gt;\n            &lt;artifactId&gt;json&lt;/artifactId&gt;\n            &lt;version&gt;20210307&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi&lt;/artifactId&gt;\n            &lt;version&gt;5.2.2&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.apache.poi&lt;/groupId&gt;\n            &lt;artifactId&gt;poi-ooxml&lt;/artifactId&gt;\n            &lt;version&gt;5.2.2&lt;/version&gt;\n        &lt;/dependency&gt;       \n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springdoc&lt;/groupId&gt;\n            &lt;artifactId&gt;springdoc-openapi-ui&lt;/artifactId&gt;\n            &lt;version&gt;1.6.8&lt;/version&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.hibernate.validator&lt;/groupId&gt;\n            &lt;artifactId&gt;hibernate-validator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n    &lt;/dependencies&gt;\n    &lt;build&gt;\n        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n                &lt;artifactId&gt;spring-boot-maven-plugin&lt;/artifactId&gt;\n                &lt;configuration&gt;\n                    &lt;excludes&gt;\n                        &lt;exclude&gt;\n                            &lt;groupId&gt;org.projectlombok&lt;/groupId&gt;\n                            &lt;artifactId&gt;lombok&lt;/artifactId&gt;\n                        &lt;/exclude&gt;\n                    &lt;/excludes&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n    &lt;/build&gt;\n&lt;/projec&gt;\n</code></pre>\n<p>I tried to google the solution and explored mongo db forums. I am suspecting reactive mongo db dependency is not compatible with Java 17</p>\n"},{"tags":["java","spring","jpa","mockito","entitylisteners"],"answers":[{"owner":{"user_id":9505218,"display_name":"Ateig"},"up_vote_count":0,"is_accepted":true,"creation_date":1678466972,"answer_id":75698892,"body":"<p>I couldn't get mockito to work, so I ended up creating a static field I could change instead:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EntityListeners(MyEntityListener.class)\n@Entity\npublic class myEntity {\n...\n}\n\npublic class MyEntityListener {\n    public static final testing = false;\n\n    public String doThis() {\n         if (testing) return &quot;fake-text&quot;;\n         // code i want to skip/mock\n         return expensiveToCompute;\n    }\n    \n    @PrePersist\n    public void myListener(myEntity e) {\n         if (complexConditionToTest) e.setSomething(doThis());\n    }\n}\n</code></pre>\n<p>This makes the test look like:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyEntityListenerTest {\n\n    @Autowired\n    myEntityRepository repo;\n\n    @Before\n    public final void setup() {\n        MyEntityListener.testing = true;\n    }\n    \n    @Test\n    public void myListenerTest() throws Exception {\n        String expected = &quot;fake-text&quot;;\n        myEntity e = new myEntity();\n        myEntity stored = repo.save(e);\n        assertThat(stored.getSomething()).isEqualTo(expected);\n    }\n}\n</code></pre>\n<p>If you need the expected text to change you could probably use a string property instead of a boolean, but this was fine for my use case.</p>\n"}],"owner":{"user_id":9505218,"display_name":"Ateig"},"view_count":60,"up_vote_count":2,"accepted_answer_id":75698892,"answer_count":1,"score":2,"creation_date":1677255002,"question_id":75558830,"body":"<p>I'm trying to mock one function in an EntityListener, so the real implementation is not called in my test. The code looks like the following:</p>\n<pre class=\"lang-java prettyprint-override\"><code>@EntityListeners(myEntityListener.class)\n@Entity\npublic class myEntity {\n...\n}\n\npublic class myEntityListener {\n    \n    public String doThis() {\n         // code i want to skip/mock\n         return expensiveToCompute;\n    }\n    \n    @PrePersist\n    public void myListener(myEntity e) {\n         if (complexConditionToTest) e.setSomething(doThis());\n    }\n}\n</code></pre>\n<p>I would like to mock <code>doThis()</code>, but run the actual <code>myListener()</code> function so I can test that the complex conditioning is correct.</p>\n<p>I tried to test using Mockito, with the following code:</p>\n<pre class=\"lang-java prettyprint-override\"><code>public class MyEntityListenerTest {\n\n    @Autowired\n    myEntityRepository repo;\n    \n    @MockBean\n    myEntityListener entityListener;\n    \n    @Test\n    public void myListenerTest() throws Exception {\n        String expected = &quot;fake-text&quot;;\n        Mockito.when(entityListener.doThis()).thenReturn(expected);\n        \n        myEntity e = new myEntity();\n        myEntity stored = repo.save(e);\n        assertThat(stored.getSomething()).isEqualTo(expected);\n    }\n}\n</code></pre>\n<p>The myEntity constructor and doThis call both have more params, removed for simplicity in the example code.</p>\n<p>I expected that this would mock the doThis function, but it does not appear to be mocked and the actual implemention is called instead. There are no error messages.</p>\n<p>I am guessing that MockBean is not finding an existing myEntityListener bean and instead is creating a new one (which goes unused), but I am not sure how to make the test find the correct myEntityListener.</p>\n"},{"tags":["java","function","generics"],"answers":[{"owner":{"user_id":5133585,"display_name":"Sweeper"},"up_vote_count":0,"is_accepted":false,"creation_date":1677119420,"answer_id":75540052,"body":"<p>For clarity, I will call the 2-parameter method &quot;<code>safeMethod</code>&quot;, and call the local variable of type <code>Function&lt;List&lt;E&gt;, Function&lt;Integer, Optional&lt;E&gt;&gt;&gt;</code> &quot;<code>safeLocal</code>&quot;.</p>\n<p>The difference is that <code>safeMethod</code> is generic and <code>safeLocal.apply</code> is not (but <code>test</code> <em>is</em>).</p>\n<p><code>safeMethod</code> is generic - it can take a <code>List&lt;E&gt;</code> for <em>any</em> reference type <code>E</code>. In the call <code>safeMethod(list, 0);</code>, <code>E</code> is inferred to be <code>SomeClass</code>. It can be said that the type argument for the type parameter <code>E</code> in this call is <code>SomeClass</code>.</p>\n<p>On the other hand, the <code>apply</code> method of <code>safeLocal</code> takes <em>one specific type</em> - <code>List&lt;E&gt;</code>. <a href=\"https://docs.oracle.com/en/java/javase/18/docs/api/java.base/java/util/function/Function.html#apply(T)\" rel=\"nofollow noreferrer\"><code>apply</code></a> is not generic after all. Note that this <code>E</code> type refers to <em>one specific type</em> - the type argument passed to <code>test</code>. Is <code>SomeClass</code> that type argument? Not necessarily. Since <code>test</code> is generic, <code>E</code> can be <em>any</em> reference type, not necessarily <code>SomeClass</code>. Therefore, you cannot pass <code>List&lt;SomeClass&gt;</code> to <code>safeLocal.apply</code>.</p>\n<p>For a concrete example, let's say you are calling <code>test</code> from another method in the same class,</p>\n<pre><code>public void anotherMethodInTheSameClassAsTest() {\n    // you could do:\n    this.&lt;SomeClass&gt;test(); // 1\n    // but since test is generic and E can be any reference type,\n    // you could also do\n    this.&lt;String&gt;test(); // 2\n}\n</code></pre>\n<p>For <code>// 1</code>, the type argument for the type parameter <code>E</code> for <code>test</code> would be <code>SomeClass</code>. For <code>// 2</code> however, it would be <code>String</code>! <code>safeLocal.apply</code> is supposed to take a <code>List&lt;String&gt;</code> in this case, not a <code>List&lt;SomeClass&gt;</code>.</p>\n<p>Though in practice, generics don't exist at runtime, and all <code>safeLocal</code> is really doing is returning an empty optional. <code>test</code> isn't even doing anything to that. So the type doesn't really matter in this particular case, which is why casting can &quot;fix&quot; this.</p>\n<p>If you want to make a generic local variable that can be <code>apply</code>'ed with different kinds of lists, you need to declare your own interface that actually has a generic <code>apply</code> in it, and <em>not</em> use a lambda. Lambdas unfortunately can't be generic :(</p>\n<pre><code>interface SafeListAccessFunction {\n    &lt;E&gt; Optional&lt;E&gt; apply(@NotNull List&lt;E&gt; l, Integer o);\n}\n</code></pre>\n<pre><code>SafeListAccessFunction safe = new SafeListAccessFunction() {\n    @Override\n    public &lt;E&gt; Optional&lt;E&gt; apply(@NotNull List&lt;E&gt; l, Integer o) {\n        return l.size() &gt; o ? Optional.of(l.get(o)) : Optional.empty();\n    }\n};\n</code></pre>\n<p>Or if you want it curried:</p>\n<pre><code>interface SafeListAccessFunction {\n    &lt;E&gt; Function&lt;Integer, Optional&lt;E&gt;&gt; apply(@NotNull List&lt;E&gt; l);\n}\n</code></pre>\n<pre><code>SafeListAccessFunction safe = new SafeListAccessFunction() {\n    @Override\n    public &lt;E&gt; Function&lt;Integer, Optional&lt;E&gt;&gt; apply(@NotNull List&lt;E&gt; l) {\n        return o -&gt; l.size() &gt; o ? Optional.of(l.get(o)) : Optional.empty();\n    }\n};\n</code></pre>\n"}],"owner":{"user_id":18106943,"display_name":"Î∞ïÏ§ÄÏòÅ"},"view_count":52,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1677117927,"question_id":75539938,"body":"<pre><code>private &lt;E&gt; Optional&lt;E&gt; safe(@NotNull List&lt;E&gt; l, Integer o) { return l.size() &gt; o ? Optional.of(l.get(o)) : Optional.empty(); }\n</code></pre>\n<pre><code>public &lt;E&gt; void test() {\n    Function&lt;List&lt;E&gt;, Function&lt;Integer, Optional&lt;E&gt;&gt;&gt; safe = l -&gt; i -&gt; l.size() &gt; i ? Optional.of(l.get(i)) : Optional.empty();\n    List&lt;SomeClass&gt; list = new ArrayList&lt;&gt;();\n\n    Optional&lt;SomeClass&gt; element1 = safe(list, 0);\n    Optional&lt;SomeClass&gt; element2 = safe.apply(list).apply(0); // doesn't work this line;\n}\n</code></pre>\n<p>Generic class E of &quot;Function&lt;List&lt;E&gt;, Function&lt;Integer, Optional&lt;E&gt;&gt;&gt; safe&quot; can't cognize SomeClass to E</p>\n<p>What's the difference between the two codes?</p>\n<p>class casting dose work. but i want to know difference between the two</p>\n"},{"tags":["java","windows","maven","intellij-idea","encoding"],"comments":[{"owner":{"user_id":104891,"display_name":"CrazyCoder"},"edited":false,"comment_id":133268966,"body":"Please report at <a href=\"https://youtrack.jetbrains.com/newIssue?project=IDEA\" rel=\"nofollow noreferrer\">youtrack.jetbrains.com/newIssue?project=IDEA</a> with a sample project and the steps to reproduce the issue."}],"answers":[{"owner":{"user_id":2475798,"display_name":"Neenad"},"up_vote_count":0,"is_accepted":false,"creation_date":1677083631,"answer_id":75535638,"body":"<ul>\n<li>Create a <code>.mvn</code> folder in root of your project</li>\n<li>add <code>jvm.config</code> file in that folder i.e (<code>.mvn/jvm.config</code>)</li>\n<li>Add <code>-Dproject.build.sourceEncoding=UTF-8 -Dproject.reporting.outputEncoding=UTF-8</code> to the file</li>\n<li>Checkin this file in your repo</li>\n<li>MVN will try to find this config file when you run and will use it</li>\n</ul>\n"}],"owner":{"user_id":856672,"display_name":"rico"},"view_count":111,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1677083387,"question_id":75535582,"body":"<p>I am working on IntelliJ IDEA v2022.3.2 on a Java 11 project with Maven 3 on Windows 10. In the project settings I have set the file encoding to UTF-8 for all src/main/java source folders.\nHowever, every time I click on &quot;Reload project&quot; in Maven IDE, the file encoding for all src/main/java folders is then set to ISO-8859-1.</p>\n<p>I would like the file encoding to stay in UTF-8. In my pom.xml parent, I have set the following properties :</p>\n<pre><code>&lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n&lt;project.reporting.outputEncoding&gt;UTF-8&lt;/project.reporting.outputEncoding&gt;\n</code></pre>\n<p>Where does this ISO-8859-1 encoding setting is coming from ?</p>\n<p>[UPDATE]</p>\n<p>Seems like my local machine default encoding is ISO-8859-1 :</p>\n<pre><code>PS U:\\&gt; [System.Text.Encoding]::Default                                                                                                                                        \n\nIsSingleByte      : True\nBodyName          : iso-8859-1\nEncodingName      : Europe de l'Ouest (Windows)\nHeaderName        : Windows-1252\nWebName           : Windows-1252\nWindowsCodePage   : 1252\nIsBrowserDisplay  : True\nIsBrowserSave     : True\nIsMailNewsDisplay : True\nIsMailNewsSave    : True\nEncoderFallback   : System.Text.InternalEncoderBestFitFallback\nDecoderFallback   : System.Text.InternalDecoderBestFitFallback\nIsReadOnly        : True\nCodePage          : 1252\n</code></pre>\n<p>Isn't there a way to tell Intellij/Maven to use another encoding than system default ?</p>\n"},{"tags":["java","eclipse","import"],"comments":[{"owner":{"user_id":2513200,"display_name":"Hulk"},"edited":false,"comment_id":133268962,"body":"Have you tried to compile from command line?"},{"owner":{"user_id":2526586,"display_name":"user2526586"},"edited":false,"comment_id":133269860,"body":"@Hulk It does compile and build correctly."},{"owner":{"user_id":2834978,"display_name":"LMC"},"edited":false,"comment_id":133269917,"body":"Try <code>Project -&gt; Clean</code> and make sure <code>Build automatically</code> is checked."},{"owner":{"user_id":2513200,"display_name":"Hulk"},"edited":false,"comment_id":133271571,"body":"@user2526586 then the problem is limited to Eclipse. Try any clean/refresh options you can think of."},{"owner":{"user_id":27905,"display_name":"nitind"},"edited":false,"comment_id":133272770,"body":"Are the v11 and v17 JREs set on your <i>Installed JREs</i> preference page still valid? Updates can change paths, and you haven&#39;t said much about the system you&#39;re on."},{"owner":{"user_id":2513200,"display_name":"Hulk"},"edited":false,"comment_id":133278123,"body":"If this is a Maven project, try Maven-&gt;Update project."},{"owner":{"user_id":2353403,"display_name":"Coder"},"edited":false,"comment_id":133284017,"body":"If other options don&#39;t work, try to open the same project in another workspace as well."}],"owner":{"user_id":2526586,"display_name":"user2526586"},"view_count":132,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677082891,"question_id":75535490,"body":"<p>This is a strange one I don't understand. I am using Eclipse to work on a spring project. Eclipse started validation of my project in the background suddenly and it seemed to take <em>forever</em>. I couldn't save my work or quit Eclipse until the validation has finished. As the operation was taking forever and looked stuck to me, I had to terminate Eclipse. When I restarted Eclipse, my project seems funny - Eclipse had troubles linking my imports.</p>\n<p>For example, I had a java file with some imports:</p>\n<pre><code>import java.sql.SQLException;\nimport java.time.DayOfWeek;\nimport java.time.LocalDate;\nimport java.time.LocalDateTime;\nimport java.time.format.DateTimeFormatter;\nimport java.time.temporal.TemporalAdjusters;\nimport java.util.ArrayList;\nimport java.util.Arrays;\nimport java.util.Date;\nimport java.util.HashMap;\nimport java.util.LinkedHashSet;\nimport java.util.List;\nimport java.util.Locale;\nimport java.util.Map;\nimport java.util.Set;\nimport java.util.regex.Matcher;\nimport java.util.regex.Pattern;\n</code></pre>\n<p>Out of these imports, <code>import java.util.List;</code> is the only line that has red curvy lines below. When my cursor hovers above it, it gives me this error:</p>\n<pre><code>The import java.util.List cannot be resolved\n</code></pre>\n<p>This certainly looks strange to me. How can Eclipse recognise <code>java.util.ArrayList</code> and alike, but not <code>java.util.List</code>?</p>\n<p>I checked my project properties: Java Build Path &gt; Libraries\nUnder Modulepath, I have &quot;JRE System Library [JavaSE-11]&quot;. I tried to change that to &quot;JRE System Library [JavaSE-17]&quot;, but nothing changes. I guess it is not a problem with my JRE System Library...</p>\n<p>I just wonder if my Eclipse is corrupted, or my JRE/JDK broken, or something else...</p>\n"},{"tags":["java","gradle","build.gradle","artifactory","gradlew"],"comments":[{"owner":{"user_id":1797912,"display_name":"Chriki"},"edited":false,"comment_id":133330088,"body":"It sounds like this question is pretty much the same as <a href=\"https://stackoverflow.com/q/65173003/1797912\">this one</a>; or is there anything missing in <a href=\"https://stackoverflow.com/a/65237462/1797912\">the accepted answer</a> to that question that we could clarify here? For example, I‚Äôm a bit confused about your <code>api</code> vs. <code>implementation</code> concern; IMHO, it shouldn‚Äôt make a difference downstream, whether you publish a single JAR or multiple JARs."}],"owner":{"user_id":5039957,"display_name":"Kalpish Singhal"},"view_count":103,"up_vote_count":3,"answer_count":0,"score":2,"creation_date":1677077179,"question_id":75534355,"body":"<p>My Gradle project is arranged as follows:</p>\n<pre><code>&lt;MyLib&gt;\nbuild.gradle\n       |‚Äî‚Äî&gt;sub_module1\n               build.gradle\n       |‚Äî‚Äî&gt;sub_module2\n               build.gradle\n</code></pre>\n<p>The Project segregates the public API from implementation by having two separate gradle sub-modules i.e, sub_module1 and sub_module2. However, I would like to hide this segregation from external users and provide them with a single artifact jar i.e configure the build to publish a single jar to the Artifactory, which merges both¬† sub_module1 &amp; sub_module2 into a single Jar (with a single version) So they can use it as API dependency rather than implementing sub-modules in there build.gradle for <code>dependencies</code></p>\n<p>In short something like¬†</p>\n<pre><code>dependencies { \n   api &quot;com.mypackage:MyLib:$MyLibVersion&quot;\n}\n</code></pre>\n<p>to be used by the end-user of my library.</p>\n<p>instead, the user saying</p>\n<pre><code>dependencies { \n    implementation &quot;package:sub_module1:$MyLibVersion&quot;\n    implementation &quot;package:sub_module2:$MyLibVersion&quot;\n}\n</code></pre>\n"},{"tags":["java","sonarqube","sonarqube-scan","sonarlint"],"comments":[{"owner":{"user_id":10533011,"display_name":"Donat"},"edited":false,"comment_id":133328829,"body":"I cannot see a real problem in the code. Maybe the implementation of the rule has a bug? What happens when you remove the annotations?"},{"owner":{"user_id":8778025,"display_name":"Prasad"},"edited":false,"comment_id":133329799,"body":"I tried removing annotations but nothing changed, also as I mentioned, there are another couple of classes which has the same annotations and inheritance and there is no error in there. I&#39;m also thinking about whether this is a sonar rule implementation bug or not."},{"owner":{"user_id":8778025,"display_name":"Prasad"},"edited":false,"comment_id":133329817,"body":"Started a discussion in the Sonar community, let&#39;s see. <a href=\"https://community.sonarsource.com/t/make-a-property-serializable-when-serializable-implemented-through-inheritance/84699\" rel=\"nofollow noreferrer\">community.sonarsource.com/t/&hellip;</a>"}],"owner":{"user_id":8778025,"display_name":"Prasad"},"view_count":70,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677057973,"question_id":75530595,"body":"<p>I have the following class structure,</p>\n<pre><code>public interface EnterpriseData extends Serializable {\n}\n\npublic interface ExtraData extends Serializable {\n}\n\n@Getter\n@ToString\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class UserAccount implements EnterpriseData {\n\n    @JsonProperty(&quot;account&quot;)\n    private AccountData account;\n\n    //No handwritten methods in this class\n}\n\n\n@Getter\n@ToString\n@JsonIgnoreProperties(ignoreUnknown = true)\npublic class AccountData implements ExtraData {\n\n    //Some String fields and setter methods for those fields.\n\n}\n</code></pre>\n<p>When I run the SonarQube for the above classes, I get the <code>Make &quot;account&quot; transient or serializable</code> error in SonarQube as a Critical issue.</p>\n<p>UserAccount and AccountData are two simple classes, and there are another couple of classes that implement the <code>EnterpriseData</code> and <code>ExtraData</code> interfaces similar to the above ones. Also, those classes have similar implementation similar to the above classes.\nAnd I'm not getting that Sonar issue for those classes.\n<br>\nAnd when I implement the <code>Serializable</code> directly in the <code>AccountData</code> class definition, the Sonar is no longer showing that error.</p>\n<p>I'm using IntelliJ by adding the SonarLint plugin, and it is configured with the SonarQube server but the SonarLint is not showing that error from the beginning.<br>I would like to get some insight/fixes about this weird issue.\n<br><br>\nI'm using Jackson and Lombok in these classes. SonarQube version is 9.8.0.</p>\n"},{"tags":["java","spring","spring-mvc","jsp"],"comments":[{"owner":{"user_id":20306007,"display_name":"life888888"},"edited":false,"comment_id":133256833,"body":"<code>javax.servlet:jstl</code> ? use <code>jakarta</code> do not use <code>javax</code>, Tomcat 10,x."},{"owner":{"user_id":796761,"display_name":"dbreaux"},"edited":false,"comment_id":133286875,"body":"What are the details of the 500 error, and what is logged by Spring? What you have looks correct to me."}],"owner":{"user_id":21260030,"display_name":"extrasexq"},"view_count":45,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1677002052,"question_id":75524177,"body":"<p>I'm trying to write a web application using Spring MVC and ran into a problem<br />\nWhen passing any collection to jsp catching the exception:<br />\n<strong>java.lang.ClassNotFoundException: org.apache.jsp.WEB_002dINF.pages.films_jsp</strong><br />\nand HTTP status 500, but if I pass any other object that is not a collection, then everything is fine</p>\n<p><em>films.jsp:</em></p>\n<pre><code>&lt;%@ taglib prefix=&quot;c&quot; uri=&quot;http://java.sun.com/jsp/jstl/core&quot; %&gt;\n&lt;%@ page contentType=&quot;text/html;charset=UTF-8&quot; language=&quot;java&quot; %&gt;\n&lt;html&gt;\n&lt;head&gt;\n    &lt;title&gt;FILMS&lt;/title&gt;\n&lt;/head&gt;\n&lt;body&gt;\n&lt;h2&gt;Films&lt;/h2&gt;\n&lt;table&gt;\n    &lt;tr&gt;\n        &lt;th&gt;id&lt;/th&gt;\n        &lt;th&gt;title&lt;/th&gt;\n        &lt;th&gt;year&lt;/th&gt;\n        &lt;th&gt;genre&lt;/th&gt;\n        &lt;th&gt;watched&lt;/th&gt;\n        &lt;th&gt;action&lt;/th&gt;\n    &lt;/tr&gt;\n    &lt;c:forEach var=&quot;film&quot; items=&quot;${filmsList}&quot;&gt;\n        &lt;tr&gt;\n            &lt;td&gt;${film.id}&lt;/td&gt;\n            &lt;td&gt;${film.title}&lt;/td&gt;\n            &lt;td&gt;${film.year}&lt;/td&gt;\n            &lt;td&gt;${film.genre}&lt;/td&gt;\n            &lt;td&gt;${film.watched}&lt;/td&gt;\n            &lt;td&gt;\n                &lt;a href=&quot;/edit/${film.id}&quot;&gt;edit&lt;/a&gt;\n                &lt;a href=&quot;/delete/${film.id}&quot;&gt;delete&lt;/a&gt;\n            &lt;/td&gt;\n        &lt;/tr&gt;\n    &lt;/c:forEach&gt;\n&lt;/table&gt;\n&lt;a href=&quot;/add&quot;&gt;Add new film&lt;/a&gt;&lt;/body&gt;\n&lt;/html&gt;\n</code></pre>\n<p><em>pom.xml:</em></p>\n<pre><code>&lt;project xmlns=&quot;http://maven.apache.org/POM/4.0.0&quot; xmlns:xsi=&quot;http://www.w3.org/2001/XMLSchema-instance&quot;\n  xsi:schemaLocation=&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;&gt;\n  &lt;modelVersion&gt;4.0.0&lt;/modelVersion&gt;\n\n  &lt;groupId&gt;org.example&lt;/groupId&gt;\n  &lt;artifactId&gt;Filmography&lt;/artifactId&gt;\n  &lt;version&gt;1.0-SNAPSHOT&lt;/version&gt;\n  &lt;packaging&gt;war&lt;/packaging&gt;\n\n  &lt;name&gt;Filmography&lt;/name&gt;\n  &lt;url&gt;http://maven.apache.org&lt;/url&gt;\n\n  &lt;properties&gt;\n    &lt;project.build.sourceEncoding&gt;UTF-8&lt;/project.build.sourceEncoding&gt;\n    &lt;maven.compiler.source&gt;19&lt;/maven.compiler.source&gt;\n    &lt;maven.compiler.target&gt;19&lt;/maven.compiler.target&gt;\n  &lt;/properties&gt;\n\n  &lt;dependencies&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;junit&lt;/groupId&gt;\n      &lt;artifactId&gt;junit&lt;/artifactId&gt;\n      &lt;version&gt;3.8.1&lt;/version&gt;\n      &lt;scope&gt;test&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;org.springframework&lt;/groupId&gt;\n      &lt;artifactId&gt;spring-webmvc&lt;/artifactId&gt;\n      &lt;version&gt;6.0.0&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;jakarta.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;jakarta.servlet-api&lt;/artifactId&gt;\n      &lt;version&gt;6.0.0&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;javax.servlet&lt;/groupId&gt;\n      &lt;artifactId&gt;jstl&lt;/artifactId&gt;\n      &lt;version&gt;1.2&lt;/version&gt;\n    &lt;/dependency&gt;\n    &lt;dependency&gt;\n      &lt;groupId&gt;jakarta.servlet.jsp&lt;/groupId&gt;\n      &lt;artifactId&gt;jakarta.servlet.jsp-api&lt;/artifactId&gt;\n      &lt;version&gt;3.0.0&lt;/version&gt;\n      &lt;scope&gt;provided&lt;/scope&gt;\n    &lt;/dependency&gt;\n  &lt;/dependencies&gt;\n&lt;/project&gt;\n</code></pre>\n<p><em>Controller.java:</em></p>\n<pre><code>...\n    @RequestMapping(value = &quot;/&quot;, method = RequestMethod.GET)\n    public ModelAndView allFilms() {\n        List&lt;Film&gt; films = new ArrayList&lt;&gt;();\n\n        films.add(new Film(0, &quot;Pie&quot;, 1991, &quot;Fantasy&quot;));\n        films.add(new Film(1, &quot;Passion&quot;, 2003, &quot;Drama&quot;));\n\n        ModelAndView modelAndView = new ModelAndView();\n        modelAndView.setViewName(&quot;newFilms&quot;);\n        modelAndView.addObject(&quot;filmsList&quot;, films);\n        return modelAndView;\n    }\n...\n</code></pre>\n<p>I suspect that the problem is in the Spring or in the versions of the connected dependencies. If it matters i use Tomcat</p>\n"},{"tags":["java","unit-testing","intellij-idea","testng"],"comments":[{"owner":{"user_id":21033369,"display_name":"LJ replica"},"edited":false,"comment_id":133237534,"body":"As far as I know, the IDEA and Gradle would run all tests by default even if one failed. Do you have any annotation like <code>@Ignore</code> in the last test which ignores it? If you comment on the failed test, would the last test still ignore or not?"},{"owner":{"user_id":17193441,"display_name":"Srinivasu Kaki"},"edited":false,"comment_id":133337110,"body":"Based on your screenshot, you are using Hard Asserts which stops the entire execution in the event of assertion failure. If you want to continue the execution irrespective of fail or pass, replace Assert statements with Soft Assertions wherever you expect a failure."}],"owner":{"user_id":12133207,"display_name":"Lucien Evans"},"view_count":49,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676961074,"question_id":75516972,"body":"<p>I am using testng to do some unit tests. When I run it on the idea of my local windows pc, one of these unit tests failed, and the subsequent unit tests were skipped. It shows like this:\n<a href=\"https://i.stack.imgur.com/7aZrq.png\" rel=\"nofollow noreferrer\"><img src=\"https://i.stack.imgur.com/7aZrq.png\" alt=\"enter image description here\" /></a></p>\n<p>My BackGroud:\nWindows 11 22H2</p>\n<p>java version &quot;1.8.0_301&quot;\nJava(TM) SE Runtime Environment (build 1.8.0_301-b09)\nJava HotSpot(TM) 64-Bit Server VM (build 25.301-b09, mixed mode)</p>\n<p>TestNg 6.14.3</p>\n<p>IntelliJ IDEA 2021.2.1 (Ultimate Edition)\nBuild #IU-212.5080.55</p>\n<p>I want it to continue running unitl all unit tests finish, so I can see how many unit tests have problems in total„ÄÇ</p>\n<p>What should I do ?</p>\n"},{"tags":["java","kotlin","google-maps"],"comments":[{"owner":{"user_id":18422887,"display_name":"Yrll"},"edited":false,"comment_id":133299042,"body":"Welcome to Stack Overflow! Can you please put together a <a href=\"https://stackoverflow.com/help/minimal-reproducible-example\">minimal reproducible example</a> and add it to a git hosting provider (e.g. github, bitbucket, etc)? The easiest way to do this might be to fork the Google Maps Android API Samples Repository and modify one of the existing demo activities:  <a href=\"https://github.com/googlemaps/android-samples\" rel=\"nofollow noreferrer\">github.com/googlemaps/android-samples</a>   Then you can list steps to reproduce the problem, so that the community might be able to help you better."}],"owner":{"user_id":21250989,"display_name":"Sukhwinder Kaur"},"view_count":35,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676900862,"question_id":75510051,"body":"<p>I am trying to remove poly line's without using for loop. Most of the Solutions  are with for loop. if we are remove using for loop , then it will not removing the poly lines.</p>\n<pre><code>var polyline: Polyline? = null\npolyline = mMap!!.addPolyline((PolylineOptions().addAll(listPolyArray).width(5f).color(requireActivity().getResources().getColor(R.color.green)).geodesic(true)))\n\npolyline!!.remove()\n\n</code></pre>\n"},{"tags":["java","regex"],"comments":[{"owner":{"user_id":21249675,"display_name":"PeVo"},"edited":false,"comment_id":133221578,"body":"unfortunately no effect"},{"owner":{"user_id":14870617,"display_name":"NIKUNJ PATEL"},"edited":false,"comment_id":133221596,"body":"try <code>&quot;^(.*?)([ _\\\\-.]-|[ _\\\\-.])(\\\\d{1,5})(.*)$&quot;</code>"},{"owner":{"user_id":21249675,"display_name":"PeVo"},"edited":false,"comment_id":133227649,"body":"Sorry, bad pattern error, see <a href=\"https://regex101.com/r/PgXNBR/1\" rel=\"nofollow noreferrer\">regex101.com/r/PgXNBR/1</a>"}],"answers":[{"owner":{"user_id":5424988,"display_name":"The fourth bird"},"up_vote_count":0,"is_accepted":true,"creation_date":1676930074,"answer_id":75514494,"body":"<p>If you are only replacing with capture group 1, you don't need 3 capture groups in the pattern. The first <code>.*</code> matches the whole string so that one should be non greedy.</p>\n<p>The <code>-</code> in the character class can be at the end so you don' have to escape it, and you don't have to escape the dot in the character class.</p>\n<p>In the code you can directly <code>return sStreet;</code> instead of overwriting the string <code>sRet</code> first.</p>\n<pre><code>public static String cutAddressStreet(String sFull)\n{\n    String sRet = &quot;&quot;;\n    String sRegEx = &quot;^(.*?)(?: - |[ _.-])\\\\d{1,5}$&quot;;\n    if (sFull.matches(sRegEx))\n    {\n        String sStreet = sFull.replaceFirst(sRegEx, &quot;$1&quot;);\n        System.out.println(&quot;cut=\\&quot;&quot; + sStreet + &quot;\\&quot; from &quot; + sFull);\n        return sStreet;\n    }\n    return sRet;\n}\n</code></pre>\n<p>The output of the code:</p>\n<pre><code>cut=&quot;strassen name&quot; from strassen name 1344\ncut=&quot;strassen name&quot; from strassen name-1344\ncut=&quot;strassen name&quot; from strassen name - 1344\n</code></pre>\n"}],"owner":{"user_id":21249675,"display_name":"PeVo"},"view_count":41,"up_vote_count":2,"accepted_answer_id":75514494,"answer_count":1,"score":2,"creation_date":1676888182,"question_id":75507946,"body":"<p>I'm having trouble formulating a regex string to match &quot; - &quot; or any character from this array [ _-.].\nThis my example string doesn't work ( - |[ _\\-\\.])</p>\n<p>My test program in Java:</p>\n<pre><code>cutAddressStreet(&quot;strassen name 1344&quot;); // &quot;strassen name&quot; ok\ncutAddressStreet(&quot;strassen name-1344&quot;); // &quot;strassen name&quot; ok\ncutAddressStreet(&quot;strassen name - 1344&quot;); // &quot;strassen name -&quot;  &lt;- Problem\ncutAddressStreet(&quot;strassen name,1344&quot;); // &quot;&quot;  ok\n</code></pre>\n<pre><code>public static String cutAddressStreet(String sFull)\n{\n   String sRet = &quot;&quot;;\n   String sRegEx = &quot;^(.*)( - |[ _\\\\-\\\\.])(\\\\d{1,5})(.*)$&quot;;\n   if (sFull.matches(sRegEx))\n   { // Yes , this is Street with Number\n      String sStreet = sFull.replaceFirst(sRegEx, &quot;$1&quot;);\n      System.out.println(&quot;cut=\\&quot;&quot; + sStreet + &quot;\\&quot; from &quot; + sFull);\n      sRet = sStreet;\n   }\n   return sRet;\n}\n</code></pre>\n<p><a href=\"https://regex101.com/r/ZUg5Z3/1\" rel=\"nofollow noreferrer\">https://regex101.com/r/ZUg5Z3/1</a></p>\n"},{"tags":["java","itext","pdfbox","apache-tika"],"comments":[{"owner":{"user_id":535646,"display_name":"Tilman Hausherr"},"edited":false,"comment_id":133212186,"body":"There is no such thing as a &quot;line number&quot; in PDFs, only coordinates. You can put text wherever you want, in whatever rotation you want."}],"owner":{"user_id":20622382,"display_name":"Seriously"},"view_count":38,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676822010,"question_id":75501379,"body":"<p>Is there an any way to get the line no along with the text i'm extracting using pdfbox?</p>\n<p>I got no of pages using .getNumberOfPages() method.\nand I'm iterating over pages to extract text page by page using .getText() method.\nand I'm storing extracted text in String variable.</p>\n<p>Just Curious, why there isn't any method for line number in both apache pdfbox and itext library?</p>\n"},{"tags":["java","android","processbuilder"],"comments":[{"owner":{"user_id":16320675,"display_name":"user16320675"},"edited":false,"comment_id":133210188,"body":"common question... <code>|</code> is interpreted by some shell process, <code>ProcessBuilder</code> does not (but usually it can start a shell too) - <a href=\"https://stackoverflow.com/search?q=%5Bprocessbuilder%5D+pipe\">searching</a> for <code>[processbuilder] pipe</code> should find <i>some</i> question handling this problem... like <a href=\"https://stackoverflow.com/questions/3776195/using-java-processbuilder-to-execute-a-piped-command\">Using Java ProcessBuilder to Execute a Piped Command</a>"},{"owner":{"user_id":16376827,"display_name":"g00se"},"edited":false,"comment_id":133211960,"body":"@user16320675 is correct. So if you want to use a pipe, start a shell, such as <code>bash -c .......</code> (if you have it on Android)"}],"owner":{"user_id":5254732,"display_name":"Rohit"},"view_count":39,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676816491,"question_id":75500790,"body":"<p>I want to search logcat for a specific keyword using grep:</p>\n<pre><code>ProcessBuilder(\n    listOf(&quot;logcat&quot;, &quot;-d&quot;, &quot;|&quot;, &quot;grep&quot;, &quot;&lt;regex-match&gt;&quot;)\n).start().inputStream.use {\n    BufferedReader(InputStreamReader(it)).forEachLine {\n        ...\n    }\n}\n</code></pre>\n<p>But, I later found that this isn't really working, reason being that pipe results in another process. JDK 9 <a href=\"https://stackoverflow.com/a/71696115/5254732\">offers</a> startPipeline() method as a way to counter this.</p>\n<p>I don't see my android build with this API. Given upgrading JDK version is a long process in my case (if possible), is there a method to achieve the same result with current APIs?</p>\n<p>PS: I tried looping though output of &quot;logcat -d&quot; and filtering, but that takes too much time.</p>\n"},{"tags":["java","spring","grpc"],"answers":[{"owner":{"user_id":21372081,"display_name":"‰ªòÂêéÈí∞"},"up_vote_count":0,"is_accepted":false,"creation_date":1678464682,"answer_id":75698462,"body":"<p>Since autoconfiguration changed in springboot 3, META-INF/spring.factories was updated to META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports.\nThe update prevented grpc-client from autowiring.\nOn the latest master branch, the automatic assembly of springboot3 has been added. You can download the source code and compile and install it.</p>\n<p><a href=\"https://i.stack.imgur.com/0yQ4z.jpg\" rel=\"nofollow noreferrer\">source code</a></p>\n"},{"owner":{"user_id":9172198,"display_name":"Moh3n Sadeghi"},"up_vote_count":0,"is_accepted":false,"creation_date":1683103885,"answer_id":76162025,"body":"<p>Based on <a href=\"https://github.com/yidongnan/grpc-spring-boot-starter/issues/823\" rel=\"nofollow noreferrer\">this issue</a> you must use the following configuration in your project :</p>\n<pre><code>import org.springframework.boot.autoconfigure.ImportAutoConfiguration;\nimport org.springframework.context.annotation.Configuration;\n\n@Configuration\n@ImportAutoConfiguration({\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientMetricAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientHealthAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientSecurityAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcClientTraceAutoConfiguration.class,\n        net.devh.boot.grpc.client.autoconfigure.GrpcDiscoveryClientAutoConfiguration.class,\n\n        net.devh.boot.grpc.common.autoconfigure.GrpcCommonCodecAutoConfiguration.class,\n        net.devh.boot.grpc.common.autoconfigure.GrpcCommonTraceAutoConfiguration.class,\n\n        net.devh.boot.grpc.server.autoconfigure.GrpcAdviceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcHealthServiceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataConsulConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataEurekaConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataNacosConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcMetadataZookeeperConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcReflectionServiceAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerFactoryAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerMetricAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerSecurityAutoConfiguration.class,\n        net.devh.boot.grpc.server.autoconfigure.GrpcServerTraceAutoConfiguration.class\n})\npublic class GrpcConfig {\n}\n</code></pre>\n"}],"owner":{"user_id":15777370,"display_name":"vszholobov"},"view_count":517,"up_vote_count":2,"answer_count":2,"score":2,"creation_date":1676790067,"question_id":75498501,"body":"<p>I am making grpc client using <code>net.devh.grpc-client-spring-boot-starter</code></p>\n<p>Client:</p>\n<pre><code>@Service\npublic class SystemService {\n    @GrpcClient(&quot;handyman-client&quot;)\n    StatusServiceGrpc.StatusServiceBlockingStub handymanClient;\n\n    public VersionResponse getHandymanVersion() {\n        return handymanClient.getVersion(Empty.newBuilder().build());\n    }\n}\n</code></pre>\n<p>application.yaml:</p>\n<pre><code>grpc:\n  client:\n    handyman-client:\n      address: static://localhost:8080\n      negotiationType: plaintext\n</code></pre>\n<p>In runtime <code>handymanClient</code> is <code>null</code>. Tried spring boot versions from <code>3.0.0</code> to <code>3.0.2</code>. Lowering the spring boot version to <code>2.7.0</code> solves the problem - the client is being created now.</p>\n<p>Is there a workaround to make it work on spring boot 3?</p>\n<p>build.gradle:\n<div class=\"snippet\" data-lang=\"js\" data-hide=\"true\" data-console=\"true\" data-babel=\"false\">\r\n<div class=\"snippet-code snippet-currently-hidden\">\r\n<pre class=\"snippet-code-js lang-js prettyprint-override\"><code>plugins {\nid 'java'\nid 'org.springframework.boot' version '3.0.0'\nid 'io.spring.dependency-management' version '1.1.0'\nid \"com.google.protobuf\" version \"0.9.2\"\n}\n\ngroup = 'hello.grpc'\nversion = '0.0.1-SNAPSHOT'\nsourceCompatibility = '17'\n\nconfigurations {\ncompileOnly {\n    extendsFrom annotationProcessor\n}\n}\n\nrepositories {\nmavenCentral()\n}\n\ndependencies {\nimplementation 'org.springframework.boot:spring-boot-starter-actuator'\nimplementation 'org.springframework.boot:spring-boot-starter-web'\ncompileOnly 'org.projectlombok:lombok'\nannotationProcessor 'org.projectlombok:lombok'\ntestImplementation 'org.springframework.boot:spring-boot-starter-test'\nimplementation 'io.micrometer:micrometer-registry-prometheus'\nimplementation 'javax.annotation:javax.annotation-api:1.3.2'\n\nimplementation group: 'net.devh', name: 'grpc-client-spring-boot-starter', version: '2.13.0.RELEASE'\nimplementation group: 'io.grpc', name: 'grpc-stub', version: '1.53.0'\nimplementation group: 'io.grpc', name: 'grpc-protobuf', version: '1.53.0'\n\n}\n\nsourceSets {\nmain {\n    java {\n        srcDirs 'build/generated/source/proto/main/grpc'\n        srcDirs 'build/generated/source/proto/main/java'\n    }\n}\n}\n\nprotobuf {\nprotoc {\n    artifact = 'com.google.protobuf:protoc:4.0.0-rc-2'\n}\nplugins {\n    grpc {\n        artifact = 'io.grpc:protoc-gen-grpc-java:1.53.0'\n    }\n}\ngenerateProtoTasks {\n    all()*.plugins {\n        grpc {}\n    }\n}\n}\n\ntasks.named('test') {\nuseJUnitPlatform()\n}\n\nspringBoot {\nbuildInfo()\n}</code></pre>\r\n</div>\r\n</div>\r\n</p>\n"},{"tags":["java","maven","maven-3","java-module"],"comments":[{"owner":{"user_id":10871900,"display_name":"dan1st"},"edited":false,"comment_id":133197080,"body":"What exactly do you mean with <code>extending java.lang</code> and why do you want tp do that? Have you tried splitting <code>&lt;arg&gt;--patch-module java.base=src&lt;&#47;arg&gt;</code> into <code>&lt;arg&gt;--patch-module&lt;&#47;arg&gt;&lt;arg&gt;java.base=src&lt;&#47;arg&gt;</code>?"},{"owner":{"user_id":1357315,"display_name":"NemanjaSRB"},"edited":false,"comment_id":133197269,"body":"Because one of my classes is using the <code>package private</code> constructor of the String.class to avoid copying the char[] array. It&#39;s something I&#39;m looking to remove as the process of migration from JDK 1.8 to JDK 19.  Until then to get back to <code>--patch-module</code> - yes I tried splitting it up and it doesn&#39;t work. As I said <code>--patch-module</code> option is not in a BASIC group of Options for JavacTool argument options."},{"owner":{"user_id":10871900,"display_name":"dan1st"},"edited":false,"comment_id":133197701,"body":"Why do you need to the package private constructor instead of just using a reference to the original string? Modifying the <code>java.base</code> module for things like that is...a very bad idea"},{"owner":{"user_id":3149528,"display_name":"Slawomir Jaranowski"},"edited":false,"comment_id":133198540,"body":"Try with <code>fork</code> options of m-compiler-p <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#fork\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-compiler-plugin/&hellip;</a>"},{"owner":{"user_id":1357315,"display_name":"NemanjaSRB"},"edited":false,"comment_id":133200687,"body":"@SlawomirJaranowski did that - it still uses JavacTool just as a separate process from the main one."},{"owner":{"user_id":1357315,"display_name":"NemanjaSRB"},"edited":false,"comment_id":133200706,"body":"@dan1st &#39;cause I want to avoid double allocation of the humongous objects on the heap when converting <code>char[]</code> to <code>String</code> - and I can&#39;t find a <code>String</code> constructor that allows me to pass <code>char[]</code> and reuse it - all of them underneath do the <code>copy</code> to a newly allocated array."},{"owner":{"user_id":10871900,"display_name":"dan1st"},"edited":false,"comment_id":133200809,"body":"Then you should probably think about implementing another way (e.g. using <code>StringBuilder</code>) instead of relying on unsupported and inaccessible features that require patching the java.base module. Aside from that, the <a href=\"https://github.com/openjdk/jdk/blob/d6716d2e5471ee794df8833430dd3171b565f78e/src/java.base/share/classes/java/lang/String.java#L4503\" rel=\"nofollow noreferrer\">package private constructor using a <code>char[]</code></a> <b>still copies all the data</b> /allocates a new object with it because <code>String</code> uses a <code>byte[]</code>."},{"owner":{"user_id":10871900,"display_name":"dan1st"},"edited":false,"comment_id":133200832,"body":"Also, creating strings with custom arrays compromises JDK safeguards/guarantees resulting in bugs that are very hard to debug."},{"owner":{"user_id":1357315,"display_name":"NemanjaSRB"},"edited":false,"comment_id":133200965,"body":"It is true since JDK 9 - prior to it Java used char[] (can&#39;t copy source code in the comment it clutters the response). With regards to the &quot;cleverness&quot; of the idea - I agree but it&#39;s another topic - StringBuilder creates a copy of a String thus duplicating amount of heap usage."},{"owner":{"user_id":845414,"display_name":"Johannes Kuhn"},"edited":false,"comment_id":133203515,"body":"You don&#39;t want to copy the array, therefore you use a method that is much more expensive. Doesn&#39;t sound like a great idea to me."},{"owner":{"user_id":1357315,"display_name":"NemanjaSRB"},"edited":false,"comment_id":133203948,"body":"Want to thank @dan1st for challenging the idea - made me dig down into <code>String</code> changes since JDK 1.7 and actually ended up refactoring the piece requiring that private constructor. Since they moved to <code>byte[]</code> I managed to refactor dependent methods to provide byte[] in the first place and remove that <code>char[]</code> altogether from the middle."},{"owner":{"user_id":1357315,"display_name":"NemanjaSRB"},"edited":false,"comment_id":133203954,"body":"Not sure if the question should remain open - <code>Javac API</code> still does not allow for <code>--patch-module</code> compiler option to be used through Maven 3?"},{"owner":{"user_id":3149528,"display_name":"Slawomir Jaranowski"},"edited":false,"comment_id":133207034,"body":"Next options to try: <a href=\"https://maven.apache.org/plugins/maven-compiler-plugin/compile-mojo.html#forceJavacCompilerUse\" rel=\"nofollow noreferrer\">maven.apache.org/plugins/maven-compiler-plugin/&hellip;</a>"},{"owner":{"user_id":296328,"display_name":"khmarbaise"},"edited":false,"comment_id":133207715,"body":"You should set <code>&lt;maven.compiler.release&gt;8&lt;&#47;maven.compiler.release&gt;</code> while building with JDK19 also remove <code>package private constructor of the String.class to avoid copying the char[] array.</code>... there is a reason why a constructor of a class is package private... means do not use it... If everything build ... lift the version to 19..."},{"owner":{"user_id":10871900,"display_name":"dan1st"},"edited":false,"comment_id":133208917,"body":"I hope you refactored it in a way that doesn&#39;t require calling private or package-private members. Because you should <i>really</i> not do that unless you want your program to completely break beyond all repair."},{"owner":{"user_id":1357315,"display_name":"NemanjaSRB"},"edited":false,"comment_id":133209208,"body":"Code served its purpose for the past 8 years in production ... time to move on. Basically that code converted <code>byte[]</code> to <code>char[]</code> and it avoided making another copy of a <code>char[]</code> by using normal constructor. That&#39;s why it used <code>package private String(char[], boolean)</code>. Now since String support <code>byte[]</code> constructor I just let the <code>String(byte[], int, int, Charset)</code> constructor makes it&#39;s own <code>char[]</code> - memory footprint remains the same, no <code>package private</code> and thus moved the entire library into normal JAR packaging."},{"owner":{"user_id":2711488,"display_name":"Holger"},"edited":false,"comment_id":133348710,"body":"Where does the <code>byte[]</code> array come from? In case of an external source, note that when you read a file into a <code>String</code> via <a href=\"https://docs.oracle.com/en/java/javase/17/docs/api/java.base/java/nio/file/Files.html#readString(java.nio.file.Path,java.nio.charset.Charset)\" rel=\"nofollow noreferrer\"><code>Files.readString(pathÔºª,charsetÔºΩ)</code></a> there might be even less copying. In either case, it‚Äôs a good idea to use the builtin charset conversion, as it is highly optimized (for the commonly used charsets) and may use tricks, ordinary application code can‚Äôt do, but without compatibility issues."}],"owner":{"user_id":1357315,"display_name":"NemanjaSRB"},"view_count":88,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676721246,"question_id":75493155,"body":"<p>Maven 3.9.0 invalid flag <code>--patch-module</code> is what I get when I run <code>mvn clean compile</code> on my project that extends <code>java.lang</code> package. When I run <code>javac --patch-module java.base=src &lt;path-to-source&gt;</code> all is good.</p>\n<p>The reason is - Maven uses <code>com.sun.tools.javac.api.JavacTool</code> which when parsing <code>&lt;compilerArgs&gt;</code> is using only the <code>BASIC</code> Option group and <code>--patch-module</code> is in the <code>FILEMANAGER</code> group. This raises an <code>illegal flag</code> exception during <code>mvn clean compile</code>.</p>\n<p>Does anyone know how I can get it to work with Maven? I'd prefer not to make my CI pipeline using <code>javac</code> command line tool.</p>\n<p>Project structure is like:\nsrc -&gt; main -&gt; java -&gt; java.lang -&gt; </p>\n<p><code>pom.xml</code> looks like:</p>\n<pre><code>        &lt;plugins&gt;\n            &lt;plugin&gt;\n                &lt;groupId&gt;org.apache.maven.plugins&lt;/groupId&gt;\n                &lt;artifactId&gt;maven-compiler-plugin&lt;/artifactId&gt;\n                &lt;version&gt;3.10.1&lt;/version&gt;\n                &lt;configuration&gt;\n                    &lt;source&gt;${java.source.sdk}&lt;/source&gt;\n                    &lt;target&gt;${java.source.sdk}&lt;/target&gt;\n                    &lt;compilerArgs&gt;\n                        &lt;arg&gt;--patch-module java.base=src&lt;/arg&gt;\n                    &lt;/compilerArgs&gt;\n                &lt;/configuration&gt;\n            &lt;/plugin&gt;\n        &lt;/plugins&gt;\n</code></pre>\n<p>Maven version:</p>\n<pre><code>Maven home: /opt/homebrew/Cellar/maven/3.9.0/libexec\nJava version: 18, vendor: Oracle Corporation, runtime: /Users/&lt;username&gt;/Library/Java/JavaVirtualMachines/openjdk-18/Contents/Home\nDefault locale: en_RS, platform encoding: UTF-8\nOS name: &quot;mac os x&quot;, version: &quot;12.6.2&quot;, arch: &quot;aarch64&quot;, family: &quot;mac&quot;\n</code></pre>\n<p>Used JDK 19 -&gt; same result. Used Maven 3.10.1 -&gt; same result.</p>\n<p>Full error is:</p>\n<p><code>[ERROR] Failed to execute goal org.apache.maven.plugins:maven-compiler-plugin:3.10.1:compile (default-compile) on project commons-bootstrap: Fatal error compiling: error: invalid flag: --patch-module java.base=src -&gt; [Help 1]</code></p>\n<p>Exception stacktrace:</p>\n<pre><code>Caused by: java.lang.IllegalArgumentException: error: invalid flag: --patch-module java.base=src\n    at com.sun.tools.javac.main.Arguments.reportDiag (Arguments.java:889)\n    at com.sun.tools.javac.main.Arguments.doProcessArgs (Arguments.java:395)\n    at com.sun.tools.javac.main.Arguments.processArgs (Arguments.java:347)\n    at com.sun.tools.javac.main.Arguments.init (Arguments.java:246)\n    at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:191)\n    at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:119)\n    at com.sun.tools.javac.api.JavacTool.getTask (JavacTool.java:68)\n    at org.codehaus.plexus.compiler.javac.JavaxToolsCompiler.compileInProcess (JavaxToolsCompiler.java:135)\n    at org.codehaus.plexus.compiler.javac.JavacCompiler.performCompile (JavacCompiler.java:182)\n    at org.apache.maven.plugin.compiler.AbstractCompilerMojo.execute (AbstractCompilerMojo.java:1209)\n    at org.apache.maven.plugin.compiler.CompilerMojo.execute (CompilerMojo.java:198)\n    at org.apache.maven.plugin.DefaultBuildPluginManager.executeMojo (DefaultBuildPluginManager.java:126)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute2 (MojoExecutor.java:342)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.doExecute (MojoExecutor.java:330)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:213)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:175)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.access$000 (MojoExecutor.java:76)\n    at org.apache.maven.lifecycle.internal.MojoExecutor$1.run (MojoExecutor.java:163)\n    at org.apache.maven.plugin.DefaultMojosExecutionStrategy.execute (DefaultMojosExecutionStrategy.java:39)\n    at org.apache.maven.lifecycle.internal.MojoExecutor.execute (MojoExecutor.java:160)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:105)\n    at org.apache.maven.lifecycle.internal.LifecycleModuleBuilder.buildProject (LifecycleModuleBuilder.java:73)\n    at org.apache.maven.lifecycle.internal.builder.singlethreaded.SingleThreadedBuilder.build (SingleThreadedBuilder.java:53)\n    at org.apache.maven.lifecycle.internal.LifecycleStarter.execute (LifecycleStarter.java:118)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:260)\n    at org.apache.maven.DefaultMaven.doExecute (DefaultMaven.java:172)\n    at org.apache.maven.DefaultMaven.execute (DefaultMaven.java:100)\n    at org.apache.maven.cli.MavenCli.execute (MavenCli.java:821)\n    at org.apache.maven.cli.MavenCli.doMain (MavenCli.java:270)\n    at org.apache.maven.cli.MavenCli.main (MavenCli.java:192)\n    at jdk.internal.reflect.DirectMethodHandleAccessor.invoke (DirectMethodHandleAccessor.java:104)\n    at java.lang.reflect.Method.invoke (Method.java:577)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launchEnhanced (Launcher.java:282)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.launch (Launcher.java:225)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.mainWithExitCode (Launcher.java:406)\n    at org.codehaus.plexus.classworlds.launcher.Launcher.main (Launcher.java:347)\n</code></pre>\n"},{"tags":["java","spring-boot","jwt"],"comments":[{"owner":{"user_id":1180351,"display_name":"Rob Spoor"},"edited":false,"comment_id":133187397,"body":"<code>Claims::get(&quot;name of the token&quot;)</code> is not a valid method reference. Try this: <code>claims -&gt; claims.get(&quot;name of the token&quot;, String.class)</code>."}],"owner":{"user_id":4095333,"display_name":"Klaus Friman"},"view_count":156,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676646373,"question_id":75485975,"body":"<p>I'm trying in to get a custom claim from JWT token in Spring Boot. I am able to get the subject as below:</p>\n<pre><code>public String extractUsername(String token) {\n    return extractClaim(token,  Claims::getSubject);\n}\npublic &lt;T&gt; T extractClaim(String token, Function&lt;Claims, T&gt; claimsResolver) {\n    final Claims claims = extractAllClaims(token);\n    return claimsResolver.apply(claims);\n}\n</code></pre>\n<p>I tried  this</p>\n<pre><code>public String extractUsername(String token) {\n    return extractClaim(token,  Claims::get(&quot;name of the token&quot;));\n}\n</code></pre>\n<p>This didn't work. The function get is like getSubjet present under io.jsonwebtoken.claims.</p>\n"},{"tags":["java","multithreading","kubernetes","project-reactor"],"owner":{"user_id":11441432,"display_name":"Marvin"},"view_count":277,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676538310,"question_id":75469921,"body":"<p>There are around 60 Microservices hosted in Kubernetes in my company. Two of them have the problem of high CPU usage after some time. The CPU of the pod jumps up to 100% (the pod got allocated with one CPU of a newer AMD EPYC Generation) and then keeps on working at this rate. This problem appears randomly somewhere between the application start and us noticing and restarting/deleting the pod in the Kuberentes dashboard.</p>\n<p>The microservices all run with Spring-Boot 2.7.8 and using undertow instead of tomcat. As HTTP Library we're using Retrofit2 2.9.0 and OkHttp3 3.14.9. We're using Project Reactor.</p>\n<p>The Thread Dump has one potentially abnormal entry:</p>\n<pre><code>&quot;getProductVariants-260&quot; #354 prio=5 os_prio=0 cpu=678915664.69ms elapsed=687202.16s tid=0x00007f63d800a800 nid=0x170 runnable  [0x00007f643ccec000]\n   java.lang.Thread.State: RUNNABLE\n        at java.lang.Throwable.fillInStackTrace(java.base@11.0.17/Native Method)\n        at java.lang.Throwable.fillInStackTrace(java.base@11.0.17/Throwable.java:787)\n        - locked &lt;0x00000000f4132990&gt; (a okhttp3.internal.connection.RouteException)\n        at java.lang.Throwable.&lt;init&gt;(java.base@11.0.17/Throwable.java:315)\n        at java.lang.Exception.&lt;init&gt;(java.base@11.0.17/Exception.java:102)\n        at java.lang.RuntimeException.&lt;init&gt;(java.base@11.0.17/RuntimeException.java:96)\n        at okhttp3.internal.connection.RouteException.&lt;init&gt;(RouteException.java:31)\n        at okhttp3.internal.connection.ExchangeFinder.find(ExchangeFinder.java:96)\n        at okhttp3.internal.connection.Transmitter.newExchange(Transmitter.java:169)\n        at okhttp3.internal.connection.ConnectInterceptor.intercept(ConnectInterceptor.java:41)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)\n        at okhttp3.internal.cache.CacheInterceptor.intercept(CacheInterceptor.java:94)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)\n        at okhttp3.internal.http.BridgeInterceptor.intercept(BridgeInterceptor.java:93)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)\n        at okhttp3.internal.http.RetryAndFollowUpInterceptor.intercept(RetryAndFollowUpInterceptor.java:88)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)\n        at de.md.services.microframework.http.RetryInterceptor.intercept(RetryInterceptor.java:22)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)\n        at de.md.services.microframework.http.HttpLoggingInterceptor.intercept(HttpLoggingInterceptor.java:98)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)\n        at de.md.services.microframework.http.HeaderInterceptor.intercept(HeaderInterceptor.java:32)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)\n        at de.md.services.microframework.http.RetrofitClient.lambda$buildOkHttpClient$0(RetrofitClient.java:166)\n        at de.md.services.microframework.http.RetrofitClient$$Lambda$1044/0x0000000100959c40.intercept(Unknown Source)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:142)\n        at okhttp3.internal.http.RealInterceptorChain.proceed(RealInterceptorChain.java:117)\n        at okhttp3.RealCall.getResponseWithInterceptorChain(RealCall.java:229)\n        at okhttp3.RealCall.execute(RealCall.java:81)\n        at retrofit2.OkHttpCall.execute(OkHttpCall.java:204)\n        at com.jakewharton.retrofit2.adapter.reactor.ExecuteSinkConsumer.accept(ExecuteSinkConsumer.java:39)\n        at com.jakewharton.retrofit2.adapter.reactor.ExecuteSinkConsumer.accept(ExecuteSinkConsumer.java:24)\n        at reactor.core.publisher.FluxCreate.subscribe(FluxCreate.java:95)\n        at reactor.core.publisher.FluxSubscribeOn$SubscribeOnSubscriber.run(FluxSubscribeOn.java:194)\n        at reactor.core.scheduler.WorkerTask.call(WorkerTask.java:84)\n        at reactor.core.scheduler.WorkerTask.call(WorkerTask.java:37)\n        at java.util.concurrent.FutureTask.run(java.base@11.0.17/FutureTask.java:264)\n        at java.util.concurrent.ScheduledThreadPoolExecutor$ScheduledFutureTask.run(java.base@11.0.17/ScheduledThreadPoolExecutor.java:304)\n        at java.util.concurrent.ThreadPoolExecutor.runWorker(java.base@11.0.17/ThreadPoolExecutor.java:1128)\n        at java.util.concurrent.ThreadPoolExecutor$Worker.run(java.base@11.0.17/ThreadPoolExecutor.java:628)\n        at java.lang.Thread.run(java.base@11.0.17/Thread.java:829)\n</code></pre>\n<p>This thread does not look like it is running and this was always the case when I captured the dump. I also noticed that this thread stays, while other threads tasked with similar HTTP calls die after some time. This has been around for almost as long as the microservice runs. The thread seems to live as the stacktrace changes sometimes.</p>\n<p>The Method getProductVariants looks like this:</p>\n<pre><code>public Mono&lt;ProductVariantList&gt; getProductVariants(String productVariantIds, HttpServletRequest httpServletRequest) {\n        ProductConnector productConnector = retrofitClient.buildRetrofitClientReactorDefault(\n                connectorConfig.getProductService(), connectorConfig.getDefaultTimeout(), getProductVariantsScheduler,\n                httpServletRequest).create(ProductConnector.class);\n        return productConnector.getProductVariants(productVariantIds, connectorConfig.getSlapToken()) //\n                .doOnNext(res -&gt; ThirdPartyUtils.checkRetrofitResponse(res, LOGGER, &quot;ProductService&quot;))\n                .flatMap(MonoHelper::toResponseContentMono) //\n                .doOnError(error -&gt; LOGGER.error(&quot;getProductVariants ist auf einen Fehler gelaufen.&quot;, error));\n    }\n</code></pre>\n<p>The default timeout is 10 seconds. The scheduler is from Project Reactor and has a thread cap of 40 and a que cap of 100000. The connector just executes a ReST request and aquires less than 150kb of data from another microservice not related to this problem.</p>\n<p>The requests to this microservice are about 10 to 20 per minute and they are received by two instances of this microservice.</p>\n<p>The memory consumption of the service is normal and so is the memory dump. Does anyone have an idea how to look further into this matter?</p>\n"},{"tags":["java","hadoop","mapreduce"],"comments":[{"owner":{"user_id":637853,"display_name":"Thomas"},"edited":false,"comment_id":133156301,"body":"Don&#39;t use the very old class <code>StringTokenizer</code> but have a look at <code>String.split(regex)</code>. The regex you&#39;d be after would be <code>\\s</code>, i.e. the character class for whitespace which would be equivalent to <code>[ \\t\\r\\n\\f]</code> - so <code>String[] tokens = value.toString().split(&quot;\\\\s&quot;);</code> should do the trick."},{"owner":{"user_id":7082956,"display_name":"Valerij Dobler"},"edited":false,"comment_id":133161580,"body":"Or use Pattern.compile(&lt;your-regex&gt;) to extract the matched groups directly."},{"owner":{"user_id":21224707,"display_name":"sawada12341"},"edited":false,"comment_id":133162326,"body":"Thank you everyone, I will try and update once my question has been resolved!"}],"answers":[{"owner":{"user_id":7291698,"display_name":"user7291698"},"up_vote_count":0,"is_accepted":false,"creation_date":1676535654,"answer_id":75469500,"body":"<p>You can use <code>String.split()</code> and separate all possible delimiters by <code>&quot;|&quot;</code>. Note that some delimiters need to be escaped (e.g. <code>&quot;.&quot;</code> -&gt; <code>&quot;\\\\.&quot;</code>)</p>\n<p><strong>Example</strong>:</p>\n<pre><code>String input = &quot;123,45!67.890&quot;;\n\nString[] splitted = input.split(&quot;,|\\\\.|!&quot;);\nfor (String split : splitted) {\n    System.out.println(split);\n}\n</code></pre>\n<p><strong>Output</strong>:</p>\n<pre><code>123\n45\n67\n890\n</code></pre>\n"}],"owner":{"user_id":21224707,"display_name":"sawada12341"},"view_count":78,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1676531156,"question_id":75468845,"body":"<blockquote>\n<p>Update: The problem has been solved! Thanks everyone for helping!</p>\n</blockquote>\n<p>I have a dataset that looks like this:</p>\n<pre><code>Title: The Importance of Being Earnest\n       A Trivial Comedy for Serious People\n\n\nAuthor: Oscar Wilde\n</code></pre>\n<p>I would like to split the text via &quot;(space)\\t\\n\\r\\f&quot;, any other tokens such as &quot;,.:&quot; will be regarded as part of the words. Are there any efficient ways that I can split the tokens like so?</p>\n<p>I tried this:</p>\n<pre><code>public void map(Object key, Text value, Context context) throws IOException, InterruptedException {\n            StringTokenizer itr = new StringTokenizer(value.toString(), &quot;\\t&quot;);\n</code></pre>\n<p>I know you can split the tokens by a tab, is there a way to split the tokens by more than one delimiter?</p>\n"},{"tags":["java","spring"],"comments":[{"owner":{"user_id":9513184,"display_name":"Unmitigated"},"edited":false,"comment_id":133193171,"body":"You should probably <code>return &quot;main&quot;;</code> from the controller methods (remove the slash)."}],"owner":{"user_id":20967337,"display_name":"Andrey"},"view_count":44,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676489368,"question_id":75464607,"body":"<p>I've been trying to configure Spring without Spring Boot.</p>\n<p>I added a Tomcat, created the MainController class, and configured the Dispatcher Servlet</p>\n<p>but in an endpoint 'http://localhost:8080/main/hello I receive 404.</p>\n<p>I think it is problem in the ServletDispatcherConfig.</p>\n<p>This is my ¬†ServletDispatcherConfig¬† class</p>\n<pre><code>@Component\npublic class ServletDispatcherConfig extends AbstractAnnotationConfigDispatcherServletInitializer {\n    @Override\n    protected Class&lt;?&gt;[] getRootConfigClasses() {\n        return null;\n    }\n\n    @Override\n    protected Class&lt;?&gt;[] getServletConfigClasses() {\n        return new Class[] {SpringConfig.class};\n    }\n\n    @Override\n    protected String[] getServletMappings() {\n        return new String[] {&quot;/&quot;};\n    }\n}\n</code></pre>\n<p>and this is my SpringConfig class</p>\n<pre><code>\n@Configuration\n@ComponentScan(&quot;example.test&quot;)\n@EnableWebMvc\npublic class SpringConfig {\n\n\n    private final ApplicationContext applicationContext;\n\n    @Autowired\n    public SpringConfig(ApplicationContext applicationContext) {\n        this.applicationContext = applicationContext;\n    }\n\n\n    @Bean\n    public SpringResourceTemplateResolver templateResolver() {\n        var resolver = new SpringResourceTemplateResolver();\n        resolver.setCacheable(true);\n        resolver.setPrefix(&quot;/WEB-INF/templates/&quot;);\n        resolver.setSuffix(&quot;.html&quot;);\n        resolver.setApplicationContext(applicationContext);\n        resolver.setTemplateMode(TemplateMode.HTML);\n        return resolver;\n    }\n\n    @Bean\n    public SpringTemplateEngine templateEngine() {\n        var engine = new SpringTemplateEngine();\n        engine.setTemplateResolver(templateResolver());\n        engine.setEnableSpringELCompiler(true); // delete if any bugs will be\n        return engine;\n    }\n\n    @Bean\n    public ThymeleafViewResolver viewResolver() {\n        var templateResolver = new ThymeleafViewResolver();\n        templateResolver.setTemplateEngine(templateEngine());\n        return templateResolver;\n    }\n}\n</code></pre>\n<p>my MainController class</p>\n<pre><code>\n@Controller\n@RequestMapping(&quot;/main&quot;)\npublic class MainController {\n\n    @GetMapping(&quot;/first&quot;)\n    public String main() {\n        return &quot;/main&quot;;\n    }\n\n\n    @GetMapping(&quot;/hello&quot;)\n    public String hello() {\n        return &quot;/main&quot;;\n    }\n}\n</code></pre>\n"},{"tags":["java","spring-boot","prometheus","spring-boot-actuator"],"owner":{"user_id":1872168,"display_name":"Crystark"},"view_count":368,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676400880,"question_id":75452165,"body":"<p>I've been working with spring boot 2.7 and its tomcat server. Today, I'm trying out spring 3 with webflux and netty. As always I want to add the prometheus endpoint but I can't seem to make it work. Here's what I did:</p>\n<p>I added the following dependencies:</p>\n<pre><code>        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-webflux&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;groupId&gt;org.springframework.boot&lt;/groupId&gt;\n            &lt;artifactId&gt;spring-boot-starter-actuator&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n        &lt;dependency&gt;\n            &lt;!-- Required for the prometheus actuator endpoint --&gt;\n            &lt;groupId&gt;io.micrometer&lt;/groupId&gt;\n            &lt;artifactId&gt;micrometer-registry-prometheus&lt;/artifactId&gt;\n        &lt;/dependency&gt;\n</code></pre>\n<p>I have done the following configuration:</p>\n<pre><code>management:\n  endpoint:\n    metrics.enabled: true\n    prometheus.enabled: true\n  endpoints.web:\n    # Removing /actuator from all paths\n    base-path: /\n    path-mapping:\n      prometheus: metrics\n    exposure.include: health,prometheus\n</code></pre>\n<p>But whenever I call <code>/metrics</code> that usually works on all my other projects I get a 404. I've tried removing all the specificities like the path-mapping or the base-path change to no avail.</p>\n<p>I'm kinda stuck at this point.\n<strong>What am I missing here?</strong></p>\n"},{"tags":["java","hibernate","kotlin","jpa","quarkus"],"comments":[{"owner":{"user_id":2404683,"display_name":"Davide D&#39;Alto"},"edited":false,"comment_id":133135472,"body":"Could you create a runnable test case somewhere?"},{"owner":{"user_id":17280246,"display_name":"Adasiek"},"edited":false,"comment_id":133137226,"body":"@DavideD&#39;Alto Hello. Thx for help! I am sharing demo project <a href=\"https://github.com/damiankaplon/stack-question\" rel=\"nofollow noreferrer\">github.com/damiankaplon/stack-question</a>. We have generated clean Quarkus 2.16.2. Tried to provide minimal application to invoke an error. To test locally GET localhost:8080/demo"}],"owner":{"user_id":17280246,"display_name":"Adasiek"},"view_count":198,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676394306,"question_id":75451073,"body":"<p>We are migrating our application from Spring Data + Hibernate (it was working) to Quarkus Panache (version v2.16.2) + Reactive Hibernate.</p>\n<pre><code>abstract class BaseEntity&lt;ID&gt; : PanacheEntityBase {\n\n    open val id: ID? = null\n\n    override fun equals(other: Any?): Boolean {\n        if (this === other) return true\n        if (other == null || Hibernate.getClass(this) != Hibernate.getClass(other)) return false\n        other as BaseEntity&lt;*&gt;\n        return id != null &amp;&amp; id == other.id\n    }\n\n    override fun hashCode(): Int {\n        return javaClass.hashCode()\n    }\n\n    override fun toString(): String {\n        return &quot;${javaClass.simpleName}&lt;$id&gt;&quot;\n    }\n}\n</code></pre>\n<pre><code>@Embeddable\nclass AssociatedAccountCompositeId(\n\n    @Column(name = &quot;customer_account_id&quot;)\n    val customerAccountId: String,\n\n    @Column(name = &quot;promotion_code_id&quot;)\n    val promotionCodeId: Long\n\n) : Serializable {\n\n    companion object {\n        private const val serialVersionUID: Long = 845208461728L\n    }\n\n    override fun equals(other: Any?): Boolean {\n        if (this === other) return true\n        if (javaClass != other?.javaClass) return false\n\n        other as AssociatedAccountCompositeId\n\n        if (customerAccountId != other.customerAccountId) return false\n        if (promotionCodeId != other.promotionCodeId) return false\n        return true\n    }\n\n    override fun hashCode(): Int {\n        return Objects.hash(customerAccountId, promotionCodeId)\n    }\n\n    override fun toString(): String {\n        return &quot;${javaClass.simpleName}&lt;$customerAccountId&gt;&lt;$promotionCodeId&gt;&quot;\n    }\n}\n</code></pre>\n<pre><code>\n@Entity\n@Table(name = &quot;promotion_code&quot;)\nclass PromotionCodeEntity(\n\n    @OneToOne(mappedBy = &quot;promotionCode&quot;)\n    var associatedAccount: AssociatedAccountEntity?\n\n) : BaseEntity&lt;Long&gt;() {\n\n    @Id\n    @Column(name = &quot;promotion_code_id&quot;)\n    @SequenceGenerator(name = &quot;promotion_code_sq&quot;, sequenceName = &quot;promotion_code_sq&quot;, allocationSize = 100)\n    @GeneratedValue(strategy = SEQUENCE, generator = &quot;promotion_code_sq&quot;)\n    override val id: Long? = null\n}\n</code></pre>\n<pre><code>@Entity\n@Table(name = &quot;account_assoc&quot;)\nclass AssociatedAccountEntity(\n\n    @EmbeddedId\n    override val id: AssociatedAccountCompositeId,\n\n    @OneToOne\n    @JoinColumn(name = &quot;promotion_code_id&quot;, insertable = false, updatable = false)\n    val promotionCode: PromotionCodeEntity\n\n) : BaseEntity&lt;AssociatedAccountCompositeId?&gt;()\n</code></pre>\n<p>We were migrating the project and different CompositeKey works but here I cannot make it work for few days, and the main difference in OneToOne relationship. Right now I have prepared simplest possible usecase, am getting error:</p>\n<pre><code>fun method(customerId: String, dto: PromotionCodeAssignRequestParameters): Uni&lt;List&lt;PromotionCodeEntity&gt;&gt; {\n        return PromotionCodeEntity.findAll().list()\n}\n</code></pre>\n<pre><code>&quot;Error accessing field [private java.lang.String sth.promotion_campaigns_service.enitites.id.AssociatedAccountCompositeId.customerAccountId] by reflection for persistent property [sth.promotion_campaigns_service.enitites.id.AssociatedAccountCompositeId#customerAccountId] : 1&quot;,\n</code></pre>\n<p>I tried obvious things like manual open instead of gradle plugin or changing val to var everywhere. <br>\nAny help would be appreciated.</p>\n<p>EDIT\nI am attaching project w example <a href=\"https://github.com/damiankaplon/stack-question\" rel=\"nofollow noreferrer\">https://github.com/damiankaplon/stack-question</a></p>\n"},{"tags":["java","maven","amazon-sns"],"answers":[{"owner":{"user_id":21197077,"display_name":"gneginskiy"},"up_vote_count":0,"is_accepted":false,"creation_date":1676284664,"answer_id":75434763,"body":"<p>Have you specified scope below on purpose?</p>\n<pre><code>&lt;scope&gt;provided&lt;/scope&gt;\n</code></pre>\n<p>&quot;provided&quot; dependency should be provided by application server / servlet container.\nIf they are not provided, the deployment will fail. Try to change scope to compile to make the dependency a part of a package.</p>\n"}],"owner":{"user_id":19312929,"display_name":"Mario R"},"view_count":417,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1676280316,"question_id":75434020,"body":"<p>I am trying to integrate AWS SNS in my maven project. I get below error while deploying the code¬†</p>\n<pre><code>Could not start bundle aem-myproject.core [622]. Reason: {}. Will retry.\norg.osgi.framework.BundleException: Unable to resolve aem-myproject.core [622](R 622.69): missing requirement [aem-myproject.core [622](R 622.69)] osgi.wiring.package; (osgi.wiring.package=software.amazon.awssdk.auth.credentials) Unresolved requirements: [[aem-myproject.core [622](R 622.69)] osgi.wiring.package; (osgi.wiring.package=software.amazon.awssdk.auth.credentials)]\n    at org.apache.felix.framework.Felix.resolveBundleRevision(Felix.java:4368)\n    at org.apache.felix.framework.Felix.startBundle(Felix.java:2281)\n    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:998)\n    at org.apache.felix.framework.BundleImpl.start(BundleImpl.java:984)\n    at org.apache.sling.installer.core.impl.tasks.BundleStartTask.execute(BundleStartTask.java:97) [org.apache.sling.installer.core:3.9.0.B002]\n    at org.apache.sling.installer.core.impl.OsgiInstallerImpl.doExecuteTasks(OsgiInstallerImpl.java:914) [org.apache.sling.installer.core:3.9.0.B002]\n    at org.apache.sling.installer.core.impl.OsgiInstallerImpl.executeTasks(OsgiInstallerImpl.java:749) [org.apache.sling.installer.core:3.9.0.B002]\n    at org.apache.sling.installer.core.impl.OsgiInstallerImpl.run(OsgiInstallerImpl.java:298) [org.apache.sling.installer.core:3.9.0.B002]\n    at java.base/java.lang.Thread.run(Thread.java:834)\n</code></pre>\n<p>I have¬†added below¬†two dependencies in my POM file,</p>\n<pre><code>&lt;dependency&gt;\n    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n    &lt;artifactId&gt;aws-sdk-java&lt;/artifactId&gt;\n    &lt;version&gt;2.20.2&lt;/version&gt;\n    &lt;scope&gt;provided&lt;/scope&gt;\n&lt;/dependency&gt;\n&lt;!-- https://mvnrepository.com/artifact/software.amazon.awssdk/auth --&gt;\n&lt;dependency&gt;\n    &lt;groupId&gt;software.amazon.awssdk&lt;/groupId&gt;\n    &lt;artifactId&gt;auth&lt;/artifactId&gt;\n    &lt;version&gt;2.20.2&lt;/version&gt;\n&lt;/dependency&gt;\n</code></pre>\n<p>But I am not sure why it could not resolve¬†software.amazon.awssdk.auth.credentials. Can anyone tell me if I need any other dependency¬†to resolve¬†this?</p>\n<p>Ref - <a href=\"https://github.com/aws/aws-sdk-java-v2/#using-the-sdk\" rel=\"nofollow noreferrer\">https://github.com/aws/aws-sdk-java-v2/#using-the-sdk</a>\n<a href=\"https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-simple-notification-service.html\" rel=\"nofollow noreferrer\">https://docs.aws.amazon.com/sdk-for-java/latest/developer-guide/examples-simple-notification-service.html</a></p>\n<p>Basically I want to get all below import statement classes,</p>\n<pre><code>import software.amazon.awssdk.regions.Region;\nimport software.amazon.awssdk.services.sns.SnsClient;\nimport software.amazon.awssdk.services.sns.model.CreateTopicRequest;\nimport software.amazon.awssdk.services.sns.model.CreateTopicResponse;\nimport software.amazon.awssdk.services.sns.model.SnsException;\n</code></pre>\n"},{"tags":["java","sql","oracle"],"comments":[{"owner":{"user_id":2778710,"display_name":"astentx"},"edited":false,"comment_id":133097157,"body":"According to <a href=\"https://docs.oracle.com/en/database/oracle/oracle-database/19/sqlrf/img_text/single_table_insert.html\" rel=\"nofollow noreferrer\">syntax diagram</a> <code>returning</code> is only possible for <code>values</code> clause, not for subquery."}],"answers":[{"owner":{"user_id":9149706,"display_name":"–º–∞–∫—Å–∏–º –∏–ª—å–∏–Ω"},"up_vote_count":0,"is_accepted":false,"creation_date":1676273899,"answer_id":75433030,"body":"<p>there is no such method, you can return the value to a variable : <code>INSERT INTO &lt;table&gt; VALUES (&lt;values&gt;) RETURNING ID into &lt;variable&gt;</code></p>\n"},{"owner":{"user_id":4956336,"display_name":"p3consulting"},"up_vote_count":0,"is_accepted":false,"creation_date":1676274114,"answer_id":75433050,"body":"<p>For INSERT/UPDATE/DELETE, you must use &quot;executeUpdate&quot; not &quot;executeQuery&quot;. To get back the inserted PK you can use &quot;INSERT ... RETURNING column_name INTO ?&quot; in an anonymous block or in a procedure &quot;INTO an_OUT_param&quot;. In both cases, you must register an OUT parameter in the Java code.</p>\n"},{"owner":{"user_id":21139120,"display_name":"Bogdan Dincescu"},"up_vote_count":0,"is_accepted":false,"creation_date":1676280992,"answer_id":75434142,"body":"<p>That returning clause makes sense only inside a pl/sql block, and not in some SQL statement sent from Java or some other client. That is why it doesn't work.\nA pl/sql block means basically somethign like below:</p>\n<pre><code>Declare \n  /* variable declarations as needed*/\n  v_ret number;\nbegin\n  /* several SQL statements as needed*/\n  insert into x_table (... /* list of columns*/\n  ) values (\n  /* values to insert*/'\n  x_id\n  ...\n  ) returning x_id into v_ret;     \nend;\n</code></pre>\n<p>I never recall having used returning with an insert select. Why? Because that select may possibly return no rows whatsoever or may return several rows. How could that work then with a simple variable?\nIn case a DML (could be insert select or could be even an update or delete) may affect several rows you should use returning bulk collect, like in the example at <a href=\"https://doyensys.com/blogs/returning-clause-with-bulk-collect/\" rel=\"nofollow noreferrer\">https://doyensys.com/blogs/returning-clause-with-bulk-collect/</a></p>\n"}],"owner":{"user_id":4859626,"display_name":"Sithija Piyuman Thewa Hettige"},"view_count":55,"up_vote_count":2,"answer_count":3,"score":2,"creation_date":1676272854,"question_id":75432898,"body":"<p>I have the below query</p>\n<pre><code>insert into amalgam_care (id, name, activestatus, incorpcountry, sourcetable, sourcesystem)\nselect fund_id, fund_name, active, domicile, 'EMIS_FUNDS', 'EMIS' from EMIS_FUNDS  \nwhere status in (2, 3, 4) and active = 1 order by fund_id\n</code></pre>\n<p>I want to get the IDs of inserted records returned to me</p>\n<p>I have tried below methods without success</p>\n<pre><code>insert into amalgam_care (id, name, activestatus, incorpcountry, sourcetable, sourcesystem)\nselect fund_id, fund_name, active, domicile, 'EMIS_FUNDS', 'EMIS' from EMIS_FUNDS  \nwhere status in (2, 3, 4) and active = 1 order by fund_id RETURNING ID INTO :1\n</code></pre>\n<p>tried with the returning key word it did not work (table has an ID column which is not an auto generated or auto incremented column , neither it is the primary key)</p>\n<p>Secondly in my java program I use prepared statements</p>\n<pre><code>String sql = &quot;insert into amalgam_care (id, name, activestatus, incorpcountry, sourcetable, sourcesystem) select fund_id, fund_name, active, domicile, 'EMIS_FUNDS', 'EMIS' from EMIS_FUNDS  where status in (2, 3, 4) and active = 1 order by fund_id&quot;;\ntry (PreparedStatement preparedStatement = conn.prepareStatement(sql,new String[] {&quot;ID&quot;})) {\n                preparedStatement.setFetchSize(fetchSize);\n                ResultSet rs1 =preparedStatement.executeQuery();\n                if (rs1.next()) {\n                    System.out.println(rs1.getString(&quot;ID&quot;));\n                }\n}\n</code></pre>\n<p>Above also fails with the below error</p>\n<pre><code>Caused by: Error : 933, Position : 233, Sql = insert into amalgam_care (id, name, activestatus, incorpcountry, sourcetable, sourcesystem) select fund_id, fund_name, active, domicile, 'EMIS_FUNDS', 'EMIS' from EMIS_FUNDS  where status in (2, 3, 4) and active = 1 order by fund_id RETURNING ID INTO :1 , OriginalSql = insert into amalgam_care (id, name, activestatus, incorpcountry, sourcetable, sourcesystem) select fund_id, fund_name, active, domicile, 'EMIS_FUNDS', 'EMIS' from EMIS_FUNDS  where status in (2, 3, 4) and active = 1 order by fund_id RETURNING ID INTO ?, Error Msg = ORA-00933: SQL command not properly ended\n</code></pre>\n<p>Any input on this will be highly appreciated</p>\n<p>I just want to get the IDs of the inserted records via prepared statements immediately back. my table column is named ID (ID is neither auto generated, nor the primary key)</p>\n"},{"tags":["java","spring-boot","azure-web-app-service","azure-appservice"],"comments":[{"owner":{"user_id":1409545,"display_name":"thebernardlim"},"edited":false,"comment_id":133097509,"body":"Just checking the basics before we go further, is the app running? What is the current status of the app?"},{"owner":{"user_id":21201509,"display_name":"Karan V"},"edited":false,"comment_id":133112084,"body":"yes app is running on local, it is also successfully getting deployed, I can see spring logs on azure as well but when I am opening the URL its showing 404."},{"owner":{"user_id":13797046,"display_name":"Wesley Masunika"},"edited":false,"comment_id":133515461,"body":"Did manage to get a work around for this? Been at it for 2 weeks now... Could use the solution rn."}],"answers":[{"owner":{"user_id":13427068,"display_name":"Mohit Ganorkar"},"up_vote_count":0,"is_accepted":false,"creation_date":1676284771,"answer_id":75434788,"body":"<ul>\n<li>Here I deployed a spring boot app in azure app service using the following app service configuration</li>\n</ul>\n<p><strong>Runtime Stack</strong> -  JAVA17</p>\n<p><strong>Java web server stack</strong> - Java SE (Embedded web server)</p>\n<p><strong>Operating System</strong> - Windows</p>\n<ul>\n<li>I deployed my spring boot app using IntelliJ extension for azure as it is my IDE</li>\n</ul>\n<p>My spring boot controller:</p>\n<pre><code>package com.example.demo;  \n  \nimport org.springframework.web.bind.annotation.GetMapping;  \nimport org.springframework.web.bind.annotation.RestController;  \n  \n@RestController  \npublic class Controller {  \n  \n    @GetMapping(&quot;/Hello&quot;)  \n    public String api ()  \n    {  \n        return &quot;Hello World&quot;;  \n      }  \n}\n</code></pre>\n<p>output after deployment :</p>\n<p><img src=\"https://i.imgur.com/Gujipfs.png\" alt=\"enter image description here\" /></p>\n"},{"owner":{"user_id":13797046,"display_name":"Wesley Masunika"},"up_vote_count":0,"is_accepted":false,"creation_date":1678385892,"answer_id":75688580,"body":"<p>After weeks of struggling, googling for solutions and coming up with nothing.</p>\n<p>The solution was deploying my Java Springboot api in <em><strong>Azure Spring App</strong></em>.</p>\n<p>I still dont know the reason why my app was refusing to run in Azure Web App. Even when the logs stated that the application was successfully.</p>\n<p>Unfortunately <em><strong>Azure Spring App</strong></em> are quite pricey to run :(.</p>\n"},{"owner":{"user_id":1526050,"display_name":"bpossolo"},"up_vote_count":1,"is_accepted":false,"creation_date":1678842447,"answer_id":75739689,"body":"<p>It appears the ApplicationInsights Java Agent that is attached to the jvm is causing the problem.<br />\nI don't know exactly why but I'm guessing the default agent jar that is used is not compiled to work with Java 17.</p>\n<p>If you have application insights on, try turning them off.\nOr, you can set the agent jar version (ApplicationInsightsAgent_EXTENSION_VERSION azure web service config prop) to the latest one (<code>3.4.10</code>) and that seems to fix it as well.</p>\n<p>See discussion and my reply here:\n<a href=\"https://github.com/spring-projects/spring-boot/issues/33974#issuecomment-1468484374\" rel=\"nofollow noreferrer\">https://github.com/spring-projects/spring-boot/issues/33974#issuecomment-1468484374</a></p>\n"}],"owner":{"user_id":21201509,"display_name":"Karan V"},"view_count":574,"up_vote_count":2,"answer_count":3,"score":2,"creation_date":1676270181,"question_id":75432566,"body":"<p>I have create a web app in Azure app service, when i am tying to access the public url it is giving me 404, even after deploying spring boot application it is giving same response, application is successfully running but not able to access the <a href=\"https://i.stack.imgur.com/9OhYe.png\" rel=\"nofollow noreferrer\">404 Error Screen</a>.\nI have followed below link:</p>\n<p><a href=\"https://learn.microsoft.com/en-us/azure/app-service/quickstart-java?tabs=javase&amp;pivots=platform-windows-development-environment-azure-portal\" rel=\"nofollow noreferrer\">https://learn.microsoft.com/en-us/azure/app-service/quickstart-java?tabs=javase&amp;pivots=platform-windows-development-environment-azure-portal</a></p>\n<p>I have tried all find possible solutions on the internet but no where it is clear.</p>\n"},{"tags":["java","apache-poi"],"comments":[{"owner":{"user_id":2905768,"display_name":"PMF"},"edited":false,"comment_id":133095793,"body":"You are reading paragraph by paragraph, there are no line numbers in paragraphs. How many lines or pages this will give depends on page size, font size, etc."},{"owner":{"user_id":685641,"display_name":"Gagravarr"},"edited":false,"comment_id":133098204,"body":"Render to a page-based format like PDF, then check? (Word DOC / DOCX are not page based)"},{"owner":{"user_id":20622284,"display_name":"lemon chow"},"edited":false,"comment_id":133139303,"body":"Is it possible to read a word file element by element including paragraphs, tables and images, shapes in the order in which they are and having a track of page number using any other library?"}],"owner":{"user_id":20622284,"display_name":"lemon chow"},"view_count":109,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676267414,"question_id":75432272,"body":"<p>While reading the Word file element by element using the Apache POI library, I need to have a track of current page number and current line number where the element is at? I have used the below code to get element by element:</p>\n<pre><code>import java.io.FileInputStream;\nimport java.io.IOException;\nimport org.apache.poi.xwpf.usermodel.*;\n\npublic class ReadWordFile {\n\n    public static void main(String[] args) {\n        try {\n            // Open the Word file using an InputStream\n            FileInputStream fis = new FileInputStream(&quot;file.docx&quot;);\n            // Create an XWPFDocument object to represent the Word file\n            XWPFDocument document = new XWPFDocument(fis);\n            // Iterate through the elements in the Word file\n            for (IBodyElement element : document.getBodyElements()) {\n                if (element instanceof XWPFParagraph) {\n                    // If the element is a paragraph, retrieve the text\n                    XWPFParagraph paragraph = (XWPFParagraph) element;\n                    String text = paragraph.getText();\n                    System.out.println(text);\n                } else if (element instanceof XWPFTable) {\n                    // If the element is a table, iterate through the rows and cells\n                    XWPFTable table = (XWPFTable) element;\n                    for (XWPFTableRow row : table.getRows()) {\n                        for (XWPFTableCell cell : row.getTableCells()) {\n                            String text = cell.getText();\n                            System.out.println(text);\n                        }\n                    }\n                } else if (element instanceof XWPFRun) {\n                    // If the element is an image, retrieve it and save it to a file\n                    XWPFRun run = (XWPFRun) element;\n                    if (run.getEmbeddedPictures() != null &amp;&amp; run.getEmbeddedPictures().size() &gt; 0) {\n                        XWPFPicture picture = run.getEmbeddedPictures().get(0);\n                        byte[] data = picture.getPictureData().getData();\n                    }\n                }\n            }\n            // Close the input stream\n            fis.close();\n        } catch (IOException e) {\n            e.printStackTrace();\n        }\n    }\n}\n</code></pre>\n"},{"tags":["java","kotlin","gradle","jvm-bytecode"],"owner":{"user_id":2065796,"display_name":"Sasha Shpota"},"view_count":80,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676189162,"question_id":75425643,"body":"<p>I have <a href=\"https://github.com/sol4k/sol4k\" rel=\"nofollow noreferrer\">a Kotlin project</a> that I want to compile to Java 1.8 bytecode so that it could also be used on Android as well. I use the <code>com.vanniktech.maven.publish</code> Gradle plugin to publish the library to Maven Central. This plugin works <a href=\"https://github.com/vanniktech/gradle-maven-publish-plugin/issues/518\" rel=\"nofollow noreferrer\">only when I set jvmToolchain to 11</a>. However I can still set <code>jvmTarget</code> to 1.8. This way, my configuration would look like this:</p>\n<pre><code>compileKotlin {\n    kotlinOptions.jvmTarget = '1.8'\n}\n\nkotlin {\n    jvmToolchain(11)\n}\n</code></pre>\n<p>This works, but I am not sure what bytecode it would produce. It also gives compilation warning asking me to set both values to the same version.</p>\n<p><strong>Question:</strong> What version of bytecode will Gradle project produce if  <code>jvmToolchain</code> is set to 11 and <code>jvmTarget</code>  to 1.8?</p>\n<p>Alliteratively, how can I make it produce Java 1.8 bytecode in a different way? (If I am doing something wrong).</p>\n"},{"tags":["java","oracle","plsql","nclob"],"owner":{"user_id":2526586,"display_name":"user2526586"},"view_count":134,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1676054601,"question_id":75414987,"body":"<p>I am working on Java+Spring+Oracle application. I am trying to add a new function on the database that stores <code>NClob</code> in a custom type. I ran into the error</p>\n<pre><code>ORA-65502: cannot access temporary LOB data\n</code></pre>\n<p>but I am not sure how to fix my issue.</p>\n<p><em>Please pardon me that I am still new to PL/SQL and it is my first time dealing with NClob.</em></p>\n<p>To begin with, I have a table like this:</p>\n<pre><code>CREATE TABLE &quot;NOTIFICATION&quot; (\n    &quot;NOTIFICATION_ID&quot; NUMBER GENERATED BY DEFAULT ON NULL AS IDENTITY,\n    ...\n    &quot;NOTIFICATION_CONTENT&quot; NCLOB,                -- HTML content of notification\n    ...\n    &quot;COMMENTS&quot;  NCLOB,\n    ...\n    CONSTRAINT &quot;PK_NOTIFICATION_ID&quot; PRIMARY KEY (&quot;NOTIFICATION_ID&quot;)\n);\n</code></pre>\n<p>I have a custom type to read/write encapsulated data:</p>\n<pre><code>create or replace TYPE NOTIFICATION_TYP FORCE AS OBJECT (\n    &quot;NOTIFICATION_ID&quot; NUMBER,\n    ...\n    &quot;NOTIFICATION_CONTENT&quot; NCLOB,                -- HTML content of notification\n    ...\n    &quot;COMMENTS&quot;  NCLOB,\n    ...\n    constructor function NOTIFICATION_TYP return self as result\n) NOT FINAL;\n\n</code></pre>\n<p>and its body simply as:</p>\n<pre><code>create or replace type body NOTIFICATION_TYP is\n  constructor function NOTIFICATION_TYP return self as result is\n  begin\n    return;\n  end;\nend;\n</code></pre>\n<p>So basically my (simplified)function in the database package is like this:</p>\n<pre><code>function create_notification(\n         pi_notification       in        NOTIFICATION_TYP\n        ,po_notification_id    out       number\n        ,po_return             out       return_typ\n    )\n    return integer as\n        v_excep_msg varchar2(200);\n    begin\n        insert into NOTIFICATION (\n            ...\n            NOTIFICATION_CONTENT,\n            ...\n            COMMENTS,\n            ...\n        ) values (\n            ...\n            pi_notification.NOTIFICATION_CONTENT,\n            ...\n            pi_notification.COMMENTS,\n            ...\n        ) RETURNING NOTIFICATION_ID INTO po_notification_id;\n        po_return := utils_pkg.get_success_info;\n        return c_success;\n\n    exception\n        when OTHERS then\n            v_excep_msg  :=  sqlerrm;\n            po_return := utils_pkg.get_error_info(SQLCODE, SQLERRM);\n            log_error_msg(\n                 pi_app_name         =&gt;  c_application_name\n                ,pi_error_msg        =&gt;  'Exception in creating notification'\n                ,pi_error_details    =&gt;  sqlerrm\n            );\n\n    return c_failure;\nend create_notification;\n\n</code></pre>\n<p>So from Java end, I am using <code>StoredProcedure</code> and <code>SQLData</code> to call the function in the package.\n<code>CreateNotificationFunction.java</code>:</p>\n<pre><code>import ...\npublic class CreateNotificationFunction  extends StoredProcedure{\n\n    public CreateNotificationFunction(JdbcTemplate jdbcTemplate){\n         super(jdbcTemplate, DAOConstants.CREATE_NOTIFICATION_FUNCTION);\n         setFunction(true);\n         declareParameter(new SqlOutParameter(DAOConstants.PO_FUNCTION_RESULT, OracleTypes.VARCHAR));\n         declareParameter(new SqlParameter(DAOConstants.PI_NOTIFICATION,OracleTypes.STRUCT,DAOConstants.TYPE_NOTIFICATION));\n         declareParameter(new SqlOutParameter(DAOConstants.PO_NOTIFICATION_ID, OracleTypes.NUMBER));\n         declareParameter(new SqlOutParameter(DAOConstants.PO_RETURN,OracleTypes.STRUCT,DAOConstants.TYPE_RETURN,  \n                new SqlReturnSqlData(SQLDBResult.class)));\n         allowsUnusedParameters();\n         compile();         \n    }\n    \n    @SuppressWarnings({ &quot;rawtypes&quot; })\n    public Map execute(JdbcTemplate jdbcTemplate, SQLNotification sqlNotification) {\n      Map&lt;String, Object&gt; params = new HashMap&lt;String, Object&gt;();\n        params.put(DAOConstants.PI_NOTIFICATION, sqlNotification);\n        return super.execute(params);\n    }   \n}\n\n</code></pre>\n<p><code>SQLNotification.java</code>:</p>\n<pre><code>public class SQLNotification implements SQLData {\n    private String notificationContent;\n    private String comments;\n    private static Connection connection;\n    ...\n\n    @Override\n    public void writeSQL(SQLOutput sqlOutput) throws SQLException {\n        ...\n        NClob notificationContentNClob = connection.createNClob();\n        notificationContentNClob.setString(1, getNotificationContent());\n        sqlOutput.writeNClob(notificationContentNClob);\n        ...\n        NClob commentsNClob = connection.createNClob();\n        commentsNClob.setString(1, getComments());\n        sqlOutput.writeNClob(commentsNClob);\n        ...\n    }\n}\n</code></pre>\n<p><em>(Is this the correct way to insert Java <code>String</code> into Oracle's <code>NClob</code>?)</em></p>\n<p>Not sure what went wrong...</p>\n<p><em>I am unsure when this error occurs - Is it when creating the type instance? Is it when calling the function? Or, is it when inserting the data into the table?</em></p>\n"},{"tags":["java","try-with-resources"],"comments":[{"owner":{"user_id":1431720,"display_name":"Robert"},"edited":false,"comment_id":133063987,"body":"No difference, tried resources get closed and cleaned up. I&#39;d go for option 2 for better readability."},{"owner":{"user_id":4931630,"display_name":"AterLux"},"edited":false,"comment_id":133064046,"body":"@Robert it is not correct. In the first example, if the outer constructor (<code>new OutputStreamWriter(...)</code>) failed, then internal object (<code>FileOutputStream</code>) remains unclosed and leaks resources"},{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"edited":false,"comment_id":133064131,"body":"@AterLux Although true in theory, it is extremely unlikely that <code>OutputStreamWriter(OutputStream, Charset)</code> throws an exception (basically the only option is to pass in a null for either parameter)."},{"owner":{"user_id":13963086,"display_name":"k314159"},"edited":false,"comment_id":133064220,"body":"@MarkRotteveel in this specific usage it is indeed unlikely that OutputStreamWriter will throw, but in a more general case, <code>try(Writer writer = new OutputStreamWriter(new FileOutputStream(new File(path)), &quot;bad charset name&quot;))</code> <i>will</i> leave the FileOutputStream open."},{"owner":{"user_id":466862,"display_name":"Mark Rotteveel"},"edited":false,"comment_id":133064372,"body":"@k314159 True, but unless you use user input for the character set, or run on a JVM with a limited number of character sets, that is a minor problem compared to the fact that you programmed in a non-existent character set. The stream will get closed eventually by its cleaner (or finalizer in older versions)."}],"owner":{"user_id":4332784,"display_name":"Shan"},"view_count":33,"up_vote_count":4,"answer_count":0,"score":2,"creation_date":1676043044,"question_id":75413087,"body":"<p>Is there any difference between the two below code snippets, in terms of GC, resource closing etc?</p>\n<p>or both are same/correct technically?</p>\n<pre><code>#Option 1\ntry(Writer writer = new OutputStreamWriter(new FileOutputStream(new File(path)), StandardCharsets.UTF_8)) {\n\n}\n\n#Option 2\ntry(FileOutputStream fis = new FileOutputStream(new File(path);\n    Writer writer = new OutputStreamWriter(fis, StandardCharsets.UTF_8)) {\n\n}\n\n</code></pre>\n<p>Just to understand what's the best approach to use in a highly used java application.</p>\n"},{"tags":["java","file","slack","slack-api","slack-block-kit"],"owner":{"user_id":19787507,"display_name":"Matanya Jellinek"},"view_count":24,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1675985647,"question_id":75405548,"body":"<p>I'm trying to add file to slack message in my interactive app using List in java\nI have PDF file in azure storage and link to the file that look like that <a href=\"https://azure.blob.core.windows.net/path/file.pdf\" rel=\"nofollow noreferrer\">https://azure.blob.core.windows.net/path/file.pdf</a>\nI also have the file in File object java.io.File;</p>\n<p>how can I add it to the list probably using the FileBlock object?</p>\n<p>I tried to add to the asBlocks method FileBlock but I couldn't find a way to make it work or give it my URL I get the invalid block error</p>\n"},{"tags":["java","javers"],"owner":{"user_id":3216060,"display_name":"Selbi"},"view_count":40,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1675942771,"question_id":75398071,"body":"<p>Perhaps I'm completely misunderstanding the purpose of JaVers, but I'm struggling here.</p>\n<p>I got this POJO with a few nested subclasses, and I would like to create a new instance of that object ONLY containing the differences between two other instances, every matching field should stay null in the new class. Here is what I mean:</p>\n<pre><code>public class RootClass {\n  private String someString;\n  private String someOtherString;\n  private ANestedClass aNestedClass;\n  \n  public RootClass(String someString, String someOtherString, ANestedClass aNestedClass) {\n    this.someString = someString;\n    this.someOtherString = someOtherString;\n    this.aNestedClass = aNestedClass;\n  }\n  \n  public static class ANestedClass {\n    private String someNestedString;\n    private String someOtherNestedString;\n    \n    public ANestedClass(String someNestedString, String someOtherNestedString) {\n      this.someNestedString = someNestedString;\n      this.someOtherNestedString = someOtherNestedString;\n    }\n  }\n}\n\npublic RootClass getDifferenceObject() {\n  RootClass a = new RootClass(&quot;foo&quot;, &quot;bar&quot;, new ANestedClass(&quot;hello&quot;, &quot;world&quot;));\n  RootClass b = new RootClass(&quot;foo&quot;, &quot;blabla&quot;, new ANestedClass(&quot;hello&quot;, &quot;earth&quot;);\n  \n  Javers javers = JaversBuilder.javers().withListCompareAlgorithm(ListCompareAlgorithm.LEVENSHTEIN_DISTANCE).build();\n  Diff compare = javers.compare(a, b);\n  \n  // now convert this somehow\n  RootClass abDiff = ...;\n  \n  assert(abDiff.someString == null);\n  assert(abDiff.someOtherString.equals(&quot;blabla&quot;));\n  assert(abDiff.aNestedClass.someNestedString == null);\n  assert(abDiff.aNestedClass.someOtherNestedString.equals(&quot;earth&quot;));\n}\n</code></pre>\n<p>Is this even possible with JaVers? I'm happy to pick a different library as well.</p>\n"},{"tags":["java","android","kotlin","mvvm","kotlin-stateflow"],"comments":[{"owner":{"user_id":3692788,"display_name":"JCarlosR"},"edited":false,"comment_id":134250495,"body":"Have you tried this way? <code>findViewTreeLifecycleOwner()?.lifecycleScope?.launch {&#47;* ... *&#47;}</code>"}],"owner":{"user_id":5607457,"display_name":"Greelings"},"view_count":97,"up_vote_count":2,"answer_count":0,"score":2,"creation_date":1675864481,"question_id":75386802,"body":"<p><a href=\"https://www.sasikanth.dev/using-viewmodels-in-custom-views/\" rel=\"nofollow noreferrer\">This article</a> explains how to use ViewModels in custom views :</p>\n<pre><code>class SummaryView(context: Context, attrs: AttributeSet?) : ConstraintLayout(context, attrs) {\n\n  private val viewModel by lazy {\n      ViewModelProvider(findViewTreeViewModelStoreOwner()!!).get&lt;SummaryViewModel&gt;()\n  }\n\n  override fun onAttachedToWindow() {\n      super.onAttachedToWindow()\n\n      viewModel.summaryModel.observe(findViewTreeLifecycleOwner()!!, ::populateSummaryView)\n  }\n\n}\n</code></pre>\n<p>It works well, but how can I use this technique using StateFlow instead of LiveData?\nHow can I do this without having a reference to the fragment?</p>\n<pre><code>class SummaryView(context: Context, attrs: AttributeSet?) : ConstraintLayout(context, attrs) {\n\n  private val viewModel by lazy {\n      ViewModelProvider(findViewTreeViewModelStoreOwner()!!).get&lt;SummaryViewModel&gt;()\n  }\n\n  override fun onAttachedToWindow() {\n      super.onAttachedToWindow()\n\n      lifecycleScope.launch {\n          viewLifecycleOwner.repeatOnLifecycle(Lifecycle.State.STARTED) {\n              viewModel.summaryModel.collect {\n\n              }\n          }\n      }\n  }\n\n}\n</code></pre>\n"},{"tags":["java","azure","oauth-2.0"],"comments":[{"owner":{"user_id":731178,"display_name":"J&#225;n Hala≈°a"},"edited":false,"comment_id":133017349,"body":"I don&#39;t know specifics of the Azure API, but the <a href=\"https://www.rfc-editor.org/rfc/rfc6749#section-4.4.2\" rel=\"nofollow noreferrer\">client credentials grant</a> is supposed to create a token for an OAuth2 client, not a user - it&#39;s for a service-to-service communication. If you need a token authorized by a user, you probably need to request it from them and use the auth code grant."},{"owner":{"user_id":1452528,"display_name":"Derek Gusoff"},"edited":false,"comment_id":133017606,"body":"figure this out on Postman before writing code. There&#39;s probably an issue (or a misunderstanding)  with the client registration. Reach out to the people who manage the identity server and work it out with them."},{"owner":{"user_id":21172299,"display_name":"Yuliya Kalcheva"},"edited":false,"comment_id":133018137,"body":"@J&#225;nHala≈°a i have also tried it to run  without username but i am still having the same authentication error."},{"owner":{"user_id":21172299,"display_name":"Yuliya Kalcheva"},"edited":false,"comment_id":133018244,"body":"@DerekGusoff thank you for your answer , I cannot figure it out on Postman because I do get an authentication token even without the password, it just is not a valid token. Would you see what kind of issue could that be ?"},{"owner":{"user_id":731178,"display_name":"J&#225;n Hala≈°a"},"edited":false,"comment_id":133018382,"body":"@YuliyaKalcheva You probably need a token authorized by a user to access the IMAP server. Because your OAuth2 client (identified by clientId) is not the IMAP server user. The line you commented out uses the password grant (which is deprecated) and requires the user&#39;s password. The token you get using the client_credentials grant is probably not usable for the IMAP server. Could it be so?"},{"owner":{"user_id":21172299,"display_name":"Yuliya Kalcheva"},"edited":false,"comment_id":133018750,"body":"thanks @J&#225;nHala≈°a.  That might be a reason. Do you know how can i authorize it to access IMAP server. I am very lost. The only way to make it work is specifiying the password and using password grants."},{"owner":{"user_id":731178,"display_name":"J&#225;n Hala≈°a"},"edited":false,"comment_id":133019242,"body":"@YuliyaKalcheva OK, I will write a full answer."},{"owner":{"user_id":731178,"display_name":"J&#225;n Hala≈°a"},"edited":false,"comment_id":133092079,"body":"@YuliyaKalcheva Was the answer helpful? If you solved the problem in some other way, it&#39;s good to write it here for others."}],"answers":[{"owner":{"user_id":731178,"display_name":"J&#225;n Hala≈°a"},"up_vote_count":0,"is_accepted":false,"creation_date":1675865577,"answer_id":75387018,"body":"<p>This is a generic answer that could be improved by someone with better knowledge of MS Azure services.</p>\n<p>You probably need a token authorized by a user to access the IMAP server. Because your OAuth2 client (identified by clientId) is not the IMAP server user - the token you get using the client_credentials grant is not usable for the IMAP server. The line you commented out uses the password grant (which is <a href=\"https://oauth.net/2/grant-types/password/\" rel=\"nofollow noreferrer\">deprecated</a>) and requires the user's password.</p>\n<p>I think the correct way from the OAuth2 standpoint is to use the <a href=\"https://learn.microsoft.com/en-us/azure/active-directory/develop/v2-oauth2-auth-code-flow\" rel=\"nofollow noreferrer\">auth code flow</a>. This way, the user (resource owner role) delegates their rights (represented by the requested scopes) to your application (OAuth2 client role) which can use them at the IMAP server (resource server role).</p>\n<p>The auth code flow requires user interaction - the user's browser gets redirected to the OAuth2 auth endpoint, the user gets authenticated and gives consent with delegating the requested rights to your application. Then your the browser is redirect to the <code>redirect_uri</code> handled by your application. The request has an auth code value which can be exchanged for tokens at the token endpoint of the OAuth2 server.</p>\n<p>If your application doesn't interact with users who could delegate their IMAP server access, you probably need to use the password grant or figure out how to make your application (identified by its <code>client_id</code>) an IMAP user and use the client_credentials grant (as you do now).</p>\n"}],"owner":{"user_id":21172299,"display_name":"Yuliya Kalcheva"},"view_count":152,"up_vote_count":2,"answer_count":1,"score":2,"creation_date":1675857095,"question_id":75385415,"body":"<p>I've been trying to obtain a token for oauth2 authentication to connect to a mail server using the following Java code:</p>\n<pre><code>public static String getAuthToken(String tenantId, String clientId, String client_secret) throws ClientProtocolException , IOException {\n    CloseableHttpClient client = HttpClients.createDefault();\n    HttpPost loginPost = new HttpPost(&quot;https://login.microsoftonline.com/&quot; + tenantId + &quot;/oauth2/v2.0/token&quot;);\n    //String scopes = &quot;https://outlook.office365.com/IMAP.AccessAsUser.All&quot;;\n    String scopes = &quot;https://outlook.office365.com/.default&quot;; // we need this scope when we have the grand_type as client credidentials\n\n    //String encodedBody = &quot;client_id=&quot; + clientId + &quot;&amp;scope=&quot; + scopes + &quot;&amp;client_secret=&quot; + client_secret+ &quot;&amp;username=&quot;+mailAddress+&quot;&amp;password=&quot; + EMAIL_PASSWORD + &quot;&amp;grant_type=password&quot;;\n    String encodedBody = &quot;client_id=&quot; + clientId + &quot;&amp;scope=&quot; + scopes + &quot;&amp;client_secret=&quot; + client_secret+ &quot;&amp;username=&quot;+mailAddress+ &quot;&amp;grant_type=client_credentials&quot;;\n    loginPost.setEntity(new StringEntity(encodedBody, ContentType.APPLICATION_FORM_URLENCODED));\n    loginPost.addHeader(new BasicHeader(&quot;cache-control&quot;, &quot;no-cache&quot;));\n    CloseableHttpResponse loginResponse = client.execute(loginPost);\n    InputStream inputStream = loginResponse.getEntity().getContent();\n    byte[] response = readAllBytes(inputStream);\n    ObjectMapper objectMapper = new ObjectMapper();\n    JavaType type = objectMapper.constructType(\n        objectMapper.getTypeFactory().constructParametricType(Map.class, String.class, String.class));\n    Map&lt;String, String&gt; parsed = new ObjectMapper().readValue(response, type);\n    return parsed.get(&quot;access_token&quot;);\n}\n</code></pre>\n<p>Yet if I try to get the token without having the password in the request body (if I add the password like in the commented line, all works fine), I cannot connect with that token and get the following authentication failed error:</p>\n<p><code>Exception in thread &quot;main&quot; javax.mail.AuthenticationFailedException: AUTHENTICATE failed. at com.sun.mail.imap.IMAPStore.protocolConnect(IMAPStore.java:732) at javax.mail.Service.connect(Service.java:366) at yk.Auth.main(Auth.java:79)</code></p>\n<p>I've tried adapting the request body (changing/removing the scope etc.) but nothing changes.<br />\nWhat needs to be done in order to obtain a valid token without sending the password as part of the request?</p>\n<p>Thank you!</p>\n"}],"has_more":true,"quota_max":300,"quota_remaining":177}